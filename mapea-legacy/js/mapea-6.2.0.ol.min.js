!function(t){function e(e){for(var r,i,o=e[0],a=e[1],s=0,u=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&u.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(l&&l(e);u.length;)u.shift()()}var r={},n={0:0};function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var l=a;i(i.s=165)}([function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return u})),r.d(e,"g",(function(){return c})),r.d(e,"h",(function(){return h})),r.d(e,"i",(function(){return f})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return d})),r.d(e,"l",(function(){return g})),r.d(e,"m",(function(){return y})),r.d(e,"n",(function(){return m})),r.d(e,"o",(function(){return _})),r.d(e,"p",(function(){return v})),r.d(e,"b",(function(){return b})),r.d(e,"q",(function(){return x})),r.d(e,"r",(function(){return w})),r.d(e,"s",(function(){return E})),r.d(e,"t",(function(){return S})),r.d(e,"u",(function(){return I})),r.d(e,"v",(function(){return C})),r.d(e,"w",(function(){return T})),r.d(e,"x",(function(){return P})),r.d(e,"y",(function(){return R})),r.d(e,"z",(function(){return L})),r.d(e,"A",(function(){return M})),r.d(e,"B",(function(){return N})),r.d(e,"C",(function(){return A})),r.d(e,"D",(function(){return k})),r.d(e,"E",(function(){return j})),r.d(e,"F",(function(){return F})),r.d(e,"G",(function(){return D})),r.d(e,"I",(function(){return G})),r.d(e,"J",(function(){return U})),r.d(e,"K",(function(){return B})),r.d(e,"H",(function(){return z})),r.d(e,"a",(function(){return V})),r.d(e,"L",(function(){return q}));var n=r(66),i=r(36),o=r(11);function a(t){for(var e=d(),r=0,n=t.length;r<n;++r)w(e,t[r]);return e}function s(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function l(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function u(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i}function c(t,e){return f(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function f(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function p(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],s=e[0],l=e[1],u=i.a.UNKNOWN;return s<r?u|=i.a.LEFT:s>o&&(u|=i.a.RIGHT),l<n?u|=i.a.BELOW:l>a&&(u|=i.a.ABOVE),u===i.a.UNKNOWN&&(u=i.a.INTERSECTING),u}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function y(t){return g(1/0,1/0,-1/0,-1/0,t)}function m(t,e){var r=t[0],n=t[1];return g(r,n,r,n,e)}function _(t,e,r,n,i){return E(y(i),t,e,r,n)}function v(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function b(t,e,r){return Math.abs(t[0]-e[0])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[3]-e[3])<r}function x(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function w(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function E(t,e,r,n,i){for(;r<n;r+=i)O(t,e[r],e[r+1]);return t}function O(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function S(t,e){var r;return(r=e(C(t)))||(r=e(T(t)))||(r=e(j(t)))?r:(r=e(k(t)))||!1}function I(t){var e=0;return G(t)||(e=F(t)*M(t)),e}function C(t){return[t[0],t[1]]}function T(t){return[t[2],t[1]]}function P(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function R(t,e){var r;return e===n.a.BOTTOM_LEFT?r=C(t):e===n.a.BOTTOM_RIGHT?r=T(t):e===n.a.TOP_LEFT?r=k(t):e===n.a.TOP_RIGHT?r=j(t):Object(o.a)(!1,13),r}function L(t,e,r,n,i){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),l=Math.sin(r),u=o*s,c=o*l,h=a*s,f=a*l,p=t[0],d=t[1],y=p-u+f,m=p-u-f,_=p+u-f,v=p+u+f,b=d-c-h,x=d-c+h,w=d+c+h,E=d+c-h;return g(Math.min(y,m,_,v),Math.min(b,x,w,E),Math.max(y,m,_,v),Math.max(b,x,w,E),i)}function M(t){return t[3]-t[1]}function N(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return D(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):y(n),n}function A(t){return[t[2]-t[0],t[3]-t[1]]}function k(t){return[t[0],t[3]]}function j(t){return[t[2],t[3]]}function F(t){return t[2]-t[0]}function D(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function G(t){return t[2]<t[0]||t[3]<t[1]}function U(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function B(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function z(t,e,r){var n=!1,o=p(t,e),a=p(t,r);if(o===i.a.INTERSECTING||a===i.a.INTERSECTING)n=!0;else{var s=t[0],l=t[1],u=t[2],c=t[3],h=e[0],f=e[1],d=r[0],g=r[1],y=(g-f)/(d-h),m=void 0,_=void 0;a&i.a.ABOVE&&!(o&i.a.ABOVE)&&(n=(m=d-(g-c)/y)>=s&&m<=u),n||!(a&i.a.RIGHT)||o&i.a.RIGHT||(n=(_=g-(d-u)*y)>=l&&_<=c),n||!(a&i.a.BELOW)||o&i.a.BELOW||(n=(m=d-(g-l)/y)>=s&&m<=u),n||!(a&i.a.LEFT)||o&i.a.LEFT||(n=(_=g-(d-s)*y)>=l&&_<=c)}return n}function V(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)i.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var l=[],u=[],c=(s=0,i.length);s<c;s+=2)l.push(i[s]),u.push(i[s+1]);return function(t,e,r){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(l,u,r)}function q(t,e){var r=e.getExtent(),n=P(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=F(r),o=Math.floor((n[0]-r[0])/i)*i;t[0]-=o,t[2]-=o}return t}},function(t,e,r){"use strict";var n,i=r(40),o=r(18),a=r(4),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=6378137,u=Math.PI*l,c=[-u,-u,u,u],h=[-180,-85,180,85],f=l*Math.log(Math.tan(Math.PI/2)),p=function(t){function e(e){return t.call(this,{code:e,units:o.b.METERS,extent:c,global:!0,worldExtent:h,getPointResolution:function(t,e){return t/Object(a.c)(e[1]/l)}})||this}return s(e,t),e}(i.a),d=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("http://www.opengis.net/def/crs/EPSG/0/3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i){o[a]=u*t[a]/180;var s=l*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));s>f?s=f:s<-f&&(s=-f),o[a+1]=s}return o}function y(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i)o[a]=180*t[a]/u,o[a+1]=360*Math.atan(Math.exp(t[a+1]/l))/Math.PI-90;return o}var m=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=[-180,-90,180,90],v=6378137*Math.PI/180,b=function(t){function e(e,r){return t.call(this,{code:e,units:o.b.DEGREES,extent:_,axisOrientation:r,global:!0,metersPerUnit:v,worldExtent:_})||this}return m(e,t),e}(i.a),x=[new b("CRS:84"),new b("EPSG:4326","neu"),new b("urn:ogc:def:crs:OGC:1.3:CRS84"),new b("urn:ogc:def:crs:OGC:2:84"),new b("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new b("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new b("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],w={};var E=r(52),O=r(0),S=r(13),I=r(61);r.d(e,"i",(function(){return T})),r.d(e,"t",(function(){return R})),r.d(e,"e",(function(){return L})),r.d(e,"o",(function(){return M})),r.d(e,"p",(function(){return N})),r.d(e,"d",(function(){return A})),r.d(e,"g",(function(){return k})),r.d(e,"c",(function(){return F})),r.d(e,"k",(function(){return D})),r.d(e,"v",(function(){return G})),r.d(e,"j",(function(){return U})),r.d(e,"r",(function(){return B})),r.d(e,"q",(function(){return z})),r.d(e,"z",(function(){return V})),r.d(e,"A",(function(){return q})),r.d(e,"u",(function(){return Z})),r.d(e,"f",(function(){return K})),r.d(e,"s",(function(){return J})),r.d(e,"B",(function(){return $})),r.d(e,"w",(function(){return Q})),r.d(e,"l",(function(){return tt})),r.d(e,"x",(function(){return et})),r.d(e,"m",(function(){return rt})),r.d(e,"y",(function(){return nt})),r.d(e,"n",(function(){return it})),r.d(e,"h",(function(){return ot})),r.d(e,"a",(function(){return o.a})),r.d(e,"b",(function(){return i.a}));var C=!0;function T(t){C=!(void 0===t||t)}function P(t,e,r){var n;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function R(t,e,r){if(void 0!==e&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function L(t){!function(t,e){w[t]=e}(t.getCode(),t),Object(E.a)(t,t,P)}function M(t){return"string"==typeof t?w[e=t]||w[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function N(t,e,r,n){var i,a=(t=M(t)).getPointResolutionFunc();if(a){if(i=a(e,r),n&&n!==t.getUnits())(l=t.getMetersPerUnit())&&(i=i*l/o.a[n])}else{var s=t.getUnits();if(s==o.b.DEGREES&&!n||n==o.b.DEGREES)i=e;else{var l,u=B(t,M("EPSG:4326"));if(u===R&&s!==o.b.DEGREES)i=e*t.getMetersPerUnit();else{var c=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];c=u(c,c,2),i=(Object(I.b)(c.slice(0,2),c.slice(2,4))+Object(I.b)(c.slice(4,6),c.slice(6,8)))/2}void 0!==(l=n?o.a[n]:t.getMetersPerUnit())&&(i/=l)}}return i}function A(t){!function(t){t.forEach(L)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Object(E.a)(e,t,P)}))}))}function k(t,e){return t?"string"==typeof t?M(t):t:M(e)}function j(t){return function(e,r,n){for(var i=e.length,o=void 0!==n?n:2,a=void 0!==r?r:new Array(i),s=0;s<i;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var u=o-1;u>=2;--u)a[s+u]=e[s+u]}return a}}function F(t,e,r,n){var i=M(t),o=M(e);Object(E.a)(i,o,j(r)),Object(E.a)(o,i,j(n))}function D(t,e){return T(),V(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function G(t,e){var r=V(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Object(a.g)(n+180,360)-180),r}function U(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||B(t,e)===P)&&r}function B(t,e){var r=t.getCode(),n=e.getCode(),i=Object(E.c)(r,n);return i||(i=R),i}function z(t,e){return B(M(t),M(e))}function V(t,e,r){return z(e,r)(t,void 0,t.length)}function q(t,e,r,n){var i=z(e,r);return Object(O.a)(t,i,void 0,n)}var Y,W,X,H=null;function Z(t){H=M(t)}function K(){H=null}function J(){return H}function $(){Z("EPSG:4326")}function Q(t,e){return H?V(t,e,H):t}function tt(t,e){return H?V(t,H,e):(C&&!Object(S.g)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(C=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function et(t,e){return H?q(t,e,H):t}function rt(t,e){return H?q(t,H,e):t}function nt(t,e){if(!H)return t;var r=M(e).getUnits(),n=H.getUnits();return r&&n?t*o.a[r]/o.a[n]:t}function it(t,e){if(!H)return t;var r=M(e).getUnits(),n=H.getUnits();return r&&n?t*o.a[n]/o.a[r]:t}function ot(t,e,r){return function(n){var i,o,s=n[0],l=n[1];if(t.canWrapX()){var u=t.getExtent(),c=Object(O.F)(u);(o=Object(S.i)(n,t,c))&&(s-=o*c),s=Object(a.b)(s,u[0],u[2]),l=Object(a.b)(l,u[1],u[3]),i=r([s,l])}else i=r(n);return o&&e.canWrapX()&&(i[0]+=o*Object(O.F)(e.getExtent())),i}}A(d),A(x),Y=d,W=g,X=y,x.forEach((function(t){Y.forEach((function(e){Object(E.a)(t,e,W),Object(E.a)(e,t,X)}))}))},function(t,e,r){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,r){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return a}));var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var a="6.14.1"},function(t,e,r){"use strict";function n(t,e,r){return Math.min(Math.max(t,e),r)}r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"f",(function(){return o})),r.d(e,"k",(function(){return a})),r.d(e,"j",(function(){return s})),r.d(e,"i",(function(){return l})),r.d(e,"l",(function(){return u})),r.d(e,"m",(function(){return c})),r.d(e,"g",(function(){return h})),r.d(e,"e",(function(){return f})),r.d(e,"h",(function(){return d})),r.d(e,"d",(function(){return g})),r.d(e,"a",(function(){return y}));var i="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},o="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function a(t,e,r,n,i,o){var a=i-r,l=o-n;if(0!==a||0!==l){var u=((t-r)*a+(e-n)*l)/(a*a+l*l);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=l*u)}return s(t,e,r,n)}function s(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function l(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var l=r+1;l<e;l++)for(var u=-t[l][r]/t[r][r],c=r;c<e+1;c++)r==c?t[l][c]=0:t[l][c]+=u*t[r][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}function u(t){return 180*t/Math.PI}function c(t){return t*Math.PI/180}function h(t,e){var r=t%e;return r*e<0?r+e:r}function f(t,e,r){return t+r*(e-t)}function p(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function d(t,e){return Math.round(p(t,e))}function g(t,e){return Math.floor(p(t,e))}function y(t,e){return Math.ceil(p(t,e))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return a}));var n="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};function i(t){for(var e in t)delete t[e]}var o="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function a(t){var e;for(e in t)return!1;return!e}},function(t,e,r){"use strict";function n(t,e,r){for(var n,o,a=r||i,s=0,l=t.length,u=!1;s<l;)(o=+a(t[n=s+(l-s>>1)],e))<0?s=n+1:(l=n,u=!o);return u?s:~s}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function a(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof r?r(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return n-1}function s(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function l(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function u(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null}function c(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function h(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort((function(t,r){return e(t.value,r.value)||t.index-r.index})),r=0;r<t.length;r++)t[r]=i[r].value}function f(t,e){var r;return!t.every((function(n,i){return r=i,!e(n,i,t)}))?r:-1}function p(t,e,r){var n=e||i;return t.every((function(e,i){if(0===i)return!0;var o=n(t[i-1],e);return!(o>0||r&&0===o)}))}r.d(e,"a",(function(){return n})),r.d(e,"i",(function(){return i})),r.d(e,"f",(function(){return o})),r.d(e,"h",(function(){return a})),r.d(e,"j",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"b",(function(){return c})),r.d(e,"k",(function(){return h})),r.d(e,"e",(function(){return f})),r.d(e,"g",(function(){return p}))},function(t,e,r){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a}));var n=r(5);function i(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function o(t,e,r,n){return i(t,e,r,n,!0)}function a(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(n.b)(t))}},function(t,e,r){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,r){"use strict";r.d(e,"d",(function(){return s})),r.d(e,"h",(function(){return l})),r.d(e,"g",(function(){return u})),r.d(e,"k",(function(){return h})),r.d(e,"a",(function(){return f})),r.d(e,"i",(function(){return p})),r.d(e,"j",(function(){return d})),r.d(e,"f",(function(){return g})),r.d(e,"m",(function(){return y})),r.d(e,"b",(function(){return m})),r.d(e,"c",(function(){return _})),r.d(e,"e",(function(){return v})),r.d(e,"l",(function(){return b}));var n,i=r(27),o=r(11),a=new Array(6);function s(){return[1,0,0,1,0,0]}function l(t){return c(t,1,0,0,1,0,0)}function u(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=r*l+i*u,t[1]=n*l+o*u,t[2]=r*c+i*h,t[3]=n*c+o*h,t[4]=r*f+i*p+a,t[5]=n*f+o*p+s,t}function c(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function f(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function p(t,e){var r=Math.cos(e),n=Math.sin(e);return u(t,c(a,r,n,-n,r,0,0))}function d(t,e,r){return u(t,c(a,e,0,0,r,0,0))}function g(t,e,r){return c(t,e,0,0,r,0,0)}function y(t,e,r){return u(t,c(a,1,0,0,1,e,r))}function m(t,e,r,n,i,o,a,s){var l=Math.sin(o),u=Math.cos(o);return t[0]=n*u,t[1]=i*l,t[2]=-n*l,t[3]=i*u,t[4]=a*n*u-s*n*l+e,t[5]=a*i*l+s*i*u+r,t}function _(t,e,r,n,i,o,a){return b(m([1,0,0,1,0,0],t,e,r,n,i,o,a))}function v(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];Object(o.a)(0!==n,32);var i=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5];return t[0]=l/n,t[1]=-a/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*c-l*u)/n,t[5]=-(i*c-a*u)/n,t}function b(t){var e="matrix("+t.join(", ")+")";if(i.h)return e;var r=n||(n=document.createElement("div"));return r.style.transform=e,r.style.transform}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(68);function i(t,e){if(!t)throw new n.a(e)}},function(t,e,r){"use strict";r.d(e,"e",(function(){return n})),r.d(e,"f",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"h",(function(){return l})),r.d(e,"j",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return h})),r.d(e,"b",(function(){return f})),r.d(e,"i",(function(){return p}));const n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},i={};for(const t in n)n.hasOwnProperty(t)&&(i[n[t]]=parseInt(t,10));const o={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",297:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",3072:"SHORT",3073:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"},a=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets,i.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},l={};for(const t in s)s.hasOwnProperty(t)&&(l[s[t]]=parseInt(t,10));const u={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},h={Version:0,AddCompression:1},f={None:0,Deflate:1},p={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},d={};for(const t in p)p.hasOwnProperty(t)&&(d[p[t]]=parseInt(t,10))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return c})),r.d(e,"h",(function(){return h})),r.d(e,"g",(function(){return f})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return d})),r.d(e,"l",(function(){return g})),r.d(e,"f",(function(){return y})),r.d(e,"m",(function(){return m})),r.d(e,"n",(function(){return _})),r.d(e,"o",(function(){return v})),r.d(e,"p",(function(){return b})),r.d(e,"i",(function(){return x}));var n=r(0),i=r(4),o=r(49);function a(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function s(t,e){var r=e.getRadius(),n=e.getCenter(),i=n[0],o=n[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[i+r*a/l,o+r*s/l]}function l(t,e){var r,n,i=t[0],o=t[1],a=e[0],s=e[1],l=a[0],u=a[1],c=s[0],h=s[1],f=c-l,p=h-u,d=0===f&&0===p?0:(f*(i-l)+p*(o-u))/(f*f+p*p||0);return d<=0?(r=l,n=u):d>=1?(r=c,n=h):(r=l+d*f,n=u+d*p),[r,n]}function u(t){return function(e){return v(e,t)}}function c(t,e,r){var n=Object(i.g)(e+180,360)-180,a=Math.abs(3600*n),s=r||0,l=Math.pow(10,s),u=Math.floor(a/3600),c=Math.floor((a-3600*u)/60),h=a-3600*u-60*c;return(h=Math.ceil(h*l)/l)>=60&&(h=0,c+=1),c>=60&&(c=0,u+=1),u+"° "+Object(o.b)(c,2)+"′ "+Object(o.b)(h,2,s)+"″"+(0==n?"":" "+t.charAt(n<0?1:0))}function h(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function f(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function p(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function d(t,e){return t[0]*=e,t[1]*=e,t}function g(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function y(t,e){return Math.sqrt(g(t,e))}function m(t,e){return g(t,l(t,e))}function _(t,e){return t?c("NS",t[1],e)+" "+c("EW",t[0],e):""}function v(t,e){return h(t,"{x}, {y}",e)}function b(t,e){if(e.canWrapX()){var r=Object(n.F)(e.getExtent()),i=x(t,e,r);i&&(t[0]-=i*r)}return t}function x(t,e,r){var i=e.getExtent(),o=0;if(e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])){var a=r||Object(n.F)(i);o=Math.floor((t[0]-i[0])/a)}return o}},function(t,e,r){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"e",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"f",(function(){return c}));var n=r(27);function i(t,e,r,i){var o;return o=r&&r.length?r.shift():n.h?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",i)}function o(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function a(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function s(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function l(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function u(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function c(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}},function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function i(t){return t[0]>0&&t[1]>0}function o(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function a(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return a}))},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return l}));var n=r(6);function i(){return!0}function o(){return!1}function a(){}function s(t){var e,r,i,o=!1;return function(){var a=Array.prototype.slice.call(arguments);return o&&this===i&&Object(n.b)(a,r)||(o=!0,i=this,r=a,e=t.apply(this,arguments)),e}}function l(t){return function(){var e;try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}},function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return a}));var n={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},i={9001:n.METERS,9002:n.FEET,9003:n.USFEET,9101:n.RADIANS,9102:n.DEGREES};function o(t){return i[t]}var a={};a[n.RADIANS]=6370997/(2*Math.PI),a[n.DEGREES]=2*Math.PI*6370997/360,a[n.FEET]=.3048,a[n.METERS]=1,a[n.USFEET]=1200/3937,e.b=n},function(t,e,r){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"h",(function(){return h})),r.d(e,"g",(function(){return f}));var n="ol-hidden",i="ol-selectable",o="ol-unselectable",a="ol-unsupported",s="ol-control",l="ol-collapsed",u=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),c=["style","variant","weight","size","lineHeight","family"],h=function(t){var e=t.match(u);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=c.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[c[n]]=o)}return r.families=r.family.split(/,\s?/),r};function f(t){return 1===t?"":String(Math.round(100*t)/100)}},function(t,e,r){"use strict";r.d(e,"b",(function(){return i}));var n=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function i(t){t.stopPropagation()}e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function i(t,e,r){return t+"/"+e+"/"+r}function o(t){return i(t[0],t[1],t[2])}function a(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return i(e[0],e[1],e[2])}function s(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function u(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o=e.getFullTileRange(r);return!o||o.containsXY(n,i)}r.d(e,"a",(function(){return n})),r.d(e,"e",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"f",(function(){return l})),r.d(e,"g",(function(){return u}))},function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return h})),r.d(e,"a",(function(){return f})),r.d(e,"e",(function(){return d})),r.d(e,"d",(function(){return g}));var n=r(11),i=r(4),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"==typeof t?t:d(t)}function l(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}var u,c,h=(u={},c=0,function(t){var e;if(u.hasOwnProperty(t))e=u[t];else{if(c>=1024){var r=0;for(var i in u)0==(3&r++)&&(delete u[i],--c)}e=function(t){var e,r,i,s,u;if(a.exec(t)&&(t=l(t)),o.exec(t)){var c=t.length-1,h=void 0;h=c<=4?1:2;var f=4===c||8===c;e=parseInt(t.substr(1+0*h,h),16),r=parseInt(t.substr(1+1*h,h),16),i=parseInt(t.substr(1+2*h,h),16),s=f?parseInt(t.substr(1+3*h,h),16):255,1==h&&(e=(e<<4)+e,r=(r<<4)+r,i=(i<<4)+i,f&&(s=(s<<4)+s)),u=[e,r,i,s/255]}else 0==t.indexOf("rgba(")?p(u=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((u=t.slice(4,-1).split(",").map(Number)).push(1),p(u)):Object(n.a)(!1,14);return u}(t),u[t]=e,++c}return e});function f(t){return Array.isArray(t)?t:h(t)}function p(t){return t[0]=Object(i.b)(t[0]+.5|0,0,255),t[1]=Object(i.b)(t[1]+.5|0,0,255),t[2]=Object(i.b)(t[2]+.5|0,0,255),t[3]=Object(i.b)(t[3],0,1),t}function d(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function g(t){return a.test(t)&&(t=l(t)),o.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}},function(t,e,r){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,r){"use strict";function n(t,e){for(const r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}function i(t,e){if(t.length<e.length)return!1;return t.substr(t.length-e.length)===e}function o(t,e){const{length:r}=t;for(let n=0;n<r;n++)e(t[n],n)}function a(t){const e={};for(const r in t)if(t.hasOwnProperty(r)){e[t[r]]=r}return e}function s(t,e){const r=[];for(let n=0;n<t;n++)r.push(e(n));return r}async function l(t){return new Promise(e=>setTimeout(e,t))}function u(t,e){const r=Array.isArray(t)?t:Array.from(t),n=Array.isArray(e)?e:Array.from(e);return r.map((t,e)=>[t,n[e]])}r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"h",(function(){return l})),r.d(e,"i",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return f}));class c extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,c),this.name="AbortError"}}class h extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const f=h},function(t,e,r){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"f",(function(){return o})),r.d(e,"g",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"h",(function(){return u})),r.d(e,"c",(function(){return c})),r.d(e,"e",(function(){return h}));var n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",i=-1!==n.indexOf("firefox"),o=-1!==n.indexOf("safari")&&-1==n.indexOf("chrom")&&!!(n.indexOf("version/15.4")>=0||n.match(/cpu (os|iphone os) 15_4 like mac os x/)),a=-1!==n.indexOf("webkit")&&-1==n.indexOf("edge"),s=-1!==n.indexOf("macintosh"),l="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,u="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,c="undefined"!=typeof Image&&Image.prototype.decode,h=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},function(t,e,r){"use strict";function n(t){return Math.pow(t,3)}function i(t){return 1-n(1-t)}function o(t){return 3*t*t-2*t*t*t}function a(t){return t}function s(t){return t<.5?o(2*t):1-o(2*(t-.5))}r.r(e),r.d(e,"easeIn",(function(){return n})),r.d(e,"easeOut",(function(){return i})),r.d(e,"inAndOut",(function(){return o})),r.d(e,"linear",(function(){return a})),r.d(e,"upAndDown",(function(){return s}))},function(t,e,r){"use strict";r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return h})),r.d(e,"b",(function(){return f})),r.d(e,"a",(function(){return d})),r.d(e,"c",(function(){return g}));var n=r(66),i=r(37),o=r(18),a=r(50),s=r(1),l=r(0),u=r(16);function c(t){var e=t.getDefaultTileGrid();return e||(e=d(t),t.setDefaultTileGrid(e)),e}function h(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=g(r);if(Object(l.g)(o,i))return e;var a=Object(l.F)(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,n)}function f(t){var e=t||{},r=e.extent||Object(s.o)("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:p(r,e.maxZoom,e.tileSize,e.maxResolution)};return new i.a(n)}function p(t,e,r,n){for(var i=void 0!==e?e:a.a,o=Object(l.A)(t),s=Object(l.F)(t),c=Object(u.d)(void 0!==r?r:a.b),h=n>0?n:Math.max(s/c[0],o/c[1]),f=i+1,p=new Array(f),d=0;d<f;++d)p[d]=h/Math.pow(2,d);return p}function d(t,e,r,o){return function(t,e,r,o){var a=void 0!==o?o:n.a.TOP_LEFT,s=p(t,e,r);return new i.a({extent:t,origin:Object(l.y)(t,a),resolutions:s,tileSize:r})}(g(t),e,r,o)}function g(t){var e=(t=Object(s.o)(t)).getExtent();if(!e){var r=180*s.a[o.b.DEGREES]/t.getMetersPerUnit();e=Object(l.l)(-r,-r,r,r)}return e}},function(t,e,r){"use strict";var n,i=r(21),o=r(47),a=r(31),s=r(5),l=r(3),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.key=r,i.oldValue=n,i}return u(e,t),e}(i.a),h=function(t){function e(e){var r=t.call(this)||this;return r.on,r.once,r.un,Object(l.c)(r),r.values_=null,void 0!==e&&r.setProperties(e),r}return u(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Object(s.a)({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var r;r="change:".concat(t),this.hasListener(r)&&this.dispatchEvent(new c(r,t,e)),r=o.a.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new c(r,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:".concat(t),e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:".concat(t),e)},e.prototype.set=function(t,e,r){var n=this.values_||(this.values_={});if(r)n[t]=e;else{var i=n[t];n[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.applyProperties=function(t){t.values_&&Object(s.a)(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],Object(s.d)(this.values_)&&(this.values_=null),e||this.notify(t,r)}},e}(a.a);e.a=h},function(t,e,r){"use strict";r.d(e,"b",(function(){return u}));var n,i=r(42),o=r(7),a=r(8),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return s(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=Object(a.a)(this,t[i],e);return n}return Object(a.a)(this,t,e)},e.prototype.onceInternal=function(t,e){var r;if(Array.isArray(t)){var n=t.length;r=new Array(n);for(var i=0;i<n;++i)r[i]=Object(a.b)(this,t[i],e)}else r=Object(a.b)(this,t,e);return e.ol_key=r,r},e.prototype.unInternal=function(t,e){var r=e.ol_key;if(r)u(r);else if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(i.a);function u(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)Object(a.c)(t[e]);else Object(a.c)(t)}l.prototype.on,l.prototype.once,l.prototype.un,e.a=l},function(t,e,r){"use strict";var n,i=r(21),o=r(14),a=r(39),s=r(7),l=r(69),u=r(82),c=r(57),h=r(0),f=r(8),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e,r,n,i,s,l,f){var p=this,d=e.getExtent(),g=r.getExtent(),y=g?Object(h.B)(n,g):n,m=Object(h.x)(y),_=Object(c.b)(e,r,m,i),v=a.b,b=new u.a(e,r,y,d,_*v,i),x=l(b.calculateSourceExtent(),_,s),w=x?o.a.IDLE:o.a.EMPTY,E=x?x.getPixelRatio():1;return(p=t.call(this,n,i,E,w)||this).targetProj_=r,p.maxSourceExtent_=d,p.triangulation_=b,p.targetResolution_=i,p.targetExtent_=n,p.sourceImage_=x,p.sourcePixelRatio_=E,p.interpolate_=f,p.canvas_=null,p.sourceListenerKey_=null,p}return p(e,t),e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==o.a.LOADED){var e=Object(h.F)(this.targetExtent_)/this.targetResolution_,r=Object(h.A)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(c.c)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=this.sourceImage_.getState();t==o.a.LOADED||t==o.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(f.a)(this.sourceImage_,s.a.CHANGE,(function(t){var e=this.sourceImage_.getState();e!=o.a.LOADED&&e!=o.a.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){Object(f.c)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(l.a),g=r(46),y=r(3),m=r(1),_=r(6);r.d(e,"b",(function(){return S}));var v=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b="imageloadstart",x="imageloadend",w="imageloaderror",E=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return v(e,t),e}(i.a),O=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(n=e.interpolate),(r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:n})||this).on,r.once,r.un,r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return v(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Object(_.h)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var i=this.getProjection();if(a.a&&i&&n&&!Object(m.j)(i,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(m.j)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&Object(h.p)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new d(i,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,i)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(n=i),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,n){return Object(y.b)()},e.prototype.handleImageChange=function(t){var e,r=t.target;switch(r.getState()){case o.a.LOADING:this.loading=!0,e=b;break;case o.a.LOADED:this.loading=!1,e=x;break;case o.a.ERROR:this.loading=!1,e=w;break;default:return}this.hasListener(e)&&this.dispatchEvent(new E(e,r))},e}(g.a);function S(t,e){t.getImage().src=e}e.a=O},function(t,e,r){"use strict";e.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},function(t,e,r){"use strict";var n,i=r(74),o=r(72),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.createRenderer=function(){return new o.a(this)},e}(i.a);e.a=s},function(t,e,r){(function(t){var r;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v,b,x,w,E,O,S,I,C,T,P,R,L,M,N,A,k,j,F,D,G,U,B,z,V,q,Y,W,X,H,Z,K,J,$,Q,tt,et,rt,nt,it,ot,at,st,lt,ut,ct,ht,ft,pt,dt,gt,yt,mt,_t,vt,bt,xt,wt,Et,Ot,St,It,Ct,Tt,Pt=[].slice;Ot=function(){var t,e,r,n,i;for(t={},n=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<e;n++)r=i[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),Z=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},St=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},E=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},a=Math.PI,vt=Math.round,S=Math.cos,R=Math.floor,nt=Math.pow,K=Math.log,xt=Math.sin,wt=Math.sqrt,y=Math.atan2,Q=Math.max,g=Math.abs,u=2*a,s=a/3,i=a/180,l=180/a,(w=function(){return arguments[0]instanceof n?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,arguments,(function(){}))}).default=w,d=[],null!==t&&null!=t.exports&&(t.exports=w),void 0===(r=function(){return w}.apply(e,[]))||(t.exports=r),w.version="1.4.0",p={},h=[],f=!1,n=function(){function t(){var t,e,r,n,i,o,a,s,l;for(o=this,e=[],s=0,n=arguments.length;s<n;s++)null!=(t=arguments[s])&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=p[a])o._rgb=E(p[a](St(e.slice(0,-1))));else{for(f||(h=h.sort((function(t,e){return e.p-t.p})),f=!0),l=0,i=h.length;l<i&&!(a=(r=h[l]).test.apply(r,e));l++);a&&(o._rgb=E(p[a].apply(p,e)))}null==o._rgb&&console.warn("unknown format: "+e),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),w._input=p,
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
w.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],b)e.push(b[t.toLowerCase()]=b[t])}(),w.colors=It={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},q=function(){var t,e,r,n,i,a,s;return n=(e=St(arguments))[0],t=e[1],r=e[2],a=(n+16)/116,i=isNaN(t)?a:a+t/500,s=isNaN(r)?a:a-r/200,a=o.Yn*Y(a),i=o.Xn*Y(i),s=o.Zn*Y(s),[Tt(3.2404542*i-1.5371385*a-.4985314*s),Tt(-.969266*i+1.8760108*a+.041556*s),r=Tt(.0556434*i-.2040259*a+1.0572252*s),e.length>3?e[3]:1]},Tt=function(t){return 255*(t<=.00304?12.92*t:1.055*nt(t,1/2.4)-.055)},Y=function(t){return t>o.t1?t*t*t:o.t2*(t-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ht=function(){var t,e,r,n,i,o,a;return r=(n=St(arguments))[0],e=n[1],t=n[2],o=(i=yt(r,e,t))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},mt=function(t){return(t/=255)<=.04045?t/12.92:nt((t+.055)/1.055,2.4)},Ct=function(t){return t>o.t3?nt(t,1/3):t/o.t2+o.t0},yt=function(){var t,e,r,n;return r=(n=St(arguments))[0],e=n[1],t=n[2],r=mt(r),e=mt(e),t=mt(t),[Ct((.4124564*r+.3575761*e+.1804375*t)/o.Xn),Ct((.2126729*r+.7151522*e+.072175*t)/o.Yn),Ct((.0193339*r+.119192*e+.9503041*t)/o.Zn)]},w.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["lab"]),(function(){}))},p.lab=q,n.prototype.lab=function(){return ht(this._rgb)},m=function(t){var e,r,n,i,o,a,s,l,u,c,h;return 2===(t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(w(i));return n}()).length?(u=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=u[0],a=u[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(o[e]+t*(a[e]-o[e]));return n}(),w.lab.apply(w,r)}):3===t.length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]);return n}(),w.lab.apply(w,r)}):4===t.length?(h=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),o=h[0],a=h[1],s=h[2],l=h[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]);return n}(),w.lab.apply(w,r)}):5===t.length&&(r=m(t.slice(0,3)),n=m(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},w.bezier=function(t){var e;return(e=m(t)).scale=function(){return w.scale(e)},e},w.cubehelix=function(t,e,r,n,i){var o,a,s;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===Ot(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var l,c,h,f,p;return l=u*((t+120)/360+e*s),f=nt(i[0]+a*s,n),c=(0!==o?r[0]+s*o:r)*f*(1-f)/2,h=S(l),p=xt(l),w(E([255*(f+c*(-.14861*h+1.78277*p)),255*(f+c*(-.29227*h-.90649*p)),255*(f+c*(1.97294*h)),1]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?r:("array"===Ot(r=t)?0===(o=r[1]-r[0])&&(r=r[1]):o=0,s)},s.lightness=function(t){return null==t?i:("array"===Ot(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),s)},s.scale=function(){return w.scale(s)},s.hue(r),s},w.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(R(16*Math.random()));return new n(t)},d=[],F=function(t,e,r,n){var i,o,a,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==Ot(t)&&(t=w(t)),"object"!==Ot(e)&&(e=w(e)),a=0,o=d.length;a<o;a++)if(n===(i=d[a])[0]){s=i[1](t,e,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},w.interpolate=F,n.prototype.interpolate=function(t,e,r){return F(this,t,e,r)},w.mix=F,n.prototype.mix=n.prototype.interpolate,p.rgb=function(){var t,e,r,n;for(t in r=[],e=St(arguments))n=e[t],r.push(n);return r},w.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["rgb"]),(function(){}))},n.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},h.push({p:3,test:function(t){var e;return e=St(arguments),"array"===Ot(e)&&3===e.length||4===e.length&&"number"===Ot(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),p.lrgb=p.rgb,U=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(wt(nt(o[0],2)*(1-r)+nt(a[0],2)*r),wt(nt(o[1],2)*(1-r)+nt(a[1],2)*r),wt(nt(o[2],2)*(1-r)+nt(a[2],2)*r),i)},c=function(t){var e,r,i,o,a;for(e=1/t.length,a=[0,0,0,0],i=0,r=t.length;i<r;i++)o=t[i]._rgb,a[0]+=nt(o[0],2)*e,a[1]+=nt(o[1],2)*e,a[2]+=nt(o[2],2)*e,a[3]+=o[3]*e;return a[0]=wt(a[0]),a[1]=wt(a[1]),a[2]=wt(a[2]),a[3]>1&&(a[3]=1),new n(E(a))},d.push(["lrgb",U]),w.average=function(t,e){var r,n,i,o,s,l,u,h,f,p,d,g,m;if(null==e&&(e="rgb"),f=t.length,u=(t=t.map((function(t){return w(t)}))).splice(0,1)[0],"lrgb"===e)return c(t);for(h in o=[],s=0,l=0,g=u.get(e))g[h]=g[h]||0,o.push(isNaN(g[h])?0:1),"h"!==e.charAt(h)||isNaN(g[h])||(r=g[h]/180*a,s+=S(r),l+=xt(r));for(n=u.alpha(),d=0,p=t.length;d<p;d++)for(h in m=(i=t[d]).get(e),n+=i.alpha(),g)isNaN(m[h])||(o[h]+=1,"h"===e.charAt(h)?(r=m[h]/180*a,s+=S(r),l+=xt(r)):g[h]+=m[h]);for(h in g)if("h"===e.charAt(h)){for(r=y(l/o[h],s/o[h])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;g[h]=r}else g[h]=g[h]/o[h];return w(g,e).alpha(n/f)},M=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,vt((255&r)/255*100)/100];if(null!=p.css&&(e=p.css(t)))return e;throw"unknown color: "+t},st=function(t,e){var r,n,i,o,a,s;return null==e&&(e="auto"),a=t[0],i=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),s=(s="000000"+(a<<16|i<<8|n).toString(16)).substr(s.length-6),o=(o="0"+vt(255*r).toString(16)).substr(o.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},p.hex=function(t){return M(t)},w.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hex"]),(function(){}))},n.prototype.hex=function(t){return null==t&&(t="auto"),st(this._rgb,t)},h.push({p:4,test:function(t){if(1===arguments.length&&"string"===Ot(t))return"hex"}}),k=function(){var t,e,r,n,i,o,a,s,l,u,c,h,f,p;if(i=(t=St(arguments))[0],c=t[1],a=t[2],0===c)l=n=e=255*a;else{for(r=[0,0,0],h=2*a-(f=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?r[o]=h+6*(f-h)*p[o]:2*p[o]<1?r[o]=f:3*p[o]<2?r[o]=h+(f-h)*(2/3-p[o])*6:r[o]=h;l=(u=[vt(255*r[0]),vt(255*r[1]),vt(255*r[2])])[0],n=u[1],e=u[2]}return t.length>3?[l,n,e,t[3]]:[l,n,e]},ut=function(t,e,r){var n,i,o,a,s;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,o=Math.min(t,e,r),i=((Q=Math.max(t,e,r))+o)/2,Q===o?(s=0,n=Number.NaN):s=i<.5?(Q-o)/(Q+o):(Q-o)/(2-Q-o),t===Q?n=(e-r)/(Q-o):e===Q?n=2+(r-t)/(Q-o):r===Q&&(n=4+(t-e)/(Q-o)),(n*=60)<0&&(n+=360),[n,s,i]},w.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hsl"]),(function(){}))},p.hsl=k,n.prototype.hsl=function(){return ut(this._rgb)},j=function(){var t,e,r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m;if(i=(t=St(arguments))[0],g=t[1],m=t[2],m*=255,0===g)l=n=e=m;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=m*(1-g),s=m*(1-g*(r=(i/=60)-(o=R(i)))),y=m*(1-g*(1-r)),o){case 0:l=(u=[m,y,a])[0],n=u[1],e=u[2];break;case 1:l=(c=[s,m,a])[0],n=c[1],e=c[2];break;case 2:l=(h=[a,m,y])[0],n=h[1],e=h[2];break;case 3:l=(f=[a,s,m])[0],n=f[1],e=f[2];break;case 4:l=(p=[y,a,m])[0],n=p[1],e=p[2];break;case 5:l=(d=[m,a,s])[0],n=d[1],e=d[2]}return[l,n,e,t.length>3?t[3]:1]},ct=function(){var t,e,r,n,i,o,a,s,l;return o=(a=St(arguments))[0],r=a[1],t=a[2],i=Math.min(o,r,t),e=(Q=Math.max(o,r,t))-i,l=Q/255,0===Q?(n=Number.NaN,s=0):(s=e/Q,o===Q&&(n=(r-t)/e),r===Q&&(n=2+(t-o)/e),t===Q&&(n=4+(o-r)/e),(n*=60)<0&&(n+=360)),[n,s,l]},w.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hsv"]),(function(){}))},p.hsv=j,n.prototype.hsv=function(){return ct(this._rgb)},et=function(t){return"number"===Ot(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},dt=function(){var t;return((t=St(arguments))[0]<<16)+(t[1]<<8)+t[2]},w.num=function(t){return new n(t,"num")},n.prototype.num=function(t){return null==t&&(t="rgb"),dt(this._rgb,t)},p.num=et,h.push({p:1,test:function(t){if(1===arguments.length&&"number"===Ot(t)&&t>=0&&t<=16777215)return"num"}}),L=function(){var t,e,r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v;if(s=(r=St(arguments))[0],i=r[1],e=r[2],a=a/100*255,t=255*(i/=100),0===i)h=a=n=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(u=e*(1-i))+t*(1-(o=(s/=60)-(l=R(s)))),_=u+t*o,v=u+t,l){case 0:h=(f=[v,_,u])[0],a=f[1],n=f[2];break;case 1:h=(p=[c,v,u])[0],a=p[1],n=p[2];break;case 2:h=(d=[u,v,_])[0],a=d[1],n=d[2];break;case 3:h=(g=[u,c,v])[0],a=g[1],n=g[2];break;case 4:h=(y=[_,u,v])[0],a=y[1],n=y[2];break;case 5:h=(m=[v,u,c])[0],a=m[1],n=m[2]}return[h,a,n,r.length>3?r[3]:1]},at=function(){var t,e,r,n,i,o,a,s,l;return s=(l=St(arguments))[0],i=l[1],e=l[2],a=Math.min(s,i,e),r=100*(n=(Q=Math.max(s,i,e))-a)/255,t=a/(255-n)*100,0===n?o=Number.NaN:(s===Q&&(o=(i-e)/n),i===Q&&(o=2+(e-s)/n),e===Q&&(o=4+(s-i)/n),(o*=60)<0&&(o+=360)),[o,r,t]},w.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hcg"]),(function(){}))},p.hcg=L,n.prototype.hcg=function(){return at(this._rgb)},I=function(t){var e,r,n,i,o,a,s,l;if(t=t.toLowerCase(),null!=w.colors&&w.colors[t])return M(w.colors[t]);if(o=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=e=0;e<=2;i=++e)s[i]=vt(2.55*s[i]);s[3]=1}else if(o=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=r=0;r<=2;i=++r)s[i]=vt(2.55*s[i]);s[3]=+s[3]}else(o=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=k(n))[3]=1):(o=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=k(n))[3]=+o[4]);return s},ot=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(vt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(vt).join(",")+","+t[3]+")":void 0},_t=function(t){return vt(100*t)/100},A=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=_t(t[0]||0),t[1]=_t(100*t[1])+"%",t[2]=_t(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},p.css=function(t){return I(t)},w.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["css"]),(function(){}))},n.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?ot(this._rgb):"hsl"===t.slice(0,3)?A(this.hsl(),this.alpha()):void 0},p.named=function(t){return M(It[t])},h.push({p:5,test:function(t){if(1===arguments.length&&null!=It[t])return"named"}}),n.prototype.name=function(t){var e,r;for(r in arguments.length&&(It[t]&&(this._rgb=M(It[t])),this._rgb[3]=1),e=this.hex("rgb"),It)if(e===It[r])return r;return e},W=function(){var t,e,r,n;return r=(n=St(arguments))[0],t=n[1],e=n[2],[r,S(e*=i)*t,xt(e)*t]},X=function(){var t,e,r,n,i,o,a,s,l;return a=(r=St(arguments))[0],i=r[1],o=r[2],t=(s=W(a,i,o))[0],e=s[1],n=s[2],[(l=q(t,e,n))[0],l[1],n=l[2],r.length>3?r[3]:1]},V=function(){var t,e,r,n,i,o;return i=(o=St(arguments))[0],t=o[1],e=o[2],r=wt(t*t+e*e),n=(y(e,t)*l+360)%360,0===vt(1e4*r)&&(n=Number.NaN),[i,r,n]},ft=function(){var t,e,r,n,i,o,a;return i=(o=St(arguments))[0],r=o[1],e=o[2],n=(a=ht(i,r,e))[0],t=a[1],e=a[2],V(n,t,e)},w.lch=function(){var t;return t=St(arguments),new n(t,"lch")},w.hcl=function(){var t;return t=St(arguments),new n(t,"hcl")},p.lch=X,p.hcl=function(){var t,e,r,n;return e=(n=St(arguments))[0],t=n[1],r=n[2],X([r,t,e])},n.prototype.lch=function(){return ft(this._rgb)},n.prototype.hcl=function(){return ft(this._rgb).reverse()},it=function(t){var e,r,n,i,o,a;return null==t&&(t="rgb"),o=(a=St(arguments))[0],n=a[1],e=a[2],n/=255,e/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(n,e))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-e-i)*r,i]},O=function(){var t,e,r,n,i,o;return r=(e=St(arguments))[0],i=e[1],o=e[2],n=e[3],t=e.length>4?e[4]:1,1===n?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),o>=1?0:255*(1-o)*(1-n),t]},p.cmyk=function(){return O(St(arguments))},w.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["cmyk"]),(function(){}))},n.prototype.cmyk=function(){return it(this._rgb)},p.gl=function(){var t,e,r,n,i;for(n=function(){var t,r;for(e in r=[],t=St(arguments))i=t[e],r.push(i);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},w.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["gl"]),(function(){}))},n.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},pt=function(t,e,r){var n;return t=(n=St(arguments))[0],e=n[1],r=n[2],.2126*(t=J(t))+.7152*(e=J(e))+.0722*(r=J(r))},J=function(t){return(t/=255)<=.03928?t/12.92:nt((t+.055)/1.055,2.4)},z=function(t,e,r,i){var o,a;return o=t._rgb,a=e._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["rgb",z]),n.prototype.luminance=function(t,e){var r,n,i,o,a;return null==e&&(e="rgb"),arguments.length?(o=this._rgb,0===t?o=[0,0,0,this._rgb[3]]:1===t?o=[255,255,255,this[3]]:(r=pt(this._rgb),n=1e-7,i=20,a=function(r,o){var s,l;return s=(l=r.interpolate(o,.5,e)).luminance(),Math.abs(t-s)<n||!i--?l:s>t?a(r,l):a(l,o)},o=r>t?a(w("black"),this).rgba():a(this,w("white")).rgba()),w(o).alpha(this.alpha())):pt(this._rgb)},Et=function(t){var e,r,n,i;return(i=t/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*K(r),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*K(e)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*K(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*K(r),e=255),[n,r,e]},gt=function(){var t,e,r,n,i,o,a,s;for(i=(o=St(arguments))[0],o[1],t=o[2],n=1e3,r=4e4,e=.4;r-n>e;)(a=Et(s=.5*(r+n)))[2]/a[0]>=t/i?r=s:n=s;return vt(s)},w.temperature=w.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["temperature"]),(function(){}))},p.temperature=p.kelvin=p.K=Et,n.prototype.temperature=function(){return gt(this._rgb)},n.prototype.kelvin=n.prototype.temperature,w.contrast=function(t,e){var r,i,o,a;return"string"!==(o=Ot(t))&&"number"!==o||(t=new n(t)),"string"!==(a=Ot(e))&&"number"!==a||(e=new n(e)),(r=t.luminance())>(i=e.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},w.distance=function(t,e,r){var i,o,a,s,l,u,c;for(o in null==r&&(r="lab"),"string"!==(l=Ot(t))&&"number"!==l||(t=new n(t)),"string"!==(u=Ot(e))&&"number"!==u||(e=new n(e)),a=t.get(r),s=e.get(r),c=0,a)c+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(c)},w.deltaE=function(t,e,r,i){var o,s,l,u,c,h,f,p,d,m,_,v,b,x,w,E,O,I,C,T,P,R,L,M;for(null==r&&(r=1),null==i&&(i=1),"string"!==(w=Ot(t))&&"number"!==w||(t=new n(t)),"string"!==(E=Ot(e))&&"number"!==E||(e=new n(e)),o=(O=t.lab())[0],l=O[1],c=O[2],s=(I=e.lab())[0],u=I[1],h=I[2],f=wt(l*l+c*c),p=wt(u*u+h*h),T=o<16?.511:.040975*o/(1+.01765*o),C=.0638*f/(1+.0131*f)+.638,x=f<1e-6?0:180*y(c,l)/a;x<0;)x+=360;for(;x>=360;)x-=360;return P=x>=164&&x<=345?.56+g(.2*S(a*(x+168)/180)):.36+g(.4*S(a*(x+35)/180)),b=wt((d=f*f*f*f)/(d+1900)),wt((R=(o-s)/(r*T))*R+(L=(v=f-p)/(i*C))*L+((m=l-u)*m+(_=c-h)*_-v*v)/((M=C*(b*P+1-b))*M))},n.prototype.get=function(t){var e,r,n,i,o;return this,n=(i=t.split("."))[0],e=i[1],o=this[n](),e?(r=n.indexOf(e))>-1?o[r]:console.warn("unknown channel "+e+" in mode "+n):o},n.prototype.set=function(t,e){var r,n,i,o,a;if(this,i=(o=t.split("."))[0],r=o[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===Ot(e))switch(e.charAt(0)){case"+":case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+r+" in mode "+i);else a=e;return w(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(t){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},n.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=o.Kn*t,w.lab(e).alpha(this.alpha())},n.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*o.Kn,e[1]<0&&(e[1]=0),w.lch(e).alpha(this.alpha())},n.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},n.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),w(e[0]*t,e[1]*t,e[2]*t,t)},tt=function(t,e){return t*e/255},C=function(t,e){return t>e?e:t},H=function(t,e){return t>e?t:e},bt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},rt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},x=function(t,e){return 255*(1-(1-e/255)/(t/255))},T=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},(_=function(t,e,r){if(!_[r])throw"unknown blend mode "+r;return _[r](t,e)}).normal=(v=function(t){return function(e,r){var n,i;return n=w(r).rgb(),i=w(e).rgb(),w(t(n,i),"rgb")}})((P=function(t){return function(e,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=t(e[n],r[n]);return o}})((function(t,e){return t}))),_.multiply=v(P(tt)),_.screen=v(P(bt)),_.overlay=v(P(rt)),_.darken=v(P(C)),_.lighten=v(P(H)),_.dodge=v(P(T)),_.burn=v(P(x)),w.blend=_,w.analyze=function(t){var e,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(i=t[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return w.limits(n,t,e)},n},w.scale=function(t,e){var r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v,b,x,E;return c="rgb",h=w("#ccc"),g=0,!1,a=[0,1],d=[],p=[0,0],r=!1,i=[],f=!1,u=0,l=1,o=!1,n={},y=!0,s=1,x=function(t){var e,r,n,o,a,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===Ot(t)&&null!=w.brewer&&(t=w.brewer[t]||w.brewer[t.toLowerCase()]||t),"array"===Ot(t)){for(1===t.length&&(t=[t[0],t[0]]),e=n=0,o=(t=t.slice(0)).length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)r=t[e],"string"===Ot(r)&&(t[e]=w(r));for(d.length=0,e=s=0,a=t.length-1;0<=a?s<=a:s>=a;e=0<=a?++s:--s)d.push(e/(t.length-1))}return b(),i=t},_=function(t){var e,n;if(null!=r){for(n=r.length-1,e=0;e<n&&t>=r[e];)e++;return e-1}return 0},E=function(t){return t},function(t){var e,n,i,o,a;return a=t,r.length>2&&(o=r.length-1,e=_(t),i=r[0]+(r[1]-r[0])*(0+.5*g),n=r[o-1]+(r[o]-r[o-1])*(1-.5*g),a=u+(r[e]+.5*(r[e+1]-r[e])-i)/(n-i)*(l-u)),a},v=function(t,e){var o,a,f,g,m,v,b;if(null==e&&(e=!1),isNaN(t))return h;if(b=e?t:r&&r.length>2?_(t)/(r.length-2):l!==u?(t-u)/(l-u):1,e||(b=E(b)),1!==s&&(b=nt(b,s)),b=p[0]+b*(1-p[0]-p[1]),b=Math.min(1,Math.max(0,b)),f=Math.floor(1e4*b),y&&n[f])o=n[f];else{if("array"===Ot(i))for(a=g=0,v=d.length-1;0<=v?g<=v:g>=v;a=0<=v?++g:--g){if(b<=(m=d[a])){o=i[a];break}if(b>=m&&a===d.length-1){o=i[a];break}if(b>m&&b<d[a+1]){b=(b-m)/(d[a+1]-m),o=w.interpolate(i[a],i[a+1],b,c);break}}else"function"===Ot(i)&&(o=i(b));y&&(n[f]=o)}return o},b=function(){return n={}},x(t),(m=function(t){var e;return e=w(v(t)),f&&e[f]?e[f]():e}).classes=function(t){var e;return null!=t?("array"===Ot(t)?(r=t,a=[t[0],t[t.length-1]]):(e=w.analyze(a),r=0===t?[e.min,e.max]:w.limits(e,"e",t)),m):r},m.domain=function(t){var e,r,n,o,s,c,h;if(!arguments.length)return a;if(u=t[0],l=t[t.length-1],d=[],n=i.length,t.length===n&&u!==l)for(s=0,o=t.length;s<o;s++)r=t[s],d.push((r-u)/(l-u));else for(e=h=0,c=n-1;0<=c?h<=c:h>=c;e=0<=c?++h:--h)d.push(e/(n-1));return a=[u,l],m},m.mode=function(t){return arguments.length?(c=t,b(),m):c},m.range=function(t,e){return x(t),m},m.out=function(t){return f=t,m},m.spread=function(t){return arguments.length?(g=t,m):g},m.correctLightness=function(t){return null==t&&(t=!0),o=t,b(),E=o?function(t){var e,r,n,i,o,a,s,l,u;for(e=v(0,!0).lab()[0],r=v(1,!0).lab()[0],s=e>r,n=v(t,!0).lab()[0],i=n-(o=e+(r-e)*t),l=0,u=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(l=t,t+=.5*(u-t)):(u=t,t+=.5*(l-t)),n=v(t,!0).lab()[0],i=n-o;return t}:function(t){return t},m},m.padding=function(t){return null!=t?("number"===Ot(t)&&(t=[t,t]),p=t,m):p},m.colors=function(e,n){var o,s,l,u,c,h,f,p;if(arguments.length<2&&(n="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===e)c=[m(.5)];else if(e>1)s=a[0],o=a[1]-s,c=function(){h=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)h.push(t);return h}.apply(this).map((function(t){return m(s+t/(e-1)*o)}));else{if(t=[],f=[],r&&r.length>2)for(l=p=1,u=r.length;1<=u?p<u:p>u;l=1<=u?++p:--p)f.push(.5*(r[l-1]+r[l]));else f=a;c=f.map((function(t){return m(t)}))}return w[n]&&(c=c.map((function(t){return t[n]()}))),c},m.cache=function(t){return null!=t?(y=t,m):y},m.gamma=function(t){return null!=t?(s=t,m):s},m},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(t,e,r){var n,i,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},l=function(t,i){if(r(t,i))return null!=e&&"function"===Ot(e)?n(e(t)):null!=e&&"string"===Ot(e)||"number"===Ot(e)?n(t[e]):n(t)},"array"===Ot(t))for(a=0,o=t.length;a<o;a++)l(t[a]);else for(i in t)l(t[i],i);return s.domain=[s.min,s.max],s.limits=function(t,e){return w.limits(s,t,e)},s},w.limits=function(t,e,r){var n,i,o,a,s,l,u,c,h,f,p,d,y,m,_,v,b,x,E,O,S,I,C,T,P,L,M,N,A,k,j,F,D,G,U,B,z,V,q,Y,W,X,H,Z,J,$,tt,et,rt,it,ot,at,st,lt,ut;if(null==e&&(e="equal"),null==r&&(r=7),"array"===Ot(t)&&(t=w.analyze(t)),P=t.min,Q=t.max,t.sum,lt=t.values.sort((function(t,e){return t-e})),1===r)return[P,Q];if(C=[],"c"===e.substr(0,1)&&(C.push(P),C.push(Q)),"e"===e.substr(0,1)){for(C.push(P),O=j=1,U=r-1;1<=U?j<=U:j>=U;O=1<=U?++j:--j)C.push(P+O/r*(Q-P));C.push(Q)}else if("l"===e.substr(0,1)){if(P<=0)throw"Logarithmic scales are only possible for values > 0";for(L=Math.LOG10E*K(P),T=Math.LOG10E*K(Q),C.push(P),O=ut=1,B=r-1;1<=B?ut<=B:ut>=B;O=1<=B?++ut:--ut)C.push(nt(10,L+O/r*(T-L)));C.push(Q)}else if("q"===e.substr(0,1)){for(C.push(P),O=n=1,X=r-1;1<=X?n<=X:n>=X;O=1<=X?++n:--n)F=(lt.length-1)*O/r,(D=R(F))===F?C.push(lt[D]):(G=F-D,C.push(lt[D]*(1-G)+lt[D+1]*G));C.push(Q)}else if("k"===e.substr(0,1)){for(N=lt.length,m=new Array(N),x=new Array(r),it=!0,A=0,v=null,(v=[]).push(P),O=i=1,H=r-1;1<=H?i<=H:i>=H;O=1<=H?++i:--i)v.push(P+O/r*(Q-P));for(v.push(Q);it;){for(S=o=0,Z=r-1;0<=Z?o<=Z:o>=Z;S=0<=Z?++o:--o)x[S]=0;for(O=a=0,J=N-1;0<=J?a<=J:a>=J;O=0<=J?++a:--a){for(st=lt[O],M=Number.MAX_VALUE,S=s=0,$=r-1;0<=$?s<=$:s>=$;S=0<=$?++s:--s)(E=g(v[S]-st))<M&&(M=E,_=S);x[_]++,m[O]=_}for(k=new Array(r),S=l=0,tt=r-1;0<=tt?l<=tt:l>=tt;S=0<=tt?++l:--l)k[S]=null;for(O=u=0,et=N-1;0<=et?u<=et:u>=et;O=0<=et?++u:--u)null===k[b=m[O]]?k[b]=lt[O]:k[b]+=lt[O];for(S=c=0,rt=r-1;0<=rt?c<=rt:c>=rt;S=0<=rt?++c:--c)k[S]*=1/x[S];for(it=!1,S=h=0,z=r-1;0<=z?h<=z:h>=z;S=0<=z?++h:--h)if(k[S]!==v[O]){it=!0;break}v=k,++A>200&&(it=!1)}for(I={},S=f=0,V=r-1;0<=V?f<=V:f>=V;S=0<=V?++f:--f)I[S]=[];for(O=p=0,q=N-1;0<=q?p<=q:p>=q;O=0<=q?++p:--p)I[b=m[O]].push(lt[O]);for(ot=[],S=d=0,Y=r-1;0<=Y?d<=Y:d>=Y;S=0<=Y?++d:--d)ot.push(I[S][0]),ot.push(I[S][I[S].length-1]);for(ot=ot.sort((function(t,e){return t-e})),C.push(ot[0]),O=y=1,W=ot.length-1;y<=W;O=y+=2)at=ot[O],isNaN(at)||-1!==C.indexOf(at)||C.push(at)}return C},N=function(t,e,r){var n,i,o,a;return t=(n=St(arguments))[0],e=n[1],r=n[2],isNaN(t)&&(t=0),(t/=360)<1/3?o=1-((i=(1-e)/3)+(a=(1+e*S(u*t)/S(s-u*t))/3)):t<2/3?i=1-((a=(1-e)/3)+(o=(1+e*S(u*(t-=1/3))/S(s-u*t))/3)):a=1-((o=(1-e)/3)+(i=(1+e*S(u*(t-=2/3))/S(s-u*t))/3)),[255*(a=Z(r*a*3)),255*(o=Z(r*o*3)),255*(i=Z(r*i*3)),n.length>3?n[3]:1]},lt=function(){var t,e,r,n,i,o,a;return i=(o=St(arguments))[0],e=o[1],t=o[2],u=2*Math.PI,i/=255,e/=255,t/=255,0===(a=1-Math.min(i,e,t)/(n=(i+e+t)/3))?r=0:(r=(i-e+(i-t))/2,r/=Math.sqrt((i-e)*(i-e)+(i-t)*(e-t)),r=Math.acos(r),t>e&&(r=u-r),r/=u),[360*r,a,n]},w.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(n,Pt.call(arguments).concat(["hsi"]),(function(){}))},p.hsi=N,n.prototype.hsi=function(){return lt(this._rgb)},D=function(t,e,r,n){var i,o,a,s,l,u,c,h,f,p;return"hsl"===n?(f=t.hsl(),p=e.hsl()):"hsv"===n?(f=t.hsv(),p=e.hsv()):"hcg"===n?(f=t.hcg(),p=e.hcg()):"hsi"===n?(f=t.hsi(),p=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",f=t.hcl(),p=e.hcl()),"h"===n.substr(0,1)&&(o=f[0],c=f[1],s=f[2],a=p[0],h=p[1],l=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===n||(u=h)):(i=o,1!==l&&0!==l||"hsv"===n||(u=c)):i=o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==u&&(u=c+r*(h-c)),w[n](i,u,s+r*(l-s))},B=function(t,e,r,n){var i,o;return i=t.num(),o=e.num(),w.num(i+(o-i)*r,"num")},(d=d.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)$=r[e],n.push([$,D]);return n}())).push(["num",B]),G=function(t,e,r,i){var o,a;return o=t.lab(),a=e.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["lab",G])}).call(this)}).call(this,r(128)(t))},function(t,e,r){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,r){"use strict";var n=r(51),i=r(50),o=r(11),a=r(4),s=r(0),l=r(22),u=r(6),c=r(16),h=[0,0,0],f=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(o.a)(Object(u.g)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var r=0,a=this.resolutions_.length-1;r<a;++r)if(e){if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}else e=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(o.a)(this.origins_.length==this.resolutions_.length,20));var l=t.extent;void 0===l||this.origin_||this.origins_||(this.origin_=Object(s.D)(l)),Object(o.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(o.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:i.b,Object(o.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==l?l:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var r=new n.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(l){var i=this.getTileRangeForExtentAndZ(l,e);r.minX=Math.max(i.minX,r.minX),r.maxX=Math.min(i.maxX,r.maxX),r.minY=Math.max(i.minY,r.minY),r.maxY=Math.min(i.maxY,r.maxY)}return r}),this):l&&this.calculateTileRanges_(l)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,i){var o,a,s,l=null,u=t[0]-1;for(2===this.zoomFactor_?(a=t[1],s=t[2]):l=this.getTileCoordExtent(t,i);u>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),s=Math.floor(s/2),o=Object(n.a)(a,a,s,s,r)):o=this.getTileRangeForExtentAndZ(l,u,r),e(u,o))return!0;--u}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],o=2*t[2];return Object(n.a)(i,i+1,o,o+1,e)}var a=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;var i=t[0],o=t[1],a=t[2];if(e===i)return Object(n.a)(o,a,o,a,r);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-i),l=Math.floor(o*s),u=Math.floor(a*s);if(e<i)return Object(n.a)(l,l,u,u,r);var c=Math.floor(s*(o+1))-1,h=Math.floor(s*(a+1))-1;return Object(n.a)(l,c,u,h,r)}var f=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,e,r)},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),i=this.getResolution(t),o=Object(c.d)(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*i,l=n[0]+(e.maxX+1)*o[0]*i,u=n[1]+e.minY*o[1]*i,h=n[1]+(e.maxY+1)*o[1]*i;return Object(s.l)(a,u,l,h,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var i=h;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),Object(n.a)(o,i[1],a,i[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=Object(c.d)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Object(c.d)(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n,l=o+i[0]*n,u=a+i[1]*n;return Object(s.l)(o,a,l,u,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,i){var o=this.getZForResolution(r),s=r/this.getResolution(o),u=this.getOrigin(o),h=Object(c.d)(this.getTileSize(o),this.tmpSize_),f=s*(t-u[0])/r/h[0],p=s*(u[1]-e)/r/h[1];return n?(f=Object(a.a)(f,5)-1,p=Object(a.a)(p,5)-1):(f=Object(a.d)(f,5),p=Object(a.d)(p,5)),Object(l.a)(o,f,p,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,i){var o=this.getOrigin(r),s=this.getResolution(r),u=Object(c.d)(this.getTileSize(r),this.tmpSize_),h=(t-o[0])/s/u[0],f=(o[1]-e)/s/u[1];return n?(h=Object(a.a)(h,5)-1,f=Object(a.a)(f,5)-1):(h=Object(a.d)(h,5),f=Object(a.d)(f,5)),Object(l.a)(r,h,f,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){var r=Object(u.h)(this.resolutions_,t,e||0);return Object(a.b)(r,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}();e.a=f},function(t,e,r){"use strict";r.d(e,"b",(function(){return d}));var n,i=r(75),o=r(7),a=r(26),s=r(33),l=r(19),u=r(11),c=r(5),h=r(8),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=function(t){function e(e){var r=this,n=Object(c.a)({},e);delete n.source,(r=t.call(this,n)||this).on,r.once,r.un,r.mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,r.rendered=!1,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addChangeListener(a.a.SOURCE,r.handleSourcePropertyChange_);var i=e.source?e.source:null;return r.setSource(i),r}return f(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(a.a.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():l.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(h.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(h.a)(t,o.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.getData=function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return this.rendered=!0,r.renderFrame(t,e)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(t){t||this.unrender(),this.set(a.a.MAP,t)},e.prototype.getMapInternal=function(){return this.get(a.a.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(h.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(h.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(h.a)(t,s.a.PRECOMPOSE,(function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Object(u.a)(!e.some((function(t){return t.layer===r.layer})),67),e.push(r)}),this),this.mapRenderKey_=Object(h.a)(this,o.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(a.a.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(i.a);function d(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}e.a=p},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));var n=.5,i=!0},function(t,e,r){"use strict";var n=r(18),i=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.a[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();e.a=i},function(t,e,r){"use strict";function n(t,e){let r=t.length-e,n=0;do{for(let r=e;r>0;r--)t[n+e]+=t[n],n++;r-=e}while(r>0)}function i(t,e,r){let n=0,i=t.length;const o=i/r;for(;i>e;){for(let r=e;r>0;--r)t[n+e]+=t[n],++n;i-=e}const a=t.slice();for(let e=0;e<o;++e)for(let n=0;n<r;++n)t[r*e+n]=a[(r-n-1)*o+e]}r.d(e,"a",(function(){return o}));class o{async decode(t,e){const r=await this.decodeBlock(e),o=t.Predictor||1;if(1!==o){const e=!t.StripOffsets;return function(t,e,r,o,a,s){if(!e||1===e)return t;for(let t=0;t<a.length;++t){if(a[t]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(a[t]!==a[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const l=a[0]/8,u=2===s?1:a.length;for(let s=0;s<o&&!(s*u*r*l>=t.byteLength);++s){let o;if(2===e){switch(a[0]){case 8:o=new Uint8Array(t,s*u*r*l,u*r*l);break;case 16:o=new Uint16Array(t,s*u*r*l,u*r*l/2);break;case 32:o=new Uint32Array(t,s*u*r*l,u*r*l/4);break;default:throw new Error(`Predictor 2 not allowed with ${a[0]} bits per sample.`)}n(o,u)}else 3===e&&(o=new Uint8Array(t,s*u*r*l,u*r*l),i(o,u,l))}return t}(r,o,e?t.TileWidth:t.ImageWidth,e?t.TileLength:t.RowsPerStrip||t.ImageLength,t.BitsPerSample,t.PlanarConfiguration)}return r}}},function(t,e,r){"use strict";var n,i=r(54),o=r(21),a=r(17),s=r(5),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=t.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}return l(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_||(this.listeners_={}),n=r[t]||(r[t]=[]);-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t,r=e?t:t.type,n=this.listeners_&&this.listeners_[r];if(n){var i=e?new o.a(t):t;i.target||(i.target=this.eventTarget_||this);var s,l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,u[r]=0),++l[r];for(var c=0,h=n.length;c<h;++c)if(!1===(s="handleEvent"in n[c]?n[c].handleEvent(i):n[c].call(this,i))||i.propagationStopped){s=!1;break}if(0==--l[r]){var f=u[r];for(delete u[r];f--;)this.removeEventListener(r,a.c);delete l[r]}return s}},e.prototype.disposeInternal=function(){this.listeners_&&Object(s.b)(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var r=this.listeners_&&this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[n]=a.c,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}},e}(i.a);e.a=u},function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));var n,i=r(21),o=r(46),a=r(70),s=r(9),l=r(3),u=r(11),c=r(1),h=r(22),f=r(29),p=r(16),d=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;r.on,r.once,r.un,r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;return r.tileGrid&&Object(p.d)(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),[256,256]),r.tileCache=new a.a(e.cacheSize||0),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition,interpolate:e.interpolate},r.zDirection=e.zDirection?e.zDirection:0,r}return d(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,l,u=!0,c=r.minX;c<=r.maxX;++c)for(var f=r.minY;f<=r.maxY;++f)a=Object(h.e)(e,c,f),l=!1,i.containsKey(a)&&(l=(o=i.get(a)).getState()===s.a.LOADED)&&(l=!1!==n(o)),l||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,e,r,n,i){return Object(l.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(f.d)(t)},e.prototype.getTileCacheForProjection=function(t){return Object(u.a)(Object(c.j)(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(e),o=Object(p.d)(n.getTileSize(t),this.tmpSize);return 1==i?o:Object(p.c)(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=Object(f.e)(n,t,r)),Object(h.g)(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var r=this.getTileCacheForProjection(e);t>r.highWaterMark&&(r.highWaterMark=t)},e.prototype.useTile=function(t,e,r,n){},e}(o.a),y=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return d(e,t),e}(i.a);e.b=g},function(t,e,r){"use strict";r.d(e,"b",(function(){return f}));var n,i=r(7),o=r(69),a=r(14),s=r(27),l=r(0),u=r(8),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e,r,n,i,o,s){var l=t.call(this,e,r,n,a.a.IDLE)||this;return l.src_=i,l.image_=new Image,null!==o&&(l.image_.crossOrigin=o),l.unlisten_=null,l.state=a.a.IDLE,l.imageLoadFunction_=s,l}return c(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=a.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.A)(this.extent)/this.image_.height),this.state=a.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=a.a.IDLE&&this.state!=a.a.ERROR||(this.state=a.a.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=f(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Object(l.A)(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(o.a);function f(t,e,r){var n=t,o=!0,a=!1,l=!1,c=[Object(u.b)(n,i.a.LOAD,(function(){l=!0,a||e()}))];return n.src&&s.c?(a=!0,n.decode().then((function(){o&&e()})).catch((function(t){o&&(l?e():r())}))):c.push(Object(u.b)(n,i.a.ERROR,r)),function(){o=!1,c.forEach(u.c)}}e.a=h},function(t,e,r){"use strict";var n,i=r(42),o=r(7),a=r(9),s=r(3),l=r(28),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e,r,n){var i=t.call(this)||this,o=n||{};return i.tileCoord=e,i.state=r,i.interimTile=null,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i.interpolate=!!o.interpolate,i}return u(e,t),e.prototype.changed=function(){this.dispatchEvent(o.a.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==a.a.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==a.a.LOADED){t.interimTile=null;break}t.getState()==a.a.LOADING?e=t:t.getState()==a.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==a.a.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){Object(s.b)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:Object(l.easeIn)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(i.a);e.a=c},function(t,e,r){"use strict";var n,i=r(30),o=r(19),a=r(3),s=r(1),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e){var r=t.call(this)||this;r.projection=Object(s.o)(e.projection),r.attributions_=c(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:o.a.READY,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r.interpolate_=!!e.interpolate,r.viewResolver=null,r.viewRejector=null;var n=r;return r.viewPromise_=new Promise((function(t,e){n.viewResolver=t,n.viewRejector=e})),r}return l(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return Object(a.b)()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=c(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(i.a);function c(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.a=u},function(t,e,r){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));var n={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},i={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0}},function(t,e,r){"use strict";function n(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n}function i(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));var n=42,i=256},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function i(t,e,r,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=r,o.maxY=i,o):new n(t,e,r,i)}e.b=n},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return a}));r(5);var n={};function i(){n={}}function o(t,e,r){var i=t.getCode(),o=e.getCode();i in n||(n[i]={}),n[i][o]=r}function a(t,e){var r;return t in n&&e in n[t]&&(r=n[t][e]),r}},function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return J})),r.d(e,"b",(function(){return Lr})),r.d(e,"c",(function(){return Mr})),r.d(e,"d",(function(){return mr})),r.d(e,"e",(function(){return Nr})),r.d(e,"f",(function(){return i}));var i={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Mercator, Natural Earth, and Winkel Tripel. Terrain, fog, sky and CustomLayerInterface are not supported for projections other than mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_symbol:{type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},projection:{name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carrée projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}};var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(t){var e={exports:{}};return t(e,e.exports),e.exports}
/*! https://mths.be/punycode v1.3.2 by @mathias */
var s=a((function(t,e){!function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,a="object"==typeof o&&o;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,l,u=2147483647,c=36,h=/^xn--/,f=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,y=String.fromCharCode;function m(t){throw RangeError(d[t])}function _(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function v(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+_((t=t.replace(p,".")).split("."),e).join(".")}function b(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function x(t){return _(t,(function(t){var e="";return t>65535&&(e+=y((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=y(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,r){var n=0;for(t=r?g(t/700):t>>1,t+=g(t/e);t>455;n+=c)t=g(t/35);return g(n+36*t/(t+38))}function O(t){var e,r,n,i,o,a,s,l,h,f,p,d=[],y=t.length,_=0,v=128,b=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&m("not-basic"),d.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=_,a=1,s=c;i>=y&&m("invalid-input"),((l=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:c)>=c||l>g((u-_)/a))&&m("overflow"),_+=l*a,!(l<(h=s<=b?1:s>=b+26?26:s-b));s+=c)a>g(u/(f=c-h))&&m("overflow"),a*=f;b=E(_-o,e=d.length+1,0==o),g(_/e)>u-v&&m("overflow"),v+=g(_/e),_%=e,d.splice(_++,0,v)}return x(d)}function S(t){var e,r,n,i,o,a,s,l,h,f,p,d,_,v,x,O=[];for(d=(t=b(t)).length,e=128,r=0,o=72,a=0;a<d;++a)(p=t[a])<128&&O.push(y(p));for(n=i=O.length,i&&O.push("-");n<d;){for(s=u,a=0;a<d;++a)(p=t[a])>=e&&p<s&&(s=p);for(s-e>g((u-r)/(_=n+1))&&m("overflow"),r+=(s-e)*_,e=s,a=0;a<d;++a)if((p=t[a])<e&&++r>u&&m("overflow"),p==e){for(l=r,h=c;!(l<(f=h<=o?1:h>=o+26?26:h-o));h+=c)x=l-f,v=c-f,O.push(y(w(f+x%v,0))),l=g(x/v);O.push(y(w(l,0))),o=E(r,_,n==i),r=0,++n}++r,++e}return O.join("")}if(s={version:"1.3.2",ucs2:{decode:b,encode:x},decode:O,encode:S,toASCII:function(t){return v(t,(function(t){return f.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return v(t,(function(t){return h.test(t)?O(t.slice(4).toLowerCase()):t}))}},n&&i)if(t.exports==n)i.exports=s;else for(l in s)s.hasOwnProperty(l)&&(n[l]=s[l]);else r.punycode=s}(o)})),l=function(t){return"string"==typeof t},u=function(t){return"object"==typeof t&&null!==t},c=function(t){return null===t},h=function(t){return null==t};function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var p=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u,c,h,p,d=t[l].replace(o,"%20"),g=d.indexOf(r);g>=0?(u=d.substr(0,g),c=d.substr(g+1)):(u=d,c=""),h=decodeURIComponent(u),p=decodeURIComponent(c),f(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i},d=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},g=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var i=encodeURIComponent(d(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return i+encodeURIComponent(d(t))})).join(e):i+encodeURIComponent(d(t[n]))})).join(e):n?encodeURIComponent(d(n))+r+encodeURIComponent(d(t)):""},y=a((function(t,e){e.decode=e.parse=p,e.encode=e.stringify=g}));function m(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _=/^([a-z0-9.+-]+:)/i,v=/:[0-9]*$/,b=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,x=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),w=["'"].concat(x),E=["%","/","?",";","#"].concat(w),O=["/","?","#"],S=/^[+a-z0-9A-Z_-]{0,63}$/,I=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function R(t,e,r){if(t&&u(t)&&t instanceof m)return t;var n=new m;return n.parse(t,e,r),n}m.prototype.parse=function(t,e,r){if(!l(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!r&&1===t.split("#").length){var u=b.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=_.exec(a);if(c){var h=(c=c[0]).toLowerCase();this.protocol=h,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||c&&T[c]||(a=a.substr(2),this.slashes=!0)}if(!T[c]&&(f||c&&!P[c])){for(var p,d,g=-1,m=0;m<O.length;m++){-1!==(v=a.indexOf(O[m]))&&(-1===g||v<g)&&(g=v)}-1!==(d=-1===g?a.lastIndexOf("@"):a.lastIndexOf("@",g))&&(p=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(p)),g=-1;for(m=0;m<E.length;m++){var v;-1!==(v=a.indexOf(E[m]))&&(-1===g||v<g)&&(g=v)}-1===g&&(g=a.length),this.host=a.slice(0,g),a=a.slice(g),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var R=this.hostname.split(/\./),L=(m=0,R.length);m<L;m++){var M=R[m];if(M&&!M.match(S)){for(var N="",A=0,k=M.length;A<k;A++)M.charCodeAt(A)>127?N+="x":N+=M[A];if(!N.match(S)){var j=R.slice(0,m),F=R.slice(m+1),D=M.match(I);D&&(j.push(D[1]),F.unshift(D[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=s.toASCII(this.hostname));var G=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+G,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!C[h])for(m=0,L=w.length;m<L;m++){var B=w[m];if(-1!==a.indexOf(B)){var z=encodeURIComponent(B);z===B&&(z=escape(B)),a=a.split(B).join(z)}}var V=a.indexOf("#");-1!==V&&(this.hash=a.substr(V),a=a.slice(0,V));var q=a.indexOf("?");if(-1!==q?(this.search=a.substr(q),this.query=a.substr(q+1),e&&(this.query=y.parse(this.query)),a=a.slice(0,q)):e&&(this.search="",this.query={}),a&&(this.pathname=a),P[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var Y=this.search||"";this.path=G+Y}return this.href=this.format(),this},m.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||P[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},m.prototype.resolve=function(t){return this.resolveObject(R(t,!1,!0)).format()},m.prototype.resolveObject=function(t){if(l(t)){var e=new m;e.parse(t,!1,!0),t=e}for(var r=new m,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(r[u]=t[u])}return P[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!P[t.protocol]){for(var f=Object.keys(t),p=0;p<f.length;p++){var d=f[p];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||T[t.protocol])r.pathname=t.pathname;else{for(var g=(t.pathname||"").split("/");g.length&&!(t.host=g.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),r.pathname=g.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",_=r.search||"";r.path=y+_}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||v||r.host&&t.pathname,w=x,E=r.pathname&&r.pathname.split("/")||[],O=(g=t.pathname&&t.pathname.split("/")||[],r.protocol&&!P[r.protocol]);if(O&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host=null),x=x&&(""===g[0]||""===E[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=g;else if(g.length)E||(E=[]),E.pop(),E=E.concat(g),r.search=t.search,r.query=t.query;else if(!h(t.search)){if(O)r.hostname=r.host=E.shift(),(L=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=L.shift(),r.host=r.hostname=L.shift());return r.search=t.search,r.query=t.query,c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=E.slice(-1)[0],I=(r.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,C=0,R=E.length;R>=0;R--)"."===(S=E[R])?E.splice(R,1):".."===S?(E.splice(R,1),C++):C&&(E.splice(R,1),C--);if(!x&&!w)for(;C--;C)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var L,M=""===E[0]||E[0]&&"/"===E[0].charAt(0);O&&(r.hostname=r.host=M?"":E.length?E.shift():"",(L=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=L.shift(),r.host=r.hostname=L.shift()));return(x=x||r.host&&E.length)&&!M&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},m.prototype.parseHost=function(){var t=this.host,e=v.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};function L(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}class M extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class N{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r}concat(t){return new N(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const A={kind:"null"},k={kind:"number"},j={kind:"string"},F={kind:"boolean"},D={kind:"color"},G={kind:"object"},U={kind:"value"},B={kind:"collator"},z={kind:"formatted"},V={kind:"resolvedImage"};function q(t,e){return{kind:"array",itemType:t,N:e}}function Y(t){if("array"===t.kind){const e=Y(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const W=[A,k,j,F,D,z,G,q(U),V];function X(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!X(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of W)if(!X(t,e))return null}return`Expected ${Y(t)} but found ${Y(e)} instead.`}function H(t,e){return e.some(e=>e.kind===t.kind)}function Z(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}var K=a((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),g=a(h[2]),y=g<=.5?g*(d+1):g+d-g*d,m=2*g-y;return[n(255*s(m,y,p+1/3)),n(255*s(m,y,p)),n(255*s(m,y,p-1/3)),f];default:return null}}return null}}catch(t){}}));class J{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n}static parse(t){if(!t)return;if(t instanceof J)return t;if("string"!=typeof t)return;const e=K.parseCSSColor(t);return e?new J(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}}J.black=new J(0,0,0,1),J.white=new J(1,1,1,1),J.transparent=new J(0,0,0,0),J.red=new J(1,0,0,1),J.blue=new J(0,0,1,1);class ${constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Q{constructor(t,e,r,n,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i}}class tt{constructor(t){this.sections=t}static fromString(t){return new tt([new Q(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof tt?t:tt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r)}return t}}class et{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new et({name:t,available:!1}):null}serialize(){return["image",this.name]}}function rt(t,e,r,n){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255)){return`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`}function nt(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof J)return!0;if(t instanceof $)return!0;if(t instanceof tt)return!0;if(t instanceof et)return!0;if(Array.isArray(t)){for(const e of t)if(!nt(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!nt(t[e]))return!1;return!0}return!1}function it(t){if(null===t)return A;if("string"==typeof t)return j;if("boolean"==typeof t)return F;if("number"==typeof t)return k;if(t instanceof J)return D;if(t instanceof $)return B;if(t instanceof tt)return z;if(t instanceof et)return V;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=it(e);if(r){if(r===t)continue;r=U;break}r=t}return q(r||U,e)}return G}function ot(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof J||t instanceof tt||t instanceof et?t.toString():JSON.stringify(t)}class at{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!nt(t[1]))return e.error("invalid value");const r=t[1];let n=it(r);const i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new at(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof J?["rgba"].concat(this.value.toArray()):this.value instanceof tt?this.value.serialize():this.value}}class st{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const lt={string:j,number:k,boolean:F,object:G};class ut{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in lt)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=lt[r],n++}else i=U;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=q(i,o)}else r=lt[i];const o=[];for(;n<t.length;n++){const r=e.parse(t[n],n,U);if(!r)return null;o.push(r)}return new ut(r,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!X(this.type,it(r)))return r;if(e===this.args.length-1)throw new st(`Expected value to be of type ${Y(this.type)}, but found ${Y(it(r))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(t=>t.serialize()))}}class ct{constructor(t){this.type=z,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const o=t[r];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,k),!t))return null;let r=null;if(o["text-font"]&&(r=e.parse(o["text-font"],1,q(j)),!r))return null;let a=null;if(o["text-color"]&&(a=e.parse(o["text-color"],1,D),!a))return null;const s=n[n.length-1];s.scale=t,s.font=r,s.textColor=a}else{const o=e.parse(t[r],1,U);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new ct(n)}evaluate(t){return new tt(this.sections.map(e=>{const r=e.content.evaluate(t);return it(r)===V?new Q("",r,null,null,null):new Q(ot(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r)}return t}}class ht{constructor(t){this.type=V,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,j);return r?new ht(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=et.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ft={"to-boolean":F,"to-color":D,"to-number":k,"to-string":j};class pt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const n=ft[r],i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],r,U);if(!n)return null;i.push(n)}return new pt(n,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof J)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:rt(e[0],e[1],e[2],e[3]),!r))return new J(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new st(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new st(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?tt.fromString(ot(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?et.fromString(ot(this.args[0].evaluate(t))):ot(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new ct([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ht(this.args[0]).serialize();const t=["to-"+this.type.kind];return this.eachChild(e=>{t.push(e.serialize())}),t}}const dt=["Unknown","Point","LineString","Polygon"];class gt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord,i=r*e-t[0],o=n*e-t[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=J.parse(t)),e}}class yt{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const r=t[0],n=yt.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=o.filter(([e])=>!Array.isArray(e)||e.length===t.length-1);let s=null;for(const[n,o]of a){s=new Ut(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,o=s.parse(r,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(n)&&n.length!==a.length)s.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];s.concat(t+1).checkSubtype(e,r.type)}if(0===s.errors.length)return new yt(r,i,o,a)}}if(1===a.length)e.errors.push(...s.errors);else{const r=(a.length?a:o).map(([t])=>{return e=t,Array.isArray(e)?`(${e.map(Y).join(", ")})`:`(${Y(e.type)}...)`;var e}).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(Y(i.type))}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){yt.definitions=e;for(const r in e)t[r]=yt}}class mt{constructor(t,e,r){this.type=B,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,F);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,F);if(!i)return null;let o=null;return r.locale&&(o=e.parse(r.locale,1,j),!o)?null:new mt(n,i,o)}evaluate(t){return new $(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const _t=8192;function vt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function bt(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function xt(t,e){const r=(180+t[0])/360;const n=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360);var i;const o=Math.pow(2,e.z);return[Math.round(r*o*_t),Math.round(n*o*_t)]}function wt(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],a=t[1]-r[1];return n*a-o*i==0&&n*o<=0&&i*a<=0}function Et(t,e){let r=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(wt(t,s[e],s[e+1]))return!1;n=t,i=s[e],o=s[e+1],i[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]&&(r=!r)}}var n,i,o;return r}function Ot(t,e){for(let r=0;r<e.length;r++)if(Et(t,e[r]))return!0;return!1}function St(t,e,r,n){const i=t[0]-r[0],o=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],l=n[0]-r[0],u=n[1]-r[1],c=i*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function It(t,e,r,n){const i=[e[0]-t[0],e[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]];return 0!=(a=o)[0]*(s=i)[1]-a[1]*s[0]&&!(!St(t,e,r,n)||!St(r,n,t,e));var a,s}function Ct(t,e,r){for(const n of r)for(let r=0;r<n.length-1;++r)if(It(t,e,n[r],n[r+1]))return!0;return!1}function Tt(t,e){for(let r=0;r<t.length;++r)if(!Et(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(Ct(t[r],t[r+1],e))return!1;return!0}function Pt(t,e){for(let r=0;r<e.length;r++)if(Tt(t,e[r]))return!0;return!1}function Rt(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=[];for(let n=0;n<t[i].length;n++){const a=xt(t[i][n],r);vt(e,a),o.push(a)}n.push(o)}return n}function Lt(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=Rt(t[i],e,r);n.push(o)}return n}function Mt(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i}vt(e,t)}function Nt(t,e,r,n){const i=Math.pow(2,n.z)*_t,o=[n.x*_t,n.y*_t],a=[];if(!t)return a;for(const n of t)for(const t of n){const n=[t.x+o[0],t.y+o[1]];Mt(n,e,r,i),a.push(n)}return a}function At(t,e,r,n){const i=Math.pow(2,n.z)*_t,o=[n.x*_t,n.y*_t],a=[];if(!t)return a;for(const r of t){const t=[];for(const n of r){const r=[n.x+o[0],n.y+o[1]];vt(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const n of t)Mt(n,e,r,i)}var s;return a}class kt{constructor(t,e){this.type=F,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(nt(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new kt(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new kt(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new kt(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=Rt(e.coordinates,n,i),a=Nt(t.geometry(),r,n,i);if(!bt(r,n))return!1;for(const t of a)if(!Et(t,o))return!1}if("MultiPolygon"===e.type){const o=Lt(e.coordinates,n,i),a=Nt(t.geometry(),r,n,i);if(!bt(r,n))return!1;for(const t of a)if(!Ot(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=Rt(e.coordinates,n,i),a=At(t.geometry(),r,n,i);if(!bt(r,n))return!1;for(const t of a)if(!Tt(t,o))return!1}if("MultiPolygon"===e.type){const o=Lt(e.coordinates,n,i),a=At(t.geometry(),r,n,i);if(!bt(r,n))return!1;for(const t of a)if(!Pt(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function jt(t){if(t instanceof yt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof kt)return!1;let e=!0;return t.eachChild(t=>{e&&!jt(t)&&(e=!1)}),e}function Ft(t){if(t instanceof yt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(t=>{e&&!Ft(t)&&(e=!1)}),e}function Dt(t,e){if(t instanceof yt&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(t=>{r&&!Dt(t,e)&&(r=!1)}),r}class Gt{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new Gt(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ut{constructor(t,e=[],r,n=new N,i=[]){this.registry=t,this.path=e,this.key=e.map(t=>`[${t}]`).join(""),this.scope=n,this.errors=i,this.expectedType=r}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return"assert"===r?new ut(e,[t]):"coerce"===r?new pt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||"coerce");else n=r(n,t,e.typeAnnotation||"assert")}if(!(n instanceof at)&&"resolvedImage"!==n.type.kind&&Bt(n)){const t=new gt;try{n=new at(n.type,n.evaluate(t))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new Ut(this.registry,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map(t=>`[${t}]`).join("")}`;this.errors.push(new M(r,t))}checkSubtype(t,e){const r=X(t,e);return r&&this.error(r),r}}function Bt(t){if(t instanceof Gt)return Bt(t.boundExpression);if(t instanceof yt&&"error"===t.name)return!1;if(t instanceof mt)return!1;if(t instanceof kt)return!1;const e=t instanceof pt||t instanceof ut;let r=!0;return t.eachChild(t=>{r=e?r&&Bt(t):r&&t instanceof at}),!!r&&(jt(t)&&Dt(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function zt(t,e){const r=t.length-1;let n,i,o=0,a=r,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),n=t[s],i=t[s+1],n<=e){if(s===r||e<i)return s;o=s+1}else{if(!(n>e))throw new st("Input is not a number.");a=s-1}return 0}class Vt{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,k);if(!r)return null;const n=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let r=1;r<t.length;r+=2){const o=1===r?-1/0:t[r],a=t[r+1],s=r,l=r+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=e.parse(a,l,i);if(!u)return null;i=i||u.type,n.push([o,u])}return new Vt(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);return r[zt(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var qt=Yt;function Yt(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}function Wt(t,e,r){return t*(1-r)+e*r}Yt.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},Yt.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},Yt.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},Yt.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},Yt.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Xt=Object.freeze({__proto__:null,number:Wt,color:function(t,e,r){return new J(Wt(t.r,e.r,r),Wt(t.g,e.g,r),Wt(t.b,e.b,r),Wt(t.a,e.a,r))},array:function(t,e,r){return t.map((t,n)=>Wt(t,e[n],r))}});const Ht=.95047,Zt=1.08883,Kt=4/29,Jt=6/29,$t=3*Jt*Jt,Qt=Math.PI/180,te=180/Math.PI;function ee(t){return t>.008856451679035631?Math.pow(t,1/3):t/$t+Kt}function re(t){return t>Jt?t*t*t:$t*(t-Kt)}function ne(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ie(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function oe(t){const e=ie(t.r),r=ie(t.g),n=ie(t.b),i=ee((.4124564*e+.3575761*r+.1804375*n)/Ht),o=ee((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-ee((.0193339*e+.119192*r+.9503041*n)/Zt)),alpha:t.a}}function ae(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*re(e),r=Ht*re(r),n=Zt*re(n),new J(ne(3.2404542*r-1.5371385*e-.4985314*n),ne(-.969266*r+1.8760108*e+.041556*n),ne(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function se(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const le={forward:oe,reverse:ae,interpolate:function(t,e,r){return{l:Wt(t.l,e.l,r),a:Wt(t.a,e.a,r),b:Wt(t.b,e.b,r),alpha:Wt(t.alpha,e.alpha,r)}}},ue={forward:function(t){const{l:e,a:r,b:n}=oe(t),i=Math.atan2(n,r)*te;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Qt,r=t.c;return ae({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:se(t.h,e.h,r),c:Wt(t.c,e.c,r),l:Wt(t.l,e.l,r),alpha:Wt(t.alpha,e.alpha,r)}}};var ce=Object.freeze({__proto__:null,lab:le,hcl:ue});class he{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,r,n){let i=0;if("exponential"===t.name)i=fe(e,t.base,r,n);else if("linear"===t.name)i=fe(e,1,r,n);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new qt(o[0],o[1],o[2],o[3]).solve(fe(e,1,r,n))}return i}static parse(t,e){let[r,n,i,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);{const t=n.slice(1);if(4!==t.length||t.some(t=>"number"!=typeof t||t<0||t>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,k),!i)return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=D:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const r=o[t],n=o[t+1],i=t+3,l=t+4;if("number"!=typeof r)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const u=e.parse(n,l,s);if(!u)return null;s=s||u.type,a.push([r,u])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new he(s,r,n,i,a):e.error(`Type ${Y(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const o=zt(e,n),a=e[o],s=e[o+1],l=he.interpolationFactor(this.interpolation,n,a,s),u=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?Xt[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?ue.reverse(ue.interpolate(ue.forward(u),ue.forward(c),l)):le.reverse(le.interpolate(le.forward(u),le.forward(c),l))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function fe(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class pe{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let r=null;const n=e.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of t.slice(1)){const t=e.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!t)return null;r=r||t.type,i.push(t)}const o=n&&i.some(t=>X(n,t.type));return new pe(o?U:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(t),r&&r instanceof et&&!r.available&&(e||(e=r),r=null,n===this.args.length))return e;if(null!==r)break}return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class de{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let n=1;n<t.length-1;n+=2){const i=t[n];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;r.push([i,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new de(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}class ge{constructor(t,e,r){this.type=t,this.index=e,this.input=r}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,k),n=e.parse(t[2],2,q(e.expectedType||U));if(!r||!n)return null;const i=n.type;return new ge(i.itemType,r,n)}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new st(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new st(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new st(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class ye{constructor(t,e){this.type=F,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,U),n=e.parse(t[2],2,U);return r&&n?H(r.type,[F,j,k,A,U])?new ye(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Y(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return!1;if(!Z(e,["boolean","string","number","null"]))throw new st(`Expected first argument to be of type boolean, string, number or null, but found ${Y(it(e))} instead.`);if(!Z(r,["string","array"]))throw new st(`Expected second argument to be of type array or string, but found ${Y(it(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class me{constructor(t,e,r){this.type=k,this.needle=t,this.haystack=e,this.fromIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,U),n=e.parse(t[2],2,U);if(!r||!n)return null;if(!H(r.type,[F,j,k,A,U]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Y(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,k);return i?new me(r,n,i):null}return new me(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Z(e,["boolean","string","number","null"]))throw new st(`Expected first argument to be of type boolean, string, number or null, but found ${Y(it(e))} instead.`);if(!Z(r,["string","array"]))throw new st(`Expected second argument to be of type array or string, but found ${Y(it(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class _e{constructor(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const l=t[a+1];Array.isArray(s)||(s=[s]);const u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,it(t)))return null}else r=it(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(l,a,n);if(!c)return null;n=n||c.type,o.push(c)}const a=e.parse(t[1],1,U);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new _e(r,n,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(it(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=r.length,r.push([this.cases[t],[t]])):r[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of r)1===n.length?t.push(i(n[0])):t.push(n.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class ve{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,F);if(!o)return null;const a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}const i=e.parse(t[t.length-1],t.length-1,r);return i?new ve(r,n,i):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class be{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,U),n=e.parse(t[2],2,k);if(!r||!n)return null;if(!H(r.type,[q(U),j,U]))return e.error(`Expected first argument to be of type array or string, but found ${Y(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,k);return i?new be(r.type,r,n,i):null}return new be(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!Z(e,["string","array"]))throw new st(`Expected first argument to be of type array or string, but found ${Y(it(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function xe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function we(t,e,r,n){return 0===n.compare(e,r)}function Ee(t,e,r){const n="=="!==t&&"!="!==t;return class i{constructor(t,e,r){this.type=F,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const r=t[0];let o=e.parse(t[1],1,U);if(!o)return null;if(!xe(r,o.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${Y(o.type)}'.`);let a=e.parse(t[2],2,U);if(!a)return null;if(!xe(r,a.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${Y(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${Y(o.type)}' and '${Y(a.type)}'.`);n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ut(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ut(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,B),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=it(o),r=it(a);if(e.kind!==r.kind||"string"!==e.kind&&"number"!==e.kind)throw new st(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=it(o),r=it(a);if("string"!==t.kind||"string"!==r.kind)return e(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild(t=>{e.push(t.serialize())}),e}}}const Oe=Ee("==",(function(t,e,r){return e===r}),we),Se=Ee("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!we(0,e,r,n)})),Ie=Ee("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),Ce=Ee(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),Te=Ee("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),Pe=Ee(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0}));class Re{constructor(t,e,r,n,i){this.type=j,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,k);if(!r)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=e.parse(n.locale,1,j),!i))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,j),!o))return null;let a=null;if(n["min-fraction-digits"]&&(a=e.parse(n["min-fraction-digits"],1,k),!a))return null;let s=null;return n["max-fraction-digits"]&&(s=e.parse(n["max-fraction-digits"],1,k),!s)?null:new Re(r,i,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Le{constructor(t){this.type=k,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${Y(r.type)} instead.`):new Le(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new st(`Expected value to be of type string or array, but found ${Y(it(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Me={"==":Oe,"!=":Se,">":Ce,"<":Ie,">=":Pe,"<=":Te,array:ut,at:ge,boolean:ut,case:ve,coalesce:pe,collator:mt,format:ct,image:ht,in:ye,"index-of":me,interpolate:he,"interpolate-hcl":he,"interpolate-lab":he,length:Le,let:de,literal:at,match:_e,number:ut,"number-format":Re,object:ut,slice:be,step:Vt,string:ut,"to-boolean":pt,"to-color":pt,"to-number":pt,"to-string":pt,var:Gt,within:kt};function Ne(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const o=i?i.evaluate(t):1,a=rt(e,r,n,o);if(a)throw new st(a);return new J(e/255*o,r/255*o,n/255*o,o)}function Ae(t,e){return t in e}function ke(t,e){const r=e[t];return void 0===r?null:r}function je(t){return{type:t}}function Fe(t){return{result:"success",value:t}}function De(t){return{result:"error",value:t}}function Ge(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ue(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Be(t){return!!t.expression&&t.expression.interpolated}function ze(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Ve(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function qe(t){return t}function Ye(t,e){const r="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],i=n||void 0!==t.property,o=n||!i,a=t.type||(Be(e)?"exponential":"interval");if(r&&((t=L({},t)).stops&&(t.stops=t.stops.map(t=>[t[0],J.parse(t[1])])),t.default?t.default=J.parse(t.default):t.default=J.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!ce[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let s,l,u;if("exponential"===a)s=Ze;else if("interval"===a)s=He;else if("categorical"===a){s=Xe,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];u=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=Ke}if(n){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},n.push(o)),r[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of n)i.push([r[t].zoom,Ye(r[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:he.interpolationFactor.bind(void 0,o),zoomStops:i.map(t=>t[0]),evaluate:({zoom:r},n)=>Ze({stops:i,base:t.base},e,r).evaluate(r,n)}}if(o){const r="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:he.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map(t=>t[0]),evaluate:({zoom:r})=>s(t,e,r,l,u)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?We(t.default,e.default):s(t,e,i,l,u)}}}function We(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Xe(t,e,r,n,i){return We(typeof r===i?n[r]:void 0,t.default,e.default)}function He(t,e,r){if("number"!==ze(r))return We(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=zt(t.stops.map(t=>t[0]),r);return t.stops[i][1]}function Ze(t,e,r){const n=void 0!==t.base?t.base:1;if("number"!==ze(r))return We(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const o=zt(t.stops.map(t=>t[0]),r),a=function(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let u=Xt[e.type]||qe;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=ce[t.colorSpace];u=(t,r)=>e.reverse(e.interpolate(e.forward(t),e.forward(r),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==r)return u(e,r,a)}}:u(s,l,a)}function Ke(t,e,r){return"color"===e.type?r=J.parse(r):"formatted"===e.type?r=tt.fromString(r.toString()):"resolvedImage"===e.type?r=et.fromString(r.toString()):ze(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),We(r,t.default,e.default)}yt.register(Me,{error:[{kind:"error"},[j],(t,[e])=>{throw new st(e.evaluate(t))}],typeof:[j,[U],(t,[e])=>Y(it(e.evaluate(t)))],"to-rgba":[q(k,4),[D],(t,[e])=>e.evaluate(t).toArray()],rgb:[D,[k,k,k],Ne],rgba:[D,[k,k,k,k],Ne],has:{type:F,overloads:[[[j],(t,[e])=>Ae(e.evaluate(t),t.properties())],[[j,G],(t,[e,r])=>Ae(e.evaluate(t),r.evaluate(t))]]},get:{type:U,overloads:[[[j],(t,[e])=>ke(e.evaluate(t),t.properties())],[[j,G],(t,[e,r])=>ke(e.evaluate(t),r.evaluate(t))]]},"feature-state":[U,[j],(t,[e])=>ke(e.evaluate(t),t.featureState||{})],properties:[G,[],t=>t.properties()],"geometry-type":[j,[],t=>t.geometryType()],id:[U,[],t=>t.id()],zoom:[k,[],t=>t.globals.zoom],pitch:[k,[],t=>t.globals.pitch||0],"distance-from-center":[k,[],t=>t.distanceFromCenter()],"heatmap-density":[k,[],t=>t.globals.heatmapDensity||0],"line-progress":[k,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[k,[],t=>t.globals.skyRadialProgress||0],accumulated:[U,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[k,je(k),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[k,je(k),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:k,overloads:[[[k,k],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[k],(t,[e])=>-e.evaluate(t)]]},"/":[k,[k,k],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[k,[k,k],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[k,[],()=>Math.LN2],pi:[k,[],()=>Math.PI],e:[k,[],()=>Math.E],"^":[k,[k,k],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[k,[k],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[k,[k],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[k,[k],(t,[e])=>Math.log(e.evaluate(t))],log2:[k,[k],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[k,[k],(t,[e])=>Math.sin(e.evaluate(t))],cos:[k,[k],(t,[e])=>Math.cos(e.evaluate(t))],tan:[k,[k],(t,[e])=>Math.tan(e.evaluate(t))],asin:[k,[k],(t,[e])=>Math.asin(e.evaluate(t))],acos:[k,[k],(t,[e])=>Math.acos(e.evaluate(t))],atan:[k,[k],(t,[e])=>Math.atan(e.evaluate(t))],min:[k,je(k),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[k,je(k),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[k,[k],(t,[e])=>Math.abs(e.evaluate(t))],round:[k,[k],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[k,[k],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[k,[k],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[F,[j,U],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[F,[U],(t,[e])=>t.id()===e.value],"filter-type-==":[F,[j],(t,[e])=>t.geometryType()===e.value],"filter-<":[F,[j,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[F,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[F,[j,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[F,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[F,[j,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[F,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[F,[j,U],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[F,[U],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[F,[U],(t,[e])=>e.value in t.properties()],"filter-has-id":[F,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[F,[q(j)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[F,[q(U)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[F,[j,q(U)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[F,[j,q(U)],(t,[e,r])=>function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:F,overloads:[[[F,F],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[je(F),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:F,overloads:[[[F,F],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[je(F),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[F,[F],(t,[e])=>!e.evaluate(t)],"is-supported-script":[F,[j],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return!r||r(e.evaluate(t))}],upcase:[j,[j],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[j,[j],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[j,je(U),(t,e)=>e.map(e=>ot(e.evaluate(t))).join("")],"resolved-locale":[j,[B],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Je{constructor(t,e){var r;this.expression=t,this._warningHistory={},this._evaluator=new gt,this._defaultValue=e?"color"===(r=e).type&&Ve(r.default)?new J(0,0,0,0):"color"===r.type?J.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,r,n,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new st(`Expected value to be one of ${Object.keys(this._enumValues).map(t=>JSON.stringify(t)).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function $e(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Me}function Qe(t,e){const r=new Ut(Me,[],e?function(t){const e={color:D,string:j,number:k,enum:j,boolean:F,formatted:z,resolvedImage:V};if("array"===t.type)return q(e[t.value]||U,t.length);return e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Fe(new Je(n,e)):De(r.errors)}class tr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Ft(e.expression)}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}}class er{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Ft(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}interpolationFactor(t,e,r){return this.interpolationType?he.interpolationFactor(this.interpolationType,t,e,r):0}}function rr(t,e){if("error"===(t=Qe(t,e)).result)return t;const r=t.value.expression,n=jt(r);if(!n&&!Ge(e))return De([new M("","data expressions not supported")]);const i=Dt(r,["zoom","pitch","distance-from-center"]);if(!i&&!Ue(e))return De([new M("","zoom expressions not supported")]);const o=ir(r);if(!o&&!i)return De([new M("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof M)return De([o]);if(o instanceof he&&!Be(e))return De([new M("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Fe(new tr(n?"constant":"source",t.value));const a=o instanceof he?o.interpolation:void 0;return Fe(new er(n?"camera":"composite",t.value,o.labels,a))}class nr{constructor(t,e){this._parameters=t,this._specification=e,L(this,Ye(this._parameters,this._specification))}static deserialize(t){return new nr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ir(t){let e=null;if(t instanceof de)e=ir(t.result);else if(t instanceof pe){for(const r of t.args)if(e=ir(r),e)break}else(t instanceof Vt||t instanceof he)&&t.input instanceof yt&&"zoom"===t.input.name&&(e=t);return e instanceof M||t.eachChild(t=>{const r=ir(t);r instanceof M?e=r:!e&&r?e=new M("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new M("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function or(t){return"object"==typeof t?["literal",t]:t}function ar(t,e){let r=t.stops;if(!r)return function(t,e){const r=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",r]:r;if("enum"===e.type)return["match",r,Object.keys(e.values),r,t.default];{const n=["color"===e.type?"to-color":e.type,r,or(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}}(t,e);const n=r&&"object"==typeof r[0][0],i=n||void 0!==t.property,o=n||!i;return r=r.map(t=>!i&&e.tokens&&"string"==typeof t[1]?[t[0],pr(t[1])]:[t[0],or(t[1])]),n?function(t,e,r){const n={},i={},o=[];for(let e=0;e<r.length;e++){const a=r[e],s=a[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default},i[s]=[],o.push(s)),i[s].push([a[0].value,a[1]])}if("exponential"===fr({},e)){const r=[sr(t),["linear"],["zoom"]];for(const t of o){hr(r,t,ur(n[t],e,i[t]),!1)}return r}{const t=["step",["zoom"]];for(const r of o){hr(t,r,ur(n[r],e,i[r]),!0)}return cr(t),t}}(t,e,r):o?function(t,e,r,n=["zoom"]){const i=fr(t,e);let o,a=!1;if("interval"===i)o=["step",n],a=!0;else{if("exponential"!==i)throw new Error(`Unknown zoom function type "${i}"`);{const e=void 0!==t.base?t.base:1;o=[sr(t),1===e?["linear"]:["exponential",e],n]}}for(const t of r)hr(o,t[0],t[1],a);return cr(o),o}(t,e,r):ur(t,e,r)}function sr(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function lr(t,e){const r=or((n=t.default,i=e.default,void 0!==n?n:void 0!==i?i:void 0));var n,i;return void 0===r&&"resolvedImage"===e.type?"":r}function ur(t,e,r){const n=fr(t,e),i=["get",t.property];if("categorical"===n&&"boolean"==typeof r[0][0]){const n=["case"];for(const t of r)n.push(["==",i,t[0]],t[1]);return n.push(lr(t,e)),n}if("categorical"===n){const n=["match",i];for(const t of r)hr(n,t[0],t[1],!1);return n.push(lr(t,e)),n}if("interval"===n){const e=["step",["number",i]];for(const t of r)hr(e,t[0],t[1],!0);return cr(e),void 0===t.default?e:["case",["==",["typeof",i],"number"],e,or(t.default)]}if("exponential"===n){const e=void 0!==t.base?t.base:1,n=[sr(t),1===e?["linear"]:["exponential",e],["number",i]];for(const t of r)hr(n,t[0],t[1],!1);return void 0===t.default?n:["case",["==",["typeof",i],"number"],n,or(t.default)]}throw new Error("Unknown property function type "+n)}function cr(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function hr(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(r))}function fr(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function pr(t){const e=["concat"],r=/{([^{}]+)}/g;let n=0;for(let i=r.exec(t);null!==i;i=r.exec(t)){const o=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}function dr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function gr(t){if(Array.isArray(t))return t.map(gr);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=gr(t[r]);return e}return dr(t)}function yr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!yr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function mr(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};yr(t)||(t=Or(t));const r=t;let n=!0;try{n=function(t){if(!br(t))return t;let e=gr(t);return vr(e),e=_r(e),e}(r)}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const o=i["filter_"+e],a=Qe(n,o);let s=null;if("error"===a.result)throw new Error(a.value.map(t=>`${t.key}: ${t.message}`).join(", "));s=(t,e,r)=>a.value.evaluate(t,e,{},r);let l=null,u=null;if(n!==r){const t=Qe(r,o);if("error"===t.result)throw new Error(t.value.map(t=>`${t.key}: ${t.message}`).join(", "));l=(e,r,n,i,o)=>t.value.evaluate(e,r,{},n,void 0,void 0,i,o),u=!jt(t.value.expression)}s=s;return{filter:s,dynamicFilter:l||void 0,needGeometry:Er(n),needFeature:!!u}}function _r(t){if(!Array.isArray(t))return t;const e=function(t){if(xr.has(t[0]))for(let e=1;e<t.length;e++){if(br(t[e]))return!0}return t}(t);return!0===e?e:e.map(t=>_r(t))}function vr(t){let e=!1;const r=[];if("case"===t[0]){for(let n=1;n<t.length-1;n+=2)e=e||br(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if("match"===t[0]){e=e||br(t[1]);for(let e=2;e<t.length-1;e+=2)r.push(t[e+1]);r.push(t[t.length-1])}else if("step"===t[0]){e=e||br(t[1]);for(let e=1;e<t.length-1;e+=2)r.push(t[e+1])}e&&(t.length=0,t.push("any",...r));for(let e=1;e<t.length;e++)vr(t[e])}function br(t){if(!Array.isArray(t))return!1;if(function(t){return"pitch"===t||"distance-from-center"===t}(t[0]))return!0;for(let e=1;e<t.length;e++){if(br(t[e]))return!0}return!1}const xr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function wr(t,e){return t<e?-1:t>e?1:0}function Er(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Er(t[e]))return!0;return!1}function Or(t){if(!t)return!0;const e=t[0];if(t.length<=1)return"any"!==e;var r;return"=="===e?Sr(t[1],t[2],"=="):"!="===e?Tr(Sr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Sr(t[1],t[2],e):"any"===e?(r=t.slice(1),["any"].concat(r.map(Or))):"all"===e?["all"].concat(t.slice(1).map(Or)):"none"===e?["all"].concat(t.slice(1).map(Or).map(Tr)):"in"===e?Ir(t[1],t.slice(2)):"!in"===e?Tr(Ir(t[1],t.slice(2))):"has"===e?Cr(t[1]):"!has"===e?Tr(Cr(t[1])):"within"!==e||t}function Sr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Ir(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",t,["literal",e.sort(wr)]]:["filter-in-small",t,["literal",e]]}}function Cr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Tr(t){return["!",t]}var Pr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rr(t,e){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return Pr.forEach(t=>{t in e&&(r[t]=e[t])}),r}function Lr(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Rr(t[r],e[t[r].ref]));return t}a((function(t,e){var r=function(){var t=function(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r},e=[1,12],r=[1,13],n=[1,9],i=[1,10],o=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],c=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:30,15:7,16:8,17:a,23:s},t(l,[2,19]),{3:5,4:e,5:6,6:r,7:3,8:n,9:4,10:i,11:o,13:31,15:7,16:8,17:a,23:s},t(u,[2,17]),t(u,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,l=0,u=2,c=1,h=i.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(p.yy[d]=this.yy[d]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var g=f.yylloc;i.push(g);var y=f.options&&f.options.ranges;function m(){var t;return"number"!=typeof(t=f.lex()||c)&&(t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,v,b,x,w,E,O,S,I={};;){if(v=r[r.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null==_&&(_=m()),b=o[v]&&o[v][_]),void 0===b||!b.length||!b[0]){var C="";for(w in S=[],o[v])this.terminals_[w]&&w>u&&S.push("'"+this.terminals_[w]+"'");C=f.showPosition?"Parse error on line "+(s+1)+":\n"+f.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(s+1)+": Unexpected "+(_==c?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(C,{text:f.match,token:this.terminals_[_]||_,line:f.yylineno,loc:g,expected:S})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+_);switch(b[0]){case 1:r.push(_),n.push(f.yytext),i.push(f.yylloc),r.push(b[1]),_=null,l=f.yyleng,a=f.yytext,s=f.yylineno,g=f.yylloc;break;case 2:if(E=this.productions_[b[1]][1],I.$=n[n.length-E],I._$={first_line:i[i.length-(E||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(E||1)].first_column,last_column:i[i.length-1].last_column},y&&(I._$.range=[i[i.length-(E||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(I,[a,l,s,p.yy,b[1],n,i].concat(h))))return x;E&&(r=r.slice(0,-1*E*2),n=n.slice(0,-1*E),i=i.slice(0,-1*E)),r.push(this.productions_[b[1]][0]),n.push(I.$),i.push(I._$),O=o[r[r.length-2]][r[r.length-1]],r.push(O);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return h.lexer=f,p.prototype=h,h.Parser=p,new p}();e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)}}));new Set(["vector","raster","raster-dem"]);const Mr={StyleExpression:Je,isExpression:$e,isExpressionFilter:yr,createExpression:Qe,createPropertyExpression:rr,normalizePropertyExpression:function(t,e){if(Ve(t))return new nr(t,e);if($e(t)){const r=rr(t,e);if("error"===r.result)throw new Error(r.value.map(t=>`${t.key}: ${t.message}`).join(", "));return r.value}{let r=t;return"string"==typeof t&&"color"===e.type&&(r=J.parse(t)),{kind:"constant",evaluate:()=>r}}},ZoomConstantExpression:tr,ZoomDependentExpression:er,StylePropertyFunction:nr},Nr={convertFunction:ar,createFunction:Ye,isFunction:Ve}}).call(this,r(90),r(67).Buffer)},function(t,e,r){"use strict";var n=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();e.a=n},function(t,e,r){"use strict";var n,i=r(45),o=r(9),a=r(15),s=r(44),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.key=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return l(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=o.a.ERROR,this.unlistenImage_(),this.image_=((t=Object(a.a)(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Object(s.b)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(i.a);e.a=u},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{async fetch(t,e){return Promise.all(t.map(t=>this.fetchSlice(t,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}},function(t,e,r){"use strict";r.d(e,"b",(function(){return f})),r.d(e,"a",(function(){return p})),r.d(e,"c",(function(){return d}));var n,i=r(48),o=r(5),a=r(0),s=r(15),l=r(1),u=r(4);function c(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function h(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function f(t,e,r,n){var i=Object(l.z)(r,e,t),o=Object(l.p)(e,n,r),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var u=t.getMetersPerUnit();void 0!==u&&(o/=u);var c=t.getExtent();if(!c||Object(a.g)(c,i)){var h=Object(l.p)(t,o,i)/o;isFinite(h)&&h>0&&(o/=h)}return o}function p(t,e,r,n){var i=Object(a.x)(r),o=f(t,e,i,n);return(!isFinite(o)||o<=0)&&Object(a.t)(r,(function(r){return o=f(t,e,r,n),isFinite(o)&&o>0})),o}function d(t,e,r,l,f,p,d,g,y,m,_,v){var b=Object(s.a)(Math.round(r*t),Math.round(r*e));if(v||Object(o.a)(b,i.a),0===y.length)return b.canvas;function x(t){return Math.round(t*r)/r}b.scale(r,r),b.globalCompositeOperation="lighter";var w=Object(a.k)();y.forEach((function(t,e,r){Object(a.q)(w,t.extent)}));var E=Object(a.F)(w),O=Object(a.A)(w),S=Object(s.a)(Math.round(r*E/l),Math.round(r*O/l));v||Object(o.a)(S,i.a);var I=r/l;y.forEach((function(t,e,r){var n=t.extent[0]-w[0],i=-(t.extent[3]-w[3]),o=Object(a.F)(t.extent),s=Object(a.A)(t.extent);t.image.width>0&&t.image.height>0&&S.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,n*I,i*I,o*I,s*I)}));var C=Object(a.D)(d);return g.getTriangles().forEach((function(t,e,i){var o=t.source,a=t.target,s=o[0][0],f=o[0][1],d=o[1][0],g=o[1][1],y=o[2][0],m=o[2][1],_=x((a[0][0]-C[0])/p),E=x(-(a[0][1]-C[1])/p),O=x((a[1][0]-C[0])/p),I=x(-(a[1][1]-C[1])/p),T=x((a[2][0]-C[0])/p),P=x(-(a[2][1]-C[1])/p),R=s,L=f;s=0,f=0;var M=[[d-=R,g-=L,0,0,O-_],[y-=R,m-=L,0,0,T-_],[0,0,d,g,I-E],[0,0,y,m,P-E]],N=Object(u.i)(M);if(N){if(b.save(),b.beginPath(),function(){if(void 0===n){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",c(t,4,5,4,0),c(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;n=h(e,0)||h(e,4)||h(e,8)}return n}()||!v){b.moveTo(O,I);for(var A=_-O,k=E-I,j=0;j<4;j++)b.lineTo(O+x((j+1)*A/4),I+x(j*k/3)),3!=j&&b.lineTo(O+x((j+1)*A/4),I+x((j+1)*k/3));b.lineTo(T,P)}else b.moveTo(O,I),b.lineTo(_,E),b.lineTo(T,P);b.clip(),b.transform(N[0],N[2],N[1],N[3],_,E),b.translate(w[0]-R,w[3]-L),b.scale(l/r,-l/r),b.drawImage(S.canvas,0,0),b.restore()}})),_&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,g.getTriangles().forEach((function(t,e,r){var n=t.target,i=(n[0][0]-C[0])/p,o=-(n[0][1]-C[1])/p,a=(n[1][0]-C[0])/p,s=-(n[1][1]-C[1])/p,l=(n[2][0]-C[0])/p,u=-(n[2][1]-C[1])/p;b.beginPath(),b.moveTo(a,s),b.lineTo(i,o),b.lineTo(l,u),b.closePath(),b.stroke()})),b.restore()),b.canvas}},function(t,e,r){"use strict";e.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,r){"use strict";var n,i=r(21),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.inversePixelTransform=r,o.frameState=n,o.context=i,o}return o(e,t),e}(i.a);e.a=a},function(t,e,r){"use strict";var n,i=r(84),o=r(76),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.createRenderer=function(){return new o.a(this)},e.prototype.getData=function(e){return t.prototype.getData.call(this,e)},e}(i.a);e.a=s},function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return c})),r.d(e,"d",(function(){return h}));var n=r(2),i=r(4),o=6371008.8;function a(t,e,r){var n=r||o,a=Object(i.m)(t[1]),s=Object(i.m)(e[1]),l=(s-a)/2,u=Object(i.m)(e[0]-t[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(a)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function s(t,e){for(var r=0,n=0,i=t.length;n<i-1;++n)r+=a(t[n],t[n+1],e);return r}function l(t,e){var r=e||{},i=r.radius||o,a=r.projection||"EPSG:3857",u=t.getType();u!==n.a.GEOMETRY_COLLECTION&&(t=t.clone().transform(a,"EPSG:4326"));var c,h,f,p,d,g,y=0;switch(u){case n.a.POINT:case n.a.MULTI_POINT:break;case n.a.LINE_STRING:case n.a.LINEAR_RING:y=s(c=t.getCoordinates(),i);break;case n.a.MULTI_LINE_STRING:case n.a.POLYGON:for(f=0,p=(c=t.getCoordinates()).length;f<p;++f)y+=s(c[f],i);break;case n.a.MULTI_POLYGON:for(f=0,p=(c=t.getCoordinates()).length;f<p;++f)for(d=0,g=(h=c[f]).length;d<g;++d)y+=s(h[d],i);break;case n.a.GEOMETRY_COLLECTION:var m=t.getGeometries();for(f=0,p=m.length;f<p;++f)y+=l(m[f],e);break;default:throw new Error("Unsupported geometry type: "+u)}return y}function u(t,e){for(var r=0,n=t.length,o=t[n-1][0],a=t[n-1][1],s=0;s<n;s++){var l=t[s][0],u=t[s][1];r+=Object(i.m)(l-o)*(2+Math.sin(Object(i.m)(a))+Math.sin(Object(i.m)(u))),o=l,a=u}return r*e*e/2}function c(t,e){var r=e||{},i=r.radius||o,a=r.projection||"EPSG:3857",s=t.getType();s!==n.a.GEOMETRY_COLLECTION&&(t=t.clone().transform(a,"EPSG:4326"));var l,h,f,p,d,g,y=0;switch(s){case n.a.POINT:case n.a.MULTI_POINT:case n.a.LINE_STRING:case n.a.MULTI_LINE_STRING:case n.a.LINEAR_RING:break;case n.a.POLYGON:for(l=t.getCoordinates(),y=Math.abs(u(l[0],i)),f=1,p=l.length;f<p;++f)y-=Math.abs(u(l[f],i));break;case n.a.MULTI_POLYGON:for(f=0,p=(l=t.getCoordinates()).length;f<p;++f)for(h=l[f],y+=Math.abs(u(h[0],i)),d=1,g=h.length;d<g;++d)y-=Math.abs(u(h[d],i));break;case n.a.GEOMETRY_COLLECTION:var m=t.getGeometries();for(f=0,p=m.length;f<p;++f)y+=c(m[f],e);break;default:throw new Error("Unsupported geometry type: "+s)}return y}function h(t,e,r,n){var a=n||o,s=Object(i.m)(t[1]),l=Object(i.m)(t[0]),u=e/a,c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(r)),h=l+Math.atan2(Math.sin(r)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c));return[Object(i.l)(h),Object(i.l)(c)]}},function(t,e,r){
/**!

 @license
 handlebars v4.5.2

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=f();return t.compile=function(e,r){return l.compile(e,r,t)},t.precompile=function(e,r){return l.precompile(e,r,t)},t.AST=a.default,t.Compiler=l.Compiler,t.JavaScriptCompiler=u.default,t.Parser=s.parser,t.parse=s.parse,t.parseWithoutProcessing=s.parseWithoutProcessing,t}var i=r(1).default;e.__esModule=!0;var o=i(r(2)),a=i(r(35)),s=r(36),l=r(41),u=i(r(42)),c=i(r(39)),h=i(r(34)),f=o.default.create,p=n();p.create=n,h.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){"use strict";function n(){var t=new a.HandlebarsEnvironment;return u.extend(t,a),t.SafeString=s.default,t.Exception=l.default,t.Utils=u,t.escapeExpression=u.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var i=r(3).default,o=r(1).default;e.__esModule=!0;var a=i(r(4)),s=o(r(21)),l=o(r(6)),u=i(r(5)),c=i(r(22)),h=o(r(34)),f=n();f.create=n,h.default(f),f.default=f,e.default=f,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){"use strict";function n(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},s.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var i=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var o=r(5),a=i(r(6)),s=r(10),l=r(18),u=i(r(20)),c="4.5.2";e.VERSION=c;var h=8;e.COMPILER_REVISION=h;var f=7;e.LAST_COMPATIBLE_COMPILER_REVISION=f;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};e.REVISION_CHANGES=p;var d="[object Object]";n.prototype={constructor:n,logger:u.default,log:u.default.log,registerHelper:function(t,e){if(o.toString.call(t)===d){if(e)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===d)o.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===d){if(e)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var g=u.default.log;e.log=g,e.createFrame=o.createFrame,e.logger=u.default},function(t,e){"use strict";function r(t){return c[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}function i(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function o(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return f.test(t)?t.replace(h,r):t}function a(t){return!t&&0!==t||!(!g(t)||0!==t.length)}function s(t){var e=n({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=n,e.indexOf=i,e.escapeExpression=o,e.isEmpty=a,e.createFrame=s,e.blockParams=l,e.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,f=/[&<>"'`=]/,p=Object.prototype.toString;e.toString=p;var d=function(t){return"function"==typeof t};d(/x/)&&(e.isFunction=d=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)}),e.isFunction=d;var g=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===p.call(t)};e.isArray=g},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,s=void 0,l=void 0,u=void 0;r&&(a=r.start.line,s=r.end.line,l=r.start.column,u=r.end.column,t+=" - "+a+":"+l);for(var c=Error.prototype.constructor.call(this,t),h=0;h<o.length;h++)this[o[h]]=c[o[h]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,this.endLineNumber=s,i?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=l,this.endColumn=u))}catch(t){}}var i=r(7).default;e.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){"use strict";function n(t){a.default(t),s.default(t),l.default(t),u.default(t),c.default(t),h.default(t),f.default(t)}function i(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])}var o=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=n,e.moveHelperToHooks=i;var a=o(r(11)),s=o(r(12)),l=o(r(13)),u=o(r(14)),c=o(r(15)),h=o(r(16)),f=o(r(17))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,r){var i=r.inverse,o=r.fn;if(!0===e)return o(this);if(!1===e||null==e)return i(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(e,r)}))},t.exports=e.default},function(t,e,r){(function(n){"use strict";var i=r(1).default;e.__esModule=!0;var o=r(5),a=i(r(6));e.default=function(t){t.registerHelper("each",(function(t,e){function r(e,r,n){c&&(c.key=e,c.index=r,c.first=0===r,c.last=!!n,h&&(c.contextPath=h+e)),u+=i(t[e],{data:c,blockParams:o.blockParams([t[e],e],[h+e,null])})}if(!e)throw new a.default("Must pass iterator to #each");var i=e.fn,s=e.inverse,l=0,u="",c=void 0,h=void 0;if(e.data&&e.ids&&(h=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(c=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var f=t.length;l<f;l++)l in t&&r(l,l,l===t.length-1);else if(n.Symbol&&t[n.Symbol.iterator]){for(var p=[],d=t[n.Symbol.iterator](),g=d.next();!g.done;g=d.next())p.push(g.value);for(f=(t=p).length;l<f;l++)r(l,l,l===t.length-1)}else{var y=void 0;for(var m in t)t.hasOwnProperty(m)&&(void 0!==y&&r(y,l-1),y=m,l++);void 0!==y&&r(y,l-1,!0)}return 0===l&&(u=s(this)),u}))},t.exports=e.default}).call(e,function(){return this}())},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=n(r(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),e[0]=i,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e){return t?"constructor"!==String(e)||t.propertyIsEnumerable(e)?t[e]:void 0:t}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(t)&&(t=t.call(this));var r=e.fn;if(i.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&((n=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:n,blockParams:i.blockParams([t],[n&&n.contextPath])})}))},t.exports=e.default},function(t,e,r){"use strict";function n(t){o.default(t)}var i=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=n;var o=i(r(19))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,r,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,e.partials);var s=t(i,o);return r.partials=a,s}),e.partials[i.args[0]]=i.fn,o}))},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[e].apply(console,n)}}};e.default=i,t.exports=e.default},function(t,e){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t){var e=t&&t[0]||1,r=y.COMPILER_REVISION;if(!(e>=y.LAST_COMPATIBLE_COMPILER_REVISION&&e<=y.COMPILER_REVISION)){if(e<y.LAST_COMPATIBLE_COMPILER_REVISION){var n=y.REVISION_CHANGES[r],i=y.REVISION_CHANGES[e];throw new g.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new g.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function i(t,e){function r(r,n,i){i.hash&&(n=d.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,i);var o=d.extend({},i,{hooks:this.hooks}),a=e.VM.invokePartial.call(this,r,n,o);if(null==a&&e.compile&&(i.partials[i.name]=e.compile(r,t.compilerOptions,e),a=i.partials[i.name](n,o)),null!=a){if(i.indent){for(var s=a.split("\n"),l=0,u=s.length;l<u&&(s[l]||l+1!==u);l++)s[l]=i.indent+s[l];a=s.join("\n")}return a}throw new g.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function n(e){function r(e){return""+t.main(a,e,a.helpers,a.partials,o,l,s)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=i.data;n._setup(i),!i.partial&&t.useData&&(o=u(e,o));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(r=c(t.main,r,a,i.depths||[],o,l))(e,i)}if(!e)throw new g.default("No environment passed to template");if(!t||!t.main)throw new g.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i=t.compiler&&7===t.compiler[0],a={strict:function(t,e,r){if(!t||!(e in t))throw new g.default('"'+e+'" not defined in '+t,{loc:r});return t[e]},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:d.escapeExpression,invokePartial:r,fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,n,i){var a=this.programs[t],s=this.fn(t);return e||i||n||r?a=o(this,t,s,e,r,n,i):a||(a=this.programs[t]=o(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},nullContext:h({}),noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(r){if(r.partial)a.helpers=r.helpers,a.partials=r.partials,a.decorators=r.decorators,a.hooks=r.hooks;else{a.helpers=d.extend({},e.helpers,r.helpers),t.usePartial&&(a.partials=d.extend({},e.partials,r.partials)),(t.usePartial||t.useDecorators)&&(a.decorators=d.extend({},e.decorators,r.decorators)),a.hooks={};var n=r.allowCallsToHelperMissing||i;m.moveHelperToHooks(a,"helperMissing",n),m.moveHelperToHooks(a,"blockHelperMissing",n)}},n._child=function(e,r,n,i){if(t.useBlockParams&&!n)throw new g.default("must pass block params");if(t.useDepths&&!i)throw new g.default("must pass parent depths");return o(a,e,t[e],r,0,n,i)},n}function o(t,e,r,n,i,o,a){function s(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||e==a[0]||e===t.nullContext&&null===a[0]||(s=[e].concat(a)),r(t,e,t.helpers,t.partials,i.data||n,o&&[i.blockParams].concat(o),s)}return(s=c(r,s,t,a,n,o)).program=e,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t}function s(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var i=void 0;if(r.fn&&r.fn!==l&&function(){r.data=y.createFrame(r.data);var t=r.fn;i=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=y.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=d.extend({},r.partials,t.partials))}(),void 0===t&&i&&(t=i),void 0===t)throw new g.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)}function l(){return""}function u(t,e){return e&&"root"in e||((e=e?y.createFrame(e):{}).root=t),e}function c(t,e,r,n,i,o){if(t.decorator){var a={};e=t.decorator(e,a,r,n&&n[0],i,o,n),d.extend(e,a)}return e}var h=r(23).default,f=r(3).default,p=r(1).default;e.__esModule=!0,e.checkRevision=n,e.template=i,e.wrapProgram=o,e.resolvePartial=a,e.invokePartial=s,e.noop=l;var d=f(r(5)),g=p(r(6)),y=r(4),m=r(10)},function(t,e,r){t.exports={default:r(24),__esModule:!0}},function(t,e,r){r(25),t.exports=r(30).Object.seal},function(t,e,r){var n=r(26);r(27)("seal",(function(t){return function(e){return t&&n(e)?t(e):e}}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(28),i=r(30),o=r(33);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(t,e,r){var n=r(29),i=r(30),o=r(31),a="prototype",s=function(t,e,r){var l,u,c,h=t&s.F,f=t&s.G,p=t&s.S,d=t&s.P,g=t&s.B,y=t&s.W,m=f?i:i[e]||(i[e]={}),_=f?n:p?n[e]:(n[e]||{})[a];for(l in f&&(r=e),r)(u=!h&&_&&l in _)&&l in m||(c=u?_[l]:r[l],m[l]=f&&"function"!=typeof _[l]?r[l]:g&&u?o(c,n):y&&_[l]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((m[a]||(m[a]={}))[l]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(32);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){(function(r){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==r?r:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return"Program"===t.type?t:(s.default.yy=h,h.locInfo=function(t){return new h.SourceLocation(e&&e.srcName,t)},s.default.parse(t))}function i(t,e){var r=n(t,e);return new l.default(e).accept(r)}var o=r(1).default,a=r(3).default;e.__esModule=!0,e.parseWithoutProcessing=n,e.parse=i;var s=o(r(37)),l=o(r(38)),u=a(r(40)),c=r(5);e.parser=s.default;var h={};c.extend(h,u)},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var l=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),u=n.prepareProgram([l],o[s-1].loc);u.chained=!0,this.$={strip:o[s-2].strip,program:u,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=r.lexer.lex()||1)&&(t=r.symbols_[t]||t),t}var r=this,n=[0],i=[null],o=[],a=this.table,s="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,g,y,m,_,v,b,x,w={};;){if(g=n[n.length-1],this.defaultActions[g]?y=this.defaultActions[g]:(null!=p||(p=e()),y=a[g]&&a[g][p]),void 0===y||!y.length||!y[0]){var E="";if(!c){for(_ in x=[],a[g])this.terminals_[_]&&_>2&&x.push("'"+this.terminals_[_]+"'");E=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(y[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(y[1]),p=null,d?(p=d,d=null):(u=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[y[1]][1],w.$=i[i.length-v],w._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},f&&(w._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(m=this.performAction.call(w,s,u,l,this.yy,y[1],i,o)))return m;v&&(n=n.slice(0,-1*v*2),i=i.slice(0,-1*v),o=o.slice(0,-1*v)),n.push(this.productions_[y[1]][0]),i.push(w.$),o.push(w._$),b=a[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(r=this._input.match(this.rules[o[a]]))||e&&!(r[0].length>e[0].length)||(e=r,n=a,this.options.flex));a++);return e?((i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){function i(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();return e.lexer=r,t.prototype=e,e.Parser=t,new t}();e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function i(t,e,r){void 0===e&&(e=t.length);var n=t[e-1],i=t[e-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(t,e,r){void 0===e&&(e=-1);var n=t[e+1],i=t[e+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(t,e,r){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(t,e,r){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var l=r(1).default;e.__esModule=!0;var u=l(r(39));n.prototype=new u.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,l=0,u=n.length;l<u;l++){var c=n[l],h=this.accept(c);if(h){var f=i(n,l,r),p=o(n,l,r),d=h.openStandalone&&f,g=h.closeStandalone&&p,y=h.inlineStandalone&&f&&p;h.close&&a(n,l,!0),h.open&&s(n,l,!0),e&&y&&(a(n,l),s(n,l)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),e&&d&&(a((c.program||c.inverse).body),s(n,l)),e&&g&&(a(n,l),s((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,n=r,l=r;if(r&&r.chained)for(n=r.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var u={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:i((n||e).body)};if(t.openStrip.close&&a(e.body,null,!0),r){var c=t.inverseStrip;c.open&&s(e.body,null,!0),c.close&&a(n.body,null,!0),t.closeStrip.open&&s(l.body,null,!0),!this.options.ignoreStandalone&&i(e.body)&&o(n.body)&&(s(e.body),a(n.body))}else t.closeStrip.open&&s(e.body,null,!0);return u},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(){this.parents=[]}function i(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){i.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=r(1).default;e.__esModule=!0;var l=s(r(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!n.prototype[r.type])throw new l.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new l.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new l.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new g.default(t.path.original+" doesn't match "+e,r)}}function i(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function o(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t}function a(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function s(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(t,e,r){r=this.locInfo(r);for(var n=t?"@":"",i=[],o=0,a=0,s=e.length;a<s;a++){var l=e[a].part,u=e[a].original!==l;if(n+=(e[a].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new g.default("Invalid path: "+n,{loc:r});".."===l&&o++}}return{type:"PathExpression",data:t,depth:o,parts:i,original:n,loc:r}}function u(t,e,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}}function c(t,e,r,i){n(t,r);var o={type:"Program",body:e,strip:{},loc:i=this.locInfo(i)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function h(t,e,r,i,o,a){i&&i.path&&n(t,i);var s=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,u=void 0;if(r){if(s)throw new g.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),u=r.strip,l=r.program}return o&&(o=l,l=e,e=o),{type:s?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:u,closeStrip:i&&i.strip,loc:this.locInfo(a)}}function f(t,e){if(!e&&t.length){var r=t[0].loc,n=t[t.length-1].loc;r&&n&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function p(t,e,r,i){return n(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}}var d=r(1).default;e.__esModule=!0,e.SourceLocation=i,e.id=o,e.stripFlags=a,e.stripComment=s,e.preparePath=l,e.prepareMustache=u,e.prepareRawBlock=c,e.prepareBlock=h,e.prepareProgram=f,e.preparePartialBlock=p;var g=d(r(6))},function(t,e,r){"use strict";function n(){}function i(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var n=r.parse(t,e),i=(new r.Compiler).compile(n,e);return(new r.JavaScriptCompiler).compile(i,e)}function o(t,e,r){function n(){var n=r.parse(t,e),i=(new r.Compiler).compile(n,e),o=(new r.JavaScriptCompiler).compile(i,e,void 0,!0);return r.template(o)}function i(t,e){return o||(o=n()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=c.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return i._setup=function(t){return o||(o=n()),o._setup(t)},i._child=function(t,e,r,i){return o||(o=n()),o._child(t,e,r,i)},i}function a(t,e){if(t===e)return!0;if(c.isArray(t)&&c.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!a(t[r],e[r]))return!1;return!0}}function s(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var l=r(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=i,e.compile=o;var u=l(r(6)),c=r(5),h=l(r(35)),f=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var n=this.opcodes[r],i=t.opcodes[r];if(n.opcode!==i.opcode||!a(n.args,i.args))return!1}for(e=this.children.length,r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var r=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},r)for(var n in r)this.options.knownHelpers[n]=r[n];return this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[r]=e,this.useDepths=this.useDepths||e.useDepths,r},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,n=0;n<r;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){s(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,r):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new u.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){s(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var n=t.path,i=n.parts[0],o=null!=e||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var n=this.setupFullMustacheParams(t,e,r),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,h.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=h.default.helpers.scopedId(t),n=!t.depth&&!r&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,n=e.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=h.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),n=!r&&h.default.helpers.helperExpression(t),i=!r&&(n||e);if(i&&!n){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||h.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var n=this.options.blockParams[e],i=n&&c.indexOf(n,t);if(n&&i>=0)return[e,i]}}}},function(t,e,r){"use strict";function n(t){this.value=t}function i(){}function o(t,e,r,n){var i=e.popStack(),o=0,a=r.length;for(t&&a--;o<a;o++)i=e.nameLookup(i,r[o],n);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(r[o]),", ",JSON.stringify(e.source.currentLocation)," )"]:i}var a=r(1).default;e.__esModule=!0;var s=r(4),l=a(r(6)),u=r(5),c=a(r(43));i.prototype={nameLookup:function(t,e){function r(){return i.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"[",JSON.stringify(e),"]"]}var n=[this.aliasable("container.propertyIsEnumerable"),".call(",t,',"constructor")'];return"constructor"===e?["(",n,"?",r()," : undefined)"]:r()},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=s.COMPILER_REVISION;return[t,s.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,r){return u.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,r,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,o=void 0,a=void 0,s=void 0,u=void 0;for(s=0,u=i.length;s<u;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var h={compiler:this.compilerInfo(),main:c};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var f=this.context,p=f.programs,d=f.decorators;for(s=0,u=p.length;s<u;s++)p[s]&&(h[s]=p[s],d[s]&&(h[s+"_d"]=d[s],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new c.default(this.options.srcName),this.decorators=new c.default(this.options.srcName)},createFunctionContext:function(t){var e="",r=this.stackVars.concat(this.registers.list);r.length>0&&(e+=", "+r.join(", "));var n=0;for(var i in this.aliases){var o=this.aliases[i];this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(e+=", alias"+ ++n+"="+i,o.children[0]="alias"+n)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(e);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each((function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,e||(r=!1))})),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,n,i){var a=this;if(this.options.strict||this.options.assumeObjects)this.push(o(this.options.strict&&i,this,e,t));else for(var s=e.length;r<s;r++)this.replaceStack((function(i){var o=a.nameLookup(i,e[r],t);return n?[" && ",o]:[" != null ? ",o," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,r){var n=this.popStack(),i=this.setupHelper(t,e),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var n=1;n<t.length;n++)r.push(e,t[n]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,r){var n=[],i=this.setupParams(e,1,n);t&&(e=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[t]=r),n&&(o.types[t]=n),i&&(o.ids[t]=i),o.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var r=t.children,n=void 0,i=void 0,o=0,a=r.length;o<a;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=i.compile(n,e,this.context,!this.precompile),this.context.decorators[l]=i.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new l.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)e=["(",r=[a.value]],o=!0;else{i=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],r=this.topStack()}var u=t.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(e.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof n)return r.value;if(!e){if(!this.stackSlot)throw new l.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,r),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(t,e,r){var n={},i=[],o=[],a=[],s=!r,l=void 0;s&&(r=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(n.fn=c||"container.noop",n.inverse=u||"container.noop");for(var h=e;h--;)l=this.popStack(),r[h]=l,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),i[h]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,r,n){var i=this.setupParams(t,e,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=i.RESERVED_WORDS={},r=0,n=t.length;r<n;r++)e[t[r]]=!0}(),i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r){if(o.isArray(t)){for(var n=[],i=0,a=t.length;i<a;i++)n.push(e.wrap(t[i],r));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function i(t){this.srcFile=t,this.source=[]}e.__esModule=!0;var o=r(5),a=void 0;a||((a=function(t,e,r,n){this.src="",n&&this.add(n)}).prototype={add:function(t){o.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){o.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new a(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof a?t:(t=n(t,this,e),new a(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var r in t)if(t.hasOwnProperty(r)){var i=n(t[r],this);"undefined"!==i&&e.push([this.quotedString(r),":",i])}var o=this.generateList(e);return o.prepend("{"),o.add("}"),o},generateList:function(t){for(var e=this.empty(),r=0,i=t.length;r<i;r++)r&&e.add(","),e.add(n(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=i,t.exports=e.default}])},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));class n{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class i{constructor(t){this.url=t}async request({headers:t,credentials:e,signal:r}={}){throw new Error("request is not implemented")}}},function(t,e,r){"use strict";var n=r(11),i=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return Object(n.a)(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Object(n.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Object(n.a)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();e.a=i},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return a}));var n,i=r(3),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function a(t,e,r,n){var o=document.createElement("script"),a="olc_"+Object(i.c)(e);function s(){delete window[a],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+a;var l=setTimeout((function(){s(),r&&r()}),1e4);window[a]=function(t){clearTimeout(l),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(o)}(function(t){function e(e){var r=this,n="Unexpected response status: "+e.status;return(r=t.call(this,n)||this).name="ResponseError",r.response=e,r}o(e,t)})(Error),function(t){function e(e){var r=t.call(this,"Failed to issue request")||this;return r.name="ClientError",r.client=e,r}o(e,t)}(Error)}).call(this,r(90))},function(t,e,r){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(159),i=r(94),o=r(160);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:_(t,e,r,n,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):_(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,r,n,i){var o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return V(B(e,t.length-r),t,r,n)}function x(t,e,r,n){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return x(t,e,r,n)}function E(t,e,r,n){return V(z(e),t,r,n)}function O(t,e,r,n){return V(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return u(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=t.slice(e,r),h=0;h<s;++h)if(u[h]!==c[h]){o=u[h],a=c[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return x(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=U(t[o]);return i}function L(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,o){return o||j(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,o){return o||j(t,0,r,8),i.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||N(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||N(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);N(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);N(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=l.isBuffer(t)?t:B(new l(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(90))},function(t,e,r){"use strict";var n,i=r(3),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===i.a?i.a:"v"+i.a.split("-")[0])+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return o(e,t),e}(Error);e.a=a},function(t,e,r){"use strict";var n,i=r(42),o=r(7),a=r(3),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=r,o.state=i,o}return s(e,t),e.prototype.changed=function(){this.dispatchEvent(o.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(a.b)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(a.b)()},e}(i.a);e.a=l},function(t,e,r){"use strict";var n,i=r(64),o=r(22),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(o.b)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(o.d)(t.tileCoord)),t.release())}.bind(this))}},e}(i.a);e.a=s},function(t,e,r){"use strict";var n,i=r(39),o=r(7),a=r(45),s=r(9),l=r(82),u=r(57),c=r(4),h=r(0),f=r(8),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e,r,n,o,a,f,p,d,g,y,m,_){var v=t.call(this,a,s.a.IDLE,{interpolate:!!_})||this;v.renderEdges_=void 0!==m&&m,v.pixelRatio_=p,v.gutter_=d,v.canvas_=null,v.sourceTileGrid_=r,v.targetTileGrid_=o,v.wrappedTileCoord_=f||a,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var b=o.getTileCoordExtent(v.wrappedTileCoord_),x=v.targetTileGrid_.getExtent(),w=v.sourceTileGrid_.getExtent(),E=x?Object(h.B)(b,x):b;if(0===Object(h.u)(E))return v.state=s.a.EMPTY,v;var O=e.getExtent();O&&(w=w?Object(h.B)(w,O):O);var S=o.getResolution(v.wrappedTileCoord_[0]),I=Object(u.a)(e,n,E,S);if(!isFinite(I)||I<=0)return v.state=s.a.EMPTY,v;var C=void 0!==y?y:i.b;if(v.triangulation_=new l.a(e,n,E,w,I*C,S),0===v.triangulation_.getTriangles().length)return v.state=s.a.EMPTY,v;v.sourceZ_=r.getZForResolution(I);var T=v.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(T[1]=Object(c.b)(T[1],w[1],w[3]),T[3]=Object(c.b)(T[3],w[1],w[3])):T=Object(h.B)(T,w)),Object(h.u)(T)){for(var P=r.getTileRangeForExtentAndZ(T,v.sourceZ_),R=P.minX;R<=P.maxX;R++)for(var L=P.minY;L<=P.maxY;L++){var M=g(v.sourceZ_,R,L,p);M&&v.sourceTiles_.push(M)}0===v.sourceTiles_.length&&(v.state=s.a.EMPTY)}else v.state=s.a.EMPTY;return v}return p(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==s.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=s.a.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(u.c)(n,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=s.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==s.a.IDLE){this.state=s.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var i=e.getState();if(i==s.a.IDLE||i==s.a.LOADING){t++;var a=Object(f.a)(e,o.a.CHANGE,(function(r){var n=e.getState();n!=s.a.LOADED&&n!=s.a.ERROR&&n!=s.a.EMPTY||(Object(f.c)(a),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(a)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,r){t.getState()==s.a.IDLE&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(f.c),this.sourcesListenerKeys_=null},e}(a.a);e.a=d},function(t,e,r){"use strict";var n,i=r(73),o=r(55),a=r(71),s=r(51),l=r(9),u=r(48),c=r(10),h=r(5),f=r(0),p=r(20),d=r(1),g=r(3),y=r(6),m=r(16),_=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=Object(f.k)(),r.tmpTileRange_=new s.b(0,0,0,0),r}return _(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==l.a.LOADED||r==l.a.EMPTY||r==l.a.ERROR&&!n},e.prototype.getTile=function(t,e,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,i,o);return s.getState()==l.a.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(l.a.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.getData=function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=Object(c.a)(e.pixelToCoordinateTransform,t.slice()),i=r.getExtent();if(i&&!Object(f.g)(i,n))return null;for(var s=e.pixelRatio,u=e.viewState.projection,h=e.viewState,p=r.getRenderSource(),d=p.getTileGridForProjection(h.projection),g=p.getTilePixelRatio(e.pixelRatio),y=d.getZForResolution(h.resolution);y>=d.getMinZoom();--y){var _=d.getTileCoordForCoordAndZ(n,y),v=p.getTile(y,_[1],_[2],s,u);if(!(v instanceof o.a||v instanceof a.a))return null;if(v.getState()===l.a.LOADED){var b=d.getOrigin(y),x=Object(m.d)(d.getTileSize(y)),w=d.getResolution(y),E=Math.floor(g*((n[0]-b[0])/w-_[1]*x[0])),O=Math.floor(g*((b[1]-n[1])/w-_[2]*x[1]));return this.getImageData(v.getImage(),E,O)}}return null},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,i=n.projection,o=n.resolution,a=n.center,s=n.rotation,m=t.pixelRatio,_=this.getLayer(),v=_.getSource(),b=v.getRevision(),x=v.getTileGridForProjection(i),w=x.getZForResolution(o,v.zDirection),E=x.getResolution(w),O=t.extent,S=r.extent&&Object(d.m)(r.extent,i);S&&(O=Object(f.B)(O,Object(d.m)(r.extent,i)));var I=v.getTilePixelRatio(m),C=Math.round(t.size[0]*I),T=Math.round(t.size[1]*I);if(s){var P=Math.round(Math.sqrt(C*C+T*T));C=P,T=P}var R=E*C/2/I,L=E*T/2/I,M=[a[0]-R,a[1]-L,a[0]+R,a[1]+L],N=x.getTileRangeForExtentAndZ(O,w),A={};A[w]={};var k=this.createLoadedTileFinder(v,i,A),j=this.tmpExtent,F=this.tmpTileRange_;this.newTiles_=!1;for(var D=N.minX;D<=N.maxX;++D)for(var G=N.minY;G<=N.maxY;++G){var U=this.getTile(w,D,G,t);if(this.isDrawableTile(U)){var B=Object(g.c)(this);if(U.getState()==l.a.LOADED){A[w][U.tileCoord.toString()]=U;var z=U.inTransition(B);this.newTiles_||!z&&-1!==this.renderedTiles.indexOf(U)||(this.newTiles_=!0)}if(1===U.getAlpha(B,t.time))continue}var V=x.getTileCoordChildTileRange(U.tileCoord,F,j),q=!1;V&&(q=k(w+1,V)),q||x.forEachTileCoordParentTileRange(U.tileCoord,k,F,j)}var Y=E/o;Object(c.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/I,1/I,s,-C/2,-T/2);var W=Object(c.l)(this.pixelTransform);this.useContainer(e,W,r.opacity,this.getBackground(t));var X=this.context,H=X.canvas;Object(c.e)(this.inversePixelTransform,this.pixelTransform),Object(c.b)(this.tempTransform,C/2,T/2,Y,Y,0,-C/2,-T/2),H.width!=C||H.height!=T?(H.width=C,H.height=T):this.containerReused||X.clearRect(0,0,C,T),S&&this.clipUnrotated(X,t,S),v.getInterpolate()||Object(h.a)(X,u.a),this.preRender(X,t),this.renderedTiles.length=0;var Z,K,J,$=Object.keys(A).map(Number);$.sort(y.i),1!==r.opacity||this.containerReused&&!v.getOpaque(t.viewState.projection)?(Z=[],K=[]):$=$.reverse();for(var Q=$.length-1;Q>=0;--Q){var tt=$[Q],et=v.getTilePixelSize(tt,m,i),rt=x.getResolution(tt)/E,nt=et[0]*rt*Y,it=et[1]*rt*Y,ot=x.getTileCoordForCoordAndZ(Object(f.D)(M),tt),at=x.getTileCoordExtent(ot),st=Object(c.a)(this.tempTransform,[I*(at[0]-M[0])/E,I*(M[3]-at[3])/E]),lt=I*v.getGutterForProjection(i),ut=A[tt];for(var ct in ut){var ht=(U=ut[ct]).tileCoord,ft=ot[1]-ht[1],pt=Math.round(st[0]-(ft-1)*nt),dt=ot[2]-ht[2],gt=Math.round(st[1]-(dt-1)*it),yt=pt-(D=Math.round(st[0]-ft*nt)),mt=gt-(G=Math.round(st[1]-dt*it)),_t=w===tt,vt=!1;if(!(z=_t&&1!==U.getAlpha(Object(g.c)(this),t.time)))if(Z){J=[D,G,D+yt,G,D+yt,G+mt,D,G+mt];for(var bt=0,xt=Z.length;bt<xt;++bt)if(w!==tt&&tt<K[bt]){var wt=Z[bt];Object(f.G)([D,G,D+yt,G+mt],[wt[0],wt[3],wt[4],wt[7]])&&(vt||(X.save(),vt=!0),X.beginPath(),X.moveTo(J[0],J[1]),X.lineTo(J[2],J[3]),X.lineTo(J[4],J[5]),X.lineTo(J[6],J[7]),X.moveTo(wt[6],wt[7]),X.lineTo(wt[4],wt[5]),X.lineTo(wt[2],wt[3]),X.lineTo(wt[0],wt[1]),X.clip())}Z.push(J),K.push(tt)}else X.clearRect(D,G,yt,mt);this.drawTileImage(U,t,D,G,yt,mt,lt,_t),Z&&!z?(vt&&X.restore(),this.renderedTiles.unshift(U)):this.renderedTiles.push(U),this.updateUsedTiles(t.usedTiles,v,U)}}this.renderedRevision=b,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!Object(f.p)(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=m,this.renderedProjection=i,this.manageTilePyramid(t,v,x,m,i,O,w,_.getPreload()),this.scheduleExpireCache(t,v),this.postRender(X,t),r.extent&&X.restore(),Object(h.a)(X,u.b),W!==H.style.transform&&(H.style.transform=W);var Et=Object(p.g)(r.opacity),Ot=this.container;return Et!==Ot.style.opacity&&(Ot.style.opacity=Et),this.container},e.prototype.drawTileImage=function(t,e,r,n,i,o,a,s){var l=this.getTileImage(t);if(l){var u=Object(g.c)(this),c=s?t.getAlpha(u,e.time):1,h=c!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,n,i,o),h&&this.context.restore(),1!==c?e.animate=!0:s&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=Object(g.c)(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var n=Object(g.c)(e);n in t||(t[n]={}),t[n][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,n,i,o,a,s,u){var c=Object(g.c)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var h,f,p,d,y,m,_=t.wantedTiles[c],v=t.tileQueue,b=0;for(m=r.getMinZoom();m<=a;++m)for(f=r.getTileRangeForExtentAndZ(o,m,f),p=r.getResolution(m),d=f.minX;d<=f.maxX;++d)for(y=f.minY;y<=f.maxY;++y)a-m<=s?(++b,(h=e.getTile(m,d,y,n,i)).getState()==l.a.IDLE&&(_[h.getKey()]=!0,v.isKeyQueued(h.getKey())||v.enqueue([h,c,r.getTileCoordCenter(h.tileCoord),p])),void 0!==u&&u(h)):e.useTile(m,d,y,i);e.updateCacheSize(b,i)},e}(i.a);e.a=v},function(t,e,r){"use strict";var n,i=r(83),o=r(59),a=r(33),s=r(10),l=r(23),u=r(0),c=r(15),h=r(6),f=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=null;var d=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=Object(s.d)(),r.pixelTransform=Object(s.d)(),r.inversePixelTransform=Object(s.d)(),r.context=null,r.containerReused=!1,r.pixelContext_=null,r.frameState=null,r}return f(e,t),e.prototype.getImageData=function(t,e,r){var n,i;p||((n=document.createElement("canvas")).width=1,n.height=1,p=n.getContext("2d")),p.clearRect(0,0,1,1);try{p.drawImage(t,e,r,1,1,0,0,1,1),i=p.getImageData(0,0,1,1).data}catch(t){return null}return i},e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,r,n){var i,o,a=this.getLayer().getClassName();t&&t.className===a&&""===t.style.opacity&&1===r&&(!n||t.style.backgroundColor&&Object(h.b)(Object(l.a)(t.style.backgroundColor),Object(l.a)(n)))&&((u=t.firstElementChild)instanceof HTMLCanvasElement&&(o=u.getContext("2d")));if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement("div")).className=a;var s=i.style;s.position="absolute",s.width="100%",s.height="100%",n&&(s.backgroundColor=n);var u=(o=Object(c.a)()).canvas;i.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=i,this.context=o}},e.prototype.clipUnrotated=function(t,e,r){var n=Object(u.D)(r),i=Object(u.E)(r),o=Object(u.w)(r),a=Object(u.v)(r);Object(s.a)(e.coordinateToPixelTransform,n),Object(s.a)(e.coordinateToPixelTransform,i),Object(s.a)(e.coordinateToPixelTransform,o),Object(s.a)(e.coordinateToPixelTransform,a);var l=this.inversePixelTransform;Object(s.a)(l,n),Object(s.a)(l,i),Object(s.a)(l,o),Object(s.a)(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new o.a(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.frameState=e,this.dispatchRenderEvent_(a.a.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(a.a.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,r,n,i,o,a){var l=i/2,u=o/2,c=n/e,h=-c,f=-t[0]+a,p=-t[1];return Object(s.b)(this.tempTransform,l,u,c,h,-r,f,p)},e.prototype.getDataAtPixel=function(t,e,r){var n=Object(s.a)(this.inversePixelTransform,t.slice()),i=this.context,o=this.getLayer().getExtent();if(o){var a=Object(s.a)(e.pixelToCoordinateTransform,t.slice());if(!Object(u.g)(o,a))return null}var l,c=Math.round(n[0]),h=Math.round(n[1]),f=this.pixelContext_;if(!f){var p=document.createElement("canvas");p.width=1,p.height=1,f=p.getContext("2d"),this.pixelContext_=f}f.clearRect(0,0,1,1);try{f.drawImage(i.canvas,c,h,1,1,0,0,1,1),l=f.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.pixelContext_=null,new Uint8Array):l}return 0===l[3]?null:l},e.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},e}(i.a);e.a=d},function(t,e,r){"use strict";var n,i=r(38),o=r(58),a=r(5),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e){var r=this,n=e||{},i=Object(a.a)({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).on,r.once,r.un,r.setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return s(e,t),e.prototype.getPreload=function(){return this.get(o.a.PRELOAD)},e.prototype.setPreload=function(t){this.set(o.a.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.a.USE_INTERIM_TILES_ON_ERROR,t)},e.prototype.getData=function(e){return t.prototype.getData.call(this,e)},e}(i.a);e.a=l},function(t,e,r){"use strict";var n=r(30),i=r(26),o=r(3),a=r(11),s=r(5),l=r(4);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c,h=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.background_=e.background;var n=Object(s.a)({},e);return"object"===u(e.properties)&&(delete n.properties,Object(s.a)(n,e.properties)),n[i.a.OPACITY]=void 0!==e.opacity?e.opacity:1,Object(a.a)("number"==typeof n[i.a.OPACITY],64),n[i.a.VISIBLE]=void 0===e.visible||e.visible,n[i.a.Z_INDEX]=e.zIndex,n[i.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[i.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,n[i.a.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,n[i.a.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?n.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return h(e,t),e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=Object(l.b)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r||e.managed?r:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return Object(o.b)()},e.prototype.getLayerStatesArray=function(t){return Object(o.b)()},e.prototype.getExtent=function(){return this.get(i.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(i.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(i.a.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(i.a.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(i.a.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(i.a.OPACITY)},e.prototype.getSourceState=function(){return Object(o.b)()},e.prototype.getVisible=function(){return this.get(i.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(i.a.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(i.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(i.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(i.a.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(i.a.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(i.a.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Object(a.a)("number"==typeof t,64),this.set(i.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(i.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(i.a.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(n.a);e.a=f},function(t,e,r){"use strict";var n,i=r(73),o=r(14),a=r(24),s=r(39),l=r(48),u=r(10),c=r(5),h=r(0),f=r(1),p=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return p(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,i=n.resolution,l=this.getLayer().getSource(),u=t.viewHints,c=t.extent;if(void 0!==e.extent&&(c=Object(h.B)(c,Object(f.m)(e.extent,n.projection))),!u[a.a.ANIMATING]&&!u[a.a.INTERACTING]&&!Object(h.I)(c))if(l){var p=n.projection;if(!s.a){var d=l.getProjection();d&&(p=d)}var g=l.getImage(c,i,r,p);g&&(this.loadImage(g)?this.image_=g:g.getState()===o.a.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_},e.prototype.getData=function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=Object(u.a)(e.pixelToCoordinateTransform,t.slice()),i=r.getExtent();if(i&&!Object(h.g)(i,n))return null;var o=this.image_.getExtent(),a=this.image_.getImage(),s=Object(h.F)(o),l=Math.floor(a.width*((n[0]-o[0])/s));if(l<0||l>=a.width)return null;var c=Object(h.A)(o),f=Math.floor(a.height*((o[3]-n[1])/c));return f<0||f>=a.height?null:this.getImageData(a,l,f)},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),i=r.getResolution(),o=r.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,p=t.viewState,d=p.center,g=p.resolution,y=t.size,m=s*i/(g*o),_=Math.round(y[0]*s),v=Math.round(y[1]*s),b=p.rotation;if(b){var x=Math.round(Math.sqrt(_*_+v*v));_=x,v=x}Object(u.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,b,-_/2,-v/2),Object(u.e)(this.inversePixelTransform,this.pixelTransform);var w=Object(u.l)(this.pixelTransform);this.useContainer(e,w,a.opacity,this.getBackground(t));var E=this.context,O=E.canvas;O.width!=_||O.height!=v?(O.width=_,O.height=v):this.containerReused||E.clearRect(0,0,_,v);var S=!1,I=!0;if(a.extent){var C=Object(f.m)(a.extent,p.projection);(S=(I=Object(h.G)(C,t.extent))&&!Object(h.h)(C,t.extent))&&this.clipUnrotated(E,t,C)}var T=r.getImage(),P=Object(u.b)(this.tempTransform,_/2,v/2,m,m,0,o*(n[0]-d[0])/i,o*(d[1]-n[3])/i);this.renderedResolution=i*s/o;var R=T.width*P[0],L=T.height*P[3];if(this.getLayer().getSource().getInterpolate()||Object(c.a)(E,l.a),this.preRender(E,t),I&&R>=.5&&L>=.5){var M=P[4],N=P[5],A=a.opacity,k=void 0;1!==A&&(k=E.globalAlpha,E.globalAlpha=A),E.drawImage(T,0,0,+T.width,+T.height,Math.round(M),Math.round(N),Math.round(R),Math.round(L)),1!==A&&(E.globalAlpha=k)}return this.postRender(E,t),S&&E.restore(),Object(c.a)(E,l.b),w!==O.style.transform&&(O.style.transform=w),this.container},e}(i.a);e.a=d},function(t,e,r){t.exports=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=n-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-l*c/s+h)),Math.min(o,Math.floor(n+(s-l)*c/s+h)),a)}var f=r[n],p=i,d=o;for(e(r,i,n),a(r[o],f)>0&&e(r,i,o);p<d;){for(e(r,p,d),p++,d--;a(r[p],f)<0;)p++;for(;a(r[d],f)>0;)d--}0===a(r[i],f)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):f(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],r=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!f(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(l.push(a),u.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));g(t,e,r,u,this.compareMinX);for(var c=e;c<=r;c+=u){var h=Math.min(c+u-1,r);g(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var p=Math.min(f+l-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,l,u,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var g=a(t,0,d,this.toBBox),y=a(t,d,r,this.toBBox),m=(i=g,o=y,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),_=c(g)+c(y);m<f?(f=m,n=d,p=_<p?_:p):m===f&&_<p&&(p=_,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,r-e,r,i),u=h(o)+h(l),c=e;c<r-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];s(l,t.leaf?i(d):d),u+=h(l)}return u},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},function(t,e,r){"use strict";var n,i=r(69),o=r(14),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(e,r,n,i,a){var s=this,l=void 0!==a?o.a.IDLE:o.a.LOADED;return(s=t.call(this,e,r,n,l)||this).loader_=void 0!==a?a:null,s.canvas_=i,s.error_=null,s}return a(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=o.a.ERROR):this.state=o.a.LOADED,this.changed()},e.prototype.load=function(){this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(i.a);e.a=s},function(t,e,r){"use strict";(function(t){var n,i,o=r(54),a=r(21),s=r(7),l=r(78),u=r(60),c=r(32),h=r(46),f=r(19),p=r(34),d=r(81),g=r(43),y=r(5),m=r(15),_=r(10),v=r(0),b=r(3),x=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),w=!0;try{new ImageData(10,10)}catch(t){w=!1}function E(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n=e.buffers,i=e.meta,o=e.imageOps,a=e.width,s=e.height,l=n.length,u=n[0].byteLength;if(o){for(var c=new Array(l),h=0;h<l;++h)c[h]=r(new Uint8ClampedArray(n[h]),a,s);return t(c,i).data.buffer}var f=new Uint8ClampedArray(u),p=new Array(l),d=new Array(l);for(h=0;h<l;++h)p[h]=new Uint8ClampedArray(n[h]),d[h]=[0,0,0,0];for(var g=0;g<u;g+=4){for(var y=0;y<l;++y){var m=p[y];d[y][0]=m[g],d[y][1]=m[g+1],d[y][2]=m[g+2],d[y][3]=m[g+3]}var _=t(d,i);f[g]=_[0],f[g+1]=_[1],f[g+2]=_[2],f[g+3]=_[3]}return f.buffer}}function O(e,r){var n=Object.keys(e.lib||{}).map((function(t){return"var "+t+" = "+e.lib[t].toString()+";"})).concat(["var __minion__ = ("+E.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+t.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return i.addEventListener("message",r),i}var S=function(t){function e(e){var r,n=t.call(this)||this;n._imageOps=!!e.imageOps,r=0===e.threads?0:n._imageOps?1:e.threads||1;var i=new Array(r);if(r)for(var o=0;o<r;++o)i[o]=O(e,n._onWorkerMessage.bind(n,o));else i[0]=function(t,e){var r=E(t.operation),n=!1;return{postMessage:function(t){setTimeout((function(){n||e({data:{buffer:r(t),meta:t.meta}})}),0)},terminate:function(){n=!0}}}(e,n._onWorkerMessage.bind(n,0));return n._workers=i,n._queue=[],n._maxQueueLength=e.queue||1/0,n._running=0,n._dataLookup={},n._job=null,n}return x(e,t),e.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},e.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},e.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1!==i)for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var l=s*a,u=[],c=0,h=n.length;c<h;++c)u.push(n[c].slice(l,l+a));this._workers[s].postMessage({buffers:u,meta:t.meta,imageOps:this._imageOps,width:e,height:r},u)}else this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n)}},e.prototype._onWorkerMessage=function(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},e.prototype._resolveJob=function(){var t,e,r=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(n);for(var a=4*Math.ceil(o/4/n),s=0;s<n;++s){var l=this._dataLookup[s].buffer,u=s*a;t.set(new Uint8ClampedArray(l),u),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,function(t,e,r){if(w)return new ImageData(t,e,r);i||(i=document.createElement("canvas").getContext("2d"));var n=i.createImageData(e,r);return n.data.set(t),n}(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},e.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},e}(o.a),I="beforeoperations",C="afteroperations",T="pixel",P="image",R=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return x(e,t),e}(a.a),L=function(t){function e(e){var r=t.call(this,{projection:null})||this;r.on,r.once,r.un,r.processor_=null,r.operationType_=void 0!==e.operationType?e.operationType:T,r.threads_=void 0!==e.threads?e.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=A(t[n]);return r}(e.sources);for(var n,i=r.changed.bind(r),o=0,a=r.layers_.length;o<a;++o)r.layers_[o].addEventListener(s.a.CHANGE,i);return r.tileQueue_=new d.a((function(){return 1}),r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:Object(_.d)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:Object(_.d)(),postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Object(b.c)(r),renderTargets:{}},r.setAttributions((function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=(o instanceof h.a?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);r.push.apply(r,s)}}return 0!==r.length?r:null})),void 0!==e.operation&&r.setOperation(e.operation,e.lib),r}return x(e,t),e.prototype.setOperation=function(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new S({operation:t,imageOps:this.operationType_===P,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var n=Object(y.a)({},this.frameState_);n.viewState=Object(y.a)({},n.viewState);var i=Object(v.x)(t);n.extent=t.slice(),n.size[0]=Math.round(Object(v.F)(t)/e),n.size[1]=Math.round(Object(v.A)(t)/e),n.time=Date.now();var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.layers_.length;e<r;++e)if(this.layers_[e].getSource().getState()!==f.a.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,r,n){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&Object(v.p)(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n;var i=N(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new R(I,t,o)),this.processor_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,n){if(!e&&r){var i=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&Object(v.p)(i,this.requestedFrameState_.extent)){var a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{var s=Math.round(Object(v.F)(i)/o),u=Math.round(Object(v.A)(i)/o);a=Object(m.a)(s,u),this.renderedImageCanvas_=new l.a(i,o,1,a.canvas)}a.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new R(C,t,n)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},e.prototype.disposeInternal=function(){this.processor_&&this.processor_.dispose(),t.prototype.disposeInternal.call(this)},e}(c.a);L.prototype.dispose;var M=null;function N(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n=e.size[0],i=e.size[1];if(0===n||0===i)return null;var o,a=r.renderFrame(e,null);if(a instanceof HTMLCanvasElement)o=a;else{if(a&&(o=a.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===i)return o.getContext("2d").getImageData(0,0,n,i)}if(M){var s=M.canvas;s.width!==n||s.height!==i?M=Object(m.a)(n,i):M.clearRect(0,0,n,i)}else M=Object(m.a)(n,i);return M.drawImage(o,0,0,n,i),M.getImageData(0,0,n,i)}function A(t){var e;return t instanceof h.a?t instanceof g.b?e=new p.a({source:t}):t instanceof c.a&&(e=new u.a({source:t})):e=t,e}e.a=L}).call(this,r(67).Buffer)},function(t,e){var r={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},n=" ",i=/(italic|oblique)$/i,o={};t.exports=function(t,e,a){var s=o[t];if(!s){Array.isArray(t)||(t=[t]);for(var l=400,u="normal",c=[],h=0,f=t.length;h<f;++h){var p=t[h].split(" "),d=p[p.length-1].toLowerCase();for(var g in"normal"==d||"italic"==d||"oblique"==d?(u=d,p.pop(),d=p[p.length-1].toLowerCase()):i.test(d)&&(d=d.replace(i,""),u=p[p.length-1].replace(d,"")),r){var y=p.length>1?p[p.length-2].toLowerCase():"";if(d==g||d==g.replace("-","")||y+"-"+d==g){l=r[g],p.pop(),y&&g.startsWith(y)&&p.pop();break}}"number"==typeof d&&(l=d);var m=p.join(n).replace("Klokantech Noto Sans","Noto Sans");-1!==m.indexOf(n)&&(m='"'+m+'"'),c.push(m)}s=o[t]=[u,l,c]}return s[0]+n+s[1]+n+e+"px"+(a?"/"+a:"")+n+s[2]}},function(t,e,r){"use strict";var n=r(7),i=r(11),o=r(5),a=1/0,s=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(o.b)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){Object(i.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=a&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<n&&r[l]<r[s]?l:s;e[t]=e[u],r[t]=r[u],t=u}e[t]=i,r[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,s=0,l=i.length;for(e=0;e<l;++e)(r=n(t=i[e]))==a?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=r,i[s++]=t);i.length=s,o.length=s,this.heapify_()},t}(),l=r(9);r.d(e,"b",(function(){return f}));var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=function(t){function e(e,r){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return c(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);r&&e[0].addEventListener(n.a.CHANGE,this.boundHandleTileChange_);return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(r===l.a.LOADED||r===l.a.ERROR||r===l.a.EMPTY){e.removeEventListener(n.a.CHANGE,this.boundHandleTileChange_);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==l.a.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())},e}(s);e.a=h;function f(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return a;if(!t.wantedTiles[r][e.getKey()])return a;var o=t.viewState.center,s=n[0]-o[0],l=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(s*s+l*l)/i}},function(t,e,r){"use strict";var n=r(0),i=r(1),o=r(4),a=function(){function t(t,e,r,a,s,l){this.sourceProj_=t,this.targetProj_=e;var u={},c=Object(i.q)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return u[e]||(u[e]=c(t)),u[e]},this.maxSourceExtent_=a,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&Object(n.F)(a)==Object(n.F)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(n.F)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(n.F)(this.targetProj_.getExtent()):null;var h=Object(n.D)(r),f=Object(n.E)(r),p=Object(n.w)(r),d=Object(n.v)(r),g=this.transformInv_(h),y=this.transformInv_(f),m=this.transformInv_(p),_=this.transformInv_(d),v=10+(l?Math.max(0,Math.ceil(Object(o.f)(Object(n.u)(r)/(l*l*256*256)))):0);if(this.addQuad_(h,f,p,d,g,y,m,_,v),this.wrapsXInSource_){var b=1/0;this.triangles_.forEach((function(t,e,r){b=Math.min(b,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-b>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-b>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-b>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-b>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}u={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,i,a,s,l,u,c){var h=Object(n.c)([a,s,l,u]),f=this.sourceWorldWidth_?Object(n.F)(h)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1,g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var y=Object(n.c)([t,e,r,i]);g=Object(n.F)(y)/this.targetWorldWidth_>.25||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>.25||g)}if(!(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||Object(n.G)(h,this.maxSourceExtent_)){var m=0;if(!(g||isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])))if(c>0)g=!0;else if(1!=(m=(isFinite(a[0])&&isFinite(a[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!g){var _=[(t[0]+r[0])/2,(t[1]+r[1])/2],v=this.transformInv_(_),b=void 0;if(d)b=(Object(o.g)(a[0],p)+Object(o.g)(l[0],p))/2-Object(o.g)(v[0],p);else b=(a[0]+l[0])/2-v[0];var x=(a[1]+l[1])/2-v[1];g=b*b+x*x>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var w=[(e[0]+r[0])/2,(e[1]+r[1])/2],E=this.transformInv_(w),O=[(i[0]+t[0])/2,(i[1]+t[1])/2],S=this.transformInv_(O);this.addQuad_(t,e,w,O,a,s,E,S,c-1),this.addQuad_(O,w,r,i,S,E,l,u,c-1)}else{var I=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(I),T=[(r[0]+i[0])/2,(r[1]+i[1])/2],P=this.transformInv_(T);this.addQuad_(t,I,T,i,a,C,P,u,c-1),this.addQuad_(I,e,r,T,C,s,l,P,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(t,r,i,a,l,u),0==(14&m)&&this.addTriangle_(t,r,e,a,l,s),m&&(0==(13&m)&&this.addTriangle_(e,i,t,s,u,a),0==(7&m)&&this.addTriangle_(e,i,r,s,u,l))}},t.prototype.calculateSourceExtent=function(){var t=Object(n.k)();return this.triangles_.forEach((function(e,r,i){var o=e.source;Object(n.r)(t,o[0]),Object(n.r)(t,o[1]),Object(n.r)(t,o[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();e.a=a},function(t,e,r){"use strict";var n,i=r(7),o=r(14),a=r(31),s=r(19),l=r(3),u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=function(t){function e(e){var r=t.call(this)||this;return r.ready=!0,r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r.declutterExecutorGroup=null,r}return u(e,t),e.prototype.getFeatures=function(t){return Object(l.b)()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return Object(l.b)()},e.prototype.renderFrame=function(t,e){return Object(l.b)()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,i){var o=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){},e.prototype.getDataAtPixel=function(t,e,r){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===o.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=o.a.LOADED&&e!=o.a.ERROR&&t.addEventListener(i.a.CHANGE,this.boundHandleImageChange_),e==o.a.IDLE&&(t.load(),e=t.getState()),e==o.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==s.a.READY&&t.changed()},e.prototype.disposeInternal=function(){delete this.layer_,t.prototype.disposeInternal.call(this)},e}(a.a);e.a=c},function(t,e,r){"use strict";var n,i=r(38),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return o(e,t),e}(i.a);e.a=a},function(t,e){t.exports='{{#*inline "layerswitcherLayer"}}\n  {{#each layers}}\n    <li class="m-layer {{#if outOfRange}}disabled{{/if}}{{#if visible}} visible{{/if}}">\n      <div class="m-visible-control">\n        <span data-layer-name="{{id}}" {{#if ../group}} data-group-id="{{../group}}" {{/if}} class="m-check g-cartografia-check{{#if base}}{{#if visible}}5{{^}}4{{/if}}{{^}}{{#if visible}}3{{^}}2{{/if}}{{/if}}"></span>\n      </div>\n      <div class="m-title">\n        <span>{{title}}</span>\n      </div>\n      {{#if visible}}\n        {{#unless base}}\n          <div class="m-tools">\n            <input type="range" data-layer-name="{{id}}" {{#if ../group}} data-group-id="{{../group}}" {{/if}} class="m-layerswitcher-transparency" min="0" max="1" step="0.1" value="{{opacity}}" {{#unless visible}} disabled {{/unless}}\n              {{#if outOfRange}} disabled {{/if}} />\n            <span data-layer-name="{{id}}" {{#if ../group}} data-group-id="{{../group}}" {{/if}} class="g-cartografia-cancelar m-layerswitcher-remove"></span>\n          </div>\n        {{/unless}}\n        <div class="m-legend">\n          <img data-layer-name="{{id}}" {{#if ../group}} data-group-id="{{../group}}" {{/if}} src="{{legend}}"></img>\n        </div>\n      {{/if}}\n    </li>\n  {{/each}}\n  {{/inline}}\n  {{#*inline "layerswitcherGroup"}}\n    {{#each layerGroups}}\n      <li class="m-group{{#if collapsed}} m-collapsed{{/if}}">\n        <div class="m-visible-control">\n          <span data-group-id="{{id}}" class="m-check g-cartografia-check{{#eq visible 0}}2{{/eq}}{{#eq visible 1}}5{{/eq}}{{#eq visible 2}}3{{/eq}}"></span>\n        </div>\n        <div class="m-title" data-group-id="{{id}}">\n          <span data-group-id="{{id}}">{{title}}</span>\n        </div>\n        <div class="m-collapsed-icon" data-group-id="{{id}}">\n          <span class="g-cartografia-flecha-{{#if collapsed}}izquierda{{^}}abajo{{/if}}" data-group-id="{{id}}"></span>\n        </div>\n        {{#unless collapsed}}\n          {{#gt layerGroups.length 0}}\n            <ul class="m-groups">\n              {{> layerswitcherGroup}}\n            </ul>\n          {{/gt}}\n          {{#gt layers.length 0}}\n            <ul class="m-layers">\n              {{> layerswitcherLayer group=id}}\n            </ul>\n          {{/gt}}\n        {{/unless}}\n      </li>\n    {{/each}}\n    {{/inline}}\n    <div class="m-control m-layerswitcher-container">\n      <div class="m-layersiwtcher-panel" id="m-layerswitcher-panel">\n        <ul>\n          {{#gt baseLayers.length 0}}\n            <li class="m-group">\n              <div class="m-title">Capas base</div>\n              <ul class="m-base-layers">\n                {{> layerswitcherLayer layers=baseLayers}}\n              </ul>\n            </li>\n          {{/gt}}\n          {{#gt layerGroups.length 0}}\n            <li class="m-group">\n              <div class="m-title">Grupos de capas</div>\n              <ul class="m-groups">\n                {{> layerswitcherGroup }}\n              </ul>\n            </li>\n          {{/gt}}\n          {{#gt overlayLayers.length 0}}\n            <li class="m-group">\n              <div class="m-title">Otras capas</div>\n              <ul class="m-layers">\n                {{> layerswitcherLayer layers=overlayLayers}}\n              </ul>\n            </li>\n          {{/gt}}\n        </ul>\n      </div>\n    </div>'},function(t,e){
/*! @petamoriken/float16 v3.6.3 | MIT License - https://git.io/float16 */
!function(t){"use strict";const e="This constructor is not a subclass of Float16Array",r="The constructor property value is not an object",n="Attempting to access detached ArrayBuffer",i="Cannot convert undefined or null to object",o="Cannot convert a BigInt value to a number",a="Cannot mix BigInt and other types, use explicit conversions",s="@@iterator property is not callable",l="Reduce of empty array with no initial value",u="Offset is out of bounds";function c(t){return(e,...r)=>f(t,e,r)}function h(t,e){return c(y(t,e).get)}const{apply:f,construct:p,defineProperty:d,get:g,getOwnPropertyDescriptor:y,getPrototypeOf:m,has:_,ownKeys:v,set:b,setPrototypeOf:x}=Reflect,w=Proxy,E=Number,{isFinite:O,isNaN:S}=E,{iterator:I,species:C,toStringTag:T,for:P}=Symbol,R=Object,{create:L,defineProperty:M,freeze:N,is:A}=R,k=R.prototype,j=k.__lookupGetter__?c(k.__lookupGetter__):(t,e)=>{if(null==t)throw Pt(i);let r=R(t);do{const t=y(r,e);if(void 0!==t)return F(t,"get")?t.get:void 0}while(null!==(r=m(r)))},F=R.hasOwn||c(k.hasOwnProperty),D=Array,G=D.isArray,U=D.prototype,B=c(U.join),z=c(U.push),V=c(U.toLocaleString),q=U[I],Y=c(q),W=Math.trunc,X=ArrayBuffer,H=X.isView,Z=X.prototype,K=c(Z.slice),J=h(Z,"byteLength"),$="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null,Q=$&&h($.prototype,"byteLength"),tt=m(Uint8Array),et=tt.from,rt=tt.prototype,nt=rt[I],it=c(rt.keys),ot=c(rt.values),at=c(rt.entries),st=c(rt.set),lt=c(rt.reverse),ut=c(rt.fill),ct=c(rt.copyWithin),ht=c(rt.sort),ft=c(rt.slice),pt=c(rt.subarray),dt=h(rt,"buffer"),gt=h(rt,"byteOffset"),yt=h(rt,"length"),mt=h(rt,T),_t=Uint16Array,vt=(...t)=>f(et,_t,t),bt=Uint32Array,xt=Float32Array,wt=m([][I]()),Et=c(wt.next),Ot=c(function*(){}().next),St=m(wt),It=DataView.prototype,Ct=c(It.getUint16),Tt=c(It.setUint16),Pt=TypeError,Rt=RangeError,Lt=WeakSet,Mt=Lt.prototype,Nt=c(Mt.add),At=c(Mt.has),kt=WeakMap,jt=kt.prototype,Ft=c(jt.get),Dt=c(jt.has),Gt=c(jt.set),Ut=new kt,Bt=L(null,{next:{value:function(){const t=Ft(Ut,this);return Et(t)}},[I]:{value:function(){return this}}});function zt(t){if(t[I]===q)return t;const e=L(Bt);return Gt(Ut,e,Y(t)),e}const Vt=new kt,qt=L(St,{next:{value:function(){const t=Ft(Vt,this);return Ot(t)},writable:!0,configurable:!0}});for(const t of v(wt))"next"!==t&&M(qt,t,y(wt,t));function Yt(t){const e=L(qt);return Gt(Vt,e,t),e}function Wt(t){return null!==t&&"object"==typeof t||"function"==typeof t}function Xt(t){return null!==t&&"object"==typeof t}function Ht(t){return void 0!==mt(t)}function Zt(t){const e=mt(t);return"BigInt64Array"===e||"BigUint64Array"===e}function Kt(t){if(null===$)return!1;try{return Q(t),!0}catch(t){return!1}}function Jt(t){if(!G(t))return!1;if(t[I]===q)return!0;return"Array Iterator"===t[I]()[T]}function $t(t){if("string"!=typeof t)return!1;const e=E(t);return t===e+""&&(!!O(e)&&e===W(e))}const Qt=P("__Float16Array__");const te=new X(4),ee=new xt(te),re=new bt(te),ne=new bt(512),ie=new bt(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(ne[t]=0,ne[256|t]=32768,ie[t]=24,ie[256|t]=24):e<-14?(ne[t]=1024>>-e-14,ne[256|t]=1024>>-e-14|32768,ie[t]=-e-1,ie[256|t]=-e-1):e<=15?(ne[t]=e+15<<10,ne[256|t]=e+15<<10|32768,ie[t]=13,ie[256|t]=13):e<128?(ne[t]=31744,ne[256|t]=64512,ie[t]=24,ie[256|t]=24):(ne[t]=31744,ne[256|t]=64512,ie[t]=13,ie[256|t]=13)}function oe(t){ee[0]=t;const e=re[0],r=e>>23&511;return ne[r]+((8388607&e)>>ie[r])}const ae=new bt(2048),se=new bt(64),le=new bt(64);for(let t=1;t<1024;++t){let e=t<<13,r=0;for(;0==(8388608&e);)e<<=1,r-=8388608;e&=-8388609,r+=947912704,ae[t]=e|r}for(let t=1024;t<2048;++t)ae[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)se[t]=t<<23;se[31]=1199570944,se[32]=2147483648;for(let t=33;t<63;++t)se[t]=2147483648+(t-32<<23);se[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(le[t]=1024);function ue(t){const e=t>>10;return re[0]=ae[le[e]+(1023&t)]+se[e],ee[0]}const ce=E.MAX_SAFE_INTEGER;function he(t){if("bigint"==typeof t)throw Pt(o);const e=E(t);return S(e)||0===e?0:W(e)}function fe(t){const e=he(t);return e<0?0:e<ce?e:ce}function pe(t,e){if(!Wt(t))throw Pt("This is not an object");const n=t.constructor;if(void 0===n)return e;if(!Wt(n))throw Pt(r);const i=n[C];return null==i?e:i}function de(t){if(Kt(t))return!1;try{return K(t,0,0),!1}catch(t){}return!0}function ge(t,e){const r=S(t),n=S(e);if(r&&n)return 0;if(r)return 1;if(n)return-1;if(t<e)return-1;if(t>e)return 1;if(0===t&&0===e){const r=A(t,0),n=A(e,0);if(!r&&n)return-1;if(r&&!n)return 1}return 0}const ye=new kt;function me(t){return Dt(ye,t)||!H(t)&&function(t){if(!Xt(t))return!1;const e=m(t);if(!Xt(e))return!1;const n=e.constructor;if(void 0===n)return!1;if(!Wt(n))throw Pt(r);return _(n,Qt)}(t)}function _e(t){if(!me(t))throw Pt("This is not a Float16Array object")}function ve(t,e){const r=me(t),n=Ht(t);if(!r&&!n)throw Pt("Species constructor didn't return TypedArray object");if("number"==typeof e){let n;if(r){const e=be(t);n=yt(e)}else n=yt(t);if(n<e)throw Pt("Derived constructor created TypedArray object which was too small length")}if(Zt(t))throw Pt(a)}function be(t){const e=Ft(ye,t);if(void 0!==e){if(de(dt(e)))throw Pt(n);return e}const r=t.buffer;if(de(r))throw Pt(n);const i=p(Oe,[r,t.byteOffset,t.length],t.constructor);return Ft(ye,i)}function xe(t){const e=yt(t),r=[];for(let n=0;n<e;++n)r[n]=ue(t[n]);return r}const we=new Lt;for(const t of v(rt)){if(t===T)continue;const e=y(rt,t);F(e,"get")&&"function"==typeof e.get&&Nt(we,e.get)}const Ee=N({get:(t,e,r)=>$t(e)&&F(t,e)?ue(g(t,e)):At(we,j(t,e))?g(t,e):g(t,e,r),set:(t,e,r,n)=>$t(e)&&F(t,e)?b(t,e,oe(r)):b(t,e,r,n),getOwnPropertyDescriptor(t,e){if($t(e)&&F(t,e)){const r=y(t,e);return r.value=ue(r.value),r}return y(t,e)},defineProperty:(t,e,r)=>$t(e)&&F(t,e)&&F(r,"value")?(r.value=oe(r.value),d(t,e,r)):d(t,e,r)});class Oe{constructor(t,e,r){let i;if(me(t))i=p(_t,[be(t)],new.target);else if(Wt(t)&&!function(t){try{return J(t),!0}catch(t){return!1}}(t)){let e,r;if(Ht(t)){e=t,r=yt(t);const o=dt(t),s=Kt(o)?X:pe(o,X);if(de(o))throw Pt(n);if(Zt(t))throw Pt(a);const l=new s(2*r);i=p(_t,[l],new.target)}else{const n=t[I];if(null!=n&&"function"!=typeof n)throw Pt(s);null!=n?Jt(t)?(e=t,r=t.length):(e=[...t],r=e.length):(e=t,r=fe(e.length)),i=p(_t,[r],new.target)}for(let t=0;t<r;++t)i[t]=oe(e[t])}else i=p(_t,arguments,new.target);const o=new w(i,Ee);return Gt(ye,o,i),o}static from(t,...r){const n=this;if(!_(n,Qt))throw Pt(e);if(n===Oe){if(me(t)&&0===r.length){const e=be(t),r=new _t(dt(e),gt(e),yt(e));return new Oe(dt(ft(r)))}if(0===r.length)return new Oe(dt(vt(t,oe)));const e=r[0],n=r[1];return new Oe(dt(vt(t,(function(t,...r){return oe(f(e,this,[t,...zt(r)]))}),n)))}let o,a;const l=t[I];if(null!=l&&"function"!=typeof l)throw Pt(s);if(null!=l)Jt(t)?(o=t,a=t.length):!Ht(u=t)||u[I]!==nt&&"Array Iterator"!==u[I]()[T]?(o=[...t],a=o.length):(o=t,a=yt(t));else{if(null==t)throw Pt(i);o=R(t),a=fe(o.length)}var u;const c=new n(a);if(0===r.length)for(let t=0;t<a;++t)c[t]=o[t];else{const t=r[0],e=r[1];for(let r=0;r<a;++r)c[r]=f(t,e,[o[r],r])}return c}static of(...t){const r=this;if(!_(r,Qt))throw Pt(e);const n=t.length;if(r===Oe){const e=new Oe(n),r=be(e);for(let e=0;e<n;++e)r[e]=oe(t[e]);return e}const i=new r(n);for(let e=0;e<n;++e)i[e]=t[e];return i}keys(){_e(this);const t=be(this);return it(t)}values(){_e(this);const t=be(this);return Yt(function*(){for(const e of ot(t))yield ue(e)}())}entries(){_e(this);const t=be(this);return Yt(function*(){for(const[e,r]of at(t))yield[e,ue(r)]}())}at(t){_e(this);const e=be(this),r=yt(e),n=he(t),i=n>=0?n:r+n;if(!(i<0||i>=r))return ue(e[i])}map(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0],o=pe(r,Oe);if(o===Oe){const e=new Oe(n),o=be(e);for(let e=0;e<n;++e){const n=ue(r[e]);o[e]=oe(f(t,i,[n,e,this]))}return e}const a=new o(n);ve(a,n);for(let e=0;e<n;++e){const n=ue(r[e]);a[e]=f(t,i,[n,e,this])}return a}filter(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0],o=[];for(let e=0;e<n;++e){const n=ue(r[e]);f(t,i,[n,e,this])&&z(o,n)}const a=new(pe(r,Oe))(o);return ve(a),a}reduce(t,...e){_e(this);const r=be(this),n=yt(r);if(0===n&&0===e.length)throw Pt(l);let i,o;0===e.length?(i=ue(r[0]),o=1):(i=e[0],o=0);for(let e=o;e<n;++e)i=t(i,ue(r[e]),e,this);return i}reduceRight(t,...e){_e(this);const r=be(this),n=yt(r);if(0===n&&0===e.length)throw Pt(l);let i,o;0===e.length?(i=ue(r[n-1]),o=n-2):(i=e[0],o=n-1);for(let e=o;e>=0;--e)i=t(i,ue(r[e]),e,this);return i}forEach(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=0;e<n;++e)f(t,i,[ue(r[e]),e,this])}find(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=0;e<n;++e){const n=ue(r[e]);if(f(t,i,[n,e,this]))return n}}findIndex(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=0;e<n;++e){const n=ue(r[e]);if(f(t,i,[n,e,this]))return e}return-1}findLast(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=n-1;e>=0;--e){const n=ue(r[e]);if(f(t,i,[n,e,this]))return n}}findLastIndex(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=n-1;e>=0;--e){const n=ue(r[e]);if(f(t,i,[n,e,this]))return e}return-1}every(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=0;e<n;++e)if(!f(t,i,[ue(r[e]),e,this]))return!1;return!0}some(t,...e){_e(this);const r=be(this),n=yt(r),i=e[0];for(let e=0;e<n;++e)if(f(t,i,[ue(r[e]),e,this]))return!0;return!1}set(t,...e){_e(this);const r=be(this),o=he(e[0]);if(o<0)throw Rt(u);if(null==t)throw Pt(i);if(Zt(t))throw Pt(a);if(me(t))return st(be(this),be(t),o);if(Ht(t)){if(de(dt(t)))throw Pt(n)}const s=yt(r),l=R(t),c=fe(l.length);if(o===1/0||c+o>s)throw Rt(u);for(let t=0;t<c;++t)r[t+o]=oe(l[t])}reverse(){_e(this);const t=be(this);return lt(t),this}fill(t,...e){_e(this);const r=be(this);return ut(r,oe(t),...zt(e)),this}copyWithin(t,e,...r){_e(this);const n=be(this);return ct(n,t,e,...zt(r)),this}sort(...t){_e(this);const e=be(this),r=void 0!==t[0]?t[0]:ge;return ht(e,(t,e)=>r(ue(t),ue(e))),this}slice(...t){_e(this);const e=be(this),r=pe(e,Oe);if(r===Oe){const r=new _t(dt(e),gt(e),yt(e));return new Oe(dt(ft(r,...zt(t))))}const i=yt(e),o=he(t[0]),a=void 0===t[1]?i:he(t[1]);let s,l;s=o===-1/0?0:o<0?i+o>0?i+o:0:i<o?i:o,l=a===-1/0?0:a<0?i+a>0?i+a:0:i<a?i:a;const u=l-s>0?l-s:0,c=new r(u);if(ve(c,u),0===u)return c;if(de(dt(e)))throw Pt(n);let h=0;for(;s<l;)c[h]=ue(e[s]),++s,++h;return c}subarray(...t){_e(this);const e=be(this),r=pe(e,Oe),n=new _t(dt(e),gt(e),yt(e)),i=pt(n,...zt(t)),o=new r(dt(i),gt(i),yt(i));return ve(o),o}indexOf(t,...e){_e(this);const r=be(this),n=yt(r);let i=he(e[0]);if(i===1/0)return-1;i<0&&(i+=n,i<0&&(i=0));for(let e=i;e<n;++e)if(F(r,e)&&ue(r[e])===t)return e;return-1}lastIndexOf(t,...e){_e(this);const r=be(this),n=yt(r);let i=e.length>=1?he(e[0]):n-1;if(i===-1/0)return-1;i>=0?i=i<n-1?i:n-1:i+=n;for(let e=i;e>=0;--e)if(F(r,e)&&ue(r[e])===t)return e;return-1}includes(t,...e){_e(this);const r=be(this),n=yt(r);let i=he(e[0]);if(i===1/0)return!1;i<0&&(i+=n,i<0&&(i=0));const o=S(t);for(let e=i;e<n;++e){const n=ue(r[e]);if(o&&S(n))return!0;if(n===t)return!0}return!1}join(...t){_e(this);const e=xe(be(this));return B(e,...zt(t))}toLocaleString(...t){_e(this);const e=xe(be(this));return V(e,...zt(t))}get[T](){if(me(this))return"Float16Array"}}M(Oe,"BYTES_PER_ELEMENT",{value:2}),M(Oe,Qt,{}),x(Oe,tt);const Se=Oe.prototype;M(Se,"BYTES_PER_ELEMENT",{value:2}),M(Se,I,{value:Se.values,writable:!0,configurable:!0}),x(Se,rt),t.Float16Array=Oe,t.getFloat16=function(t,e,...r){return ue(Ct(t,e,...zt(r)))},t.hfround=function(t){if("bigint"==typeof t)throw Pt(o);return t=E(t),O(t)&&0!==t?ue(oe(t)):t},t.isFloat16Array=me,t.isTypedArray=function(t){return Ht(t)||me(t)},t.setFloat16=function(t,e,r,...n){return Tt(t,e,oe(r),...zt(n))},Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}({})},function(t,e,r){"use strict";r.d(e,"a",(function(){return ar}));function n(t){let e=t.length;for(;--e>=0;)t[e]=0}const i=256,o=286,a=30,s=15,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);n(f);const p=new Array(60);n(p);const d=new Array(512);n(d);const g=new Array(256);n(g);const y=new Array(29);n(y);const m=new Array(a);function _(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let v,b,x;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}n(m);const E=t=>t<256?d[t]:d[256+(t>>>7)],O=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},S=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,O(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},I=(t,e,r)=>{S(t,r[2*e],r[2*e+1])},C=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},T=(t,e,r)=>{const n=new Array(16);let i,o,a=0;for(i=1;i<=s;i++)n[i]=a=a+r[i-1]<<1;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=C(n[e]++,e))}},P=t=>{let e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},R=t=>{t.bi_valid>8?O(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},L=(t,e,r,n)=>{const i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]},M=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&L(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!L(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},N=(t,e,r)=>{let n,o,a,s,c=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],o=t.pending_buf[t.l_buf+c],c++,0===n?I(t,o,e):(a=g[o],I(t,a+i+1,e),s=l[a],0!==s&&(o-=y[a],S(t,o,s)),n--,a=E(n),I(t,a,r),s=u[a],0!==s&&(n-=m[a],S(t,n,s)))}while(c<t.last_lit);I(t,256,e)},A=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems;let a,l,u,c=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<o;a++)0!==r[2*a]?(t.heap[++t.heap_len]=c=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[2*u]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=n[2*u+1]);for(e.max_code=c,a=t.heap_len>>1;a>=1;a--)M(t,r,a);u=o;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,r,1),l=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=l,r[2*u]=r[2*a]+r[2*l],t.depth[u]=(t.depth[a]>=t.depth[l]?t.depth[a]:t.depth[l])+1,r[2*a+1]=r[2*l+1]=u,t.heap[1]=u++,M(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,l=e.stat_desc.extra_base,u=e.stat_desc.max_length;let c,h,f,p,d,g,y=0;for(p=0;p<=s;p++)t.bl_count[p]=0;for(r[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)h=t.heap[c],p=r[2*r[2*h+1]+1]+1,p>u&&(p=u,y++),r[2*h+1]=p,h>n||(t.bl_count[p]++,d=0,h>=l&&(d=a[h-l]),g=r[2*h],t.opt_len+=g*(p+d),o&&(t.static_len+=g*(i[2*h+1]+d)));if(0!==y){do{for(p=u-1;0===t.bl_count[p];)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[u]--,y-=2}while(y>0);for(p=u;0!==p;p--)for(h=t.bl_count[p];0!==h;)f=t.heap[--c],f>n||(r[2*f+1]!==p&&(t.opt_len+=(p-r[2*f+1])*r[2*f],r[2*f+1]=p),h--)}})(t,e),T(r,c,t.bl_count)},k=(t,e,r)=>{let n,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<l&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))},j=(t,e,r)=>{let n,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<l&&i===a)){if(s<u)do{I(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(I(t,i,t.bl_tree),s--),I(t,16,t.bl_tree),S(t,s-3,2)):s<=10?(I(t,17,t.bl_tree),S(t,s-3,3)):(I(t,18,t.bl_tree),S(t,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}};let F=!1;const D=(t,e,r,n)=>{S(t,0+(n?1:0),3),((t,e,r,n)=>{R(t),n&&(O(t,r),O(t,~r)),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r,!0)};var G={_tr_init:t=>{F||((()=>{let t,e,r,n,i;const h=new Array(16);for(r=0,n=0;n<28;n++)for(y[n]=r,t=0;t<1<<l[n];t++)g[r++]=n;for(g[r-1]=n,i=0,n=0;n<16;n++)for(m[n]=i,t=0;t<1<<u[n];t++)d[i++]=n;for(i>>=7;n<a;n++)for(m[n]=i<<7,t=0;t<1<<u[n]-7;t++)d[256+i++]=n;for(e=0;e<=s;e++)h[e]=0;for(t=0;t<=143;)f[2*t+1]=8,t++,h[8]++;for(;t<=255;)f[2*t+1]=9,t++,h[9]++;for(;t<=279;)f[2*t+1]=7,t++,h[7]++;for(;t<=287;)f[2*t+1]=8,t++,h[8]++;for(T(f,287,h),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=C(t,5);v=new _(f,l,257,o,s),b=new _(p,u,0,a,s),x=new _(new Array(0),c,0,19,7)})(),F=!0),t.l_desc=new w(t.dyn_ltree,v),t.d_desc=new w(t.dyn_dtree,b),t.bl_desc=new w(t.bl_tree,x),t.bi_buf=0,t.bi_valid=0,P(t)},_tr_stored_block:D,_tr_flush_block:(t,e,r,n)=>{let o,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),A(t,t.l_desc),A(t,t.d_desc),s=(t=>{let e;for(k(t,t.dyn_ltree,t.l_desc.max_code),k(t,t.dyn_dtree,t.d_desc.max_code),A(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==e?D(t,e,r,n):4===t.strategy||a===o?(S(t,2+(n?1:0),3),N(t,f,p)):(S(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(S(t,e-257,5),S(t,r-1,5),S(t,n-4,4),i=0;i<n;i++)S(t,t.bl_tree[2*h[i]+1],3);j(t,t.dyn_ltree,e-1),j(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),N(t,t.dyn_ltree,t.dyn_dtree)),P(t),n&&R(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(g[r]+i+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{S(t,2,3),I(t,256,f),(t=>{16===t.bi_valid?(O(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var U=(t,e,r,n)=>{let i=65535&t|0,o=t>>>16&65535|0,a=0;for(;0!==r;){a=r>2e3?2e3:r,r-=a;do{i=i+e[n++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0};const B=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var z=(t,e,r,n)=>{const i=B,o=n+r;t^=-1;for(let r=n;r<o;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Y,_tr_stored_block:W,_tr_flush_block:X,_tr_tally:H,_tr_align:Z}=G,{Z_NO_FLUSH:K,Z_PARTIAL_FLUSH:J,Z_FULL_FLUSH:$,Z_FINISH:Q,Z_BLOCK:tt,Z_OK:et,Z_STREAM_END:rt,Z_STREAM_ERROR:nt,Z_DATA_ERROR:it,Z_BUF_ERROR:ot,Z_DEFAULT_COMPRESSION:at,Z_FILTERED:st,Z_HUFFMAN_ONLY:lt,Z_RLE:ut,Z_FIXED:ct,Z_DEFAULT_STRATEGY:ht,Z_UNKNOWN:ft,Z_DEFLATED:pt}=q,dt=258,gt=262,yt=103,mt=113,_t=666,vt=(t,e)=>(t.msg=V[e],e),bt=t=>(t<<1)-(t>4?9:0),xt=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let wt=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Et=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Ot=(t,e)=>{X(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Et(t.strm)},St=(t,e)=>{t.pending_buf[t.pending++]=e},It=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Ct=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=U(t.adler,e,i,r):2===t.state.wrap&&(t.adler=z(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},Tt=(t,e)=>{let r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-gt?t.strstart-(t.w_size-gt):0,u=t.window,c=t.w_mask,h=t.prev,f=t.strstart+dt;let p=u[o+a-1],d=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(r=e,u[r+a]===d&&u[r+a-1]===p&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=dt-(f-o),o=f-dt,n>a){if(t.match_start=e,a=n,n>=s)break;p=u[o+a-1],d=u[o+a]}}}while((e=h[e&c])>l&&0!=--i);return a<=t.lookahead?a:t.lookahead},Pt=t=>{const e=t.w_size;let r,n,i,o,a;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-gt)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do{i=t.head[--r],t.head[r]=i>=e?i-e:0}while(--n);n=e,r=n;do{i=t.prev[--r],t.prev[r]=i>=e?i-e:0}while(--n);o+=e}if(0===t.strm.avail_in)break;if(n=Ct(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=wt(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=wt(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<gt&&0!==t.strm.avail_in)},Rt=(t,e)=>{let r,n;for(;;){if(t.lookahead<gt){if(Pt(t),t.lookahead<gt&&e===K)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=wt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-gt&&(t.match_length=Tt(t,r)),t.match_length>=3)if(n=H(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=wt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=wt(t,t.ins_h,t.window[t.strstart+1]);else n=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Ot(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Q?(Ot(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ot(t,!1),0===t.strm.avail_out)?1:2},Lt=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<gt){if(Pt(t),t.lookahead<gt&&e===K)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=wt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-gt&&(t.match_length=Tt(t,r),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=H(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=wt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Ot(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=H(t,0,t.window[t.strstart-1]),n&&Ot(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=H(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Q?(Ot(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ot(t,!1),0===t.strm.avail_out)?1:2};function Mt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Nt=[new Mt(0,0,0,0,(t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Pt(t),0===t.lookahead&&e===K)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Ot(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-gt&&(Ot(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Q?(Ot(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Ot(t,!1),t.strm.avail_out),1)}),new Mt(4,4,8,4,Rt),new Mt(4,5,16,8,Rt),new Mt(4,6,32,32,Rt),new Mt(4,4,16,16,Lt),new Mt(8,16,32,32,Lt),new Mt(8,16,128,128,Lt),new Mt(8,32,128,256,Lt),new Mt(32,128,258,1024,Lt),new Mt(32,258,258,4096,Lt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const kt=t=>{if(!t||!t.state)return vt(t,nt);t.total_in=t.total_out=0,t.data_type=ft;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:mt,t.adler=2===e.wrap?0:1,e.last_flush=K,Y(e),et},jt=t=>{const e=kt(t);var r;return e===et&&((r=t.state).window_size=2*r.w_size,xt(r.head),r.max_lazy_match=Nt[r.level].max_lazy,r.good_match=Nt[r.level].good_length,r.nice_match=Nt[r.level].nice_length,r.max_chain_length=Nt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Ft=(t,e,r,n,i,o)=>{if(!t)return nt;let a=1;if(e===at&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==pt||n<8||n>15||e<0||e>9||o<0||o>ct)return vt(t,nt);8===n&&(n=9);const s=new At;return t.state=s,s.strm=t,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=r,jt(t)};var Dt={deflateInit:(t,e)=>Ft(t,e,pt,15,8,ht),deflateInit2:Ft,deflateReset:jt,deflateResetKeep:kt,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?nt:(t.state.gzhead=e,et):nt,deflate:(t,e)=>{let r,n;if(!t||!t.state||e>tt||e<0)return t?vt(t,nt):nt;const i=t.state;if(!t.output||!t.input&&0!==t.avail_in||i.status===_t&&e!==Q)return vt(t,0===t.avail_out?ot:nt);i.strm=t;const o=i.last_flush;if(i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,St(i,31),St(i,139),St(i,8),i.gzhead?(St(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),St(i,255&i.gzhead.time),St(i,i.gzhead.time>>8&255),St(i,i.gzhead.time>>16&255),St(i,i.gzhead.time>>24&255),St(i,9===i.level?2:i.strategy>=lt||i.level<2?4:0),St(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(St(i,255&i.gzhead.extra.length),St(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=z(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(St(i,0),St(i,0),St(i,0),St(i,0),St(i,0),St(i,9===i.level?2:i.strategy>=lt||i.level<2?4:0),St(i,3),i.status=mt);else{let e=pt+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=lt||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=r<<6,0!==i.strstart&&(e|=32),e+=31-e%31,i.status=mt,It(i,e),0!==i.strstart&&(It(i,t.adler>>>16),It(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=z(t.adler,i.pending_buf,i.pending-r,r)),Et(t),r=i.pending,i.pending!==i.pending_buf_size));)St(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=z(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=z(t.adler,i.pending_buf,i.pending-r,r)),Et(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,St(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=z(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=z(t.adler,i.pending_buf,i.pending-r,r)),Et(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,St(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=z(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=yt)}else i.status=yt;if(i.status===yt&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Et(t),i.pending+2<=i.pending_buf_size&&(St(i,255&t.adler),St(i,t.adler>>8&255),t.adler=0,i.status=mt)):i.status=mt),0!==i.pending){if(Et(t),0===t.avail_out)return i.last_flush=-1,et}else if(0===t.avail_in&&bt(e)<=bt(o)&&e!==Q)return vt(t,ot);if(i.status===_t&&0!==t.avail_in)return vt(t,ot);if(0!==t.avail_in||0!==i.lookahead||e!==K&&i.status!==_t){let r=i.strategy===lt?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(Pt(t),0===t.lookahead)){if(e===K)return 1;break}if(t.match_length=0,r=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Ot(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Q?(Ot(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ot(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===ut?((t,e)=>{let r,n,i,o;const a=t.window;for(;;){if(t.lookahead<=dt){if(Pt(t),t.lookahead<=dt&&e===K)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=t.strstart+dt;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=dt-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=H(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=H(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Ot(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Q?(Ot(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ot(t,!1),0===t.strm.avail_out)?1:2})(i,e):Nt[i.level].func(i,e);if(3!==r&&4!==r||(i.status=_t),1===r||3===r)return 0===t.avail_out&&(i.last_flush=-1),et;if(2===r&&(e===J?Z(i):e!==tt&&(W(i,0,0,!1),e===$&&(xt(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Et(t),0===t.avail_out))return i.last_flush=-1,et}return e!==Q?et:i.wrap<=0?rt:(2===i.wrap?(St(i,255&t.adler),St(i,t.adler>>8&255),St(i,t.adler>>16&255),St(i,t.adler>>24&255),St(i,255&t.total_in),St(i,t.total_in>>8&255),St(i,t.total_in>>16&255),St(i,t.total_in>>24&255)):(It(i,t.adler>>>16),It(i,65535&t.adler)),Et(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?et:rt)},deflateEnd:t=>{if(!t||!t.state)return nt;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==yt&&e!==mt&&e!==_t?vt(t,nt):(t.state=null,e===mt?vt(t,it):et)},deflateSetDictionary:(t,e)=>{let r=e.length;if(!t||!t.state)return nt;const n=t.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return nt;if(1===i&&(t.adler=U(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(xt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const o=t.avail_in,a=t.next_in,s=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Pt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=wt(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Pt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=s,t.avail_in=o,n.wrap=i,et},deflateInfo:"pako deflate (from Nodeca project)"};const Gt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Ut=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Gt(r,e)&&(t[e]=r[e])}}return t},Bt=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r};let zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){zt=!1}const Vt=new Uint8Array(256);for(let t=0;t<256;t++)Vt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Vt[254]=Vt[254]=1;var qt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,i,o,a=t.length,s=0;for(i=0;i<a;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<a&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(s),o=0,i=0;o<s;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<a&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},Yt=(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,i;const o=new Array(2*r);for(i=0,n=0;n<r;){let e=t[n++];if(e<128){o[i++]=e;continue}let a=Vt[e];if(a>4)o[i++]=65533,n+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&n<r;)e=e<<6|63&t[n++],a--;a>1?o[i++]=65533:e<65536?o[i++]=e:(e-=65536,o[i++]=55296|e>>10&1023,o[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&zt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(o,i)},Wt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Vt[t[r]]>e?r:e};var Xt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Zt,Z_SYNC_FLUSH:Kt,Z_FULL_FLUSH:Jt,Z_FINISH:$t,Z_OK:Qt,Z_STREAM_END:te,Z_DEFAULT_COMPRESSION:ee,Z_DEFAULT_STRATEGY:re,Z_DEFLATED:ne}=q;function ie(t){this.options=Ut({level:ee,method:ne,chunkSize:16384,windowBits:15,memLevel:8,strategy:re},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xt,this.strm.avail_out=0;let r=Dt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Qt)throw new Error(V[r]);if(e.header&&Dt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?qt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Dt.deflateSetDictionary(this.strm,t),r!==Qt)throw new Error(V[r]);this._dict_set=!0}}function oe(t,e){const r=new ie(e);if(r.push(t,!0),r.err)throw r.msg||V[r.err];return r.result}ie.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?$t:Zt,"string"==typeof t?r.input=qt(t):"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===Kt||o===Jt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Dt.deflate(r,o),i===te)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Dt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Qt;if(0!==r.avail_out){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ie.prototype.onData=function(t){this.chunks.push(t)},ie.prototype.onEnd=function(t){t===Qt&&(this.result=Bt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ae={Deflate:ie,deflate:oe,deflateRaw:function(t,e){return(e=e||{}).raw=!0,oe(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,oe(t,e)},constants:q};var se=function(t,e){let r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v,b,x,w,E,O,S;const I=t.state;r=t.next_in,O=t.input,n=r+(t.avail_in-5),i=t.next_out,S=t.output,o=i-(e-t.avail_out),a=i+(t.avail_out-257),s=I.dmax,l=I.wsize,u=I.whave,c=I.wnext,h=I.window,f=I.hold,p=I.bits,d=I.lencode,g=I.distcode,y=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;t:do{p<15&&(f+=O[r++]<<p,p+=8,f+=O[r++]<<p,p+=8),_=d[f&y];e:for(;;){if(v=_>>>24,f>>>=v,p-=v,v=_>>>16&255,0===v)S[i++]=65535&_;else{if(!(16&v)){if(0==(64&v)){_=d[(65535&_)+(f&(1<<v)-1)];continue e}if(32&v){I.mode=12;break t}t.msg="invalid literal/length code",I.mode=30;break t}b=65535&_,v&=15,v&&(p<v&&(f+=O[r++]<<p,p+=8),b+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=O[r++]<<p,p+=8,f+=O[r++]<<p,p+=8),_=g[f&m];r:for(;;){if(v=_>>>24,f>>>=v,p-=v,v=_>>>16&255,!(16&v)){if(0==(64&v)){_=g[(65535&_)+(f&(1<<v)-1)];continue r}t.msg="invalid distance code",I.mode=30;break t}if(x=65535&_,v&=15,p<v&&(f+=O[r++]<<p,p+=8,p<v&&(f+=O[r++]<<p,p+=8)),x+=f&(1<<v)-1,x>s){t.msg="invalid distance too far back",I.mode=30;break t}if(f>>>=v,p-=v,v=i-o,x>v){if(v=x-v,v>u&&I.sane){t.msg="invalid distance too far back",I.mode=30;break t}if(w=0,E=h,0===c){if(w+=l-v,v<b){b-=v;do{S[i++]=h[w++]}while(--v);w=i-x,E=S}}else if(c<v){if(w+=l+c-v,v-=c,v<b){b-=v;do{S[i++]=h[w++]}while(--v);if(w=0,c<b){v=c,b-=v;do{S[i++]=h[w++]}while(--v);w=i-x,E=S}}}else if(w+=c-v,v<b){b-=v;do{S[i++]=h[w++]}while(--v);w=i-x,E=S}for(;b>2;)S[i++]=E[w++],S[i++]=E[w++],S[i++]=E[w++],b-=3;b&&(S[i++]=E[w++],b>1&&(S[i++]=E[w++]))}else{w=i-x;do{S[i++]=S[w++],S[i++]=S[w++],S[i++]=S[w++],b-=3}while(b>2);b&&(S[i++]=S[w++],b>1&&(S[i++]=S[w++]))}break}}break}}while(r<n&&i<a);b=p>>3,r-=b,p-=b<<3,f&=(1<<p)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<a?a-i+257:257-(i-a),I.hold=f,I.bits=p};const le=15,ue=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),he=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var pe=(t,e,r,n,i,o,a,s)=>{const l=s.bits;let u,c,h,f,p,d,g=0,y=0,m=0,_=0,v=0,b=0,x=0,w=0,E=0,O=0,S=null,I=0;const C=new Uint16Array(16),T=new Uint16Array(16);let P,R,L,M=null,N=0;for(g=0;g<=le;g++)C[g]=0;for(y=0;y<n;y++)C[e[r+y]]++;for(v=l,_=le;_>=1&&0===C[_];_--);if(v>_&&(v=_),0===_)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(m=1;m<_&&0===C[m];m++);for(v<m&&(v=m),w=1,g=1;g<=le;g++)if(w<<=1,w-=C[g],w<0)return-1;if(w>0&&(0===t||1!==_))return-1;for(T[1]=0,g=1;g<le;g++)T[g+1]=T[g]+C[g];for(y=0;y<n;y++)0!==e[r+y]&&(a[T[e[r+y]]++]=y);if(0===t?(S=M=a,d=19):1===t?(S=ue,I-=257,M=ce,N-=257,d=256):(S=he,M=fe,d=-1),O=0,y=0,g=m,p=o,b=v,x=0,h=-1,E=1<<v,f=E-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){P=g-x,a[y]<d?(R=0,L=a[y]):a[y]>d?(R=M[N+a[y]],L=S[I+a[y]]):(R=96,L=0),u=1<<g-x,c=1<<b,m=c;do{c-=u,i[p+(O>>x)+c]=P<<24|R<<16|L|0}while(0!==c);for(u=1<<g-1;O&u;)u>>=1;if(0!==u?(O&=u-1,O+=u):O=0,y++,0==--C[g]){if(g===_)break;g=e[r+a[y]]}if(g>v&&(O&f)!==h){for(0===x&&(x=v),p+=m,b=g-x,w=1<<b;b+x<_&&(w-=C[b+x],!(w<=0));)b++,w<<=1;if(E+=1<<b,1===t&&E>852||2===t&&E>592)return 1;h=O&f,i[h]=v<<24|b<<16|p-o|0}}return 0!==O&&(i[p+O]=g-x<<24|64<<16|0),s.bits=v,0};const{Z_FINISH:de,Z_BLOCK:ge,Z_TREES:ye,Z_OK:me,Z_STREAM_END:_e,Z_NEED_DICT:ve,Z_STREAM_ERROR:be,Z_DATA_ERROR:xe,Z_MEM_ERROR:we,Z_BUF_ERROR:Ee,Z_DEFLATED:Oe}=q,Se=12,Ie=30,Ce=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pe=t=>{if(!t||!t.state)return be;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,me},Re=t=>{if(!t||!t.state)return be;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Pe(t)},Le=(t,e)=>{let r;if(!t||!t.state)return be;const n=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?be:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Re(t))},Me=(t,e)=>{if(!t)return be;const r=new Te;t.state=r,r.window=null;const n=Le(t,e);return n!==me&&(t.state=null),n};let Ne,Ae,ke=!0;const je=t=>{if(ke){Ne=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(pe(1,t.lens,0,288,Ne,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;pe(2,t.lens,0,32,Ae,0,t.work,{bits:5}),ke=!1}t.lencode=Ne,t.lenbits=9,t.distcode=Ae,t.distbits=5},Fe=(t,e,r,n)=>{let i;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var De={inflateReset:Re,inflateReset2:Le,inflateResetKeep:Pe,inflateInit:t=>Me(t,15),inflateInit2:Me,inflate:(t,e)=>{let r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v,b,x,w,E,O=0;const S=new Uint8Array(4);let I,C;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return be;r=t.state,r.mode===Se&&(r.mode=13),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,u=r.hold,c=r.bits,h=s,f=l,E=me;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;c<16;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(2&r.wrap&&35615===u){r.check=0,S[0]=255&u,S[1]=u>>>8&255,r.check=z(r.check,S,2,0),u=0,c=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Ie;break}if((15&u)!==Oe){t.msg="unknown compression method",r.mode=Ie;break}if(u>>>=4,c-=4,w=8+(15&u),0===r.wbits)r.wbits=w;else if(w>r.wbits){t.msg="invalid window size",r.mode=Ie;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&u?10:Se,u=0,c=0;break;case 2:for(;c<16;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(r.flags=u,(255&r.flags)!==Oe){t.msg="unknown compression method",r.mode=Ie;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Ie;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=z(r.check,S,2,0)),u=0,c=0,r.mode=3;case 3:for(;c<32;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}r.head&&(r.head.time=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=z(r.check,S,4,0)),u=0,c=0,r.mode=4;case 4:for(;c<16;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=z(r.check,S,2,0)),u=0,c=0,r.mode=5;case 5:if(1024&r.flags){for(;c<16;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=z(r.check,S,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p=r.length,p>s&&(p=s),p&&(r.head&&(w=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),w)),512&r.flags&&(r.check=z(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break t;p=0;do{w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.name+=String.fromCharCode(w))}while(w&&p<s);if(512&r.flags&&(r.check=z(r.check,n,p,o)),s-=p,o+=p,w)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break t;p=0;do{w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.comment+=String.fromCharCode(w))}while(w&&p<s);if(512&r.flags&&(r.check=z(r.check,n,p,o)),s-=p,o+=p,w)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;c<16;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Ie;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Se;break;case 10:for(;c<32;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}t.adler=r.check=Ce(u),u=0,c=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=c,ve;t.adler=r.check=1,r.mode=Se;case Se:if(e===ge||e===ye)break t;case 13:if(r.last){u>>>=7&c,c-=7&c,r.mode=27;break}for(;c<3;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}switch(r.last=1&u,u>>>=1,c-=1,3&u){case 0:r.mode=14;break;case 1:if(je(r),r.mode=20,e===ye){u>>>=2,c-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=Ie}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Ie;break}if(r.length=65535&u,u=0,c=0,r.mode=15,e===ye)break t;case 15:r.mode=16;case 16:if(p=r.length,p){if(p>s&&(p=s),p>l&&(p=l),0===p)break t;i.set(n.subarray(o,o+p),a),s-=p,o+=p,l-=p,a+=p,r.length-=p;break}r.mode=Se;break;case 17:for(;c<14;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(r.nlen=257+(31&u),u>>>=5,c-=5,r.ndist=1+(31&u),u>>>=5,c-=5,r.ncode=4+(15&u),u>>>=4,c-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Ie;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}r.lens[T[r.have++]]=7&u,u>>>=3,c-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},E=pe(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,E){t.msg="invalid code lengths set",r.mode=Ie;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=r.lencode[u&(1<<r.lenbits)-1],y=O>>>24,m=O>>>16&255,_=65535&O,!(y<=c);){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(_<16)u>>>=y,c-=y,r.lens[r.have++]=_;else{if(16===_){for(C=y+2;c<C;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(u>>>=y,c-=y,0===r.have){t.msg="invalid bit length repeat",r.mode=Ie;break}w=r.lens[r.have-1],p=3+(3&u),u>>>=2,c-=2}else if(17===_){for(C=y+3;c<C;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}u>>>=y,c-=y,w=0,p=3+(7&u),u>>>=3,c-=3}else{for(C=y+7;c<C;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}u>>>=y,c-=y,w=0,p=11+(127&u),u>>>=7,c-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Ie;break}for(;p--;)r.lens[r.have++]=w}}if(r.mode===Ie)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Ie;break}if(r.lenbits=9,I={bits:r.lenbits},E=pe(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,E){t.msg="invalid literal/lengths set",r.mode=Ie;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},E=pe(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,E){t.msg="invalid distances set",r.mode=Ie;break}if(r.mode=20,e===ye)break t;case 20:r.mode=21;case 21:if(s>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=c,se(t,f),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,u=r.hold,c=r.bits,r.mode===Se&&(r.back=-1);break}for(r.back=0;O=r.lencode[u&(1<<r.lenbits)-1],y=O>>>24,m=O>>>16&255,_=65535&O,!(y<=c);){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(m&&0==(240&m)){for(v=y,b=m,x=_;O=r.lencode[x+((u&(1<<v+b)-1)>>v)],y=O>>>24,m=O>>>16&255,_=65535&O,!(v+y<=c);){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}u>>>=v,c-=v,r.back+=v}if(u>>>=y,c-=y,r.back+=y,r.length=_,0===m){r.mode=26;break}if(32&m){r.back=-1,r.mode=Se;break}if(64&m){t.msg="invalid literal/length code",r.mode=Ie;break}r.extra=15&m,r.mode=22;case 22:if(r.extra){for(C=r.extra;c<C;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=r.distcode[u&(1<<r.distbits)-1],y=O>>>24,m=O>>>16&255,_=65535&O,!(y<=c);){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(0==(240&m)){for(v=y,b=m,x=_;O=r.distcode[x+((u&(1<<v+b)-1)>>v)],y=O>>>24,m=O>>>16&255,_=65535&O,!(v+y<=c);){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}u>>>=v,c-=v,r.back+=v}if(u>>>=y,c-=y,r.back+=y,64&m){t.msg="invalid distance code",r.mode=Ie;break}r.offset=_,r.extra=15&m,r.mode=24;case 24:if(r.extra){for(C=r.extra;c<C;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Ie;break}r.mode=25;case 25:if(0===l)break t;if(p=f-l,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Ie;break}p>r.wnext?(p-=r.wnext,d=r.wsize-p):d=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,d=a-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do{i[a++]=g[d++]}while(--p);0===r.length&&(r.mode=21);break;case 26:if(0===l)break t;i[a++]=r.length,l--,r.mode=21;break;case 27:if(r.wrap){for(;c<32;){if(0===s)break t;s--,u|=n[o++]<<c,c+=8}if(f-=l,t.total_out+=f,r.total+=f,f&&(t.adler=r.check=r.flags?z(r.check,i,f,a-f):U(r.check,i,f,a-f)),f=l,(r.flags?u:Ce(u))!==r.check){t.msg="incorrect data check",r.mode=Ie;break}u=0,c=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break t;s--,u+=n[o++]<<c,c+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Ie;break}u=0,c=0}r.mode=29;case 29:E=_e;break t;case Ie:E=xe;break t;case 31:return we;case 32:default:return be}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=c,(r.wsize||f!==t.avail_out&&r.mode<Ie&&(r.mode<27||e!==de))&&Fe(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,r.total+=f,r.wrap&&f&&(t.adler=r.check=r.flags?z(r.check,i,f,t.next_out-f):U(r.check,i,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Se?128:0)+(20===r.mode||15===r.mode?256:0),(0===h&&0===f||e===de)&&E===me&&(E=Ee),E},inflateEnd:t=>{if(!t||!t.state)return be;let e=t.state;return e.window&&(e.window=null),t.state=null,me},inflateGetHeader:(t,e)=>{if(!t||!t.state)return be;const r=t.state;return 0==(2&r.wrap)?be:(r.head=e,e.done=!1,me)},inflateSetDictionary:(t,e)=>{const r=e.length;let n,i,o;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?be:11===n.mode&&(i=1,i=U(i,e,r,0),i!==n.check)?xe:(o=Fe(t,e,r,r),o?(n.mode=31,we):(n.havedict=1,me))):be},inflateInfo:"pako inflate (from Nodeca project)"};var Ge=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ue=Object.prototype.toString,{Z_NO_FLUSH:Be,Z_FINISH:ze,Z_OK:Ve,Z_STREAM_END:qe,Z_NEED_DICT:Ye,Z_STREAM_ERROR:We,Z_DATA_ERROR:Xe,Z_MEM_ERROR:He}=q;function Ze(t){this.options=Ut({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xt,this.strm.avail_out=0;let r=De.inflateInit2(this.strm,e.windowBits);if(r!==Ve)throw new Error(V[r]);if(this.header=new Ge,De.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=qt(e.dictionary):"[object ArrayBuffer]"===Ue.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=De.inflateSetDictionary(this.strm,e.dictionary),r!==Ve)))throw new Error(V[r])}function Ke(t,e){const r=new Ze(e);if(r.push(t),r.err)throw r.msg||V[r.err];return r.result}Ze.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=e===~~e?e:!0===e?ze:Be,"[object ArrayBuffer]"===Ue.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=De.inflate(r,a),o===Ye&&i&&(o=De.inflateSetDictionary(r,i),o===Ve?o=De.inflate(r,a):o===Xe&&(o=Ye));r.avail_in>0&&o===qe&&r.state.wrap>0&&0!==t[r.next_in];)De.inflateReset(r),o=De.inflate(r,a);switch(o){case We:case Xe:case Ye:case He:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||o===qe))if("string"===this.options.to){let t=Wt(r.output,r.next_out),e=r.next_out-t,i=Yt(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==Ve||0!==s){if(o===qe)return o=De.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Ze.prototype.onData=function(t){this.chunks.push(t)},Ze.prototype.onEnd=function(t){t===Ve&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Bt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Je={Inflate:Ze,inflate:Ke,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Ke(t,e)},ungzip:Ke,constants:q};const{Deflate:$e,deflate:Qe,deflateRaw:tr,gzip:er}=ae,{Inflate:rr,inflate:nr,inflateRaw:ir,ungzip:or}=Je;var ar=nr},function(t,e){t.exports=function(t,e,r){const n=r&&r.debug||!1;n&&console.log("getting "+e+" in "+t);const i="object"==typeof t?t.outer:t,o=e+'\\="([^"]*)"';n&&console.log("pattern:",o);const a=new RegExp(o).exec(i);if(n&&console.log("match:",a),a)return a[1]}},function(t,e){},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports='<div class="m-popup{{#gt tabs.length 1}} m-has-tabs{{/gt}} m-collapsed">\n    {{#gt tabs.length 1}}\n        <div class="m-tabs">\n            {{#each tabs}}\n                <div class="m-tab{{#eq @index 0}} m-activated{{/eq}}" data-index="{{@index}}">\n                    <i class="{{icon}}"></i>\n                </div>\n            {{/each}}\n        </div>\n    {{/gt}}\n    <div class="m-content">\n        <div class="m-header">\n            {{#eq tabs.length 1}}\n                <div class="m-title">{{{tabs.0.title}}}</div>\n                <div class="m-subtitle">{{{tabs.0.subtitle}}}</div>\n            {{/eq}}\n            <a class="m-popup-closer" href="#" title="cerrar popup"></a>\n        </div>\n        {{#if options.takeMeThere}}\n            {{#if options.textMode}}\n                <div class="m-footer">\n                    <a target="_blank" href="{{url}}">{{options.msg}}</a>\n                </div>\n            {{else}}\n                <div class="m-footer">\n                    <a target="_blank" href="{{url}}">\n                        <button class="g-cartografia-localizacion3"></button>\n                    </a>\n                </div>\n            {{/if}}\n        {{/if}}\n        <div class="m-body">{{{tabs.0.content}}}</div>\n    </div>\n</div>'},function(t){t.exports=JSON.parse('{"a":"2.5.0"}')},function(t,e,r){},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[r+p]=255&a,p+=d,a/=256,u-=8);t[r+p-d]|=128*g}},function(t){t.exports=JSON.parse('{"name":"mapea","version":"6.2.0","description":"Herramienta para desarrollo de mapas interactivos de forma sencilla","keywords":["map","mapping","tool","sigcorporativo-ja"],"homepage":"http://mapea4-sigc.juntadeandalucia.es/","repository":{"type":"git","url":"https://github.com/sigcorporativo-ja/Mapea4"},"license":"EUPL","bugs":{"url":"https://github.com/sigcorporativo-ja/Mapea4/issues"},"devDependencies":{"@babel/core":"^7.6.4","@babel/plugin-proposal-export-default-from":"^7.0.0-beta.51","@babel/preset-env":"^7.4.4","babel-loader":"^8.0.0-beta.4","chromedriver":"^2.46.0","copy-webpack-plugin":"^6.1.0","cross-env":"^5.2.0","css-loader":"^2.1.1","eslint":"^4.19.1","eslint-config-airbnb":"^16.1.0","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.9.0","eslint-plugin-jsx-a11y":"^6.0.3","eslint-plugin-react":"^7.7.0","expect.js":"^0.3.1","expose-loader":"^0.7.5","file-loader":"^1.1.11","fs-extra":"2.0.0","get-image-colors":"^2.0.0","html-loader":"^0.5.5","jsdoc-plugin-typescript":"^2.0.5","karma":"^5.2.2","karma-chrome-launcher":"^2.2.0","karma-firefox-launcher":"^1.1.0","karma-mocha":"^2.0.1","karma-webpack":"^3.0.5","mini-css-extract-plugin":"^0.4.1","mocha":"^8.1.3","nightwatch":"^1.4.2","optimize-css-assets-webpack-plugin":"^5.0.1","style-loader":"^0.21.0","terser-webpack-plugin":"^4.2.1","uglify-js":"^2.6.1","uglifycss":"0.0.29","url-loader":"^1.0.1","walk":"^2.3.14","webpack":"^4.41.2","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.0","yargs":"^16.0.3"},"dependencies":{"chroma-js":"^1.3.7","draggabilly":"^2.2.0","handlebars":"4.5.2","jsdoc":"^3.6.4","jsts":"^2.0.2","ol":"6.14.1","proj4":"^2.4.4"},"scripts":{"build":"cross-env NODE_OPTIONS=--max_old_space_size=2048 ./node/npm run build:core && ./node/npm run build:plugins && ./node/npm run build:plugins-extern","build:sourcemap":"npm run prebuild && npm run build:core -- --source-map && npm run build:plugins","build:core":"webpack --config=webpack-config/webpack.production-core.config.js","build:plugins":"webpack --config=webpack-config/webpack.production-plugins.config.js","build:plugins-extern":"./node/node tasks/build-extern-plugins.js","debug:build":"webpack-dev-server --config=webpack-config/webpack.test-production.config.js","debug:prebuild":"node --inspect-brk tasks/generate-index.js","generate-doc":"jsdoc config/jsdoc/api/index.md -c config/jsdoc/api/conf.json","generate-test":"node tasks/test-generator","karma":"karma start ./karma.conf.js","nightwatch":"nightwatch --config=./nightwatch.conf.js","prebuild":"node tasks/clean-build.js --path=dist && node tasks/generate-index.js && node tasks/generate-plugins-entrypoints.js","postbuild":"npm run generate-doc && node tasks/copy-legacy.js","publish_npm":"node tasks/prepare-package/prepare.js","start":"webpack-dev-server --config=webpack-config/webpack.development.config.js","start:build":"npm run build && npm run debug:build","test":"npm run karma && npm run nightwatch"}}')},function(t,e){t.exports='<div class="m-control"></div>'},function(t){t.exports=JSON.parse('{"location":{"title":"Get current location"},"layerswitcher":{"title":"Layer selector"},"scale":{"title":"Scale","scale":"Scale"},"getfeatureinfo":{"info":"Information","title":"Consult layer","no_info":"No associated info","info_of":"Information about","unsupported_format":"Unsupported format"},"wmcselector":{"title":"Context selector"},"dialog":{"info":"INFORMATION","error":"ERROR","success":"SUCCESS","id_feature":"An ID has not been indicated to obtain the feature","invalid_type_layer":"A valid type was not specified for the layer","vector_filter":"The indicated filter is not correct","unauthorized_user":"An error occurred while loading the layer: Unauthorized user.","only_one_filter":"FeatureID and CQL are mutually exclusive, indicate only one type of filtering.","getfeatureinfo_type":"The requested format for the information is not available. Try it using gml, plain or html."},"feature":{"incorrect_attributes":"The attributes were not specified correctly."},"exception":{"addto_method":"The used implementation does not have the addTo method","no_get_rotation_method":"The used implementation does not have the getRotation method","no_set_rotation_method":"The used implementation does not have the setRotation method","getelement_method":"The used implementation does not have the getElement method","getfeatureinfo_method":"The used implementation can not create GetFeatureInfo controls","mouse_method":"The used implementation can not create Mouse controls","navtoolbar_method":"The used implementation can not create navtoolbar controls","overviewmap_method":"The used implementation can not create OverviewMap controls","panzoom_method":"The used implementation can not create Panzoom controls","panzoombar_method":"The used implementation can not create Panzoombar controls","scale_method":"The used implementation can not create Scale controls","scaleline_method":"The used implementation can not create ScaleLine controls","wmcselector_method":"The used implementation can not create WMCSelector controls","geojson_method":"The used implementation can not create objects M.impl.format.GeoJSON","wkt_method":"The used implementation can not creat objects M.impl.format.WKT","getfeaturesbylayer_method":"The used implementation does not have the getFeaturesByLayer method","geojsonlayer_method":"The used implementation can not create GeoJSON layers","no_param":"No parameters specified","no_name":"You have not specified any name","kmllayer_method":"The used implementation can not create KML layers","isvisible_method":"The used implementation does not have the isVisible method","isqueryable_methd":"The used implementation does not have the isQueryable method","visibility_param":"You have not specified any visibility parameters","setvisible_method":"The used implementation does not have the setVisible method","inrange_method":"The used implementation does not have the inRange method","mapbox_method":"The used implementation can not create Mapbox layers","osm_method":"The used implementation can not create OSM layers","vectorlayer_method":"The used implementation can not create Vector layers","wfslayer_method":"The used implementation can not create WFS layers","wmclayer_method":"The used implementation can not create WMC layers","select_method":"The used implementation does not have the select method","unselect_method":"The used implementation does not have the unselect method","constructor_impl":"The used implementation does not have a constructor.","getlayers_method":"The used implementation does not have the getLayers method.","getbaselayers_method":"The used implementation does not have the getBaseLayers method.","addlayers_method":"The used implementation does not have the addLayers method.","removelayers_method":"The used implementation does not have the removeLayers method.","getwmc_method":"The implementation used does not have the getWMC method.","addwmc_method":"The used implementation does not have the addWMC method.","removewmc_method":"The used implementation does not have the removeWMC method.","getkml_method":"The used implementation does not have the getKML method.","addkml_method":"The implementation used does not have the addKML method.","removekml_method":"The implementation used does not have the removeKML method.","getwms_method":"The used implementation does not have the getWMS method.","addwms_method":"The used implementation does not have the addWMS method.","removewms_method":"The used implementation does not have the removeWMS method.","getwfs_method":"The implementation used does not have the getWFS method.","getgeojson_method":"The used implementation does not have the getGeoJSON method.","addwfs_method":"The used implementation does not have the addWFS method.","removewfs_method":"The used implementation does not have the removeWFS method.","getwmts_method":"The implementation used does not have the getWMTS method.","addwmts_method":"The used implementation does not have the addWMTS method.","removewmts_method":"The used implementation does not have the removeWMTS method.","getmbtiles_method":"The used implementation does not have the getMBtiles method.","getcontrols_method":"The used implementation does not have the getControls method.","addcontrols_method":"The used implementation does not have the addControls method.","remove_control":"You have not specified any control to delete.","removecontrol_method":"The used implementation does not have the removeControls method.","setmaxextent_method":"The used implementation does not have the setMaxExtent method.","getbbox_method":"The used implementation does not have the getBbox method.","no_bbox":"You have not specified any bbox.","setbbox_method":"The used implementation does not have the setBbox method.","incorrect_bbox_format":"The format of the bbox parameter is not correct.","getzoom_method":"The used implementation does not have the getZoom method.","no_zoom":"You have not specified any zoom.","setzoom_method":"The implementation used does not have the setZoom method.","getcenter_method":"The used implementation does not have the getCenter method.","setcenter_method":"The used implementation does not have the setCenter method.","getresolutions_method":"The used implementation does not have the getResolutions method.","no_resolutions":"You have not specified any resolution.","setresolutions_method":"The used implementation does not have the setResolutions method.","getscale_method":"The used implementation does not have the getScale method.","getprojection_method":"The implementation used does not have the getProjection method.","no_projection":"You have not specified any projection.","setprojection_method":"The used implementation does not have the setProjection method.","no_plugins":"You have not specified any plugins.","no_add_plugin_to_map":"The plugin can not be added to the map.","no_plugin_to_remove":"You have not specified any plugins to delete.","destroy_method":"The used implementation does not have the destroy method.","addlabel_method":"The used implementation does not have the addLabel method.","no_point":"You have not specified any points.","remove_control_from_panel":"You must remove the controls from the panel previously.","getcontainer_method":"The used implementation does not have the getContainer method.","getmapimpl_method":"The used implementation does not have the getMapImpl method.","removepopup_method":"The used implementation does not have the removePopup method.","no_popup":"You have not specified any popup.","invalid_popup":"The specified popup is not valid.","no_maxextent":"You have not specified any maxExtent","must_be_document":"doc.nodeType must be DOCUMENT type","no_service_response":"There was no reply from the service","no_kml_response":"There was no response from the KML","no_getfeature_response":"There was no response in the GetFeature operation","no_map":"You have not specified any map","layerswitcher_method":"The used implementation can not create LayerSwitcher controls","location_method":"The used implementation can not create Location controls","wms_method":"The used implementation can not create WMS layers","wmts_method":"The used implementation can not create WMTS layers","no_impl":"No implementation specified","no_container":"You have not specified any container parameters","no_id_container":"There is no container with the specified id","no_center":"You have not specified any center parameters","no_attr_name":"The name of the attribute was not specified","no_empty":"The attribute name can not be null. Specify string or function","invalid_center_param":"The format of the center parameter is not correct","invalid_maxextent_param":"The format of the maxExtent parameter is not correct","invalid_resolutions_param":"The format of the resolutions parameter is not correct","invalid_zoom_param":"The format of the zoom parameter is not correct","min_gt_max":"A minimum radius greater than the maximum can not be established.","max_lt_min":"A maximum radius of less than the minimum can not be established.","no_geojson":"No GeoJSON has been specified","unsupported_lang":"A language without support has been established","generate_image":"An error occurred while generating the image"}}')},function(t){t.exports=JSON.parse('{"location":{"title":"Obtener ubicación actual"},"layerswitcher":{"title":"Selector de capas"},"scale":{"title":"Escala","scale":"Escala"},"getfeatureinfo":{"info":"Información","title":"Consultar capa","no_info":"No existe información asociada","info_of":"Información de","unsupported_format":"Formato no soportado"},"wmcselector":{"title":"Selector de contextos"},"dialog":{"info":"INFORMACIÓN","error":"ERROR","success":"ÉXITO","id_feature":"No se ha indicado un ID para obtener el feature","invalid_type_layer":"No se ha especificado un tipo válido para la capa","vector_filter":"El filtro indicado no es correcto","unauthorized_user":"Ha ocurrido un error al cargar la capa: Usuario no autorizado.","only_one_filter":"FeatureID y CQL son mutuamente excluyentes. Indicar sólo un tipo de filtrado.","getfeatureinfo_type":"El formato solicitado para la información no está disponible. Inténtelo utilizando gml, plain o html."},"feature":{"incorrect_attributes":"No se han especificado correctamente los atributos."},"exception":{"addto_method":"La implementación usada no posee el método addTo","no_get_rotation_method":"La implementación usada no posee el método getRotation","no_set_rotation_method":"La implementación usada no posee el método setRotation","getelement_method":"La implementación usada no posee el método getElement","getfeatureinfo_method":"La implementación usada no puede crear controles GetFeatureInfo","mouse_method":"La implementación usada no puede crear controles Mouse","navtoolbar_method":"La implementación usada no puede crear controles Navtoolbar","overviewmap_method":"La implementación usada no puede crear controles OverviewMap","panzoom_method":"La implementación usada no puede crear controles Panzoom","panzoombar_method":"La implementación usada no puede crear controles Panzoombar","scale_method":"La implementación usada no puede crear controles Scale","scaleline_method":"La implementación usada no puede crear controles ScaleLine","wmcselector_method":"La implementación usada no puede crear controles WMCSelector","geojson_method":"La implementación usada no puede crear objetos M.impl.format.GeoJSON","wkt_method":"La implementación usada no puede creat objetos M.impl.format.WKT","getfeaturesbylayer_method":"La implementación usada no posee el método getFeaturesByLayer","geojsonlayer_method":"La implementación usada no puede crear capas GeoJSON","no_param":"No se ha especificado ningun parámetro","no_name":"No ha especificado ningún nombre","kmllayer_method":"La implementación usada no puede crear capas KML","isvisible_method":"La implementación usada no posee el método isVisible","isqueryable_methd":"La implementación usada no posee el método isQueryable","visibility_param":"No ha especificado ningún parámetro de visibilidad","setvisible_method":"La implementación usada no posee el método setVisible","inrange_method":"La implementación usada no posee el método inRange","mapbox_method":"La implementación usada no puede crear capas Mapbox","osm_method":"La implementación usada no puede crear capas OSM","vectorlayer_method":"La implementación usada no puede crear capas Vector","wfslayer_method":"La implementación usada no puede crear capas WFS","wmclayer_method":"La implementación usada no puede crear capas WMC","select_method":"La implementación usada no posee el método select","unselect_method":"La implementación usada no posee el método unselect","constructor_impl":"La implementación usada no posee un constructor.","getlayers_method":"La implementación usada no posee el método getLayers.","getbaselayers_method":"La implementación usada no posee el método getBaseLayers.","addlayers_method":"La implementación usada no posee el método addLayers.","removelayers_method":"La implementación usada no posee el método removeLayers.","getwmc_method":"La implementación usada no posee el método getWMC.","addwmc_method":"La implementación usada no posee el método addWMC.","removewmc_method":"La implementación usada no posee el método removeWMC.","getkml_method":"La implementación usada no posee el método getKML.","addkml_method":"La implementación usada no posee el método addKML.","removekml_method":"La implementación usada no posee el método removeKML.","getwms_method":"La implementación usada no posee el método getWMS.","addwms_method":"La implementación usada no posee el método addWMS.","removewms_method":"La implementación usada no posee el método removeWMS.","getwfs_method":"La implementación usada no posee el método getWFS.","getgeojson_method":"La implementación usada no posee el método getGeoJSON.","addwfs_method":"La implementación usada no posee el método addWFS.","removewfs_method":"La implementación usada no posee el método removeWFS.","getwmts_method":"La implementación usada no posee el método getWMTS.","addwmts_method":"La implementación usada no posee el método addWMTS.","removewmts_method":"La implementación usada no posee el método removeWMTS.","getmbtiles_method":"La implementación usada no posee el método getMBtiles.","getcontrols_method":"La implementación usada no posee el método getControls.","addcontrols_method":"La implementación usada no posee el método addControls.","remove_control":"No ha especificado ningún control a eliminar.","removecontrol_method":"La implementación usada no posee el método removeControls.","setmaxextent_method":"La implementación usada no posee el método setMaxExtent.","getbbox_method":"La implementación usada no posee el método getBbox.","no_bbox":"No ha especificado ningún bbox.","setbbox_method":"La implementación usada no posee el método setBbox.","incorrect_bbox_format":"El formato del parámetro bbox no es el correcto.","getzoom_method":"La implementación usada no posee el método getZoom.","no_zoom":"No ha especificado ningún zoom.","setzoom_method":"La implementación usada no posee el método setZoom.","getcenter_method":"La implementación usada no posee el método getCenter.","setcenter_method":"La implementación usada no posee el método setCenter.","getresolutions_method":"La implementación usada no posee el método getResolutions.","no_resolutions":"No ha especificado ninguna resolución.","setresolutions_method":"La implementación usada no posee el método setResolutions.","getscale_method":"La implementación usada no posee el método getScale.","getprojection_method":"La implementación usada no posee el método getProjection.","no_projection":"No ha especificado ninguna proyección.","setprojection_method":"La implementación usada no posee el método setProjection.","no_plugins":"No ha especificado ningún plugin.","no_add_plugin_to_map":"El plugin no puede añadirse al mapa.","no_plugin_to_remove":"No ha especificado ningún plugin a eliminar.","destroy_method":"La implementación usada no posee el método destroy.","addlabel_method":"La implementación usada no posee el método addLabel.","no_point":"No ha especificado ningún punto.","remove_control_from_panel":"Debe eliminar los controles del panel previamente.","getcontainer_method":"La implementación usada no posee el método getContainer.","getmapimpl_method":"La implementación usada no posee el método getMapImpl.","removepopup_method":"La implementación usada no posee el método removePopup.","no_popup":"No ha especificado ningún popup.","invalid_popup":"El popup especificado no es válido.","no_maxextent":"No ha especificado ningún maxExtent","must_be_document":"doc.nodeType debe ser de tipo DOCUMENT","no_service_response":"No hubo respuesta del servicio","no_kml_response":"No hubo respuesta del KML","no_getfeature_response":"No hubo respuesta en la operación GetFeature","no_map":"No ha especificado ningun mapa","layerswitcher_method":"La implementación usada no puede crear controles LayerSwitcher","location_method":"La implementación usada no puede crear controles Location","wms_method":"La implementación usada no puede crear capas WMS","wmts_method":"La implementación usada no puede crear capas WMTS","no_impl":"No se ha especificado ninguna implementación","no_container":"No ha especificado ningún parámetro contenedor","no_id_container":"No existe ningún contenedor con el id especificado","no_center":"No ha especificado ningún parámetro center","no_attr_name":"No se ha especificado el nombre del atributo","no_empty":"El nombre de atributo no puede ser nulo. Especifique cadena o función","invalid_center_param":"El formato del parámetro center no es correcto","invalid_maxextent_param":"El formato del parámetro maxExtent no es correcto","invalid_resolutions_param":"El formato del parámetro resolutions no es correcto","invalid_zoom_param":"El formato del parámetro zoom no es correcto","min_gt_max":"No puede establecerse un radio mínimo mayor que el máximo.","max_lt_min":"No puede establecerse un radio máximo menor que el mínimo.","no_geojson":"No se ha especificado ningun GeoJSON","unsupported_lang":"Se ha establecido un idioma sin soporte","generate_image":"Se ha producido un error al generar la imagen"}}')},function(t,e){t.exports='<div class="m-control m-wmcselector-container g-cartografia-mapa" title="{{title}}">\n    <select class="m-wmcselector-select">\n        {{#each layers}}\n            <option {{#if selected}}selected {{/if}}value="{{url}}">{{name}}</option>\n        {{/each}}\n    </select>\n</div>'},function(t,e){t.exports='<div class="m-geojson-content">\n   {{#each features}}\n   <div id="{{id}}" class="result">\n      {{#each attributes}}\n      <table>\n         <tr>\n            <td class="key">{{key}}</td>\n            <td class="value">{{{value}}}</td>\n         </tr>\n      </table>\n      {{/each}}\n   </div>\n   <div class="m-separator"></div>\n   {{/each}}\n</div>'},function(t,e){t.exports='<div class="m-dialog {{severity}}">\n   <div class="m-modal">\n      <div class="m-content">\n         <div class="m-title">\n            <i class="m-icon"></i>\n            <span>{{{title}}}</span>\n         </div>\n         <div class="m-message">{{{message}}}</div>\n         <div class="m-button">\n            <button>OK</button>\n         </div>\n      </div>\n   </div>\n</div>'},function(t,e){t.exports='<div class="m-control m-location-container" title="{{title}}">\n    <button id="m-location-button" class="g-cartografia-gps2"></button>\n</div>'},function(t,e){t.exports='<div class="m-control m-scale-container" title="{{title}}">\n    <div class="m-unit g-cartografia-escala3">{{scale}} = 1 : </div>\n    <div class="m-scale" id="m-scale-span"></div>\n</div>'},function(t,e){t.exports='<div class="m-control m-rotate-container">\n    <div id="m-rotate-slider-container">\n        <div id="m-rotate-slider" class="m-rotate-slider">\n        </div>\n        <button id="m-rotate-button" class="g-cartografia-brujula-norte"></button>\n        <svg id="m-rotate-marker">\n            <circle id="m-rotate-marker-circle" cx="8" cy="8" r="6" />\n        </svg>\n    </div>\n</div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-control"></div>'},function(t,e){t.exports='<div class="m-getfeatureinfo-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports="  {{#each layers}}\n      <div class='m-getfeatureinfo-content-info'>\n          <div class='m-getfeatureinfo-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-getfeatureinfo-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}"},function(t,e){t.exports='<div class="m-control m-getfeatureinfo-container" id="infoGetFeature">\n    <button id="m-getfeatureinfo-button" class="g-cartografia-info" title="{{title}}"></button>\n</div>'},function(t,e){t.exports='<div class="m-panel">\n   <button class="m-panel-btn"></button>\n   <div class="m-panel-controls"></div>\n</div>'},function(t,e){t.exports='<div class="m-label-content">\n   {{{info}}}\n</div>'},function(t,e){t.exports='<div class="m-kml-content">\n   <p class="m-kml-name">{{{name}}}</p>\n   <div class="m-kml-desc">{{{desc}}}</div>\n</div>'},function(t,e,r){"use strict";t.exports=i;var n=r(94);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function u(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function h(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function _(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return u(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return u(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return u(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return u(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return u(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return u(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,r){return s.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){var n="",i=e;for(;i<r;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=l(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&c(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&c(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,r){"use strict";(function(t){function n(){var e='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+t.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}r.d(e,"a",(function(){return n}))}).call(this,r(67).Buffer)},function(t,e){(function(){var e;t.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return e},getLink:function(t){return"https://fonts.google.com/specimen/"+t.replace(/( )/g,"+")},normalizeName:function(t){return t}},e=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},function(t,e,r){const n=r(161);t.exports=function(t,e,r){const i=[],o=r&&r.debug||!1;let a,s=r&&r.startIndex||0;for(;a=n(t,e,{debug:o,startIndex:s});)s=a.end,i.push(a);return o&&console.log("findTagsByName found",i.length,"tags"),i}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return f}));var n=r(121),i=r.n(n),o=r(122),a=r.n(o),s=r(123),l=r.n(s),u=r(63),c=r(25);class h extends u.b{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class f extends u.a{constructor(t){super(t),this.parsedUrl=l.a.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?i.a:a.a}constructRequest(e,r){return new Promise((n,i)=>{const o=this.httpApi.get({...this.parsedUrl,headers:e},e=>{const r=new Promise(r=>{const n=[];e.on("data",t=>{n.push(t)}),e.on("end",()=>{const e=t.concat(n).buffer;r(e)}),e.on("error",i)});n(new h(e,r))});o.on("error",i),r&&(r.aborted&&o.destroy(new c.a("Request aborted")),r.addEventListener("abort",()=>o.destroy(new c.a("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}}).call(this,r(67).Buffer)},function(t,e){},function(t,e){},function(t,e){},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var n=r(89),i=r.n(n),o=r(56);class a extends o.a{constructor(t){super(),this.path=t,this.openRequest=function(t,e,r){return new Promise((n,o)=>{i.a.open(t,e,r,(t,e)=>{t?o(t):n(e)})})}(t,"r")}async fetchSlice(e){const r=await this.openRequest,{buffer:n}=await function(...t){return new Promise((e,r)=>{i.a.read(...t,(t,n,i)=>{t?r(t):e({bytesRead:n,buffer:i})})})}(r,t.alloc(e.length),0,e.length,e.offset);return n.buffer}async close(){const t=await this.openRequest;await function(t){return new Promise((e,r)=>{i.a.close(t,t=>{t?r(t):e()})})}(t)}}function s(t){return new a(t)}}).call(this,r(67).Buffer)},function(t,e){t.exports=Worker},function(t,e,r){var n,i,o,a,s,l,u,c,h,f,p,d,g;
/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */i={defaultNoDataValue:-34027999387901484e22,decode:function(t,e){var r=(e=e||{}).encodedMaskData||null===e.encodedMaskData,n=l(t,e.inputOffset||0,r),u=null!==e.noDataValue?e.noDataValue:i.defaultNoDataValue,c=o(n,e.pixelType||Float32Array,e.encodedMaskData,u,e.returnMask),h={width:n.width,height:n.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:n.pixels.maxValue,noDataValue:u};return c.resultMask&&(h.maskData=c.resultMask),e.returnEncodedMask&&n.mask&&(h.encodedMaskData=n.mask.bitset?n.mask.bitset:null),e.returnFileInfo&&(h.fileInfo=a(n),e.computeUsedBitDepths&&(h.fileInfo.bitDepths=s(n))),h}},o=function(t,e,r,n,i){var o,a,s,l=0,c=t.pixels.numBlocksX,h=t.pixels.numBlocksY,f=Math.floor(t.width/c),p=Math.floor(t.height/h),d=2*t.maxZError,g=Number.MAX_VALUE;r=r||(t.mask?t.mask.bitset:null),a=new e(t.width*t.height),i&&r&&(s=new Uint8Array(t.width*t.height));for(var y,m,_=new Float32Array(f*p),v=0;v<=h;v++){var b=v!==h?p:t.height%h;if(0!==b)for(var x=0;x<=c;x++){var w=x!==c?f:t.width%c;if(0!==w){var E,O,S,I,C=v*t.width*p+x*f,T=t.width-w,P=t.pixels.blocks[l];if(P.encoding<2?(0===P.encoding?E=P.rawData:(u(P.stuffedData,P.bitsPerPixel,P.numValidPixels,P.offset,d,_,t.pixels.maxValue),E=_),O=0):S=2===P.encoding?0:P.offset,r)for(m=0;m<b;m++){for(7&C&&(I=r[C>>3],I<<=7&C),y=0;y<w;y++)7&C||(I=r[C>>3]),128&I?(s&&(s[C]=1),g=g>(o=P.encoding<2?E[O++]:S)?o:g,a[C++]=o):(s&&(s[C]=0),a[C++]=n),I<<=1;C+=T}else if(P.encoding<2)for(m=0;m<b;m++){for(y=0;y<w;y++)g=g>(o=E[O++])?o:g,a[C++]=o;C+=T}else for(g=g>S?S:g,m=0;m<b;m++){for(y=0;y<w;y++)a[C++]=S;C+=T}if(1===P.encoding&&O!==P.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:a,resultMask:s,minValue:g}},a=function(t){return{fileIdentifierString:t.fileIdentifierString,fileVersion:t.fileVersion,imageType:t.imageType,height:t.height,width:t.width,maxZError:t.maxZError,eofOffset:t.eofOffset,mask:t.mask?{numBlocksX:t.mask.numBlocksX,numBlocksY:t.mask.numBlocksY,numBytes:t.mask.numBytes,maxValue:t.mask.maxValue}:null,pixels:{numBlocksX:t.pixels.numBlocksX,numBlocksY:t.pixels.numBlocksY,numBytes:t.pixels.numBytes,maxValue:t.pixels.maxValue,noDataValue:t.noDataValue}}},s=function(t){for(var e=t.pixels.numBlocksX*t.pixels.numBlocksY,r={},n=0;n<e;n++){var i=t.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},l=function(t,e,r){var n={},i=new Uint8Array(t,e,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;e+=10;var o=new DataView(t,e,24);if(n.fileVersion=o.getInt32(0,!0),n.imageType=o.getInt32(4,!0),n.height=o.getUint32(8,!0),n.width=o.getUint32(12,!0),n.maxZError=o.getFloat64(16,!0),e+=24,!r)if(o=new DataView(t,e,16),n.mask={},n.mask.numBlocksY=o.getUint32(0,!0),n.mask.numBlocksX=o.getUint32(4,!0),n.mask.numBytes=o.getUint32(8,!0),n.mask.maxValue=o.getFloat32(12,!0),e+=16,n.mask.numBytes>0){var a=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(o=new DataView(t,e,n.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)a[u++]=o.getUint8(l++);else{var c=o.getUint8(l++);for(s=-s;s--;)a[u++]=c}s=o.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==s||u<a.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=a,e+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));o=new DataView(t,e,16),n.pixels={},n.pixels.numBlocksY=o.getUint32(0,!0),n.pixels.numBlocksX=o.getUint32(4,!0),n.pixels.numBytes=o.getUint32(8,!0),n.pixels.maxValue=o.getFloat32(12,!0),e+=16;var h=n.pixels.numBlocksX,f=n.pixels.numBlocksY,p=h+(n.width%h>0?1:0),d=f+(n.height%f>0?1:0);n.pixels.blocks=new Array(p*d);for(var g=0,y=0;y<d;y++)for(var m=0;m<p;m++){var _=0,v=t.byteLength-e;o=new DataView(t,e,Math.min(10,v));var b={};n.pixels.blocks[g++]=b;var x=o.getUint8(0);if(_++,b.encoding=63&x,b.encoding>3)throw"Invalid block encoding ("+b.encoding+")";if(2!==b.encoding){if(0!==x&&2!==x){if(x>>=6,b.offsetType=x,2===x)b.offset=o.getInt8(1),_++;else if(1===x)b.offset=o.getInt16(1,!0),_+=2;else{if(0!==x)throw"Invalid block offset type";b.offset=o.getFloat32(1,!0),_+=4}if(1===b.encoding)if(x=o.getUint8(_),_++,b.bitsPerPixel=63&x,x>>=6,b.numValidPixelsType=x,2===x)b.numValidPixels=o.getUint8(_),_++;else if(1===x)b.numValidPixels=o.getUint16(_,!0),_+=2;else{if(0!==x)throw"Invalid valid pixel count type";b.numValidPixels=o.getUint32(_,!0),_+=4}}var w;if(e+=_,3!==b.encoding)if(0===b.encoding){var E=(n.pixels.numBytes-1)/4;if(E!==Math.floor(E))throw"uncompressed block has invalid length";w=new ArrayBuffer(4*E),new Uint8Array(w).set(new Uint8Array(t,e,4*E));var O=new Float32Array(w);b.rawData=O,e+=4*E}else if(1===b.encoding){var S=Math.ceil(b.numValidPixels*b.bitsPerPixel/8),I=Math.ceil(S/4);w=new ArrayBuffer(4*I),new Uint8Array(w).set(new Uint8Array(t,e,S)),b.stuffedData=new Uint32Array(w),e+=S}}else e++}return n.eofOffset=e,n},u=function(t,e,r,n,i,o,a){var s,l,u,c=(1<<e)-1,h=0,f=0,p=Math.ceil((a-n)/i),d=4*t.length-Math.ceil(e*r/8);for(t[t.length-1]<<=8*d,s=0;s<r;s++){if(0===f&&(u=t[h++],f=32),f>=e)l=u>>>f-e&c,f-=e;else{var g=e-f;l=(u&c)<<g&c,l+=(u=t[h++])>>>(f=32-g)}o[s]=l<p?n+l*i:a}return o},f=i,p=function(){"use strict";var t=function(t,e,r,n,i,o,a,s){var l,u,c,h,f,p=(1<<r)-1,d=0,g=0,y=4*t.length-Math.ceil(r*n/8);if(t[t.length-1]<<=8*y,i)for(l=0;l<n;l++)0===g&&(c=t[d++],g=32),g>=r?(u=c>>>g-r&p,g-=r):(u=(c&p)<<(h=r-g)&p,u+=(c=t[d++])>>>(g=32-h)),e[l]=i[u];else for(f=Math.ceil((s-o)/a),l=0;l<n;l++)0===g&&(c=t[d++],g=32),g>=r?(u=c>>>g-r&p,g-=r):(u=(c&p)<<(h=r-g)&p,u+=(c=t[d++])>>>(g=32-h)),e[l]=u<f?o+u*a:s},e=function(t,e,r,n,i,o){var a,s=(1<<e)-1,l=0,u=0,c=0,h=0,f=0,p=[],d=4*t.length-Math.ceil(e*r/8);t[t.length-1]<<=8*d;var g=Math.ceil((o-n)/i);for(u=0;u<r;u++)0===h&&(a=t[l++],h=32),h>=e?(f=a>>>h-e&s,h-=e):(f=(a&s)<<(c=e-h)&s,f+=(a=t[l++])>>>(h=32-c)),p[u]=f<g?n+f*i:o;return p.unshift(n),p},r=function(t,e,r,n,i,o,a,s){var l,u,c,h,f=(1<<r)-1,p=0,d=0,g=0;if(i)for(l=0;l<n;l++)0===d&&(c=t[p++],d=32,g=0),d>=r?(u=c>>>g&f,d-=r,g+=r):(u=c>>>g&f,d=32-(h=r-d),u|=((c=t[p++])&(1<<h)-1)<<r-h,g=h),e[l]=i[u];else{var y=Math.ceil((s-o)/a);for(l=0;l<n;l++)0===d&&(c=t[p++],d=32,g=0),d>=r?(u=c>>>g&f,d-=r,g+=r):(u=c>>>g&f,d=32-(h=r-d),u|=((c=t[p++])&(1<<h)-1)<<r-h,g=h),e[l]=u<y?o+u*a:s}return e},n=function(t,e,r,n,i,o){var a,s=(1<<e)-1,l=0,u=0,c=0,h=0,f=0,p=0,d=[],g=Math.ceil((o-n)/i);for(u=0;u<r;u++)0===h&&(a=t[l++],h=32,p=0),h>=e?(f=a>>>p&s,h-=e,p+=e):(f=a>>>p&s,h=32-(c=e-h),f|=((a=t[l++])&(1<<c)-1)<<e-c,p=c),d[u]=f<g?n+f*i:o;return d.unshift(n),d},i=function(t,e,r,n){var i,o,a,s,l=(1<<r)-1,u=0,c=0,h=4*t.length-Math.ceil(r*n/8);for(t[t.length-1]<<=8*h,i=0;i<n;i++)0===c&&(a=t[u++],c=32),c>=r?(o=a>>>c-r&l,c-=r):(o=(a&l)<<(s=r-c)&l,o+=(a=t[u++])>>>(c=32-s)),e[i]=o;return e},o=function(t,e,r,n){var i,o,a,s,l=(1<<r)-1,u=0,c=0,h=0;for(i=0;i<n;i++)0===c&&(a=t[u++],c=32,h=0),c>=r?(o=a>>>h&l,c-=r,h+=r):(o=a>>>h&l,c=32-(s=r-c),o|=((a=t[u++])&(1<<s)-1)<<r-s,h=s),e[i]=o;return e},a={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(t){for(var e=65535,r=65535,n=t.length,i=Math.floor(n/2),o=0;i;){var a=i>=359?359:i;i-=a;do{e+=t[o++]<<8,r+=e+=t[o++]}while(--a);e=(65535&e)+(e>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=e+=t[o]<<8),((r=(65535&r)+(r>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(t,e){var r=e.ptr,n=new Uint8Array(t,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var o,a=new DataView(t,r,8),s=a.getInt32(0,!0);if(i.fileVersion=s,r+=4,s>=3&&(i.checksum=a.getUint32(4,!0),r+=4),a=new DataView(t,r,12),i.height=a.getUint32(0,!0),i.width=a.getUint32(4,!0),r+=8,s>=4?(i.numDims=a.getUint32(8,!0),r+=4):i.numDims=1,a=new DataView(t,r,40),i.numValidPixel=a.getUint32(0,!0),i.microBlockSize=a.getInt32(4,!0),i.blobSize=a.getInt32(8,!0),i.imageType=a.getInt32(12,!0),i.maxZError=a.getFloat64(16,!0),i.zMin=a.getFloat64(24,!0),i.zMax=a.getFloat64(32,!0),r+=40,e.headerInfo=i,e.ptr=r,s>=3&&(o=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(t,r-o,i.blobSize-14))!==i.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(t,e){var r=e.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),o=this.readSubArray(t,e.ptr,n,i),a=this.readSubArray(t,e.ptr+i,n,i);e.ptr+=2*i;var s,l=!0;for(s=0;s<r.numDims;s++)if(o[s]!==a[s]){l=!1;break}return r.minValues=o,r.maxValues=a,l},readSubArray:function(t,e,r,n){var i;if(r===Uint8Array)i=new Uint8Array(t,e,n);else{var o=new ArrayBuffer(n);new Uint8Array(o).set(new Uint8Array(t,e,n)),i=new r(o)}return i},readMask:function(t,e){var r,n,i=e.ptr,o=e.headerInfo,a=o.width*o.height,s=o.numValidPixel,l=new DataView(t,i,4),u={};if(u.numBytes=l.getUint32(0,!0),i+=4,(0===s||a===s)&&0!==u.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(a/8)),u.bitset=r,n=new Uint8Array(a),e.pixels.resultMask=n,i+=u.numBytes;else if(u.numBytes>0){r=new Uint8Array(Math.ceil(a/8));var c=(l=new DataView(t,i,u.numBytes)).getInt16(0,!0),h=2,f=0,p=0;do{if(c>0)for(;c--;)r[f++]=l.getUint8(h++);else for(p=l.getUint8(h++),c=-c;c--;)r[f++]=p;c=l.getInt16(h,!0),h+=2}while(h<u.numBytes);if(-32768!==c||f<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(a);var d=0,g=0;for(g=0;g<a;g++)7&g?(d=r[g>>3],d<<=7&g):d=r[g>>3],128&d&&(n[g]=1);e.pixels.resultMask=n,u.bitset=r,i+=u.numBytes}return e.ptr=i,e.mask=u,!0},readDataOneSweep:function(t,e,r,n){var i,o=e.ptr,s=e.headerInfo,l=s.numDims,u=s.width*s.height,c=s.imageType,h=s.numValidPixel*a.getDataTypeSize(c)*l,f=e.pixels.resultMask;if(r===Uint8Array)i=new Uint8Array(t,o,h);else{var p=new ArrayBuffer(h);new Uint8Array(p).set(new Uint8Array(t,o,h)),i=new r(p)}if(i.length===u*l)e.pixels.resultPixels=n?a.swapDimensionOrder(i,u,l,r,!0):i;else{e.pixels.resultPixels=new r(u*l);var d=0,g=0,y=0,m=0;if(l>1){if(n){for(g=0;g<u;g++)if(f[g])for(m=g,y=0;y<l;y++,m+=u)e.pixels.resultPixels[m]=i[d++]}else for(g=0;g<u;g++)if(f[g])for(m=g*l,y=0;y<l;y++)e.pixels.resultPixels[m+y]=i[d++]}else for(g=0;g<u;g++)f[g]&&(e.pixels.resultPixels[g]=i[d++])}return o+=h,e.ptr=o,!0},readHuffmanTree:function(t,e){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(t,e.ptr,16);if(e.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var i=n.getInt32(4,!0),o=n.getInt32(8,!0),l=n.getInt32(12,!0);if(o>=l)return!1;var u=new Uint32Array(l-o);a.decodeBits(t,e,u);var c,h,f,p,d=[];for(c=o;c<l;c++)d[h=c-(c<i?0:i)]={first:u[c-o],second:null};var g=t.byteLength-e.ptr,y=Math.ceil(g/4),m=new ArrayBuffer(4*y);new Uint8Array(m).set(new Uint8Array(t,e.ptr,g));var _,v=new Uint32Array(m),b=0,x=0;for(_=v[0],c=o;c<l;c++)(p=d[h=c-(c<i?0:i)].first)>0&&(d[h].second=_<<b>>>32-p,32-b>=p?32===(b+=p)&&(b=0,_=v[++x]):(b+=p-32,_=v[++x],d[h].second|=_>>>32-b));var w=0,E=0,O=new s;for(c=0;c<d.length;c++)void 0!==d[c]&&(w=Math.max(w,d[c].first));E=w>=r?r:w;var S,I,C,T,P,R=[];for(c=o;c<l;c++)if((p=d[h=c-(c<i?0:i)].first)>0)if(S=[p,h],p<=E)for(I=d[h].second<<E-p,C=1<<E-p,f=0;f<C;f++)R[I|f]=S;else for(I=d[h].second,P=O,T=p-1;T>=0;T--)I>>>T&1?(P.right||(P.right=new s),P=P.right):(P.left||(P.left=new s),P=P.left),0!==T||P.val||(P.val=S[1]);return{decodeLut:R,numBitsLUTQick:E,numBitsLUT:w,tree:O,stuffedData:v,srcPtr:x,bitPos:b}},readHuffman:function(t,e,r,n){var i,o,s,l,u,c,h,f,p,d=e.headerInfo.numDims,g=e.headerInfo.height,y=e.headerInfo.width,m=y*g,_=this.readHuffmanTree(t,e),v=_.decodeLut,b=_.tree,x=_.stuffedData,w=_.srcPtr,E=_.bitPos,O=_.numBitsLUTQick,S=_.numBitsLUT,I=0===e.headerInfo.imageType?128:0,C=e.pixels.resultMask,T=0;E>0&&(w++,E=0);var P,R=x[w],L=1===e.encodeMode,M=new r(m*d),N=M;if(d<2||L){for(P=0;P<d;P++)if(d>1&&(N=new r(M.buffer,m*P,m),T=0),e.headerInfo.numValidPixel===y*g)for(f=0,c=0;c<g;c++)for(h=0;h<y;h++,f++){if(o=0,u=l=R<<E>>>32-O,32-E<O&&(u=l|=x[w+1]>>>64-E-O),v[u])o=v[u][1],E+=v[u][0];else for(u=l=R<<E>>>32-S,32-E<S&&(u=l|=x[w+1]>>>64-E-S),i=b,p=0;p<S;p++)if(!(i=l>>>S-p-1&1?i.right:i.left).left&&!i.right){o=i.val,E=E+p+1;break}E>=32&&(E-=32,R=x[++w]),s=o-I,L?(s+=h>0?T:c>0?N[f-y]:T,s&=255,N[f]=s,T=s):N[f]=s}else for(f=0,c=0;c<g;c++)for(h=0;h<y;h++,f++)if(C[f]){if(o=0,u=l=R<<E>>>32-O,32-E<O&&(u=l|=x[w+1]>>>64-E-O),v[u])o=v[u][1],E+=v[u][0];else for(u=l=R<<E>>>32-S,32-E<S&&(u=l|=x[w+1]>>>64-E-S),i=b,p=0;p<S;p++)if(!(i=l>>>S-p-1&1?i.right:i.left).left&&!i.right){o=i.val,E=E+p+1;break}E>=32&&(E-=32,R=x[++w]),s=o-I,L?(h>0&&C[f-1]?s+=T:c>0&&C[f-y]?s+=N[f-y]:s+=T,s&=255,N[f]=s,T=s):N[f]=s}}else for(f=0,c=0;c<g;c++)for(h=0;h<y;h++)if(f=c*y+h,!C||C[f])for(P=0;P<d;P++,f+=m){if(o=0,u=l=R<<E>>>32-O,32-E<O&&(u=l|=x[w+1]>>>64-E-O),v[u])o=v[u][1],E+=v[u][0];else for(u=l=R<<E>>>32-S,32-E<S&&(u=l|=x[w+1]>>>64-E-S),i=b,p=0;p<S;p++)if(!(i=l>>>S-p-1&1?i.right:i.left).left&&!i.right){o=i.val,E=E+p+1;break}E>=32&&(E-=32,R=x[++w]),s=o-I,N[f]=s}e.ptr=e.ptr+4*(w+1)+(E>0?4:0),e.pixels.resultPixels=M,d>1&&!n&&(e.pixels.resultPixels=a.swapDimensionOrder(M,m,d,r))},decodeBits:function(a,s,l,u,c){var h=s.headerInfo,f=h.fileVersion,p=0,d=a.byteLength-s.ptr>=5?5:a.byteLength-s.ptr,g=new DataView(a,s.ptr,d),y=g.getUint8(0);p++;var m=y>>6,_=0===m?4:3-m,v=(32&y)>0,b=31&y,x=0;if(1===_)x=g.getUint8(p),p++;else if(2===_)x=g.getUint16(p,!0),p+=2;else{if(4!==_)throw"Invalid valid pixel count type";x=g.getUint32(p,!0),p+=4}var w,E,O,S,I,C,T,P,R,L=2*h.maxZError,M=h.numDims>1?h.maxValues[c]:h.zMax;if(v){for(s.counter.lut++,P=g.getUint8(p),p++,S=Math.ceil((P-1)*b/8),I=Math.ceil(S/4),E=new ArrayBuffer(4*I),O=new Uint8Array(E),s.ptr+=p,O.set(new Uint8Array(a,s.ptr,S)),T=new Uint32Array(E),s.ptr+=S,R=0;P-1>>>R;)R++;S=Math.ceil(x*R/8),I=Math.ceil(S/4),E=new ArrayBuffer(4*I),(O=new Uint8Array(E)).set(new Uint8Array(a,s.ptr,S)),w=new Uint32Array(E),s.ptr+=S,C=f>=3?n(T,b,P-1,u,L,M):e(T,b,P-1,u,L,M),f>=3?r(w,l,R,x,C):t(w,l,R,x,C)}else s.counter.bitstuffer++,R=b,s.ptr+=p,R>0&&(S=Math.ceil(x*R/8),I=Math.ceil(S/4),E=new ArrayBuffer(4*I),(O=new Uint8Array(E)).set(new Uint8Array(a,s.ptr,S)),w=new Uint32Array(E),s.ptr+=S,f>=3?null==u?o(w,l,R,x):r(w,l,R,x,!1,u,L,M):null==u?i(w,l,R,x):t(w,l,R,x,!1,u,L,M))},readTiles:function(t,e,r,n){var i=e.headerInfo,o=i.width,s=i.height,l=o*s,u=i.microBlockSize,c=i.imageType,h=a.getDataTypeSize(c),f=Math.ceil(o/u),p=Math.ceil(s/u);e.pixels.numBlocksY=p,e.pixels.numBlocksX=f,e.pixels.ptr=0;var d,g,y,m,_,v,b,x,w,E,O=0,S=0,I=0,C=0,T=0,P=0,R=0,L=0,M=0,N=0,A=0,k=0,j=0,F=0,D=0,G=new r(u*u),U=s%u||u,B=o%u||u,z=i.numDims,V=e.pixels.resultMask,q=e.pixels.resultPixels,Y=i.fileVersion>=5?14:15,W=i.zMax;for(I=0;I<p;I++)for(T=I!==p-1?u:U,C=0;C<f;C++)for(N=I*o*u+C*u,A=o-(P=C!==f-1?u:B),x=0;x<z;x++){if(z>1?(E=q,N=I*o*u+C*u,q=new r(e.pixels.resultPixels.buffer,l*x*h,l),W=i.maxValues[x]):E=null,R=t.byteLength-e.ptr,g={},D=0,L=(d=new DataView(t,e.ptr,Math.min(10,R))).getUint8(0),D++,w=i.fileVersion>=5?4&L:0,M=L>>6&255,(L>>2&Y)!=(C*u>>3&Y))throw"integrity issue";if(w&&0===x)throw"integrity issue";if((_=3&L)>3)throw e.ptr+=D,"Invalid block encoding ("+_+")";if(2!==_)if(0===_){if(w)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=D,k=(k=T*P*h)<(j=t.byteLength-e.ptr)?k:j,y=new ArrayBuffer(k%h==0?k:k+h-k%h),new Uint8Array(y).set(new Uint8Array(t,e.ptr,k)),m=new r(y),F=0,V)for(O=0;O<T;O++){for(S=0;S<P;S++)V[N]&&(q[N]=m[F++]),N++;N+=A}else for(O=0;O<T;O++){for(S=0;S<P;S++)q[N++]=m[F++];N+=A}e.ptr+=F*h}else if(v=a.getDataTypeUsed(w&&c<6?4:c,M),b=a.getOnePixel(g,D,v,d),D+=a.getDataTypeSize(v),3===_)if(e.ptr+=D,e.counter.constantoffset++,V)for(O=0;O<T;O++){for(S=0;S<P;S++)V[N]&&(q[N]=w?Math.min(W,E[N]+b):b),N++;N+=A}else for(O=0;O<T;O++){for(S=0;S<P;S++)q[N]=w?Math.min(W,E[N]+b):b,N++;N+=A}else if(e.ptr+=D,a.decodeBits(t,e,G,b,x),D=0,w)if(V)for(O=0;O<T;O++){for(S=0;S<P;S++)V[N]&&(q[N]=G[D++]+E[N]),N++;N+=A}else for(O=0;O<T;O++){for(S=0;S<P;S++)q[N]=G[D++]+E[N],N++;N+=A}else if(V)for(O=0;O<T;O++){for(S=0;S<P;S++)V[N]&&(q[N]=G[D++]),N++;N+=A}else for(O=0;O<T;O++){for(S=0;S<P;S++)q[N++]=G[D++];N+=A}else{if(w)if(V)for(O=0;O<T;O++)for(S=0;S<P;S++)V[N]&&(q[N]=E[N]),N++;else for(O=0;O<T;O++)for(S=0;S<P;S++)q[N]=E[N],N++;e.counter.constant++,e.ptr+=D}}z>1&&!n&&(e.pixels.resultPixels=a.swapDimensionOrder(e.pixels.resultPixels,l,z,r))},formatFileInfo:function(t){return{fileIdentifierString:t.headerInfo.fileIdentifierString,fileVersion:t.headerInfo.fileVersion,imageType:t.headerInfo.imageType,height:t.headerInfo.height,width:t.headerInfo.width,numValidPixel:t.headerInfo.numValidPixel,microBlockSize:t.headerInfo.microBlockSize,blobSize:t.headerInfo.blobSize,maxZError:t.headerInfo.maxZError,pixelType:a.getPixelType(t.headerInfo.imageType),eofOffset:t.eofOffset,mask:t.mask?{numBytes:t.mask.numBytes}:null,pixels:{numBlocksX:t.pixels.numBlocksX,numBlocksY:t.pixels.numBlocksY,maxValue:t.headerInfo.zMax,minValue:t.headerInfo.zMin,noDataValue:t.noDataValue}}},constructConstantSurface:function(t,e){var r=t.headerInfo.zMax,n=t.headerInfo.zMin,i=t.headerInfo.maxValues,o=t.headerInfo.numDims,a=t.headerInfo.height*t.headerInfo.width,s=0,l=0,u=0,c=t.pixels.resultMask,h=t.pixels.resultPixels;if(c)if(o>1){if(e)for(s=0;s<o;s++)for(u=s*a,r=i[s],l=0;l<a;l++)c[l]&&(h[u+l]=r);else for(l=0;l<a;l++)if(c[l])for(u=l*o,s=0;s<o;s++)h[u+o]=i[s]}else for(l=0;l<a;l++)c[l]&&(h[l]=r);else if(o>1&&n!==r)if(e)for(s=0;s<o;s++)for(u=s*a,r=i[s],l=0;l<a;l++)h[u+l]=r;else for(l=0;l<a;l++)for(u=l*o,s=0;s<o;s++)h[u+s]=i[s];else for(l=0;l<a*o;l++)h[l]=r},getDataTypeArray:function(t){var e;switch(t){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:e=Float32Array;break;case 7:e=Float64Array;break;default:e=Float32Array}return e},getPixelType:function(t){var e;switch(t){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:e="F32";break;case 7:e="F64";break;default:e="F32"}return e},isValidPixelValue:function(t,e){if(null==e)return!1;var r;switch(t){case 0:r=e>=-128&&e<=127;break;case 1:r=e>=0&&e<=255;break;case 2:r=e>=-32768&&e<=32767;break;case 3:r=e>=0&&e<=65536;break;case 4:r=e>=-2147483648&&e<=2147483647;break;case 5:r=e>=0&&e<=4294967296;break;case 6:r=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:r=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(t){var e=0;switch(t){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=t}return e},getDataTypeUsed:function(t,e){var r=t;switch(t){case 2:case 4:r=t-e;break;case 3:case 5:r=t-2*e;break;case 6:r=0===e?t:1===e?2:1;break;case 7:r=0===e?t:t-2*e+1;break;default:r=t}return r},getOnePixel:function(t,e,r,n){var i=0;switch(r){case 0:i=n.getInt8(e);break;case 1:i=n.getUint8(e);break;case 2:i=n.getInt16(e,!0);break;case 3:i=n.getUint16(e,!0);break;case 4:i=n.getInt32(e,!0);break;case 5:i=n.getUInt32(e,!0);break;case 6:i=n.getFloat32(e,!0);break;case 7:i=n.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(t,e,r,n,i){var o=0,a=0,s=0,l=0,u=t;if(r>1)if(u=new n(e*r),i)for(o=0;o<e;o++)for(l=o,s=0;s<r;s++,l+=e)u[l]=t[a++];else for(o=0;o<e;o++)for(l=o,s=0;s<r;s++,l+=e)u[a++]=t[l];return u}},s=function(t,e,r){this.val=t,this.left=e,this.right=r};return{decode:function(t,e){var r=(e=e||{}).noDataValue,n=0,i={};if(i.ptr=e.inputOffset||0,i.pixels={},a.readHeaderInfo(t,i)){var o=i.headerInfo,s=o.fileVersion,l=a.getDataTypeArray(o.imageType);if(s>5)throw"unsupported lerc version 2."+s;a.readMask(t,i),o.numValidPixel===o.width*o.height||i.pixels.resultMask||(i.pixels.resultMask=e.maskData);var u=o.width*o.height;i.pixels.resultPixels=new l(u*o.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var c,h=!e.returnPixelInterleavedDims;if(0!==o.numValidPixel)if(o.zMax===o.zMin)a.constructConstantSurface(i,h);else if(s>=4&&a.checkMinMaxRanges(t,i))a.constructConstantSurface(i,h);else{var f=new DataView(t,i.ptr,2),p=f.getUint8(0);if(i.ptr++,p)a.readDataOneSweep(t,i,l,h);else if(s>1&&o.imageType<=1&&Math.abs(o.maxZError-.5)<1e-5){var d=f.getUint8(1);if(i.ptr++,i.encodeMode=d,d>2||s<4&&d>1)throw"Invalid Huffman flag "+d;d?a.readHuffman(t,i,l,h):a.readTiles(t,i,l,h)}else a.readTiles(t,i,l,h)}i.eofOffset=i.ptr,e.inputOffset?(c=i.headerInfo.blobSize+e.inputOffset-i.ptr,Math.abs(c)>=1&&(i.eofOffset=e.inputOffset+i.headerInfo.blobSize)):(c=i.headerInfo.blobSize-i.ptr,Math.abs(c)>=1&&(i.eofOffset=i.headerInfo.blobSize));var g={width:o.width,height:o.height,pixelData:i.pixels.resultPixels,minValue:o.zMin,maxValue:o.zMax,validPixelCount:o.numValidPixel,dimCount:o.numDims,dimStats:{minValues:o.minValues,maxValues:o.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&a.isValidPixelValue(o.imageType,r)){var y=i.pixels.resultMask;for(n=0;n<u;n++)y[n]||(g.pixelData[n]=r);g.noDataValue=r}return i.noDataValue=r,e.returnFileInfo&&(g.fileInfo=a.formatFileInfo(i)),g}},getBandCount:function(t){for(var e=0,r=0,n={ptr:0,pixels:{}};r<t.byteLength-58;)a.readHeaderInfo(t,n),r+=n.headerInfo.blobSize,e++,n.ptr=r;return e}}}(),c=new ArrayBuffer(4),h=new Uint8Array(c),new Uint32Array(c)[0]=1,d=1===h[0],g={decode:function(t,e){if(!d)throw"Big endian system is not supported.";var r,n,i=(e=e||{}).inputOffset||0,o=new Uint8Array(t,i,10),a=String.fromCharCode.apply(null,o);if("CntZImage"===a.trim())r=f,n=1;else{if("Lerc2"!==a.substring(0,5))throw"Unexpected file identifier string: "+a;r=p,n=2}for(var s,l,u,c,h,g,y=0,m=t.byteLength-10,_=[],v={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},b=0;i<m;){var x=r.decode(t,{inputOffset:i,encodedMaskData:s,maskData:u,returnMask:0===y,returnEncodedMask:0===y,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});i=x.fileInfo.eofOffset,u=x.maskData,0===y&&(s=x.encodedMaskData,v.width=x.width,v.height=x.height,v.dimCount=x.dimCount||1,v.pixelType=x.pixelType||x.fileInfo.pixelType,v.mask=u),n>1&&(u&&_.push(u),x.fileInfo.mask&&x.fileInfo.mask.numBytes>0&&b++),y++,v.pixels.push(x.pixelData),v.statistics.push({minValue:x.minValue,maxValue:x.maxValue,noDataValue:x.noDataValue,dimStats:x.dimStats})}if(n>1&&b>1){for(g=v.width*v.height,v.bandMasks=_,(u=new Uint8Array(g)).set(_[0]),c=1;c<_.length;c++)for(l=_[c],h=0;h<g;h++)u[h]=u[h]&l[h];v.maskData=u}return v}},void 0===(n=function(){return g}.apply(e,[]))||(t.exports=n)},,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}[].includes||(Array.prototype.includes=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i,o=parseInt(arguments[1])||0;for(o>=0?n=o:(n=r+o)<0&&(n=0);n<r;){if(t===(i=e[n])||Object.equals(t,i)||t!=t&&i!=i)return!0;n++}return!1}),[].remove||(Array.prototype.remove=function(t){var e=Object(this),r=parseInt(e.length)||0;if(0===r)return!1;var n,i=parseInt(arguments[1])||0;i>=0?n=i:(n=r+i)<0&&(n=0);for(var o,a=[];n<r;)(t===(o=e[n])||Object.equals(t,o)||t!=t&&o!=o)&&a.push(n),n++;var s=0;a.forEach((function(t){t+=s,e.splice(t,1),s--}))}),Object.equals||(Object.equals=function(t,e){if(null!==t.equals&&"function"==typeof t.equals&&t.equals.call)return t.equals(e);if(null!==e.equals&&"function"==typeof e.equals&&e.equals.call)return e.equals(t);var n,i=[],o=[];if(isNaN(t)&&isNaN(e)&&"number"==typeof t&&"number"==typeof e)return!0;if(t===e)return!0;if("function"==typeof t&&"function"==typeof e||t instanceof Date&&e instanceof Date||t instanceof RegExp&&e instanceof RegExp||t instanceof String&&e instanceof String||t instanceof Number&&e instanceof Number)return t.toString()===e.toString();if(!(t instanceof Object&&e instanceof Object))return!1;if(t.isPrototypeOf(e)||e.isPrototypeOf(t))return!1;if(t.constructor!==e.constructor)return!1;if(t.prototype!==e.prototype)return!1;if(i.indexOf(t)>-1||o.indexOf(e)>-1)return!1;for(n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1}for(n in t){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;if(r(e[n])!==r(t[n]))return!1;switch(r(t[n])){case"object":case"function":if(i.push(t),o.push(e),!Object.equals(t[n],e[n]))return!1;i.pop(),o.pop();break;default:if(t[n]!==e[n])return!1}}return!0})},function(t,e,r){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=u(t),a=n[0],s=n[1],l=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),c=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[c++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=16383,s=0,l=r-i;s<l;s+=a)o.push(c(t,s,s+a>l?l:s+a));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){const n=r(162),i=r(163);t.exports=function(t,e,r){const o=r&&r.debug||!1,a=r&&r.startIndex||0;o&&console.log("[xml-utils] starting findTagByName with",e," and ",r);const s=n(t,`<${e}[ >]`,a);if(o&&console.log("[xml-utils] start:",s),-1===s)return;const l=t.slice(s+e.length);let u=i(l,"^[^<]*[ /]>",0);const c=-1!==u&&"/"===l[u-1];o&&console.log("[xml-utils] selfClosing:",c),!1===c&&(u=i(l,"[ /]"+e+">",0));const h=s+e.length+u+1;if(o&&console.log("[xml-utils] end:",h),-1===h)return;const f=t.slice(s,h);let p;return p=c?null:f.slice(f.indexOf(">")+1,f.lastIndexOf("<")),{inner:p,outer:f,start:s,end:h}}},function(t,e){t.exports=function(t,e,r){const n=new RegExp(e).exec(t.slice(r));return n?r+n.index:-1}},function(t,e){t.exports=function(t,e,r){const n=new RegExp(e).exec(t.slice(r));return n?r+n.index+n[0].length-1:-1}},function(t,e,r){
/**
 * JSTS. See https://github.com/bjornharrtell/jsts
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EDLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EPLv1.txt
 * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_LICENSE_ES6_COLLECTIONS.txt
 * @license
 */
!function(t){"use strict";"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E};class e{constructor(){e.constructor_.apply(this,arguments)}static equalsWithTolerance(t,e,r){return Math.abs(t-e)<=r}getClass(){return e}get interfaces_(){return[]}}function r(t){this.message=t}function n(t,e){this.low=0|e,this.high=0|t}function i(){}var o,a,s,l,u,c;function h(){}function f(){}function p(){}function d(){}function g(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}e.constructor_=function(){},n.toBinaryString=function(t){for(var e="",r=2147483648;r>0;r>>>=1)e+=(t.high&r)===r?"1":"0";for(r=2147483648;r>0;r>>>=1)e+=(t.low&r)===r?"1":"0";return e},i.isNaN=t=>Number.isNaN(t),i.isInfinite=t=>!Number.isFinite(t),i.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?(u=new Float64Array(1),c=new Int32Array(u.buffer),i.doubleToLongBits=function(t){u[0]=t;var e=0|c[0],r=0|c[1];return 2146435072==(2146435072&r)&&0!=(1048575&r)&&0!==e&&(e=0,r=2146959360),new n(r,e)},i.longBitsToDouble=function(t){return c[0]=t.low,c[1]=t.high,u[0]}):(o=Math.log2,a=Math.floor,s=Math.pow,l=function(){for(var t=53;t>0;t--){var e=s(2,t)-1;if(a(o(e))+1===t)return e}return 0}(),i.doubleToLongBits=function(t){var e,r,i,u,c,h,f,p,d;if(t<0||1/t===Number.NEGATIVE_INFINITY?(h=1<<31,t=-t):h=0,0===t)return new n(p=h,d=0);if(t===1/0)return new n(p=2146435072|h,d=0);if(t!=t)return new n(p=2146959360,d=0);if(u=0,d=0,(e=a(t))>1)if(e<=l)(u=a(o(e)))<=20?(d=0,p=e<<20-u&1048575):(d=e%(r=s(2,i=u-20))<<32-i,p=e/r&1048575);else for(i=e,d=0;0!==(i=a(r=i/2));)u++,d>>>=1,d|=(1&p)<<31,p>>>=1,r!==i&&(p|=524288);if(f=u+1023,c=0===e,e=t-e,u<52&&0!==e)for(i=0;;){if((r=2*e)>=1?(e=r-1,c?(f--,c=!1):(i<<=1,i|=1,u++)):(e=r,c?0==--f&&(u++,c=!1):(i<<=1,u++)),20===u)p|=i,i=0;else if(52===u){d|=i;break}if(1===r){u<20?p|=i<<20-u:u<52&&(d|=i<<52-u);break}}return p|=f<<20,new n(p|=h,d)},i.longBitsToDouble=function(t){var e,r,n,i,o=t.high,a=t.low;r=o&1<<31?-1:1,n=((2146435072&o)>>20)-1023,i=0,e=1<<19;for(var l=1;l<=20;l++)o&e&&(i+=s(2,-l)),e>>>=1;for(e=1<<31,l=21;l<=52;l++)a&e&&(i+=s(2,-l)),e>>>=1;if(-1023===n){if(0===i)return 0*r;n=-1022}else{if(1024===n)return 0===i?r/0:NaN;i+=1}return r*i*s(2,n)}),g.prototype=Object.create(Error.prototype),g.prototype.constructor=Error;class y extends g{constructor(){super(),y.constructor_.apply(this,arguments)}getClass(){return y}get interfaces_(){return[]}}y.constructor_=function(){if(0===arguments.length)g.constructor_.call(this);else if(1===arguments.length){let t=arguments[0];g.constructor_.call(this,t)}};class m{constructor(){m.constructor_.apply(this,arguments)}static shouldNeverReachHere(){if(0===arguments.length)m.shouldNeverReachHere(null);else if(1===arguments.length){let t=arguments[0];throw new y("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){let t=arguments[0];m.isTrue(t,null)}else if(2===arguments.length){let t=arguments[1];if(!arguments[0])throw null===t?new y:new y(t)}}static equals(){if(2===arguments.length){let t=arguments[0],e=arguments[1];m.equals(t,e,null)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];if(!e.equals(t))throw new y("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))}}getClass(){return m}get interfaces_(){return[]}}m.constructor_=function(){};class _{constructor(){_.constructor_.apply(this,arguments)}static hashCode(){if(1===arguments.length&&"number"==typeof arguments[0]){let e=arguments[0];var t=i.doubleToLongBits(e);return Math.trunc(t^t>>>32)}}setOrdinate(t,e){switch(t){case _.X:this.x=e;break;case _.Y:this.y=e;break;case _.Z:this.z=e;break;default:throw new r("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){let t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){let t=arguments[0],r=arguments[1];return!!e.equalsWithTolerance(this.x,t.x,r)&&!!e.equalsWithTolerance(this.y,t.y,r)}}getOrdinate(t){switch(t){case _.X:return this.x;case _.Y:return this.y;case _.Z:return this.z}throw new r("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||i.isNaN(this.z)&&i.isNaN(t.z))}equals(t){return t instanceof _&&this.equals2D(t)}equalInZ(t,r){return e.equalsWithTolerance(this.z,t.z,r)}compareTo(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return m.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new _(this)}toString(){return"("+this.x+", "+this.y+", "+this.z+")"}distance3D(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)}distance(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}hashCode(){var t=17;return 37*(t=37*t+_.hashCode(this.x))+_.hashCode(this.y)}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.z}getClass(){return _}get interfaces_(){return[h,f,d]}}class v{constructor(){v.constructor_.apply(this,arguments)}static compare(t,e){return t<e?-1:t>e?1:i.isNaN(t)?i.isNaN(e)?0:-1:i.isNaN(e)?1:0}compare(t,e){var r=t,n=e,i=v.compare(r.x,n.x);if(0!==i)return i;var o=v.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:v.compare(r.z,n.z)}getClass(){return v}get interfaces_(){return[p]}}function b(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}function x(){}function w(){}function E(t){this.message=t||""}function O(){}function S(t){this.message=t||""}function I(t){this.message=t||""}function C(){this.array_=[],arguments[0]instanceof w&&this.addAll(arguments[0])}v.constructor_=function(){if(this._dimensionsToTest=2,0===arguments.length)v.constructor_.call(this,2);else if(1===arguments.length){let t=arguments[0];if(2!==t&&3!==t)throw new r("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}},_.DimensionalComparator=v,_.constructor_=function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)_.constructor_.call(this,0,0);else if(1===arguments.length){let t=arguments[0];_.constructor_.call(this,t.x,t.y,t.z)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];_.constructor_.call(this,t,e,_.NULL_ORDINATE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.z=r}},_.serialVersionUID=0x5cbf2c235c7e5800,_.NULL_ORDINATE=i.NaN,_.X=0,_.Y=1,_.Z=2,x.prototype.hasNext=function(){},x.prototype.next=function(){},x.prototype.remove=function(){},w.prototype.add=function(){},w.prototype.addAll=function(){},w.prototype.isEmpty=function(){},w.prototype.iterator=function(){},w.prototype.size=function(){},w.prototype.toArray=function(){},w.prototype.remove=function(){},E.prototype=new Error,E.prototype.name="IndexOutOfBoundsException",O.prototype=Object.create(w.prototype),O.prototype.constructor=O,O.prototype.get=function(){},O.prototype.set=function(){},O.prototype.isEmpty=function(){},S.prototype=new Error,S.prototype.name="NoSuchElementException",I.prototype=new Error,I.prototype.name="OperationNotSupported",C.prototype=Object.create(O.prototype),C.prototype.constructor=C,C.prototype.ensureCapacity=function(){},C.prototype.interfaces_=[O,w],C.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},C.prototype.clear=function(){this.array_=[]},C.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},C.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},C.prototype.iterator=function(){return new T(this)},C.prototype.get=function(t){if(t<0||t>=this.size())throw new E;return this.array_[t]},C.prototype.isEmpty=function(){return 0===this.array_.length},C.prototype.size=function(){return this.array_.length},C.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},C.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},C.prototype.removeAll=function(t){for(var e=t.iterator();e.hasNext();)this.remove(e.next());return!0};var T=function(t){this.arrayList_=t,this.position_=0};T.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new S;return this.arrayList_.get(this.position_++)},T.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},T.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},T.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};class P extends C{constructor(){super(),P.constructor_.apply(this,arguments)}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&b(arguments[0],w)){let r=arguments[1];for(var t=!1,e=arguments[0].iterator();e.hasNext();)this.add(e.next(),r),t=!0;return t}return super.addAll.apply(this,arguments)}clone(){for(var t=super.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){return this.toArray(P.coordArrayType)}add(){if(1===arguments.length){let t=arguments[0];super.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof _&&"boolean"==typeof arguments[1]){let t=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let e=arguments[0],r=arguments[1];if(arguments[2])for(var t=0;t<e.length;t++)this.add(e[t],r);else for(t=e.length-1;t>=0;t--)this.add(e[t],r);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof _){let t=arguments[0],r=arguments[1];if(!arguments[2]){var e=this.size();if(e>0){if(t>0&&this.get(t-1).equals2D(r))return null;if(t<e&&this.get(t).equals2D(r))return null}}super.add.call(this,t,r)}}else if(4===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var r=1;for(i>o&&(r=-1),t=i;t!==o;t+=r)this.add(e[t],n);return!0}}closeRing(){this.size()>0&&this.add(new _(this.get(0)),!1)}getClass(){return P}get interfaces_(){return[]}}P.constructor_=function(){if(0===arguments.length);else if(1===arguments.length){let t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}},P.coordArrayType=new Array(0).fill(null);class R{constructor(){R.constructor_.apply(this,arguments)}static intersects(){if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){let i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];var t=Math.min(a.x,s.x),e=Math.max(a.x,s.x),r=Math.min(i.x,o.x),n=Math.max(i.x,o.x);return!(r>e||n<t||(t=Math.min(a.y,s.y),e=Math.max(a.y,s.y),r=Math.min(i.y,o.y),n=Math.max(i.y,o.y),r>e||n<t))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof R))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new R;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new R(e,n,r,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof _){let t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof R){let t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return!this.isNull()&&t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy}}intersects(){if(1===arguments.length){if(arguments[0]instanceof R){let t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof _){let t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof _&&arguments[1]instanceof _){let t=arguments[0],e=arguments[1];return!(this.isNull()||(t.x<e.x?t.x:e.x)>this._maxx||(t.x>e.x?t.x:e.x)<this._minx||(t.y<e.y?t.y:e.y)>this._maxy||(t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof _){let t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof R){let t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){let t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof R){let t=arguments[0];return this.covers(t)}if(arguments[0]instanceof _){let t=arguments[0];return this.covers(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new _((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof _){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof R){let t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),r<n?(this._miny=r,this._maxy=n):(this._miny=n,this._maxy=r)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)}hashCode(){var t=17;return 37*(t=37*(t=37*(t=37*t+_.hashCode(this._minx))+_.hashCode(this._maxx))+_.hashCode(this._miny))+_.hashCode(this._maxy)}getClass(){return R}get interfaces_(){return[h,d]}}function L(){}R.constructor_=function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof _){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof R){let t=arguments[0];this.init(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.init(t,e,r,n)}},R.serialVersionUID=0x51845cd552189800;class M extends L{constructor(){super(),M.constructor_.apply(this,arguments)}getClass(){return M}get interfaces_(){return[]}}function N(t){this.str=t}function A(t){this.value=t}function k(){}M.constructor_=function(){L.constructor_.call(this,"Projective point not representable on the Cartesian plane.")},N.prototype.append=function(t){this.str+=t},N.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},N.prototype.toString=function(t){return this.str},A.prototype.intValue=function(){return this.value},A.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},A.isNaN=t=>Number.isNaN(t),k.isWhitespace=t=>t<=32&&t>=0||127==t,k.toUpperCase=t=>t.toUpperCase();class j{constructor(){j.constructor_.apply(this,arguments)}static sqr(t){return j.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){let t=arguments[0];return j.parse(t)}if("number"==typeof arguments[0])return new j(arguments[0])}static sqrt(t){return j.valueOf(t).sqrt()}static parse(t){for(var e=0,r=t.length;k.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new j,a=0,s=0,l=0;!(e>=r);){var u=t.charAt(e);if(e++,k.isDigit(u)){var c=u-"0";o.selfMultiply(j.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=A.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(p>0){var d=j.TEN.pow(p);f=o.divide(d)}else p<0&&(d=j.TEN.pow(-p),f=o.multiply(d));return n?f.negate():f}static createNaN(){return new j(i.NaN,i.NaN)}static copy(t){return new j(t)}static magnitude(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){for(var r=new N,n=0;n<e;n++)r.append(t);return r.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){var r=this.abs(),n=j.magnitude(r._hi),i=j.TEN.pow(n);(r=r.divide(i)).gt(j.TEN)?(r=r.divide(j.TEN),n+=1):r.lt(j.ONE)&&(r=r.multiply(j.TEN),n-=1);for(var o=n+1,a=new N,s=j.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(r._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),r=r.subtract(j.valueOf(u)).multiply(j.TEN),c&&r.selfAdd(j.TEN);var f=!0,p=j.magnitude(r._hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=n,a.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof j){let t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){let t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof j){let t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof j){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof j){let t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){let l=arguments[0],u=arguments[1];var t,e,r,n,i=null,o=null,a=null,s=null;return r=this._hi/l,s=(i=(a=j.SPLIT*r)-(i=a-r))*(o=(s=j.SPLIT*l)-(o=s-l))-(n=r*l)+i*(e=l-o)+(t=r-i)*o+t*e,s=r+(a=(this._hi-n-s+this._lo-r*u)/l),this._hi=s,this._lo=r-s+a,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof j){let i=arguments[0];var t,e,r,n,o=null,a=null,s=null,l=null;return t=(r=this._hi/i._hi)-(o=(s=j.SPLIT*r)-(o=s-r)),l=o*(a=(l=j.SPLIT*i._hi)-(a=l-i._hi))-(n=r*i._hi)+o*(e=i._hi-a)+t*a+t*e,s=(this._hi-n-l+this._lo-r*i._lo)/i._hi,new j(l=r+s,r-l+s)}if("number"==typeof arguments[0]){let t=arguments[0];return i.isNaN(t)?j.createNaN():j.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return j.valueOf(1);var e=new j(this),r=j.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r}ceil(){if(this.isNaN())return j.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new j(t,e)}compareTo(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}setValue(){if(arguments[0]instanceof j){let t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){let t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return j.valueOf(0);if(this.isNegative())return j.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=j.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof j){let t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){let a=arguments[0];var t=null,e=null,r=null,n=null,i=null,o=null;return n=(r=this._hi+a)-(i=r-this._hi),e=(o=(n=a-i+(this._hi-n))+this._lo)+(r-(t=r+o)),this._hi=t+e,this._lo=e+(t-this._hi),this}}else if(2===arguments.length){let c=arguments[0],h=arguments[1];t=null,e=null;var a,s=null;r=null,n=null,i=null,o=null,r=this._hi+c,a=this._lo+h,n=r-(i=r-this._hi),s=a-(o=a-this._lo);var l=(t=r+(i=(n=c-i+(this._hi-n))+a))+(i=(s=h-o+(this._lo-s))+(e=i+(r-t))),u=i+(t-l);return this._hi=l,this._lo=u,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof j){let t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){let l=arguments[0],u=arguments[1];var t,e,r=null,n=null,i=null,o=null;r=(i=j.SPLIT*this._hi)-this._hi,o=j.SPLIT*l,r=i-r,t=this._hi-r,n=o-l;var a=(i=this._hi*l)+(o=r*(n=o-n)-i+r*(e=l-n)+t*n+t*e+(this._hi*u+this._lo*l)),s=o+(r=i-a);return this._hi=a,this._lo=s,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return j.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new j(t,e)}negate(){return this.isNaN()?this:new j(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof j){let t=arguments[0];return t.isNaN()?j.createNaN():j.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){let t=arguments[0];return i.isNaN(t)?j.createNaN():j.copy(this).selfMultiply(t,0)}}isNaN(){return i.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){var t=j.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+j.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+j.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){var t,e,r,n,i=null,o=null,a=null,s=null;t=(r=1/this._hi)-(i=(a=j.SPLIT*r)-(i=a-r)),o=(s=j.SPLIT*this._hi)-this._hi;var l=r+(a=(1-(n=r*this._hi)-(s=i*(o=s-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new j(l,r-l+a)}toSciNotation(){if(this.isZero())return j.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=j.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?j.NaN:this.isNegative()?this.negate():new j(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof j){let t=arguments[0];return j.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){let t=arguments[0];return j.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof j){let t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?j.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}getClass(){return j}get interfaces_(){return[d,h,f]}}j.constructor_=function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this.init(t)}else if(arguments[0]instanceof j){let t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){let t=arguments[0];j.constructor_.call(this,j.parse(t))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t,e)}},j.PI=new j(3.141592653589793,12246467991473532e-32),j.TWO_PI=new j(6.283185307179586,24492935982947064e-32),j.PI_2=new j(1.5707963267948966,6123233995736766e-32),j.E=new j(2.718281828459045,14456468917292502e-32),j.NaN=new j(i.NaN,i.NaN),j.EPS=123259516440783e-46,j.SPLIT=134217729,j.MAX_PRINT_DIGITS=32,j.TEN=j.valueOf(10),j.ONE=j.valueOf(1),j.SCI_NOT_EXPONENT_CHAR="E",j.SCI_NOT_ZERO="0.0E0";class F{constructor(){F.constructor_.apply(this,arguments)}static orientationIndex(t,e,r){var n=F.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=j.valueOf(e.x).selfAdd(-t.x),o=j.valueOf(e.y).selfAdd(-t.y),a=j.valueOf(r.x).selfAdd(-e.x),s=j.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[0]instanceof j){let t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[0]){let i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];var t=j.valueOf(i),e=j.valueOf(o),r=j.valueOf(a),n=j.valueOf(s);return t.multiply(n).selfSubtract(e.multiply(r)).signum()}}static intersection(t,e,r,n){var i=j.valueOf(n.y).selfSubtract(r.y).selfMultiply(j.valueOf(e.x).selfSubtract(t.x)),o=j.valueOf(n.x).selfSubtract(r.x).selfMultiply(j.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=j.valueOf(n.x).selfSubtract(r.x).selfMultiply(j.valueOf(t.y).selfSubtract(r.y)),l=j.valueOf(n.y).selfSubtract(r.y).selfMultiply(j.valueOf(t.x).selfSubtract(r.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=j.valueOf(t.x).selfAdd(j.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=j.valueOf(e.x).selfSubtract(t.x).selfMultiply(j.valueOf(t.y).selfSubtract(r.y)),f=j.valueOf(e.y).selfSubtract(t.y).selfMultiply(j.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=j.valueOf(r.y).selfAdd(j.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new _(c,d)}static orientationIndexFilter(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),a=i-o;if(i>0){if(o<=0)return F.signum(a);n=i+o}else{if(!(i<0))return F.signum(a);if(o>=0)return F.signum(a);n=-i-o}var s=F.DP_SAFE_EPSILON*n;return a>=s||-a>=s?F.signum(a):2}static signum(t){return t>0?1:t<0?-1:0}getClass(){return F}get interfaces_(){return[]}}F.constructor_=function(){},F.DP_SAFE_EPSILON=1e-15;class D{constructor(){D.constructor_.apply(this,arguments)}static index(t,e,r){return F.orientationIndex(t,e,r)}static isCCW(t){var e=t.length-1;if(e<3)throw new r("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,o=1;o<=e;o++){var a=t[o];a.y>n.y&&(n=a,i=o)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var l=i;do{l=(l+1)%e}while(t[l].equals2D(n)&&l!==i);var u=t[s],c=t[l];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var h=D.index(u,n,c);return 0===h?u.x>c.x:h>0}getClass(){return D}get interfaces_(){return[]}}function G(){}D.constructor_=function(){},D.CLOCKWISE=-1,D.RIGHT=D.CLOCKWISE,D.COUNTERCLOCKWISE=1,D.LEFT=D.COUNTERCLOCKWISE,D.COLLINEAR=0,D.STRAIGHT=D.COLLINEAR,G.arraycopy=(t,e,r,n,i)=>{let o=0;for(let a=e;a<e+i;a++)r[n+o]=t[a],o++},G.getProperty=t=>({"line.separator":"\n"}[t]);class U{constructor(){U.constructor_.apply(this,arguments)}static intersection(t,e,r,n){var o=t.y-e.y,a=e.x-t.x,s=t.x*e.y-e.x*t.y,l=r.y-n.y,u=n.x-r.x,c=r.x*n.y-n.x*r.y,h=o*u-l*a,f=(a*c-u*s)/h,p=(l*s-o*c)/h;if(i.isNaN(f)||i.isInfinite(f)||i.isNaN(p)||i.isInfinite(p))throw new M;return new _(f,p)}getY(){var t=this.y/this.w;if(i.isNaN(t)||i.isInfinite(t))throw new M;return t}getX(){var t=this.x/this.w;if(i.isNaN(t)||i.isInfinite(t))throw new M;return t}getCoordinate(){var t=new _;return t.x=this.getX(),t.y=this.getY(),t}getClass(){return U}get interfaces_(){return[]}}U.constructor_=function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){let t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];this.x=t,this.y=e,this.w=1}else if(arguments[0]instanceof U&&arguments[1]instanceof U){let t=arguments[0],e=arguments[1];this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y}else if(arguments[0]instanceof _&&arguments[1]instanceof _){let t=arguments[0],e=arguments[1];this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.w=r}else if(4===arguments.length){let a=arguments[0],s=arguments[1],l=arguments[2],u=arguments[3];var t=a.y-s.y,e=s.x-a.x,r=a.x*s.y-s.x*a.y,n=l.y-u.y,i=u.x-l.x,o=l.x*u.y-u.x*l.y;this.x=e*o-i*r,this.y=n*r-t*o,this.w=t*i-n*e}};class B{constructor(){B.constructor_.apply(this,arguments)}static log10(t){var e=Math.log(t);return i.isInfinite(e)||i.isNaN(e)?e:e/B.LOG_10}static min(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){let e=arguments[1],r=arguments[2];return e>(t=arguments[0])&&(t=e),r>t&&(t=r),t}if(4===arguments.length){let e=arguments[1],r=arguments[2],n=arguments[3];var t;return e>(t=arguments[0])&&(t=e),r>t&&(t=r),n>t&&(t=n),t}}static average(t,e){return(t+e)/2}getClass(){return B}get interfaces_(){return[]}}B.constructor_=function(){},B.LOG_10=Math.log(10);class z{constructor(){z.constructor_.apply(this,arguments)}static segmentToSegment(t,e,r,n){if(t.equals(e))return z.pointToSegment(t,r,n);if(r.equals(n))return z.pointToSegment(n,t,e);var i=!1;if(R.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var a=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),s=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?B.min(z.pointToSegment(t,r,n),z.pointToSegment(e,r,n),z.pointToSegment(r,t,e),z.pointToSegment(n,t,e)):0}static pointToSegment(t,e,r){if(e.x===r.x&&e.y===r.y)return t.distance(e);var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;if(i<=0)return t.distance(e);if(i>=1)return t.distance(r);var o=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)}static pointToSegmentString(t,e){if(0===e.length)throw new r("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var o=z.pointToSegment(t,e[i],e[i+1]);o<n&&(n=o)}return n}getClass(){return z}get interfaces_(){return[]}}z.constructor_=function(){};class V{constructor(){V.constructor_.apply(this,arguments)}setOrdinate(t,e,r){}size(){}getOrdinate(t,e){}getCoordinate(){}getCoordinateCopy(t){}getDimension(){}getX(t){}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getClass(){return V}get interfaces_(){return[f]}}V.constructor_=function(){},V.X=0,V.Y=1,V.Z=2,V.M=3;class q{constructor(){q.constructor_.apply(this,arguments)}create(){1===arguments.length&&(arguments[0]instanceof Array||b(arguments[0],V))}getClass(){return q}get interfaces_(){return[]}}q.constructor_=function(){};class Y{constructor(){Y.constructor_.apply(this,arguments)}filter(t){}getClass(){return Y}get interfaces_(){return[]}}Y.constructor_=function(){};class W{constructor(){W.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===W.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equals(){if(arguments[0]instanceof W){let t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){let e=arguments[0];if(!(e instanceof W))return!1;var t=e;return this.equalsExact(t)}}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(W.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){if(1===arguments.length){let e=arguments[0];var t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){let e=arguments[0],r=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,r)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(t){if(t.getTypeCode()===W.TYPECODE_GEOMETRYCOLLECTION)throw new r("This method does not support GeometryCollection arguments")}equal(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r}norm(){var t=this.copy();return t.normalize(),t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new R(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),a=i.compareTo(o);if(0!==a)return a}return r.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isGeometryCollectionOrDerived(){return this.getTypeCode()===W.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===W.TYPECODE_MULTIPOINT||this.getTypeCode()===W.TYPECODE_MULTILINESTRING||this.getTypeCode()===W.TYPECODE_MULTIPOLYGON}get interfaces_(){return[f,h,d]}getClass(){return W}static hasNonEmptyElements(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}W.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},W.serialVersionUID=0x799ea46522854c00,W.TYPECODE_POINT=0,W.TYPECODE_MULTIPOINT=1,W.TYPECODE_LINESTRING=2,W.TYPECODE_LINEARRING=3,W.TYPECODE_MULTILINESTRING=4,W.TYPECODE_POLYGON=5,W.TYPECODE_MULTIPOLYGON=6,W.TYPECODE_GEOMETRYCOLLECTION=7,W.TYPENAME_POINT="Point",W.TYPENAME_MULTIPOINT="MultiPoint",W.TYPENAME_LINESTRING="LineString",W.TYPENAME_LINEARRING="LinearRing",W.TYPENAME_MULTILINESTRING="MultiLineString",W.TYPENAME_POLYGON="Polygon",W.TYPENAME_MULTIPOLYGON="MultiPolygon",W.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",W.geometryChangedFilter={get interfaces_(){return[Y]},filter(t){t.geometryChangedAction()}};class X{constructor(){X.constructor_.apply(this,arguments)}filter(t){}getClass(){return X}get interfaces_(){return[]}}X.constructor_=function(){};class H{constructor(){H.constructor_.apply(this,arguments)}isInBoundary(t){}getClass(){return H}get interfaces_(){return[]}}class Z{constructor(){Z.constructor_.apply(this,arguments)}isInBoundary(t){return t%2==1}getClass(){return Z}get interfaces_(){return[H]}}Z.constructor_=function(){};class K{constructor(){K.constructor_.apply(this,arguments)}isInBoundary(t){return t>0}getClass(){return K}get interfaces_(){return[H]}}K.constructor_=function(){};class J{constructor(){J.constructor_.apply(this,arguments)}isInBoundary(t){return t>1}getClass(){return J}get interfaces_(){return[H]}}J.constructor_=function(){};class ${constructor(){$.constructor_.apply(this,arguments)}isInBoundary(t){return 1===t}getClass(){return $}get interfaces_(){return[H]}}$.constructor_=function(){},H.Mod2BoundaryNodeRule=Z,H.EndPointBoundaryNodeRule=K,H.MultiValentEndPointBoundaryNodeRule=J,H.MonoValentEndPointBoundaryNodeRule=$,H.constructor_=function(){},H.MOD2_BOUNDARY_RULE=new Z,H.ENDPOINT_BOUNDARY_RULE=new K,H.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new J,H.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new $,H.OGC_SFS_BOUNDARY_RULE=H.MOD2_BOUNDARY_RULE;class Q{constructor(){Q.constructor_.apply(this,arguments)}static isRing(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}static ptNotInList(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(Q.indexOf(n,e)<0)return n}return null}static scroll(t,e){var r=Q.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);G.arraycopy(t,r,n,0,t.length-r),G.arraycopy(t,0,n,t.length-r,r),G.arraycopy(n,0,t,0,t.length)}static equals(){if(2===arguments.length){let e=arguments[0],r=arguments[1];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].equals(r[t]))return!1;return!0}if(3===arguments.length){let e=arguments[0],r=arguments[1],n=arguments[2];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(t=0;t<e.length;t++)if(0!==n.compare(e[t],r[t]))return!1;return!0}}static intersection(t,e){for(var r=new P,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()}static hasRepeatedPoints(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){return Q.hasRepeatedPoints(t)?new P(t,!1).toCoordinateArray():t}static reverse(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}}static removeNull(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;var i=0;for(r=0;r<t.length;r++)null!==t[r]&&(n[i++]=t[r]);return n}static copyDeep(){if(1===arguments.length){let r=arguments[0];for(var t=new Array(r.length).fill(null),e=0;e<r.length;e++)t[e]=new _(r[e]);return t}if(5===arguments.length){let t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4];for(e=0;e<o;e++)n[i+e]=new _(t[r+e])}}static isEqualReversed(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0}static envelope(t){for(var e=new R,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e}static toCoordinateArray(t){return t.toArray(Q.coordArrayType)}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1}static increasingDirection(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1}static compare(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0}static minCoordinate(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e}static extract(t,e,r){e=B.clamp(e,0,t.length);var n=(r=B.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,a=e;a<=r;a++)i[o++]=t[a];return i}getClass(){return Q}get interfaces_(){return[]}}class tt{constructor(){tt.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e;return Q.compare(r,n)}getClass(){return tt}get interfaces_(){return[p]}}tt.constructor_=function(){};class et{constructor(){et.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=Q.compare(r,n);return Q.isEqualReversed(r,n)?0:i}OLDcompare(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=Q.increasingDirection(r),o=Q.increasingDirection(n),a=i>0?0:r.length-1,s=o>0?0:r.length-1,l=0;l<r.length;l++){var u=r[a].compareTo(n[s]);if(0!==u)return u;a+=i,s+=o}return 0}getClass(){return et}get interfaces_(){return[p]}}function rt(){}function nt(){}function it(){}function ot(){this.array_=[],arguments[0]instanceof w&&this.addAll(arguments[0])}et.constructor_=function(){},Q.ForwardComparator=tt,Q.BidirectionalComparator=et,Q.constructor_=function(){},Q.coordArrayType=new Array(0).fill(null),rt.prototype.get=function(){},rt.prototype.put=function(){},rt.prototype.size=function(){},rt.prototype.values=function(){},rt.prototype.entrySet=function(){},nt.prototype=new rt,it.prototype=new w,it.prototype.contains=function(){},ot.prototype=new it,ot.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(this.array_[e]===t)return!0;return!1},ot.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},ot.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ot.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},ot.prototype.size=function(){return this.array_.length},ot.prototype.isEmpty=function(){return 0===this.array_.length},ot.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},ot.prototype.iterator=function(){return new at(this)};var at=function(t){this.hashSet_=t,this.position_=0};at.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new S;return this.hashSet_.array_[this.position_++]},at.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},at.prototype.remove=function(){throw new I};const st=0;function lt(t){return null==t?st:t.color}function ut(t){return null==t?null:t.parent}function ct(t,e){null!==t&&(t.color=e)}function ht(t){return null==t?null:t.left}function ft(t){return null==t?null:t.right}function pt(){this.root_=null,this.size_=0}pt.prototype=new nt,pt.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},pt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:st,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:r,color:st,getValue(){return this.value},getKey(){return this.key}};return n<0?r.left=a:r.right=a,this.fixAfterInsertion(a),this.size_++,null},pt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var e;ut(t)==ht(ut(ut(t)))?1==lt(e=ft(ut(ut(t))))?(ct(ut(t),st),ct(e,st),ct(ut(ut(t)),1),t=ut(ut(t))):(t==ft(ut(t))&&(t=ut(t),this.rotateLeft(t)),ct(ut(t),st),ct(ut(ut(t)),1),this.rotateRight(ut(ut(t)))):1==lt(e=ht(ut(ut(t))))?(ct(ut(t),st),ct(e,st),ct(ut(ut(t)),1),t=ut(ut(t))):(t==ht(ut(t))&&(t=ut(t),this.rotateRight(t)),ct(ut(t),st),ct(ut(ut(t)),1),this.rotateLeft(ut(ut(t))))}this.root_.color=st},pt.prototype.values=function(){var t=new C,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=pt.successor(e));)t.add(e.value);return t},pt.prototype.entrySet=function(){var t=new ot,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=pt.successor(e));)t.add(e);return t},pt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},pt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},pt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},pt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var r=t;null!==e&&r===e.right;)r=e,e=e.parent;return e},pt.prototype.size=function(){return this.size_},pt.prototype.containsKey=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return!0;e=e.right}}return!1};class dt{constructor(){dt.constructor_.apply(this,arguments)}getClass(){return dt}get interfaces_(){return[]}}function gt(){}function yt(){this.array_=[],arguments[0]instanceof w&&this.addAll(arguments[0])}dt.constructor_=function(){},gt.prototype=new it,yt.prototype=new gt,yt.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},yt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},yt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},yt.prototype.remove=function(t){throw new I},yt.prototype.size=function(){return this.array_.length},yt.prototype.isEmpty=function(){return 0===this.array_.length},yt.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},yt.prototype.iterator=function(){return new _t(this)};var mt,_t=function(t){this.treeSet_=t,this.position_=0};function vt(){}_t.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new S;return this.treeSet_.array_[this.position_++]},_t.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},_t.prototype.remove=function(){throw new I},vt.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)return n=function(t,e){return t.compareTo(e)},void i.sort(n);if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else{if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}if(4===arguments.length){for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}}},vt.asList=function(t){for(var e=new C,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};class bt{constructor(){bt.constructor_.apply(this,arguments)}static toDimensionSymbol(t){switch(t){case bt.FALSE:return bt.SYM_FALSE;case bt.TRUE:return bt.SYM_TRUE;case bt.DONTCARE:return bt.SYM_DONTCARE;case bt.P:return bt.SYM_P;case bt.L:return bt.SYM_L;case bt.A:return bt.SYM_A}throw new r("Unknown dimension value: "+t)}static toDimensionValue(t){switch(k.toUpperCase(t)){case bt.SYM_FALSE:return bt.FALSE;case bt.SYM_TRUE:return bt.TRUE;case bt.SYM_DONTCARE:return bt.DONTCARE;case bt.SYM_P:return bt.P;case bt.SYM_L:return bt.L;case bt.SYM_A:return bt.A}throw new r("Unknown dimension symbol: "+t)}getClass(){return bt}get interfaces_(){return[]}}bt.constructor_=function(){},bt.P=0,bt.L=1,bt.A=2,bt.FALSE=-1,bt.TRUE=-2,bt.DONTCARE=-3,bt.SYM_FALSE="F",bt.SYM_TRUE="T",bt.SYM_DONTCARE="*",bt.SYM_P="0",bt.SYM_L="1",bt.SYM_A="2";class xt{constructor(){xt.constructor_.apply(this,arguments)}filter(t){}getClass(){return xt}get interfaces_(){return[]}}xt.constructor_=function(){};class wt{constructor(){wt.constructor_.apply(this,arguments)}filter(t,e){}isDone(){}isGeometryChanged(){}getClass(){return wt}get interfaces_(){return[]}}wt.constructor_=function(){};class Et extends W{constructor(){super(),Et.constructor_.apply(this,arguments)}computeEnvelopeInternal(){for(var t=new R,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t}getArea(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var t=r;if(this._geometries.length!==t._geometries.length)return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].equalsExact(t._geometries[e],n))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();vt.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){for(var t=bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}getTypeCode(){return W.TYPECODE_GEOMETRYCOLLECTION}getDimension(){for(var t=bt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)}compareToSameClass(){if(1===arguments.length){let r=arguments[0];var t=new yt(vt.asList(this._geometries)),e=new yt(vt.asList(r._geometries));return this.compare(t,e)}if(2===arguments.length){let t=arguments[1];for(var r=arguments[0],n=this.getNumGeometries(),i=r.getNumGeometries(),o=0;o<n&&o<i;){var a=this.getGeometryN(o),s=r.getGeometryN(o),l=a.compareToSameClass(s,t);if(0!==l)return l;o++}return o<n?1:o<i?-1:0}}apply(){if(b(arguments[0],X)){let e=arguments[0];for(var t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(b(arguments[0],wt)){let e=arguments[0];if(0===this._geometries.length)return null;for(t=0;t<this._geometries.length&&(this._geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(b(arguments[0],xt)){let e=arguments[0];for(e.filter(this),t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(b(arguments[0],Y)){let e=arguments[0];for(e.filter(this),t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}}getBoundary(){return this.checkNotGeometryCollection(this),m.shouldNeverReachHere(),null}getGeometryType(){return W.TYPENAME_GEOMETRYCOLLECTION}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Et(t,this._factory)}isEmpty(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}getClass(){return Et}get interfaces_(){return[]}}Et.constructor_=function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(W.constructor_.call(this,e),null===t&&(t=[]),W.hasNullElements(t))throw new r("geometries must not contain null elements");this._geometries=t}},Et.serialVersionUID=-0x4f07bcb1f857d800;class Ot extends Et{constructor(){super(),Ot.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?bt.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return W.TYPECODE_MULTILINESTRING}getDimension(){return 1}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)}getBoundary(){return new St(this).getBoundary()}getGeometryType(){return W.TYPENAME_MULTILINESTRING}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Ot(t,this._factory)}getClass(){return Ot}get interfaces_(){return[dt]}}Ot.constructor_=function(){let t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e)},Ot.serialVersionUID=0x7155d2ab4afa8000;class St{constructor(){St.constructor_.apply(this,arguments)}static getBoundary(){return 1===arguments.length?new St(arguments[0]).getBoundary():2===arguments.length?new St(arguments[0],arguments[1]).getBoundary():void 0}boundaryMultiLineString(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)}getBoundary(){return this._geom instanceof jt?this.boundaryLineString(this._geom):this._geom instanceof Ot?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(t){var e=new C;this._endpointMap=new pt;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Q.toCoordinateArray(e)}addEndpoint(t){var e=this._endpointMap.get(t);null===e&&(e=new It,this._endpointMap.put(t,e)),e.count++}getClass(){return St}get interfaces_(){return[]}}St.constructor_=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){let t=arguments[0];St.constructor_.call(this,t,H.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}};class It{constructor(){It.constructor_.apply(this,arguments)}getClass(){return It}get interfaces_(){return[]}}It.constructor_=function(){this.count=null};class Ct{constructor(){Ct.constructor_.apply(this,arguments)}static ofLine(t){var e=t.size();if(e<=1)return 0;var r=0,n=new _;t.getCoordinate(0,n);for(var i=n.x,o=n.y,a=1;a<e;a++){t.getCoordinate(a,n);var s=n.x,l=n.y,u=s-i,c=l-o;r+=Math.sqrt(u*u+c*c),i=s,o=l}return r}getClass(){return Ct}get interfaces_(){return[]}}function Tt(){}function Pt(){}function Rt(){}function Lt(){}function Mt(){}Ct.constructor_=function(){};class Nt{constructor(){Nt.constructor_.apply(this,arguments)}static chars(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return new String(r)}static getStackTrace(){if(1===arguments.length){let r=arguments[0];var t=new Rt,e=new Tt(t);return r.printStackTrace(e),t.toString()}if(2===arguments.length){let e=arguments[0],o=arguments[1];for(var r="",n=new Mt(new Pt(Nt.getStackTrace(e))),i=0;i<o;i++)try{r+=n.readLine()+Nt.NEWLINE}catch(t){if(!(t instanceof Lt))throw t;m.shouldNeverReachHere()}return r}}static split(t,e){for(var r=e.length,n=new C,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);n.add(a),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var s=new Array(n.size()).fill(null),l=0;l<s.length;l++)s[l]=n.get(l);return s}static toString(){if(1===arguments.length&&"number"==typeof arguments[0]){let t=arguments[0];return Nt.SIMPLE_ORDINATE_FORMAT.format(t)}}static spaces(t){return Nt.chars(" ",t)}getClass(){return Nt}get interfaces_(){return[]}}function At(t){this.str=t}Nt.constructor_=function(){},Nt.NEWLINE=G.getProperty("line.separator"),Nt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),At.prototype.append=function(t){this.str+=t},At.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},At.prototype.toString=function(t){return this.str};class kt{constructor(){kt.constructor_.apply(this,arguments)}static copyCoord(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))}static isRing(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,V.X)===t.getOrdinate(e-1,V.X)&&t.getOrdinate(0,V.Y)===t.getOrdinate(e-1,V.Y)}static isEqual(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),o=0;o<r;o++)for(var a=0;a<n;a++){var s=t.getOrdinate(o,a),l=e.getOrdinate(o,a);if(!(t.getOrdinate(o,a)===e.getOrdinate(o,a)||i.isNaN(s)&&i.isNaN(l)))return!1}return!0}static extend(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(kt.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)kt.copy(e,i-1,n,o,1);return n}static reverse(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)kt.swap(t,n,e-n)}static swap(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}}static copy(t,e,r,n,i){for(var o=0;o<i;o++)kt.copyCoord(t,e+o,r,n+o)}static toString(){if(1===arguments.length&&b(arguments[0],V)){let o=arguments[0];var t=o.size();if(0===t)return"()";var e=o.getDimension(),r=new At;r.append("(");for(var n=0;n<t;n++){n>0&&r.append(" ");for(var i=0;i<e;i++)i>0&&r.append(","),r.append(Nt.toString(o.getOrdinate(n,i)))}return r.append(")"),r.toString()}}static ensureValidRing(t,e){var r=e.size();return 0===r?e:r<=3?kt.createClosedRing(t,e,4):e.getOrdinate(0,V.X)===e.getOrdinate(r-1,V.X)&&e.getOrdinate(0,V.Y)===e.getOrdinate(r-1,V.Y)?e:kt.createClosedRing(t,e,r+1)}static createClosedRing(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();kt.copy(e,0,n,0,i);for(var o=i;o<r;o++)kt.copy(e,0,n,o,1);return n}getClass(){return kt}get interfaces_(){return[]}}kt.constructor_=function(){};class jt extends W{constructor(){super(),jt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this.isEmpty()?new R:this._points.expandEnvelope(new R)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var t=r;if(this._points.size()!==t._points.size())return!1;for(var e=0;e<this._points.size();e++)if(!this.equal(this._points.getCoordinate(e),t._points.getCoordinate(e),n))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var r=this._points.copy();kt.reverse(r),this._points=r}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?bt.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return W.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return Ct.ofLine(this._points)}getNumPoints(){return this._points.size()}reverse(){var t=this._points.copy();return kt.reverse(t),this.getFactory().createLineString(t)}compareToSameClass(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length)return t=arguments[0],arguments[1].compare(this._points,t._points)}apply(){if(b(arguments[0],X)){let e=arguments[0];for(var t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t))}else if(b(arguments[0],wt)){let e=arguments[0];if(0===this._points.size())return null;for(t=0;t<this._points.size()&&(e.filter(this._points,t),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else(b(arguments[0],xt)||b(arguments[0],Y))&&arguments[0].filter(this)}getBoundary(){return new St(this).getBoundary()}isEquivalentClass(t){return t instanceof jt}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return W.TYPENAME_LINESTRING}copy(){return new jt(this._points.copy(),this._factory)}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new r("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}getClass(){return jt}get interfaces_(){return[dt]}}jt.constructor_=function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];W.constructor_.call(this,e),this.init(t)}},jt.serialVersionUID=0x2b2b51ba435c8e00;class Ft{constructor(){Ft.constructor_.apply(this,arguments)}getClass(){return Ft}get interfaces_(){return[]}}Ft.constructor_=function(){};class Dt extends W{constructor(){super(),Dt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){if(this.isEmpty())return new R;var t=new R;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return bt.FALSE}getTypeCode(){return W.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}reverse(){return this.copy()}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return t=arguments[0],arguments[1].compare(this._coordinates,t._coordinates)}apply(){if(b(arguments[0],X)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(b(arguments[0],wt)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(b(arguments[0],xt)||b(arguments[0],Y))&&arguments[0].filter(this)}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return W.TYPENAME_POINT}copy(){return new Dt(this._coordinates.copy(),this._factory)}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),m.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}getClass(){return Dt}get interfaces_(){return[Ft]}}Dt.constructor_=function(){this._coordinates=null;let t=arguments[0],e=arguments[1];W.constructor_.call(this,e),this.init(t)},Dt.serialVersionUID=0x44077bad161cbc00;class Gt{constructor(){Gt.constructor_.apply(this,arguments)}static ofRing(){if(arguments[0]instanceof Array){let t=arguments[0];return Math.abs(Gt.ofRingSigned(t))}if(b(arguments[0],V)){let t=arguments[0];return Math.abs(Gt.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){let o=arguments[0];if(o.length<3)return 0;for(var t=0,e=o[0].x,r=1;r<o.length-1;r++){var n=o[r].x-e,i=o[r+1].y;t+=n*(o[r-1].y-i)}return t/2}if(b(arguments[0],V)){let n=arguments[0];var o=n.size();if(o<3)return 0;var a=new _,s=new _,l=new _;for(n.getCoordinate(0,s),n.getCoordinate(1,l),e=s.x,l.x-=e,t=0,r=1;r<o-1;r++)a.y=s.y,s.x=l.x,s.y=l.y,n.getCoordinate(r+1,l),l.x-=e,t+=s.x*(a.y-l.y);return t/2}}getClass(){return Gt}get interfaces_(){return[]}}Gt.constructor_=function(){};class Ut{constructor(){Ut.constructor_.apply(this,arguments)}getClass(){return Ut}get interfaces_(){return[]}}Ut.constructor_=function(){};class Bt extends W{constructor(){super(),Bt.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t}getArea(){var t=0;t+=Gt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Gt.ofRing(this._holes[e].getCoordinateSequence());return t}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){if((o=t.getX(r))!==e.getMinX()&&o!==e.getMaxX())return!1;if((a=t.getY(r))!==e.getMinY()&&a!==e.getMaxY())return!1}var n=t.getX(0),i=t.getY(0);for(r=1;r<=4;r++){var o,a;if((o=t.getX(r))!==n==((a=t.getY(r))!==i))return!1;n=o,i=a}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var t=i,e=this._shell,r=t._shell;if(!e.equalsExact(r,o))return!1;if(this._holes.length!==t._holes.length)return!1;for(var n=0;n<this._holes.length;n++)if(!this._holes[n].equalsExact(t._holes[n],o))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);vt.sort(this._holes)}else if(2===arguments.length){let t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var e=new Array(t.getCoordinates().length-1).fill(null);G.arraycopy(t.getCoordinates(),0,e,0,e.length);var r=Q.minCoordinate(t.getCoordinates());Q.scroll(e,r),G.arraycopy(e,0,t.getCoordinates(),0,e.length),t.getCoordinates()[e.length]=e[0],D.isCCW(t.getCoordinates())===n&&Q.reverse(t.getCoordinates())}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getTypeCode(){return W.TYPECODE_POLYGON}getDimension(){return 2}getLength(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}reverse(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t}convexHull(){return this.getExteriorRing().convexHull()}compareToSameClass(){if(1===arguments.length){let r=arguments[0];var t=this._shell,e=r._shell;return t.compareToSameClass(e)}if(2===arguments.length){let c=arguments[1];var r=arguments[0],n=(t=this._shell,e=r._shell,t.compareToSameClass(e,c));if(0!==n)return n;for(var i=this.getNumInteriorRing(),o=r.getNumInteriorRing(),a=0;a<i&&a<o;){var s=this.getInteriorRingN(a),l=r.getInteriorRingN(a),u=s.compareToSameClass(l,c);if(0!==u)return u;a++}return a<i?1:a<o?-1:0}}apply(){if(b(arguments[0],X)){let e=arguments[0];this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(b(arguments[0],wt)){let e=arguments[0];if(this._shell.apply(e),!e.isDone())for(t=0;t<this._holes.length&&(this._holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(b(arguments[0],xt))arguments[0].filter(this);else if(b(arguments[0],Y)){let e=arguments[0];for(e.filter(this),this._shell.apply(e),t=0;t<this._holes.length;t++)this._holes[t].apply(e)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return W.TYPENAME_POLYGON}copy(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),r=0;r<this._holes.length;r++)e[r]=this._holes[r].copy();return new Bt(t,e,this._factory)}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}getClass(){return Bt}get interfaces_(){return[Ut]}}Bt.constructor_=function(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],n=arguments[2];if(W.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),W.hasNullElements(e))throw new r("holes must not contain null elements");if(t.isEmpty()&&W.hasNonEmptyElements(e))throw new r("shell is empty but holes are not");this._shell=t,this._holes=e},Bt.serialVersionUID=-0x307ffefd8dc97200;class zt extends Et{constructor(){super(),zt.constructor_.apply(this,arguments)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){let t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return bt.FALSE}getTypeCode(){return W.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return W.TYPENAME_MULTIPOINT}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new zt(t,this._factory)}getClass(){return zt}get interfaces_(){return[Ft]}}zt.constructor_=function(){let t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e)},zt.serialVersionUID=-0x6fb1ed4162e0fc00;class Vt extends jt{constructor(){super(),Vt.constructor_.apply(this,arguments)}getBoundaryDimension(){return bt.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}getTypeCode(){return W.TYPECODE_LINEARRING}reverse(){var t=this._points.copy();return kt.reverse(t),this.getFactory().createLinearRing(t)}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new r("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Vt.MINIMUM_VALID_SIZE)throw new r("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return W.TYPENAME_LINEARRING}copy(){return new Vt(this._points.copy(),this._factory)}getClass(){return Vt}get interfaces_(){return[]}}Vt.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof ae){let t=arguments[0],e=arguments[1];Vt.constructor_.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(b(arguments[0],V)&&arguments[1]instanceof ae){let t=arguments[0],e=arguments[1];jt.constructor_.call(this,t,e),this.validateConstruction()}},Vt.MINIMUM_VALID_SIZE=4,Vt.serialVersionUID=-0x3b229e262367a600;class qt extends Et{constructor(){super(),qt.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return W.TYPECODE_MULTIPOLYGON}getDimension(){return 2}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new C,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}getGeometryType(){return W.TYPENAME_MULTIPOLYGON}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new qt(t,this._factory)}getClass(){return qt}get interfaces_(){return[Ut]}}qt.constructor_=function(){let t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e)},qt.serialVersionUID=-0x7a5aa1369171980;class Yt{constructor(){Yt.constructor_.apply(this,arguments)}setCopyUserData(t){this._isUserDataCopied=t}edit(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r}editInternal(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Et?this.editGeometryCollection(t,e):t instanceof Bt?this.editPolygon(t,e):t instanceof Dt||t instanceof jt?e.edit(t,this._factory):(m.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)}editGeometryCollection(t,e){for(var r=e.edit(t,this._factory),n=new C,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===zt?this._factory.createMultiPoint(n.toArray([])):r.getClass()===Ot?this._factory.createMultiLineString(n.toArray([])):r.getClass()===qt?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))}editPolygon(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon()),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new C,o=0;o<r.getNumInteriorRing();o++){var a=this.edit(r.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(n,i.toArray([]))}getClass(){return Yt}get interfaces_(){return[]}}function Wt(){}Yt.GeometryEditorOperation=Wt;class Xt{constructor(){Xt.constructor_.apply(this,arguments)}edit(t,e){return t}getClass(){return Xt}get interfaces_(){return[Wt]}}Xt.constructor_=function(){};class Ht{constructor(){Ht.constructor_.apply(this,arguments)}edit(t,e){var r=this.edit(t.getCoordinates(),t);return t instanceof Vt?null===r?e.createLinearRing():e.createLinearRing(r):t instanceof jt?null===r?e.createLineString():e.createLineString(r):t instanceof Dt?null===r||0===r.length?e.createPoint():e.createPoint(r[0]):t}getClass(){return Ht}get interfaces_(){return[Wt]}}Ht.constructor_=function(){};class Zt{constructor(){Zt.constructor_.apply(this,arguments)}edit(t,e){return t instanceof Vt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof jt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Dt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t}getClass(){return Zt}get interfaces_(){return[Wt]}}Zt.constructor_=function(){},Yt.NoOpGeometryOperation=Xt,Yt.CoordinateOperation=Ht,Yt.CoordinateSequenceOperation=Zt,Yt.constructor_=function(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._factory=t}};class Kt{constructor(){Kt.constructor_.apply(this,arguments)}setOrdinate(t,e,n){switch(e){case V.X:this._coordinates[t].x=n;break;case V.Y:this._coordinates[t].y=n;break;case V.Z:this._coordinates[t].z=n;break;default:throw new r("invalid ordinateIndex")}}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case V.X:return this._coordinates[t].x;case V.Y:return this._coordinates[t].y;case V.Z:return this._coordinates[t].z}return i.NaN}getCoordinate(){if(1===arguments.length){let t=arguments[0];return this._coordinates[t]}if(2===arguments.length){let t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}}getCoordinateCopy(t){return new _(this._coordinates[t])}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}expandEnvelope(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Kt(t,this._dimension)}toString(){if(this._coordinates.length>0){var t=new At(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}getClass(){return Kt}get interfaces_(){return[V,d]}}Kt.constructor_=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];Kt.constructor_.call(this,t,3)}else if(Number.isInteger(arguments[0])){let e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new _}else if(b(arguments[0],V)){let e=arguments[0];if(null===e)return this._coordinates=new Array(0).fill(null),null;for(this._dimension=e.getDimension(),this._coordinates=new Array(e.size()).fill(null),t=0;t<this._coordinates.length;t++)this._coordinates[t]=e.getCoordinateCopy(t)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1];this._coordinates=t,this._dimension=e,null===t&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let e=arguments[0],r=arguments[1];for(this._coordinates=new Array(e).fill(null),this._dimension=r,t=0;t<e;t++)this._coordinates[t]=new _}},Kt.serialVersionUID=-0xcb44a778db18e00;class Jt{constructor(){Jt.constructor_.apply(this,arguments)}static instance(){return Jt.instanceObject}readResolve(){return Jt.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Kt(arguments[0]);if(b(arguments[0],V))return new Kt(arguments[0])}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Kt(t):new Kt(t,e)}}getClass(){return Jt}get interfaces_(){return[q,d]}}Jt.constructor_=function(){},Jt.serialVersionUID=-0x38e49fa6cf6f2e00,Jt.instanceObject=new Jt;var $t=Object.defineProperty,Qt=function(t,e){function r(t){if(!this||this.constructor!==r)return new r(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&function(t){this.add?t.forEach(this.add,this):t.forEach((function(t){this.set(t[0],t[1])}),this)}.call(this,t)}return e||$t(t,"size",{get:ee}),t.constructor=r,r.prototype=t,r}({delete:function(t){return this.has(t)&&(this._keys.splice(mt,1),this._values.splice(mt,1),this._itp.forEach((function(t){mt<t[0]&&t[0]--}))),mt>-1},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(mt=t.length;mt--&&(r=t[mt])!==(n=e)&&(r==r||n==n););else mt=t.indexOf(e);var r,n;return mt>-1}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[mt]:void 0},set:function(t,e){return this.has(t)?this._values[mt]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return te(this._itp,this._keys)},values:function(){return te(this._itp,this._values)},entries:function(){return te(this._itp,this._keys,this._values)},forEach:function(t,e){for(var r=this.entries();;){var n=r.next();if(n.done)break;t.call(e,n.value[1],n.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}});function te(t,e,r){var n=[0],i=!1;return t.push(n),{next:function(){var o,a=n[0];return!i&&a<e.length?(o=r?[e[a],r[a]]:e[a],n[0]++):(i=!0,t.splice(t.indexOf(n),1)),{done:i,value:o}}}}function ee(){return this._values.length}let re="undefined"!=typeof Map&&Map.prototype.values?Map:Qt;function ne(){this.map_=new re}ne.prototype=new rt,ne.prototype.get=function(t){return this.map_.get(t)||null},ne.prototype.put=function(t,e){return this.map_.set(t,e),e},ne.prototype.values=function(){const t=new C,e=this.map_.values();let r=e.next();for(;!r.done;)t.add(r.value),r=e.next();return t},ne.prototype.entrySet=function(){const t=new ot;return this.map_.entries().forEach(e=>t.add(e)),t},ne.prototype.size=function(){return this.map_.size()};class ie{constructor(){ie.constructor_.apply(this,arguments)}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof ie))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new A(r).compareTo(new A(n))}getScale(){return this._scale}isFloating(){return this._modelType===ie.FLOATING||this._modelType===ie.FLOATING_SINGLE}getType(){return this._modelType}toString(){var t="UNKNOWN";return this._modelType===ie.FLOATING?t="Floating":this._modelType===ie.FLOATING_SINGLE?t="Floating-Single":this._modelType===ie.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){let t=arguments[0];return i.isNaN(t)||this._modelType===ie.FLOATING_SINGLE?t:this._modelType===ie.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof _){let t=arguments[0];if(this._modelType===ie.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){var t=16;return this._modelType===ie.FLOATING?t=16:this._modelType===ie.FLOATING_SINGLE?t=6:this._modelType===ie.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}getClass(){return ie}get interfaces_(){return[d,h]}}class oe{constructor(){oe.constructor_.apply(this,arguments)}readResolve(){return oe.nameToTypeMap.get(this._name)}toString(){return this._name}getClass(){return oe}get interfaces_(){return[d]}}oe.constructor_=function(){this._name=null;let t=arguments[0];this._name=t,oe.nameToTypeMap.put(t,this)},oe.serialVersionUID=-552860263173159e4,oe.nameToTypeMap=new ne,ie.Type=oe,ie.constructor_=function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=ie.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof oe){let t=arguments[0];this._modelType=t,t===ie.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){let t=arguments[0];this._modelType=ie.FIXED,this.setScale(t)}else if(arguments[0]instanceof ie){let t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}},ie.serialVersionUID=0x6bee6404e9a25c00,ie.FIXED=new oe("FIXED"),ie.FLOATING=new oe("FLOATING"),ie.FLOATING_SINGLE=new oe("FLOATING SINGLE"),ie.maximumPreciseValue=9007199254740992;class ae{constructor(){ae.constructor_.apply(this,arguments)}static toMultiPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return Jt.instance()}static toMultiLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new _(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new _(t.getMinX(),t.getMinY()),new _(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new _(t.getMinX(),t.getMinY()),new _(t.getMinX(),t.getMaxY()),new _(t.getMaxX(),t.getMaxY()),new _(t.getMaxX(),t.getMinY()),new _(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(b(arguments[0],V))return new jt(arguments[0],this)}}createMultiLineString(){return 0===arguments.length?new Ot(null,this):1===arguments.length?new Ot(arguments[0],this):void 0}buildGeometry(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(r=!0),o instanceof Et&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(ae.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Bt)return this.createMultiPolygon(ae.toPolygonArray(t));if(s instanceof jt)return this.createMultiLineString(ae.toLineStringArray(t));if(s instanceof Dt)return this.createMultiPoint(ae.toPointArray(t));m.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof _){let t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(b(arguments[0],V))return new Dt(arguments[0],this)}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(b(arguments[0],V)){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Vt){let t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length)return new Bt(arguments[0],arguments[1],this)}getSRID(){return this._SRID}createGeometryCollection(){return 0===arguments.length?new Et(null,this):1===arguments.length?new Et(arguments[0],this):void 0}createGeometry(t){return new Yt(this).edit(t,new class{edit(){if(2===arguments.length&&arguments[1]instanceof W&&b(arguments[0],V)){let t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(b(arguments[0],V))return new Vt(arguments[0],this)}}createMultiPolygon(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0}createMultiPoint(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new zt(arguments[0],this);if(b(arguments[0],V)){let n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(n.size()).fill(null),e=0;e<n.size();e++){var r=this.getCoordinateSequenceFactory().create(1,n.getDimension());kt.copy(n,e,r,0,1),t[e]=this.createPoint(r)}return this.createMultiPoint(t)}}}getClass(){return ae}get interfaces_(){return[d]}}ae.constructor_=function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)ae.constructor_.call(this,new ie,0);else if(1===arguments.length){if(b(arguments[0],q)){let t=arguments[0];ae.constructor_.call(this,new ie,0,t)}else if(arguments[0]instanceof ie){let t=arguments[0];ae.constructor_.call(this,t,0,ae.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];ae.constructor_.call(this,t,e,ae.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=r,this._SRID=e}},ae.serialVersionUID=-0x5ea75f2051eeb400;const se={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};class le{constructor(t){this.geometryFactory=t||new ae,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=se.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=se.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],ce[r]&&(e=ce[r].call(this,n))),void 0===e)throw new Error("Could not parse WKT "+t);return e}write(t){return this.extractGeometry(t)}extractGeometry(t){var e=t.getGeometryType().toLowerCase();if(!ue[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+ue[e].call(this,t)+")"}}const ue={coordinate:t=>t.x+" "+t.y,point(t){return ue.coordinate.call(this,t._coordinates._coordinates[0])},multipoint(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+ue.point.call(this,t._geometries[r])+")");return e.join(",")},linestring(t){var e=[];for(let r=0,n=t._points._coordinates.length;r<n;++r)e.push(ue.coordinate.call(this,t._points._coordinates[r]));return e.join(",")},linearring(t){var e=[];for(let r=0,n=t._points._coordinates.length;r<n;++r)e.push(ue.coordinate.call(this,t._points._coordinates[r]));return e.join(",")},multilinestring(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+ue.linestring.call(this,t._geometries[r])+")");return e.join(",")},polygon(t){var e=[];e.push("("+ue.linestring.call(this,t._shell)+")");for(let r=0,n=t._holes.length;r<n;++r)e.push("("+ue.linestring.call(this,t._holes[r])+")");return e.join(",")},multipolygon(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+ue.polygon.call(this,t._geometries[r])+")");return e.join(",")},geometrycollection(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},ce={coord(t){var e=t.trim().split(se.spaces),r=new _(Number.parseFloat(e[0]),Number.parseFloat(e[1]));return this.precisionModel.makePrecise(r),r},point(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(ce.coord.call(this,t))},multipoint(t){if(void 0===t)return this.geometryFactory.createMultiPoint();var e,r=t.trim().split(","),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace(se.trimParens,"$1"),n.push(ce.point.call(this,e));return this.geometryFactory.createMultiPoint(n)},linestring(t){if(void 0===t)return this.geometryFactory.createLineString();var e=t.trim().split(","),r=[];for(let t=0,n=e.length;t<n;++t)r.push(ce.coord.call(this,e[t]));return this.geometryFactory.createLineString(r)},linearring(t){if(void 0===t)return this.geometryFactory.createLinearRing();var e=t.trim().split(","),r=[];for(let t=0,n=e.length;t<n;++t)r.push(ce.coord.call(this,e[t]));return this.geometryFactory.createLinearRing(r)},multilinestring(t){if(void 0===t)return this.geometryFactory.createMultiLineString();var e,r=t.trim().split(se.parenComma),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace(se.trimParens,"$1"),n.push(ce.linestring.call(this,e));return this.geometryFactory.createMultiLineString(n)},polygon(t){if(void 0===t)return this.geometryFactory.createPolygon();var e,r,n,i,o=t.trim().split(se.parenComma),a=[];for(let t=0,s=o.length;t<s;++t)e=o[t].replace(se.trimParens,"$1"),r=ce.linestring.call(this,e),n=this.geometryFactory.createLinearRing(r._points),0===t?i=n:a.push(n);return this.geometryFactory.createPolygon(i,a)},multipolygon(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();var e,r=t.trim().split(se.doubleParenComma),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace(se.trimParens,"$1"),n.push(ce.polygon.call(this,e));return this.geometryFactory.createMultiPolygon(n)},geometrycollection(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[];for(let t=0,n=e.length;t<n;++t)r.push(this.read(e[t]));return this.geometryFactory.createGeometryCollection(r)}};class he{constructor(t){this.parser=new le(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class fe{constructor(){fe.constructor_.apply(this,arguments)}static computeEdgeDistance(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=n>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return m.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return m.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){var t=new At;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){let t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){let e=arguments[0];for(var t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==fe.NO_INTERSECTION}getEdgeDistance(t,e){return fe.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===fe.COLLINEAR_INTERSECTION}toString(){return he.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+he.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}getClass(){return fe}get interfaces_(){return[]}}fe.constructor_=function(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new _,this._intPt[1]=new _,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},fe.DONT_INTERSECT=0,fe.DO_INTERSECT=1,fe.COLLINEAR=2,fe.NO_INTERSECTION=0,fe.POINT_INTERSECTION=1,fe.COLLINEAR_INTERSECTION=2;class pe extends fe{constructor(){super(),pe.constructor_.apply(this,arguments)}static nearestEndpoint(t,e,r,n){var i=t,o=z.pointToSegment(t,r,n),a=z.pointToSegment(e,r,n);return a<o&&(o=a,i=e),(a=z.pointToSegment(r,t,e))<o&&(o=a,i=r),(a=z.pointToSegment(n,t,e))<o&&(o=a,i=n),i}isInSegmentEnvelopes(t){var e=new R(this._inputLines[0][0],this._inputLines[0][1]),r=new R(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{let t=arguments[0],e=arguments[1],r=arguments[2];if(this._isProper=!1,R.intersects(e,r,t)&&0===D.index(e,r,t)&&0===D.index(r,e,t))return this._isProper=!0,(t.equals(e)||t.equals(r))&&(this._isProper=!1),this._result=fe.POINT_INTERSECTION,null;this._result=fe.NO_INTERSECTION}}normalizeToMinimum(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y}safeHCoordinateIntersection(t,e,r,n){var i=null;try{i=U.intersection(t,e,r,n)}catch(o){if(!(o instanceof M))throw o;i=pe.nearestEndpoint(t,e,r,n)}return i}intersection(t,e,r,n){var i=this.intersectionWithNormalization(t,e,r,n);return this.isInSegmentEnvelopes(i)||(i=new _(pe.nearestEndpoint(t,e,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}smallestInAbsValue(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i}checkDD(t,e,r,n,i){var o=F.intersection(t,e,r,n),a=this.isInSegmentEnvelopes(o);G.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&G.out.println("Distance = "+i.distance(o))}intersectionWithNormalization(t,e,r,n){var i=new _(t),o=new _(e),a=new _(r),s=new _(n),l=new _;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u}computeCollinearIntersection(t,e,r,n){var i=R.intersects(t,e,r),o=R.intersects(t,e,n),a=R.intersects(r,n,t),s=R.intersects(r,n,e);return i&&o?(this._intPt[0]=r,this._intPt[1]=n,fe.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,fe.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||s?fe.COLLINEAR_INTERSECTION:fe.POINT_INTERSECTION):i&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||a?fe.COLLINEAR_INTERSECTION:fe.POINT_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||i||s?fe.COLLINEAR_INTERSECTION:fe.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||i||a?fe.COLLINEAR_INTERSECTION:fe.POINT_INTERSECTION):fe.NO_INTERSECTION}normalizeToEnvCentre(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>u?o:u)+(s<h?s:h))/2,d=((a>c?a:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y}computeIntersect(t,e,r,n){if(this._isProper=!1,!R.intersects(t,e,r,n))return fe.NO_INTERSECTION;var i=D.index(t,e,r),o=D.index(t,e,n);if(i>0&&o>0||i<0&&o<0)return fe.NO_INTERSECTION;var a=D.index(r,n,t),s=D.index(r,n,e);return a>0&&s>0||a<0&&s<0?fe.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,r,n):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(r)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:0===i?this._intPt[0]=new _(r):0===o?this._intPt[0]=new _(n):0===a?this._intPt[0]=new _(t):0===s&&(this._intPt[0]=new _(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,r,n)),fe.POINT_INTERSECTION)}getClass(){return pe}get interfaces_(){return[]}}pe.constructor_=function(){};class de{constructor(){de.constructor_.apply(this,arguments)}static midPoint(t,e){return new _((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof de){let r=arguments[0];var t=D.index(this.p0,this.p1,r.p0),e=D.index(this.p0,this.p1,r.p1);return t>=0&&e>=0||t<=0&&e<=0?Math.max(t,e):0}if(arguments[0]instanceof _){let t=arguments[0];return D.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof de))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){var e=new pe;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof _){let r=arguments[0];if(r.equals(this.p0)||r.equals(this.p1))return new _(r);var t=this.projectionFactor(r),e=new _;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}if(arguments[0]instanceof de){let t=arguments[0];var r=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(r>=1&&n>=1)return null;if(r<=0&&n<=0)return null;var i=this.project(t.p0);r<0&&(i=this.p0),r>1&&(i=this.p1);var o=this.project(t.p1);return n<0&&(o=this.p0),n>1&&(o=this.p1),new de(i,o)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return z.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return de.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?i.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n}closestPoints(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=i.MAX_VALUE,o=null,a=this.closestPoint(t.p0);n=a.distance(t.p0),r[0]=a,r[1]=t.p0;var s=this.closestPoint(t.p1);(o=s.distance(t.p1))<n&&(n=o,r[0]=s,r[1]=t.p1);var l=t.closestPoint(this.p0);(o=l.distance(this.p0))<n&&(n=o,r[0]=this.p0,r[1]=l);var u=t.closestPoint(this.p1);return(o=u.distance(this.p1))<n&&(n=o,r[0]=this.p1,r[1]=u),r}closestPoint(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)}reverse(){var t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){try{return U.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof M))throw t}return null}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new _(r-l,n+s)}setCoordinates(){if(1===arguments.length){let t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||i.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}distance(){if(arguments[0]instanceof de){let t=arguments[0];return z.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof _){let t=arguments[0];return z.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){var e=new _;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=java.lang.Double.doubleToLongBits(this.p1.x);return r^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^Math.trunc(r)^Math.trunc(r>>32)}getClass(){return de}get interfaces_(){return[h,d]}}de.constructor_=function(){if(this.p0=null,this.p1=null,0===arguments.length)de.constructor_.call(this,new _,new _);else if(1===arguments.length){let t=arguments[0];de.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];de.constructor_.call(this,new _(t,e),new _(r,n))}},de.serialVersionUID=0x2d2172135f411c00;class ge{constructor(){ge.constructor_.apply(this,arguments)}static toLocationSymbol(t){switch(t){case ge.EXTERIOR:return"e";case ge.BOUNDARY:return"b";case ge.INTERIOR:return"i";case ge.NONE:return"-"}throw new r("Unknown location value: "+t)}getClass(){return ge}get interfaces_(){return[]}}ge.constructor_=function(){},ge.INTERIOR=0,ge.BOUNDARY=1,ge.EXTERIOR=2,ge.NONE=-1;class ye{constructor(){ye.constructor_.apply(this,arguments)}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return e===bt.SYM_DONTCARE||e===bt.SYM_TRUE&&(t>=0||t===bt.TRUE)||e===bt.SYM_FALSE&&t===bt.FALSE||e===bt.SYM_P&&t===bt.P||e===bt.SYM_L&&t===bt.L||e===bt.SYM_A&&t===bt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){let t=arguments[1];return new ye(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===bt.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])||ye.isTrue(this._matrix[ge.INTERIOR][ge.BOUNDARY])||ye.isTrue(this._matrix[ge.BOUNDARY][ge.INTERIOR])||ye.isTrue(this._matrix[ge.BOUNDARY][ge.BOUNDARY]))&&this._matrix[ge.EXTERIOR][ge.INTERIOR]===bt.FALSE&&this._matrix[ge.EXTERIOR][ge.BOUNDARY]===bt.FALSE}isCoveredBy(){return(ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])||ye.isTrue(this._matrix[ge.INTERIOR][ge.BOUNDARY])||ye.isTrue(this._matrix[ge.BOUNDARY][ge.INTERIOR])||ye.isTrue(this._matrix[ge.BOUNDARY][ge.BOUNDARY]))&&this._matrix[ge.INTERIOR][ge.EXTERIOR]===bt.FALSE&&this._matrix[ge.BOUNDARY][ge.EXTERIOR]===bt.FALSE}set(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<n.length;t++){var e=Math.trunc(t/3),r=t%3;this._matrix[e][r]=bt.toDimensionValue(n.charAt(t))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]=r}}isContains(){return ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])&&this._matrix[ge.EXTERIOR][ge.INTERIOR]===bt.FALSE&&this._matrix[ge.EXTERIOR][ge.BOUNDARY]===bt.FALSE}setAtLeast(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<n.length;t++){var e=Math.trunc(t/3),r=t%3;this.setAtLeast(e,r,bt.toDimensionValue(n.charAt(t)))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]<r&&(this._matrix[t][e]=r)}}setAtLeastIfValid(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)}isWithin(){return ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])&&this._matrix[ge.INTERIOR][ge.EXTERIOR]===bt.FALSE&&this._matrix[ge.BOUNDARY][ge.EXTERIOR]===bt.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===bt.A&&e===bt.A||t===bt.L&&e===bt.L||t===bt.L&&e===bt.A||t===bt.P&&e===bt.A||t===bt.P&&e===bt.L)&&this._matrix[ge.INTERIOR][ge.INTERIOR]===bt.FALSE&&(ye.isTrue(this._matrix[ge.INTERIOR][ge.BOUNDARY])||ye.isTrue(this._matrix[ge.BOUNDARY][ge.INTERIOR])||ye.isTrue(this._matrix[ge.BOUNDARY][ge.BOUNDARY]))}isOverlaps(t,e){return t===bt.P&&e===bt.P||t===bt.A&&e===bt.A?ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])&&ye.isTrue(this._matrix[ge.INTERIOR][ge.EXTERIOR])&&ye.isTrue(this._matrix[ge.EXTERIOR][ge.INTERIOR]):t===bt.L&&e===bt.L&&1===this._matrix[ge.INTERIOR][ge.INTERIOR]&&ye.isTrue(this._matrix[ge.INTERIOR][ge.EXTERIOR])&&ye.isTrue(this._matrix[ge.EXTERIOR][ge.INTERIOR])}isEquals(t,e){return t===e&&ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])&&this._matrix[ge.INTERIOR][ge.EXTERIOR]===bt.FALSE&&this._matrix[ge.BOUNDARY][ge.EXTERIOR]===bt.FALSE&&this._matrix[ge.EXTERIOR][ge.INTERIOR]===bt.FALSE&&this._matrix[ge.EXTERIOR][ge.BOUNDARY]===bt.FALSE}toString(){for(var t=new At("123456789"),e=0;e<3;e++)for(var r=0;r<3;r++)t.setCharAt(3*e+r,bt.toDimensionSymbol(this._matrix[e][r]));return t.toString()}setAll(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this._matrix[e][r]=t}get(t,e){return this._matrix[t][e]}transpose(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new r("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!ye.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}add(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this.setAtLeast(e,r,t.get(e,r))}isDisjoint(){return this._matrix[ge.INTERIOR][ge.INTERIOR]===bt.FALSE&&this._matrix[ge.INTERIOR][ge.BOUNDARY]===bt.FALSE&&this._matrix[ge.BOUNDARY][ge.INTERIOR]===bt.FALSE&&this._matrix[ge.BOUNDARY][ge.BOUNDARY]===bt.FALSE}isCrosses(t,e){return t===bt.P&&e===bt.L||t===bt.P&&e===bt.A||t===bt.L&&e===bt.A?ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])&&ye.isTrue(this._matrix[ge.INTERIOR][ge.EXTERIOR]):t===bt.L&&e===bt.P||t===bt.A&&e===bt.P||t===bt.A&&e===bt.L?ye.isTrue(this._matrix[ge.INTERIOR][ge.INTERIOR])&&ye.isTrue(this._matrix[ge.EXTERIOR][ge.INTERIOR]):t===bt.L&&e===bt.L&&0===this._matrix[ge.INTERIOR][ge.INTERIOR]}getClass(){return ye}get interfaces_(){return[f]}}ye.constructor_=function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(bt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){let t=arguments[0];ye.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof ye){let t=arguments[0];ye.constructor_.call(this),this._matrix[ge.INTERIOR][ge.INTERIOR]=t._matrix[ge.INTERIOR][ge.INTERIOR],this._matrix[ge.INTERIOR][ge.BOUNDARY]=t._matrix[ge.INTERIOR][ge.BOUNDARY],this._matrix[ge.INTERIOR][ge.EXTERIOR]=t._matrix[ge.INTERIOR][ge.EXTERIOR],this._matrix[ge.BOUNDARY][ge.INTERIOR]=t._matrix[ge.BOUNDARY][ge.INTERIOR],this._matrix[ge.BOUNDARY][ge.BOUNDARY]=t._matrix[ge.BOUNDARY][ge.BOUNDARY],this._matrix[ge.BOUNDARY][ge.EXTERIOR]=t._matrix[ge.BOUNDARY][ge.EXTERIOR],this._matrix[ge.EXTERIOR][ge.INTERIOR]=t._matrix[ge.EXTERIOR][ge.INTERIOR],this._matrix[ge.EXTERIOR][ge.BOUNDARY]=t._matrix[ge.EXTERIOR][ge.BOUNDARY],this._matrix[ge.EXTERIOR][ge.EXTERIOR]=t._matrix[ge.EXTERIOR][ge.EXTERIOR]}};class me{constructor(){me.constructor_.apply(this,arguments)}static toDegrees(t){return 180*t/Math.PI}static normalize(t){for(;t>Math.PI;)t-=me.PI_TIMES_2;for(;t<=-Math.PI;)t+=me.PI_TIMES_2;return t}static angle(){if(1===arguments.length){let t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){let r=arguments[0],n=arguments[1];var t=n.x-r.x,e=n.y-r.y;return Math.atan2(e,t)}}static isAcute(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0}static isObtuse(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0}static interiorAngle(t,e,r){var n=me.angle(e,t),i=me.angle(e,r);return Math.abs(i-n)}static normalizePositive(t){if(t<0){for(;t<0;)t+=me.PI_TIMES_2;t>=me.PI_TIMES_2&&(t=0)}else{for(;t>=me.PI_TIMES_2;)t-=me.PI_TIMES_2;t<0&&(t=0)}return t}static angleBetween(t,e,r){var n=me.angle(e,t),i=me.angle(e,r);return me.diff(n,i)}static diff(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r}static toRadians(t){return t*Math.PI/180}static getTurn(t,e){var r=Math.sin(e-t);return r>0?me.COUNTERCLOCKWISE:r<0?me.CLOCKWISE:me.NONE}static angleBetweenOriented(t,e,r){var n=me.angle(e,t),i=me.angle(e,r)-n;return i<=-Math.PI?i+me.PI_TIMES_2:i>Math.PI?i-me.PI_TIMES_2:i}getClass(){return me}get interfaces_(){return[]}}me.constructor_=function(){},me.PI_TIMES_2=2*Math.PI,me.PI_OVER_2=Math.PI/2,me.PI_OVER_4=Math.PI/4,me.COUNTERCLOCKWISE=D.COUNTERCLOCKWISE,me.CLOCKWISE=D.CLOCKWISE,me.NONE=D.COLLINEAR;class _e{constructor(){_e.constructor_.apply(this,arguments)}static area(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)}static signedArea(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2}static det(t,e,r,n){return t*n-e*r}static interpolateZ(t,e,r,n){var i=e.x,o=e.y,a=r.x-i,s=n.x-i,l=r.y-o,u=n.y-o,c=a*u-s*l,h=t.x-i,f=t.y-o,p=(u*h-s*f)/c,d=(-l*h+a*f)/c;return e.z+p*(r.z-e.z)+d*(n.z-e.z)}static longestSideLength(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),a=n;return i>a&&(a=i),o>a&&(a=o),a}static isAcute(t,e,r){return!!me.isAcute(t,e,r)&&!!me.isAcute(e,r,t)&&!!me.isAcute(r,t,e)}static circumcentre(t,e,r){var n=r.x,i=r.y,o=t.x-n,a=t.y-i,s=e.x-n,l=e.y-i,u=2*_e.det(o,a,s,l),c=_e.det(a,o*o+a*a,l,s*s+l*l),h=_e.det(o,o*o+a*a,s,s*s+l*l);return new _(n-c/u,i+h/u)}static perpendicularBisector(t,e){var r=e.x-t.x,n=e.y-t.y,i=new U(t.x+r/2,t.y+n/2,1),o=new U(t.x-n+r/2,t.y+r+n/2,1);return new U(i,o)}static angleBisector(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,a=r.y-t.y;return new _(t.x+i*o,t.y+i*a)}static area3D(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=r.x-t.x,s=r.y-t.y,l=r.z-t.z,u=i*l-o*s,c=o*a-n*l,h=n*s-i*a,f=u*u+c*c+h*h;return Math.sqrt(f)/2}static centroid(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new _(n,i)}static inCentre(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),a=n+i+o,s=(n*t.x+i*e.x+o*r.x)/a,l=(n*t.y+i*e.y+o*r.y)/a;return new _(s,l)}area(){return _e.area(this.p0,this.p1,this.p2)}signedArea(){return _e.signedArea(this.p0,this.p1,this.p2)}interpolateZ(t){if(null===t)throw new r("Supplied point is null.");return _e.interpolateZ(t,this.p0,this.p1,this.p2)}longestSideLength(){return _e.longestSideLength(this.p0,this.p1,this.p2)}isAcute(){return _e.isAcute(this.p0,this.p1,this.p2)}circumcentre(){return _e.circumcentre(this.p0,this.p1,this.p2)}area3D(){return _e.area3D(this.p0,this.p1,this.p2)}centroid(){return _e.centroid(this.p0,this.p1,this.p2)}inCentre(){return _e.inCentre(this.p0,this.p1,this.p2)}getClass(){return _e}get interfaces_(){return[]}}_e.constructor_=function(){this.p0=null,this.p1=null,this.p2=null;let t=arguments[0],e=arguments[1],r=arguments[2];this.p0=t,this.p1=e,this.p2=r};var ve=Object.freeze({Coordinate:_,CoordinateList:P,Envelope:R,LineSegment:de,GeometryFactory:ae,Geometry:W,Point:Dt,LineString:jt,LinearRing:Vt,Polygon:Bt,GeometryCollection:Et,MultiPoint:zt,MultiLineString:Ot,MultiPolygon:qt,Dimension:bt,IntersectionMatrix:ye,PrecisionModel:ie,Location:ge,Triangle:_e});class be{constructor(){be.constructor_.apply(this,arguments)}getCoordinates(){return this._pt}getCoordinate(t){return this._pt[t]}setMinimum(){if(1===arguments.length){let t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){let e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var t=e.distance(r);t<this._distance&&this.initialize(e,r,t)}}initialize(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=r,this._isNull=!1}}toString(){return he.toLineString(this._pt[0],this._pt[1])}getDistance(){return this._distance}setMaximum(){if(1===arguments.length){let t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){let e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var t=e.distance(r);t>this._distance&&this.initialize(e,r,t)}}getClass(){return be}get interfaces_(){return[]}}be.constructor_=function(){this._pt=[new _,new _],this._distance=i.NaN,this._isNull=!0};class xe{constructor(){xe.constructor_.apply(this,arguments)}static computeDistance(){if(arguments[2]instanceof be&&arguments[0]instanceof jt&&arguments[1]instanceof _){let i=arguments[0],o=arguments[1],a=arguments[2];for(var t=new de,e=i.getCoordinates(),r=0;r<e.length-1;r++){t.setCoordinates(e[r],e[r+1]);var n=t.closestPoint(o);a.setMinimum(n,o)}}else if(arguments[2]instanceof be&&arguments[0]instanceof Bt&&arguments[1]instanceof _){let t=arguments[0],e=arguments[1],n=arguments[2];for(xe.computeDistance(t.getExteriorRing(),e,n),r=0;r<t.getNumInteriorRing();r++)xe.computeDistance(t.getInteriorRingN(r),e,n)}else if(arguments[2]instanceof be&&arguments[0]instanceof W&&arguments[1]instanceof _){let t=arguments[0],e=arguments[1],n=arguments[2];if(t instanceof jt)xe.computeDistance(t,e,n);else if(t instanceof Bt)xe.computeDistance(t,e,n);else if(t instanceof Et){var i=t;for(r=0;r<i.getNumGeometries();r++){var o=i.getGeometryN(r);xe.computeDistance(o,e,n)}}else n.setMinimum(t.getCoordinate(),e)}else if(arguments[2]instanceof be&&arguments[0]instanceof de&&arguments[1]instanceof _){let t=arguments[1],e=arguments[2];n=arguments[0].closestPoint(t),e.setMinimum(n,t)}}getClass(){return xe}get interfaces_(){return[]}}xe.constructor_=function(){};class we{constructor(){we.constructor_.apply(this,arguments)}static distance(){if(2===arguments.length)return(t=new we(arguments[0],arguments[1])).distance();if(3===arguments.length){let e=arguments[2];var t;return(t=new we(arguments[0],arguments[1])).setDensifyFraction(e),t.distance()}}getCoordinates(){return this._ptDist.getCoordinates()}setDensifyFraction(t){if(t>1||t<=0)throw new r("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t}compute(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)}distance(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()}computeOrientedDistance(t,e,r){var n=new Ee(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Oe(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}}orientedDistance(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()}getClass(){return we}get interfaces_(){return[]}}class Ee{constructor(){Ee.constructor_.apply(this,arguments)}filter(t){this._minPtDist.initialize(),xe.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}getMaxPointDistance(){return this._maxPtDist}getClass(){return Ee}get interfaces_(){return[X]}}Ee.constructor_=function(){this._maxPtDist=new be,this._minPtDist=new be,this._euclideanDist=new xe,this._geom=null;let t=arguments[0];this._geom=t};class Oe{constructor(){Oe.constructor_.apply(this,arguments)}filter(t,e){if(0===e)return null;for(var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=(n.x-r.x)/this._numSubSegs,o=(n.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=r.x+a*i,l=r.y+a*o,u=new _(s,l);this._minPtDist.initialize(),xe.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}}isDone(){return!1}isGeometryChanged(){return!1}getMaxPointDistance(){return this._maxPtDist}getClass(){return Oe}get interfaces_(){return[wt]}}Oe.constructor_=function(){this._maxPtDist=new be,this._minPtDist=new be,this._geom=null,this._numSubSegs=0;let t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))},we.MaxPointDistanceFilter=Ee,we.MaxDensifiedByFractionDistanceFilter=Oe,we.constructor_=function(){this._g0=null,this._g1=null,this._ptDist=new be,this._densifyFrac=0;let t=arguments[0],e=arguments[1];this._g0=t,this._g1=e};var Se=Object.freeze({DiscreteHausdorffDistance:we,DistanceToPoint:xe,PointPairDistance:be});class Ie{constructor(){Ie.constructor_.apply(this,arguments)}visitItem(t){}getClass(){return Ie}get interfaces_(){return[]}}Ie.constructor_=function(){};class Ce{constructor(){Ce.constructor_.apply(this,arguments)}locate(t){}getClass(){return Ce}get interfaces_(){return[]}}Ce.constructor_=function(){};class Te{constructor(){Te.constructor_.apply(this,arguments)}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return he.toLineString(new _(this._min,0),new _(this._max,0))}getClass(){return Te}get interfaces_(){return[]}}class Pe{constructor(){Pe.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0}getClass(){return Pe}get interfaces_(){return[p]}}Pe.constructor_=function(){},Te.NodeComparator=Pe,Te.constructor_=function(){this._min=i.POSITIVE_INFINITY,this._max=i.NEGATIVE_INFINITY};class Re extends Te{constructor(){super(),Re.constructor_.apply(this,arguments)}query(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)}getClass(){return Re}get interfaces_(){return[]}}Re.constructor_=function(){this._item=null;let t=arguments[0],e=arguments[1],r=arguments[2];this._min=t,this._max=e,this._item=r};const Le={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return Le.sort(t),t.get(0)},sort:function(t,e){const r=t.toArray();e?vt.sort(r,e):vt.sort(r);const n=t.iterator();for(let t=0,e=r.length;t<e;t++)n.next(),n.set(r[t])},singletonList:function(t){const e=new C;return e.add(t),e}};class Me extends Te{constructor(){super(),Me.constructor_.apply(this,arguments)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)}getClass(){return Me}get interfaces_(){return[]}}Me.constructor_=function(){this._node1=null,this._node2=null;let t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)};class Ne{constructor(){Ne.constructor_.apply(this,arguments)}buildTree(){Le.sort(this._leaves,new Te.NodeComparator);for(var t=this._leaves,e=null,r=new C;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}}insert(t,e,r){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new Re(t,e,r))}query(t,e,r){this.init(),this._root.query(t,e,r)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){G.out.println(he.toLineString(new _(t._min,this._level),new _(t._max,this._level)))}init(){if(null!==this._root)return null;this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new Me(t.get(r),t.get(r+1));e.add(i)}}}getClass(){return Ne}get interfaces_(){return[]}}Ne.constructor_=function(){this._leaves=new C,this._root=null,this._level=0};class Ae{constructor(){Ae.constructor_.apply(this,arguments)}static getGeometry(){if(1===arguments.length){let t=arguments[0];return t.getFactory().buildGeometry(Ae.getLines(t))}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(Ae.getLines(t,e))}}static getLines(){if(1===arguments.length){let t=arguments[0];return Ae.getLines(t,!1)}if(2===arguments.length){if(b(arguments[0],w)&&b(arguments[1],w)){let r=arguments[1];for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();Ae.getLines(e,r)}return r}if(arguments[0]instanceof W&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];var r=new C;return t.apply(new Ae(r,e)),r}if(arguments[0]instanceof W&&b(arguments[1],w)){let t=arguments[0],e=arguments[1];return t instanceof jt?e.add(t):t.apply(new Ae(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&b(arguments[0],w)&&b(arguments[1],w)){let r=arguments[1],n=arguments[2];for(t=arguments[0].iterator();t.hasNext();)e=t.next(),Ae.getLines(e,r,n);return r}if("boolean"==typeof arguments[2]&&arguments[0]instanceof W&&b(arguments[1],w)){let t=arguments[1],e=arguments[2];return arguments[0].apply(new Ae(t,e)),t}}}filter(t){if(this._isForcedToLineString&&t instanceof Vt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof jt&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}getClass(){return Ae}get interfaces_(){return[Y]}}Ae.constructor_=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){let t=arguments[0];this._lines=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}};class ke{constructor(){ke.constructor_.apply(this,arguments)}visitItem(t){this._items.add(t)}getItems(){return this._items}getClass(){return ke}get interfaces_(){return[Ie]}}ke.constructor_=function(){this._items=new C};class je{constructor(){je.constructor_.apply(this,arguments)}static locatePointInRing(){if(arguments[0]instanceof _&&b(arguments[1],V)){let i=arguments[1];for(var t=new je(arguments[0]),e=new _,r=new _,n=1;n<i.size();n++)if(i.getCoordinate(n,e),i.getCoordinate(n-1,r),t.countSegment(e,r),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof _&&arguments[1]instanceof Array){let i=arguments[1];for(t=new je(arguments[0]),n=1;n<i.length;n++)if(e=i[n],r=i[n-1],t.countSegment(e,r),t.isOnSegment())return t.getLocation();return t.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=D.index(t,e,this._p);if(i===D.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===D.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==ge.EXTERIOR}getLocation(){return this._isPointOnSegment?ge.BOUNDARY:this._crossingCount%2==1?ge.INTERIOR:ge.EXTERIOR}isOnSegment(){return this._isPointOnSegment}getClass(){return je}get interfaces_(){return[]}}je.constructor_=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;let t=arguments[0];this._p=t};class Fe{constructor(){Fe.constructor_.apply(this,arguments)}locate(t){var e=new je(t),r=new De(e);return this._index.query(t.y,t.y,r),e.getLocation()}getClass(){return Fe}get interfaces_(){return[Ce]}}class De{constructor(){De.constructor_.apply(this,arguments)}visitItem(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}getClass(){return De}get interfaces_(){return[Ie]}}De.constructor_=function(){this._counter=null;let t=arguments[0];this._counter=t};class Ge{constructor(){Ge.constructor_.apply(this,arguments)}init(t){for(var e=Ae.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}}addLine(t){for(var e=1;e<t.length;e++){var r=new de(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}}query(){if(2===arguments.length){let e=arguments[0],r=arguments[1];var t=new ke;return this._index.query(e,r,t),t.getItems()}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._index.query(t,e,r)}}getClass(){return Ge}get interfaces_(){return[]}}Ge.constructor_=function(){this._index=new Ne;let t=arguments[0];this.init(t)},Fe.SegmentVisitor=De,Fe.IntervalIndexedGeometry=Ge,Fe.constructor_=function(){this._index=null;let t=arguments[0];if(!(b(t,Ut)||t instanceof Vt))throw new r("Argument must be Polygonal or LinearRing");this._index=new Ge(t)};class Ue{constructor(){Ue.constructor_.apply(this,arguments)}static isOnLine(){if(arguments[0]instanceof _&&b(arguments[1],V)){let o=arguments[0],a=arguments[1];for(var t=new pe,e=new _,r=new _,n=a.size(),i=1;i<n;i++)if(a.getCoordinate(i-1,e),a.getCoordinate(i,r),t.computeIntersection(o,e,r),t.hasIntersection())return!0;return!1}if(arguments[0]instanceof _&&arguments[1]instanceof Array){let n=arguments[0],o=arguments[1];for(t=new pe,i=1;i<o.length;i++)if(e=o[i-1],r=o[i],t.computeIntersection(n,e,r),t.hasIntersection())return!0;return!1}}static locateInRing(t,e){return je.locatePointInRing(t,e)}static isInRing(t,e){return Ue.locateInRing(t,e)!==ge.EXTERIOR}getClass(){return Ue}get interfaces_(){return[]}}Ue.constructor_=function(){};class Be{constructor(){Be.constructor_.apply(this,arguments)}static isAtomic(t){return!(t instanceof Et)}next(){if(this._atStart)return this._atStart=!1,Be.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new S;var t=this._parent.getGeometryN(this._index++);return t instanceof Et?(this._subcollectionIterator=new Be(t),this._subcollectionIterator.next()):t}remove(){throw new UnsupportedOperationException(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}getClass(){return Be}get interfaces_(){return[x]}}Be.constructor_=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;let t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};class ze{constructor(){ze.constructor_.apply(this,arguments)}static locatePointInPolygon(t,e){if(e.isEmpty())return ge.EXTERIOR;var r=e.getExteriorRing(),n=ze.locatePointInRing(t,r);if(n!==ge.INTERIOR)return n;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=ze.locatePointInRing(t,o);if(a===ge.BOUNDARY)return ge.BOUNDARY;if(a===ge.INTERIOR)return ge.EXTERIOR}return ge.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?Ue.locateInRing(t,e.getCoordinates()):ge.EXTERIOR}static containsPointInPolygon(t,e){return ge.EXTERIOR!==ze.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof Bt)return ze.locatePointInPolygon(t,e);if(e instanceof Et)for(var r=new Be(e);r.hasNext();){var n=r.next();if(n!==e){var i=ze.locateInGeometry(t,n);if(i!==ge.EXTERIOR)return i}}return ge.EXTERIOR}static locate(t,e){return e.isEmpty()?ge.EXTERIOR:ze.locateInGeometry(t,e)}locate(t){return ze.locate(t,this._geom)}getClass(){return ze}get interfaces_(){return[Ce]}}ze.constructor_=function(){this._geom=null;let t=arguments[0];this._geom=t};var Ve=Object.freeze({IndexedPointInAreaLocator:Fe,PointOnGeometryLocator:Ce,SimplePointInAreaLocator:ze});class qe{constructor(){qe.constructor_.apply(this,arguments)}measure(t,e){}getClass(){return qe}get interfaces_(){return[]}}qe.constructor_=function(){};class Ye{constructor(){Ye.constructor_.apply(this,arguments)}measure(t,e){return t.intersection(e).getArea()/t.union(e).getArea()}getClass(){return Ye}get interfaces_(){return[qe]}}Ye.constructor_=function(){};class We{constructor(){We.constructor_.apply(this,arguments)}static diagonalSize(t){if(t.isNull())return 0;var e=t.getWidth(),r=t.getHeight();return Math.sqrt(e*e+r*r)}measure(t,e){var r=we.distance(t,e,We.DENSIFY_FRACTION),n=new R(t.getEnvelopeInternal());return n.expandToInclude(e.getEnvelopeInternal()),1-r/We.diagonalSize(n)}getClass(){return We}get interfaces_(){return[qe]}}We.constructor_=function(){},We.DENSIFY_FRACTION=.25;class Xe{constructor(){Xe.constructor_.apply(this,arguments)}static combine(t,e){return Math.min(t,e)}getClass(){return Xe}get interfaces_(){return[]}}Xe.constructor_=function(){};var He=Object.freeze({AreaSimilarityMeasure:Ye,HausdorffSimilarityMeasure:We,SimilarityMeasure:qe,SimilarityMeasureCombiner:Xe});class Ze{constructor(){Ze.constructor_.apply(this,arguments)}static area2(t,e,r){return(e.x-t.x)*(r.y-t.y)-(r.x-t.x)*(e.y-t.y)}static centroid3(t,e,r,n){return n.x=t.x+e.x+r.x,n.y=t.y+e.y+r.y,null}static getCentroid(t){return new Ze(t).getCentroid()}setAreaBasePoint(t){this._areaBasePt=t}addPoint(t){this._ptCount+=1,this._ptCentSum.x+=t.x,this._ptCentSum.y+=t.y}addLineSegments(t){for(var e=0,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);if(0!==n){e+=n;var i=(t[r].x+t[r+1].x)/2;this._lineCentSum.x+=n*i;var o=(t[r].y+t[r+1].y)/2;this._lineCentSum.y+=n*o}}this._totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])}addHole(t){for(var e=D.isCCW(t),r=0;r<t.length-1;r++)this.addTriangle(this._areaBasePt,t[r],t[r+1],e);this.addLineSegments(t)}getCentroid(){var t=new _;if(Math.abs(this._areasum2)>0)t.x=this._cg3.x/3/this._areasum2,t.y=this._cg3.y/3/this._areasum2;else if(this._totalLength>0)t.x=this._lineCentSum.x/this._totalLength,t.y=this._lineCentSum.y/this._totalLength;else{if(!(this._ptCount>0))return null;t.x=this._ptCentSum.x/this._ptCount,t.y=this._ptCentSum.y/this._ptCount}return t}addShell(t){t.length>0&&this.setAreaBasePoint(t[0]);for(var e=!D.isCCW(t),r=0;r<t.length-1;r++)this.addTriangle(this._areaBasePt,t[r],t[r+1],e);this.addLineSegments(t)}addTriangle(t,e,r,n){var i=n?1:-1;Ze.centroid3(t,e,r,this._triangleCent3);var o=Ze.area2(t,e,r);this._cg3.x+=i*o*this._triangleCent3.x,this._cg3.y+=i*o*this._triangleCent3.y,this._areasum2+=i*o}add(){if(arguments[0]instanceof Bt){let e=arguments[0];this.addShell(e.getExteriorRing().getCoordinates());for(var t=0;t<e.getNumInteriorRing();t++)this.addHole(e.getInteriorRingN(t).getCoordinates())}else if(arguments[0]instanceof W){let n=arguments[0];if(n.isEmpty())return null;if(n instanceof Dt)this.addPoint(n.getCoordinate());else if(n instanceof jt)this.addLineSegments(n.getCoordinates());else if(n instanceof Bt){var e=n;this.add(e)}else if(n instanceof Et){var r=n;for(t=0;t<r.getNumGeometries();t++)this.add(r.getGeometryN(t))}}}getClass(){return Ze}get interfaces_(){return[]}}function Ke(t){this.message=t||""}function Je(){this.array_=[]}Ze.constructor_=function(){this._areaBasePt=null,this._triangleCent3=new _,this._areasum2=0,this._cg3=new _,this._lineCentSum=new _,this._totalLength=0,this._ptCount=0,this._ptCentSum=new _;let t=arguments[0];this._areaBasePt=null,this.add(t)},Ke.prototype=new Error,Ke.prototype.name="EmptyStackException",Je.prototype=new O,Je.prototype.add=function(t){return this.array_.push(t),!0},Je.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},Je.prototype.push=function(t){return this.array_.push(t),t},Je.prototype.pop=function(t){if(0===this.array_.length)throw new Ke;return this.array_.pop()},Je.prototype.peek=function(){if(0===this.array_.length)throw new Ke;return this.array_[this.array_.length-1]},Je.prototype.empty=function(){return 0===this.array_.length},Je.prototype.isEmpty=function(){return this.empty()},Je.prototype.search=function(t){return this.array_.indexOf(t)},Je.prototype.size=function(){return this.array_.length},Je.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};class $e{constructor(){$e.constructor_.apply(this,arguments)}static filterCoordinates(t){for(var e=new $e,r=0;r<t.length;r++)e.filter(t[r]);return e.getCoordinates()}filter(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))}getCoordinates(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)}getClass(){return $e}get interfaces_(){return[X]}}$e.constructor_=function(){this.treeSet=new yt,this.list=new C};class Qe{constructor(){Qe.constructor_.apply(this,arguments)}static extractCoordinates(t){var e=new $e;return t.apply(e),e.getCoordinates()}preSort(t){for(var e=null,r=1;r<t.length;r++)(t[r].y<t[0].y||t[r].y===t[0].y&&t[r].x<t[0].x)&&(e=t[0],t[0]=t[r],t[r]=e);return vt.sort(t,1,t.length,new tr(t[0])),t}computeOctRing(t){var e=this.computeOctPts(t),r=new P;return r.add(e,!1),r.size()<3?null:(r.closeRing(),r.toCoordinateArray())}lineOrPolygon(t){if(3===(t=this.cleanRing(t)).length)return this._geomFactory.createLineString([t[0],t[1]]);var e=this._geomFactory.createLinearRing(t);return this._geomFactory.createPolygon(e)}cleanRing(t){m.equals(t[0],t[t.length-1]);for(var e=new C,r=null,n=0;n<=t.length-2;n++){var i=t[n],o=t[n+1];i.equals(o)||null!==r&&this.isBetween(r,i,o)||(e.add(i),r=i)}e.add(t[t.length-1]);var a=new Array(e.size()).fill(null);return e.toArray(a)}isBetween(t,e,r){if(0!==D.index(t,e,r))return!1;if(t.x!==r.x){if(t.x<=e.x&&e.x<=r.x)return!0;if(r.x<=e.x&&e.x<=t.x)return!0}if(t.y!==r.y){if(t.y<=e.y&&e.y<=r.y)return!0;if(r.y<=e.y&&e.y<=t.y)return!0}return!1}reduce(t){var e=this.computeOctRing(t);if(null===e)return t;for(var r=new yt,n=0;n<e.length;n++)r.add(e[n]);for(n=0;n<t.length;n++)Ue.isInRing(t[n],e)||r.add(t[n]);var i=Q.toCoordinateArray(r);return i.length<3?this.padArray3(i):i}getConvexHull(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);var t=this._inputPts;this._inputPts.length>50&&(t=this.reduce(this._inputPts));var e=this.preSort(t),r=this.grahamScan(e),n=this.toCoordinateArray(r);return this.lineOrPolygon(n)}padArray3(t){for(var e=new Array(3).fill(null),r=0;r<e.length;r++)r<t.length?e[r]=t[r]:e[r]=t[0];return e}computeOctPts(t){for(var e=new Array(8).fill(null),r=0;r<e.length;r++)e[r]=t[0];for(var n=1;n<t.length;n++)t[n].x<e[0].x&&(e[0]=t[n]),t[n].x-t[n].y<e[1].x-e[1].y&&(e[1]=t[n]),t[n].y>e[2].y&&(e[2]=t[n]),t[n].x+t[n].y>e[3].x+e[3].y&&(e[3]=t[n]),t[n].x>e[4].x&&(e[4]=t[n]),t[n].x-t[n].y>e[5].x-e[5].y&&(e[5]=t[n]),t[n].y<e[6].y&&(e[6]=t[n]),t[n].x+t[n].y<e[7].x+e[7].y&&(e[7]=t[n]);return e}toCoordinateArray(t){for(var e=new Array(t.size()).fill(null),r=0;r<t.size();r++){var n=t.get(r);e[r]=n}return e}grahamScan(t){var e=null,r=new Je;r.push(t[0]),r.push(t[1]),r.push(t[2]);for(var n=3;n<t.length;n++){for(e=r.pop();!r.empty()&&D.index(r.peek(),e,t[n])>0;)e=r.pop();r.push(e),r.push(t[n])}return r.push(t[0]),r}getClass(){return Qe}get interfaces_(){return[]}}class tr{constructor(){tr.constructor_.apply(this,arguments)}static polarCompare(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-t.x,a=r.y-t.y,s=D.index(t,e,r);if(s===D.COUNTERCLOCKWISE)return 1;if(s===D.CLOCKWISE)return-1;var l=n*n+i*i,u=o*o+a*a;return l<u?-1:l>u?1:0}compare(t,e){var r=t,n=e;return tr.polarCompare(this._origin,r,n)}getClass(){return tr}get interfaces_(){return[p]}}tr.constructor_=function(){this._origin=null;let t=arguments[0];this._origin=t},Qe.RadialComparator=tr,Qe.constructor_=function(){if(this._geomFactory=null,this._inputPts=null,1===arguments.length){let t=arguments[0];Qe.constructor_.call(this,Qe.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._inputPts=$e.filterCoordinates(t),this._geomFactory=e}};class er{constructor(){er.constructor_.apply(this,arguments)}static centre(t){return new _(er.avg(t.getMinX(),t.getMaxX()),er.avg(t.getMinY(),t.getMaxY()))}static avg(t,e){return(t+e)/2}addPolygon(t){if(t.isEmpty())return null;var e=null,r=null,n=this.horizontalBisector(t);if(0===n.getLength())r=0,e=n.getCoordinate();else{var i=n.intersection(t),o=this.widestGeometry(i);r=o.getEnvelopeInternal().getWidth(),e=er.centre(o.getEnvelopeInternal())}(null===this._interiorPoint||r>this._maxWidth)&&(this._interiorPoint=e,this._maxWidth=r)}getInteriorPoint(){return this._interiorPoint}widestGeometry(){if(arguments[0]instanceof Et){let r=arguments[0];if(r.isEmpty())return r;for(var t=r.getGeometryN(0),e=1;e<r.getNumGeometries();e++)r.getGeometryN(e).getEnvelopeInternal().getWidth()>t.getEnvelopeInternal().getWidth()&&(t=r.getGeometryN(e));return t}if(arguments[0]instanceof W){let t=arguments[0];return t instanceof Et?this.widestGeometry(t):t}}horizontalBisector(t){var e=t.getEnvelopeInternal(),r=rr.getBisectorY(t);return this._factory.createLineString([new _(e.getMinX(),r),new _(e.getMaxX(),r)])}add(t){if(t instanceof Bt)this.addPolygon(t);else if(t instanceof Et)for(var e=t,r=0;r<e.getNumGeometries();r++)this.add(e.getGeometryN(r))}getClass(){return er}get interfaces_(){return[]}}class rr{constructor(){rr.constructor_.apply(this,arguments)}static getBisectorY(t){return new rr(t).getBisectorY()}updateInterval(t){t<=this._centreY?t>this._loY&&(this._loY=t):t>this._centreY&&t<this._hiY&&(this._hiY=t)}getBisectorY(){this.process(this._poly.getExteriorRing());for(var t=0;t<this._poly.getNumInteriorRing();t++)this.process(this._poly.getInteriorRingN(t));return er.avg(this._hiY,this._loY)}process(t){for(var e=t.getCoordinateSequence(),r=0;r<e.size();r++){var n=e.getY(r);this.updateInterval(n)}}getClass(){return rr}get interfaces_(){return[]}}rr.constructor_=function(){this._poly=null,this._centreY=null,this._hiY=i.MAX_VALUE,this._loY=-i.MAX_VALUE;let t=arguments[0];this._poly=t,this._hiY=t.getEnvelopeInternal().getMaxY(),this._loY=t.getEnvelopeInternal().getMinY(),this._centreY=er.avg(this._loY,this._hiY)},er.SafeBisectorFinder=rr,er.constructor_=function(){this._factory=null,this._interiorPoint=null,this._maxWidth=0;let t=arguments[0];this._factory=t.getFactory(),this.add(t)};class nr{constructor(){nr.constructor_.apply(this,arguments)}addEndpoints(){if(arguments[0]instanceof W){let r=arguments[0];if(r instanceof jt)this.addEndpoints(r.getCoordinates());else if(r instanceof Et)for(var t=r,e=0;e<t.getNumGeometries();e++)this.addEndpoints(t.getGeometryN(e))}else if(arguments[0]instanceof Array){let t=arguments[0];this.add(t[0]),this.add(t[t.length-1])}}getInteriorPoint(){return this._interiorPoint}addInterior(){if(arguments[0]instanceof W){let r=arguments[0];if(r instanceof jt)this.addInterior(r.getCoordinates());else if(r instanceof Et)for(var t=r,e=0;e<t.getNumGeometries();e++)this.addInterior(t.getGeometryN(e))}else if(arguments[0]instanceof Array){let t=arguments[0];for(e=1;e<t.length-1;e++)this.add(t[e])}}add(t){var e=t.distance(this._centroid);e<this._minDistance&&(this._interiorPoint=new _(t),this._minDistance=e)}getClass(){return nr}get interfaces_(){return[]}}nr.constructor_=function(){this._centroid=null,this._minDistance=i.MAX_VALUE,this._interiorPoint=null;let t=arguments[0];this._centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this._interiorPoint&&this.addEndpoints(t)};class ir{constructor(){ir.constructor_.apply(this,arguments)}getInteriorPoint(){return this._interiorPoint}add(){if(arguments[0]instanceof W){let r=arguments[0];if(r instanceof Dt)this.add(r.getCoordinate());else if(r instanceof Et)for(var t=r,e=0;e<t.getNumGeometries();e++)this.add(t.getGeometryN(e))}else if(arguments[0]instanceof _){let t=arguments[0];var r=t.distance(this._centroid);r<this._minDistance&&(this._interiorPoint=new _(t),this._minDistance=r)}}getClass(){return ir}get interfaces_(){return[]}}ir.constructor_=function(){this._centroid=null,this._minDistance=i.MAX_VALUE,this._interiorPoint=null;let t=arguments[0];this._centroid=t.getCentroid().getCoordinate(),this.add(t)};class or{constructor(){or.constructor_.apply(this,arguments)}static pointWitMinAngleWithX(t,e){for(var r=i.MAX_VALUE,n=null,o=0;o<t.length;o++){var a=t[o];if(a!==e){var s=a.x-e.x,l=a.y-e.y;l<0&&(l=-l);var u=l/Math.sqrt(s*s+l*l);u<r&&(r=u,n=a)}}return n}static lowestPoint(t){for(var e=t[0],r=1;r<t.length;r++)t[r].y<e.y&&(e=t[r]);return e}static pointWithMinAngleWithSegment(t,e,r){for(var n=i.MAX_VALUE,o=null,a=0;a<t.length;a++){var s=t[a];if(s!==e&&s!==r){var l=me.angleBetween(e,s,r);l<n&&(n=l,o=s)}}return o}getRadius(){return this.compute(),this._radius}getDiameter(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var t=this._extremalPts[0],e=this._extremalPts[1];return this._input.getFactory().createLineString([t,e])}getExtremalPoints(){return this.compute(),this._extremalPts}computeCirclePoints(){if(this._input.isEmpty())return this._extremalPts=new Array(0).fill(null),null;if(1===this._input.getNumPoints()){var t=this._input.getCoordinates();return this._extremalPts=[new _(t[0])],null}var e=this._input.convexHull().getCoordinates();if(t=e,e[0].equals2D(e[e.length-1])&&(t=new Array(e.length-1).fill(null),Q.copyDeep(e,0,t,0,e.length-1)),t.length<=2)return this._extremalPts=Q.copyDeep(t),null;for(var r=or.lowestPoint(t),n=or.pointWitMinAngleWithX(t,r),i=0;i<t.length;i++){var o=or.pointWithMinAngleWithSegment(t,r,n);if(me.isObtuse(r,o,n))return this._extremalPts=[new _(r),new _(n)],null;if(me.isObtuse(o,r,n))r=o;else{if(!me.isObtuse(o,n,r))return this._extremalPts=[new _(r),new _(n),new _(o)],null;n=o}}m.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")}compute(){if(null!==this._extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))}getFarthestPoints(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}var t=this._extremalPts[0],e=this._extremalPts[this._extremalPts.length-1];return this._input.getFactory().createLineString([t,e])}getCircle(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();var t=this._input.getFactory().createPoint(this._centre);return 0===this._radius?t:t.buffer(this._radius)}getCentre(){return this.compute(),this._centre}computeCentre(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new _((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=_e.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2])}}getClass(){return or}get interfaces_(){return[]}}or.constructor_=function(){this._input=null,this._extremalPts=null,this._centre=null,this._radius=0;let t=arguments[0];this._input=t};class ar{constructor(){ar.constructor_.apply(this,arguments)}static nextIndex(t,e){return++e>=t.length&&(e=0),e}static computeC(t,e,r){return t*r.y-e*r.x}static getMinimumDiameter(t){return new ar(t).getDiameter()}static getMinimumRectangle(t){return new ar(t).getMinimumRectangle()}static computeSegmentForLine(t,e,r){var n=null,i=null;return Math.abs(e)>Math.abs(t)?(n=new _(0,r/e),i=new _(1,r/e-t/e)):(n=new _(r/t,0),i=new _(r/t-e/t,1)),new de(n,i)}getWidthCoordinate(){return this.computeMinimumDiameter(),this._minWidthPt}getSupportingSegment(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])}getDiameter(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();var t=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([t,this._minWidthPt])}computeWidthConvex(t){this._convexHullPts=t instanceof Bt?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)}computeConvexRingMinDiameter(t){this._minWidth=i.MAX_VALUE;for(var e=1,r=new de,n=0;n<t.length-1;n++)r.p0=t[n],r.p1=t[n+1],e=this.findMaxPerpDistance(t,r,e)}computeMinimumDiameter(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{var t=new Qe(this._inputGeom).getConvexHull();this.computeWidthConvex(t)}}getLength(){return this.computeMinimumDiameter(),this._minWidth}findMaxPerpDistance(t,e,r){for(var n=e.distancePerpendicular(t[r]),i=n,o=r,a=o;i>=n;)n=i,o=a,a=ar.nextIndex(t,o),i=e.distancePerpendicular(t[a]);return n<this._minWidth&&(this._minPtIndex=o,this._minWidth=n,this._minWidthPt=t[this._minPtIndex],this._minBaseSeg=new de(e)),o}getMinimumRectangle(){if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());for(var t=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,e=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y,r=i.MAX_VALUE,n=-i.MAX_VALUE,o=i.MAX_VALUE,a=-i.MAX_VALUE,s=0;s<this._convexHullPts.length;s++){var l=ar.computeC(t,e,this._convexHullPts[s]);l>n&&(n=l),l<r&&(r=l);var u=ar.computeC(-e,t,this._convexHullPts[s]);u>a&&(a=u),u<o&&(o=u)}var c=ar.computeSegmentForLine(-t,-e,a),h=ar.computeSegmentForLine(-t,-e,o),f=ar.computeSegmentForLine(-e,t,n),p=ar.computeSegmentForLine(-e,t,r),d=f.lineIntersection(c),g=p.lineIntersection(c),y=p.lineIntersection(h),m=f.lineIntersection(h),_=this._inputGeom.getFactory().createLinearRing([d,g,y,m,d]);return this._inputGeom.getFactory().createPolygon(_)}getClass(){return ar}get interfaces_(){return[]}}ar.constructor_=function(){if(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new de,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1===arguments.length){let t=arguments[0];ar.constructor_.call(this,t,!1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._inputGeom=t,this._isConvex=e}};var sr=Object.freeze({distance:Se,locate:Ve,match:He,Angle:me,Area:Gt,Centroid:Ze,ConvexHull:Qe,Distance:z,InteriorPointArea:er,InteriorPointLine:nr,InteriorPointPoint:ir,Length:Ct,Orientation:D,PointLocation:Ue,RobustLineIntersector:pe,MinimumBoundingCircle:or,MinimumDiameter:ar});class lr{constructor(){lr.constructor_.apply(this,arguments)}transformPoint(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}transformPolygon(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof Vt&&!n.isEmpty()||(r=!1);for(var i=new C,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Vt||(r=!1),i.add(a))}if(r)return this._factory.createPolygon(n,i.toArray([]));var s=new C;return null!==n&&s.add(n),s.addAll(i),this._factory.buildGeometry(s)}createCoordinateSequence(t){return this._factory.getCoordinateSequenceFactory().create(t)}getInputGeometry(){return this._inputGeom}transformMultiLineString(t,e){for(var r=new C,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)}transformCoordinates(t,e){return this.copy(t)}transformLineString(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}transformMultiPoint(t,e){for(var r=new C,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)}transformMultiPolygon(t,e){for(var r=new C,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)}copy(t){return t.copy()}transformGeometryCollection(t,e){for(var r=new C,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ae.toGeometryArray(r)):this._factory.buildGeometry(r)}transform(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Dt)return this.transformPoint(t,null);if(t instanceof zt)return this.transformMultiPoint(t,null);if(t instanceof Vt)return this.transformLinearRing(t,null);if(t instanceof jt)return this.transformLineString(t,null);if(t instanceof Ot)return this.transformMultiLineString(t,null);if(t instanceof Bt)return this.transformPolygon(t,null);if(t instanceof qt)return this.transformMultiPolygon(t,null);if(t instanceof Et)return this.transformGeometryCollection(t,null);throw new r("Unknown Geometry subtype: "+t.getClass().getName())}transformLinearRing(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)}getClass(){return lr}get interfaces_(){return[]}}lr.constructor_=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};class ur{constructor(){ur.constructor_.apply(this,arguments)}static densifyPoints(t,e,r){for(var n=new de,i=new P,o=0;o<t.length-1;o++){n.p0=t[o],n.p1=t[o+1],i.add(n.p0,!1);var a=n.getLength(),s=Math.trunc(a/e)+1;if(s>1)for(var l=a/s,u=1;u<s;u++){var c=u*l/a,h=n.pointAlong(c);r.makePrecise(h),i.add(h,!1)}}return i.add(t[t.length-1],!1),i.toCoordinateArray()}static densify(t,e){var r=new ur(t);return r.setDistanceTolerance(e),r.getResultGeometry()}getResultGeometry(){return new cr(this._distanceTolerance).transform(this._inputGeom)}setDistanceTolerance(t){if(t<=0)throw new r("Tolerance must be positive");this._distanceTolerance=t}getClass(){return ur}get interfaces_(){return[]}}class cr extends lr{constructor(){super(),cr.constructor_.apply(this,arguments)}transformMultiPolygon(t,e){var r=super.transformMultiPolygon.call(this,t,e);return this.createValidArea(r)}transformPolygon(t,e){var r=super.transformPolygon.call(this,t,e);return e instanceof qt?r:this.createValidArea(r)}transformCoordinates(t,e){var r=t.toCoordinateArray(),n=ur.densifyPoints(r,this.distanceTolerance,e.getPrecisionModel());return e instanceof jt&&1===n.length&&(n=new Array(0).fill(null)),this._factory.getCoordinateSequenceFactory().create(n)}createValidArea(t){return t.buffer(0)}getClass(){return cr}get interfaces_(){return[]}}cr.constructor_=function(){this.distanceTolerance=null;let t=arguments[0];this.distanceTolerance=t},ur.DensifyTransformer=cr,ur.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null;let t=arguments[0];this._inputGeom=t};var hr=Object.freeze({Densifier:ur});class fr{constructor(){fr.constructor_.apply(this,arguments)}static isNorthern(t){return t===fr.NE||t===fr.NW}static isOpposite(t,e){return t!==e&&2==(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r}static isInHalfPlane(t,e){return e===fr.SE?t===fr.SE||t===fr.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new r("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?fr.NE:fr.SE:e>=0?fr.NW:fr.SW}if(arguments[0]instanceof _&&arguments[1]instanceof _){let t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new r("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?fr.NE:fr.SE:e.y>=t.y?fr.NW:fr.SW}}getClass(){return fr}get interfaces_(){return[]}}fr.constructor_=function(){},fr.NE=0,fr.NW=1,fr.SW=2,fr.SE=3;class pr{constructor(){pr.constructor_.apply(this,arguments)}static init(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t}static create(t,e){var r=new pr(t),n=new pr(e);return r.init(n),r}find(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null}dest(){return this._sym._orig}oNext(){return this._sym._next}insert(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),r=this;do{var n=r.oNext();if(n.compareTo(t)!==e||n===this)return r.insertAfter(t),null;r=n}while(r!==this);m.shouldNeverReachHere()}insertAfter(t){m.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)}degree(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t}equals(){if(2===arguments.length&&arguments[1]instanceof _&&arguments[0]instanceof _){let t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}}deltaY(){return this._sym._orig.y-this._orig.y}sym(){return this._sym}prev(){return this._sym.next()._sym}compareAngularDirection(t){var e=this.deltaX(),r=this.deltaY(),n=t.deltaX(),i=t.deltaY();if(e===n&&r===i)return 0;var o=fr.quadrant(e,r),a=fr.quadrant(n,i);return o>a?1:o<a?-1:D.index(t._orig,t.dest(),this.dest())}prevNode(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t}compareTo(t){var e=t;return this.compareAngularDirection(e)}next(){return this._next}setSym(t){this._sym=t}orig(){return this._orig}toString(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}setNext(t){this._next=t}init(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)}deltaX(){return this._sym._orig.x-this._orig.x}getClass(){return pr}get interfaces_(){return[]}}pr.constructor_=function(){this._orig=null,this._sym=null,this._next=null;let t=arguments[0];this._orig=t};class dr extends pr{constructor(){super(),dr.constructor_.apply(this,arguments)}static setMarkBoth(t,e){t.setMark(e),t.sym().setMark(e)}static isMarked(t){return t.isMarked()}static setMark(t,e){t.setMark(e)}static markBoth(t){t.mark(),t.sym().mark()}static mark(t){t.mark()}mark(){this._isMarked=!0}setMark(t){this._isMarked=t}isMarked(){return this._isMarked}getClass(){return dr}get interfaces_(){return[]}}dr.constructor_=function(){this._isMarked=!1;let t=arguments[0];pr.constructor_.call(this,t)};class gr{constructor(){gr.constructor_.apply(this,arguments)}static isValidEdge(t,e){return 0!==e.compareTo(t)}insert(t,e,r){var n=this.create(t,e);null!==r?r.insert(n):this._vertexMap.put(t,n);var i=this._vertexMap.get(e);return null!==i?i.insert(n.sym()):this._vertexMap.put(e,n.sym()),n}create(t,e){var r=this.createEdge(t),n=this.createEdge(e);return pr.init(r,n),r}createEdge(t){return new pr(t)}addEdge(t,e){if(!gr.isValidEdge(t,e))return null;var r=this._vertexMap.get(t),n=null;return null!==r&&(n=r.find(e)),null!==n?n:this.insert(t,e,r)}getVertexEdges(){return this._vertexMap.values()}findEdge(t,e){var r=this._vertexMap.get(t);return null===r?null:r.find(e)}getClass(){return gr}get interfaces_(){return[]}}gr.constructor_=function(){this._vertexMap=new ne};class yr extends dr{constructor(){super(),yr.constructor_.apply(this,arguments)}setStart(){this._isStart=!0}isStart(){return this._isStart}getClass(){return yr}get interfaces_(){return[]}}yr.constructor_=function(){this._isStart=!1;let t=arguments[0];dr.constructor_.call(this,t)};class mr extends gr{constructor(){super(),mr.constructor_.apply(this,arguments)}createEdge(t){return new yr(t)}getClass(){return mr}get interfaces_(){return[]}}mr.constructor_=function(){};class _r{constructor(){_r.constructor_.apply(this,arguments)}static dissolve(t){var e=new _r;return e.add(t),e.getResult()}addLine(t){this._lines.add(this._factory.createLineString(t.toCoordinateArray()))}updateRingStartEdge(t){return t.isStart()||(t=t.sym()).isStart()?null===this._ringStartEdge?(this._ringStartEdge=t,null):void(t.orig().compareTo(this._ringStartEdge.orig())<0&&(this._ringStartEdge=t)):null}getResult(){return null===this._result&&this.computeResult(),this._result}process(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()}buildRing(t){var e=new P,r=t;for(e.add(r.orig().copy(),!1);2===r.sym().degree();){var n=r.next();if(n===t)break;e.add(n.orig().copy(),!1),r=n}e.add(r.dest().copy(),!1),this.addLine(e)}buildLine(t){var e=new P,r=t;for(this._ringStartEdge=null,dr.markBoth(r),e.add(r.orig().copy(),!1);2===r.sym().degree();){this.updateRingStartEdge(r);var n=r.next();if(n===t)return this.buildRing(this._ringStartEdge),null;e.add(n.orig().copy(),!1),r=n,dr.markBoth(r)}e.add(r.dest().clone(),!1),this.stackEdges(r.sym()),this.addLine(e)}stackEdges(t){var e=t;do{dr.isMarked(e)||this._nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)}computeResult(){for(var t=this._graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();dr.isMarked(e)||this.process(e)}this._result=this._factory.buildGeometry(this._lines)}buildLines(){for(;!this._nodeEdgeStack.empty();){var t=this._nodeEdgeStack.pop();dr.isMarked(t)||this.buildLine(t)}}add(){if(arguments[0]instanceof W)arguments[0].apply(new class{get interfaces_(){return[Y]}filter(t){t instanceof jt&&this.add(t)}});else if(b(arguments[0],w))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof jt){let e=arguments[0];null===this._factory&&(this._factory=e.getFactory());var r=e.getCoordinateSequence(),n=!1;for(t=1;t<r.size();t++){var i=this._graph.addEdge(r.getCoordinate(t-1),r.getCoordinate(t));null!==i&&(n||(i.setStart(),n=!0))}}}getClass(){return _r}get interfaces_(){return[]}}_r.constructor_=function(){this._result=null,this._factory=null,this._graph=null,this._lines=new C,this._nodeEdgeStack=new Je,this._ringStartEdge=null,this._graph=new mr};var vr=Object.freeze({LineDissolver:_r});class br{constructor(){br.constructor_.apply(this,arguments)}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?Ue.locateInRing(t,e.getCoordinates()):ge.EXTERIOR}intersects(t,e){return this.locate(t,e)!==ge.EXTERIOR}updateLocationInfo(t){t===ge.INTERIOR&&(this._isIn=!0),t===ge.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof Dt&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof jt)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof Bt)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof Ot)for(var r=e,n=0;n<r.getNumGeometries();n++){var i=r.getGeometryN(n);this.updateLocationInfo(this.locateOnLineString(t,i))}else if(e instanceof qt){var o=e;for(n=0;n<o.getNumGeometries();n++){var a=o.getGeometryN(n);this.updateLocationInfo(this.locateInPolygon(t,a))}}else if(e instanceof Et)for(var s=new Be(e);s.hasNext();){var l=s.next();l!==e&&this.computeLocation(t,l)}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?ge.INTERIOR:ge.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return ge.EXTERIOR;var r=e.getCoordinateSequence();return e.isClosed()||!t.equals(r.getCoordinate(0))&&!t.equals(r.getCoordinate(r.size()-1))?Ue.isOnLine(t,r)?ge.INTERIOR:ge.EXTERIOR:ge.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return ge.EXTERIOR;var r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===ge.EXTERIOR)return ge.EXTERIOR;if(n===ge.BOUNDARY)return ge.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===ge.INTERIOR)return ge.EXTERIOR;if(a===ge.BOUNDARY)return ge.BOUNDARY}return ge.INTERIOR}locate(t,e){return e.isEmpty()?ge.EXTERIOR:e instanceof jt?this.locateOnLineString(t,e):e instanceof Bt?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?ge.BOUNDARY:this._numBoundaries>0||this._isIn?ge.INTERIOR:ge.EXTERIOR)}getClass(){return br}get interfaces_(){return[]}}br.constructor_=function(){if(this._boundaryRule=H.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){let t=arguments[0];if(null===t)throw new r("Rule must be non-null");this._boundaryRule=t}};class xr{constructor(){xr.constructor_.apply(this,arguments)}static opposite(t){return t===xr.LEFT?xr.RIGHT:t===xr.RIGHT?xr.LEFT:t}getClass(){return xr}get interfaces_(){return[]}}xr.constructor_=function(){},xr.ON=0,xr.LEFT=1,xr.RIGHT=2;class wr{constructor(){wr.constructor_.apply(this,arguments)}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}getClass(){return wr}get interfaces_(){return[]}}wr.constructor_=function(){this.mce=null,this.chainIndex=null;let t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};class Er{constructor(){Er.constructor_.apply(this,arguments)}isDelete(){return this._eventType===Er.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===Er.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}getClass(){return Er}get interfaces_(){return[h]}}Er.constructor_=function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){let t=arguments[0],e=arguments[1];this._eventType=Er.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._eventType=Er.INSERT,this._label=t,this._xValue=e,this._obj=r}},Er.INSERT=1,Er.DELETE=2;class Or{constructor(){Or.constructor_.apply(this,arguments)}getClass(){return Or}get interfaces_(){return[]}}Or.constructor_=function(){};class Sr{constructor(){Sr.constructor_.apply(this,arguments)}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(Sr.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getClass(){return Sr}get interfaces_(){return[]}}Sr.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;let t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};class Ir extends Or{constructor(){super(),Ir.constructor_.apply(this,arguments)}prepareEvents(){Le.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){let r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var e=this.events.get(t);if(e.isInsert()&&this.processOverlaps(t,e.getDeleteEventIndex(),e,r),r.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Sr&&b(arguments[0],O)&&b(arguments[1],O)){let t=arguments[0],e=arguments[1],r=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(r)}else if("boolean"==typeof arguments[2]&&b(arguments[0],O)&&arguments[1]instanceof Sr){let t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new wr(r,i),a=new Er(e,r.getMinX(i),o);this.events.add(a),this.events.add(new Er(r.getMaxX(i),a))}}processOverlaps(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();r.isSameLabel(a)||(i.computeIntersections(s,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length){let r=arguments[1];for(t=arguments[0].iterator();t.hasNext();)e=t.next(),this.addEdge(e,r)}}getClass(){return Ir}get interfaces_(){return[]}}Ir.constructor_=function(){this.events=new C,this.nOverlaps=null};class Cr{constructor(){Cr.constructor_.apply(this,arguments)}setAllLocations(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==ge.NONE)return!1;return!0}setAllLocationsIfNull(t){for(var e=0;e<this.location.length;e++)this.location[e]===ge.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[xr.ON]=this.location[xr.ON],e[xr.LEFT]=ge.NONE,e[xr.RIGHT]=ge.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===ge.NONE&&r<t.location.length&&(this.location[r]=t.location[r])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;var t=this.location[xr.LEFT];this.location[xr.LEFT]=this.location[xr.RIGHT],this.location[xr.RIGHT]=t}toString(){var t=new N;return this.location.length>1&&t.append(ge.toLocationSymbol(this.location[xr.LEFT])),t.append(ge.toLocationSymbol(this.location[xr.ON])),this.location.length>1&&t.append(ge.toLocationSymbol(this.location[xr.RIGHT])),t.toString()}setLocations(t,e,r){this.location[xr.ON]=t,this.location[xr.LEFT]=e,this.location[xr.RIGHT]=r}get(t){return t<this.location.length?this.location[t]:ge.NONE}isArea(){return this.location.length>1}isAnyNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]===ge.NONE)return!0;return!1}setLocation(){if(1===arguments.length){let t=arguments[0];this.setLocation(xr.ON,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(ge.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}getClass(){return Cr}get interfaces_(){return[]}}Cr.constructor_=function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){let t=arguments[0];this.init(1),this.location[xr.ON]=t}else if(arguments[0]instanceof Cr){let e=arguments[0];if(this.init(e.location.length),null!==e)for(var t=0;t<this.location.length;t++)this.location[t]=e.location[t]}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.init(3),this.location[xr.ON]=t,this.location[xr.LEFT]=e,this.location[xr.RIGHT]=r}};class Tr{constructor(){Tr.constructor_.apply(this,arguments)}static toLineLabel(t){for(var e=new Tr(ge.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e}getGeometryCount(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){let t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Cr(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){let t=arguments[0];return this.elt[t].get(xr.ON)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){var t=new N;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){let t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setLocation(xr.ON,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.elt[t].setLocation(e,r)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new Cr(this.elt[t].location[0]))}getClass(){return Tr}get interfaces_(){return[]}}Tr.constructor_=function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){let t=arguments[0];this.elt[0]=new Cr(t),this.elt[1]=new Cr(t)}else if(arguments[0]instanceof Tr){let t=arguments[0];this.elt[0]=new Cr(t.elt[0]),this.elt[1]=new Cr(t.elt[1])}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[0]=new Cr(ge.NONE),this.elt[1]=new Cr(ge.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.elt[0]=new Cr(t,e,r),this.elt[1]=new Cr(t,e,r)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.elt[0]=new Cr(ge.NONE,ge.NONE,ge.NONE),this.elt[1]=new Cr(ge.NONE,ge.NONE,ge.NONE),this.elt[t].setLocations(e,r,n)}};class Pr{constructor(){Pr.constructor_.apply(this,arguments)}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){var e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}getClass(){return Pr}get interfaces_(){return[h]}}Pr.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;let t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new _(t),this.segmentIndex=e,this.dist=r};class Rr{constructor(){Rr.constructor_.apply(this,arguments)}print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}}addEndpoints(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new _(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new kr(o,new Tr(this.edge._label))}add(t,e,r){var n=new Pr(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}isIntersection(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}getClass(){return Rr}get interfaces_(){return[]}}Rr.constructor_=function(){this._nodeMap=new pt,this.edge=null;let t=arguments[0];this.edge=t};class Lr{constructor(){Lr.constructor_.apply(this,arguments)}static toIntArray(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}getChainStartIndices(t){var e=0,r=new C;r.add(new A(e));do{var n=this.findChainEnd(t,e);r.add(new A(n)),e=n}while(e<t.length-1);return Lr.toIntArray(r)}findChainEnd(t,e){for(var r=fr.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&fr.quadrant(t[n-1],t[n])===r;)n++;return n-1}getClass(){return Lr}get interfaces_(){return[]}}Lr.constructor_=function(){};class Mr{constructor(){Mr.constructor_.apply(this,arguments)}getCoordinates(){return this.pts}getMaxX(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r}getMinX(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r}computeIntersectsForChain(){if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){let r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(n-r==1&&a-o==1)return s.addIntersections(this.e,r,i.e,o),null;if(!this.overlaps(r,n,i,o,a))return null;var t=Math.trunc((r+n)/2),e=Math.trunc((o+a)/2);r<t&&(o<e&&this.computeIntersectsForChain(r,t,i,o,e,s),e<a&&this.computeIntersectsForChain(r,t,i,e,a,s)),t<n&&(o<e&&this.computeIntersectsForChain(t,n,i,o,e,s),e<a&&this.computeIntersectsForChain(t,n,i,e,a,s))}}overlaps(t,e,r,n,i){return R.intersects(this.pts[t],this.pts[e],r.pts[n],r.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)}getClass(){return Mr}get interfaces_(){return[]}}Mr.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;let t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Lr;this.startIndex=e.getChainStartIndices(this.pts)};class Nr{constructor(){Nr.constructor_.apply(this,arguments)}static depthAtLocation(t){return t===ge.EXTERIOR?0:t===ge.INTERIOR?1:Nr.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,r){this._depth[t][e]=r}isNull(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Nr.NULL_VALUE)return!1;return!0}if(1===arguments.length){let t=arguments[0];return this._depth[t][1]===Nr.NULL_VALUE}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this._depth[t][e]===Nr.NULL_VALUE}}normalize(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}}getDelta(t){return this._depth[t][xr.RIGHT]-this._depth[t][xr.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?ge.EXTERIOR:ge.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<2;t++)for(var e=1;e<3;e++){var r=n.getLocation(t,e);r!==ge.EXTERIOR&&r!==ge.INTERIOR||(this.isNull(t,e)?this._depth[t][e]=Nr.depthAtLocation(r):this._depth[t][e]+=Nr.depthAtLocation(r))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1];arguments[2]===ge.INTERIOR&&this._depth[t][e]++}}getClass(){return Nr}get interfaces_(){return[]}}Nr.constructor_=function(){this._depth=Array(2).fill().map(()=>Array(3));for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=Nr.NULL_VALUE},Nr.NULL_VALUE=-1;class Ar{constructor(){Ar.constructor_.apply(this,arguments)}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){m.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}getClass(){return Ar}get interfaces_(){return[]}}Ar.constructor_=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._label=t}};class kr extends Ar{constructor(){super(),kr.constructor_.apply(this,arguments)}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof ye&&arguments[0]instanceof Tr))return super.updateIM.apply(this,arguments);{let t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,xr.ON),t.getLocation(1,xr.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,xr.LEFT),t.getLocation(1,xr.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,xr.RIGHT),t.getLocation(1,xr.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new kr(t,Tr.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof kr))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var r=!0,n=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(r=!1),this.pts[o].equals2D(e.pts[--i])||(n=!1),!r&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){let t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){kr.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new Mr(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new R;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,r,n){var i=new _(t.getIntersection(n)),o=e,a=t.getEdgeDistance(r,n),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)}toString(){var t=new At;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)}getClass(){return kr}get interfaces_(){return[]}}kr.constructor_=function(){if(this.pts=null,this._env=null,this.eiList=new Rr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Nr,this._depthDelta=0,1===arguments.length){let t=arguments[0];kr.constructor_.call(this,t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.pts=t,this._label=e}};class jr extends Ar{constructor(){super(),jr.constructor_.apply(this,arguments)}isIncidentEdgeInResult(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){var r=ge.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==ge.BOUNDARY&&(r=n)}return r}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{let t=arguments[0],e=arguments[1];null===this._label?this._label=new Tr(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof jr){let t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Tr){let r=arguments[0];for(var t=0;t<2;t++){var e=this.computeMergedLocation(r,t);this._label.getLocation(t)===ge.NONE&&this._label.setLocation(t,e)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;var e=ge.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case ge.BOUNDARY:r=ge.INTERIOR;break;case ge.INTERIOR:default:r=ge.BOUNDARY}this._label.setLocation(t,r)}getClass(){return jr}get interfaces_(){return[]}}jr.constructor_=function(){this._coord=null,this._edges=null;let t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Tr(0,ge.NONE)};class Fr{constructor(){Fr.constructor_.apply(this,arguments)}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof _){let e=arguments[0];return null===(t=this.nodeMap.get(e))&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof jr){let e=arguments[0];var t;return null===(t=this.nodeMap.get(e.getCoordinate()))?(this.nodeMap.put(e.getCoordinate(),e),e):(t.mergeLabel(e),t)}}print(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){for(var e=new C,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===ge.BOUNDARY&&e.add(n)}return e}add(t){var e=t.getCoordinate();this.addNode(e).add(t)}getClass(){return Fr}get interfaces_(){return[]}}Fr.constructor_=function(){this.nodeMap=new pt,this.nodeFact=null;let t=arguments[0];this.nodeFact=t};class Dr{constructor(){Dr.constructor_.apply(this,arguments)}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:D.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){var e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=fr.quadrant(this._dx,this._dy),m.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}getClass(){return Dr}get interfaces_(){return[h]}}Dr.constructor_=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){let t=arguments[0];this._edge=t}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];Dr.constructor_.call(this,t,e,r,null)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];Dr.constructor_.call(this,t),this.init(e,r),this._label=n}};class Gr extends g{constructor(){if(1===arguments.length){let t=arguments[0];super(t),g.call(this,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];super(Gr.msgWithCoord(t,e)),this.name="TopologyException",this.pt=new _(e)}}getCoordinate(){return this.pt}get interfaces_(){return[]}getClass(){return Gr}static msgWithCoord(t,e){return null!==e?t+" [ "+e+" ]":t}}class Ur extends Dr{constructor(){super(),Ur.constructor_.apply(this,arguments)}static depthFactor(t,e){return t===ge.EXTERIOR&&e===ge.INTERIOR?1:t===ge.INTERIOR&&e===ge.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new Tr(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Gr("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,xr.LEFT)===ge.INTERIOR&&this._label.getLocation(e,xr.RIGHT)===ge.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[xr.LEFT]+"/"+this._depth[xr.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,ge.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,ge.EXTERIOR);return t&&e&&r}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===xr.LEFT&&(n=-1);var i=xr.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}getClass(){return Ur}get interfaces_(){return[]}}Ur.constructor_=function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];let t=arguments[0],e=arguments[1];if(Dr.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()};class Br{constructor(){Br.constructor_.apply(this,arguments)}createNode(t){return new jr(t,null)}getClass(){return Br}get interfaces_(){return[]}}Br.constructor_=function(){};class zr{constructor(){zr.constructor_.apply(this,arguments)}static linkResultDirectedEdges(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}printEdges(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof jr){let t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof _){let t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}debugPrintln(t){G.out.println(t)}isBoundaryNode(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===ge.BOUNDARY}linkAllDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}matchInSameDirection(t,e,r,n){return!!t.equals(r)&&D.index(t,e,n)===D.COLLINEAR&&fr.quadrant(t,e)===fr.quadrant(r,n)}getEdgeEnds(){return this._edgeEndList}debugPrint(t){G.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null}addEdges(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._edges.add(r);var n=new Ur(r,!0),i=new Ur(r,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null}getClass(){return zr}get interfaces_(){return[]}}zr.constructor_=function(){if(this._edges=new C,this._nodes=null,this._edgeEndList=new C,0===arguments.length)this._nodes=new Fr(new Br);else if(1===arguments.length){let t=arguments[0];this._nodes=new Fr(t)}};class Vr extends zr{constructor(){super(),Vr.constructor_.apply(this,arguments)}static determineBoundary(t,e){return t.isInBoundary(e)?ge.BOUNDARY:ge.INTERIOR}insertBoundaryPoint(t,e){var r=this._nodes.addNode(e).getLabel(),n=1;ge.NONE,r.getLocation(t,xr.ON)===ge.BOUNDARY&&n++;var i=Vr.determineBoundary(this._boundaryNodeRule,n);r.setLocation(t,i)}computeSelfNodes(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){let i=arguments[1],o=arguments[2];var t=new Sr(arguments[0],!0,!1);t.setIsDoneIfProperInt(o);var e=this.createEdgeSetIntersector(),r=this._parentGeom instanceof Vt||this._parentGeom instanceof Bt||this._parentGeom instanceof qt,n=i||!r;return e.computeIntersections(this._edges,t,n),this.addSelfIntersectionNodes(this._argIndex),t}}computeSplitEdges(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)}computeEdgeIntersections(t,e,r){var n=new Sr(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof Dt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,ge.INTERIOR)}else if(arguments[0]instanceof _){let t=arguments[0];this.insertPoint(this._argIndex,t,ge.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),ge.EXTERIOR,ge.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,ge.INTERIOR,ge.EXTERIOR)}}addEdge(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],ge.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],ge.BOUNDARY)}addLineString(t){var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new kr(e,new Tr(this._argIndex,ge.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),m.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,r){if(this.isBoundaryNode(t,e))return null;r===ge.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)}addPolygonRing(t,e,r){if(t.isEmpty())return null;var n=Q.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;D.isCCW(n)&&(i=r,o=e);var a=new kr(n,new Tr(this._argIndex,ge.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],ge.BOUNDARY)}insertPoint(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new Tr(t,r):i.setLocation(t,r)}createEdgeSetIntersector(){return new Ir}addSelfIntersectionNodes(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}}add(){if(!(1===arguments.length&&arguments[0]instanceof W))return super.add.apply(this,arguments);{let t=arguments[0];if(t.isEmpty())return null;if(t instanceof qt&&(this._useBoundaryDeterminationRule=!1),t instanceof Bt)this.addPolygon(t);else if(t instanceof jt)this.addLineString(t);else if(t instanceof Dt)this.addPoint(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else if(t instanceof qt)this.addCollection(t);else{if(!(t instanceof Et))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}}addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}}locate(t){return b(this._parentGeom,Ut)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Fe(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof jt){let t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}getClass(){return Vr}get interfaces_(){return[]}}Vr.constructor_=function(){if(this._parentGeom=null,this._lineEdgeMap=new ne,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new br,2===arguments.length){let t=arguments[0],e=arguments[1];Vr.constructor_.call(this,t,e,H.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=r,null!==e&&this.add(e)}};var qr=Object.freeze({GeometryGraph:Vr});class Yr{constructor(){Yr.constructor_.apply(this,arguments)}visit(t){}getClass(){return Yr}get interfaces_(){return[]}}Yr.constructor_=function(){};class Wr{constructor(){Wr.constructor_.apply(this,arguments)}isRepeated(){return this._count>1}getRight(){return this._right}getCoordinate(){return this._p}setLeft(t){this._left=t}getX(){return this._p.x}getData(){return this._data}getCount(){return this._count}getLeft(){return this._left}getY(){return this._p.y}increment(){this._count=this._count+1}setRight(t){this._right=t}getClass(){return Wr}get interfaces_(){return[]}}Wr.constructor_=function(){if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2===arguments.length){let t=arguments[0],e=arguments[1];this._p=new _(t),this._left=null,this._right=null,this._count=1,this._data=e}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._p=new _(t,e),this._left=null,this._right=null,this._count=1,this._data=r}};class Xr{constructor(){Xr.constructor_.apply(this,arguments)}static toCoordinates(){if(1===arguments.length){let t=arguments[0];return Xr.toCoordinates(t,!1)}if(2===arguments.length){let o=arguments[0],a=arguments[1];for(var t=new P,e=o.iterator();e.hasNext();)for(var r=e.next(),n=a?r.getCount():1,i=0;i<n;i++)t.add(r.getCoordinate(),!0);return t.toCoordinateArray()}}insert(){if(1===arguments.length){let t=arguments[0];return this.insert(t,null)}if(2===arguments.length){let e=arguments[0],r=arguments[1];if(null===this._root)return this._root=new Wr(e,r),this._root;if(this._tolerance>0){var t=this.findBestMatchNode(e);if(null!==t)return t.increment(),t}return this.insertExact(e,r)}}query(){if(1===arguments.length){let e=arguments[0];var t=new C;return this.query(e,t),t}if(2===arguments.length)if(arguments[0]instanceof R&&b(arguments[1],O)){let t=arguments[0],e=arguments[1];this.queryNode(this._root,t,!0,new class{get interfaces_(){return[Yr]}visit(t){e.add(t)}})}else if(arguments[0]instanceof R&&b(arguments[1],Yr)){let t=arguments[0],e=arguments[1];this.queryNode(this._root,t,!0,e)}}queryNode(t,e,r,n){if(null===t)return null;var i=null,o=null,a=null;r?(i=e.getMinX(),o=e.getMaxX(),a=t.getX()):(i=e.getMinY(),o=e.getMaxY(),a=t.getY());var s=a<=o;i<a&&this.queryNode(t.getLeft(),e,!r,n),e.contains(t.getCoordinate())&&n.visit(t),s&&this.queryNode(t.getRight(),e,!r,n)}findBestMatchNode(t){var e=new Hr(t,this._tolerance);return this.query(e.queryEnvelope(),e),e.getNode()}isEmpty(){return null===this._root}insertExact(t,e){for(var r=this._root,n=this._root,i=!0,o=!0;null!==r;){if(null!==r&&t.distance(r.getCoordinate())<=this._tolerance)return r.increment(),r;o=i?t.x<r.getX():t.y<r.getY(),n=r,r=o?r.getLeft():r.getRight(),i=!i}this._numberOfNodes=this._numberOfNodes+1;var a=new Wr(t,e);return o?n.setLeft(a):n.setRight(a),a}getClass(){return Xr}get interfaces_(){return[]}}class Hr{constructor(){Hr.constructor_.apply(this,arguments)}visit(t){var e=this._p.distance(t.getCoordinate());if(!(e<=this._tolerance))return null;var r=!1;(null===this._matchNode||e<this._matchDist||null!==this._matchNode&&e===this._matchDist&&t.getCoordinate().compareTo(this._matchNode.getCoordinate())<1)&&(r=!0),r&&(this._matchNode=t,this._matchDist=e)}queryEnvelope(){var t=new R(this._p);return t.expandBy(this._tolerance),t}getNode(){return this._matchNode}getClass(){return Hr}get interfaces_(){return[Yr]}}Hr.constructor_=function(){this._tolerance=null,this._matchNode=null,this._matchDist=0,this._p=null;let t=arguments[0],e=arguments[1];this._p=t,this._tolerance=e},Xr.BestMatchVisitor=Hr,Xr.constructor_=function(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0===arguments.length)Xr.constructor_.call(this,0);else if(1===arguments.length){let t=arguments[0];this._tolerance=t}};var Zr=Object.freeze({KdTree:Xr});class Kr{constructor(){Kr.constructor_.apply(this,arguments)}static getSubnodeIndex(t,e,r){var n=-1;return t.getMinX()>=e&&(t.getMinY()>=r&&(n=3),t.getMaxY()<=r&&(n=1)),t.getMaxX()<=e&&(t.getMinY()>=r&&(n=2),t.getMaxY()<=r&&(n=0)),n}hasChildren(){for(var t=0;t<4;t++)if(null!==this._subnode[t])return!0;return!1}isPrunable(){return!(this.hasChildren()||this.hasItems())}addAllItems(t){t.addAll(this._items);for(var e=0;e<4;e++)null!==this._subnode[e]&&this._subnode[e].addAllItems(t);return t}getNodeCount(){for(var t=0,e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+1}size(){for(var t=0,e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+this._items.size()}addAllItemsFromOverlapping(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this._items);for(var r=0;r<4;r++)null!==this._subnode[r]&&this._subnode[r].addAllItemsFromOverlapping(t,e)}visitItems(t,e){for(var r=this._items.iterator();r.hasNext();)e.visitItem(r.next())}hasItems(){return!this._items.isEmpty()}remove(t,e){if(!this.isSearchMatch(t))return!1;for(var r=!1,n=0;n<4;n++)if(null!==this._subnode[n]&&(r=this._subnode[n].remove(t,e))){this._subnode[n].isPrunable()&&(this._subnode[n]=null);break}return r||this._items.remove(e)}visit(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var r=0;r<4;r++)null!==this._subnode[r]&&this._subnode[r].visit(t,e)}getItems(){return this._items}depth(){for(var t=0,e=0;e<4;e++)if(null!==this._subnode[e]){var r=this._subnode[e].depth();r>t&&(t=r)}return t+1}isEmpty(){var t=!0;if(this._items.isEmpty()){for(var e=0;e<4;e++)if(null!==this._subnode[e]&&!this._subnode[e].isEmpty()){t=!1;break}}else t=!1;return t}add(t){this._items.add(t)}getClass(){return Kr}get interfaces_(){return[d]}}function Jr(){}Kr.constructor_=function(){this._items=new C,this._subnode=new Array(4).fill(null)},Jr.exponent=function(t){return function(t,e){var r,n,i,o,a={32:8,64:11}[t];if(o||(r=e<0||1/e<0,isFinite(e)||(o={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[t],r&&(o.d+=1<<t/4-1),n=Math.pow(2,a)-1,i=0)),!o){for(n={32:127,64:1023}[t],i=Math.abs(e);i>=2;)n++,i/=2;for(;i<1&&n>0;)n--,i*=2;n<=0&&(i/=2),32===t&&n>254&&(o={d:r?255:127,c:128,b:0,a:0},n=Math.pow(2,a)-1,i=0)}return n}(64,t)-1023},Jr.powerOf2=function(t){return Math.pow(2,t)};class $r{constructor(){$r.constructor_.apply(this,arguments)}static computeQuadLevel(t){var e=t.getWidth(),r=t.getHeight(),n=e>r?e:r;return Jr.exponent(n)+1}getLevel(){return this._level}computeKey(){if(1===arguments.length){let t=arguments[0];for(this._level=$r.computeQuadLevel(t),this._env=new R,this.computeKey(this._level,t);!this._env.contains(t);)this._level+=1,this.computeKey(this._level,t)}else if(2===arguments.length){let e=arguments[0],r=arguments[1];var t=Jr.powerOf2(e);this._pt.x=Math.floor(r.getMinX()/t)*t,this._pt.y=Math.floor(r.getMinY()/t)*t,this._env.init(this._pt.x,this._pt.x+t,this._pt.y,this._pt.y+t)}}getEnvelope(){return this._env}getCentre(){return new _((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)}getPoint(){return this._pt}getClass(){return $r}get interfaces_(){return[]}}$r.constructor_=function(){this._pt=new _,this._level=0,this._env=null;let t=arguments[0];this.computeKey(t)};class Qr extends Kr{constructor(){super(),Qr.constructor_.apply(this,arguments)}static createNode(t){var e=new $r(t);return new Qr(e.getEnvelope(),e.getLevel())}static createExpanded(t,e){var r=new R(e);null!==t&&r.expandToInclude(t._env);var n=Qr.createNode(r);return null!==t&&n.insertNode(t),n}find(t){var e=Kr.getSubnodeIndex(t,this._centrex,this._centrey);return-1===e?this:null!==this._subnode[e]?this._subnode[e].find(t):this}isSearchMatch(t){return null!==t&&this._env.intersects(t)}getSubnode(t){return null===this._subnode[t]&&(this._subnode[t]=this.createSubnode(t)),this._subnode[t]}getEnvelope(){return this._env}getNode(t){var e=Kr.getSubnodeIndex(t,this._centrex,this._centrey);return-1!==e?this.getSubnode(e).getNode(t):this}createSubnode(t){var e=0,r=0,n=0,i=0;switch(t){case 0:e=this._env.getMinX(),r=this._centrex,n=this._env.getMinY(),i=this._centrey;break;case 1:e=this._centrex,r=this._env.getMaxX(),n=this._env.getMinY(),i=this._centrey;break;case 2:e=this._env.getMinX(),r=this._centrex,n=this._centrey,i=this._env.getMaxY();break;case 3:e=this._centrex,r=this._env.getMaxX(),n=this._centrey,i=this._env.getMaxY()}var o=new R(e,r,n,i);return new Qr(o,this._level-1)}insertNode(t){m.isTrue(null===this._env||this._env.contains(t._env));var e=Kr.getSubnodeIndex(t._env,this._centrex,this._centrey);if(t._level===this._level-1)this._subnode[e]=t;else{var r=this.createSubnode(e);r.insertNode(t),this._subnode[e]=r}}getClass(){return Qr}get interfaces_(){return[]}}Qr.constructor_=function(){this._env=null,this._centrex=null,this._centrey=null,this._level=null;let t=arguments[0],e=arguments[1];this._env=t,this._level=e,this._centrex=(t.getMinX()+t.getMaxX())/2,this._centrey=(t.getMinY()+t.getMaxY())/2};class tn{constructor(){tn.constructor_.apply(this,arguments)}static isZeroWidth(t,e){var r=e-t;if(0===r)return!0;var n=r/Math.max(Math.abs(t),Math.abs(e));return Jr.exponent(n)<=tn.MIN_BINARY_EXPONENT}getClass(){return tn}get interfaces_(){return[]}}tn.constructor_=function(){},tn.MIN_BINARY_EXPONENT=-50;class en extends Kr{constructor(){super(),en.constructor_.apply(this,arguments)}insert(t,e){var r=Kr.getSubnodeIndex(t,en.origin.x,en.origin.y);if(-1===r)return this.add(e),null;var n=this._subnode[r];if(null===n||!n.getEnvelope().contains(t)){var i=Qr.createExpanded(n,t);this._subnode[r]=i}this.insertContained(this._subnode[r],t,e)}isSearchMatch(t){return!0}insertContained(t,e,r){m.isTrue(t.getEnvelope().contains(e));var n=tn.isZeroWidth(e.getMinX(),e.getMaxX()),i=tn.isZeroWidth(e.getMinY(),e.getMaxY());(n||i?t.find(e):t.getNode(e)).add(r)}getClass(){return en}get interfaces_(){return[]}}en.constructor_=function(){},en.origin=new _(0,0);class rn{constructor(){rn.constructor_.apply(this,arguments)}insert(t,e){}remove(t,e){}query(){}getClass(){return rn}get interfaces_(){return[]}}rn.constructor_=function(){};class nn{constructor(){nn.constructor_.apply(this,arguments)}static ensureExtent(t,e){var r=t.getMinX(),n=t.getMaxX(),i=t.getMinY(),o=t.getMaxY();return r!==n&&i!==o?t:(r===n&&(n=(r-=e/2)+e/2),i===o&&(o=(i-=e/2)+e/2),new R(r,n,i,o))}size(){return null!==this._root?this._root.size():0}insert(t,e){this.collectStats(t);var r=nn.ensureExtent(t,this._minExtent);this._root.insert(r,e)}query(){if(1===arguments.length){let e=arguments[0];var t=new ke;return this.query(e,t),t.getItems()}if(2===arguments.length){let t=arguments[0],e=arguments[1];this._root.visit(t,e)}}queryAll(){var t=new C;return this._root.addAllItems(t),t}remove(t,e){var r=nn.ensureExtent(t,this._minExtent);return this._root.remove(r,e)}collectStats(t){var e=t.getWidth();e<this._minExtent&&e>0&&(this._minExtent=e);var r=t.getHeight();r<this._minExtent&&r>0&&(this._minExtent=r)}depth(){return null!==this._root?this._root.depth():0}isEmpty(){return null===this._root||this._root.isEmpty()}getClass(){return nn}get interfaces_(){return[rn,d]}}nn.constructor_=function(){this._root=null,this._minExtent=1,this._root=new en},nn.serialVersionUID=-0x678b60c967a25400;var on=Object.freeze({Quadtree:nn});class an{constructor(){an.constructor_.apply(this,arguments)}getBounds(){}getClass(){return an}get interfaces_(){return[]}}an.constructor_=function(){};class sn{constructor(){sn.constructor_.apply(this,arguments)}getItem(){return this._item}getBounds(){return this._bounds}getClass(){return sn}get interfaces_(){return[an,d]}}sn.constructor_=function(){this._bounds=null,this._item=null;let t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};class ln{constructor(){ln.constructor_.apply(this,arguments)}poll(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}size(){return this._size}reorder(t){for(var e=null,r=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(r)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,r)}clear(){this._size=0,this._items.clear()}peek(){return this.isEmpty()?null:this._items.get(1)}isEmpty(){return 0===this._size}add(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}getClass(){return ln}get interfaces_(){return[]}}ln.constructor_=function(){this._size=null,this._items=null,this._size=0,this._items=new C,this._items.add(null)};class un{constructor(){un.constructor_.apply(this,arguments)}getLevel(){return this._level}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}addChildBoundable(t){m.isTrue(null===this._bounds),this._childBoundables.add(t)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}getClass(){return un}get interfaces_(){return[an,d]}}un.constructor_=function(){if(this._childBoundables=new C,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._level=t}},un.serialVersionUID=0x5a1e55ec41369800;class cn{constructor(){cn.constructor_.apply(this,arguments)}static area(t){return t.getBounds().getArea()}static isComposite(t){return t instanceof un}expandToQueue(t,e){var n=cn.isComposite(this._boundable1),i=cn.isComposite(this._boundable2);if(n&&i)return cn.area(this._boundable1)>cn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new r("neither boundable is composite")}isLeaves(){return!(cn.isComposite(this._boundable1)||cn.isComposite(this._boundable2))}compareTo(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}expand(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new cn(o,e,this._itemDistance);a.getDistance()<n&&r.add(a)}}getBoundable(t){return 0===t?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}getClass(){return cn}get interfaces_(){return[h]}}cn.constructor_=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;let t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};class hn{constructor(){hn.constructor_.apply(this,arguments)}static compareDoubles(t,e){return t>e?1:t<e?-1:0}queryInternal(){if(b(arguments[2],Ie)&&arguments[0]instanceof Object&&arguments[1]instanceof un){let n=arguments[0],i=arguments[2];for(var t=arguments[1].getChildBoundables(),e=0;e<t.size();e++){var r=t.get(e);this.getIntersectsOp().intersects(r.getBounds(),n)&&(r instanceof un?this.queryInternal(n,r,i):r instanceof sn?i.visitItem(r.getItem()):m.shouldNeverReachHere())}}else if(b(arguments[2],O)&&arguments[0]instanceof Object&&arguments[1]instanceof un){let n=arguments[0],i=arguments[2];for(t=arguments[1].getChildBoundables(),e=0;e<t.size();e++)r=t.get(e),this.getIntersectsOp().intersects(r.getBounds(),n)&&(r instanceof un?this.queryInternal(n,r,i):r instanceof sn?i.add(r.getItem()):m.shouldNeverReachHere())}}getNodeCapacity(){return this._nodeCapacity}lastNode(t){return t.get(t.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof un?t+=this.size(r):r instanceof sn&&(t+=1)}return t}}removeItem(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof sn&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)}itemsTree(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new C:t}if(1===arguments.length){let t=arguments[0];for(var e=new C,r=t.getChildBoundables().iterator();r.hasNext();){var n=r.next();if(n instanceof un){var i=this.itemsTree(n);null!==i&&e.add(i)}else n instanceof sn?e.add(n.getItem()):m.shouldNeverReachHere()}return e.size()<=0?null:e}}insert(t,e){m.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new sn(t,e))}boundablesAtLevel(){if(1===arguments.length){let e=arguments[0];var t=new C;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){let t=arguments[0],n=arguments[1],i=arguments[2];if(m.isTrue(t>-2),n.getLevel()===t)return i.add(n),null;for(var e=n.getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof un?this.boundablesAtLevel(t,r,i):(m.isTrue(r instanceof sn),-1===t&&i.add(r))}return null}}query(){if(1===arguments.length){let e=arguments[0];this.build();var t=new C;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t),t}if(2===arguments.length){let t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){let i=arguments[0],o=arguments[1],a=arguments[2];var t=this.removeItem(o,a);if(t)return!0;for(var e=null,r=o.getChildBoundables().iterator();r.hasNext();){var n=r.next();if(this.getIntersectsOp().intersects(n.getBounds(),i)&&n instanceof un&&(t=this.remove(i,n,a))){e=n;break}}return null!==e&&e.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(e),t}}createHigherLevels(t,e){m.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();if(r instanceof un){var n=this.depth(r);n>t&&(t=n)}}return t+1}}createParentBoundables(t,e){m.isTrue(!t.isEmpty());var r=new C;r.add(this.createNode(e));var n=new C(t);Le.sort(n,this.getComparator());for(var i=n.iterator();i.hasNext();){var o=i.next();this.lastNode(r).getChildBoundables().size()===this.getNodeCapacity()&&r.add(this.createNode(e)),this.lastNode(r).addChildBoundable(o)}return r}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}getClass(){return hn}get interfaces_(){return[d]}}hn.IntersectsOp=function(){},hn.constructor_=function(){if(this._root=null,this._built=!1,this._itemBoundables=new C,this._nodeCapacity=null,0===arguments.length)hn.constructor_.call(this,hn.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){let t=arguments[0];m.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}},hn.serialVersionUID=-0x35ef64c82d4c5400,hn.DEFAULT_NODE_CAPACITY=10;class fn{constructor(){fn.constructor_.apply(this,arguments)}distance(t,e){}getClass(){return fn}get interfaces_(){return[]}}fn.constructor_=function(){};class pn extends hn{constructor(){super(),pn.constructor_.apply(this,arguments)}static centreX(t){return pn.avg(t.getMinX(),t.getMaxX())}static avg(t,e){return(t+e)/2}static getItems(t){for(var e=new Array(t.size()).fill(null),r=0;!t.isEmpty();){var n=t.poll();e[r]=n.getBoundable(0).getItem(),r++}return e}static centreY(t){return pn.avg(t.getMinY(),t.getMaxY())}createParentBoundablesFromVerticalSlices(t,e){m.isTrue(t.length>0);for(var r=new C,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r}createNode(t){return new dn(t)}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof R))return super.insert.apply(this,arguments);{let t=arguments[0],e=arguments[1];if(t.isNull())return null;super.insert.call(this,t,e)}}getIntersectsOp(){return pn.intersectsOp}verticalSlices(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new C;for(var a=0;i.hasNext()&&a<r;){var s=i.next();n[o].add(s),a++}}return n}query(){if(1===arguments.length){let t=arguments[0];return super.query.call(this,t)}if(2===arguments.length){let t=arguments[0],e=arguments[1];super.query.call(this,t,e)}}getComparator(){return pn.yComparator}createParentBoundablesFromVerticalSlice(t,e){return super.createParentBoundables.call(this,t,e)}remove(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof R){let t=arguments[0],e=arguments[1];return super.remove.call(this,t,e)}return super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(t,e){m.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),n=new C(t);Le.sort(n,pn.xComparator);var i=this.verticalSlices(n,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(i,e)}nearestNeighbour(){if(1===arguments.length){if(b(arguments[0],fn)){let e=arguments[0];var t=new cn(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof cn){let t=arguments[0];return this.nearestNeighbour(t,i.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof pn&&b(arguments[1],fn)){let e=arguments[0],r=arguments[1];return t=new cn(this.getRoot(),e.getRoot(),r),this.nearestNeighbour(t)}if(arguments[0]instanceof cn&&"number"==typeof arguments[1]){let t=arguments[0];var e=arguments[1],r=null;for((o=new ln).add(t);!o.isEmpty()&&e>0&&!((l=(s=o.poll()).getDistance())>=e);)s.isLeaves()?(e=l,r=s):s.expandToQueue(o,e);return[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}if(arguments[0]instanceof cn&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1];return this.nearestNeighbour(t,i.POSITIVE_INFINITY,e)}}else if(3===arguments.length){if(b(arguments[2],fn)&&arguments[0]instanceof R&&arguments[1]instanceof Object){let e=arguments[2];var n=new sn(arguments[0],arguments[1]);return t=new cn(this.getRoot(),n,e),this.nearestNeighbour(t)[0]}if(Number.isInteger(arguments[2])&&arguments[0]instanceof cn&&"number"==typeof arguments[1]){let t=arguments[0],r=arguments[2];var o;e=arguments[1],(o=new ln).add(t);for(var a=new ln;!o.isEmpty()&&e>=0;){var s,l;if((l=(s=o.poll()).getDistance())>=e)break;s.isLeaves()?a.size()<r?a.add(s):(a.peek().getDistance()>l&&(a.poll(),a.add(s)),e=a.peek().getDistance()):s.expandToQueue(o,e)}return pn.getItems(a)}}else if(4===arguments.length){let e=arguments[2],r=arguments[3];return n=new sn(arguments[0],arguments[1]),t=new cn(this.getRoot(),n,e),this.nearestNeighbour(t,r)}}getClass(){return pn}get interfaces_(){return[rn,d]}}class dn extends un{constructor(){super(),dn.constructor_.apply(this,arguments)}computeBounds(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new R(r.getBounds()):t.expandToInclude(r.getBounds())}return t}getClass(){return dn}get interfaces_(){return[]}}dn.constructor_=function(){let t=arguments[0];un.constructor_.call(this,t)},pn.STRtreeNode=dn,pn.constructor_=function(){if(0===arguments.length)pn.constructor_.call(this,pn.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){let t=arguments[0];hn.constructor_.call(this,t)}},pn.serialVersionUID=0x39920f7d5f261e0,pn.xComparator=new class{get interfaces_(){return[p]}compare(t,e){return hn.compareDoubles(pn.centreX(t.getBounds()),pn.centreX(e.getBounds()))}},pn.yComparator=new class{get interfaces_(){return[p]}compare(t,e){return hn.compareDoubles(pn.centreY(t.getBounds()),pn.centreY(e.getBounds()))}},pn.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(t,e){return t.intersects(e)}},pn.DEFAULT_NODE_CAPACITY=10;var gn=Object.freeze({STRtree:pn}),yn=Object.freeze({kdtree:Zr,quadtree:on,strtree:gn});const mn=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class _n{constructor(t){this.geometryFactory=t||new ae}read(t){let e;const r=(e="string"==typeof t?JSON.parse(t):t).type;if(!vn[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==mn.indexOf(r)?vn[r].call(this,e.coordinates):"GeometryCollection"===r?vn[r].call(this,e.geometries):vn[r].call(this,e)}write(t){const e=t.getGeometryType();if(!bn[e])throw new Error("Geometry is not supported");return bn[e].call(this,t)}}const vn={Feature:function(t){const e={};for(let r in t)e[r]=t[r];if(t.geometry){const r=t.geometry.type;if(!vn[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=vn.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(new _(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new _(t[0],t[1]),new _(t[2],t[1]),new _(t[2],t[3]),new _(t[0],t[3]),new _(t[0],t[1])])},Point:function(t){const e=new _(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(vn.Point.call(this,t[r]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=vn.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(vn.LineString.call(this,t[r]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=vn.coordinates.call(this,t[0]),r=this.geometryFactory.createLinearRing(e),n=[];for(let e=1;e<t.length;++e){var i=t[e],o=vn.coordinates.call(this,i),a=this.geometryFactory.createLinearRing(o);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(vn.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},bn={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:bn.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=bn.Point.call(this,n);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],r=t.getCoordinates();for(let t=0;t<r.length;++t){const n=r[t];e.push(bn.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=bn.LineString.call(this,n);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],r=bn.LineString.call(this,t._shell);e.push(r.coordinates);for(let r=0;r<t._holes.length;++r){const n=t._holes[r],i=bn.LineString.call(this,n);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=bn.Polygon.call(this,n);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=n.getGeometryType();e.push(bn[i].call(this,n))}return{type:"GeometryCollection",geometries:e}}};function xn(t){return[t.x,t.y]}var wn=Object.freeze({GeoJSONReader:class{constructor(t){this.parser=new _n(t||new ae)}read(t){return this.parser.read(t)}},GeoJSONWriter:class{constructor(){this.parser=new _n(this.geometryFactory)}write(t){return this.parser.write(t)}},OL3Parser:class{constructor(t,e){this.geometryFactory=t||new ae,this.ol=e||"undefined"!=typeof ol&&ol}inject(t,e,r,n,i,o,a,s){this.ol={geom:{Point:t,LineString:e,LinearRing:r,Polygon:n,MultiPoint:i,MultiLineString:o,MultiPolygon:a,GeometryCollection:s}}}read(t){const e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0}convertFromPoint(t){const e=t.getCoordinates();return this.geometryFactory.createPoint(new _(e[0],e[1]))}convertFromLineString(t){return this.geometryFactory.createLineString(t.getCoordinates().map((function(t){return new _(t[0],t[1])})))}convertFromLinearRing(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map((function(t){return new _(t[0],t[1])})))}convertFromPolygon(t){const e=t.getLinearRings();var r=null,n=[];for(let t=0;t<e.length;t++){const i=this.convertFromLinearRing(e[t]);0===t?r=i:n.push(i)}return this.geometryFactory.createPolygon(r,n)}convertFromMultiPoint(t){const e=t.getPoints().map((function(t){return this.convertFromPoint(t)}),this);return this.geometryFactory.createMultiPoint(e)}convertFromMultiLineString(t){const e=t.getLineStrings().map((function(t){return this.convertFromLineString(t)}),this);return this.geometryFactory.createMultiLineString(e)}convertFromMultiPolygon(t){const e=t.getPolygons().map((function(t){return this.convertFromPolygon(t)}),this);return this.geometryFactory.createMultiPolygon(e)}convertFromCollection(t){const e=t.getGeometries().map((function(t){return this.read(t)}),this);return this.geometryFactory.createGeometryCollection(e)}write(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}convertToPoint(t){return new this.ol.geom.Point([t.x,t.y])}convertToLineString(t){var e=t._points._coordinates.map(xn);return new this.ol.geom.LineString(e)}convertToLinearRing(t){var e=t._points._coordinates.map(xn);return new this.ol.geom.LinearRing(e)}convertToPolygon(t){var e=[t._shell._points._coordinates.map(xn)];for(let r=0;r<t._holes.length;r++)e.push(t._holes[r]._points._coordinates.map(xn));return new this.ol.geom.Polygon(e)}convertToMultiPoint(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(xn))}convertToMultiLineString(t){var e=[];for(let r=0;r<t._geometries.length;r++)e.push(this.convertToLineString(t._geometries[r]).getCoordinates());return new this.ol.geom.MultiLineString(e)}convertToMultiPolygon(t){var e=[];for(let r=0;r<t._geometries.length;r++)e.push(this.convertToPolygon(t._geometries[r]).getCoordinates());return new this.ol.geom.MultiPolygon(e)}convertToCollection(t){var e=[];for(let n=0;n<t._geometries.length;n++){var r=t._geometries[n];e.push(this.write(r))}return new this.ol.geom.GeometryCollection(e)}},WKTReader:class{constructor(t){this.parser=new le(t||new ae)}read(t){return this.parser.read(t)}},WKTWriter:he});class En{constructor(){En.constructor_.apply(this,arguments)}static relativeSign(t,e){return t<e?-1:t>e?1:0}static compare(t,e,r){if(e.equals2D(r))return 0;var n=En.relativeSign(e.x,r.x),i=En.relativeSign(e.y,r.y);switch(t){case 0:return En.compareValue(n,i);case 1:return En.compareValue(i,n);case 2:return En.compareValue(i,-n);case 3:return En.compareValue(-n,i);case 4:return En.compareValue(-n,-i);case 5:return En.compareValue(-i,-n);case 6:return En.compareValue(-i,n);case 7:return En.compareValue(n,-i)}return m.shouldNeverReachHere("invalid octant value"),0}static compareValue(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}getClass(){return En}get interfaces_(){return[]}}En.constructor_=function(){};class On{constructor(){On.constructor_.apply(this,arguments)}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}compareTo(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:En.compare(this._segmentOctant,this.coord,e.coord)}isEndPoint(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}isInterior(){return this._isInterior}getClass(){return On}get interfaces_(){return[h]}}On.constructor_=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new _(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};class Sn{constructor(){Sn.constructor_.apply(this,arguments)}getSplitCoordinates(){var t=new P;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()}addCollapsedNodes(){var t=new C;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}}print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}findCollapsesFromExistingVertices(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=(this._edge.getCoordinate(e+1),this._edge.getCoordinate(e+2));r.equals2D(n)&&t.add(new A(e+1))}}addEdgeCoordinates(t,e,r){e.segmentIndex,t.segmentIndex;var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new _(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new _(e.coord))}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}}findCollapseIndex(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new A(e[0])),n=i}}getEdge(){return this._edge}addEndpoints(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}createSplitEdge(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new _(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new _(e.coord)),new Pn(o,this._edge.getData())}add(t,e){var r=new On(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(m.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)}checkSplitEdgesCorrectness(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new g("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new g("bad split edge end point at "+i)}getClass(){return Sn}get interfaces_(){return[]}}Sn.constructor_=function(){this._nodeMap=new pt,this._edge=null;let t=arguments[0];this._edge=t};class In{constructor(){In.constructor_.apply(this,arguments)}static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let n=arguments[0],i=arguments[1];if(0===n&&0===i)throw new r("Cannot compute the octant for point ( "+n+", "+i+" )");var t=Math.abs(n),e=Math.abs(i);return n>=0?i>=0?t>=e?0:1:t>=e?7:6:i>=0?t>=e?3:2:t>=e?4:5}if(arguments[0]instanceof _&&arguments[1]instanceof _){let t=arguments[0],e=arguments[1];var n=e.x-t.x,i=e.y-t.y;if(0===n&&0===i)throw new r("Cannot compute the octant for two identical points "+t);return In.octant(n,i)}}getClass(){return In}get interfaces_(){return[]}}In.constructor_=function(){};class Cn{constructor(){Cn.constructor_.apply(this,arguments)}getCoordinates(){}size(){}getCoordinate(t){}isClosed(){}setData(t){}getData(){}getClass(){return Cn}get interfaces_(){return[]}}Cn.constructor_=function(){};class Tn{constructor(){Tn.constructor_.apply(this,arguments)}addIntersection(t,e){}getClass(){return Tn}get interfaces_(){return[Cn]}}Tn.constructor_=function(){};class Pn{constructor(){Pn.constructor_.apply(this,arguments)}static getNodedSubstrings(){if(1===arguments.length){let e=arguments[0];var t=new C;return Pn.getNodedSubstrings(e,t),t}if(2===arguments.length){let t=arguments[1];for(var e=arguments[0].iterator();e.hasNext();)e.next().getNodeList().addSplitEdges(t)}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}safeOctant(t,e){return t.equals2D(e)?0:In.octant(t,e)}getData(){return this._data}addIntersection(){if(2===arguments.length){let t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){let e=arguments[1],r=arguments[3];var t=new _(arguments[0].getIntersection(r));this.addIntersection(t,e)}}toString(){return he.toLineString(new Kt(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)}addIntersections(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)}getClass(){return Pn}get interfaces_(){return[Tn]}}Pn.constructor_=function(){this._nodeList=new Sn(this),this._pts=null,this._data=null;let t=arguments[0],e=arguments[1];this._pts=t,this._data=e};class Rn{constructor(){Rn.constructor_.apply(this,arguments)}overlap(){if(2===arguments.length);else if(4===arguments.length){let t=arguments[1],e=arguments[2],r=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}getClass(){return Rn}get interfaces_(){return[]}}Rn.constructor_=function(){this._overlapSeg1=new de,this._overlapSeg2=new de};class Ln{constructor(){Ln.constructor_.apply(this,arguments)}getLineSegment(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}computeSelect(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(r-e==1)return n.select(this,e),null;if(!t.intersects(i,o))return null;var a=Math.trunc((e+r)/2);e<a&&this.computeSelect(t,e,a,n),a<r&&this.computeSelect(t,a,r,n)}getCoordinates(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t}computeOverlaps(){if(2===arguments.length){let t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){let r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(n-r==1&&a-o==1)return s.overlap(this,r,i,o),null;if(!this.overlaps(r,n,i,o,a))return null;var t=Math.trunc((r+n)/2),e=Math.trunc((o+a)/2);r<t&&(o<e&&this.computeOverlaps(r,t,i,o,e,s),e<a&&this.computeOverlaps(r,t,i,e,a,s)),t<n&&(o<e&&this.computeOverlaps(t,n,i,o,e,s),e<a&&this.computeOverlaps(t,n,i,e,a,s))}}setId(t){this._id=t}select(t,e){this.computeSelect(t,this._start,this._end,e)}getEnvelope(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new R(t,e)}return this._env}overlaps(t,e,r,n,i){return R.intersects(this._pts[t],this._pts[e],r._pts[n],r._pts[i])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}getClass(){return Ln}get interfaces_(){return[]}}Ln.constructor_=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};class Mn{constructor(){Mn.constructor_.apply(this,arguments)}static getChainStartIndices(t){var e=0,r=new C;r.add(new A(e));do{var n=Mn.findChainEnd(t,e);r.add(new A(n)),e=n}while(e<t.length-1);return Mn.toIntArray(r)}static findChainEnd(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=fr.quadrant(t[r],t[r+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||fr.quadrant(t[i-1],t[i])===n);)i++;return i-1}static getChains(){if(1===arguments.length){let t=arguments[0];return Mn.getChains(t,null)}if(2===arguments.length){let i=arguments[0],o=arguments[1];for(var t=new C,e=Mn.getChainStartIndices(i),r=0;r<e.length-1;r++){var n=new Ln(i,e[r],e[r+1],o);t.add(n)}return t}}static toIntArray(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}getClass(){return Mn}get interfaces_(){return[]}}Mn.constructor_=function(){};class Nn{constructor(){Nn.constructor_.apply(this,arguments)}computeNodes(t){}getNodedSubstrings(){}getClass(){return Nn}get interfaces_(){return[]}}Nn.constructor_=function(){};class An{constructor(){An.constructor_.apply(this,arguments)}setSegmentIntersector(t){this._segInt=t}getClass(){return An}get interfaces_(){return[Nn]}}An.constructor_=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this.setSegmentIntersector(t)}};class kn extends An{constructor(){super(),kn.constructor_.apply(this,arguments)}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return Pn.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(t){for(var e=Mn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var r=e.next();r.setId(this._idCounter++),this._index.insert(r.getEnvelope(),r),this._monoChains.add(r)}}computeNodes(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}intersectChains(){for(var t=new jn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var r=e.next(),n=this._index.query(r.getEnvelope()).iterator();n.hasNext();){var i=n.next();if(i.getId()>r.getId()&&(r.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}}getClass(){return kn}get interfaces_(){return[]}}class jn extends Rn{constructor(){super(),jn.constructor_.apply(this,arguments)}overlap(){if(4!==arguments.length)return super.overlap.apply(this,arguments);{let r=arguments[1],n=arguments[2],i=arguments[3];var t=arguments[0].getContext(),e=n.getContext();this._si.processIntersections(t,r,e,i)}}getClass(){return jn}get interfaces_(){return[]}}jn.constructor_=function(){this._si=null;let t=arguments[0];this._si=t},kn.SegmentOverlapAction=jn,kn.constructor_=function(){if(this._monoChains=new C,this._index=new pn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){let t=arguments[0];An.constructor_.call(this,t)}};class Fn{constructor(){Fn.constructor_.apply(this,arguments)}rescale(){if(b(arguments[0],w))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){let e=arguments[0];for(2===e.length&&(new _(e[0]),new _(e[1])),t=0;t<e.length;t++)e[t].x=e[t].x/this._scaleFactor+this._offsetX,e[t].y=e[t].y/this._scaleFactor+this._offsetY;2===e.length&&e[0].equals2D(e[1])&&G.out.println(e)}}scale(){if(b(arguments[0],w)){let n=arguments[0];for(var t=new C(n.size()),e=n.iterator();e.hasNext();){var r=e.next();t.add(new Pn(this.scale(r.getCoordinates()),r.getData()))}return t}if(arguments[0]instanceof Array){let t=arguments[0];var n=new Array(t.length).fill(null);for(e=0;e<t.length;e++)n[e]=new _(Math.round((t[e].x-this._offsetX)*this._scaleFactor),Math.round((t[e].y-this._offsetY)*this._scaleFactor),t[e].z);return Q.removeRepeatedPoints(n)}}isIntegerPrecision(){return 1===this._scaleFactor}getNodedSubstrings(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}computeNodes(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}getClass(){return Fn}get interfaces_(){return[Nn]}}Fn.constructor_=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){let t=arguments[0],e=arguments[1];Fn.constructor_.call(this,t,e,0,0)}else if(4===arguments.length){let t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._isScaled=!this.isIntegerPrecision()}};var Dn=Object.freeze({MCIndexNoder:kn,ScaledNoder:Fn,SegmentString:Cn});class Gn{constructor(){Gn.constructor_.apply(this,arguments)}static isSimple(){return 1===arguments.length?new Gn(arguments[0]).isSimple():2===arguments.length?new Gn(arguments[0],arguments[1]).isSimple():void 0}isSimpleMultiPoint(t){if(t.isEmpty())return!0;for(var e=new yt,r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r).getCoordinate();if(e.contains(n))return this._nonSimpleLocation=n,!1;e.add(n)}return!0}isSimplePolygonal(t){for(var e=Ae.getLines(t).iterator();e.hasNext();){var r=e.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0}hasClosedEndpointIntersection(t){for(var e=new pt,r=t.getEdgeIterator();r.hasNext();){var n=r.next(),i=(n.getMaximumSegmentIndex(),n.isClosed()),o=n.getCoordinate(0);this.addEndpoint(e,o,i);var a=n.getCoordinate(n.getNumPoints()-1);this.addEndpoint(e,a,i)}for(r=e.values().iterator();r.hasNext();){var s=r.next();if(s.isClosed&&2!==s.degree)return this._nonSimpleLocation=s.getCoordinate(),!0}return!1}getNonSimpleLocation(){return this._nonSimpleLocation}isSimpleLinearGeometry(t){if(t.isEmpty())return!0;var e=new Vr(0,t),r=new pe,n=e.computeSelfNodes(r,!0);return!(n.hasIntersection()&&(n.hasProperIntersection()?(this._nonSimpleLocation=n.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this._isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))}hasNonEndpointIntersection(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getMaximumSegmentIndex(),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next();if(!o.isEndPoint(n))return this._nonSimpleLocation=o.getCoordinate(),!0}return!1}addEndpoint(t,e,r){var n=t.get(e);null===n&&(n=new Un(e),t.put(e,n)),n.addEndpoint(r)}computeSimple(t){return this._nonSimpleLocation=null,!!t.isEmpty()||(t instanceof jt||t instanceof Ot?this.isSimpleLinearGeometry(t):t instanceof zt?this.isSimpleMultiPoint(t):b(t,Ut)?this.isSimplePolygonal(t):!(t instanceof Et)||this.isSimpleGeometryCollection(t))}isSimple(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)}isSimpleGeometryCollection(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);if(!this.computeSimple(r))return!1}return!0}getClass(){return Gn}get interfaces_(){return[]}}class Un{constructor(){Un.constructor_.apply(this,arguments)}addEndpoint(t){this.degree++,this.isClosed|=t}getCoordinate(){return this.pt}getClass(){return Un}get interfaces_(){return[]}}Un.constructor_=function(){this.pt=null,this.isClosed=null,this.degree=null;let t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0},Gn.EndpointInfo=Un,Gn.constructor_=function(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length){let t=arguments[0];this._inputGeom=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._inputGeom=t,this._isClosedEndpointsInInterior=!e.isInBoundary(2)}};class Bn{constructor(){Bn.constructor_.apply(this,arguments)}static bufferDistanceError(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}getEndCapStyle(){return this._endCapStyle}isSingleSided(){return this._isSingleSided}setQuadrantSegments(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Bn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Bn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Bn.JOIN_ROUND&&(this._quadrantSegments=Bn.DEFAULT_QUADRANT_SEGMENTS)}getJoinStyle(){return this._joinStyle}setJoinStyle(t){this._joinStyle=t}setSimplifyFactor(t){this._simplifyFactor=t<0?0:t}getSimplifyFactor(){return this._simplifyFactor}getQuadrantSegments(){return this._quadrantSegments}setEndCapStyle(t){this._endCapStyle=t}getMitreLimit(){return this._mitreLimit}setMitreLimit(t){this._mitreLimit=t}setSingleSided(t){this._isSingleSided=t}getClass(){return Bn}get interfaces_(){return[]}}Bn.constructor_=function(){if(this._quadrantSegments=Bn.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=Bn.CAP_ROUND,this._joinStyle=Bn.JOIN_ROUND,this._mitreLimit=Bn.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=Bn.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(e)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.setQuadrantSegments(t),this.setEndCapStyle(e),this.setJoinStyle(r),this.setMitreLimit(n)}},Bn.CAP_ROUND=1,Bn.CAP_FLAT=2,Bn.CAP_SQUARE=3,Bn.JOIN_ROUND=1,Bn.JOIN_MITRE=2,Bn.JOIN_BEVEL=3,Bn.DEFAULT_QUADRANT_SEGMENTS=8,Bn.DEFAULT_MITRE_LIMIT=5,Bn.DEFAULT_SIMPLIFY_FACTOR=.01;class zn{constructor(){zn.constructor_.apply(this,arguments)}getCoordinate(){return this._minCoord}getRightmostSide(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r}findRightmostEdgeAtVertex(){var t=this._minDe.getEdge().getCoordinates();m.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=D.index(this._minCoord,r,e),i=!1;(e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===D.COUNTERCLOCKWISE||e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===D.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)}getRightmostSideOfSegment(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=xr.LEFT;return r[e].y<r[e+1].y&&(n=xr.RIGHT),n}getEdge(){return this._orientedDe}checkForRightmostCoordinate(t){for(var e=t.getEdge().getCoordinates(),r=0;r<e.length-1;r++)(null===this._minCoord||e[r].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=r,this._minCoord=e[r])}findRightmostEdgeAtNode(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}findEdge(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}m.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===xr.LEFT&&(this._orientedDe=this._minDe.getSym())}getClass(){return zn}get interfaces_(){return[]}}function Vn(){this.array_=[]}zn.constructor_=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null},Vn.prototype.addLast=function(t){this.array_.push(t)},Vn.prototype.removeFirst=function(){return this.array_.shift()},Vn.prototype.isEmpty=function(){return 0===this.array_.length};class qn{constructor(){qn.constructor_.apply(this,arguments)}clearVisitedEdges(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}getRightmostCoordinate(){return this._rightMostCoord}computeNodeDepth(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();)if((n=r.next()).isVisited()||n.getSym().isVisited()){e=n;break}if(null===e)throw new Gr("unable to find edge to compute depths at "+t.getCoordinate());for(t.getEdges().computeDepths(e),r=t.getEdges().iterator();r.hasNext();){var n;(n=r.next()).setVisited(!0),this.copySymDepths(n)}}computeDepth(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(xr.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}create(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}findResultEdges(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(xr.RIGHT)>=1&&e.getDepth(xr.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}computeDepths(t){var e=new ot,r=new Vn,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(r.addLast(s),e.add(s))}}}}compareTo(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}getEnvelope(){if(null===this._env){for(var t=new R,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env}addReachable(t){var e=new Je;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}}copySymDepths(t){var e=t.getSym();e.setDepth(xr.LEFT,t.getDepth(xr.RIGHT)),e.setDepth(xr.RIGHT,t.getDepth(xr.LEFT))}add(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}}getNodes(){return this._nodes}getDirectedEdges(){return this._dirEdgeList}getClass(){return qn}get interfaces_(){return[h]}}qn.constructor_=function(){this._finder=null,this._dirEdgeList=new C,this._nodes=new C,this._rightMostCoord=null,this._env=null,this._finder=new zn};class Yn{constructor(){Yn.constructor_.apply(this,arguments)}computeRing(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=D.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(t){this._startDe=t;var e=t,r=!0;do{if(null===e)throw new Gr("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Gr("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();m.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),r),r=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(t){return this._pts.get(t)}computeMaxNodeDegree(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}addPoints(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else for(i=n.length-2,r&&(i=n.length-1),o=i;o>=0;o--)this._pts.add(n[o])}isHole(){return this._isHole}setInResult(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}containsPoint(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ue.isInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();)if(r.next().containsPoint(t))return!1;return!0}addHole(t){this._holes.add(t)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){let t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){let e=arguments[1];var t=arguments[0].getLocation(e,xr.RIGHT);if(t===ge.NONE)return null;if(this._label.getLocation(e)===ge.NONE)return this._label.setLocation(e,t),null}}setShell(t){this._shell=t,null!==t&&t.addHole(this)}toPolygon(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}getClass(){return Yn}get interfaces_(){return[]}}Yn.constructor_=function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new C,this._pts=new C,this._label=new Tr(ge.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new C,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}};class Wn extends Yn{constructor(){super(),Wn.constructor_.apply(this,arguments)}setEdgeRing(t,e){t.setMinEdgeRing(e)}getNext(t){return t.getNextMin()}getClass(){return Wn}get interfaces_(){return[]}}Wn.constructor_=function(){let t=arguments[0],e=arguments[1];Yn.constructor_.call(this,t,e)};class Xn extends Yn{constructor(){super(),Xn.constructor_.apply(this,arguments)}buildMinimalRings(){var t=new C,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new Wn(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t}setEdgeRing(t,e){t.setEdgeRing(e)}linkDirectedEdgesForMinimalEdgeRings(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}getNext(t){return t.getNext()}getClass(){return Xn}get interfaces_(){return[]}}Xn.constructor_=function(){let t=arguments[0],e=arguments[1];Yn.constructor_.call(this,t,e)};class Hn{constructor(){Hn.constructor_.apply(this,arguments)}sortShellsAndHoles(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}}computePolygons(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e}placeFreeHoles(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new Gr("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}}buildMinimalEdgeRings(t,e,r){for(var n=new C,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):r.addAll(a)}else n.add(o)}return n}containsPoint(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1}buildMaximalEdgeRings(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Xn(n,this._geometryFactory);e.add(i),i.setInResult()}}return e}placePolygonHoles(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}}getPolygons(){return this.computePolygons(this._shellList)}findEdgeRingContaining(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(n)&&Ue.isInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o}findShell(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return m.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r}add(){if(1===arguments.length){let t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){let n=arguments[0],i=arguments[1];zr.linkResultDirectedEdges(i);var t=this.buildMaximalEdgeRings(n),e=new C,r=this.buildMinimalEdgeRings(t,this._shellList,e);this.sortShellsAndHoles(r,this._shellList,e),this.placeFreeHoles(this._shellList,e)}}getClass(){return Hn}get interfaces_(){return[]}}Hn.constructor_=function(){this._geometryFactory=null,this._shellList=new C;let t=arguments[0];this._geometryFactory=t};class Zn{constructor(){Zn.constructor_.apply(this,arguments)}static simplify(t,e){return new Zn(t).simplify(e)}isDeletable(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[r];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,n)&&this.isShallowSampled(i,o,t,r,n)}deleteShallowConcavities(){for(var t=1,e=(this._inputLine.length,this.findNextNonDeletedIndex(t)),r=this.findNextNonDeletedIndex(e),n=!1;r<this._inputLine.length;){var i=!1;this.isDeletable(t,e,r,this._distanceTol)&&(this._isDeleted[e]=Zn.DELETE,i=!0,n=!0),t=i?r:e,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e)}return n}isShallowConcavity(t,e,r,n){return D.index(t,e,r)===this._angleOrientation&&z.pointToSegment(e,t,r)<n}isShallowSampled(t,e,r,n,i){var o=Math.trunc((n-r)/Zn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=r;a<n;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0}isConcave(t,e,r){return D.index(t,e,r)===this._angleOrientation}simplify(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=D.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}findNextNonDeletedIndex(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Zn.DELETE;)e++;return e}isShallow(t,e,r,n){return z.pointToSegment(e,t,r)<n}collapseLine(){for(var t=new P,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Zn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}getClass(){return Zn}get interfaces_(){return[]}}Zn.constructor_=function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=D.COUNTERCLOCKWISE;let t=arguments[0];this._inputLine=t},Zn.INIT=0,Zn.DELETE=1,Zn.KEEP=1,Zn.NUM_PTS_TO_CHECK=10;class Kn{constructor(){Kn.constructor_.apply(this,arguments)}getCoordinates(){return this._ptList.toArray(Kn.COORDINATE_ARRAY_TYPE)}setPrecisionModel(t){this._precisionModel=t}addPt(t){var e=new _(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}reverse(){}addPts(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(r=t.length-1;r>=0;r--)this.addPt(t[r])}isRedundant(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}toString(){return(new ae).createLineString(this.getCoordinates()).toString()}closeRing(){if(this._ptList.size()<1)return null;var t=new _(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(this._ptList.size()>=2&&this._ptList.get(this._ptList.size()-2),t.equals(e))return null;this._ptList.add(t)}setMinimumVertexDistance(t){this._minimimVertexDistance=t}getClass(){return Kn}get interfaces_(){return[]}}Kn.constructor_=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new C},Kn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);class Jn{constructor(){Jn.constructor_.apply(this,arguments)}addNextSegment(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=D.index(this._s0,this._s1,this._s2),n=r===D.CLOCKWISE&&this._side===xr.LEFT||r===D.COUNTERCLOCKWISE&&this._side===xr.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)}addLineEndCap(t,e){var r=new de(t,e),n=new de;this.computeOffsetSegment(r,xr.LEFT,this._distance,n);var i=new de;this.computeOffsetSegment(r,xr.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Bn.CAP_ROUND:this._segList.addPt(n.p1),this.addDirectedFillet(e,s+Math.PI/2,s-Math.PI/2,D.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Bn.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case Bn.CAP_SQUARE:var l=new _;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new _(n.p1.x+l.x,n.p1.y+l.y),c=new _(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}}getCoordinates(){return this._segList.getCoordinates()}addMitreJoin(t,e,r,n){var i=!0,o=null;try{o=U.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof M))throw t;o=new _(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())}addOutsideTurn(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Jn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Bn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Bn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}createSquare(t){this._segList.addPt(new _(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new _(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new _(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new _(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}addSegments(t,e){this._segList.addPts(t,e)}addFirstSegment(){this._segList.addPt(this._offset1.p0)}addCornerFillet(t,e,r,n,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=r.x-t.x,u=r.y-t.y,c=Math.atan2(u,l);n===D.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,s,c,n,i),this._segList.addPt(r)}addLastSegment(){this._segList.addPt(this._offset1.p1)}initSideSegments(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)}addLimitedMitreJoin(t,e,r,n){var i=this._seg0.p1,o=me.angle(i,this._seg0.p0),a=(me.angle(i,this._seg1.p1),me.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2),s=me.normalize(o+a),l=me.normalize(s+Math.PI),u=n*r,c=r-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),f=i.y+u*Math.sin(l),p=new _(h,f),d=new de(i,p),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===xr.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))}addDirectedFillet(t,e,r,n,i){var o,a=n===D.CLOCKWISE?-1:1,s=Math.abs(e-r),l=Math.trunc(s/this._filletAngleQuantum+.5);if(l<1)return null;o=s/l;for(var u=0,c=new _;u<s;){var h=e+a*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=o}}computeOffsetSegment(t,e,r,n){var i=e===xr.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*r*o/s,u=i*r*a/s;n.p0.x=t.p0.x-u,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-u,n.p1.y=t.p1.y+l}addInsideTurn(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Jn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new _((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new _((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}createCircle(t){var e=new _(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}addBevelJoin(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}init(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Kn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Jn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}addCollinear(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Bn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Bn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,D.CLOCKWISE,this._distance))}closeRing(){this._segList.closeRing()}hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle}getClass(){return Jn}get interfaces_(){return[]}}Jn.constructor_=function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new de,this._seg1=new de,this._offset0=new de,this._offset1=new de,this._side=0,this._hasNarrowConcaveAngle=!1;let t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new pe,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Bn.JOIN_ROUND&&(this._closingSegLengthFactor=Jn.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Jn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Jn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Jn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Jn.MAX_CLOSING_SEG_LEN_FACTOR=80;class $n{constructor(){$n.constructor_.apply(this,arguments)}static copyCoordinates(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new _(t[r]);return e}getOffsetCurve(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&Q.reverse(o),o}computeSingleSidedBufferCurve(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=Zn.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],xr.LEFT),r.addFirstSegment();for(var a=o-2;a>=0;a--)r.addNextSegment(i[a],!0)}else{r.addSegments(t,!1);var s=Zn.simplify(t,n),l=s.length-1;for(r.initSideSegments(s[0],s[1],xr.LEFT),r.addFirstSegment(),a=2;a<=l;a++)r.addNextSegment(s[a],!0)}r.addLastSegment(),r.closeRing()}computeRingBufferCurve(t,e,r){var n=this.simplifyTolerance(this._distance);e===xr.RIGHT&&(n=-n);var i=Zn.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;r.addNextSegment(i[a],s)}r.closeRing()}computeLineBufferCurve(t,e){var r=this.simplifyTolerance(this._distance),n=Zn.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],xr.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var a=Zn.simplify(t,-r),s=a.length-1;for(e.initSideSegments(a[s],a[s-1],xr.LEFT),o=s-2;o>=0;o--)e.addNextSegment(a[o],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()}computePointCurve(t,e){switch(this._bufParams.getEndCapStyle()){case Bn.CAP_ROUND:e.createCircle(t);break;case Bn.CAP_SQUARE:e.createSquare(t)}}getLineCurve(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()}getBufferParameters(){return this._bufParams}simplifyTolerance(t){return t*this._bufParams.getSimplifyFactor()}getRingCurve(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return $n.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()}computeOffsetCurve(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=Zn.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],xr.LEFT),r.addFirstSegment();for(var a=o-2;a>=0;a--)r.addNextSegment(i[a],!0)}else{var s=Zn.simplify(t,n),l=s.length-1;for(r.initSideSegments(s[0],s[1],xr.LEFT),r.addFirstSegment(),a=2;a<=l;a++)r.addNextSegment(s[a],!0)}r.addLastSegment()}getSegGen(t){return new Jn(this._precisionModel,this._bufParams,t)}getClass(){return $n}get interfaces_(){return[]}}$n.constructor_=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;let t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};class Qn{constructor(){Qn.constructor_.apply(this,arguments)}findStabbedSegments(){if(1===arguments.length){let i=arguments[0];for(var t=new C,e=this._subgraphs.iterator();e.hasNext();){var r=e.next(),n=r.getEnvelope();i.y<n.getMinY()||i.y>n.getMaxY()||this.findStabbedSegments(i,r.getDirectedEdges(),t)}return t}if(3===arguments.length)if(b(arguments[2],O)&&arguments[0]instanceof _&&arguments[1]instanceof Ur){let t=arguments[0],r=arguments[1],n=arguments[2];var i=r.getEdge().getCoordinates();for(e=0;e<i.length-1;e++)if(this._seg.p0=i[e],this._seg.p1=i[e+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<t.x||this._seg.isHorizontal()||t.y<this._seg.p0.y||t.y>this._seg.p1.y||D.index(this._seg.p0,this._seg.p1,t)===D.RIGHT)){var o=r.getDepth(xr.LEFT);this._seg.p0.equals(i[e])||(o=r.getDepth(xr.RIGHT));var a=new ti(this._seg,o);n.add(a)}}else if(b(arguments[2],O)&&arguments[0]instanceof _&&b(arguments[1],O)){let t=arguments[0],r=arguments[2];for(e=arguments[1].iterator();e.hasNext();){var s=e.next();s.isForward()&&this.findStabbedSegments(t,s,r)}}}getDepth(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Le.min(e)._leftDepth}getClass(){return Qn}get interfaces_(){return[]}}class ti{constructor(){ti.constructor_.apply(this,arguments)}compareTo(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r||0!=(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)}compareX(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)}toString(){return this._upwardSeg.toString()}getClass(){return ti}get interfaces_(){return[h]}}ti.constructor_=function(){this._upwardSeg=null,this._leftDepth=null;let t=arguments[0],e=arguments[1];this._upwardSeg=new de(t),this._leftDepth=e},Qn.DepthSegment=ti,Qn.constructor_=function(){this._subgraphs=null,this._seg=new de;let t=arguments[0];this._subgraphs=t};class ei{constructor(){ei.constructor_.apply(this,arguments)}addPoint(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,ge.EXTERIOR,ge.INTERIOR)}addPolygon(t){var e=this._distance,r=xr.LEFT;this._distance<0&&(e=-this._distance,r=xr.RIGHT);var n=t.getExteriorRing(),i=Q.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,r,ge.EXTERIOR,ge.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Q.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,xr.opposite(r),ge.INTERIOR,ge.EXTERIOR)}}isTriangleErodedCompletely(t,e){var r=new _e(t[0],t[1],t[2]),n=r.inCentre();return z.pointToSegment(n,r.p0,r.p1)<Math.abs(e)}addLineString(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Q.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,ge.EXTERIOR,ge.INTERIOR)}addCurve(t,e,r){if(null===t||t.length<2)return null;var n=new Pn(t,new Tr(0,ge.BOUNDARY,e,r));this._curveList.add(n)}getCurves(){return this.add(this._inputGeom),this._curveList}addPolygonRing(t,e,r,n,i){if(0===e&&t.length<Vt.MINIMUM_VALID_SIZE)return null;var o=n,a=i;t.length>=Vt.MINIMUM_VALID_SIZE&&D.isCCW(t)&&(o=i,a=n,r=xr.opposite(r));var s=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(s,o,a)}add(t){if(t.isEmpty())return null;if(t instanceof Bt)this.addPolygon(t);else if(t instanceof jt)this.addLineString(t);else if(t instanceof Dt)this.addPoint(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else if(t instanceof qt)this.addCollection(t);else{if(!(t instanceof Et))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}isErodedCompletely(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i}addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}}getClass(){return ei}get interfaces_(){return[]}}ei.constructor_=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new C;let t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};class ri{constructor(){ri.constructor_.apply(this,arguments)}getNextCW(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)}propagateSideLabels(t){for(var e=ge.NONE,r=this.iterator();r.hasNext();)(o=(i=r.next()).getLabel()).isArea(t)&&o.getLocation(t,xr.LEFT)!==ge.NONE&&(e=o.getLocation(t,xr.LEFT));if(e===ge.NONE)return null;var n=e;for(r=this.iterator();r.hasNext();){var i,o;if((o=(i=r.next()).getLabel()).getLocation(t,xr.ON)===ge.NONE&&o.setLocation(t,xr.ON,n),o.isArea(t)){var a=o.getLocation(t,xr.LEFT),s=o.getLocation(t,xr.RIGHT);if(s!==ge.NONE){if(s!==n)throw new Gr("side location conflict",i.getCoordinate());a===ge.NONE&&m.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),n=a}else m.isTrue(o.getLocation(t,xr.LEFT)===ge.NONE,"found single null side"),o.setLocation(t,xr.RIGHT,n),o.setLocation(t,xr.LEFT,n)}}}getCoordinate(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}print(t){G.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,xr.LEFT);m.isTrue(n!==ge.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var a=o.next().getLabel();m.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,xr.LEFT),l=a.getLocation(t,xr.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0}findIndex(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new C(this._edgeMap.values())),this._edgeList}getLocation(t,e,r){return this._ptInAreaLocation[t]===ge.NONE&&(this._ptInAreaLocation[t]=ze.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]}toString(){var t=new N;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=(o=r.next()).getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===ge.BOUNDARY&&(e[i]=!0);for(r=this.iterator();r.hasNext();){var o;for(n=(o=r.next()).getLabel(),i=0;i<2;i++)if(n.isAnyNull(i)){var a=ge.NONE;if(e[i])a=ge.EXTERIOR;else{var s=o.getCoordinate();a=this.getLocation(i,s,t)}n.setAllLocationsIfNull(i,a)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}getClass(){return ri}get interfaces_(){return[]}}ri.constructor_=function(){this._edgeMap=new pt,this._edgeList=null,this._ptInAreaLocation=[ge.NONE,ge.NONE]};class ni extends ri{constructor(){super(),ni.constructor_.apply(this,arguments)}linkResultDirectedEdges(){this.getResultAreaEdges();for(var t=null,e=null,r=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var i=this._resultAreaEdgeList.get(n),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),r){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),r=this._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===t)throw new Gr("no outgoing dirEdge found",this.getCoordinate());m.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}insert(t){var e=t;this.insertEdgeEnd(e,e)}getRightmostEdge(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return fr.isNorthern(i)&&fr.isNorthern(o)?r:fr.isNorthern(i)||fr.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(m.shouldNeverReachHere("found two horizontal edges incident on node"),null):n}print(t){G.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new C;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}updateLabelling(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)}computeDepths(){if(1===arguments.length){let i=arguments[0];var t=this.findIndex(i),e=(i.getLabel(),i.getDepth(xr.LEFT)),r=i.getDepth(xr.RIGHT),n=this.computeDepths(t+1,this._edgeList.size(),e);if(this.computeDepths(0,t,n)!==r)throw new Gr("depth mismatch at "+i.getCoordinate())}else if(3===arguments.length){let t=arguments[1];for(var i=arguments[2],o=arguments[0];o<t;o++){var a=this._edgeList.get(o);a.getLabel(),a.setEdgeDepths(xr.RIGHT,i),i=a.getDepth(xr.LEFT)}return i}}mergeSymLabels(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}linkMinimalDirectedEdges(t){for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;r.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(m.isTrue(null!==e,"found null for first outgoing dirEdge"),m.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(e))}getOutgoingDegree(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){let r=arguments[0];for(t=0,e=this.iterator();e.hasNext();)e.next().getEdgeRing()===r&&t++;return t}}getLabel(){return this._label}findCoveredLineEdges(){for(var t=ge.NONE,e=this.iterator();e.hasNext();){var r=(i=e.next()).getSym();if(!i.isLineEdge()){if(i.isInResult()){t=ge.INTERIOR;break}if(r.isInResult()){t=ge.EXTERIOR;break}}}if(t===ge.NONE)return null;var n=t;for(e=this.iterator();e.hasNext();){var i;r=(i=e.next()).getSym(),i.isLineEdge()?i.getEdge().setCovered(n===ge.INTERIOR):(i.isInResult()&&(n=ge.EXTERIOR),r.isInResult()&&(n=ge.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new Tr(ge.NONE);for(var e=this.iterator();e.hasNext();)for(var r=e.next().getEdge().getLabel(),n=0;n<2;n++){var i=r.getLocation(n);i!==ge.INTERIOR&&i!==ge.BOUNDARY||this._label.setLocation(n,ge.INTERIOR)}}getClass(){return ni}get interfaces_(){return[]}}ni.constructor_=function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2};class ii extends Br{constructor(){super(),ii.constructor_.apply(this,arguments)}createNode(t){return new jr(t,new ni)}getClass(){return ii}get interfaces_(){return[]}}ii.constructor_=function(){};class oi{constructor(){oi.constructor_.apply(this,arguments)}static orientation(t){return 1===Q.increasingDirection(t)}static compareOriented(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,a=e?t.length:-1,s=n?r.length:-1,l=e?0:t.length-1,u=n?0:r.length-1;;){var c=t[l].compareTo(r[u]);if(0!==c)return c;var h=(l+=i)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}}compareTo(t){var e=t;return oi.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}getClass(){return oi}get interfaces_(){return[h]}}oi.constructor_=function(){this._pts=null,this._orientation=null;let t=arguments[0];this._pts=t,this._orientation=oi.orientation(t)};class ai{constructor(){ai.constructor_.apply(this,arguments)}print(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")}addAll(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}findEdgeIndex(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(t){return this._edges.get(t)}findEqualEdge(t){var e=new oi(t.getCoordinates());return this._ocaMap.get(e)}add(t){this._edges.add(t);var e=new oi(t.getCoordinates());this._ocaMap.put(e,t)}getClass(){return ai}get interfaces_(){return[]}}ai.constructor_=function(){this._edges=new C,this._ocaMap=new pt};class si{constructor(){si.constructor_.apply(this,arguments)}processIntersections(t,e,r,n){}isDone(){}getClass(){return si}get interfaces_(){return[]}}si.constructor_=function(){};class li{constructor(){li.constructor_.apply(this,arguments)}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}hasProperInteriorIntersection(){return this._hasProperInterior}getLineIntersector(){return this._li}hasProperIntersection(){return this._hasProper}processIntersections(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}hasIntersection(){return this._hasIntersection}isDone(){return!1}hasInteriorIntersection(){return this._hasInterior}getClass(){return li}get interfaces_(){return[si]}}li.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;let t=arguments[0];this._li=t};class ui{constructor(){ui.constructor_.apply(this,arguments)}static depthDelta(t){var e=t.getLocation(0,xr.LEFT),r=t.getLocation(0,xr.RIGHT);return e===ge.INTERIOR&&r===ge.EXTERIOR?1:e===ge.EXTERIOR&&r===ge.INTERIOR?-1:0}static convertSegStrings(t){for(var e=new ae,r=new C;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)}setWorkingPrecisionModel(t){this._workingPrecisionModel=t}insertUniqueEdge(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Tr(t.getLabel())).flip(),r.merge(n);var i=ui.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ui.depthDelta(t.getLabel()))}buildSubgraphs(t,e){for(var r=new C,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),a=new Qn(r).getDepth(o);i.computeDepth(a),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}}createSubgraphs(t){for(var e=new C,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new qn;i.create(n),e.add(i)}}return Le.sort(e,Le.reverseOrder()),e}createEmptyResultGeometry(){return this._geomFact.createPolygon()}getNoder(t){if(null!==this._workingNoder)return this._workingNoder;var e=new kn,r=new pe;return r.setPrecisionModel(t),e.setSegmentIntersector(new li(r)),e}buffer(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new $n(r,this._bufParams),i=new ei(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new zr(new ii),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Hn(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)}computeNodedEdges(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new kr(i.getCoordinates(),new Tr(a));this.insertUniqueEdge(s)}}}setNoder(t){this._workingNoder=t}getClass(){return ui}get interfaces_(){return[]}}ui.constructor_=function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new ai;let t=arguments[0];this._bufParams=t};class ci{constructor(){ci.constructor_.apply(this,arguments)}checkEndPtVertexIntersections(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length){let n=arguments[0];for(t=arguments[1].iterator();t.hasNext();){e=t.next().getCoordinates();for(var r=1;r<e.length-1;r++)if(e[r].equals(n))throw new g("found endpt/interior pt intersection at index "+r+" :pt "+n)}}}checkInteriorIntersections(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this._segStrings.iterator();r.hasNext();){var n=r.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];for(var i=t.getCoordinates(),o=e.getCoordinates(),a=0;a<i.length-1;a++)for(var s=0;s<o.length-1;s++)this.checkInteriorIntersections(t,a,e,s)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];if(t===r&&e===n)return null;var l=t.getCoordinates()[e],u=t.getCoordinates()[e+1],c=r.getCoordinates()[n],h=r.getCoordinates()[n+1];if(this._li.computeIntersection(l,u,c,h),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,l,u)||this.hasInteriorIntersection(this._li,c,h)))throw new g("found non-noded intersection at "+l+"-"+u+" and "+c+"-"+h)}}checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}checkCollapses(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length){var r=arguments[0].getCoordinates();for(t=0;t<r.length-2;t++)this.checkCollapse(r[t],r[t+1],r[t+2])}}hasInteriorIntersection(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1}checkCollapse(t,e,r){if(t.equals(r))throw new g("found non-noded collapse at "+ci.fact.createLineString([t,e,r]))}getClass(){return ci}get interfaces_(){return[]}}ci.constructor_=function(){this._li=new pe,this._segStrings=null;let t=arguments[0];this._segStrings=t},ci.fact=new ae;class hi{constructor(){hi.constructor_.apply(this,arguments)}intersectsScaled(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return m.isTrue(!(a&&s),"Found bad envelope test"),s}initCorners(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new _(this._maxx,this._maxy),this._corner[1]=new _(this._minx,this._maxy),this._corner[2]=new _(this._minx,this._miny),this._corner[3]=new _(this._maxx,this._miny)}intersects(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}scale(t){return Math.round(t*this._scaleFactor)}getCoordinate(){return this._originalPt}copyScaled(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}getSafeEnvelope(){if(null===this._safeEnv){var t=hi.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new R(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}intersectsPixelClosure(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}intersectsToleranceSquare(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||r&&n||t.equals(this._pt)||e.equals(this._pt)))))}addSnappedNode(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)}getClass(){return hi}get interfaces_(){return[]}}hi.constructor_=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;let t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new r("Scale factor must be non-zero");1!==e&&(this._pt=new _(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new _,this._p1Scaled=new _),this.initCorners(this._pt)},hi.SAFE_ENV_EXPANSION_FACTOR=.75;class fi{constructor(){fi.constructor_.apply(this,arguments)}select(){if(1===arguments.length);else if(2===arguments.length){let t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}getClass(){return fi}get interfaces_(){return[]}}fi.constructor_=function(){this.selectedSegment=new de};class pi{constructor(){pi.constructor_.apply(this,arguments)}snap(){if(1===arguments.length){let t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){let r=arguments[0],n=arguments[1],i=arguments[2];var t=r.getSafeEnvelope(),e=new di(r,n,i);return this._index.query(t,new class{get interfaces_(){return[Ie]}visitItem(r){r.select(t,e)}}),e.isNodeAdded()}}getClass(){return pi}get interfaces_(){return[]}}class di extends fi{constructor(){super(),di.constructor_.apply(this,arguments)}isNodeAdded(){return this._isNodeAdded}select(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Ln))return super.select.apply(this,arguments);{let e=arguments[1];var t=arguments[0].getContext();if(null!==this._parentEdge&&t===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(t,e)}}getClass(){return di}get interfaces_(){return[]}}di.constructor_=function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;let t=arguments[0],e=arguments[1],r=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=r},pi.HotPixelSnapAction=di,pi.constructor_=function(){this._index=null;let t=arguments[0];this._index=t};class gi{constructor(){gi.constructor_.apply(this,arguments)}processIntersections(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}}isDone(){return!1}getInteriorIntersections(){return this._interiorIntersections}getClass(){return gi}get interfaces_(){return[si]}}gi.constructor_=function(){this._li=null,this._interiorIntersections=null;let t=arguments[0];this._li=t,this._interiorIntersections=new C};class yi{constructor(){yi.constructor_.apply(this,arguments)}checkCorrectness(t){var e=Pn.getNodedSubstrings(t),r=new ci(e);try{r.checkValid()}catch(t){if(!(t instanceof L))throw t;t.printStackTrace()}}getNodedSubstrings(){return Pn.getNodedSubstrings(this._nodedSegStrings)}snapRound(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)}findInteriorIntersections(t,e){var r=new gi(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()}computeVertexSnaps(){if(b(arguments[0],w))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Pn){let t=arguments[0];for(var r=t.getCoordinates(),n=0;n<r.length;n++){var i=new hi(r[n],this._scaleFactor,this._li);this._pointSnapper.snap(i,t,n)&&t.addIntersection(r[n],n)}}}computeNodes(t){this._nodedSegStrings=t,this._noder=new kn,this._pointSnapper=new pi(this._noder.getIndex()),this.snapRound(t,this._li)}computeIntersectionSnaps(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=new hi(r,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}getClass(){return yi}get interfaces_(){return[Nn]}}yi.constructor_=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;let t=arguments[0];this._pm=t,this._li=new pe,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};class mi{constructor(){mi.constructor_.apply(this,arguments)}static bufferOp(){if(2===arguments.length){let t=arguments[1];return new mi(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof W&&"number"==typeof arguments[1]){let e=arguments[1],r=arguments[2];return(t=new mi(arguments[0])).setQuadrantSegments(r),t.getResultGeometry(e)}if(arguments[2]instanceof Bn&&arguments[0]instanceof W&&"number"==typeof arguments[1]){let e=arguments[1];return(t=new mi(arguments[0],arguments[2])).getResultGeometry(e)}}else if(4===arguments.length){let e=arguments[1],r=arguments[2],n=arguments[3];var t;return(t=new mi(arguments[0])).setQuadrantSegments(r),t.setEndCapStyle(n),t.getResultGeometry(e)}}static precisionScaleFactor(t,e,r){var n=t.getEnvelopeInternal(),i=B.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)}bufferFixedPrecision(t){var e=new Fn(new yi(new ie(1)),t.getScale()),r=new ui(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)}bufferReducedPrecision(){if(0===arguments.length){for(var t=mi.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Gr))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){let t=arguments[0];var e=mi.precisionScaleFactor(this._argGeom,this._distance,t),r=new ie(e);this.bufferFixedPrecision(r)}}computeGeometry(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ie.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}setQuadrantSegments(t){this._bufParams.setQuadrantSegments(t)}bufferOriginalPrecision(){try{var t=new ui(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof g))throw t;this._saveException=t}}getResultGeometry(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}setEndCapStyle(t){this._bufParams.setEndCapStyle(t)}getClass(){return mi}get interfaces_(){return[]}}mi.constructor_=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Bn,this._resultGeometry=null,this._saveException=null,1===arguments.length){let t=arguments[0];this._argGeom=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._argGeom=t,this._bufParams=e}},mi.CAP_ROUND=Bn.CAP_ROUND,mi.CAP_BUTT=Bn.CAP_FLAT,mi.CAP_FLAT=Bn.CAP_FLAT,mi.CAP_SQUARE=Bn.CAP_SQUARE,mi.MAX_PRECISION_DIGITS=12;var _i=Object.freeze({BufferOp:mi,BufferParameters:Bn});class vi{constructor(){vi.constructor_.apply(this,arguments)}static getPolygons(){if(1===arguments.length){let t=arguments[0];return vi.getPolygons(t,new C)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t instanceof Bt?e.add(t):t instanceof Et&&t.apply(new vi(e)),e}}filter(t){t instanceof Bt&&this._comps.add(t)}getClass(){return vi}get interfaces_(){return[xt]}}vi.constructor_=function(){this._comps=null;let t=arguments[0];this._comps=t};class bi{constructor(){bi.constructor_.apply(this,arguments)}isInsideArea(){return this._segIndex===bi.INSIDE_AREA}getCoordinate(){return this._pt}getGeometryComponent(){return this._component}getSegmentIndex(){return this._segIndex}getClass(){return bi}get interfaces_(){return[]}}bi.constructor_=function(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){let t=arguments[0],e=arguments[1];bi.constructor_.call(this,t,bi.INSIDE_AREA,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._component=t,this._segIndex=e,this._pt=r}},bi.INSIDE_AREA=-1;class xi{constructor(){xi.constructor_.apply(this,arguments)}static getPoints(){if(1===arguments.length){let t=arguments[0];return t instanceof Dt?Le.singletonList(t):xi.getPoints(t,new C)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t instanceof Dt?e.add(t):t instanceof Et&&t.apply(new xi(e)),e}}filter(t){t instanceof Dt&&this._pts.add(t)}getClass(){return xi}get interfaces_(){return[xt]}}xi.constructor_=function(){this._pts=null;let t=arguments[0];this._pts=t};class wi{constructor(){wi.constructor_.apply(this,arguments)}static getLocations(t){var e=new C;return t.apply(new wi(e)),e}filter(t){(t instanceof Dt||t instanceof jt||t instanceof Bt)&&this._locations.add(new bi(t,0,t.getCoordinate()))}getClass(){return wi}get interfaces_(){return[xt]}}wi.constructor_=function(){this._locations=null;let t=arguments[0];this._locations=t};class Ei{constructor(){Ei.constructor_.apply(this,arguments)}static distance(t,e){return new Ei(t,e).distance()}static isWithinDistance(t,e,r){return!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>r)&&new Ei(t,e,r).distance()<=r}static nearestPoints(t,e){return new Ei(t,e).nearestPoints()}computeContainmentDistance(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){let t=arguments[0],o=arguments[1];var e=this._geom[t];if(e.getDimension()<2)return null;var r=1-t,n=vi.getPolygons(e);if(n.size()>0){var i=wi.getLocations(this._geom[r]);if(this.computeContainmentDistance(i,n,o),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=o[0],this._minDistanceLocation[t]=o[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&b(arguments[0],O)&&b(arguments[1],O)){let t=arguments[0],e=arguments[1],r=arguments[2];for(var o=0;o<t.size();o++)for(var a=t.get(o),s=0;s<e.size();s++)if(this.computeContainmentDistance(a,e.get(s),r),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof bi&&arguments[1]instanceof Bt){let t=arguments[0],e=arguments[1],r=arguments[2];var l=t.getCoordinate();if(ge.EXTERIOR!==this._ptLocator.locate(l,e))return this._minDistance=0,r[0]=t,r[1]=new bi(e,l),null}}computeMinDistanceLinesPoints(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,r),this._minDistance<=this._terminateDistance)return null}}computeFacetDistance(){var t=new Array(2).fill(null),e=Ae.getLines(this._geom[0]),r=Ae.getLines(this._geom[1]),n=xi.getPoints(this._geom[0]),i=xi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))}nearestLocations(){return this.computeMinDistance(),this._minDistanceLocation}updateMinDistance(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])}nearestPoints(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]}computeMinDistance(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof jt&&arguments[1]instanceof Dt){let i=arguments[0],o=arguments[1],s=arguments[2];if(i.getEnvelopeInternal().distance(o.getEnvelopeInternal())>this._minDistance)return null;for(var t=i.getCoordinates(),e=o.getCoordinate(),r=0;r<t.length-1;r++){if((a=z.pointToSegment(e,t[r],t[r+1]))<this._minDistance){this._minDistance=a;var n=new de(t[r],t[r+1]).closestPoint(e);s[0]=new bi(i,r,n),s[1]=new bi(o,0,e)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof jt&&arguments[1]instanceof jt){let e=arguments[0],n=arguments[1],c=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;t=e.getCoordinates();var i=n.getCoordinates();for(r=0;r<t.length-1;r++)for(var o=0;o<i.length-1;o++){var a;if((a=z.segmentToSegment(t[r],t[r+1],i[o],i[o+1]))<this._minDistance){this._minDistance=a;var s=new de(t[r],t[r+1]),l=new de(i[o],i[o+1]),u=s.closestPoints(l);c[0]=new bi(e,r,u[0]),c[1]=new bi(n,o,u[1])}if(this._minDistance<=this._terminateDistance)return null}}}computeMinDistancePoints(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,r[0]=new bi(i,0,i.getCoordinate()),r[1]=new bi(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}}distance(){if(null===this._geom[0]||null===this._geom[1])throw new r("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)}computeMinDistanceLines(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,r),this._minDistance<=this._terminateDistance)return null}}getClass(){return Ei}get interfaces_(){return[]}}Ei.constructor_=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new br,this._minDistanceLocation=null,this._minDistance=i.MAX_VALUE,2===arguments.length){let t=arguments[0],e=arguments[1];Ei.constructor_.call(this,t,e,0)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=r}};var Oi=Object.freeze({DistanceOp:Ei});class Si{constructor(){Si.constructor_.apply(this,arguments)}getCoordinates(){if(null===this._coordinates){for(var t=0,e=0,r=new P,n=this._directedEdges.iterator();n.hasNext();){var i=n.next();i.getEdgeDirection()?t++:e++,r.add(i.getEdge().getLine().getCoordinates(),!1,i.getEdgeDirection())}this._coordinates=r.toCoordinateArray(),e>t&&Q.reverse(this._coordinates)}return this._coordinates}toLineString(){return this._factory.createLineString(this.getCoordinates())}add(t){this._directedEdges.add(t)}getClass(){return Si}get interfaces_(){return[]}}Si.constructor_=function(){this._factory=null,this._directedEdges=new C,this._coordinates=null;let t=arguments[0];this._factory=t};class Ii{constructor(){Ii.constructor_.apply(this,arguments)}static getComponentWithVisitedState(t,e){for(;t.hasNext();){var r=t.next();if(r.isVisited()===e)return r}return null}static setVisited(t,e){for(;t.hasNext();)t.next().setVisited(e)}static setMarked(t,e){for(;t.hasNext();)t.next().setMarked(e)}setVisited(t){this._isVisited=t}isMarked(){return this._isMarked}setData(t){this._data=t}getData(){return this._data}setMarked(t){this._isMarked=t}getContext(){return this._data}isVisited(){return this._isVisited}setContext(t){this._data=t}getClass(){return Ii}get interfaces_(){return[]}}Ii.constructor_=function(){this._isMarked=!1,this._isVisited=!1,this._data=null};class Ci extends Ii{constructor(){super(),Ci.constructor_.apply(this,arguments)}static toEdges(t){for(var e=new C,r=t.iterator();r.hasNext();)e.add(r.next()._parentEdge);return e}isRemoved(){return null===this._parentEdge}compareDirection(t){return this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:D.index(t._p0,t._p1,this._p1)}getCoordinate(){return this._from.getCoordinate()}print(t){var e=this.getClass().getName(),r=e.lastIndexOf("."),n=e.substring(r+1);t.print("  "+n+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)}getDirectionPt(){return this._p1}getAngle(){return this._angle}compareTo(t){var e=t;return this.compareDirection(e)}getFromNode(){return this._from}getSym(){return this._sym}setEdge(t){this._parentEdge=t}remove(){this._sym=null,this._parentEdge=null}getEdge(){return this._parentEdge}getQuadrant(){return this._quadrant}setSym(t){this._sym=t}getToNode(){return this._to}getEdgeDirection(){return this._edgeDirection}getClass(){return Ci}get interfaces_(){return[h]}}Ci.constructor_=function(){if(this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null,0===arguments.length);else if(4===arguments.length){let r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._from=r,this._to=n,this._edgeDirection=o,this._p0=r.getCoordinate(),this._p1=i;var t=this._p1.x-this._p0.x,e=this._p1.y-this._p0.y;this._quadrant=fr.quadrant(t,e),this._angle=Math.atan2(e,t)}};class Ti extends Ci{constructor(){super(),Ti.constructor_.apply(this,arguments)}getNext(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(m.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}getClass(){return Ti}get interfaces_(){return[]}}Ti.constructor_=function(){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];Ci.constructor_.call(this,t,e,r,n)};class Pi extends Ii{constructor(){super(),Pi.constructor_.apply(this,arguments)}isRemoved(){return null===this._dirEdge}setDirectedEdges(t,e){this._dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)}getDirEdge(){if(Number.isInteger(arguments[0])){let t=arguments[0];return this._dirEdge[t]}if(arguments[0]instanceof Li){let t=arguments[0];return this._dirEdge[0].getFromNode()===t?this._dirEdge[0]:this._dirEdge[1].getFromNode()===t?this._dirEdge[1]:null}}remove(){this._dirEdge=null}getOppositeNode(t){return this._dirEdge[0].getFromNode()===t?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===t?this._dirEdge[1].getToNode():null}getClass(){return Pi}get interfaces_(){return[]}}Pi.constructor_=function(){if(this._dirEdge=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}};class Ri{constructor(){Ri.constructor_.apply(this,arguments)}getNextEdge(t){var e=this.getIndex(t);return this._outEdges.get(this.getIndex(e+1))}getCoordinate(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}iterator(){return this.sortEdges(),this._outEdges.iterator()}sortEdges(){this._sorted||(Le.sort(this._outEdges),this._sorted=!0)}remove(t){this._outEdges.remove(t)}getEdges(){return this.sortEdges(),this._outEdges}getNextCWEdge(t){var e=this.getIndex(t);return this._outEdges.get(this.getIndex(e-1))}getIndex(){if(arguments[0]instanceof Pi){let e=arguments[0];this.sortEdges();for(var t=0;t<this._outEdges.size();t++)if(this._outEdges.get(t).getEdge()===e)return t;return-1}if(arguments[0]instanceof Ci){let e=arguments[0];for(this.sortEdges(),t=0;t<this._outEdges.size();t++)if(this._outEdges.get(t)===e)return t;return-1}if(Number.isInteger(arguments[0])){var e=arguments[0]%this._outEdges.size();return e<0&&(e+=this._outEdges.size()),e}}add(t){this._outEdges.add(t),this._sorted=!1}getDegree(){return this._outEdges.size()}getClass(){return Ri}get interfaces_(){return[]}}Ri.constructor_=function(){this._outEdges=new C,this._sorted=!1};class Li extends Ii{constructor(){super(),Li.constructor_.apply(this,arguments)}static getEdgesBetween(t,e){var r=new ot(Ci.toEdges(t.getOutEdges().getEdges())),n=Ci.toEdges(e.getOutEdges().getEdges());return r.retainAll(n),r}isRemoved(){return null===this._pt}addOutEdge(t){this._deStar.add(t)}getCoordinate(){return this._pt}getOutEdges(){return this._deStar}remove(){if(0===arguments.length)this._pt=null;else if(1===arguments.length){let t=arguments[0];this._deStar.remove(t)}}getIndex(t){return this._deStar.getIndex(t)}getDegree(){return this._deStar.getDegree()}getClass(){return Li}get interfaces_(){return[]}}Li.constructor_=function(){if(this._pt=null,this._deStar=null,1===arguments.length){let t=arguments[0];Li.constructor_.call(this,t,new Ri)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._pt=t,this._deStar=e}};class Mi extends Pi{constructor(){super(),Mi.constructor_.apply(this,arguments)}getLine(){return this._line}getClass(){return Mi}get interfaces_(){return[]}}Mi.constructor_=function(){this._line=null;let t=arguments[0];this._line=t};class Ni{constructor(){Ni.constructor_.apply(this,arguments)}find(t){return this._nodeMap.get(t)}iterator(){return this._nodeMap.values().iterator()}remove(t){return this._nodeMap.remove(t)}values(){return this._nodeMap.values()}add(t){return this._nodeMap.put(t.getCoordinate(),t),t}getClass(){return Ni}get interfaces_(){return[]}}Ni.constructor_=function(){this._nodeMap=new pt};class Ai{constructor(){Ai.constructor_.apply(this,arguments)}findNodesOfDegree(t){for(var e=new C,r=this.nodeIterator();r.hasNext();){var n=r.next();n.getDegree()===t&&e.add(n)}return e}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}remove(){if(arguments[0]instanceof Pi){let t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this._edges.remove(t),t.remove()}else if(arguments[0]instanceof Ci){let t=arguments[0];null!==(e=t.getSym())&&e.setSym(null),t.getFromNode().remove(t),t.remove(),this._dirEdges.remove(t)}else if(arguments[0]instanceof Li){let i=arguments[0];for(var t=i.getOutEdges().getEdges().iterator();t.hasNext();){var e,r=t.next();null!==(e=r.getSym())&&this.remove(e),this._dirEdges.remove(r);var n=r.getEdge();null!==n&&this._edges.remove(n)}this._nodeMap.remove(i.getCoordinate()),i.remove()}}findNode(t){return this._nodeMap.find(t)}getEdges(){return this._edges}nodeIterator(){return this._nodeMap.iterator()}contains(){if(arguments[0]instanceof Pi){let t=arguments[0];return this._edges.contains(t)}if(arguments[0]instanceof Ci){let t=arguments[0];return this._dirEdges.contains(t)}}add(){if(arguments[0]instanceof Li){let t=arguments[0];this._nodeMap.add(t)}else if(arguments[0]instanceof Pi){let t=arguments[0];this._edges.add(t),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))}else if(arguments[0]instanceof Ci){let t=arguments[0];this._dirEdges.add(t)}}getNodes(){return this._nodeMap.values()}getClass(){return Ai}get interfaces_(){return[]}}Ai.constructor_=function(){this._edges=new ot,this._dirEdges=new ot,this._nodeMap=new Ni};class ki extends Ai{constructor(){super(),ki.constructor_.apply(this,arguments)}addEdge(t){if(t.isEmpty())return null;var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var r=e[0],n=e[e.length-1],i=this.getNode(r),o=this.getNode(n),a=new Ti(i,o,e[1],!0),s=new Ti(o,i,e[e.length-2],!1),l=new Mi(t);l.setDirectedEdges(a,s),this.add(l)}getNode(t){var e=this.findNode(t);return null===e&&(e=new Li(t),this.add(e)),e}getClass(){return ki}get interfaces_(){return[]}}ki.constructor_=function(){};class ji{constructor(){ji.constructor_.apply(this,arguments)}buildEdgeStringsForUnprocessedNodes(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(m.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}}buildEdgeStringsForNonDegree2Nodes(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}}buildEdgeStringsForObviousStartNodes(){this.buildEdgeStringsForNonDegree2Nodes()}getMergedLineStrings(){return this.merge(),this._mergedLineStrings}buildEdgeStringsStartingAt(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var r=e.next();r.getEdge().isMarked()||this._edgeStrings.add(this.buildEdgeStringStartingWith(r))}}merge(){if(null!==this._mergedLineStrings)return null;Ii.setMarked(this._graph.nodeIterator(),!1),Ii.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new C,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new C;for(var t=this._edgeStrings.iterator();t.hasNext();){var e=t.next();this._mergedLineStrings.add(e.toLineString())}}buildEdgeStringStartingWith(t){var e=new Si(this._factory),r=t;do{e.add(r),r.getEdge().setMarked(!0),r=r.getNext()}while(null!==r&&r!==t);return e}add(){if(arguments[0]instanceof W)arguments[0].apply(new class{get interfaces_(){return[Y]}filter(t){t instanceof jt&&this.add(t)}});else if(b(arguments[0],w)){let r=arguments[0];this._mergedLineStrings=null;for(var t=r.iterator();t.hasNext();){var e=t.next();this.add(e)}}else if(arguments[0]instanceof jt){let t=arguments[0];null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t)}}buildEdgeStringsForIsolatedLoops(){this.buildEdgeStringsForUnprocessedNodes()}getClass(){return ji}get interfaces_(){return[]}}ji.constructor_=function(){this._graph=new ki,this._mergedLineStrings=null,this._factory=null,this._edgeStrings=null};var Fi=Object.freeze({LineMerger:ji});class Di{constructor(){Di.constructor_.apply(this,arguments)}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:In.octant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}getData(){return this._data}toString(){return he.toLineString(new Kt(this._pts))}getClass(){return Di}get interfaces_(){return[Cn]}}Di.constructor_=function(){this._pts=null,this._data=null;let t=arguments[0],e=arguments[1];this._pts=t,this._data=e};class Gi{constructor(){Gi.constructor_.apply(this,arguments)}static createAllIntersectionsFinder(t){var e=new Gi(t);return e.setFindAllIntersections(!0),e}static createAnyIntersectionFinder(t){return new Gi(t)}static createIntersectionCounter(t){var e=new Gi(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}getInteriorIntersection(){return this._interiorIntersection}setCheckEndSegmentsOnly(t){this._isCheckEndSegmentsOnly=t}getIntersectionSegments(){return this._intSegments}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(t){this._findAllIntersections=t}setKeepIntersections(t){this._keepIntersections=t}processIntersections(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(r,n))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}isEndSegment(t,e){return 0===e||e>=t.size()-2}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}getClass(){return Gi}get interfaces_(){return[si]}}Gi.constructor_=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new C,this._intersectionCount=0,this._keepIntersections=!0;let t=arguments[0];this._li=t,this._interiorIntersection=null};class Ui{constructor(){Ui.constructor_.apply(this,arguments)}static computeIntersections(t){var e=new Ui(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()}execute(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}getIntersections(){return this._segInt.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(t){this._findAllIntersections=t}checkInteriorIntersections(){this._isValid=!0,this._segInt=new Gi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new kn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new Gr(this.getErrorMessage(),this._segInt.getInteriorIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+he.toLineString(t[0],t[1])+" and "+he.toLineString(t[2],t[3])}getClass(){return Ui}get interfaces_(){return[]}}Ui.constructor_=function(){this._li=new pe,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;let t=arguments[0];this._segStrings=t};class Bi{constructor(){Bi.constructor_.apply(this,arguments)}static toSegmentStrings(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Di(n.getCoordinates(),n))}return e}static checkValid(t){new Bi(t).checkValid()}checkValid(){this._nv.checkValid()}getClass(){return Bi}get interfaces_(){return[]}}Bi.constructor_=function(){this._nv=null;let t=arguments[0];this._nv=new Ui(Bi.toSegmentStrings(t))};class zi{constructor(){zi.constructor_.apply(this,arguments)}static map(t,e){return new zi(e).map(t)}map(t){for(var e=new C,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(ae.toGeometryArray(e))}getClass(){return zi}get interfaces_(){return[]}}zi.constructor_=function(){this._mapOp=null;let t=arguments[0];this._mapOp=t};class Vi{constructor(){Vi.constructor_.apply(this,arguments)}collectLines(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next();this.collectLineEdge(r,t,this._lineEdgesList),this.collectBoundaryTouchEdge(r,t,this._lineEdgesList)}}labelIsolatedLine(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)}build(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList}collectLineEdge(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!eo.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))}findCoveredLineEdges(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}}labelIsolatedLines(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}}buildLines(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=(r.getLabel(),this._geometryFactory.createLineString(r.getCoordinates()));this._resultLineList.add(n),r.setInResult(!0)}}collectBoundaryTouchEdge(t,e,r){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(m.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(eo.isResultOfOp(n,e)&&e===eo.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))}getClass(){return Vi}get interfaces_(){return[]}}Vi.constructor_=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new C,this._resultLineList=new C;let t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};class qi{constructor(){qi.constructor_.apply(this,arguments)}filterCoveredNodeToPoint(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}}extractNonCoveredResultNodes(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==eo.INTERSECTION)){var n=r.getLabel();eo.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}}build(t){return this.extractNonCoveredResultNodes(t),this._resultPointList}getClass(){return qi}get interfaces_(){return[]}}qi.constructor_=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new C;let t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};class Yi{constructor(){Yi.constructor_.apply(this,arguments)}static isClosed(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}snapVertices(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new _(o)),0===n&&this._isClosed&&t.set(t.size()-1,new _(o)))}}findSnapForVertex(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null}snapTo(t){var e=new P(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()}snapSegments(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new _(i),!1)}}findSegmentIndexToSnap(t,e){for(var r=i.MAX_VALUE,n=-1,o=0;o<e.size()-1;o++){if(this._seg.p0=e.get(o),this._seg.p1=e.get(o+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var a=this._seg.distance(t);a<this._snapTolerance&&a<r&&(r=a,n=o)}return n}setAllowSnappingToSourceVertices(t){this._allowSnappingToSourceVertices=t}getClass(){return Yi}get interfaces_(){return[]}}Yi.constructor_=function(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new de,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof jt&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];Yi.constructor_.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];this._srcPts=t,this._isClosed=Yi.isClosed(t),this._snapTolerance=e}};class Wi{constructor(){Wi.constructor_.apply(this,arguments)}static snap(t,e,r){var n=new Array(2).fill(null),i=new Wi(t);n[0]=i.snapTo(e,r);var o=new Wi(e);return n[1]=o.snapTo(n[0],r),n}static computeOverlaySnapTolerance(){if(1===arguments.length){let n=arguments[0];var t=Wi.computeSizeBasedSnapTolerance(n),e=n.getPrecisionModel();if(e.getType()===ie.FIXED){var r=1/e.getScale()*2/1.415;r>t&&(t=r)}return t}if(2===arguments.length){let t=arguments[0],e=arguments[1];return Math.min(Wi.computeOverlaySnapTolerance(t),Wi.computeOverlaySnapTolerance(e))}}static computeSizeBasedSnapTolerance(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Wi.SNAP_PRECISION_FACTOR}static snapToSelf(t,e,r){return new Wi(t).snapToSelf(e,r)}snapTo(t,e){var r=this.extractTargetCoordinates(t);return new Xi(e,r).transform(this._srcGeom)}snapToSelf(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new Xi(t,r,!0).transform(this._srcGeom),i=n;return e&&b(i,Ut)&&(i=n.buffer(0)),i}computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10}extractTargetCoordinates(t){for(var e=new yt,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))}computeMinimumSegmentLength(t){for(var e=i.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e}getClass(){return Wi}get interfaces_(){return[]}}Wi.constructor_=function(){this._srcGeom=null;let t=arguments[0];this._srcGeom=t},Wi.SNAP_PRECISION_FACTOR=1e-9;class Xi extends lr{constructor(){super(),Xi.constructor_.apply(this,arguments)}snapLine(t,e){var r=new Yi(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)}transformCoordinates(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)}getClass(){return Xi}get interfaces_(){return[]}}Xi.constructor_=function(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){let t=arguments[0],e=arguments[1];this._snapTolerance=t,this._snapPts=e}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._snapTolerance=t,this._snapPts=e,this._isSelfSnap=r}};class Hi{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new n,this._commonSignExp=null}getCommon(){return i.longBitsToDouble(this._commonBits)}add(t){var e=i.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Hi.signExpBits(this._commonBits),this._isFirst=!1,null):Hi.signExpBits(e)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):(this._commonMantissaBitsCount=Hi.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Hi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))}toString(){if(1===arguments.length){let o=arguments[0];var t=i.longBitsToDouble(o),e="0000000000000000000000000000000000000000000000000000000000000000"+n.toBinaryString(o),r=e.substring(e.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+t+" ]"}}getClass(){return Hi}get interfaces_(){return[]}static getBit(t,e){var r=1<<e%32;return e<32?0!=(t.low&r)?1:0:0!=(t.high&r)?1:0}static signExpBits(t){return t.high>>>20}static zeroLowerBits(t,e){var r="low";if(e>32&&(t.low=0,e%=32,r="high"),e>0){var n=e<32?~((1<<e)-1):0;t[r]&=n}return t}static numCommonMostSigMantissaBits(t,e){for(var r=0,n=52;n>=0;n--){if(Hi.getBit(t,n)!==Hi.getBit(e,n))return r;r++}return 52}}class Zi{constructor(){Zi.constructor_.apply(this,arguments)}addCommonBits(t){var e=new Ji(this._commonCoord);t.apply(e),t.geometryChanged()}removeCommonBits(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new _(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new Ji(e);return t.apply(r),t.geometryChanged(),t}getCommonCoordinate(){return this._commonCoord}add(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}getClass(){return Zi}get interfaces_(){return[]}}class Ki{constructor(){Ki.constructor_.apply(this,arguments)}filter(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)}getCommonCoordinate(){return new _(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}getClass(){return Ki}get interfaces_(){return[X]}}Ki.constructor_=function(){this._commonBitsX=new Hi,this._commonBitsY=new Hi};class Ji{constructor(){Ji.constructor_.apply(this,arguments)}filter(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)}isDone(){return!1}isGeometryChanged(){return!0}getClass(){return Ji}get interfaces_(){return[wt]}}Ji.constructor_=function(){this.trans=null;let t=arguments[0];this.trans=t},Zi.CommonCoordinateFilter=Ki,Zi.Translater=Ji,Zi.constructor_=function(){this._commonCoord=null,this._ccFilter=new Ki};class $i{constructor(){$i.constructor_.apply(this,arguments)}static overlayOp(t,e,r){return new $i(t,e).getResultGeometry(r)}static union(t,e){return $i.overlayOp(t,e,eo.UNION)}static intersection(t,e){return $i.overlayOp(t,e,eo.INTERSECTION)}static symDifference(t,e){return $i.overlayOp(t,e,eo.SYMDIFFERENCE)}static difference(t,e){return $i.overlayOp(t,e,eo.DIFFERENCE)}selfSnap(t){return new Wi(t).snapTo(t,this._snapTolerance)}removeCommonBits(t){this._cbr=new Zi,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e}prepareResult(t){return this._cbr.addCommonBits(t),t}getResultGeometry(t){var e=this.snap(this._geom),r=eo.overlayOp(e[0],e[1],t);return this.prepareResult(r)}checkValid(t){t.isValid()||G.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=Wi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(t){var e=this.removeCommonBits(t);return Wi.snap(e[0],e[1],this._snapTolerance)}getClass(){return $i}get interfaces_(){return[]}}$i.constructor_=function(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;let t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};class Qi{constructor(){Qi.constructor_.apply(this,arguments)}static overlayOp(t,e,r){return new Qi(t,e).getResultGeometry(r)}static union(t,e){return Qi.overlayOp(t,e,eo.UNION)}static intersection(t,e){return Qi.overlayOp(t,e,eo.INTERSECTION)}static symDifference(t,e){return Qi.overlayOp(t,e,eo.SYMDIFFERENCE)}static difference(t,e){return Qi.overlayOp(t,e,eo.DIFFERENCE)}getResultGeometry(t){var e=null,r=!1,n=null;try{e=eo.overlayOp(this._geom[0],this._geom[1],t),r=!0}catch(t){if(!(t instanceof g))throw t;n=t}if(!r)try{e=$i.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof g?n:t}return e}getClass(){return Qi}get interfaces_(){return[]}}Qi.constructor_=function(){this._geom=new Array(2).fill(null);let t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e};class to{constructor(){to.constructor_.apply(this,arguments)}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}getClass(){return to}get interfaces_(){return[]}}to.constructor_=function(){if(this._li=new pe,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){let t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Vr(0,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];to.constructor_.call(this,t,e,H.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Vr(0,t,r),this._arg[1]=new Vr(1,e,r)}};class eo extends to{constructor(){super(),eo.constructor_.apply(this,arguments)}static overlayOp(t,e,r){return new eo(t,e).getResultGeometry(r)}static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return eo.createEmptyResult(eo.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return Qi.overlayOp(t,e,eo.UNION)}static intersection(t,e){if(t.isEmpty()||e.isEmpty())return eo.createEmptyResult(eo.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return zi.map(t,new class{get interfaces_(){return[MapOp]}map(t){return t.intersection(n)}})}if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return Qi.overlayOp(t,e,eo.INTERSECTION)}static symDifference(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return eo.createEmptyResult(eo.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return Qi.overlayOp(t,e,eo.SYMDIFFERENCE)}static resultDimension(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case eo.INTERSECTION:o=Math.min(n,i);break;case eo.UNION:o=Math.max(n,i);break;case eo.DIFFERENCE:o=n;break;case eo.SYMDIFFERENCE:o=Math.max(n,i)}return o}static createEmptyResult(t,e,r,n){var i=null;switch(eo.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection();break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i}static difference(t,e){if(t.isEmpty())return eo.createEmptyResult(eo.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return Qi.overlayOp(t,e,eo.DIFFERENCE)}static isResultOfOp(){if(2===arguments.length){let r=arguments[0],n=arguments[1];var t=r.getLocation(0),e=r.getLocation(1);return eo.isResultOfOp(t,e,n)}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];switch(t===ge.BOUNDARY&&(t=ge.INTERIOR),e===ge.BOUNDARY&&(e=ge.INTERIOR),r){case eo.INTERSECTION:return t===ge.INTERIOR&&e===ge.INTERIOR;case eo.UNION:return t===ge.INTERIOR||e===ge.INTERIOR;case eo.DIFFERENCE:return t===ge.INTERIOR&&e!==ge.INTERIOR;case eo.SYMDIFFERENCE:return t===ge.INTERIOR&&e!==ge.INTERIOR||t!==ge.INTERIOR&&e===ge.INTERIOR}return!1}}insertUniqueEdge(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Tr(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}}isCoveredByLA(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)}computeGeometry(t,e,r,n){var i=new C;return i.addAll(t),i.addAll(e),i.addAll(r),i.isEmpty()?eo.createEmptyResult(n,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)}mergeSymLabels(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()}isCovered(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==ge.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){for(var t=new C,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)}updateNodeLabelling(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}}getResultGeometry(t){return this.computeOverlay(t),this._resultGeom}insertUniqueEdges(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}}computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new C;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Bi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new Hn(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Vi(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new qi(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}labelIncompleteNode(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)}copyPoints(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}}findResultAreaEdges(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getLabel();n.isArea()&&!r.isInteriorAreaEdge()&&eo.isResultOfOp(n.getLocation(0,xr.RIGHT),n.getLocation(1,xr.RIGHT),t)&&r.setInResult(!0)}}computeLabelsFromDepths(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(m.isTrue(!n.isNull(i,xr.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,xr.LEFT,n.getLocation(i,xr.LEFT)),m.isTrue(!n.isNull(i,xr.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,xr.RIGHT,n.getLocation(i,xr.RIGHT))))}}}computeLabelling(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}}isCoveredByA(t){return!!this.isCovered(t,this._resultPolyList)}getClass(){return eo}get interfaces_(){return[]}}eo.constructor_=function(){this._ptLocator=new br,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new ai,this._resultPolyList=new C,this._resultLineList=new C,this._resultPointList=new C;let t=arguments[0],e=arguments[1];to.constructor_.call(this,t,e),this._graph=new zr(new ii),this._geomFact=t.getFactory()},eo.INTERSECTION=1,eo.UNION=2,eo.DIFFERENCE=3,eo.SYMDIFFERENCE=4;var ro=Object.freeze({OverlayOp:eo});class no extends Ci{constructor(){super(),no.constructor_.apply(this,arguments)}getNext(){return this._next}isInRing(){return null!==this._edgeRing}setRing(t){this._edgeRing=t}setLabel(t){this._label=t}getLabel(){return this._label}setNext(t){this._next=t}getRing(){return this._edgeRing}getClass(){return no}get interfaces_(){return[]}}no.constructor_=function(){this._edgeRing=null,this._next=null,this._label=-1;let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];Ci.constructor_.call(this,t,e,r,n)};class io extends Pi{constructor(){super(),io.constructor_.apply(this,arguments)}getLine(){return this._line}getClass(){return io}get interfaces_(){return[]}}io.constructor_=function(){this._line=null;let t=arguments[0];this._line=t};class oo{constructor(){oo.constructor_.apply(this,arguments)}static findDirEdgesInRing(t){var e=t,r=new C;do{r.add(e),e=e.getNext(),m.isTrue(null!==e,"found null DE in ring"),m.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return r}static addEdge(t,e,r){if(e)for(var n=0;n<t.length;n++)r.add(t[n],!1);else for(n=t.length-1;n>=0;n--)r.add(t[n],!1)}static findEdgeRingContaining(t,e){for(var r=t.getRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getRing(),c=u.getEnvelopeInternal();if(!c.equals(n)&&c.contains(n)){i=Q.ptNotInList(r.getCoordinates(),u.getCoordinates());var h=!1;Ue.isInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(a=(o=l).getRing().getEnvelopeInternal())}}return o}isIncluded(){return this._isIncluded}getCoordinates(){if(null===this._ringPts){for(var t=new P,e=this._deList.iterator();e.hasNext();){var r=e.next(),n=r.getEdge();oo.addEdge(n.getLine().getCoordinates(),r.getEdgeDirection(),t)}this._ringPts=t.toCoordinateArray()}return this._ringPts}isIncludedSet(){return this._isIncludedSet}isValid(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),this._ring.isValid())}build(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),m.isTrue(null!==e,"found null DE in ring"),m.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)}isOuterHole(){return!!this._isHole&&!this.hasShell()}getPolygon(){var t=null;if(null!==this._holes){t=new Array(this._holes.size()).fill(null);for(var e=0;e<this._holes.size();e++)t[e]=this._holes.get(e)}return this._factory.createPolygon(this._ring,t)}isHole(){return this._isHole}isProcessed(){return this._isProcessed}addHole(){if(arguments[0]instanceof Vt){let t=arguments[0];null===this._holes&&(this._holes=new C),this._holes.add(t)}else if(arguments[0]instanceof oo){let e=arguments[0];e.setShell(this);var t=e.getRing();null===this._holes&&(this._holes=new C),this._holes.add(t)}}setIncluded(t){this._isIncluded=t,this._isIncludedSet=!0}getOuterHole(){if(this.isHole())return null;for(var t=0;t<this._deList.size();t++){var e=this._deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null}computeHole(){var t=this.getRing();this._isHole=D.isCCW(t.getCoordinates())}hasShell(){return null!==this._shell}isOuterShell(){return null!==this.getOuterHole()}getLineString(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)}toString(){return he.toLineString(new Kt(this.getCoordinates()))}getShell(){return this.isHole()?this._shell:this}add(t){this._deList.add(t)}getRing(){if(null!==this._ring)return this._ring;this.getCoordinates(),this._ringPts.length<3&&G.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(t){if(!(t instanceof L))throw t;G.out.println(this._ringPts)}return this._ring}updateIncluded(){if(this.isHole())return null;for(var t=0;t<this._deList.size();t++){var e=this._deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}}setShell(t){this._shell=t}setProcessed(t){this._isProcessed=t}getClass(){return oo}get interfaces_(){return[]}}class ao{constructor(){ao.constructor_.apply(this,arguments)}compare(t,e){var r=e;return t.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())}getClass(){return ao}get interfaces_(){return[p]}}ao.constructor_=function(){},oo.EnvelopeComparator=ao,oo.constructor_=function(){this._factory=null,this._deList=new C,this._lowestEdge=null,this._ring=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;let t=arguments[0];this._factory=t};class so extends Ai{constructor(){super(),so.constructor_.apply(this,arguments)}static findLabeledEdgeRings(t){for(var e=new C,r=1,n=t.iterator();n.hasNext();){var i=n.next();if(!(i.isMarked()||i.getLabel()>=0)){e.add(i);var o=oo.findDirEdgesInRing(i);so.label(o,r),r++}}return e}static getDegreeNonDeleted(t){for(var e=0,r=t.getOutEdges().getEdges().iterator();r.hasNext();)r.next().isMarked()||e++;return e}static deleteAllEdges(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var r=e.next();r.setMarked(!0);var n=r.getSym();null!==n&&n.setMarked(!0)}}static label(t,e){for(var r=t.iterator();r.hasNext();)r.next().setLabel(e)}static computeNextCWEdges(t){for(var e=null,r=null,n=t.getOutEdges().getEdges().iterator();n.hasNext();){var i=n.next();i.isMarked()||(null===e&&(e=i),null!==r&&r.getSym().setNext(i),r=i)}null!==r&&r.getSym().setNext(e)}static computeNextCCWEdges(t,e){for(var r=null,n=null,i=t.getOutEdges().getEdges(),o=i.size()-1;o>=0;o--){var a=i.get(o),s=a.getSym(),l=null;a.getLabel()===e&&(l=a);var u=null;s.getLabel()===e&&(u=s),null===l&&null===u||(null!==u&&(n=u),null!==l&&(null!==n&&(n.setNext(l),n=null),null===r&&(r=l)))}null!==n&&(m.isTrue(null!==r),n.setNext(r))}static getDegree(t,e){for(var r=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();)n.next().getLabel()===e&&r++;return r}static findIntersectionNodes(t,e){var r=t,n=null;do{var i=r.getFromNode();so.getDegree(i,e)>1&&(null===n&&(n=new C),n.add(i)),r=r.getNext(),m.isTrue(null!==r,"found null DE in ring"),m.isTrue(r===t||!r.isInRing(),"found DE already in ring")}while(r!==t);return n}findEdgeRing(t){var e=new oo(this._factory);return e.build(t),e}computeDepthParity(){if(0===arguments.length)for(;;)return null}computeNextCWEdges(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();so.computeNextCWEdges(e)}}addEdge(t){if(t.isEmpty())return null;var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var r=e[0],n=e[e.length-1],i=this.getNode(r),o=this.getNode(n),a=new no(i,o,e[1],!0),s=new no(o,i,e[e.length-2],!1),l=new io(t);l.setDirectedEdges(a,s),this.add(l)}deleteCutEdges(){this.computeNextCWEdges(),so.findLabeledEdgeRings(this._dirEdges);for(var t=new C,e=this._dirEdges.iterator();e.hasNext();){var r=e.next();if(!r.isMarked()){var n=r.getSym();if(r.getLabel()===n.getLabel()){r.setMarked(!0),n.setMarked(!0);var i=r.getEdge();t.add(i.getLine())}}}return t}getEdgeRings(){this.computeNextCWEdges(),so.label(this._dirEdges,-1);var t=so.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new C,r=this._dirEdges.iterator();r.hasNext();){var n=r.next();if(!n.isMarked()&&!n.isInRing()){var i=this.findEdgeRing(n);e.add(i)}}return e}getNode(t){var e=this.findNode(t);return null===e&&(e=new Li(t),this.add(e)),e}convertMaximalToMinimalEdgeRings(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel(),i=so.findIntersectionNodes(r,n);if(null!==i)for(var o=i.iterator();o.hasNext();){var a=o.next();so.computeNextCCWEdges(a,n)}}}deleteDangles(){for(var t=this.findNodesOfDegree(1),e=new ot,r=new Je,n=t.iterator();n.hasNext();)r.push(n.next());for(;!r.isEmpty();){var i=r.pop();for(so.deleteAllEdges(i),n=i.getOutEdges().getEdges().iterator();n.hasNext();){var o=n.next();o.setMarked(!0);var a=o.getSym();null!==a&&a.setMarked(!0);var s=o.getEdge();e.add(s.getLine());var l=o.getToNode();1===so.getDegreeNonDeleted(l)&&r.push(l)}}return e}getClass(){return so}get interfaces_(){return[]}}so.constructor_=function(){this._factory=null;let t=arguments[0];this._factory=t};class lo{constructor(){lo.constructor_.apply(this,arguments)}static findOuterShells(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getOuterHole();null===n||n.isProcessed()||(r.setIncluded(!0),n.setProcessed(!0))}}static extractPolygons(t,e){for(var r=new C,n=t.iterator();n.hasNext();){var i=n.next();(e||i.isIncluded())&&r.add(i.getPolygon())}return r}static assignHolesToShells(t,e){for(var r=t.iterator();r.hasNext();){var n=r.next();lo.assignHoleToShell(n,e)}}static assignHoleToShell(t,e){var r=oo.findEdgeRingContaining(t,e);null!==r&&r.addHole(t)}static findDisjointShells(t){lo.findOuterShells(t);var e=null;do{e=!1;for(var r=t.iterator();r.hasNext();){var n=r.next();n.isIncludedSet()||(n.updateIncluded(),n.isIncludedSet()||(e=!0))}}while(e)}getGeometry(){return null===this._geomFactory&&(this._geomFactory=new ae),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(ae.toGeometryArray(this._polyList))}getInvalidRingLines(){return this.polygonize(),this._invalidRingLines}findValidRings(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isValid()?e.add(i):r.add(i.getLineString())}}polygonize(){if(null!==this._polyList)return null;if(this._polyList=new C,null===this._graph)return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();var t=this._graph.getEdgeRings(),e=new C;this._invalidRingLines=new C,this._isCheckingRingsValid?this.findValidRings(t,e,this._invalidRingLines):e=t,this.findShellsAndHoles(e),lo.assignHolesToShells(this._holeList,this._shellList),Le.sort(this._shellList,new oo.EnvelopeComparator);var r=!0;this._extractOnlyPolygonal&&(lo.findDisjointShells(this._shellList),r=!1),this._polyList=lo.extractPolygons(this._shellList,r)}getDangles(){return this.polygonize(),this._dangles}getCutEdges(){return this.polygonize(),this._cutEdges}getPolygons(){return this.polygonize(),this._polyList}add(){if(b(arguments[0],w))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof jt){let t=arguments[0];this._geomFactory=t.getFactory(),null===this._graph&&(this._graph=new so(this._geomFactory)),this._graph.addEdge(t)}else arguments[0]instanceof W&&arguments[0].apply(this._lineStringAdder)}setCheckRingsValid(t){this._isCheckingRingsValid=t}findShellsAndHoles(t){this._holeList=new C,this._shellList=new C;for(var e=t.iterator();e.hasNext();){var r=e.next();r.computeHole(),r.isHole()?this._holeList.add(r):this._shellList.add(r)}}getClass(){return lo}get interfaces_(){return[]}}class uo{constructor(){uo.constructor_.apply(this,arguments)}filter(t){t instanceof jt&&this.p.add(t)}getClass(){return uo}get interfaces_(){return[Y]}}uo.constructor_=function(){this.p=null;let t=arguments[0];this.p=t},lo.LineStringAdder=uo,lo.constructor_=function(){if(this._lineStringAdder=new uo(this),this._graph=null,this._dangles=new C,this._cutEdges=new C,this._invalidRingLines=new C,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length)lo.constructor_.call(this,!1);else if(1===arguments.length){let t=arguments[0];this._extractOnlyPolygonal=t}};var co=Object.freeze({Polygonizer:lo});class ho{constructor(){ho.constructor_.apply(this,arguments)}createEdgeEndForNext(t,e,r,n){var i=r.segmentIndex+1;if(i>=t.getNumPoints()&&null===n)return null;var o=t.getCoordinate(i);null!==n&&n.segmentIndex===r.segmentIndex&&(o=n.coord);var a=new Dr(t,r.coord,o,new Tr(t.getLabel()));e.add(a)}createEdgeEndForPrev(t,e,r,n){var i=r.segmentIndex;if(0===r.dist){if(0===i)return null;i--}var o=t.getCoordinate(i);null!==n&&n.segmentIndex>=i&&(o=n.coord);var a=new Tr(t.getLabel());a.flip();var s=new Dr(t,r.coord,o,a);e.add(s)}computeEdgeEnds(){if(1===arguments.length){let n=arguments[0];for(var t=new C,e=n;e.hasNext();){var r=e.next();this.computeEdgeEnds(r,t)}return t}if(2===arguments.length){let t=arguments[0],e=arguments[1];var n=t.getEdgeIntersectionList();n.addEndpoints();var i=n.iterator(),o=null,a=null;if(!i.hasNext())return null;var s=i.next();do{o=a,a=s,s=null,i.hasNext()&&(s=i.next()),null!==a&&(this.createEdgeEndForPrev(t,e,a,o),this.createEdgeEndForNext(t,e,a,s))}while(null!==a)}}getClass(){return ho}get interfaces_(){return[]}}ho.constructor_=function(){};class fo extends Dr{constructor(){super(),fo.constructor_.apply(this,arguments)}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();)e.next().print(t),t.println()}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){for(var r=0,n=!1,i=this.iterator();i.hasNext();)(o=i.next().getLabel().getLocation(t))===ge.BOUNDARY&&r++,o===ge.INTERIOR&&(n=!0);var o=ge.NONE;n&&(o=ge.INTERIOR),r>0&&(o=Vr.determineBoundary(e,r)),this._label.setLocation(t,o)}computeLabelSide(t,e){for(var r=this.iterator();r.hasNext();){var n=r.next();if(n.getLabel().isArea()){var i=n.getLabel().getLocation(t,e);if(i===ge.INTERIOR)return this._label.setLocation(t,e,ge.INTERIOR),null;i===ge.EXTERIOR&&this._label.setLocation(t,e,ge.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,xr.LEFT),this.computeLabelSide(t,xr.RIGHT)}updateIM(t){kr.updateIM(this._label,t)}computeLabel(t){for(var e=!1,r=this.iterator();r.hasNext();)r.next().getLabel().isArea()&&(e=!0);this._label=e?new Tr(ge.NONE,ge.NONE,ge.NONE):new Tr(ge.NONE);for(var n=0;n<2;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)}getClass(){return fo}get interfaces_(){return[]}}fo.constructor_=function(){if(this._edgeEnds=new C,1===arguments.length){let t=arguments[0];fo.constructor_.call(this,null,t)}else if(2===arguments.length){let t=arguments[1];Dr.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new Tr(t.getLabel())),this.insert(t)}};class po extends ri{constructor(){super(),po.constructor_.apply(this,arguments)}updateIM(t){for(var e=this.iterator();e.hasNext();)e.next().updateIM(t)}insert(t){var e=this._edgeMap.get(t);null===e?(e=new fo(t),this.insertEdgeEnd(t,e)):e.insert(t)}getClass(){return po}get interfaces_(){return[]}}po.constructor_=function(){};class go extends jr{constructor(){super(),go.constructor_.apply(this,arguments)}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}getClass(){return go}get interfaces_(){return[]}}go.constructor_=function(){let t=arguments[0],e=arguments[1];jr.constructor_.call(this,t,e)};class yo extends Br{constructor(){super(),yo.constructor_.apply(this,arguments)}createNode(t){return new go(t,new po)}getClass(){return yo}get interfaces_(){return[]}}yo.constructor_=function(){};class mo{constructor(){mo.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._nodes.add(r)}}computeProperIntersectionIM(t,e){var r=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===r&&2===n?i&&e.setAtLeast("212101212"):2===r&&1===n?(i&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===r&&2===n?(i&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===r&&1===n&&o&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(var r=this._arg[t].getEdgeIterator();r.hasNext();){var n=r.next();n.isIsolated()&&(this.labelIsolatedEdge(n,e,this._arg[e].getGeometry()),this._isolatedEdges.add(n))}}labelIsolatedEdge(t,e,r){if(r.getDimension()>0){var n=this._ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,ge.EXTERIOR)}computeIM(){var t=new ye;if(t.set(ge.EXTERIOR,ge.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var r=new ho,n=r.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);var i=r.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg)}copyNodesAndLabels(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._nodes.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this._nodes.find(o.coord);a.getLabel().isNull(t)&&(n===ge.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,ge.INTERIOR))}}labelIsolatedNode(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,r)}computeIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this._nodes.addNode(o.coord);n===ge.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,ge.INTERIOR)}}labelIsolatedNodes(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next(),r=e.getLabel();m.isTrue(r.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(var e=this._isolatedEdges.iterator();e.hasNext();)e.next().updateIM(t);for(var r=this._nodes.iterator();r.hasNext();){var n=r.next();n.updateIM(t),n.updateIMFromEdges(t)}}computeDisjointIM(t){var e=this._arg[0].getGeometry();e.isEmpty()||(t.set(ge.INTERIOR,ge.EXTERIOR,e.getDimension()),t.set(ge.BOUNDARY,ge.EXTERIOR,e.getBoundaryDimension()));var r=this._arg[1].getGeometry();r.isEmpty()||(t.set(ge.EXTERIOR,ge.INTERIOR,r.getDimension()),t.set(ge.EXTERIOR,ge.BOUNDARY,r.getBoundaryDimension()))}getClass(){return mo}get interfaces_(){return[]}}mo.constructor_=function(){this._li=new pe,this._ptLocator=new br,this._arg=null,this._nodes=new Fr(new yo),this._im=null,this._isolatedEdges=new C,this._invalidPoint=null;let t=arguments[0];this._arg=t};class _o{constructor(){_o.constructor_.apply(this,arguments)}static contains(t,e){return new _o(t).contains(e)}isContainedInBoundary(t){if(t instanceof Bt)return!1;if(t instanceof Dt)return this.isPointContainedInBoundary(t);if(t instanceof jt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);if(!this.isContainedInBoundary(r))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){for(var e=t.getCoordinateSequence(),r=new _,n=new _,i=0;i<e.size()-1;i++)if(e.getCoordinate(i,r),e.getCoordinate(i+1,n),!this.isLineSegmentContainedInBoundary(r,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof Dt){let t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof _){let t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}getClass(){return _o}get interfaces_(){return[]}}_o.constructor_=function(){this._rectEnv=null;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal()};class vo{constructor(){vo.constructor_.apply(this,arguments)}intersects(t,e){var r=new R(t,e);if(!this._rectEnv.intersects(r))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var n=t;t=e,e=n}var i=!1;return e.y>t.y&&(i=!0),i?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}getClass(){return vo}get interfaces_(){return[]}}vo.constructor_=function(){this._li=new pe,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;let t=arguments[0];this._rectEnv=t,this._diagUp0=new _(t.getMinX(),t.getMinY()),this._diagUp1=new _(t.getMaxX(),t.getMaxY()),this._diagDown0=new _(t.getMinX(),t.getMaxY()),this._diagDown1=new _(t.getMaxX(),t.getMinY())};class bo{constructor(){bo.constructor_.apply(this,arguments)}applyTo(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var r=t.getGeometryN(e);if(r instanceof Et)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}}getClass(){return bo}get interfaces_(){return[]}}bo.constructor_=function(){this._isDone=!1};class xo{constructor(){xo.constructor_.apply(this,arguments)}static intersects(t,e){return new xo(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new wo(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;var r=new Eo(this._rectangle);if(r.applyTo(t),r.containsPoint())return!0;var n=new Oo(this._rectangle);return n.applyTo(t),!!n.intersects()}getClass(){return xo}get interfaces_(){return[]}}xo.constructor_=function(){this._rectangle=null,this._rectEnv=null;let t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()};class wo extends bo{constructor(){super(),wo.constructor_.apply(this,arguments)}isDone(){return!0===this._intersects}visit(t){var e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)||e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()||e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}getClass(){return wo}get interfaces_(){return[]}}wo.constructor_=function(){this._rectEnv=null,this._intersects=!1;let t=arguments[0];this._rectEnv=t};class Eo extends bo{constructor(){super(),Eo.constructor_.apply(this,arguments)}isDone(){return!0===this._containsPoint}visit(t){if(!(t instanceof Bt))return null;var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;for(var r=new _,n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,r),e.contains(r)&&ze.containsPointInPolygon(r,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}getClass(){return Eo}get interfaces_(){return[]}}Eo.constructor_=function(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;let t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()};class Oo extends bo{constructor(){super(),Oo.constructor_.apply(this,arguments)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;var r=Ae.getLines(t);this.checkIntersectionWithLineStrings(r)}checkIntersectionWithLineStrings(t){for(var e=t.iterator();e.hasNext();){var r=e.next();if(this.checkIntersectionWithSegments(r),this._hasIntersection)return null}}checkIntersectionWithSegments(t){for(var e=t.getCoordinateSequence(),r=1;r<e.size();r++)if(e.getCoordinate(r-1,this._p0),e.getCoordinate(r,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}getClass(){return Oo}get interfaces_(){return[]}}Oo.constructor_=function(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new _,this._p1=new _;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new vo(this._rectEnv)};class So extends to{constructor(){super(),So.constructor_.apply(this,arguments)}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new So(t,e).getIntersectionMatrix().isCovers())}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return xo.intersects(t,e);if(e.isRectangle())return xo.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(var r=0;r<t.getNumGeometries();r++)for(var n=0;n<e.getNumGeometries();n++)if(t.getGeometryN(r).intersects(e.getGeometryN(n)))return!0;return!1}return new So(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new So(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static relate(){return 2===arguments.length?new So(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new So(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new So(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new So(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?_o.contains(t,e):new So(t,e).getIntersectionMatrix().isContains())}getIntersectionMatrix(){return this._relate.computeIM()}getClass(){return So}get interfaces_(){return[]}}So.constructor_=function(){if(this._relate=null,2===arguments.length){let t=arguments[0],e=arguments[1];to.constructor_.call(this,t,e),this._relate=new mo(this._arg)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];to.constructor_.call(this,t,e,r),this._relate=new mo(this._arg)}};var Io=Object.freeze({RelateOp:So});class Co{constructor(){Co.constructor_.apply(this,arguments)}static combine(){if(1===arguments.length)return new Co(arguments[0]).combine();if(2===arguments.length){let t=arguments[0],e=arguments[1];return new Co(Co.createList(t,e)).combine()}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];return new Co(Co.createList(t,e,r)).combine()}}static extractFactory(t){return t.isEmpty()?null:t.iterator().next().getFactory()}static createList(){if(2===arguments.length){let e=arguments[0],r=arguments[1];return(t=new C).add(e),t.add(r),t}if(3===arguments.length){let e=arguments[0],r=arguments[1],n=arguments[2];var t;return(t=new C).add(e),t.add(r),t.add(n),t}}extractElements(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}}combine(){for(var t=new C,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(t)}getClass(){return Co}get interfaces_(){return[]}}Co.constructor_=function(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;let t=arguments[0];this._geomFactory=Co.extractFactory(t),this._inputGeoms=t};class To{constructor(){To.constructor_.apply(this,arguments)}static union(t,e){return new To(t,e).union()}union(){for(var t=new br,e=new yt,r=0;r<this._pointGeom.getNumGeometries();r++){var n=this._pointGeom.getGeometryN(r).getCoordinate();t.locate(n,this._otherGeom)===ge.EXTERIOR&&e.add(n)}if(0===e.size())return this._otherGeom;var i=null,o=Q.toCoordinateArray(e);return i=1===o.length?this._geomFact.createPoint(o[0]):this._geomFact.createMultiPointFromCoords(o),Co.combine(i,this._otherGeom)}getClass(){return To}get interfaces_(){return[]}}To.constructor_=function(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;let t=arguments[0],e=arguments[1];this._pointGeom=t,this._otherGeom=e,this._geomFact=e.getFactory()};class Po{constructor(){Po.constructor_.apply(this,arguments)}static isOfType(t,e){return t.getGeometryType()===e||e===W.TYPENAME_LINESTRING&&t.getGeometryType()===W.TYPENAME_LINEARRING}static extract(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return Po.extract(t,e,new C)}if(3===arguments.length){if(b(arguments[2],O)&&arguments[0]instanceof W&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1],r=arguments[2];return t.getGeometryType()===e?r.add(t):t instanceof Et&&t.apply(new Po(e,r)),r}if(b(arguments[2],O)&&arguments[0]instanceof W&&arguments[1]instanceof Class){let t=arguments[0],e=arguments[1],r=arguments[2];return Po.extract(t,Po.toGeometryType(e),r)}}}filter(t){(null===this._geometryType||Po.isOfType(t,this._geometryType))&&this._comps.add(t)}getClass(){return Po}get interfaces_(){return[xt]}}Po.constructor_=function(){this._geometryType=null,this._comps=null;let t=arguments[0],e=arguments[1];this._geometryType=t,this._comps=e};class Ro{constructor(){Ro.constructor_.apply(this,arguments)}static restrictToPolygons(t){if(b(t,Ut))return t;var e=vi.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ae.toPolygonArray(e))}static getGeometry(t,e){return e>=t.size()?null:t.get(e)}static union(t){return new Ro(t).union()}reduceToGeometries(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next(),i=null;b(n,O)?i=this.unionTree(n):n instanceof W&&(i=n),e.add(i)}return e}extractByEnvelope(t,e,r){for(var n=new C,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)}unionOptimized(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return Co.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)}union(){if(null===this._inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new pn(Ro.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)}binaryUnion(){if(1===arguments.length){let t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2];if(o-i<=1){var t=Ro.getGeometry(n,i);return this.unionSafe(t,null)}if(o-i==2)return this.unionSafe(Ro.getGeometry(n,i),Ro.getGeometry(n,i+1));var e=Math.trunc((o+i)/2),r=(t=this.binaryUnion(n,i,e),this.binaryUnion(n,e,o));return this.unionSafe(t,r)}}repeatedUnion(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e}unionSafe(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)}unionActual(t,e){return Ro.restrictToPolygons(t.union(e))}unionTree(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)}unionUsingEnvelopeIntersection(t,e,r){var n=new C,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),a=this.unionActual(i,o);return n.add(a),Co.combine(n)}bufferUnion(){if(1===arguments.length){let t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t.getFactory().createGeometryCollection([t,e]).buffer(0)}}getClass(){return Ro}get interfaces_(){return[]}}Ro.constructor_=function(){this._inputPolys=null,this._geomFactory=null;let t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new C)},Ro.STRTREE_NODE_CAPACITY=4;class Lo{constructor(){Lo.constructor_.apply(this,arguments)}static union(){if(1===arguments.length){if(b(arguments[0],w))return new Lo(arguments[0]).union();if(arguments[0]instanceof W)return new Lo(arguments[0]).union()}else if(2===arguments.length)return new Lo(arguments[0],arguments[1]).union()}unionNoOpt(t){var e=this._geomFact.createPoint();return Qi.overlayOp(t,e,eo.UNION)}unionWithNull(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)}extract(){if(b(arguments[0],w))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.extract(e)}else if(arguments[0]instanceof W){let t=arguments[0];null===this._geomFact&&(this._geomFact=t.getFactory()),Po.extract(t,W.TYPENAME_POLYGON,this._polygons),Po.extract(t,W.TYPENAME_LINESTRING,this._lines),Po.extract(t,W.TYPENAME_POINT,this._points)}}union(){if(null===this._geomFact)return null;var t=null;if(this._points.size()>0){var e=this._geomFact.buildGeometry(this._points);t=this.unionNoOpt(e)}var r=null;if(this._lines.size()>0){var n=this._geomFact.buildGeometry(this._lines);r=this.unionNoOpt(n)}var i=null;this._polygons.size()>0&&(i=Ro.union(this._polygons));var o=this.unionWithNull(r,i),a=null;return null===(a=null===t?o:null===o?t:To.union(t,o))?this._geomFact.createGeometryCollection():a}getClass(){return Lo}get interfaces_(){return[]}}Lo.constructor_=function(){if(this._polygons=new C,this._lines=new C,this._points=new C,this._geomFact=null,1===arguments.length){if(b(arguments[0],w)){let t=arguments[0];this.extract(t)}else if(arguments[0]instanceof W){let t=arguments[0];this.extract(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._geomFact=e,this.extract(t)}};var Mo=Object.freeze({UnaryUnionOp:Lo});class No{constructor(){No.constructor_.apply(this,arguments)}static findDifferentPoint(t,e){for(var r=0;r<t.length;r++)if(!t[r].equals(e))return t[r];return null}visitInteriorRing(t,e){var r=t.getCoordinates(),n=r[0],i=No.findDifferentPoint(r,n),o=e.findEdgeInSameDirection(n,i),a=e.findEdgeEnd(o),s=null;a.getLabel().getLocation(0,xr.RIGHT)===ge.INTERIOR?s=a:a.getSym().getLabel().getLocation(0,xr.RIGHT)===ge.INTERIOR&&(s=a.getSym()),m.isTrue(null!==s,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(s)}visitShellInteriors(t,e){if(t instanceof Bt){var r=t;this.visitInteriorRing(r.getExteriorRing(),e)}if(t instanceof qt)for(var n=t,i=0;i<n.getNumGeometries();i++)r=n.getGeometryN(i),this.visitInteriorRing(r.getExteriorRing(),e)}getCoordinate(){return this._disconnectedRingcoord}setInteriorEdgesInResult(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var r=e.next();r.getLabel().getLocation(0,xr.RIGHT)===ge.INTERIOR&&r.setInResult(!0)}}visitLinkedDirectedEdges(t){var e=t,r=t;do{m.isTrue(null!==r,"found null Directed Edge"),r.setVisited(!0),r=r.getNext()}while(r!==e)}buildEdgeRings(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&null===n.getEdgeRing()){var i=new Xn(n,this._geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var o=i.buildMinimalRings();e.addAll(o)}}return e}hasUnvisitedShellEdge(t){for(var e=0;e<t.size();e++){var r=t.get(e);if(!r.isHole()){var n=r.getEdges(),i=n.get(0);if(i.getLabel().getLocation(0,xr.RIGHT)===ge.INTERIOR)for(var o=0;o<n.size();o++)if(!(i=n.get(o)).isVisited())return this._disconnectedRingcoord=i.getCoordinate(),!0}}return!1}isInteriorsConnected(){var t=new C;this._geomGraph.computeSplitEdges(t);var e=new zr(new ii);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var r=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(r)}getClass(){return No}get interfaces_(){return[]}}No.constructor_=function(){this._geometryFactory=new ae,this._geomGraph=null,this._disconnectedRingcoord=null;let t=arguments[0];this._geomGraph=t};class Ao{constructor(){Ao.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._nodes.add(r)}}getNodeIterator(){return this._nodes.iterator()}copyNodesAndLabels(t,e){for(var r=t.getNodeIterator();r.hasNext();){var n=r.next();this._nodes.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}}build(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new ho).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)}computeIntersectionNodes(t,e){for(var r=t.getEdgeIterator();r.hasNext();)for(var n=r.next(),i=n.getLabel().getLocation(e),o=n.getEdgeIntersectionList().iterator();o.hasNext();){var a=o.next(),s=this._nodes.addNode(a.coord);i===ge.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,ge.INTERIOR)}}getClass(){return Ao}get interfaces_(){return[]}}Ao.constructor_=function(){this._nodes=new Fr(new yo)};class ko{constructor(){ko.constructor_.apply(this,arguments)}isNodeEdgeAreaLabelsConsistent(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=e.getCoordinate().copy(),!1}return!0}getInvalidPoint(){return this._invalidPoint}hasDuplicateRings(){for(var t=this._nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var r=e.next();if(r.getEdgeEnds().size()>1)return this._invalidPoint=r.getEdge().getCoordinate(0),!0}return!1}isNodeConsistentArea(){var t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}getClass(){return ko}get interfaces_(){return[]}}ko.constructor_=function(){this._li=new pe,this._geomGraph=null,this._nodeGraph=new Ao,this._invalidPoint=null;let t=arguments[0];this._geomGraph=t};class jo{constructor(){jo.constructor_.apply(this,arguments)}buildIndex(){this._index=new pn;for(var t=0;t<this._rings.size();t++){var e=this._rings.get(t),r=e.getEnvelopeInternal();this._index.insert(r,e)}}getNestedPoint(){return this._nestedPt}isNonNested(){this.buildIndex();for(var t=0;t<this._rings.size();t++)for(var e=this._rings.get(t),r=e.getCoordinates(),n=this._index.query(e.getEnvelopeInternal()),i=0;i<n.size();i++){var o=n.get(i),a=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var s=Do.findPtNotNode(r,o,this._graph);if(null!==s&&Ue.isInRing(s,a))return this._nestedPt=s,!1}}return!0}add(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())}getClass(){return jo}get interfaces_(){return[]}}jo.constructor_=function(){this._graph=null,this._rings=new C,this._totalEnv=new R,this._index=null,this._nestedPt=null;let t=arguments[0];this._graph=t};class Fo{constructor(){Fo.constructor_.apply(this,arguments)}getErrorType(){return this._errorType}getMessage(){return Fo.errMsg[this._errorType]}getCoordinate(){return this._pt}toString(){var t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}getClass(){return Fo}get interfaces_(){return[]}}Fo.constructor_=function(){if(this._errorType=null,this._pt=null,1===arguments.length){let t=arguments[0];Fo.constructor_.call(this,t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._errorType=t,null!==e&&(this._pt=e.copy())}},Fo.ERROR=0,Fo.REPEATED_POINT=1,Fo.HOLE_OUTSIDE_SHELL=2,Fo.NESTED_HOLES=3,Fo.DISCONNECTED_INTERIOR=4,Fo.SELF_INTERSECTION=5,Fo.RING_SELF_INTERSECTION=6,Fo.NESTED_SHELLS=7,Fo.DUPLICATE_RINGS=8,Fo.TOO_FEW_POINTS=9,Fo.INVALID_COORDINATE=10,Fo.RING_NOT_CLOSED=11,Fo.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];class Do{constructor(){Do.constructor_.apply(this,arguments)}static findPtNotNode(t,e,r){for(var n=r.findEdge(e).getEdgeIntersectionList(),i=0;i<t.length;i++){var o=t[i];if(!n.isIntersection(o))return o}return null}static isValid(){if(arguments[0]instanceof W)return new Do(arguments[0]).isValid();if(arguments[0]instanceof _){let t=arguments[0];return!(i.isNaN(t.x)||i.isInfinite(t.x)||i.isNaN(t.y)||i.isInfinite(t.y))}}checkInvalidCoordinates(){if(arguments[0]instanceof Array){let e=arguments[0];for(var t=0;t<e.length;t++)if(!Do.isValid(e[t]))return this._validErr=new Fo(Fo.INVALID_COORDINATE,e[t]),null}else if(arguments[0]instanceof Bt){let e=arguments[0];if(this.checkInvalidCoordinates(e.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(t=0;t<e.getNumInteriorRing();t++)if(this.checkInvalidCoordinates(e.getInteriorRingN(t).getCoordinates()),null!==this._validErr)return null}}checkHolesNotNested(t,e){for(var r=new jo(e),n=0;n<t.getNumInteriorRing();n++){var i=t.getInteriorRingN(n);r.add(i)}r.isNonNested()||(this._validErr=new Fo(Fo.NESTED_HOLES,r.getNestedPoint()))}checkConsistentArea(t){var e=new ko(t);if(!e.isNodeConsistentArea())return this._validErr=new Fo(Fo.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this._validErr=new Fo(Fo.DUPLICATE_RINGS,e.getInvalidPoint()))}isValid(){return this.checkValid(this._parentGeometry),null===this._validErr}checkShellInsideHole(t,e,r){var n=t.getCoordinates(),i=e.getCoordinates(),o=Do.findPtNotNode(n,e,r);if(null!==o&&!Ue.isInRing(o,i))return o;var a=Do.findPtNotNode(i,t,r);return null!==a?Ue.isInRing(a,n)?a:null:(m.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}checkNoSelfIntersectingRings(t){for(var e=t.getEdgeIterator();e.hasNext();){var r=e.next();if(this.checkNoSelfIntersectingRing(r.getEdgeIntersectionList()),null!==this._validErr)return null}}checkConnectedInteriors(t){var e=new No(t);e.isInteriorsConnected()||(this._validErr=new Fo(Fo.DISCONNECTED_INTERIOR,e.getCoordinate()))}checkNoSelfIntersectingRing(t){for(var e=new yt,r=!0,n=t.iterator();n.hasNext();){var i=n.next();if(r)r=!1;else{if(e.contains(i.coord))return this._validErr=new Fo(Fo.RING_SELF_INTERSECTION,i.coord),null;e.add(i.coord)}}}checkHolesInShell(t,e){for(var r=t.getExteriorRing(),n=new Fe(r),i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i),a=Do.findPtNotNode(o.getCoordinates(),r,e);if(null===a)return null;if(ge.EXTERIOR===n.locate(a))return this._validErr=new Fo(Fo.HOLE_OUTSIDE_SHELL,a),null}}checkTooFewPoints(t){if(t.hasTooFewPoints())return this._validErr=new Fo(Fo.TOO_FEW_POINTS,t.getInvalidPoint()),null}getValidationError(){return this.checkValid(this._parentGeometry),this._validErr}checkValid(){if(arguments[0]instanceof Dt){let t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof zt){let t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Vt){let r=arguments[0];if(this.checkInvalidCoordinates(r.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(r),null!==this._validErr)return null;var t=new Vr(0,r);if(this.checkTooFewPoints(t),null!==this._validErr)return null;var e=new pe;t.computeSelfNodes(e,!0,!0),this.checkNoSelfIntersectingRings(t)}else if(arguments[0]instanceof jt){let e=arguments[0];if(this.checkInvalidCoordinates(e.getCoordinates()),null!==this._validErr)return null;t=new Vr(0,e),this.checkTooFewPoints(t)}else if(arguments[0]instanceof Bt){let e=arguments[0];if(this.checkInvalidCoordinates(e),null!==this._validErr)return null;if(this.checkClosedRings(e),null!==this._validErr)return null;if(t=new Vr(0,e),this.checkTooFewPoints(t),null!==this._validErr)return null;if(this.checkConsistentArea(t),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(t),null!==this._validErr))return null;if(this.checkHolesInShell(e,t),null!==this._validErr)return null;if(this.checkHolesNotNested(e,t),null!==this._validErr)return null;this.checkConnectedInteriors(t)}else if(arguments[0]instanceof qt){let e=arguments[0];for(var r=0;r<e.getNumGeometries();r++){var n=e.getGeometryN(r);if(this.checkInvalidCoordinates(n),null!==this._validErr)return null;if(this.checkClosedRings(n),null!==this._validErr)return null}if(t=new Vr(0,e),this.checkTooFewPoints(t),null!==this._validErr)return null;if(this.checkConsistentArea(t),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(t),null!==this._validErr))return null;for(r=0;r<e.getNumGeometries();r++)if(n=e.getGeometryN(r),this.checkHolesInShell(n,t),null!==this._validErr)return null;for(r=0;r<e.getNumGeometries();r++)if(n=e.getGeometryN(r),this.checkHolesNotNested(n,t),null!==this._validErr)return null;if(this.checkShellsNotNested(e,t),null!==this._validErr)return null;this.checkConnectedInteriors(t)}else if(arguments[0]instanceof Et){let t=arguments[0];for(r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);if(this.checkValid(i),null!==this._validErr)return null}}else if(arguments[0]instanceof W){let t=arguments[0];if(this._validErr=null,t.isEmpty())return null;if(t instanceof Dt)this.checkValid(t);else if(t instanceof zt)this.checkValid(t);else if(t instanceof Vt)this.checkValid(t);else if(t instanceof jt)this.checkValid(t);else if(t instanceof Bt)this.checkValid(t);else if(t instanceof qt)this.checkValid(t);else{if(!(t instanceof Et))throw new UnsupportedOperationException(t.getClass().getName());this.checkValid(t)}}}setSelfTouchingRingFormingHoleValid(t){this._isSelfTouchingRingFormingHoleValid=t}checkShellNotNested(t,e,r){var n=t.getCoordinates(),i=e.getExteriorRing(),o=i.getCoordinates(),a=Do.findPtNotNode(n,i,r);if(null===a)return null;if(!Ue.isInRing(a,o))return null;if(e.getNumInteriorRing()<=0)return this._validErr=new Fo(Fo.NESTED_SHELLS,a),null;for(var s=null,l=0;l<e.getNumInteriorRing();l++){var u=e.getInteriorRingN(l);if(null===(s=this.checkShellInsideHole(t,u,r)))return null}this._validErr=new Fo(Fo.NESTED_SHELLS,s)}checkClosedRings(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this._validErr)return null}checkClosedRing(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this._validErr=new Fo(Fo.RING_NOT_CLOSED,e)}}checkShellsNotNested(t,e){for(var r=0;r<t.getNumGeometries();r++)for(var n=t.getGeometryN(r).getExteriorRing(),i=0;i<t.getNumGeometries();i++)if(r!==i){var o=t.getGeometryN(i);if(this.checkShellNotNested(n,o,e),null!==this._validErr)return null}}getClass(){return Do}get interfaces_(){return[]}}Do.constructor_=function(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null;let t=arguments[0];this._parentGeometry=t};var Go=Object.freeze({IsValidOp:Do,ConsistentAreaTester:ko}),Uo=Object.freeze({BoundaryOp:St,IsSimpleOp:Gn,buffer:_i,distance:Oi,linemerge:Fi,overlay:ro,polygonize:co,relate:Io,union:Mo,valid:Go});class Bo extends Yt.CoordinateOperation{constructor(){super(),Bo.constructor_.apply(this,arguments)}edit(){if(2===arguments.length&&arguments[1]instanceof W&&arguments[0]instanceof Array){let a=arguments[0],s=arguments[1];if(0===a.length)return null;for(var t=new Array(a.length).fill(null),e=0;e<a.length;e++){var r=new _(a[e]);this._targetPM.makePrecise(r),t[e]=r}var n=new P(t,!1).toCoordinateArray(),i=0;s instanceof jt&&(i=2),s instanceof Vt&&(i=4);var o=t;return this._removeCollapsed&&(o=null),n.length<i?o:n}return super.edit.apply(this,arguments)}getClass(){return Bo}get interfaces_(){return[]}}Bo.constructor_=function(){this._targetPM=null,this._removeCollapsed=!0;let t=arguments[0],e=arguments[1];this._targetPM=t,this._removeCollapsed=e};class zo{constructor(){zo.constructor_.apply(this,arguments)}static reduce(t,e){return new zo(e).reduce(t)}static reducePointwise(t,e){var r=new zo(e);return r.setPointwise(!0),r.reduce(t)}fixPolygonalTopology(t){var e=t;this._changePrecisionModel||(e=this.changePM(t,this._targetPM));var r=mi.bufferOp(e,0),n=r;return this._changePrecisionModel||(n=r.copy(),this.changePM(n,t.getPrecisionModel())),n}reducePointwise(t){var e=null;if(this._changePrecisionModel){var r=this.createFactory(t.getFactory(),this._targetPM);e=new Yt(r)}else e=new Yt;var n=this._removeCollapsed;return t.getDimension()>=2&&(n=!0),e.edit(t,new Bo(this._targetPM,n))}changePM(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Yt.NoOpGeometryOperation)}setRemoveCollapsedComponents(t){this._removeCollapsed=t}createFactory(t,e){return new ae(e,t.getSRID(),t.getCoordinateSequenceFactory())}setChangePrecisionModel(t){this._changePrecisionModel=t}reduce(t){var e=this.reducePointwise(t);return this._isPointwise?e:b(e,Ut)?Do.isValid(e)?e:this.fixPolygonalTopology(e):e}setPointwise(t){this._isPointwise=t}createEditor(t,e){if(t.getPrecisionModel()===e)return new Yt;var r=this.createFactory(t,e);return new Yt(r)}getClass(){return zo}get interfaces_(){return[]}}zo.constructor_=function(){this._targetPM=null,this._removeCollapsed=!0,this._changePrecisionModel=!1,this._isPointwise=!1;let t=arguments[0];this._targetPM=t};var Vo=Object.freeze({GeometryPrecisionReducer:zo});class qo{constructor(){qo.constructor_.apply(this,arguments)}static simplify(t,e){var r=new qo(t);return r.setDistanceTolerance(e),r.simplify()}simplifySection(t,e){if(t+1===e)return null;this._seg.p0=this._pts[t],this._seg.p1=this._pts[e];for(var r=-1,n=t,i=t+1;i<e;i++){var o=this._seg.distance(this._pts[i]);o>r&&(r=o,n=i)}if(r<=this._distanceTolerance)for(i=t+1;i<e;i++)this._usePt[i]=!1;else this.simplifySection(t,n),this.simplifySection(n,e)}setDistanceTolerance(t){this._distanceTolerance=t}simplify(){this._usePt=new Array(this._pts.length).fill(null);for(var t=0;t<this._pts.length;t++)this._usePt[t]=!0;this.simplifySection(0,this._pts.length-1);var e=new P;for(t=0;t<this._pts.length;t++)this._usePt[t]&&e.add(new _(this._pts[t]));return e.toCoordinateArray()}getClass(){return qo}get interfaces_(){return[]}}qo.constructor_=function(){this._pts=null,this._usePt=null,this._distanceTolerance=null,this._seg=new de;let t=arguments[0];this._pts=t};class Yo{constructor(){Yo.constructor_.apply(this,arguments)}static simplify(t,e){var r=new Yo(t);return r.setDistanceTolerance(e),r.getResultGeometry()}setEnsureValid(t){this._isEnsureValidTopology=t}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new Wo(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}setDistanceTolerance(t){if(t<0)throw new r("Tolerance must be non-negative");this._distanceTolerance=t}getClass(){return Yo}get interfaces_(){return[]}}class Wo extends lr{constructor(){super(),Wo.constructor_.apply(this,arguments)}transformPolygon(t,e){if(t.isEmpty())return null;var r=super.transformPolygon.call(this,t,e);return e instanceof qt?r:this.createValidArea(r)}createValidArea(t){return this._isEnsureValidTopology?t.buffer(0):t}transformCoordinates(t,e){var r=t.toCoordinateArray(),n=null;return n=0===r.length?new Array(0).fill(null):qo.simplify(r,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(n)}transformMultiPolygon(t,e){var r=super.transformMultiPolygon.call(this,t,e);return this.createValidArea(r)}transformLinearRing(t,e){var r=e instanceof Bt,n=super.transformLinearRing.call(this,t,e);return!r||n instanceof Vt?n:null}getClass(){return Wo}get interfaces_(){return[]}}Wo.constructor_=function(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;let t=arguments[0],e=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=e},Yo.DPTransformer=Wo,Yo.constructor_=function(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;let t=arguments[0];this._inputGeom=t};class Xo extends de{constructor(){super(),Xo.constructor_.apply(this,arguments)}getIndex(){return this._index}getParent(){return this._parent}getClass(){return Xo}get interfaces_(){return[]}}Xo.constructor_=function(){if(this._parent=null,this._index=null,2===arguments.length){let t=arguments[0],e=arguments[1];Xo.constructor_.call(this,t,e,null,-1)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];de.constructor_.call(this,t,e),this._parent=r,this._index=n}};class Ho{constructor(){Ho.constructor_.apply(this,arguments)}static extractCoordinates(t){for(var e=new Array(t.size()+1).fill(null),r=null,n=0;n<t.size();n++)r=t.get(n),e[n]=r.p0;return e[e.length-1]=r.p1,e}addToResult(t){this._resultSegs.add(t)}asLineString(){return this._parentLine.getFactory().createLineString(Ho.extractCoordinates(this._resultSegs))}getResultSize(){var t=this._resultSegs.size();return 0===t?0:t+1}getParent(){return this._parentLine}getSegment(t){return this._segs[t]}getParentCoordinates(){return this._parentLine.getCoordinates()}getMinimumSize(){return this._minimumSize}asLinearRing(){return this._parentLine.getFactory().createLinearRing(Ho.extractCoordinates(this._resultSegs))}getSegments(){return this._segs}init(){var t=this._parentLine.getCoordinates();this._segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var r=new Xo(t[e],t[e+1],this._parentLine,e);this._segs[e]=r}}getResultCoordinates(){return Ho.extractCoordinates(this._resultSegs)}getClass(){return Ho}get interfaces_(){return[]}}Ho.constructor_=function(){if(this._parentLine=null,this._segs=null,this._resultSegs=new C,this._minimumSize=null,1===arguments.length){let t=arguments[0];Ho.constructor_.call(this,t,2)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._parentLine=t,this._minimumSize=e,this.init()}};class Zo{constructor(){Zo.constructor_.apply(this,arguments)}remove(t){this._index.remove(new R(t.p0,t.p1),t)}add(){if(arguments[0]instanceof Ho)for(var t=arguments[0].getSegments(),e=0;e<t.length;e++){var r=t[e];this.add(r)}else if(arguments[0]instanceof de){let t=arguments[0];this._index.insert(new R(t.p0,t.p1),t)}}query(t){var e=new R(t.p0,t.p1),r=new Ko(t);return this._index.query(e,r),r.getItems()}getClass(){return Zo}get interfaces_(){return[]}}Zo.constructor_=function(){this._index=new nn};class Ko{constructor(){Ko.constructor_.apply(this,arguments)}visitItem(t){var e=t;R.intersects(e.p0,e.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(t)}getItems(){return this._items}getClass(){return Ko}get interfaces_(){return[Ie]}}Ko.constructor_=function(){this._querySeg=null,this._items=new C;let t=arguments[0];this._querySeg=t};class Jo{constructor(){Jo.constructor_.apply(this,arguments)}static isInLineSection(t,e,r){if(r.getParent()!==t.getParent())return!1;var n=r.getIndex();return n>=e[0]&&n<e[1]}flatten(t,e){var r=this._linePts[t],n=this._linePts[e],i=new de(r,n);return this.remove(this._line,t,e),this._outputIndex.add(i),i}hasBadIntersection(t,e,r){return!!this.hasBadOutputIntersection(r)||!!this.hasBadInputIntersection(t,e,r)}setDistanceTolerance(t){this._distanceTolerance=t}simplifySection(t,e,r){r+=1;var n=new Array(2).fill(null);if(t+1===e){var i=this._line.getSegment(t);return this._line.addToResult(i),null}var o=!0;this._line.getResultSize()<this._line.getMinimumSize()&&r+1<this._line.getMinimumSize()&&(o=!1);var a=new Array(1).fill(null),s=this.findFurthestPoint(this._linePts,t,e,a);a[0]>this._distanceTolerance&&(o=!1);var l=new de;if(l.p0=this._linePts[t],l.p1=this._linePts[e],n[0]=t,n[1]=e,this.hasBadIntersection(this._line,n,l)&&(o=!1),o)return i=this.flatten(t,e),this._line.addToResult(i),null;this.simplifySection(t,s,r),this.simplifySection(s,e,r)}hasBadOutputIntersection(t){for(var e=this._outputIndex.query(t).iterator();e.hasNext();){var r=e.next();if(this.hasInteriorIntersection(r,t))return!0}return!1}findFurthestPoint(t,e,r,n){var i=new de;i.p0=t[e],i.p1=t[r];for(var o=-1,a=e,s=e+1;s<r;s++){var l=t[s],u=i.distance(l);u>o&&(o=u,a=s)}return n[0]=o,a}simplify(t){this._line=t,this._linePts=t.getParentCoordinates(),this.simplifySection(0,this._linePts.length-1,0)}remove(t,e,r){for(var n=e;n<r;n++){var i=t.getSegment(n);this._inputIndex.remove(i)}}hasInteriorIntersection(t,e){return this._li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this._li.isInteriorIntersection()}hasBadInputIntersection(t,e,r){for(var n=this._inputIndex.query(r).iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,r)){if(Jo.isInLineSection(t,e,i))continue;return!0}}return!1}getClass(){return Jo}get interfaces_(){return[]}}Jo.constructor_=function(){this._li=new pe,this._inputIndex=new Zo,this._outputIndex=new Zo,this._line=null,this._linePts=null,this._distanceTolerance=0;let t=arguments[0],e=arguments[1];this._inputIndex=t,this._outputIndex=e};class $o{constructor(){$o.constructor_.apply(this,arguments)}setDistanceTolerance(t){this._distanceTolerance=t}simplify(t){for(var e=t.iterator();e.hasNext();)this._inputIndex.add(e.next());for(e=t.iterator();e.hasNext();){var r=new Jo(this._inputIndex,this._outputIndex);r.setDistanceTolerance(this._distanceTolerance),r.simplify(e.next())}}getClass(){return $o}get interfaces_(){return[]}}$o.constructor_=function(){this._inputIndex=new Zo,this._outputIndex=new Zo,this._distanceTolerance=0};class Qo{constructor(){Qo.constructor_.apply(this,arguments)}static simplify(t,e){var r=new Qo(t);return r.setDistanceTolerance(e),r.getResultGeometry()}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():(this._linestringMap=new ne,this._inputGeom.apply(new ea(this)),this._lineSimplifier.simplify(this._linestringMap.values()),new ta(this._linestringMap).transform(this._inputGeom))}setDistanceTolerance(t){if(t<0)throw new r("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(t)}getClass(){return Qo}get interfaces_(){return[]}}class ta extends lr{constructor(){super(),ta.constructor_.apply(this,arguments)}transformCoordinates(t,e){if(0===t.size())return null;if(e instanceof jt){var r=this._linestringMap.get(e);return this.createCoordinateSequence(r.getResultCoordinates())}return super.transformCoordinates.call(this,t,e)}getClass(){return ta}get interfaces_(){return[]}}ta.constructor_=function(){this._linestringMap=null;let t=arguments[0];this._linestringMap=t};class ea{constructor(){ea.constructor_.apply(this,arguments)}filter(t){if(t instanceof jt){var e=t;if(e.isEmpty())return null;var r=e.isClosed()?4:2,n=new Ho(e,r);this.tps._linestringMap.put(e,n)}}getClass(){return ea}get interfaces_(){return[Y]}}ea.constructor_=function(){this.tps=null;let t=arguments[0];this.tps=t},Qo.LineStringTransformer=ta,Qo.LineStringMapBuilderFilter=ea,Qo.constructor_=function(){this._inputGeom=null,this._lineSimplifier=new $o,this._linestringMap=null;let t=arguments[0];this._inputGeom=t};var ra=Object.freeze({DouglasPeuckerSimplifier:Yo,TopologyPreservingSimplifier:Qo});class na{constructor(){na.constructor_.apply(this,arguments)}static pointAlongReverse(t,e){var r=new _;return r.x=t.p1.x-e*(t.p1.x-t.p0.x),r.y=t.p1.y-e*(t.p1.y-t.p0.y),r}splitAt(){if(1===arguments.length){let e=arguments[0];var t=this._minimumLen/this._segLen;if(e.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(t),null;if(e.distance(this._seg.p1)<this._minimumLen)return this._splitPt=na.pointAlongReverse(this._seg,t),null;this._splitPt=e}else if(2===arguments.length){let t=arguments[0],r=arguments[1];var e=this.getConstrainedLength(t)/this._segLen;r.equals2D(this._seg.p0)?this._splitPt=this._seg.pointAlong(e):this._splitPt=na.pointAlongReverse(this._seg,e)}}setMinimumLength(t){this._minimumLen=t}getConstrainedLength(t){return t<this._minimumLen?this._minimumLen:t}getSplitPoint(){return this._splitPt}getClass(){return na}get interfaces_(){return[]}}na.constructor_=function(){this._seg=null,this._segLen=null,this._splitPt=null,this._minimumLen=0;let t=arguments[0];this._seg=t,this._segLen=t.getLength()};class ia{constructor(){ia.constructor_.apply(this,arguments)}findSplitPoint(t,e){}getClass(){return ia}get interfaces_(){return[]}}ia.constructor_=function(){};class oa{constructor(){oa.constructor_.apply(this,arguments)}static projectedSplitPoint(t,e){return t.getLineSegment().project(e)}findSplitPoint(t,e){var r=t.getLineSegment(),n=r.getLength()/2,i=new na(r),o=oa.projectedSplitPoint(t,e),a=2*o.distance(e)*.8;return a>n&&(a=n),i.setMinimumLength(a),i.splitAt(o),i.getSplitPoint()}getClass(){return oa}get interfaces_(){return[ia]}}oa.constructor_=function(){};class aa{constructor(){aa.constructor_.apply(this,arguments)}static triArea(t,e,r){return(e.x-t.x)*(r.y-t.y)-(e.y-t.y)*(r.x-t.x)}static isInCircleDDNormalized(t,e,r,n){var i=j.valueOf(t.x).selfSubtract(n.x),o=j.valueOf(t.y).selfSubtract(n.y),a=j.valueOf(e.x).selfSubtract(n.x),s=j.valueOf(e.y).selfSubtract(n.y),l=j.valueOf(r.x).selfSubtract(n.x),u=j.valueOf(r.y).selfSubtract(n.y),c=i.multiply(s).selfSubtract(a.multiply(o)),h=a.multiply(u).selfSubtract(l.multiply(s)),f=l.multiply(o).selfSubtract(i.multiply(u)),p=i.multiply(i).selfAdd(o.multiply(o)),d=a.multiply(a).selfAdd(s.multiply(s)),g=l.multiply(l).selfAdd(u.multiply(u));return p.selfMultiply(h).selfAdd(d.selfMultiply(f)).selfAdd(g.selfMultiply(c)).doubleValue()>0}static checkRobustInCircle(t,e,r,n){var i=aa.isInCircleNonRobust(t,e,r,n),o=aa.isInCircleDDSlow(t,e,r,n),a=aa.isInCircleCC(t,e,r,n),s=_e.circumcentre(t,e,r);G.out.println("p radius diff a = "+Math.abs(n.distance(s)-t.distance(s))/t.distance(s)),i===o&&i===a||(G.out.println("inCircle robustness failure (double result = "+i+", DD result = "+o+", CC result = "+a+")"),G.out.println(he.toLineString(new Kt([t,e,r,n]))),G.out.println("Circumcentre = "+he.toPoint(s)+" radius = "+t.distance(s)),G.out.println("p radius diff a = "+Math.abs(n.distance(s)/t.distance(s)-1)),G.out.println("p radius diff b = "+Math.abs(n.distance(s)/e.distance(s)-1)),G.out.println("p radius diff c = "+Math.abs(n.distance(s)/r.distance(s)-1)),G.out.println())}static isInCircleDDFast(t,e,r,n){var i=j.sqr(t.x).selfAdd(j.sqr(t.y)).selfMultiply(aa.triAreaDDFast(e,r,n)),o=j.sqr(e.x).selfAdd(j.sqr(e.y)).selfMultiply(aa.triAreaDDFast(t,r,n)),a=j.sqr(r.x).selfAdd(j.sqr(r.y)).selfMultiply(aa.triAreaDDFast(t,e,n)),s=j.sqr(n.x).selfAdd(j.sqr(n.y)).selfMultiply(aa.triAreaDDFast(t,e,r));return i.selfSubtract(o).selfAdd(a).selfSubtract(s).doubleValue()>0}static isInCircleCC(t,e,r,n){var i=_e.circumcentre(t,e,r),o=t.distance(i);return n.distance(i)-o<=0}static isInCircleNormalized(t,e,r,n){var i=t.x-n.x,o=t.y-n.y,a=e.x-n.x,s=e.y-n.y,l=r.x-n.x,u=r.y-n.y;return(i*i+o*o)*(a*u-l*s)+(a*a+s*s)*(l*o-i*u)+(l*l+u*u)*(i*s-a*o)>0}static isInCircleDDSlow(t,e,r,n){var i=j.valueOf(n.x),o=j.valueOf(n.y),a=j.valueOf(t.x),s=j.valueOf(t.y),l=j.valueOf(e.x),u=j.valueOf(e.y),c=j.valueOf(r.x),h=j.valueOf(r.y),f=a.multiply(a).add(s.multiply(s)).multiply(aa.triAreaDDSlow(l,u,c,h,i,o)),p=l.multiply(l).add(u.multiply(u)).multiply(aa.triAreaDDSlow(a,s,c,h,i,o)),d=c.multiply(c).add(h.multiply(h)).multiply(aa.triAreaDDSlow(a,s,l,u,i,o)),g=i.multiply(i).add(o.multiply(o)).multiply(aa.triAreaDDSlow(a,s,l,u,c,h));return f.subtract(p).add(d).subtract(g).doubleValue()>0}static isInCircleNonRobust(t,e,r,n){return(t.x*t.x+t.y*t.y)*aa.triArea(e,r,n)-(e.x*e.x+e.y*e.y)*aa.triArea(t,r,n)+(r.x*r.x+r.y*r.y)*aa.triArea(t,e,n)-(n.x*n.x+n.y*n.y)*aa.triArea(t,e,r)>0}static isInCircleRobust(t,e,r,n){return aa.isInCircleNormalized(t,e,r,n)}static triAreaDDSlow(t,e,r,n,i,o){return r.subtract(t).multiply(o.subtract(e)).subtract(n.subtract(e).multiply(i.subtract(t)))}static triAreaDDFast(t,e,r){var n=j.valueOf(e.x).selfSubtract(t.x).selfMultiply(j.valueOf(r.y).selfSubtract(t.y)),i=j.valueOf(e.y).selfSubtract(t.y).selfMultiply(j.valueOf(r.x).selfSubtract(t.x));return n.selfSubtract(i)}getClass(){return aa}get interfaces_(){return[]}}aa.constructor_=function(){};class sa{constructor(){sa.constructor_.apply(this,arguments)}static interpolateZ(){if(3===arguments.length){let n=arguments[0],i=arguments[1],o=arguments[2];var t=i.distance(o),e=n.distance(i),r=o.z-i.z;return i.z+r*(e/t)}if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],d=arguments[3];var n=e.x,i=e.y,o=r.x-n,a=d.x-n,s=r.y-i,l=d.y-i,u=o*l-a*s,c=t.x-n,h=t.y-i,f=(l*c-a*h)/u,p=(-s*c+o*h)/u;return e.z+f*(r.z-e.z)+p*(d.z-e.z)}}circleCenter(t,e){var r=new sa(this.getX(),this.getY()),n=this.bisector(r,t),i=this.bisector(t,e),o=new U(n,i),a=null;try{a=new sa(o.getX(),o.getY())}catch(n){if(!(n instanceof M))throw n;G.err.println("a: "+r+"  b: "+t+"  c: "+e),G.err.println(n)}return a}dot(t){return this._p.x*t.getX()+this._p.y*t.getY()}magn(){return Math.sqrt(this._p.x*this._p.x+this._p.y*this._p.y)}getZ(){return this._p.z}bisector(t,e){var r=e.getX()-t.getX(),n=e.getY()-t.getY(),i=new U(t.getX()+r/2,t.getY()+n/2,1),o=new U(t.getX()-n+r/2,t.getY()+r+n/2,1);return new U(i,o)}equals(){if(1===arguments.length){let t=arguments[0];return this._p.x===t.getX()&&this._p.y===t.getY()}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this._p.distance(t.getCoordinate())<e}}getCoordinate(){return this._p}isInCircle(t,e,r){return aa.isInCircleRobust(t._p,e._p,r._p,this._p)}interpolateZValue(t,e,r){var n=t.getX(),i=t.getY(),o=e.getX()-n,a=r.getX()-n,s=e.getY()-i,l=r.getY()-i,u=o*l-a*s,c=this.getX()-n,h=this.getY()-i,f=(l*c-a*h)/u,p=(-s*c+o*h)/u;return t.getZ()+f*(e.getZ()-t.getZ())+p*(r.getZ()-t.getZ())}midPoint(t){var e=(this._p.x+t.getX())/2,r=(this._p.y+t.getY())/2,n=(this._p.z+t.getZ())/2;return new sa(e,r,n)}rightOf(t){return this.isCCW(t.dest(),t.orig())}isCCW(t,e){return(t._p.x-this._p.x)*(e._p.y-this._p.y)-(t._p.y-this._p.y)*(e._p.x-this._p.x)>0}getX(){return this._p.x}crossProduct(t){return this._p.x*t.getY()-this._p.y*t.getX()}setZ(t){this._p.z=t}times(t){return new sa(t*this._p.x,t*this._p.y)}cross(){return new sa(this._p.y,-this._p.x)}leftOf(t){return this.isCCW(t.orig(),t.dest())}toString(){return"POINT ("+this._p.x+" "+this._p.y+")"}sub(t){return new sa(this._p.x-t.getX(),this._p.y-t.getY())}getY(){return this._p.y}classify(t,e){var r=e.sub(t),n=this.sub(t),i=r.crossProduct(n);return i>0?sa.LEFT:i<0?sa.RIGHT:r.getX()*n.getX()<0||r.getY()*n.getY()<0?sa.BEHIND:r.magn()<n.magn()?sa.BEYOND:t.equals(this)?sa.ORIGIN:e.equals(this)?sa.DESTINATION:sa.BETWEEN}sum(t){return new sa(this._p.x+t.getX(),this._p.y+t.getY())}distance(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))}circumRadiusRatio(t,e){var r=this.circleCenter(t,e),n=this.distance(r,t),i=this.distance(this,t),o=this.distance(t,e);return o<i&&(i=o),(o=this.distance(e,this))<i&&(i=o),n/i}getClass(){return sa}get interfaces_(){return[]}}sa.constructor_=function(){if(this._p=null,1===arguments.length){let t=arguments[0];this._p=new _(t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._p=new _(t,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._p=new _(t,e,r)}},sa.LEFT=0,sa.RIGHT=1,sa.BEYOND=2,sa.BEHIND=3,sa.BETWEEN=4,sa.ORIGIN=5,sa.DESTINATION=6;class la extends sa{constructor(){super(),la.constructor_.apply(this,arguments)}getConstraint(){return this._constraint}setOnConstraint(t){this._isOnConstraint=t}merge(t){t._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=t._constraint)}isOnConstraint(){return this._isOnConstraint}setConstraint(t){this._isOnConstraint=!0,this._constraint=t}getClass(){return la}get interfaces_(){return[]}}la.constructor_=function(){this._isOnConstraint=null,this._constraint=null;let t=arguments[0];sa.constructor_.call(this,t)};class ua{constructor(){ua.constructor_.apply(this,arguments)}static makeEdge(t,e){var r=new ua,n=new ua,i=new ua,o=new ua;r._rot=n,n._rot=i,i._rot=o,o._rot=r,r.setNext(r),n.setNext(o),i.setNext(i),o.setNext(n);var a=r;return a.setOrig(t),a.setDest(e),a}static swap(t){var e=t.oPrev(),r=t.sym().oPrev();ua.splice(t,e),ua.splice(t.sym(),r),ua.splice(t,e.lNext()),ua.splice(t.sym(),r.lNext()),t.setOrig(e.dest()),t.setDest(r.dest())}static splice(t,e){var r=t.oNext().rot(),n=e.oNext().rot(),i=e.oNext(),o=t.oNext(),a=n.oNext(),s=r.oNext();t.setNext(i),e.setNext(o),r.setNext(a),n.setNext(s)}static connect(t,e){var r=ua.makeEdge(t.dest(),e.orig());return ua.splice(r,t.lNext()),ua.splice(r.sym(),e),r}equalsNonOriented(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())}toLineSegment(){return new de(this._vertex.getCoordinate(),this.dest().getCoordinate())}dest(){return this.sym().orig()}oNext(){return this._next}equalsOriented(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))}dNext(){return this.sym().oNext().sym()}lPrev(){return this._next.sym()}rPrev(){return this.sym().oNext()}rot(){return this._rot}oPrev(){return this._rot._next._rot}sym(){return this._rot._rot}setOrig(t){this._vertex=t}lNext(){return this.invRot().oNext().rot()}getLength(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())}invRot(){return this._rot.sym()}setDest(t){this.sym().setOrig(t)}setData(t){this._data=t}getData(){return this._data}delete(){this._rot=null}orig(){return this._vertex}rNext(){return this._rot._next.invRot()}toString(){var t=this._vertex.getCoordinate(),e=this.dest().getCoordinate();return he.toLineString(t,e)}isLive(){return null!==this._rot}getPrimary(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()}dPrev(){return this.invRot().oNext().invRot()}setNext(t){this._next=t}getClass(){return ua}get interfaces_(){return[]}}ua.constructor_=function(){this._rot=null,this._vertex=null,this._next=null,this._data=null};class ca{constructor(){ca.constructor_.apply(this,arguments)}insertSite(t){var e=this._subdiv.locate(t);if(this._subdiv.isVertexOfEdge(e,t))return e;this._subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this._subdiv.delete(e.oNext()));var r=this._subdiv.makeEdge(e.orig(),t);ua.splice(r,e);var n=r;do{e=(r=this._subdiv.connect(e,r.sym())).oPrev()}while(e.lNext()!==n);for(;;){var i=e.oPrev();if(i.dest().rightOf(e)&&t.isInCircle(e.orig(),i.dest(),e.dest()))ua.swap(e),e=e.oPrev();else{if(e.oNext()===n)return r;e=e.oNext().lPrev()}}}insertSites(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertSite(r)}}getClass(){return ca}get interfaces_(){return[]}}ca.constructor_=function(){this._subdiv=null,this._isUsingTolerance=!1;let t=arguments[0];this._subdiv=t,this._isUsingTolerance=t.getTolerance()>0};class ha{constructor(){ha.constructor_.apply(this,arguments)}locate(t){}getClass(){return ha}get interfaces_(){return[]}}ha.constructor_=function(){};class fa{constructor(){fa.constructor_.apply(this,arguments)}init(){this._lastEdge=this.findEdge()}locate(t){this._lastEdge.isLive()||this.init();var e=this._subdiv.locateFromEdge(t,this._lastEdge);return this._lastEdge=e,e}findEdge(){return this._subdiv.getEdges().iterator().next()}getClass(){return fa}get interfaces_(){return[ha]}}fa.constructor_=function(){this._subdiv=null,this._lastEdge=null;let t=arguments[0];this._subdiv=t,this.init()};class pa extends g{constructor(){super(),pa.constructor_.apply(this,arguments)}static msgWithSpatial(t,e){return null!==e?t+" [ "+e+" ]":t}getSegment(){return this._seg}getClass(){return pa}get interfaces_(){return[]}}pa.constructor_=function(){if(this._seg=null,1===arguments.length){if("string"==typeof arguments[0]){let t=arguments[0];g.constructor_.call(this,t)}else if(arguments[0]instanceof de){let t=arguments[0];g.constructor_.call(this,"Locate failed to converge (at edge: "+t+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new de(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];g.constructor_.call(this,pa.msgWithSpatial(t,e)),this._seg=new de(e)}};class da{constructor(){da.constructor_.apply(this,arguments)}visit(t){}getClass(){return da}get interfaces_(){return[]}}da.constructor_=function(){};class ga{constructor(){ga.constructor_.apply(this,arguments)}static getTriangleEdges(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new r("Edges do not form a triangle")}getTriangleVertices(t){var e=new _a;return this.visitTriangles(e,t),e.getTriangleVertices()}isFrameVertex(t){return!!t.equals(this._frameVertex[0])||!!t.equals(this._frameVertex[1])||!!t.equals(this._frameVertex[2])}isVertexOfEdge(t,e){return!(!e.equals(t.orig(),this._tolerance)&&!e.equals(t.dest(),this._tolerance))}connect(t,e){var r=ua.connect(t,e);return this._quadEdges.add(r),r}getVoronoiCellPolygon(t,e){var r=new C,n=t;do{var i=t.rot().orig().getCoordinate();r.add(i),t=t.oPrev()}while(t!==n);var o=new P;o.addAll(r,!1),o.closeRing(),o.size()<4&&(G.out.println(o),o.add(o.get(o.size()-1),!0));var a=o.toCoordinateArray(),s=e.createPolygon(e.createLinearRing(a)),l=n.orig();return s.setUserData(l.getCoordinate()),s}setLocator(t){this._locator=t}initSubdiv(){var t=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),e=this.makeEdge(this._frameVertex[1],this._frameVertex[2]);ua.splice(t.sym(),e);var r=this.makeEdge(this._frameVertex[2],this._frameVertex[0]);return ua.splice(e.sym(),r),ua.splice(r.sym(),t),t}isFrameBorderEdge(t){var e=new Array(3).fill(null);ga.getTriangleEdges(t,e);var r=new Array(3).fill(null);ga.getTriangleEdges(t.sym(),r);var n=t.lNext().dest();if(this.isFrameVertex(n))return!0;var i=t.sym().lNext().dest();return!!this.isFrameVertex(i)}makeEdge(t,e){var r=ua.makeEdge(t,e);return this._quadEdges.add(r),r}visitTriangles(t,e){this._visitedKey++;var r=new Je;r.push(this._startingEdge);for(var n=new ot;!r.empty();){var i=r.pop();if(!n.contains(i)){var o=this.fetchTriangleToVisit(i,r,e,n);null!==o&&t.visit(o)}}}isFrameEdge(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))}isOnEdge(t,e){return this._seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this._seg.distance(e)<this._edgeCoincidenceTolerance}getEnvelope(){return new R(this._frameEnv)}createFrame(t){var e=t.getWidth(),r=t.getHeight(),n=0;n=e>r?10*e:10*r,this._frameVertex[0]=new sa((t.getMaxX()+t.getMinX())/2,t.getMaxY()+n),this._frameVertex[1]=new sa(t.getMinX()-n,t.getMinY()-n),this._frameVertex[2]=new sa(t.getMaxX()+n,t.getMinY()-n),this._frameEnv=new R(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate()),this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())}getTriangleCoordinates(t){var e=new va;return this.visitTriangles(e,t),e.getTriangles()}getVertices(t){for(var e=new ot,r=this._quadEdges.iterator();r.hasNext();){var n=r.next(),i=n.orig();!t&&this.isFrameVertex(i)||e.add(i);var o=n.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e}fetchTriangleToVisit(t,e,r,n){var i=t,o=0,a=!1;do{this._triEdges[o]=i,this.isFrameEdge(i)&&(a=!0);var s=i.sym();n.contains(s)||e.push(s),n.add(i),o++,i=i.lNext()}while(i!==t);return a&&!r?null:this._triEdges}getEdges(){if(0===arguments.length)return this._quadEdges;if(1===arguments.length){let o=arguments[0];for(var t=this.getPrimaryEdges(!1),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=o.createLineString([i.orig().getCoordinate(),i.dest().getCoordinate()])}return o.createMultiLineString(e)}}getVertexUniqueEdges(t){for(var e=new C,r=new ot,n=this._quadEdges.iterator();n.hasNext();){var i=n.next(),o=i.orig();r.contains(o)||(r.add(o),!t&&this.isFrameVertex(o)||e.add(i));var a=i.sym(),s=a.orig();r.contains(s)||(r.add(s),!t&&this.isFrameVertex(s)||e.add(a))}return e}getTriangleEdges(t){var e=new ma;return this.visitTriangles(e,t),e.getTriangleEdges()}getPrimaryEdges(t){this._visitedKey++;var e=new C,r=new Je;r.push(this._startingEdge);for(var n=new ot;!r.empty();){var i=r.pop();if(!n.contains(i)){var o=i.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),r.push(i.oNext()),r.push(i.sym().oNext()),n.add(i),n.add(i.sym())}}return e}delete(t){ua.splice(t,t.oPrev()),ua.splice(t.sym(),t.sym().oPrev());var e=t.sym(),r=t.rot(),n=t.rot().sym();this._quadEdges.remove(t),this._quadEdges.remove(e),this._quadEdges.remove(r),this._quadEdges.remove(n),t.delete(),e.delete(),r.delete(),n.delete()}locateFromEdge(t,e){for(var r=0,n=this._quadEdges.size(),i=e;;){if(++r>n)throw new pa(i.toLineSegment());if(t.equals(i.orig())||t.equals(i.dest()))break;if(t.rightOf(i))i=i.sym();else if(t.rightOf(i.oNext())){if(t.rightOf(i.dPrev()))break;i=i.dPrev()}else i=i.oNext()}return i}getTolerance(){return this._tolerance}getVoronoiCellPolygons(t){this.visitTriangles(new ya,!0);for(var e=new C,r=this.getVertexUniqueEdges(!1).iterator();r.hasNext();){var n=r.next();e.add(this.getVoronoiCellPolygon(n,t))}return e}getVoronoiDiagram(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(ae.toGeometryArray(e))}getTriangles(t){for(var e=this.getTriangleCoordinates(!1),r=new Array(e.size()).fill(null),n=0,i=e.iterator();i.hasNext();){var o=i.next();r[n++]=t.createPolygon(t.createLinearRing(o))}return t.createGeometryCollection(r)}insertSite(t){var e=this.locate(t);if(t.equals(e.orig(),this._tolerance)||t.equals(e.dest(),this._tolerance))return e;var r=this.makeEdge(e.orig(),t);ua.splice(r,e);var n=r;do{e=(r=this.connect(e,r.sym())).oPrev()}while(e.lNext()!==n);return n}locate(){if(1===arguments.length){if(arguments[0]instanceof sa){let t=arguments[0];return this._locator.locate(t)}if(arguments[0]instanceof _){let t=arguments[0];return this._locator.locate(new sa(t))}}else if(2===arguments.length){let n=arguments[0],i=arguments[1];var t=this._locator.locate(new sa(n));if(null===t)return null;var e=t;t.dest().getCoordinate().equals2D(n)&&(e=t.sym());var r=e;do{if(r.dest().getCoordinate().equals2D(i))return r;r=r.oNext()}while(r!==e);return null}}getClass(){return ga}get interfaces_(){return[]}}class ya{constructor(){ya.constructor_.apply(this,arguments)}visit(t){for(var e=t[0].orig().getCoordinate(),r=t[1].orig().getCoordinate(),n=t[2].orig().getCoordinate(),i=_e.circumcentre(e,r,n),o=new sa(i),a=0;a<3;a++)t[a].rot().setOrig(o)}getClass(){return ya}get interfaces_(){return[da]}}ya.constructor_=function(){};class ma{constructor(){ma.constructor_.apply(this,arguments)}getTriangleEdges(){return this._triList}visit(t){this._triList.add(t)}getClass(){return ma}get interfaces_(){return[da]}}ma.constructor_=function(){this._triList=new C};class _a{constructor(){_a.constructor_.apply(this,arguments)}visit(t){this._triList.add([t[0].orig(),t[1].orig(),t[2].orig()])}getTriangleVertices(){return this._triList}getClass(){return _a}get interfaces_(){return[da]}}_a.constructor_=function(){this._triList=new C};class va{constructor(){va.constructor_.apply(this,arguments)}checkTriangleSize(t){t.length>=2?he.toLineString(t[0],t[1]):t.length>=1&&he.toPoint(t[0])}visit(t){this._coordList.clear();for(var e=0;e<3;e++){var r=t[e].orig();this._coordList.add(r.getCoordinate())}if(this._coordList.size()>0){this._coordList.closeRing();var n=this._coordList.toCoordinateArray();if(4!==n.length)return null;this._triCoords.add(n)}}getTriangles(){return this._triCoords}getClass(){return va}get interfaces_(){return[da]}}va.constructor_=function(){this._coordList=new P,this._triCoords=new C},ga.TriangleCircumcentreVisitor=ya,ga.TriangleEdgesListVisitor=ma,ga.TriangleVertexListVisitor=_a,ga.TriangleCoordinatesVisitor=va,ga.constructor_=function(){this._visitedKey=0,this._quadEdges=new C,this._startingEdge=null,this._tolerance=null,this._edgeCoincidenceTolerance=null,this._frameVertex=new Array(3).fill(null),this._frameEnv=null,this._locator=null,this._seg=new de,this._triEdges=new Array(3).fill(null);let t=arguments[0],e=arguments[1];this._tolerance=e,this._edgeCoincidenceTolerance=e/ga.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this._startingEdge=this.initSubdiv(),this._locator=new fa(this)},ga.EDGE_COINCIDENCE_TOL_FACTOR=1e3;class ba{constructor(){ba.constructor_.apply(this,arguments)}getLineSegment(){return this._ls}getEndZ(){return this._ls.getCoordinate(1).z}getStartZ(){return this._ls.getCoordinate(0).z}intersection(t){return this._ls.intersection(t.getLineSegment())}getStart(){return this._ls.getCoordinate(0)}getEnd(){return this._ls.getCoordinate(1)}getEndY(){return this._ls.getCoordinate(1).y}getStartX(){return this._ls.getCoordinate(0).x}equalsTopo(t){return this._ls.equalsTopo(t.getLineSegment())}getStartY(){return this._ls.getCoordinate(0).y}setData(t){this._data=t}getData(){return this._data}getEndX(){return this._ls.getCoordinate(1).x}toString(){return this._ls.toString()}getClass(){return ba}get interfaces_(){return[]}}ba.constructor_=function(){if(this._ls=null,this._data=null,2===arguments.length){let t=arguments[0],e=arguments[1];this._ls=new de(t,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._ls=new de(t,e),this._data=r}else if(6===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4],o=arguments[5];ba.constructor_.call(this,new _(t,e,r),new _(n,i,o))}else if(7===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4],o=arguments[5],a=arguments[6];ba.constructor_.call(this,new _(t,e,r),new _(n,i,o),a)}};class xa{constructor(){xa.constructor_.apply(this,arguments)}static computeVertexEnvelope(t){for(var e=new R,r=t.iterator();r.hasNext();){var n=r.next();e.expandToInclude(n.getCoordinate())}return e}getInitialVertices(){return this._initialVertices}getKDT(){return this._kdt}enforceConstraints(){this.addConstraintVertices();var t=0,e=0;do{e=this.enforceGabriel(this._segments),t++}while(e>0&&t<xa.MAX_SPLIT_ITER)}insertSites(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertSite(r)}}getVertexFactory(){return this._vertexFactory}getPointArray(){for(var t=new Array(this._initialVertices.size()+this._segVertices.size()).fill(null),e=0,r=this._initialVertices.iterator();r.hasNext();){var n=r.next();t[e++]=n.getCoordinate()}for(var i=this._segVertices.iterator();i.hasNext();)n=i.next(),t[e++]=n.getCoordinate();return t}setConstraints(t,e){this._segments=t,this._segVertices=e}computeConvexHull(){var t=new ae,e=this.getPointArray(),r=new Qe(e,t);this._convexHull=r.getConvexHull()}addConstraintVertices(){this.computeConvexHull(),this.insertSites(this._segVertices)}findNonGabrielPoint(t){var e=t.getStart(),r=t.getEnd(),n=new _((e.x+r.x)/2,(e.y+r.y)/2),o=e.distance(n),a=new R(n);a.expandBy(o);for(var s=this._kdt.query(a),l=null,u=i.MAX_VALUE,c=s.iterator();c.hasNext();){var h=c.next().getCoordinate();if(!h.equals2D(e)&&!h.equals2D(r)){var f=n.distance(h);f<o&&(null===l||f<u)&&(l=h,u=f)}}return l}getConstraintSegments(){return this._segments}setSplitPointFinder(t){this._splitFinder=t}getConvexHull(){return this._convexHull}getTolerance(){return this._tolerance}enforceGabriel(t){for(var e=new C,r=0,n=new C,i=t.iterator();i.hasNext();){var o=i.next(),a=this.findNonGabrielPoint(o);if(null!==a){this._splitPt=this._splitFinder.findSplitPoint(o,a);var s=this.createVertex(this._splitPt,o);this.insertSite(s).getCoordinate().equals2D(this._splitPt);var l=new ba(o.getStartX(),o.getStartY(),o.getStartZ(),s.getX(),s.getY(),s.getZ(),o.getData()),u=new ba(s.getX(),s.getY(),s.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(l),e.add(u),n.add(o),r+=1}}return t.removeAll(n),t.addAll(e),r}createVertex(){if(1===arguments.length){let e=arguments[0];var t=null;return null!==this._vertexFactory?this._vertexFactory.createVertex(e,null):new la(e)}if(2===arguments.length){let e=arguments[0],r=arguments[1];return t=null,(t=null!==this._vertexFactory?this._vertexFactory.createVertex(e,r):new la(e)).setOnConstraint(!0),t}}getSubdivision(){return this._subdiv}computeBoundingBox(){var t=xa.computeVertexEnvelope(this._initialVertices),e=xa.computeVertexEnvelope(this._segVertices),r=new R(t);r.expandToInclude(e);var n=.2*r.getWidth(),i=.2*r.getHeight(),o=Math.max(n,i);this._computeAreaEnv=new R(r),this._computeAreaEnv.expandBy(o)}setVertexFactory(t){this._vertexFactory=t}formInitialDelaunay(){this.computeBoundingBox(),this._subdiv=new ga(this._computeAreaEnv,this._tolerance),this._subdiv.setLocator(new fa(this._subdiv)),this._incDel=new ca(this._subdiv),this.insertSites(this._initialVertices)}insertSite(){if(arguments[0]instanceof la){let r=arguments[0];var t=this._kdt.insert(r.getCoordinate(),r);if(t.isRepeated()){var e=t.getData();return e.merge(r),e}return this._incDel.insertSite(r),r}if(arguments[0]instanceof _){let t=arguments[0];this.insertSite(this.createVertex(t))}}getClass(){return xa}get interfaces_(){return[]}}xa.constructor_=function(){this._initialVertices=null,this._segVertices=null,this._segments=new C,this._subdiv=null,this._incDel=null,this._convexHull=null,this._splitFinder=new oa,this._kdt=null,this._vertexFactory=null,this._computeAreaEnv=null,this._splitPt=null,this._tolerance=null;let t=arguments[0],e=arguments[1];this._initialVertices=new C(t),this._tolerance=e,this._kdt=new Xr(e)},xa.MAX_SPLIT_ITER=99;class wa{constructor(){wa.constructor_.apply(this,arguments)}static extractUniqueCoordinates(t){if(null===t)return new P;var e=t.getCoordinates();return wa.unique(e)}static envelope(t){for(var e=new R,r=t.iterator();r.hasNext();){var n=r.next();e.expandToInclude(n)}return e}static unique(t){var e=Q.copyDeep(t);return vt.sort(e),new P(e,!1)}static toVertices(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next();e.add(new sa(n))}return e}create(){if(null!==this._subdiv)return null;var t=wa.envelope(this._siteCoords),e=wa.toVertices(this._siteCoords);this._subdiv=new ga(t,this._tolerance),new ca(this._subdiv).insertSites(e)}setTolerance(t){this._tolerance=t}setSites(){if(arguments[0]instanceof W){let t=arguments[0];this._siteCoords=wa.extractUniqueCoordinates(t)}else if(b(arguments[0],w)){let t=arguments[0];this._siteCoords=wa.unique(Q.toCoordinateArray(t))}}getEdges(t){return this.create(),this._subdiv.getEdges(t)}getSubdivision(){return this.create(),this._subdiv}getTriangles(t){return this.create(),this._subdiv.getTriangles(t)}getClass(){return wa}get interfaces_(){return[]}}wa.constructor_=function(){this._siteCoords=null,this._tolerance=0,this._subdiv=null};class Ea{constructor(){Ea.constructor_.apply(this,arguments)}static createConstraintSegments(){if(1===arguments.length){let i=arguments[0];for(var t=Ae.getLines(i),e=new C,r=t.iterator();r.hasNext();){var n=r.next();Ea.createConstraintSegments(n,e)}return e}if(2===arguments.length){let t=arguments[1];var i=arguments[0].getCoordinates();for(r=1;r<i.length;r++)t.add(new ba(i[r-1],i[r]))}}createSiteVertices(t){for(var e=new C,r=t.iterator();r.hasNext();){var n=r.next();this._constraintVertexMap.containsKey(n)||e.add(new la(n))}return e}create(){if(null!==this._subdiv)return null;var t=wa.envelope(this._siteCoords),e=new C;null!==this._constraintLines&&(t.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),e=Ea.createConstraintSegments(this._constraintLines));var r=this.createSiteVertices(this._siteCoords),n=new xa(r,this._tolerance);n.setConstraints(e,new C(this._constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this._subdiv=n.getSubdivision()}setTolerance(t){this._tolerance=t}setConstraints(t){this._constraintLines=t}setSites(t){this._siteCoords=wa.extractUniqueCoordinates(t)}getEdges(t){return this.create(),this._subdiv.getEdges(t)}getSubdivision(){return this.create(),this._subdiv}getTriangles(t){return this.create(),this._subdiv.getTriangles(t)}createVertices(t){for(var e=t.getCoordinates(),r=0;r<e.length;r++){var n=new la(e[r]);this._constraintVertexMap.put(e[r],n)}}getClass(){return Ea}get interfaces_(){return[]}}Ea.constructor_=function(){this._siteCoords=null,this._constraintLines=null,this._tolerance=0,this._subdiv=null,this._constraintVertexMap=new pt};class Oa{constructor(){Oa.constructor_.apply(this,arguments)}static clipGeometryCollection(t,e){for(var r=t.getFactory().toGeometry(e),n=new C,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i),a=null;e.contains(o.getEnvelopeInternal())?a=o:e.intersects(o.getEnvelopeInternal())&&(a=r.intersection(o)).setUserData(o.getUserData()),null===a||a.isEmpty()||n.add(a)}return t.getFactory().createGeometryCollection(ae.toGeometryArray(n))}create(){if(null!==this._subdiv)return null;var t=wa.envelope(this._siteCoords);this._diagramEnv=t;var e=Math.max(this._diagramEnv.getWidth(),this._diagramEnv.getHeight());this._diagramEnv.expandBy(e),null!==this._clipEnv&&this._diagramEnv.expandToInclude(this._clipEnv);var r=wa.toVertices(this._siteCoords);this._subdiv=new ga(t,this._tolerance),new ca(this._subdiv).insertSites(r)}getDiagram(t){this.create();var e=this._subdiv.getVoronoiDiagram(t);return Oa.clipGeometryCollection(e,this._diagramEnv)}setTolerance(t){this._tolerance=t}setSites(){if(arguments[0]instanceof W){let t=arguments[0];this._siteCoords=wa.extractUniqueCoordinates(t)}else if(b(arguments[0],w)){let t=arguments[0];this._siteCoords=wa.unique(Q.toCoordinateArray(t))}}setClipEnvelope(t){this._clipEnv=t}getSubdivision(){return this.create(),this._subdiv}getClass(){return Oa}get interfaces_(){return[]}}Oa.constructor_=function(){this._siteCoords=null,this._tolerance=0,this._subdiv=null,this._clipEnv=null,this._diagramEnv=null};var Sa=Object.freeze({Vertex:sa}),Ia=Object.freeze({ConformingDelaunayTriangulationBuilder:Ea,DelaunayTriangulationBuilder:wa,VoronoiDiagramBuilder:Oa,quadedge:Sa});class Ca{constructor(){Ca.constructor_.apply(this,arguments)}static getEndLocation(t){var e=new Ca;return e.setToEnd(t),e}static pointAlongSegmentByFraction(t,e,r){if(r<=0)return t;if(r>=1)return e;var n=(e.x-t.x)*r+t.x,i=(e.y-t.y)*r+t.y,o=(e.z-t.z)*r+t.z;return new _(n,i,o)}static compareLocationValues(t,e,r,n,i,o){return t<n?-1:t>n?1:e<i?-1:e>i?1:r<o?-1:r>o?1:0}getSegmentIndex(){return this._segmentIndex}getComponentIndex(){return this._componentIndex}isEndpoint(t){var e=t.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex>=e||this._segmentIndex===e&&this._segmentFraction>=1}isValid(t){if(this._componentIndex<0||this._componentIndex>=t.getNumGeometries())return!1;var e=t.getGeometryN(this._componentIndex);return!(this._segmentIndex<0||this._segmentIndex>e.getNumPoints()||this._segmentIndex===e.getNumPoints()&&0!==this._segmentFraction||this._segmentFraction<0||this._segmentFraction>1)}normalize(){this._segmentFraction<0&&(this._segmentFraction=0),this._segmentFraction>1&&(this._segmentFraction=1),this._componentIndex<0&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0),this._segmentIndex<0&&(this._segmentIndex=0,this._segmentFraction=0),1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)}toLowest(t){var e=t.getGeometryN(this._componentIndex).getNumPoints()-1;return this._segmentIndex<e?this:new Ca(this._componentIndex,e,1,!1)}getCoordinate(t){var e=t.getGeometryN(this._componentIndex),r=e.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=e.getNumPoints()-1)return r;var n=e.getCoordinateN(this._segmentIndex+1);return Ca.pointAlongSegmentByFraction(r,n,this._segmentFraction)}getSegmentFraction(){return this._segmentFraction}getSegment(t){var e=t.getGeometryN(this._componentIndex),r=e.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=e.getNumPoints()-1){var n=e.getCoordinateN(e.getNumPoints()-2);return new de(n,r)}var i=e.getCoordinateN(this._segmentIndex+1);return new de(r,i)}clamp(t){if(this._componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this._segmentIndex>=t.getNumPoints()){var e=t.getGeometryN(this._componentIndex);this._segmentIndex=e.getNumPoints()-1,this._segmentFraction=1}}setToEnd(t){this._componentIndex=t.getNumGeometries()-1;var e=t.getGeometryN(this._componentIndex);this._segmentIndex=e.getNumPoints()-1,this._segmentFraction=1}compareTo(t){var e=t;return this._componentIndex<e._componentIndex?-1:this._componentIndex>e._componentIndex?1:this._segmentIndex<e._segmentIndex?-1:this._segmentIndex>e._segmentIndex?1:this._segmentFraction<e._segmentFraction?-1:this._segmentFraction>e._segmentFraction?1:0}copy(){return new Ca(this._componentIndex,this._segmentIndex,this._segmentFraction)}toString(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"}isOnSameSegment(t){return this._componentIndex===t._componentIndex&&(this._segmentIndex===t._segmentIndex||t._segmentIndex-this._segmentIndex==1&&0===t._segmentFraction||this._segmentIndex-t._segmentIndex==1&&0===this._segmentFraction)}snapToVertex(t,e){if(this._segmentFraction<=0||this._segmentFraction>=1)return null;var r=this.getSegmentLength(t),n=this._segmentFraction*r,i=r-n;n<=i&&n<e?this._segmentFraction=0:i<=n&&i<e&&(this._segmentFraction=1)}compareLocationValues(t,e,r){return this._componentIndex<t?-1:this._componentIndex>t?1:this._segmentIndex<e?-1:this._segmentIndex>e?1:this._segmentFraction<r?-1:this._segmentFraction>r?1:0}getSegmentLength(t){var e=t.getGeometryN(this._componentIndex),r=this._segmentIndex;this._segmentIndex>=e.getNumPoints()-1&&(r=e.getNumPoints()-2);var n=e.getCoordinateN(r),i=e.getCoordinateN(r+1);return n.distance(i)}isVertex(){return this._segmentFraction<=0||this._segmentFraction>=1}getClass(){return Ca}get interfaces_(){return[h]}}Ca.constructor_=function(){if(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._componentIndex=t._componentIndex,this._segmentIndex=t._segmentIndex,this._segmentFraction=t._segmentFraction}else if(2===arguments.length){let t=arguments[0],e=arguments[1];Ca.constructor_.call(this,0,t,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._componentIndex=t,this._segmentIndex=e,this._segmentFraction=r,this.normalize()}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._componentIndex=t,this._segmentIndex=e,this._segmentFraction=r,n&&this.normalize()}};class Ta{constructor(){Ta.constructor_.apply(this,arguments)}static segmentEndVertexIndex(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()}getComponentIndex(){return this._componentIndex}getLine(){return this._currentLine}getVertexIndex(){return this._vertexIndex}getSegmentEnd(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null}next(){if(!this.hasNext())return null;this._vertexIndex++,this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)}loadCurrentLine(){if(this._componentIndex>=this._numLines)return this._currentLine=null,null;this._currentLine=this._linearGeom.getGeometryN(this._componentIndex)}getSegmentStart(){return this._currentLine.getCoordinateN(this._vertexIndex)}isEndOfLine(){return!(this._componentIndex>=this._numLines||this._vertexIndex<this._currentLine.getNumPoints()-1)}hasNext(){return!(this._componentIndex>=this._numLines||this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())}getClass(){return Ta}get interfaces_(){return[]}}Ta.constructor_=function(){if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1===arguments.length){let t=arguments[0];Ta.constructor_.call(this,t,0,0)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];Ta.constructor_.call(this,t,e.getComponentIndex(),Ta.segmentEndVertexIndex(e))}else if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];if(!b(t,dt))throw new r("Lineal geometry is required");this._linearGeom=t,this._numLines=t.getNumGeometries(),this._componentIndex=e,this._vertexIndex=n,this.loadCurrentLine()}};class Pa{constructor(){Pa.constructor_.apply(this,arguments)}static indexOf(t,e){return new Pa(t).indexOf(e)}static indexOfAfter(t,e,r){return new Pa(t).indexOfAfter(e,r)}indexOf(t){return this.indexOfFromStart(t,null)}indexOfFromStart(t,e){for(var r=i.MAX_VALUE,n=0,o=0,a=-1,s=new de,l=new Ta(this._linearGeom);l.hasNext();l.next())if(!l.isEndOfLine()){s.p0=l.getSegmentStart(),s.p1=l.getSegmentEnd();var u=s.distance(t),c=s.segmentFraction(t),h=l.getComponentIndex(),f=l.getVertexIndex();u<r&&(null===e||e.compareLocationValues(h,f,c)<0)&&(n=h,o=f,a=c,r=u)}return r===i.MAX_VALUE?new Ca(e):new Ca(n,o,a)}indexOfAfter(t,e){if(null===e)return this.indexOf(t);var r=Ca.getEndLocation(this._linearGeom);if(r.compareTo(e)<=0)return r;var n=this.indexOfFromStart(t,e);return m.isTrue(n.compareTo(e)>=0,"computed location is before specified minimum location"),n}getClass(){return Pa}get interfaces_(){return[]}}Pa.constructor_=function(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t};class Ra{constructor(){Ra.constructor_.apply(this,arguments)}static indicesOf(t,e){return new Ra(t).indicesOf(e)}indicesOf(t){var e=t.getGeometryN(0).getCoordinateN(0),r=t.getGeometryN(t.getNumGeometries()-1),n=r.getCoordinateN(r.getNumPoints()-1),i=new Pa(this._linearGeom),o=new Array(2).fill(null);return o[0]=i.indexOf(e),0===t.getLength()?o[1]=o[0].copy():o[1]=i.indexOfAfter(n,o[0]),o}getClass(){return Ra}get interfaces_(){return[]}}Ra.constructor_=function(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t};class La{constructor(){La.constructor_.apply(this,arguments)}getGeometry(){return this.endLine(),this._geomFact.buildGeometry(this._lines)}getLastCoordinate(){return this._lastPt}endLine(){if(null===this._coordList)return null;if(this._ignoreInvalidLines&&this._coordList.size()<2)return this._coordList=null,null;var t=this._coordList.toCoordinateArray(),e=t;this._fixInvalidLines&&(e=this.validCoordinateSequence(t)),this._coordList=null;var n=null;try{n=this._geomFact.createLineString(e)}catch(t){if(!(t instanceof r))throw t;if(!this._ignoreInvalidLines)throw t}null!==n&&this._lines.add(n)}setFixInvalidLines(t){this._fixInvalidLines=t}add(){if(1===arguments.length){let t=arguments[0];this.add(t,!0)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];null===this._coordList&&(this._coordList=new P),this._coordList.add(t,e),this._lastPt=t}}setIgnoreInvalidLines(t){this._ignoreInvalidLines=t}validCoordinateSequence(t){return t.length>=2?t:[t[0],t[0]]}getClass(){return La}get interfaces_(){return[]}}La.constructor_=function(){this._geomFact=null,this._lines=new C,this._coordList=null,this._ignoreInvalidLines=!1,this._fixInvalidLines=!1,this._lastPt=null;let t=arguments[0];this._geomFact=t};class Ma{constructor(){Ma.constructor_.apply(this,arguments)}static extract(t,e,r){return new Ma(t).extract(e,r)}computeLinear(t,e){var r=new La(this._line.getFactory());r.setFixInvalidLines(!0),t.isVertex()||r.add(t.getCoordinate(this._line));for(var n=new Ta(this._line,t);n.hasNext()&&!(e.compareLocationValues(n.getComponentIndex(),n.getVertexIndex(),0)<0);n.next()){var i=n.getSegmentStart();r.add(i),n.isEndOfLine()&&r.endLine()}return e.isVertex()||r.add(e.getCoordinate(this._line)),r.getGeometry()}computeLine(t,e){var r=this._line.getCoordinates(),n=new P,i=t.getSegmentIndex();t.getSegmentFraction()>0&&(i+=1);var o=e.getSegmentIndex();1===e.getSegmentFraction()&&(o+=1),o>=r.length&&(o=r.length-1),t.isVertex()||n.add(t.getCoordinate(this._line));for(var a=i;a<=o;a++)n.add(r[a]);e.isVertex()||n.add(e.getCoordinate(this._line)),n.size()<=0&&n.add(t.getCoordinate(this._line));var s=n.toCoordinateArray();return s.length<=1&&(s=[s[0],s[0]]),this._line.getFactory().createLineString(s)}extract(t,e){return e.compareTo(t)<0?this.reverse(this.computeLinear(e,t)):this.computeLinear(t,e)}reverse(t){return t instanceof jt||t instanceof Ot?t.reverse():(m.shouldNeverReachHere("non-linear geometry encountered"),null)}getClass(){return Ma}get interfaces_(){return[]}}Ma.constructor_=function(){this._line=null;let t=arguments[0];this._line=t};class Na{constructor(){Na.constructor_.apply(this,arguments)}clampIndex(t){var e=t.copy();return e.clamp(this._linearGeom),e}project(t){return Pa.indexOf(this._linearGeom,t)}checkGeometryType(){if(!(this._linearGeom instanceof jt||this._linearGeom instanceof Ot))throw new r("Input geometry must be linear")}extractPoint(){if(1===arguments.length)return arguments[0].getCoordinate(this._linearGeom);if(2===arguments.length){let e=arguments[1];var t=arguments[0].toLowest(this._linearGeom);return t.getSegment(this._linearGeom).pointAlongOffset(t.getSegmentFraction(),e)}}isValidIndex(t){return t.isValid(this._linearGeom)}getEndIndex(){return Ca.getEndLocation(this._linearGeom)}getStartIndex(){return new Ca}indexOfAfter(t,e){return Pa.indexOfAfter(this._linearGeom,t,e)}extractLine(t,e){return Ma.extract(this._linearGeom,t,e)}indexOf(t){return Pa.indexOf(this._linearGeom,t)}indicesOf(t){return Ra.indicesOf(this._linearGeom,t)}getClass(){return Na}get interfaces_(){return[]}}Na.constructor_=function(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t,this.checkGeometryType()};class Aa{constructor(){Aa.constructor_.apply(this,arguments)}static indexOf(t,e){return new Aa(t).indexOf(e)}static indexOfAfter(t,e,r){return new Aa(t).indexOfAfter(e,r)}indexOf(t){return this.indexOfFromStart(t,-1)}indexOfFromStart(t,e){for(var r=i.MAX_VALUE,n=e,o=0,a=new de,s=new Ta(this._linearGeom);s.hasNext();){if(!s.isEndOfLine()){a.p0=s.getSegmentStart(),a.p1=s.getSegmentEnd();var l=a.distance(t),u=this.segmentNearestMeasure(a,t,o);l<r&&u>e&&(n=u,r=l),o+=a.getLength()}s.next()}return n}indexOfAfter(t,e){if(e<0)return this.indexOf(t);var r=this._linearGeom.getLength();if(r<e)return r;var n=this.indexOfFromStart(t,e);return m.isTrue(n>=e,"computed index is before specified minimum index"),n}segmentNearestMeasure(t,e,r){var n=t.projectionFactor(e);return n<=0?r:n<=1?r+n*t.getLength():r+t.getLength()}getClass(){return Aa}get interfaces_(){return[]}}Aa.constructor_=function(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t};class ka{constructor(){ka.constructor_.apply(this,arguments)}static getLength(t,e){return new ka(t).getLength(e)}static getLocation(){if(2===arguments.length){let t=arguments[1];return new ka(arguments[0]).getLocation(t)}if(3===arguments.length){let t=arguments[1],e=arguments[2];return new ka(arguments[0]).getLocation(t,e)}}getLength(t){for(var e=0,r=new Ta(this._linearGeom);r.hasNext();){if(!r.isEndOfLine()){var n=r.getSegmentStart(),i=r.getSegmentEnd().distance(n);if(t.getComponentIndex()===r.getComponentIndex()&&t.getSegmentIndex()===r.getVertexIndex())return e+i*t.getSegmentFraction();e+=i}r.next()}return e}resolveHigher(t){if(!t.isEndpoint(this._linearGeom))return t;var e=t.getComponentIndex();if(e>=this._linearGeom.getNumGeometries()-1)return t;do{e++}while(e<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(e).getLength());return new Ca(e,0,0)}getLocation(){if(1===arguments.length){let t=arguments[0];return this.getLocation(t,!0)}if(2===arguments.length){let r=arguments[0],n=arguments[1];var t=r;r<0&&(t=this._linearGeom.getLength()+r);var e=this.getLocationForward(t);return n?e:this.resolveHigher(e)}}getLocationForward(t){if(t<=0)return new Ca;for(var e=0,r=new Ta(this._linearGeom);r.hasNext();){if(r.isEndOfLine()){if(e===t){var n=r.getComponentIndex(),i=r.getVertexIndex();return new Ca(n,i,0)}}else{var o=r.getSegmentStart(),a=r.getSegmentEnd().distance(o);if(e+a>t){var s=(t-e)/a;return n=r.getComponentIndex(),i=r.getVertexIndex(),new Ca(n,i,s)}e+=a}r.next()}return Ca.getEndLocation(this._linearGeom)}getClass(){return ka}get interfaces_(){return[]}}ka.constructor_=function(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t};class ja{constructor(){ja.constructor_.apply(this,arguments)}clampIndex(t){var e=this.positiveIndex(t),r=this.getStartIndex();if(e<r)return r;var n=this.getEndIndex();return e>n?n:e}locationOf(){if(1===arguments.length){let t=arguments[0];return ka.getLocation(this._linearGeom,t)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return ka.getLocation(this._linearGeom,t,e)}}project(t){return Aa.indexOf(this._linearGeom,t)}positiveIndex(t){return t>=0?t:this._linearGeom.getLength()+t}extractPoint(){if(1===arguments.length){let t=arguments[0];return ka.getLocation(this._linearGeom,t).getCoordinate(this._linearGeom)}if(2===arguments.length){let e=arguments[0],r=arguments[1];var t=ka.getLocation(this._linearGeom,e).toLowest(this._linearGeom);return t.getSegment(this._linearGeom).pointAlongOffset(t.getSegmentFraction(),r)}}isValidIndex(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()}getEndIndex(){return this._linearGeom.getLength()}getStartIndex(){return 0}indexOfAfter(t,e){return Aa.indexOfAfter(this._linearGeom,t,e)}extractLine(t,e){new Na(this._linearGeom);var r=this.clampIndex(t),n=this.clampIndex(e),i=r===n,o=this.locationOf(r,i),a=this.locationOf(n);return Ma.extract(this._linearGeom,o,a)}indexOf(t){return Aa.indexOf(this._linearGeom,t)}indicesOf(t){var e=Ra.indicesOf(this._linearGeom,t);return[ka.getLength(this._linearGeom,e[0]),ka.getLength(this._linearGeom,e[1])]}getClass(){return ja}get interfaces_(){return[]}}ja.constructor_=function(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t};var Fa=Object.freeze({LengthIndexedLine:ja,LengthLocationMap:ka,LinearGeometryBuilder:La,LinearIterator:Ta,LinearLocation:Ca,LocationIndexedLine:Na});class Da{get interfaces_(){return[]}getClass(){return Da}static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return eo.createEmptyResult(eo.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Qi.overlayOp(t,e,eo.UNION)}}W.prototype.equalsTopo=function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&So.relate(this,t).isEquals(this.getDimension(),t.getDimension())},W.prototype.union=function(){if(0===arguments.length)return Lo.union(this);if(1===arguments.length){let t=arguments[0];return Da.union(this,t)}},W.prototype.isValid=function(){return Do.isValid(this)},W.prototype.intersection=function(t){if(this.isEmpty()||t.isEmpty())return eo.createEmptyResult(eo.INTERSECTION,this,t,this._factory);if(this.isGeometryCollection()){var e=t;return zi.map(this,{interfaces_:[MapOp],map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Qi.overlayOp(this,t,eo.INTERSECTION)},W.prototype.covers=function(t){return So.covers(this,t)},W.prototype.coveredBy=function(t){return So.covers(t,this)},W.prototype.touches=function(t){return So.touches(this,t)},W.prototype.intersects=function(t){return So.intersects(this,t)},W.prototype.within=function(t){return So.contains(t,this)},W.prototype.overlaps=function(t){return So.overlaps(this,t)},W.prototype.disjoint=function(t){return So.disjoint(this,t)},W.prototype.crosses=function(t){return So.crosses(this,t)},W.prototype.buffer=function(){if(1===arguments.length){let t=arguments[0];return mi.bufferOp(this,t)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return mi.bufferOp(this,t,e)}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];return mi.bufferOp(this,t,e,r)}},W.prototype.convexHull=function(){return new Qe(this).getConvexHull()},W.prototype.relate=function(...t){if(1===arguments.length){let t=arguments[0];return So.relate(this,t)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return So.relate(this,t).matches(e)}},W.prototype.getCentroid=function(){if(this.isEmpty())return this._factory.createPoint();var t=Ze.getCentroid(this);return this.createPointFromInternalCoord(t,this)},W.prototype.getInteriorPoint=function(){if(this.isEmpty())return this._factory.createPoint();var t=null,e=this.getDimension();return t=0===e?new ir(this).getInteriorPoint():1===e?new nr(this).getInteriorPoint():new er(this).getInteriorPoint(),this.createPointFromInternalCoord(t,this)},W.prototype.symDifference=function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return eo.createEmptyResult(eo.SYMDIFFERENCE,this,t,this._factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Qi.overlayOp(this,t,eo.SYMDIFFERENCE)},W.prototype.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},W.prototype.toText=function(){return(new he).write(this)},W.prototype.toString=function(){this.toText()},W.prototype.contains=function(t){return So.contains(this,t)},W.prototype.difference=function(t){return this.isEmpty()?eo.createEmptyResult(eo.DIFFERENCE,this,t,this._factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Qi.overlayOp(this,t,eo.DIFFERENCE))},W.prototype.isSimple=function(){return new Gn(this).isSimple()},W.prototype.isWithinDistance=function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&Ei.isWithinDistance(this,t,e)},W.prototype.distance=function(t){return Ei.distance(this,t)},W.prototype.isEquivalentClass=function(t){return this.getClass()===t.getClass()},t.version="2.0.2 (f363091)",t.algorithm=sr,t.densify=hr,t.dissolve=vr,t.geom=ve,t.geomgraph=qr,t.index=yn,t.io=wn,t.noding=Dn,t.operation=Uo,t.precision=Vo,t.simplify=ra,t.triangulate=Ia,t.linearref=Fa,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"TOP",(function(){return Lg})),r.d(n,"MIDDLE",(function(){return Mg})),r.d(n,"BOTTOM",(function(){return Ng})),r.d(n,"ALPHABETIC",(function(){return Ag})),r.d(n,"HANGING",(function(){return kg})),r.d(n,"IDEOGRAPHIC",(function(){return jg}));var i={};r.r(i),r.d(i,"LEFT",(function(){return Fg})),r.d(i,"CENTER",(function(){return Dg})),r.d(i,"RIGHT",(function(){return Gg})),r.d(i,"JUSTIFY",(function(){return Ug}));var o={};r.r(o),r.d(o,"show",(function(){return Dx})),r.d(o,"info",(function(){return Gx})),r.d(o,"error",(function(){return Ux})),r.d(o,"success",(function(){return Bx}));var a={};r.r(a),r.d(a,"POINT",(function(){return pA})),r.d(a,"LINE",(function(){return dA})),r.d(a,"POLYGON",(function(){return gA})),r.d(a,"MPOINT",(function(){return yA})),r.d(a,"MLINE",(function(){return mA})),r.d(a,"MPOLYGON",(function(){return _A}));var s=r(35),l=r.n(s),u=r(1),c=function(t,e,r){var n=Object(u.o)(e),i=Object(u.o)(r);return Object(u.z)(t,n,i)},h=r(6),f="http://www.w3.org/2001/XMLSchema-instance";function p(t,e){return j().createElementNS(t,e)}function d(t,e){return g(t,e,[]).join("")}function g(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)g(n,e,r)}return r}function y(t){return"documentElement"in t}function m(t){return(new DOMParser).parseFromString(t,"application/xml")}function _(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);if(void 0!==i){var o=n[n.length-1];Object(h.c)(o,i)}}}function v(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}}function b(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}}function x(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:n.localName,l=void 0;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function w(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}}function E(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}}function O(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var a={};a[e.localName]=t,r[e.namespaceURI]=a,n=S(e.localName)}L(r,n,i,o)}}function S(t,e){var r=t;return function(t,n,i){var o=n[n.length-1].node,a=r;return void 0===a&&(a=i),p(void 0!==e?e:o.namespaceURI,a)}}var I=S();function C(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n}function T(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o}function P(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function R(t,e,r,n,i){return n.push(t),P(e,r,n,i),n.pop()}function L(t,e,r,n,i,o){for(var a,s,l=(void 0!==i?i:r).length,u=0;u<l;++u)void 0!==(a=r[u])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==i?i[u]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function N(t,e,r,n,i,o,a){return i.push(t),L(e,r,n,i,o,a),i.pop()}var A=void 0;var k=void 0;function j(){return void 0===k&&"undefined"!=typeof document&&(k=document.implementation.createDocument("","",null)),k}var F=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=m(t);return this.readFromDocument(e)}return y(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},t.prototype.readFromNode=function(t){},t}();function D(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var G=r(49);function U(t){return B(d(t,!1))}function B(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function z(t){var e=d(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3}function V(t){return q(d(t,!1))}function q(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function Y(t){return W(d(t,!1))}function W(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function X(t){return d(t,!1).trim()}function H(t,e){J(t,e?"1":"0")}function Z(t,e){var r=e.toPrecision();t.appendChild(j().createTextNode(r))}function K(t,e){var r=e.toString();t.appendChild(j().createTextNode(r))}function J(t,e){t.appendChild(j().createTextNode(e))}var $,Q=($=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),tt=[null,"http://www.opengis.net/ows/1.1"],et=T(tt,{ServiceIdentification:w((function(t,e){return R({},dt,t,e)})),ServiceProvider:w((function(t,e){return R({},gt,t,e)})),OperationsMetadata:w((function(t,e){return R({},ct,t,e)}))}),rt=function(t){function e(){return t.call(this)||this}return Q(e,t),e.prototype.readFromNode=function(t){var e=R({},et,t,[]);return e||null},e}(F),nt=T(tt,{DeliveryPoint:w(X),City:w(X),AdministrativeArea:w(X),PostalCode:w(X),Country:w(X),ElectronicMailAddress:w(X)}),it=T(tt,{Value:x((function(t,e){return X(t)}))}),ot=T(tt,{AllowedValues:w((function(t,e){return R({},it,t,e)}))}),at=T(tt,{Phone:w((function(t,e){return R({},ht,t,e)})),Address:w((function(t,e){return R({},nt,t,e)}))}),st=T(tt,{HTTP:w((function(t,e){return R({},lt,t,e)}))}),lt=T(tt,{Get:x((function(t,e){var r=D(t);if(!r)return;return R({href:r},ft,t,e)})),Post:void 0}),ut=T(tt,{DCP:w((function(t,e){return R({},st,t,e)}))}),ct=T(tt,{Operation:function(t,e){var r=t.getAttribute("name"),n=R({},ut,t,e);if(!n)return;e[e.length-1][r]=n}}),ht=T(tt,{Voice:w(X),Facsimile:w(X)}),ft=T(tt,{Constraint:x((function(t,e){var r=t.getAttribute("name");if(!r)return;return R({name:r},ot,t,e)}))}),pt=T(tt,{IndividualName:w(X),PositionName:w(X),ContactInfo:w((function(t,e){return R({},at,t,e)}))}),dt=T(tt,{Abstract:w(X),AccessConstraints:w(X),Fees:w(X),Title:w(X),ServiceTypeVersion:w(X),ServiceType:w(X)}),gt=T(tt,{ProviderName:w(X),ProviderSite:w(D),ServiceContact:w((function(t,e){return R({},pt,t,e)}))});var yt=rt,mt=r(0),_t=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vt=[null,"http://www.opengis.net/wmts/1.0"],bt=[null,"http://www.opengis.net/ows/1.1"],xt=T(vt,{Contents:w((function(t,e){return R({},Et,t,e)}))}),wt=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new yt,e}return _t(e,t),e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=R(r,xt,t,[]))||null):null},e}(F),Et=T(vt,{Layer:x((function(t,e){return R({},Ot,t,e)})),TileMatrixSet:x((function(t,e){return R({},Lt,t,e)}))}),Ot=T(vt,{Style:x((function(t,e){var r=R({},St,t,e);if(!r)return;var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r})),Format:x(X),TileMatrixSetLink:x((function(t,e){return R({},It,t,e)})),Dimension:x((function(t,e){return R({},Pt,t,e)})),ResourceURL:x((function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o}))},T(bt,{Title:w(X),Abstract:w(X),WGS84BoundingBox:w(Nt),Identifier:w(X)})),St=T(vt,{LegendURL:x((function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=D(t),r}))},T(bt,{Title:w(X),Identifier:w(X)})),It=T(vt,{TileMatrixSet:w(X),TileMatrixSetLimits:w((function(t,e){return R([],Ct,t,e)}))}),Ct=T(vt,{TileMatrixLimits:v((function(t,e){return R({},Tt,t,e)}))}),Tt=T(vt,{TileMatrix:w(X),MinTileRow:w(Y),MaxTileRow:w(Y),MinTileCol:w(Y),MaxTileCol:w(Y)}),Pt=T(vt,{Default:w(X),Value:x(X)},T(bt,{Identifier:w(X)})),Rt=T(bt,{LowerCorner:v(At),UpperCorner:v(At)}),Lt=T(vt,{WellKnownScaleSet:w(X),TileMatrix:x((function(t,e){return R({},Mt,t,e)}))},T(bt,{SupportedCRS:w(X),Identifier:w(X),BoundingBox:w(Nt)})),Mt=T(vt,{TopLeftCorner:w(At),ScaleDenominator:w(V),TileWidth:w(Y),TileHeight:w(Y),MatrixWidth:w(Y),MatrixHeight:w(Y)},T(bt,{Identifier:w(X)}));function Nt(t,e){var r=R([],Rt,t,e);if(2==r.length)return Object(mt.c)(r)}function At(t,e){var r=X(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}var kt=wt,jt=(r(129),r(131),r(133),484813681109536e-20),Ft=Math.PI/2,Dt=1e-10,Gt=.017453292519943295,Ut=57.29577951308232,Bt=Math.PI/4,zt=2*Math.PI,Vt=3.14159265359,qt={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Yt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Wt=/[\s_\-\/\(\)]/g;function Xt(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(Wt,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(Wt,"")===i)return t[r]}var Ht=function(t){var e,r,n,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Gt},lat_1:function(t){i.lat1=t*Gt},lat_2:function(t){i.lat2=t*Gt},lat_ts:function(t){i.lat_ts=t*Gt},lon_0:function(t){i.long0=t*Gt},lon_1:function(t){i.long1=t*Gt},lon_2:function(t){i.long2=t*Gt},alpha:function(t){i.alpha=parseFloat(t)*Gt},lonc:function(t){i.longc=t*Gt},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Xt(Yt,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Gt},pm:function(t){var e=Xt(qt,t);i.from_greenwich=(e||parseFloat(t))*Gt},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)r=o[e],e in a?"function"==typeof(n=a[e])?n(r):i[n]=r:i[e]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},Zt=function(t){return new ee(t).output()},Kt=/\s/,Jt=/[A-Za-z]/,$t=/[A-Za-z84]/,Qt=/[,\]]/,te=/[\d\.E\-\+]/;function ee(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function re(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce((function(t,e){return ne(e,t),t}),n);e&&(t[e]=i)}function ne(t,e){if(Array.isArray(t)){var r,n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void ne(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n)switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&ne(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&ne(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void re(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return ne(t,e[n]);return re(e,n,t)}else e[n]=t;else e[n]=!0}else e[t]=!0}ee.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Kt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},ee.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Qt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},ee.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},ee.prototype.number=function(t){if(!te.test(t)){if(Qt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},ee.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},ee.prototype.keyword=function(t){if($t.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Qt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},ee.prototype.neutral=function(t){if(Jt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(te.test(t))return this.word=t,void(this.state=3);if(!Qt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},ee.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ie(t){return.017453292519943295*t}var oe=function(t){var e=Zt(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return ne(e,i),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function r(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ie],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ie],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",ie],["lat0","latitude_of_origin",ie],["lat0","standard_parallel_1",ie],["lat1","standard_parallel_1",ie],["lat2","standard_parallel_2",ie],["azimuth","Azimuth"],["alpha","azimuth",ie],["srsCode","name"]].forEach((function(e){return r=t,i=(n=e)[0],o=n[1],void(!(i in r)&&o in r&&(r[i]=r[o],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=ie(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function ae(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?ae[t]=Ht(arguments[1]):ae[t]=oe(arguments[1]):ae[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?ae.apply(e,t):ae(t)}));if("string"==typeof t){if(t in ae)return ae[t]}else"EPSG"in t?ae["EPSG:"+t.EPSG]=t:"ESRI"in t?ae["ESRI:"+t.ESRI]=t:"IAU2000"in t?ae["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(ae);var se=ae;var le=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var ue=["3857","900913","3785","102113"];var ce=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in se}(t))return se[t];if(function(t){return le.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=oe(t);if(function(t){var e=Xt(t,"authority");if(e){var r=Xt(e,"epsg");return r&&ue.indexOf(r)>-1}}(e))return se["EPSG:3857"];var r=function(t){var e=Xt(t,"extension");if(e)return Xt(e,"proj4")}(e);return r?Ht(r):e}return function(t){return"+"===t[0]}(t)?Ht(t):void 0},he=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t},fe=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)},pe=function(t){return t<0?-1:1},de=function(t){return Math.abs(t)<=Vt?t:t-pe(t)*zt},ge=function(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(Ft-e))/n},ye=function(t,e){for(var r,n,i=.5*t,o=Ft-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(o),o+=n=Ft-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-o,Math.abs(n)<=1e-10)return o;return-9999};function me(t){return t}var _e=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=fe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,i=t.y;if(i*Ut>90&&i*Ut<-90&&n*Ut>180&&n*Ut<-180)return null;if(Math.abs(Math.abs(i)-Ft)<=Dt)return null;if(this.sphere)e=this.x0+this.a*this.k0*de(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Bt+.5*i));else{var o=Math.sin(i),a=ge(this.e,i,o);e=this.x0+this.a*this.k0*de(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=Ft-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(r=ye(this.e,o)))return null}return e=de(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:me,inverse:me,names:["longlat","identity"]}],ve={},be=[];function xe(t,e){var r=be.length;return t.names?(be[r]=t,t.names.forEach((function(t){ve[t.toLowerCase()]=r})),this):(console.log(e),!0)}var we={start:function(){_e.forEach(xe)},add:xe,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==ve[e]&&be[ve[e]]?be[ve[e]]:void 0}},Ee={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Oe=Ee.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ee.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Se={};Se.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Se.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Se.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Se.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Se.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Se.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Se.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Se.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},Se.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Se.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Se.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Se.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Se.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Se.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Se.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Se.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Se.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var Ie=function(t,e,r,n,i,o){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=jt,a.datum_params[4]*=jt,a.datum_params[5]*=jt,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=r,a.b=n,a.es=i,a.ep2=o,a};function Ce(t,e){if(!(this instanceof Ce))return new Ce(t);e=e||function(t){if(t)throw t};var r=ce(t);if("object"==typeof r){var n=Ce.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=Xt(Se,r.datumCode);i&&(r.datum_params=i.towgs84?i.towgs84.split(","):null,r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var o,a,s,l,u,c,h,f=function(t,e,r,n,i){if(!t){var o=Xt(Ee,n);o||(o=Oe),t=o.a,e=o.b,r=o.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<Dt)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(o=f.a,a=f.b,f.rf,s=r.R_A,c=((l=o*o)-(u=a*a))/l,h=0,s?(l=(o*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(l-u)/u}),d=r.datum||Ie(r.datumCode,r.datum_params,f.a,f.b,p.es,p.ep2);he(this,r),he(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}Ce.projections=we,Ce.projections.start();var Te=Ce;function Pe(t){return 1===t||2===t}var Re=function(t,e,r){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)||5===t.datum_type||5===e.datum_type?r:t.es!==e.es||t.a!==e.a||Pe(t.datum_type)||Pe(e.datum_type)?(r=function(t,e,r){var n,i,o,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-Ft&&l>-1.001*Ft)l=-Ft;else if(l>Ft&&l<1.001*Ft)l=Ft;else{if(l<-Ft)return{x:-1/0,y:-1/0,z:t.z};if(l>Ft)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((n=r/Math.sqrt(1-e*o))+u)*a*Math.cos(s),y:(n+u)*a*Math.sin(s),z:(n*(1-e)+u)*i}}(r,t.es,t.a),Pe(t.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],u=r[6];return{x:u*(t.x-l*t.y+s*t.z)+n,y:u*(l*t.x+t.y-a*t.z)+i,z:u*(-s*t.x+a*t.y+t.z)+o}}}(r,t.datum_type,t.datum_params)),Pe(e.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],u=r[6],c=(t.x-n)/u,h=(t.y-i)/u,f=(t.z-o)/u;return{x:c+l*h-s*f,y:-l*c+h+a*f,z:s*c-a*h+f}}}(r,e.datum_type,e.datum_params)),function(t,e,r,n){var i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v=1e-12,b=t.x,x=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+x*x),o=Math.sqrt(b*b+x*x+w*w),i/r<v){if(m=0,o/r<v)return _=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(x,b);a=w/o,h=(s=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*l,y=0;do{y++,u=e*(c=r/Math.sqrt(1-e*f*f))/(c+(_=i*h+w*f-c*(1-e*f*f))),g=(d=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*h-(p=s*(1-u)*l)*f,h=p,f=d}while(g*g>1e-24&&y<30);return{x:m,y:Math.atan(d/Math.abs(p)),z:_}}(r,e.es,e.a,e.b)):r},Le=function(t,e,r){var n,i,o,a=r.x,s=r.y,l=r.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=a,i="x"):1===o?(n=s,i="y"):(n=l,i="z"),t.axis[o]){case"e":u[i]=n;break;case"w":u[i]=-n;break;case"n":u[i]=n;break;case"s":u[i]=-n;break;case"u":void 0!==r[i]&&(u.z=n);break;case"d":void 0!==r[i]&&(u.z=-n);break;default:return null}return u},Me=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function Ne(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ae(t,e,r){var n;return Array.isArray(r)&&(r=Me(r)),function(t){Ne(t.x),Ne(t.y)}(r),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(r=Ae(t,n=new Te("WGS84"),r),t=n),"enu"!==t.axis&&(r=Le(t,!1,r)),"longlat"===t.projName?r={x:r.x*Gt,y:r.y*Gt}:(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter}),r=t.inverse(r)),t.from_greenwich&&(r.x+=t.from_greenwich),r=Re(t.datum,e.datum,r),e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y}),"longlat"===e.projName?r={x:r.x*Ut,y:r.y*Ut}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter})),"enu"!==e.axis?Le(e,!0,r):r}var ke=Te("WGS84");function je(t,e,r){var n,i,o;return Array.isArray(r)?(n=Ae(t,e,r),3===r.length?[n.x,n.y,n.z]:[n.x,n.y]):(i=Ae(t,e,r),2===(o=Object.keys(r)).length||o.forEach((function(t){"x"!==t&&"y"!==t&&(i[t]=r[t])})),i)}function Fe(t){return t instanceof Te?t:t.oProj?t.oProj:Te(t)}var De=function(t,e,r){t=Fe(t);var n,i=!1;return void 0===e?(e=t,t=ke,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=ke,i=!0),e=Fe(e),r?je(t,e,r):(n={forward:function(r){return je(t,e,r)},inverse:function(r){return je(e,t,r)}},i&&(n.oProj=e),n)},Ge="AJSAJS",Ue="AFAFAF",Be=65,ze=73,Ve=79,qe=86,Ye=90,We={forward:Xe,inverse:function(t){var e=Je(tr(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:He};function Xe(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,g=t.zoneNumber,y=Qe(g),m=Math.floor(p/1e5),_=Math.floor(d/1e5)%20,i=m,o=_,a=y,s=a-1,l=Ge.charCodeAt(s),u=Ue.charCodeAt(s),c=l+i-1,h=u+o,f=!1,c>Ye&&(c=c-Ye+Be-1,f=!0),(c===ze||l<ze&&c>ze||(c>ze||l<ze)&&f)&&c++,(c===Ve||l<Ve&&c>Ve||(c>Ve||l<Ve)&&f)&&++c===ze&&c++,c>Ye&&(c=c-Ye+Be-1),h>qe?(h=h-qe+Be-1,f=!0):f=!1,(h===ze||u<ze&&h>ze||(h>ze||u<ze)&&f)&&h++,(h===Ve||u<Ve&&h>Ve||(h>Ve||u<Ve)&&f)&&++h===ze&&h++,h>qe&&(h=h-qe+Be-1),String.fromCharCode(c)+String.fromCharCode(h))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var i,o,a,s,l,u,c,h,f;var p,d,g,y,m,_}(function(t){var e,r,n,i,o,a,s,l,u=t.lat,c=t.lon,h=6378137,f=.00669438,p=.9996,d=Ze(u),g=Ze(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);u>=56&&u<64&&c>=3&&c<12&&(l=32);u>=72&&u<84&&(c>=0&&c<9?l=31:c>=9&&c<21?l=33:c>=21&&c<33?l=35:c>=33&&c<42&&(l=37));s=Ze(6*(l-1)-180+3),e=f/(1-f),r=h/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),n=Math.tan(d)*Math.tan(d),i=e*Math.cos(d)*Math.cos(d),o=Math.cos(d)*(g-s),a=h*((1-f/4-3*f*f/64-5*f*f*f/256)*d-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*d)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d));var y=p*r*(o+(1-n+i)*o*o*o/6+(5-18*n+n*n+72*i-58*e)*o*o*o*o*o/120)+5e5,m=p*(a+r*Math.tan(d)*(o*o/2+(5-n+9*i+4*i*i)*o*o*o*o/24+(61-58*n+n*n+600*i-330*e)*o*o*o*o*o*o/720));u<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(y),zoneNumber:l,zoneLetter:$e(u)}}({lat:t[1],lon:t[0]}),e)}function He(t){var e=Je(tr(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ze(t){return t*(Math.PI/180)}function Ke(t){return t/Math.PI*180}function Je(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,u,c,h,f,p,d=.9996,g=6378137,y=.00669438,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),_=r-5e5,v=e;n<"N"&&(v-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,p=(f=v/d/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*f)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*f)+151*m*m*m/96*Math.sin(6*f),a=g/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=.99330562*g/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=_/(a*d);var b=p-a*Math.tan(p)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);b=Ke(b);var x,w=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(w=h+Ke(w),t.accuracy){var E=Je({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:E.lat,right:E.lon,bottom:b,left:w}}else x={lat:b,lon:w};return x}function $e(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Qe(t){var e=t%6;return 0===e&&(e=6),e}function tr(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var l=Qe(a),u=function(t,e){var r=Ge.charCodeAt(e-1),n=1e5,i=!1;for(;r!==t.charCodeAt(0);){if(++r===ze&&r++,r===Ve&&r++,r>Ye){if(i)throw"Bad character: "+t;r=Be,i=!0}n+=1e5}return n}(n.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=Ue.charCodeAt(e-1),n=0,i=!1;for(;r!==t.charCodeAt(0);){if(++r===ze&&r++,r===Ve&&r++,r>qe){if(i)throw"Bad character: "+t;r=Be,i=!0}n+=1e5}return n}(n.charAt(1),l);c<er(s);)c+=2e6;var h=r-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,y=0,m=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*f,d=t.substring(o+g),m=parseFloat(d)*f),{easting:y+u,northing:m+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function er(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function rr(t,e,r){if(!(this instanceof rr))return new rr(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}rr.fromMGRS=function(t){return new rr(He(t))},rr.prototype.toMGRS=function(t){return Xe([this.x,this.y],t)};var nr=rr,ir=r(92),or=.046875,ar=.01953125,sr=.01068115234375,lr=function(t){var e=[];e[0]=1-t*(.25+t*(or+t*(ar+t*sr))),e[1]=t*(.75-t*(or+t*(ar+t*sr)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e},ur=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},cr=function(t,e,r){for(var n=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(ur(i,a,Math.cos(i),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<Dt)return i}return i};var hr={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=lr(this.es),this.ml0=ur(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=de(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),p=Math.abs(l)>Dt?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var y=ur(o,s,l,this.en);r=this.a*(this.k0*u*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+s*a*u/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var m=l*Math.sin(a);if(Math.abs(Math.abs(m)-1)<Dt)return 93;if(r=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=l*Math.cos(a)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>Dt)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,r=cr(e,this.es,this.en),Math.abs(r)<Ft){var s=Math.sin(r),l=Math.cos(r),u=Math.abs(l)>Dt?Math.tan(r):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),f=Math.pow(u,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);n=r-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=de(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/l)}else n=Ft*pe(a),i=0;else{var y=Math.exp(o/this.k0),m=.5*(y-1/y),_=this.lat0+a/this.k0,v=Math.cos(_);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(m,2))),n=Math.asin(e),a<0&&(n=-n),i=0===m&&0===v?0:de(Math.atan2(m,v)+this.long0)}return t.x=i,t.y=n,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},fr=function(t){var e=Math.exp(t);return e=(e-1/e)/2},pr=function(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},dr=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(pr(1,e)+1))),t<0?-e:e},gr=function(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return e+r*Math.sin(2*e)},yr=function(t,e,r){for(var n,i,o=Math.sin(e),a=Math.cos(e),s=fr(r),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(r),u=2*a*l,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)n=d,i=p,f=u*(d=f)-n-c*(p=g)+t[h],g=c*d-i+u*p;return[(u=o*l)*f-(c=a*s)*g,u*g+c*f]};var mr={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=gr(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=de(t.x-this.long0),r=t.y;r=gr(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*i),e=Math.atan2(o*i,pr(n,i*a)),e=dr(Math.tan(e));var s,l,u=yr(this.gtu,2*r,2*e);return r+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=yr(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(fr(n));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(n),u=Math.cos(n);i=Math.atan2(a*u,pr(l,u*s)),n=Math.atan2(l,u*s),e=de(n+this.long0),r=gr(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var _r={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(de(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Gt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,mr.init.apply(this),this.forward=mr.forward,this.inverse=mr.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},vr=function(t,e){return Math.pow((1-t)/(1+t),e)};var br={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Bt)/(Math.pow(Math.tan(.5*this.lat0+Bt),this.C)*vr(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Bt),this.C)*vr(this.e*Math.sin(r),this.ratexp))-Ft,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+Bt)/this.K,1/this.C),i=20;i>0&&(r=2*Math.atan(n*vr(this.e*Math.sin(t.y),-.5*this.e))-Ft,!(Math.abs(r-t.y)<1e-14));--i)t.y=r;return i?(t.x=e,t.y=r,t):null},names:["gauss"]};var xr={init:function(){br.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=de(t.x-this.long0),br.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,br.inverse.apply(this,[t]),t.x=de(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var wr={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Dt&&(this.k0=.5*(1+pe(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Dt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Dt&&(this.k0=.5*this.cons*fe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ge(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=fe(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ft,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,i,o,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=de(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Dt&&Math.abs(l+this.lat0)<=Dt?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(r=2*Math.atan(this.ssfn_(l,u,this.e))-Ft,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=Dt?(o=ge(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Dt?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*n-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,r,n,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=Dt?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Dt?this.lat0>0?de(this.long0+Math.atan2(t.x,-1*t.y)):de(this.long0+Math.atan2(t.x,t.y)):de(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=Dt){if(a<=Dt)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*ye(this.e,n),e=this.con*de(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Dt?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=de(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*ye(this.e,Math.tan(.5*(Ft+o)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(Ft+t))*Math.pow((1-e)/(1+e),.5*r)}};var Er={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]};var Or={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),r=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n,i,o=ge(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-r*r));if(a*a<1&&(a=1),isNaN(this.longc)){var s=ge(this.e,this.lat1,Math.sin(this.lat1)),l=ge(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);i=.5*((n=this.el/u)-1/n);var h=(this.el*this.el-c*u)/(this.el*this.el+c*u),f=(c-u)/(c+u),p=de(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=de(this.long0);var d=de(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else n=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=n*Math.pow(o,this.bl),i=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=de(i-this.long0);if(Math.abs(Math.abs(o)-Ft)<=Dt)n=o>0?-1:1,r=this.al/this.bl*Math.log(Math.tan(Bt+n*this.gamma0*.5)),e=-1*n*Ft*this.al/this.bl;else{var s=ge(this.e,o,Math.sin(o)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),h=Math.sin(this.bl*a),f=(u*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;r=Math.abs(Math.abs(f)-1)<=Dt?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=Dt?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+r):(e-=this.uc,t.x=this.x0+r*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-r*Math.sin(this.alpha)),t},inverse:function(t){var e,r;this.no_rot?(r=t.y-this.y0,e=t.x-this.x0):(r=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*r/this.al),i=.5*(n-1/n),o=.5*(n+1/n),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<Dt?(t.x=this.long0,t.y=Ft):Math.abs(s+1)<Dt?(t.x=this.long0,t.y=-1*Ft):(t.y=ye(this.e,l),t.x=de(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var Sr={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Dt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=fe(this.e,e,r),i=ge(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=fe(this.e,o,a),l=ge(this.e,this.lat2,o),u=ge(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Dt?this.ns=Math.log(n/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=Dt&&(r=pe(r)*(Ft-2e-10));var n,i,o=Math.abs(Math.abs(r)-Ft);if(o>Dt)n=ge(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((o=r*this.ns)<=0)return null;i=0}var a=this.ns*de(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var l=0;if(0!==e&&(l=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=ye(this.e,n)))return null}else i=-Ft;return o=de(l/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Ir={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,o,a,s,l=t.x,u=t.y,c=de(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1}while(0===s&&u<15);return u>=15?null:t},names:["Krovak","krovak"]},Cr=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},Tr=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Pr=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Rr=function(t){return.05859375*t*t*(1+.75*t)},Lr=function(t){return t*t*t*(35/3072)},Mr=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)},Nr=function(t){return Math.abs(t)<Ft?t:t-pe(t)*Math.PI},Ar=function(t,e,r,n,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var kr={init:function(){this.sphere||(this.e0=Tr(this.es),this.e1=Pr(this.es),this.e2=Rr(this.es),this.e3=Lr(this.es),this.ml0=this.a*Cr(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=de(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Mr(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=n*Math.cos(i),c=u*u,h=this.es*a*a/(1-this.es);e=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),r=this.a*Cr(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Ar(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-Ft)<=Dt)return t.x=this.long0,t.y=Ft,i<0&&(t.y*=-1),t;var l=Mr(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=n*this.a/l,f=h*h;e=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),r=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return t.x=de(r+this.long0),t.y=Nr(e),t},names:["Cassini","Cassini_Soldner","cass"]},jr=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e};var Fr=.3333333333333333,Dr=.17222222222222222,Gr=.10257936507936508,Ur=.06388888888888888,Br=.0664021164021164,zr=.016415012942191543;var Vr={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Ft)<Dt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Dt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=jr(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*Fr,e=t*t,r[0]+=e*Dr,r[1]=e*Ur,e*=t,r[0]+=e*Gr,r[1]+=e*Br,r[2]=e*zr,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=jr(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,i,o,a,s,l,u,c,h=t.x,f=t.y;if(h=de(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=Dt)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(h),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.phi0)<Dt)return null;r=Bt-.5*f,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(h),r*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=jr(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=Ft+f,a=this.qp-a;break;case this.S_POLE:u=f-Ft,a=this.qp+a}if(Math.abs(u)<Dt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),r=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?u:-u)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,o,a,s,l,u,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if((r=.5*(p=Math.sqrt(h*h+f*f)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=Dt?0:Math.asin(f*g/p),h*=g,f=d*p;break;case this.OBLIQ:r=Math.abs(p)<=Dt?this.phi0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),h*=g*this.cosph0,f=(d-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:f=-f,r=Ft-r;break;case this.S_POLE:r-=Ft}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(a=Math.sqrt(h*h+f*f))<Dt)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),n=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+f*i*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*n-f*this.sinb1*i):(s=f*i/a,o=this.qp*s,f=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(h,f),l=Math.asin(s),u=this.apa,c=l+l,r=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return t.x=de(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},qr=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var Yr={init:function(){Math.abs(this.lat1+this.lat2)<Dt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=fe(this.e3,this.sin_po,this.cos_po),this.qs1=jr(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=fe(this.e3,this.sin_po,this.cos_po),this.qs2=jr(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=jr(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Dt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=jr(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*de(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=de(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,o,a=qr(.5*e);if(t<Dt)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(i=1-(n=t*(r=Math.sin(a)))*n)*i/Math.cos(a)*(e/(1-s)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}};var Wr={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,o,a,s,l=t.x,u=t.y;return n=de(l-this.long0),e=Math.sin(u),r=Math.cos(u),i=Math.cos(n),1,(o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=Dt?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),a=qr(n*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),o=de(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var Xr={init:function(){this.sphere||(this.k0=fe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,o=de(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=jr(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=de(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*Ft:Ft;for(var n,i,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=n=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=de(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var Hr={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=de(e-this.long0),i=Nr(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=de(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Nr(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Zr={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Tr(this.es),this.e1=Pr(this.es),this.e2=Rr(this.es),this.e3=Lr(this.es),this.ml0=this.a*Cr(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,o=t.y,a=de(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=Dt?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(Nr(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=Dt)e=this.a*a,r=-1*this.ml0;else{var s=Mr(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),r=this.a*Cr(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,o,a,s,l,u;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Dt)e=de(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=Dt){r=l;break}e=de(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=Dt)r=0,e=de(this.long0+n/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,l=a,o=20;o;--o)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),f=this.a*Cr(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*l)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=Dt){r=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=de(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var Kr={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,i=r-this.long0,o=n/jt*1e-5,a=i,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var u,c=l,h=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)u=p*c+f*h,f=f*c-p*h,p=u,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,i=t.y,o=n-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)r=u*a+l*s,l=l*a-u*s,u=r,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,y=a,m=s;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,y+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),m+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var _=this.B_re[1],v=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,_+=e*(this.B_re[e]*d-this.B_im[e]*g),v+=e*(this.B_im[e]*d+this.B_re[e]*g);var b=_*_+v*v;c=(y*_+m*v)/b,h=(m*_-y*v)/b}var x=c,w=h,E=1,O=0;for(e=1;e<=9;e++)E*=x,O+=this.D[e]*E;var S=this.lat0+O*jt*1e5,I=this.long0+w;return t.x=I,t.y=S,t},names:["New_Zealand_Map_Grid","nzmg"]};var Jr={init:function(){},forward:function(t){var e=t.x,r=t.y,n=de(e-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=de(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]};var $r={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=lr(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=de(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Dt)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);r=this.a*ur(i,l,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=qr((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=qr(Math.sin(e)/this.n)),n=de(n+this.long0),e=Nr(e)):(e=cr(t.y/this.a,this.es,this.en),(i=Math.abs(e))<Ft?(i=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=de(r)):i-Dt<Ft&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Qr={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=de(e-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Dt)break}i/=2,Math.PI/2-Math.abs(r)<Dt&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=de(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]};var tn={init:function(){Math.abs(this.lat1+this.lat2)<Dt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Tr(this.es),this.e1=Pr(this.es),this.e2=Rr(this.es),this.e3=Lr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=fe(this.e,this.sinphi,this.cosphi),this.ml1=Cr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Dt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=fe(this.e,this.sinphi,this.cosphi),this.ml2=Cr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Cr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=Cr(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*de(r-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=de(this.long0+o/this.ns),n=Nr(this.g-r/this.a),t.x=i,t.y=n,t;var a=this.g-r/this.a;return n=Ar(a,this.e0,this.e1,this.e2,this.e3),i=de(this.long0+o/this.ns),t.x=i,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var en={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,i=t.y,o=de(n-this.long0);Math.abs(i)<=Dt&&(e=this.x0+this.R*o,r=this.y0);var a=qr(2*Math.abs(i/Math.PI));(Math.abs(o)<=Dt||Math.abs(Math.abs(i)-Ft)<=Dt)&&(e=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),h=c/(u+c-1),f=h*h,p=h*(2/u-1),d=p*p,g=Math.PI*this.R*(s*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(f-d)))/(d+l);o<0&&(g=-g),e=this.x0+g;var y=l+h;return g=Math.PI*this.R*(p*y-s*Math.sqrt((d+l)*(l+1)-y*y))/(d+l),r=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i,o,a,s,l,u,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(i=t.y/h)*i,h=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,r=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(n)<Dt?this.long0:de(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var rn={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v,b,x,w,E=t.x,O=t.y,S=Math.sin(t.y),I=Math.cos(t.y),C=de(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Dt?(t.x=this.x0+this.a*(Ft-O)*Math.sin(C),t.y=this.y0-this.a*(Ft-O)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=Dt?(t.x=this.x0+this.a*(Ft+O)*Math.sin(C),t.y=this.y0+this.a*(Ft+O)*Math.cos(C),t):(_=this.sin_p12*S+this.cos_p12*I*Math.cos(C),m=(y=Math.acos(_))/Math.sin(y),t.x=this.x0+this.a*m*I*Math.sin(C),t.y=this.y0+this.a*m*(this.cos_p12*S-this.sin_p12*I*Math.cos(C)),t):(e=Tr(this.es),r=Pr(this.es),n=Rr(this.es),i=Lr(this.es),Math.abs(this.sin_p12-1)<=Dt?(o=this.a*Cr(e,r,n,i,Ft),a=this.a*Cr(e,r,n,i,O),t.x=this.x0+(o-a)*Math.sin(C),t.y=this.y0-(o-a)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=Dt?(o=this.a*Cr(e,r,n,i,Ft),a=this.a*Cr(e,r,n,i,O),t.x=this.x0+(o+a)*Math.sin(C),t.y=this.y0+(o+a)*Math.cos(C),t):(s=S/I,l=Mr(this.a,this.e,this.sin_p12),u=Mr(this.a,this.e,S),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*I)),v=0===(h=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Dt?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(C)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=l*v*(1-(b=v*v)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(x=b*v)/8*(d=f*p)*(1-2*g)+(w=x*v)/120*(g*(4-7*g)-3*f*f*(1-7*g))-w*v/48*d),t.x=this.x0+y*Math.sin(h),t.y=this.y0+y*Math.cos(h),t))},inverse:function(t){var e,r,n,i,o,a,s,l,u,c,h,f,p,d,g,y,m,_,v,b,x,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Ft*this.a)return;return r=e/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(e)<=Dt?a=this.lat0:(a=qr(i*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-Ft,o=Math.abs(s)<=Dt?this.lat0>=0?de(this.long0+Math.atan2(t.x,-t.y)):de(this.long0-Math.atan2(-t.x,t.y)):de(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=o,t.y=a,t}return l=Tr(this.es),u=Pr(this.es),c=Rr(this.es),h=Lr(this.es),Math.abs(this.sin_p12-1)<=Dt?(f=this.a*Cr(l,u,c,h,Ft),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Ar((f-e)/this.a,l,u,c,h),o=de(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Dt?(f=this.a*Cr(l,u,c,h,Ft),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Ar((e-f)/this.a,l,u,c,h),o=de(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=Mr(this.a,this.e,this.sin_p12),y=Math.cos(g),_=-(m=this.e*this.cos_p12*y)*m/(1-this.es),v=3*this.es*(1-_)*this.sin_p12*this.cos_p12*y/(1-this.es),w=1-_*(x=(b=e/p)-_*(1+_)*Math.pow(b,3)/6-v*(1+3*_)*Math.pow(b,4)/24)*x/2-b*x*x*x/6,d=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*y),o=de(this.long0+Math.asin(Math.sin(g)*Math.sin(x)/Math.cos(d))),a=Math.atan((1-this.es*w*this.sin_p12/Math.sin(d))*Math.tan(d)/(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var nn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,l=t.x,u=t.y;return n=de(l-this.long0),e=Math.sin(u),r=Math.cos(u),i=Math.cos(n),1,((o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=Dt)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=qr(e/this.a),n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(e)<=Dt?(s=this.lat0,t.x=a,t.y=s,t):(s=qr(i*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-Ft,Math.abs(o)<=Dt?(a=this.lat0>=0?de(this.long0+Math.atan2(t.x,-t.y)):de(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=de(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},on=1,an=2,sn=3,ln=4,un=5,cn=6,hn=1,fn=2,pn=3,dn=4;function gn(t,e,r,n){var i;return t<Dt?(n.value=hn,i=0):(i=Math.atan2(e,r),Math.abs(i)<=Bt?n.value=hn:i>Bt&&i<=Ft+Bt?(n.value=fn,i-=Ft):i>Ft+Bt||i<=-(Ft+Bt)?(n.value=pn,i=i>=0?i-Vt:i+Vt):(n.value=dn,i+=Ft)),i}function yn(t,e){var r=t+e;return r<-Vt?r+=zt:r>+Vt&&(r-=zt),r}var mn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ft-Bt/2?this.face=un:this.lat0<=-(Ft-Bt/2)?this.face=cn:Math.abs(this.long0)<=Bt?this.face=on:Math.abs(this.long0)<=Ft+Bt?this.face=this.long0>0?an:ln:this.face=sn,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,i,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===un)i=Ft-e,r>=Bt&&r<=Ft+Bt?(l.value=hn,n=r-Ft):r>Ft+Bt||r<=-(Ft+Bt)?(l.value=fn,n=r>0?r-Vt:r+Vt):r>-(Ft+Bt)&&r<=-Bt?(l.value=pn,n=r+Ft):(l.value=dn,n=r);else if(this.face===cn)i=Ft+e,r>=Bt&&r<=Ft+Bt?(l.value=hn,n=-r+Ft):r<Bt&&r>=-Bt?(l.value=fn,n=-r):r<-Bt&&r>=-(Ft+Bt)?(l.value=pn,n=-r-Ft):(l.value=dn,n=r>0?-r+Vt:-r-Vt);else{var u,c,h,f,p,d;this.face===an?r=yn(r,+Ft):this.face===sn?r=yn(r,+Vt):this.face===ln&&(r=yn(r,-Ft)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(r),u=p*Math.cos(r),c=p*d,h=f,this.face===on?n=gn(i=Math.acos(u),h,c,l):this.face===an?n=gn(i=Math.acos(c),h,-u,l):this.face===sn?n=gn(i=Math.acos(-u),h,-c,l):this.face===ln?n=gn(i=Math.acos(-c),h,u,l):(i=n=0,l.value=hn)}return a=Math.atan(12/Vt*(n+Math.acos(Math.sin(n)*Math.cos(Bt))-Ft)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===fn?a+=Ft:l.value===pn?a+=Vt:l.value===dn&&(a+=1.5*Vt),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,i,o,a,s,l,u,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=hn:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=fn,e-=Ft):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=pn,e=e<0?e+Vt:e-Vt):(d.value=dn,e+=Ft),u=Vt/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===un)l=Math.acos(s),p.phi=Ft-l,d.value===hn?p.lam=a+Ft:d.value===fn?p.lam=a<0?a+Vt:a-Vt:d.value===pn?p.lam=a-Ft:p.lam=a;else if(this.face===cn)l=Math.acos(s),p.phi=l-Ft,d.value===hn?p.lam=-a+Ft:d.value===fn?p.lam=-a:d.value===pn?p.lam=-a-Ft:p.lam=a<0?-a-Vt:-a+Vt;else{var g,y,m;u=(g=s)*g,y=(u+=(m=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*m)>=1?0:Math.sqrt(1-u),d.value===fn?(u=y,y=-m,m=u):d.value===pn?(y=-y,m=-m):d.value===dn&&(u=y,y=m,m=-u),this.face===an?(u=g,g=-y,y=u):this.face===sn?(g=-g,y=-y):this.face===ln&&(u=g,g=y,y=-u),p.phi=Math.acos(-m)-Ft,p.lam=Math.atan2(y,g),this.face===an?p.lam=yn(p.lam,-Ft):this.face===sn?p.lam=yn(p.lam,-Vt):this.face===ln&&(p.lam=yn(p.lam,+Ft))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},_n=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],vn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],bn=.8487,xn=1.3523,wn=Ut/5,En=18,On=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Sn,In={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=de(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*wn);n<0?n=0:n>=En&&(n=17);var i={x:On(_n[n],r=Ut*(r-.08726646259971647*n))*e,y:On(vn[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*bn+this.x0,i.y=i.y*this.a*xn+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*bn),y:Math.abs(t.y-this.y0)/(this.a*xn)};if(e.y>=1)e.x/=_n[18][0],e.y=t.y<0?-Ft:Ft;else{var r=Math.floor(e.y*En);for(r<0?r=0:r>=En&&(r=17);;)if(vn[r][0]>e.y)--r;else{if(!(vn[r+1][0]<=e.y))break;++r}var n=vn[r],i=5*(e.y-n[0])/(vn[r+1][0]-n[0]);i=function(t,e,r,n){for(var i=e;n;--n){var o=t(i);if(i-=o,Math.abs(o)<r)break}return i}((function(t){return(On(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),i,Dt,100),e.x/=On(_n[r],i),e.y=(5*r+i)*Gt,t.y<0&&(e.y=-e.y)}return e.x=de(e.x+this.long0),e},names:["Robinson","robin"]};De.defaultDatum="WGS84",De.Proj=Te,De.WGS84=new De.Proj("WGS84"),De.Point=nr,De.toPoint=Me,De.defs=se,De.transform=Ae,De.mgrs=We,De.version=ir.a,(Sn=De).Proj.projections.add(hr),Sn.Proj.projections.add(mr),Sn.Proj.projections.add(_r),Sn.Proj.projections.add(xr),Sn.Proj.projections.add(wr),Sn.Proj.projections.add(Er),Sn.Proj.projections.add(Or),Sn.Proj.projections.add(Sr),Sn.Proj.projections.add(Ir),Sn.Proj.projections.add(kr),Sn.Proj.projections.add(Vr),Sn.Proj.projections.add(Yr),Sn.Proj.projections.add(Wr),Sn.Proj.projections.add(Xr),Sn.Proj.projections.add(Hr),Sn.Proj.projections.add(Zr),Sn.Proj.projections.add(Kr),Sn.Proj.projections.add(Jr),Sn.Proj.projections.add($r),Sn.Proj.projections.add(Qr),Sn.Proj.projections.add(tn),Sn.Proj.projections.add(en),Sn.Proj.projections.add(rn),Sn.Proj.projections.add(nn),Sn.Proj.projections.add(mn),Sn.Proj.projections.add(In);var Cn=De,Tn=r(40),Pn=r(18),Rn=r(52);function Ln(t){var e,r,n=Object.keys(t.defs),i=n.length;for(e=0;e<i;++e){var o=n[e];if(!Object(u.o)(o)){var a=t.defs(o),s=a.units;s||"longlat"!==a.projName||(s=Pn.b.DEGREES),Object(u.e)(new Tn.a({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:s}))}}for(e=0;e<i;++e){var l=n[e],c=Object(u.o)(l);for(r=0;r<i;++r){var h=n[r],f=Object(u.o)(h);if(!Object(Rn.c)(l,h))if(t.defs[l]===t.defs[h])Object(u.d)([c,f]);else{var p=t(l,h);Object(u.c)(c,f,Object(u.h)(c,f,p.forward),Object(u.h)(f,c,p.inverse))}}}}var Mn=[{def:"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-729785.83,3715125.82,940929.67,9518470.69],codes:["EPSG:25830","EPSG:3042","urn:ogc:def:crs:EPSG::25830","urn:ogc:def:crs:EPSG::3042","http://www.opengis.net/gml/srs/epsg.xml#25830","http://www.opengis.net/gml/srs/epsg.xml#3042"],units:"m",metersPerUnit:1},{def:"+proj=utm +zone=30 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-99844.71,3879626.63,1682737.72,8251830.8],codes:["EPSG:23030","urn:ogc:def:crs:EPSG::23030","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-16.1,32.88,39.65,84.17],codes:["EPSG:4258","urn:ogc:def:crs:EPSG::4258","http://www.opengis.net/gml/srs/epsg.xml#4258"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-164850.78,3660417.01,988728.57,9567111.85],codes:["EPSG:25829","urn:ogc:def:crs:EPSG::25829","http://www.opengis.net/gml/srs/epsg.xml#25829"],units:"m"},{def:"+proj=utm +zone=29 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[448933.91,3860083.93,1860436.11,8381369.16],codes:["EPSG:23029","urn:ogc:def:crs:EPSG::23029","http://www.opengis.net/gml/srs/epsg.xml#23029"],units:"m"},{def:"+proj=longlat +ellps=intl +no_defs",extent:[-16.09882145355955,25.711114310330917,48.60999527749605,84.16977336415472],codes:["EPSG:4230","urn:ogc:def:crs:EPSG::4230","http://www.opengis.net/gml/srs/epsg.xml#4230"],units:"d",metersPerUnit:111319.49079327358},{def:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.44317933178,0,833978.5568206678,9329005.18301614],codes:["EPSG:32628","urn:ogc:def:crs:EPSG::32628","http://www.opengis.net/gml/srs/epsg.xml#32628"],units:"m"},{def:"+proj=longlat +datum=WGS84 +no_defs",extent:[-180,-90,180,90],codes:["EPSG:4326","urn:ogc:def:crs:EPSG::4326","urn:ogc:def:crs:OGC:1.3:CRS84","http://www.opengis.net/def/crs/OGC/1.3/CRS84"],units:"d",metersPerUnit:111319.49079327358,axisOrientation:"neu"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[397101.09,3638520.14,1034670.43,9625438.82],codes:["EPSG:25828","urn:ogc:def:crs:EPSG::25828","http://www.opengis.net/gml/srs/epsg.xml#25828"],units:"m"},{def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-1300111.74,3804640.43,893164.13,9478718.31],codes:["EPSG:25831","urn:ogc:def:crs:EPSG::25831","http://www.opengis.net/gml/srs/epsg.xml#25831"],units:"m"},{def:"+proj=utm +zone=28 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[997517.95,3873475.61,2024693.05,8529441.99],codes:["EPSG:23028","urn:ogc:def:crs:EPSG::23028","http://www.opengis.net/gml/srs/epsg.xml#23028"],units:"m"},{def:"+proj=utm +zone=31 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-650883.16,3932764.97,1493695.91,8141744.84],codes:["EPSG:23031","urn:ogc:def:crs:EPSG::23031","http://www.opengis.net/gml/srs/epsg.xml#23031"],units:"m"},{def:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],worldExtent:[-180,-85,180,85],codes:["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913","urn:ogc:def:crs:EPSG:6.18:3:3857","urn:ogc:def:crs:EPSG::3857","http://www.opengis.net/gml/srs/epsg.xml#3857"],units:"m",metersPerUnit:1,global:!0},{def:"+proj=longlat +datum=WGS84 +no_defs",extent:[-180,-90,180,90],codes:["CRS:84"],units:"d",metersPerUnit:111319.49079327358,axisOrientation:"enu"}],Nn=function(t){var e=t;Array.isArray(e)||(e=[e]),e.forEach((function(t){t.codes.forEach((function(e){Cn.defs(e,t.def)}));var e=t.codes.map((function(e){return new Tn.a({code:e,extent:t.extent,worldExtent:t.worldExtent,units:t.units,metersPerUnit:t.metersPerUnit,axisOrientation:t.axisOrientation,global:t.global})}));Object(u.d)(e),-1===Mn.indexOf(t)&&Mn.push(t)}))},An=function(){return Mn};Nn(Mn),An(),Ln(Cn);var kn={addProjections:Nn,getSupportedProjs:An},jn=r(95),Fn=r(54),Dn=r(17),Gn=r(3),Un=r(10),Bn=r(23),zn=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=Vn(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var i=Vn(t,e,r);this.cache_[i]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Vn(t,e,r){return e+":"+t+":"+(r?Object(Bn.b)(r):"null")}var qn=new zn,Yn=r(38),Wn=r(13),Xn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Hn(t,e){qn.expire()}var Zn=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r}return Xn(e,t),e.prototype.dispatchRenderEvent=function(t,e){Object(Gn.b)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Object(Un.b)(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(Un.e)(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o,a,s){var l,u=e.viewState;function c(t,e,r,n){return i.call(o,e,t?r:null,n)}var h=u.projection,f=Object(Wn.p)(t.slice(),h),p=[[0,0]];if(h.canWrapX()&&n){var d=h.getExtent(),g=Object(mt.F)(d);p.push([-g,0],[g,0])}for(var y=e.layerStatesArray,m=y.length,_=[],v=[],b=0;b<p.length;b++)for(var x=m-1;x>=0;--x){var w=y[x],E=w.layer;if(E.hasRenderer()&&Object(Yn.b)(w,u)&&a.call(s,E)){var O=E.getRenderer(),S=E.getSource();if(O&&S){var I=S.getWrapX()?f:t,C=c.bind(null,w.managed);v[0]=I[0]+p[b][0],v[1]=I[1]+p[b][1],l=O.forEachFeatureAtCoordinate(v,e,r,C,_)}if(l)return l}}if(0!==_.length){var T=1/_.length;return _.forEach((function(t,e){return t.distanceSq+=e*T})),_.sort((function(t,e){return t.distanceSq-e.distanceSq})),_.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){return Object(Gn.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,Dn.b,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){Object(Gn.b)()},e.prototype.scheduleExpireIconCache=function(t){qn.canExpireCache()&&t.postRenderFunctions.push(Hn)},e}(Fn.a),Kn=r(47),Jn=r(59),$n=r(33),Qn=r(19),ti=r(20),ei=r(30),ri=r(42),ni=r(27),ii=r(5),oi=r(15),ai="10px sans-serif",si="#000",li="round",ui=[],ci="round",hi="#000",fi="center",pi="middle",di=[0,0,0,0],gi=new ei.a,yi=new ri.a;yi.setSize=function(){console.warn("labelCache is deprecated.")};var mi,_i,vi=null,bi={},xi=function(){var t,e,r="32px ",n=["monospace","serif"],i=n.length,o="wmytzilWMYTZIL@#/&?$%10";function a(t,a,s){for(var l=!0,u=0;u<i;++u){var c=n[u];if(e=Oi(t+" "+a+" "+r+c,o),s!=c){var h=Oi(t+" "+a+" "+r+s+","+c,o);l=l&&h!=e}}return!!l}function s(){for(var e=!0,r=gi.getKeys(),n=0,i=r.length;n<i;++n){var o=r[n];gi.get(o)<100&&(a.apply(this,o.split("\n"))?(Object(ii.b)(bi),vi=null,mi=void 0,gi.set(o,100)):(gi.set(o,gi.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var r=Object(ti.h)(e);if(r)for(var n=r.families,i=0,o=n.length;i<o;++i){var l=n[i],u=r.style+"\n"+r.weight+"\n"+l;void 0===gi.get(u)&&(gi.set(u,100,!0),a(r.style,r.weight,l)||(gi.set(u,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),wi=function(t){var e=bi[t];if(null==e){if(ni.h){var r=Object(ti.h)(t),n=Ei(t,"Žg");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else _i||((_i=document.createElement("div")).innerHTML="M",_i.style.minHeight="0",_i.style.maxHeight="none",_i.style.height="auto",_i.style.padding="0",_i.style.border="none",_i.style.position="absolute",_i.style.display="block",_i.style.left="-99999px"),_i.style.font=t,document.body.appendChild(_i),e=_i.offsetHeight,document.body.removeChild(_i);bi[t]=e}return e};function Ei(t,e){return vi||(vi=Object(oi.a)(1,1)),t!=mi&&(vi.font=t,mi=vi.font),vi.measureText(e)}function Oi(t,e){return Ei(t,e).width}function Si(t,e,r){if(e in r)return r[e];var n=Oi(t,e);return r[e]=n,n}function Ii(t,e,r,n,i,o,a,s,l,u,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(n,i,o,a,s,0,0,a,s)):t.drawImage(n,i,o,a,s,l,u,a*c[0],s*c[1]),t.restore()}var Ci=r(8),Ti=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pi=function(t){function e(e){var r=t.call(this,e)||this;r.fontChangeListenerKey_=Object(Ci.a)(gi,Kn.a.PROPERTYCHANGE,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=ti.e+" ol-layers";var i=e.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return Ti(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new Jn.a(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){Object(Ci.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent($n.a.PRECOMPOSE,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),r=t.viewState;this.children_.length=0;for(var n=[],i=null,o=0,a=e.length;o<a;++o){var s=e[o];t.layerIndex=o;var l=s.layer,u=l.getSourceState();if(!Object(Yn.b)(s,r)||u!=Qn.a.READY&&u!=Qn.a.UNDEFINED)l.unrender();else{var c=l.render(t,i);c&&(c!==i&&(this.children_.push(c),i=c),"getDeclutter"in l&&n.push(l))}}for(o=n.length-1;o>=0;--o)n[o].renderDeclutter(t);Object(oi.f)(this.element_,this.children_),this.dispatchRenderEvent($n.a.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],u=l.layer;if(u.hasRenderer()&&Object(Yn.b)(l,o)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,r);if(c){var h=n(u,c);if(h)return h}}}},e}(Zn),Ri=r(68),Li="add",Mi="remove",Ni=r(21),Ai=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki="length",ji=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return Ai(e,t),e}(Ni.a),Fi=function(t){function e(e,r){var n=t.call(this)||this;n.on,n.once,n.un;var i=r||{};if(n.unique_=!!i.unique,n.array_=e||[],n.unique_)for(var o=0,a=n.array_.length;o<a;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return Ai(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(ki)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new ji(Li,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ji(Mi,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new ji(Mi,n,t)),this.dispatchEvent(new ji(Li,e,t))}else{for(var i=r;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(ki,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Ri.a(58)},e}(ei.a),Di=r(7),Gi=r(75),Ui=r(11),Bi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zi=function(t){function e(e,r){var n=t.call(this,e)||this;return n.layer=r,n}return Bi(e,t),e}(Ni.a),Vi="layers",qi=function(t){function e(e){var r=this,n=e||{},i=Object(ii.a)({},n);delete i.layers;var o=n.layers;return(r=t.call(this,i)||this).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(Vi,r.handleLayersChanged_),o?Array.isArray(o)?o=new Fi(o.slice(),{unique:!0}):Object(Ui.a)("function"==typeof o.getArray,43):o=new Fi(void 0,{unique:!0}),r.setLayers(o),r}return Bi(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Ci.c),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(Ci.a)(t,Li,this.handleLayersAdd_,this),Object(Ci.a)(t,Mi,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(Ci.c);Object(ii.b)(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var o=r[n];this.registerLayerListeners_(o),this.dispatchEvent(new zi("addlayer",o))}this.changed()},e.prototype.registerLayerListeners_=function(t){var r=[Object(Ci.a)(t,Kn.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(Ci.a)(t,Di.a.CHANGE,this.handleLayerChange_,this)];t instanceof e&&r.push(Object(Ci.a)(t,"addlayer",this.handleLayerGroupAdd_,this),Object(Ci.a)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Object(Gn.c)(t)]=r},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new zi("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new zi("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new zi("addlayer",e)),this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,r=Object(Gn.c)(e);this.listenerKeys_[r].forEach(Ci.c),delete this.listenerKeys_[r],this.dispatchEvent(new zi("removelayer",e)),this.changed()},e.prototype.getLayers=function(){return this.get(Vi)},e.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var r=e.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new zi("removelayer",r[n]));this.set(Vi,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var n=this.getLayerState(),i=n.zIndex;t||void 0!==n.zIndex||(i=0);for(var o=r,a=e.length;o<a;o++){var s=e[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=Object(mt.B)(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return e},e.prototype.getSourceState=function(){return Qn.a.READY},e}(Gi.a),Yi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wi=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.map=r,i.frameState=void 0!==n?n:null,i}return Yi(e,t),e}(Ni.a),Xi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hi=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return Xi(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Wi),Zi={SINGLECLICK:"singleclick",CLICK:Di.a.CLICK,DBLCLICK:Di.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ki="pointermove",Ji="pointerdown",$i="pointerup",Qi="pointerout",to=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eo=function(t){function e(e,r){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=void 0===r?1:r,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=Object(Ci.a)(i,Ji,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=Object(Ci.a)(i,Ki,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(Di.a.TOUCHMOVE,n.boundHandleTouchMove_,!!ni.e&&{passive:!1}),n}return to(e,t),e.prototype.emulateClick_=function(t){var e=new Hi(Zi.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Hi(Zi.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Hi(Zi.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Zi.POINTERUP||e.type==Zi.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Zi.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Hi(Zi.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(Ci.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new Hi(Zi.POINTERDOWN,this.map_,t);for(var r in this.dispatchEvent(e),this.down_={},t){var n=t[r];this.down_[r]="function"==typeof n?Dn.c:n}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(Ci.a)(i,Zi.POINTERMOVE,this.handlePointerMove_,this),Object(Ci.a)(i,Zi.POINTERUP,this.handlePointerUp_,this),Object(Ci.a)(this.element_,Zi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Object(Ci.a)(this.element_.getRootNode(),Zi.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Hi(Zi.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Hi(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(Ci.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Di.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(Ci.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ci.c),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(ri.a),ro="postrender",no="movestart",io="moveend",oo="loadstart",ao="loadend",so="layergroup",lo="size",uo="target",co="view",ho=r(81),fo=r(2),po=r(24),go={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},yo=r(50),mo=r(4);function _o(t,e,r){return function(n,i,o,a,s){if(n){if(!i&&!e)return n;var l=e?0:o[0]*i,u=e?0:o[1]*i,c=s?s[0]:0,h=s?s[1]:0,f=t[0]+l/2+c,p=t[2]-l/2+c,d=t[1]+u/2+h,g=t[3]-u/2+h;f>p&&(p=f=(p+f)/2),d>g&&(g=d=(g+d)/2);var y=Object(mo.b)(n[0],f,p),m=Object(mo.b)(n[1],d,g);if(a&&r&&i){var _=30*i;y+=-_*Math.log(1+Math.max(0,f-n[0])/_)+_*Math.log(1+Math.max(0,n[0]-p)/_),m+=-_*Math.log(1+Math.max(0,d-n[1])/_)+_*Math.log(1+Math.max(0,n[1]-g)/_)}return[y,m]}}}function vo(t){return t}function bo(t,e,r,n){var i=Object(mt.F)(e)/r[0],o=Object(mt.A)(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function xo(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),Object(mo.b)(n,r/2,2*e)}function wo(t,e,r,n,i){return function(o,a,s,l){if(void 0!==o){var u=n?bo(t,n,s,i):t;return(void 0===r||r)&&l?xo(o,u,e):Object(mo.b)(o,e,u)}}}function Eo(t){return void 0!==t?0:void 0}function Oo(t){return void 0!==t?t:void 0}var So=r(28),Io="XY",Co="XYZ",To="XYM",Po="XYZM";function Ro(t,e,r,n,i,o){for(var a=o||[],s=0,l=e;l<r;l+=n){var u=t[l],c=t[l+1];a[s++]=i[0]*u+i[2]*c+i[4],a[s++]=i[1]*u+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function Lo(t,e,r,n,i,o,a){for(var s=a||[],l=Math.cos(i),u=Math.sin(i),c=o[0],h=o[1],f=0,p=e;p<r;p+=n){var d=t[p]-c,g=t[p+1]-h;s[f++]=c+d*l-g*u,s[f++]=h+d*u+g*l;for(var y=p+2;y<p+n;++y)s[f++]=t[y]}return a&&s.length!=f&&(s.length=f),s}function Mo(t,e,r,n,i,o,a){for(var s=a||[],l=0,u=e;u<r;u+=n){s[l++]=t[u]+i,s[l++]=t[u+1]+o;for(var c=u+2;c<u+n;++c)s[l++]=t[c]}return a&&s.length!=l&&(s.length=l),s}var No=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ao=Object(Un.d)(),ko=function(t){function e(){var e=t.call(this)||this;return e.extent_=Object(mt.k)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=Object(Dn.d)((function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)})),e}return No(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return Object(Gn.b)()},e.prototype.closestPointXY=function(t,e,r,n){return Object(Gn.b)()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(Gn.b)()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Object(mt.m)(e),this.extentRevision_=this.getRevision()}return Object(mt.J)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(Gn.b)()},e.prototype.scale=function(t,e,r){Object(Gn.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(Gn.b)()},e.prototype.getType=function(){return Object(Gn.b)()},e.prototype.applyTransform=function(t){Object(Gn.b)()},e.prototype.intersectsExtent=function(t){return Object(Gn.b)()},e.prototype.translate=function(t,e){Object(Gn.b)()},e.prototype.transform=function(t,e){var r=Object(u.o)(t),n=r.getUnits()==Pn.b.TILE_PIXELS?function(t,n,i){var o=r.getExtent(),a=r.getWorldExtent(),s=Object(mt.A)(a)/Object(mt.A)(o);return Object(Un.b)(Ao,a[0],a[3],s,-s,0,0,0),Ro(t,0,t.length,i,Ao,n),Object(u.q)(r,e)(t,n,i)}:Object(u.q)(r,e);return this.applyTransform(n),this},e}(ei.a),jo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Fo(t){var e;return t==Io?e=2:t==Co||t==To?e=3:t==Po&&(e=4),e}var Do=function(t){function e(){var e=t.call(this)||this;return e.layout=Io,e.stride=2,e.flatCoordinates=null,e}return jo(e,t),e.prototype.computeExtent=function(t){return Object(mt.o)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(Gn.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Fo(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(Gn.b)()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=Fo(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=Io,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Io:3==t?e=Co:4==t&&(e=Po);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Lo(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var i=r;i||(i=Object(mt.x)(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,r,n,i,o,a,s){for(var l=s||[],u=a[0],c=a[1],h=0,f=e;f<r;f+=n){var p=t[f]-u,d=t[f+1]-c;l[h++]=u+i*p,l[h++]=c+o*d;for(var g=f+2;g<f+n;++g)l[h++]=t[g]}s&&l.length!=h&&(l.length=h)}(o,0,o.length,a,t,n,i,o),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Mo(r,0,r.length,n,t,e,r),this.changed()}},e}(ko);function Go(t,e,r,n,i,o,a){var s,l=t[e],u=t[e+1],c=t[r]-l,h=t[r+1]-u;if(0===c&&0===h)s=e;else{var f=((i-l)*c+(o-u)*h)/(c*c+h*h);if(f>1)s=r;else{if(f>0){for(var p=0;p<n;++p)a[p]=Object(mo.e)(t[e+p],t[r+p],f);return void(a.length=n)}s=e}}for(p=0;p<n;++p)a[p]=t[s+p];a.length=n}function Uo(t,e,r,n,i){var o=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],l=t[e+1],u=Object(mo.j)(o,a,s,l);u>i&&(i=u),o=s,a=l}return i}function Bo(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Uo(t,e,s,n,i),e=s}return i}function zo(t,e,r,n,i,o,a,s,l,u,c){if(e==r)return u;var h,f;if(0===i){if((f=Object(mo.j)(a,s,t[e],t[e+1]))<u){for(h=0;h<n;++h)l[h]=t[e+h];return l.length=n,f}return u}for(var p=c||[NaN,NaN],d=e+n;d<r;)if(Go(t,d-n,d,n,a,s,p),(f=Object(mo.j)(a,s,p[0],p[1]))<u){for(u=f,h=0;h<n;++h)l[h]=p[h];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(u))/i|0,1);if(o&&(Go(t,r-n,e,n,a,s,p),(f=Object(mo.j)(a,s,p[0],p[1]))<u)){for(u=f,h=0;h<n;++h)l[h]=p[h];l.length=n}return u}function Vo(t,e,r,n,i,o,a,s,l,u,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];u=zo(t,e,d,n,i,o,a,s,l,u,h),e=d}return u}function qo(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function Yo(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function Wo(t,e,r,n,i){for(var o=i||[],a=0,s=0,l=r.length;s<l;++s){var u=Yo(t,e,r[s],n);o[a++]=u,e=u}return o.length=a,o}function Xo(t,e,r,n,i,o,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var l=new Array(s);l[0]=1,l[s-1]=1;for(var u=[e,r-n],c=0;u.length>0;){for(var h=u.pop(),f=u.pop(),p=0,d=t[f],g=t[f+1],y=t[h],m=t[h+1],_=f+n;_<h;_+=n){var v=t[_],b=t[_+1],x=Object(mo.k)(v,b,d,g,y,m);x>p&&(c=_,p=x)}p>i&&(l[(c-e)/n]=1,f+n<c&&u.push(f,c),c+n<h&&u.push(c,h))}for(_=0;_<s;++_)l[_]&&(o[a++]=t[e+_*n],o[a++]=t[e+_*n+1]);return a}function Ho(t,e,r,n,i,o,a,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];a=Xo(t,e,c,n,i,o,a),s.push(a),e=c}return a}function Zo(t,e){return e*Math.round(t/e)}function Ko(t,e,r,n,i,o,a){if(e==r)return a;var s,l,u=Zo(t[e],i),c=Zo(t[e+1],i);e+=n,o[a++]=u,o[a++]=c;do{if(s=Zo(t[e],i),l=Zo(t[e+1],i),(e+=n)==r)return o[a++]=s,o[a++]=l,a}while(s==u&&l==c);for(;e<r;){var h=Zo(t[e],i),f=Zo(t[e+1],i);if(e+=n,h!=s||f!=l){var p=s-u,d=l-c,g=h-u,y=f-c;p*y==d*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=h,l=f):(o[a++]=s,o[a++]=l,u=s,c=l,s=h,l=f)}}return o[a++]=s,o[a++]=l,a}function Jo(t,e,r,n,i,o,a,s){for(var l=0,u=r.length;l<u;++l){var c=r[l];a=Ko(t,e,c,n,i,o,a),s.push(a),e=c}return a}function $o(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=e;s<r;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function Qo(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,l=r.length;s<l;++s){var u=r[s];o[a++]=$o(t,e,u,n,o[a]),e=u}return o.length=a,o}function ta(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,l=r.length;s<l;++s){var u=r[s];o[a++]=Qo(t,e,u,n,o[a]),e=u[u.length-1]}return o.length=a,o}function ea(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],l=t[e+1];i+=a*s-o*l,o=s,a=l}return i/2}function ra(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=ea(t,e,s,n),e=s}return i}var na=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ia=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return na(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Object(mt.f)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Uo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return ea(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return $o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Io)},e.prototype.getType=function(){return fo.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Do),oa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aa=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return oa(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=Object(mo.j)(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)r[s]=i[s];return r.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(mt.n)(this.flatCoordinates,t)},e.prototype.getType=function(){return fo.a.POINT},e.prototype.intersectsExtent=function(t){return Object(mt.i)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Do);function sa(t,e,r,n,i){return!Object(mt.t)(i,(function(i){return!la(t,e,r,n,i[0],i[1])}))}function la(t,e,r,n,i,o){for(var a=0,s=t[r-n],l=t[r-n+1];e<r;e+=n){var u=t[e],c=t[e+1];l<=o?c>o&&(u-s)*(o-l)-(i-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(i-s)*(c-l)<0&&a--,s=u,l=c}return 0!==a}function ua(t,e,r,n,i,o){if(0===r.length)return!1;if(!la(t,e,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(la(t,r[a-1],r[a],n,i,o))return!1;return!0}function ca(t,e,r,n,i,o,a){for(var s,l,u,c,f,p,d,g=i[o+1],y=[],m=0,_=r.length;m<_;++m){var v=r[m];for(c=t[v-n],p=t[v-n+1],s=e;s<v;s+=n)f=t[s],d=t[s+1],(g<=p&&d<=g||p<=g&&g<=d)&&(u=(g-p)/(d-p)*(f-c)+c,y.push(u)),c=f,p=d}var b=NaN,x=-1/0;for(y.sort(h.i),c=y[0],s=1,l=y.length;s<l;++s){f=y[s];var w=Math.abs(f-c);w>x&&ua(t,e,r,n,u=(c+f)/2,g)&&(b=u,x=w),c=f}return isNaN(b)&&(b=i[o]),a?(a.push(b,g,x),a):[b,g,x]}function ha(t,e,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var l=r[a];o=ca(t,e,l,n,i,2*a,o),e=l[l.length-1]}return o}function fa(t,e,r,n,i){var o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)))return o;return!1}function pa(t,e,r,n,i){var o=Object(mt.s)(Object(mt.k)(),t,e,r,n);return!!Object(mt.G)(i,o)&&(!!Object(mt.h)(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||fa(t,e,r,n,(function(t,e){return Object(mt.H)(i,t,e)})))))}function da(t,e,r,n,i){if(!function(t,e,r,n,i){return!!(pa(t,e,r,n,i)||la(t,e,r,n,i[0],i[1])||la(t,e,r,n,i[0],i[3])||la(t,e,r,n,i[2],i[1])||la(t,e,r,n,i[2],i[3]))}(t,e,r[0],n,i))return!1;if(1===r.length)return!0;for(var o=1,a=r.length;o<a;++o)if(sa(t,r[o-1],r[o],n,i)&&!pa(t,r[o-1],r[o],n,i))return!1;return!0}function ga(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function ya(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],l=t[e+1];i+=(s-o)*(l+a),o=s,a=l}return 0===i?void 0:i>0}function ma(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var l=r[a],u=ya(t,e,l,n);if(0===a){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=l}return!0}function _a(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var l=r[a],u=ya(t,e,l,n);(0===a?o&&u||!o&&!u:o&&!u||!o&&u)&&ga(t,e,l,n),e=l}return e}function va(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o)e=_a(t,e,r[o],n,i);return e}function ba(t,e){for(var r=[],n=0,i=0,o=0,a=e.length;o<a;++o){var s=e[o];if(ya(t,n,s,2)){if(0===r.length)continue;r[r.length-1].push(e[i])}else r.push(e.slice(i,o+1));i=o+1,n=s}return r}var xa=r(61),wa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ea=function(t){function e(e,r,n){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,e),i.ends_=n):i.setCoordinates(e,r),i}return wa(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(h.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<Object(mt.f)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vo(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return ua(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return ra(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?_a(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Qo(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(mt.x)(this.getExtent());this.flatInteriorPoint_=ca(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new aa(this.getFlatInteriorPoint(),To)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new ia(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],l=new ia(e.slice(i,s),t);n.push(l),i=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ma(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=_a(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=Jo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,Io,n)},e.prototype.getType=function(){return fo.a.POLYGON},e.prototype.intersectsExtent=function(t){return da(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Wo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Do),Oa=Ea;function Sa(t,e,r,n){for(var i=r||32,o=[],a=0;a<i;++a)Object(h.c)(o,Object(xa.d)(t,e,2*Math.PI*a/i,n));return o.push(o[0],o[1]),new Ea(o,Io,[o.length])}function Ia(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new Ea(o,Io,[o.length])}function Ca(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(n+1),l=new Array(s),u=0;u<s;u+=i){l[u]=0,l[u+1]=0;for(var c=2;c<i;c++)l[u+c]=a[c]}var h=[l.length],f=new Ea(l,o,h);return Ta(f,a,t.getRadius(),r),f}function Ta(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=n||0,l=0;l<=a;++l){var u=l*o,c=s+2*Object(mo.g)(l,a)*Math.PI/a;i[u]=e[0]+r*Math.cos(c),i[u+1]=e[1]+r*Math.sin(c)}t.changed()}var Pa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ra(t,e){setTimeout((function(){t(e)}),0)}function La(t){return!(t.sourceCenter&&t.targetCenter&&!Object(Wn.g)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Ma(t,e,r,n,i){var o=Math.cos(-i),a=Math.sin(-i),s=t[0]*o-t[1]*a,l=t[1]*o+t[0]*a;return[(s+=(e[0]/2-r[0])*n)*o-(l+=(r[1]-e[1]/2)*n)*(a=-a),l*o+s*a]}var Na=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=Object(ii.a)({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=Object(u.g)(n.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.nextCenter_=null,r.nextResolution_,r.nextRotation_,r.cancelAnchor_=void 0,n.projection&&Object(u.i)(),n.center&&(n.center=Object(u.l)(n.center,r.projection_)),n.extent&&(n.extent=Object(u.m)(n.extent,r.projection_)),r.applyOptions_(n),r}return Pa(e,t),e.prototype.applyOptions_=function(t){var e=Object(ii.a)({},t);for(var r in go)delete e[r];this.setProperties(e,!0);var n=function(t){var e,r,n,i=28,o=2,a=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:i,l=void 0!==t.zoomFactor?t.zoomFactor:o,c=void 0!==t.multiWorld&&t.multiWorld,f=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,d=Object(u.g)(t.projection,"EPSG:3857"),g=d.getExtent(),y=t.constrainOnlyCenter,m=t.extent;c||m||!d.isGlobal()||(y=!1,m=g);if(void 0!==t.resolutions){var _=t.resolutions;r=_[a],n=void 0!==_[s]?_[s]:_[_.length-1],e=t.constrainResolution?function(t,e,r,n){return function(i,o,a,s){if(void 0!==i){var l=t[0],u=t[t.length-1],c=r?bo(l,r,a,n):l;if(s)return void 0===e||e?xo(i,c,u):Object(mo.b)(i,u,c);var f=Math.min(c,i),p=Math.floor(Object(h.h)(t,f,o));return t[p]>c&&p<t.length-1?t[p+1]:t[p]}}}(_,f,!y&&m,p):wo(r,n,f,!y&&m,p)}else{var v=(g?Math.max(Object(mt.F)(g),Object(mt.A)(g)):360*u.a[Pn.b.DEGREES]/d.getMetersPerUnit())/yo.b/Math.pow(o,0),b=v/Math.pow(o,i-0);void 0!==(r=t.maxResolution)?a=0:r=v/Math.pow(l,a),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(l,s):v/Math.pow(l,s):b),s=a+Math.floor(Math.log(r/n)/Math.log(l)),n=r/Math.pow(l,s-a),e=t.constrainResolution?function(t,e,r,n,i,o){return function(a,s,l,u){if(void 0!==a){var c=i?bo(e,i,l,o):e,h=void 0!==r?r:0;if(u)return void 0===n||n?xo(a,c,h):Object(mo.b)(a,h,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),g=Math.floor(Math.log(e/d)/Math.log(t)+p),y=Math.max(f,g),m=e/Math.pow(t,y);return Object(mo.b)(m,h,c)}}}(l,r,n,f,!y&&m,p):wo(r,n,f,!y&&m,p)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:a,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return _o(t.extent,t.constrainOnlyCenter,e)}var r=Object(u.g)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,_o(n,!1,!1)}return vo}(t),o=n.constraint,a=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=i||Object(mo.m)(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?Oo:"number"==typeof e?(r=e,n=2*Math.PI/r,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):Oo}return Eo;var r,n;var i,o}(t);this.constraints_={center:i,resolution:o,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var n=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(n[3]-e[3]+e[1]-n[1]),a=i/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([r[0]+o,r[1]-a])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object(ii.a)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=Object(ii.a)({},n)).center=Object(u.l)(n.center,this.getProjection())),n.anchor&&((n=Object(ii.a)({},n)).anchor=Object(u.l)(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,r=arguments.length;r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r);for(var n=0;n<r&&!this.isDef();++n){var i=arguments[n];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(n!==r){for(var o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_,u=[];n<r;++n){var c=arguments[n],h={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||So.inAndOut,callback:e};if(c.center&&(h.sourceCenter=a,h.targetCenter=c.center.slice(),a=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=s,h.targetResolution=this.getResolutionForZoom(c.zoom),s=h.targetResolution):c.resolution&&(h.sourceResolution=s,h.targetResolution=c.resolution,s=h.targetResolution),void 0!==c.rotation){h.sourceRotation=l;var f=Object(mo.g)(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}La(h)?h.complete=!0:o+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(po.a.ANIMATING,1),this.updateAnimations_()}else e&&Ra(e,!0)},e.prototype.getAnimating=function(){return this.hints_[po.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[po.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(po.a.ANIMATING,-this.hints_[po.a.ANIMATING]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&Ra(n[0].callback,!1),!t)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var l=t-s.start,u=s.duration>0?l/s.duration:1;u>=1?(s.complete=!0,u=1):i=!1;var c=s.easing(u);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],p=s.targetCenter[0],d=s.targetCenter[1];this.nextCenter_=s.targetCenter;var g=h+c*(p-h),y=f+c*(d-f);this.targetCenter_=[g,y]}if(s.sourceResolution&&s.targetResolution){var m=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var _=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(m,0,_,!0);this.targetCenter_=this.calculateCenterZoom(v,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var b=1===c?Object(mo.g)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var x=this.constraints_.rotation(b,!0);this.targetCenter_=this.calculateCenterRotate(x,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=b}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(po.a.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var w=n[0].callback;w&&Ra(w,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(r=[n[0]-e[0],n[1]-e[1]],Object(Wn.j)(r,t-this.getRotation()),Object(Wn.a)(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]);return r},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Object(u.w)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(go.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return Object(u.x)(e,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();Object(Ui.a)(r,1);var n=this.getResolution();Object(Ui.a)(void 0!==n,2);var i=this.getRotation();return Object(Ui.a)(void 0!==i,3),Object(mt.z)(r,n,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(go.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Object(u.m)(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSizeMinusPadding_(),n=Object(mt.F)(t)/r[0],i=Object(mt.A)(t)/r[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(go.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),r=this.getRotation(),n=this.getCenterInternal(),i=this.padding_;if(i){var o=this.getViewportSizeMinusPadding_();n=Ma(n,this.getViewportSize_(),[o[0]/2+i[3],o[1]/2+i[0]],e,r)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=Object(h.h)(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Object(mo.b)(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,Object(mo.b)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r;if(Object(Ui.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Object(Ui.a)(!Object(mt.I)(t),25),r=Ia(n=Object(u.m)(t,this.getProjection()));else if(t.getType()===fo.a.CIRCLE){var n;(r=Ia(n=Object(u.m)(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Object(mt.x)(n))}else{var i=Object(u.s)();r=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(r,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),r=Math.cos(e),n=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=o){var f=i[c]*r-i[c+1]*n,p=i[c]*n+i[c+1]*r;a=Math.min(a,f),s=Math.min(s,p),l=Math.max(l,f),u=Math.max(u,p)}return[a,s,l,u]},e.prototype.fitInternal=function(t,e){var r=e||{},n=r.size;n||(n=this.getViewportSizeMinusPadding_());var i,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;i=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var s=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(s,[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,a?0:1);var u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),f=Object(mt.x)(s);f[0]+=(o[1]-o[3])/2*l,f[1]+=(o[0]-o[2])/2*l;var p=f[0]*h-f[1]*c,d=f[1]*h+f[0]*c,g=this.getConstrainedCenter([p,d],l),y=r.callback?r.callback:Dn.c;void 0!==r.duration?this.animateInternal({resolution:l,center:g,duration:r.duration,easing:r.easing},y):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),Ra(y,!0))},e.prototype.centerOn=function(t,e,r){this.centerOnInternal(Object(u.l)(t,this.getProjection()),e,r)},e.prototype.centerOnInternal=function(t,e,r){this.setCenterInternal(Ma(t,e,r,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,r,n){var i,o=this.padding_;if(o&&t){var a=this.getViewportSizeMinusPadding_(-r),s=Ma(t,n,[a[0]/2+o[3],a[1]/2+o[0]],e,r);i=[t[0]-s[0],t[1]-s[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Object(u.w)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=e&&Object(u.l)(e,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Object(u.l)(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(t?Object(u.l)(t,this.getProjection()):t)},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r,this.calculateCenterShift(this.targetCenter_,o,n,i));this.get(go.ROTATION)!==n&&this.set(go.ROTATION,n),this.get(go.RESOLUTION)!==o&&(this.set(go.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(go.CENTER)&&Object(Wn.g)(this.get(go.CENTER),a)||this.set(go.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,o,a));if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();var u=r||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Object(Wn.g)(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:n,easing:So.easeOut,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(po.a.INTERACTING,1)},e.prototype.endInteraction=function(t,e,r){var n=r&&Object(u.l)(r,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,r){this.setHint(po.a.INTERACTING,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(ei.a),Aa=r(16),ka=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ja(t){t instanceof Yn.a?t.setMapInternal(null):t instanceof qi&&t.getLayers().forEach(ja)}function Fa(t,e){if(t instanceof Yn.a)t.setMapInternal(e);else if(t instanceof qi)for(var r=t.getLayers().getArray(),n=0,i=r.length;n<i;++n)Fa(r[n],e)}var Da=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new qi({layers:t.layers});o[so]=a,o[uo]=t.target,o[co]=t.view instanceof Na?t.view:new Na,void 0!==t.controls&&(Array.isArray(t.controls)?r=new Fi(t.controls.slice()):(Object(Ui.a)("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new Fi(t.interactions.slice()):(Object(Ui.a)("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new Fi(t.overlays.slice()):(Object(Ui.a)("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new Fi;return{controls:r,interactions:n,keyboardEventTarget:e,overlays:i,values:o}}(e);r.renderComplete_,r.loaded_=!0,r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:ni.a,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=Object(Un.d)(),r.pixelToCoordinateTransform_=Object(Un.d)(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=e.moveTolerance,r.keyboardEventTarget_=n.keyboardEventTarget,r.targetChangeHandlerKeys_=null,r.controls=n.controls||new Fi,r.interactions=n.interactions||new Fi,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new ho.a(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addChangeListener(so,r.handleLayerGroupChanged_),r.addChangeListener(co,r.handleViewChanged_),r.addChangeListener(lo,r.handleSizeChanged_),r.addChangeListener(uo,r.handleTargetChanged_),r.setProperties(n.values);var i=r;return!e.view||e.view instanceof Na||e.view.then((function(t){i.setView(new Na(t))})),r.controls.addEventListener(Li,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(Mi,function(t){t.element.setMap(null)}.bind(r)),r.interactions.addEventListener(Li,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(Mi,function(t){t.element.setMap(null)}.bind(r)),r.overlays_.addEventListener(Li,function(t){this.addOverlayInternal_(t.element)}.bind(r)),r.overlays_.addEventListener(Mi,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(r)),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r}return ka(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.handleLayerAdd_=function(t){Fa(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,o=void 0!==r.layerFilter?r.layerFilter:Dn.b,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),e),r},e.prototype.getAllLayers=function(){var t=[];return function e(r){r.forEach((function(r){r instanceof qi?e(r.getLayers()):t.push(r)}))}(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_&&this.renderer_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance:0,o=n.layerFilter||Dn.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Dn.b,i=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(uo)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Object(u.w)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Object(Un.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(so)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof Fi)e.setLayers(t);else{var r=e.getLayers();r.clear(),r.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;var o=n.layer.getSource();if(o&&o.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Object(u.l)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Object(Un.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(lo)},e.prototype.getView=function(){return this.get(co)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,r,n){return Object(ho.b)(this.frameState_,t,e,r,n)},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new Hi(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,r=e.type;if(r===Ji||r===Di.a.WHEEL||r===Di.a.KEYDOWN){var n=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(i===n?n.documentElement:i).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var l=a[s];if(l.getMap()===this&&l.getActive()&&this.getTargetElement())if(!l.handleEvent(t)||t.propagationStopped)break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[po.a.ANIMATING]||i[po.a.INTERACTING]){var o=Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener($n.a.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent($n.a.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Wi(ao,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Wi(oo,this,t))));for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Object(Ci.c)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Di.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Di.a.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(oi.e)(this.viewport_)}var r=this.getTargetElement();if(r){for(var n in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new eo(this,this.moveTolerance_),Zi)this.mapBrowserEventHandler_.addEventListener(Zi[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Di.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Di.a.WHEEL,this.boundHandleBrowserEvent_,!!ni.e&&{passive:!1});var i=this.getOwnerDocument().defaultView,o=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[Object(Ci.a)(o,Di.a.KEYDOWN,this.handleBrowserEvent,this),Object(Ci.a)(o,Di.a.KEYPRESS,this.handleBrowserEvent,this),Object(Ci.a)(i,Di.a.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(Ci.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(Ci.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(Ci.a)(t,Kn.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(Ci.a)(t,Di.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ci.c),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new zi("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Object(Ci.a)(t,Kn.a.PROPERTYCHANGE,this.render,this),Object(Ci.a)(t,Di.a.CHANGE,this.render,this),Object(Ci.a)(t,"addlayer",this.handleLayerAdd_,this),Object(Ci.a)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.handleLayerRemove_=function(t){ja(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this,r=this.getSize(),n=this.getView(),i=this.frameState_,o=null;if(void 0!==r&&Object(Aa.b)(r)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(mt.z)(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:Object(Gn.c)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var l=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=Object(mt.z)(s.nextCenter,s.nextResolution,l,r)}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i)(!this.previousExtent_||!Object(mt.I)(this.previousExtent_)&&!Object(mt.p)(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Wi(no,this,i)),this.previousExtent_=Object(mt.m)(this.previousExtent_));this.previousExtent_&&!o.viewHints[po.a.ANIMATING]&&!o.viewHints[po.a.INTERACTING]&&!Object(mt.p)(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Wi(io,this,o)),Object(mt.e)(o.extent,this.previousExtent_))}this.dispatchEvent(new Wi(ro,this,o)),this.renderComplete_=this.hasListener(oo)||this.hasListener(ao)||this.hasListener($n.a.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new zi("removelayer",e)),this.set(so,t)},e.prototype.setSize=function(t){this.set(lo,t)},e.prototype.setTarget=function(t){this.set(uo,t)},e.prototype.setView=function(t){if(!t||t instanceof Na)this.set(co,t);else{this.set(co,new Na);var e=this;t.then((function(t){e.setView(new Na(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var r=getComputedStyle(t),n=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),i=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(i)||(e=[n,i],!Object(Aa.b)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},e}(ei.a),Ga=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ua=function(t){function e(e){var r=t.call(this)||this,n=e.element;return!n||e.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],e.render&&(r.render=e.render),e.target&&r.setTarget(e.target),r}return Ga(e,t),e.prototype.disposeInternal=function(){Object(oi.e)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(oi.e)(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)Object(Ci.c)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,t)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Dn.c&&this.listenerKeys.push(Object(Ci.a)(t,ro,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(ei.a),Ba=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),za=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.userCollapsed_=r.collapsed_,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.expandClassName?n.expandClassName:i+"-expand",s=void 0!==n.collapseLabel?n.collapseLabel:"›",l=void 0!==n.collapseClassName?n.collapseClassName:i+"-collapse";"string"==typeof s?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=s,r.collapseLabel_.className=l):r.collapseLabel_=s;var u=void 0!==n.label?n.label:"i";"string"==typeof u?(r.label_=document.createElement("span"),r.label_.textContent=u,r.label_.className=a):r.label_=u;var c=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_;r.toggleButton_=document.createElement("button"),r.toggleButton_.setAttribute("type","button"),r.toggleButton_.setAttribute("aria-expanded",String(!r.collapsed_)),r.toggleButton_.title=o,r.toggleButton_.appendChild(c),r.toggleButton_.addEventListener(Di.a.CLICK,r.handleClick_.bind(r),!1);var h=i+" "+ti.e+" "+ti.b+(r.collapsed_&&r.collapsible_?" "+ti.a:"")+(r.collapsible_?"":" ol-uncollapsible"),f=r.element;return f.className=h,f.appendChild(r.toggleButton_),f.appendChild(r.ulElement_),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return Ba(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=!0,i=t.layerStatesArray,o=0,a=i.length;o<a;++o){var s=i[o];if(Object(Yn.b)(s,t.viewState)){var l=s.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(n=n&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,f=c.length;h<f;++h)c[h]in e||(r.push(c[h]),e[c[h]]=!0);else c in e||(r.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(n),r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Object(h.b)(e,this.renderedAttributions_)){Object(oi.d)(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(ti.a),this.collapsed_?Object(oi.g)(this.collapseLabel_,this.label_):Object(oi.g)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(Ua),Va=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qa=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var i=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"⇧",a=void 0!==n.compassClassName?n.compassClassName:"ol-compass";r.label_=null,"string"==typeof o?(r.label_=document.createElement("span"),r.label_.className=a,r.label_.textContent=o):(r.label_=o,r.label_.classList.add(a));var s=n.tipLabel?n.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(r.label_),l.addEventListener(Di.a.CLICK,r.handleClick_.bind(r),!1);var u=i+" "+ti.e+" "+ti.b,c=r.element;return c.className=u,c.appendChild(l),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(ti.c),r}return Va(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:So.easeOut}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains(ti.c);i||0!==r?i&&0!==r&&this.element.classList.remove(ti.c):this.element.classList.add(ti.c)}this.label_.style.transform=n}this.rotation_=r}},e}(Ua),Ya=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wa=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),target:n.target})||this;var i=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInClassName?n.zoomInClassName:i+"-in",s=void 0!==n.zoomOutClassName?n.zoomOutClassName:i+"-out",l=void 0!==n.zoomInLabel?n.zoomInLabel:"+",u=void 0!==n.zoomOutLabel?n.zoomOutLabel:"–",c=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",h=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=c,f.appendChild("string"==typeof l?document.createTextNode(l):l),f.addEventListener(Di.a.CLICK,r.handleClick_.bind(r,o),!1);var p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u),p.addEventListener(Di.a.CLICK,r.handleClick_.bind(r,-o),!1);var d=i+" "+ti.e+" "+ti.b,g=r.element;return g.className=d,g.appendChild(f),g.appendChild(p),r.duration_=void 0!==n.duration?n.duration:250,r}return Ya(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:So.easeOut})):e.setZoom(n)}}},e}(Ua);function Xa(t){var e=t||{},r=new Fi;return(void 0===e.zoom||e.zoom)&&r.push(new Wa(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new qa(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new za(e.attributionOptions)),r}var Ha="active",Za=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ka(t,e,r,n){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:So.easeOut})}}var Ja=function(t){function e(e){var r=t.call(this)||this;return r.on,r.once,r.un,e&&e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return Za(e,t),e.prototype.getActive=function(){return this.get(Ha)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Ha,t)},e.prototype.setMap=function(t){this.map_=t},e}(ei.a),$a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qa=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return $a(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Zi.DBLCLICK){var r=t.originalEvent,n=t.map,i=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_;Ka(n.getView(),o,i,this.duration_),r.preventDefault(),e=!0}return!e},e}(Ja),ts=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function es(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var rs=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return ts(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Zi.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Zi.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Zi.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Zi.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Zi.POINTERDOWN||e===Zi.POINTERDRAG||e===Zi.POINTERUP}(t)){var e=t.originalEvent,r=e.pointerId.toString();t.type==Zi.POINTERUP?delete this.trackedPointers_[r]:(t.type==Zi.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=e),this.targetPointers=Object(ii.c)(this.trackedPointers_)}},e}(Ja);function ns(t){var e=arguments;return function(t){for(var r=!0,n=0,i=e.length;n<i&&(r=r&&e[n](t));++n);return r}}var is=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},os=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},as=function(t){var e=t.map.getTargetElement(),r=t.map.getOwnerDocument().activeElement;return e.contains(r)},ss=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||as(t)},ls=Dn.b,us=function(t){var e=t.originalEvent;return 0==e.button&&!(ni.g&&ni.d&&e.ctrlKey)},cs=Dn.a,hs=function(t){return t.type==Zi.SINGLECLICK},fs=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ps=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ds=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},gs=function(t){var e=t.originalEvent;return Object(Ui.a)(void 0!==e,56),"mouse"==e.pointerType},ys=function(t){var e=t.originalEvent;return Object(Ui.a)(void 0!==e,56),e.isPrimary&&0===e.button},ms=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_s=function(t){function e(e){var r=t.call(this,{stopDown:Dn.a})||this,n=e||{};r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var i=n.condition?n.condition:ns(fs,ys);return r.condition_=n.onFocusOnly?ns(ss,i):i,r.noKinetic_=!1,r}return ms(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=es(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var n=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],i=t.map.getView();Object(Wn.k)(n,i.getResolution()),Object(Wn.j)(n,i.getRotation()),i.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(i),a[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:So.easeOut})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(rs),vs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bs=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:Dn.a})||this).condition_=n.condition?n.condition:os,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return vs(e,t),e.prototype.handleDragEvent=function(t){if(gs(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==Eo){var n=e.getSize(),i=t.pixel,o=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!gs(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!gs(t)&&(!(!us(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(rs),xs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ws=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return xs(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+r,n.top=Math.min(t[1],e[1])+r,n.width=Math.abs(e[0]-t[0])+r,n.height=Math.abs(e[1]-t[1])+r},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Oa([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(Fn.a),Es=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Os="boxstart",Ss="boxdrag",Is="boxend",Cs="boxcancel",Ts=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.coordinate=r,i.mapBrowserEvent=n,i}return Es(e,t),e}(Ni.a),Ps=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=e||{};return r.box_=new ws(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,n.onBoxEnd&&(r.onBoxEnd=n.onBoxEnd),r.startPixel_=null,r.condition_=n.condition?n.condition:us,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return Es(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ts(Ss,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ts(e?Is:Cs,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ts(Os,t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(rs),Rs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ls=function(t){function e(e){var r=this,n=e||{},i=n.condition?n.condition:ps;return(r=t.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return Rs(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),r=this.getGeometry();if(this.out_){var n=e.rotatedExtentForGeometry(r),i=e.getResolutionForExtentInternal(n),o=e.getResolution()/i;(r=r.clone()).scale(o*o)}e.fitInternal(r,{duration:this.duration_,easing:So.easeOut})},e}(Ps),Ms=37,Ns=38,As=39,ks=40,js=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fs=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.defaultCondition_=function(t){return fs(t)&&ds(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return js(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Di.a.KEYDOWN){var r=t.originalEvent,n=r.keyCode;if(this.condition_(t)&&(n==ks||n==Ms||n==As||n==Ns)){var i=t.map.getView(),o=i.getResolution()*this.pixelDelta_,a=0,s=0;n==ks?s=-o:n==Ms?a=-o:n==As?a=o:s=o;var l=[a,s];Object(Wn.j)(l,i.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:So.linear,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),r.preventDefault(),e=!0}}return!e},e}(Ja),Ds=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gs=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.condition_=n.condition?n.condition:ds,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return Ds(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Di.a.KEYDOWN||t.type==Di.a.KEYPRESS){var r=t.originalEvent,n=r.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_;Ka(i.getView(),o,void 0,this.duration_),r.preventDefault(),e=!0}}return!e},e}(Ja),Us=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Bs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zs="trackpad",Vs="wheel",qs=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.constrainResolution_=void 0!==n.constrainResolution&&n.constrainResolution;var i=n.condition?n.condition:ls;return r.condition_=n.onFocusOnly?ns(ss,i):i,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return Bs(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==Di.a.WHEEL)return!0;var e,r=t.map,n=t.originalEvent;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Di.a.WHEEL&&(e=n.deltaY,ni.b&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=ni.a),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?zs:Vs);var o=r.getView();if(this.mode_===zs&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-Object(mo.b)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Ka(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Ja),Ys=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ws=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Dn.a),(r=t.call(this,i)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==n.threshold?n.threshold:.3,r.duration_=void 0!==n.duration?n.duration:250,r}return Ys(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Eo){var l=a.getViewport().getBoundingClientRect(),u=es(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(u),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(rs),Xs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hs=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Dn.a),(r=t.call(this,i)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Xs(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,l=s.getView();1!=e&&(this.lastScaleDelta_=e);var u=s.getViewport().getBoundingClientRect(),c=es(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(rs);function Zs(t){var e=t||{},r=new Fi,n=new Us(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new bs),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new Qa({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new _s({onFocusOnly:e.onFocusOnly,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new Ws),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new Hs({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new Fs),r.push(new Gs({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new qs({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new Ls({duration:e.zoomDuration})),r}var Ks=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Js=function(t){function e(e){return(e=Object(ii.a)({},e)).controls||(e.controls=Xa()),e.interactions||(e.interactions=Zs({onFocusOnly:!0})),t.call(this,e)||this}return Ks(e,t),e.prototype.createRenderer=function(){return new Pi(this)},e}(Da);function $s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tl=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];$s(this,t),this._listener=e,this._scope=r,this.eventKey_=CD(),this.once_=n}var e,r,n;return e=t,(r=[{key:"fire",value:function(t){var e=t;mD(e)||(e=[e]),this._listener.apply(this._scope,e)}},{key:"getEventKey",value:function(){return this.eventKey_}},{key:"isOnce",value:function(){return this.once_}},{key:"has",value:function(t,e){var r=!1;return r=vD(t)?this._listener===t&&this._scope===e:this.eventKey_===t,r}}])&&Qs(e.prototype,r),n&&Qs(e,n),t}();function el(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rl=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events_={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!_D(t)&&vD(e)&&(_D(this.events_[t])&&(this.events_[t]=[]),-1===this.indexOf(t,e,r))){var o=new tl(e,r,i);this.events_[t].push(o),n=o.getEventKey()}return n}},{key:"remove",value:function(t,e,r){var n=this.events_[t];if(!_D(n)){var i=this.indexOf(t,e,r);-1!==i&&n.splice(i,1)}}},{key:"removeByKey",value:function(t,e){var r=this.events_[t];if(!_D(r)){var n=r.map((function(t,r){var n=-1;return t.getEventKey()===e&&(n=r),n}));-1!==n&&r.splice(n,1)}}},{key:"fire",value:function(t,e){var r=this,n=[].concat(this.events_[t]);_D(n)||n.forEach((function(n){n.fire(e),!0===n.isOnce()&&r.remove(t,n.getEventKey())}))}},{key:"indexOf",value:function(t,e,r){var n=-1,i=this.events_[t];if(!_D(i))for(var o=0,a=i.length;o<a;o+=1)if(i[o].has(e,r)){n=o;break}return n}}])&&el(e.prototype,r),n&&el(e,n),t}();function nl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var il=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventsManager_=new rl}var e,r,n;return e=t,(r=[{key:"on",value:function(t,e,r){return this.eventsManager_.add(t,e,r)}},{key:"once",value:function(t,e,r){return this.eventsManager_.add(t,e,r,!0)}},{key:"un",value:function(t,e,r){this.eventsManager_.remove(t,e,r)}},{key:"unByKey",value:function(t,e){this.eventsManager_.remove(t,e)}},{key:"fire",value:function(t,e){var r=e;_D(r)&&(r=[this]),this.eventsManager_.fire(t,r)}}])&&nl(e.prototype,r),n&&nl(e,n),t}(),ol=r(96),al=r.n(ol),sl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ll=0,ul=1,cl=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render})||this).dragListenerKeys_=[],r.currentResolution_=void 0,r.direction_=ll,r.dragging_,r.heightLimit_=0,r.widthLimit_=0,r.startX_,r.startY_,r.thumbSize_=null,r.sliderInitialized_=!1,r.duration_=void 0!==n.duration?n.duration:200;var i=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb "+ti.e;var a=r.element;return a.className=i+" "+ti.e+" "+ti.b,a.appendChild(o),a.addEventListener(Ji,r.handleDraggerStart_.bind(r),!1),a.addEventListener(Ki,r.handleDraggerDrag_.bind(r),!1),a.addEventListener($i,r.handleDraggerEnd_.bind(r),!1),a.addEventListener(Di.a.CLICK,r.handleContainerClick_.bind(r),!1),o.addEventListener(Di.a.CLICK,Ni.b,!1),r}return sl(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight;if(0===e&&0===r)return this.sliderInitialized_=!1;var n=getComputedStyle(t);e-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),r-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);var i=t.firstElementChild,o=getComputedStyle(i),a=i.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=i.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,s],e>r?(this.direction_=ul,this.widthLimit_=e-a):(this.direction_=ll,this.heightLimit_=r-s),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:i,duration:this.duration_,easing:So.easeOut})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_,i=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(Object(Ci.a)(i,Ki,r,this),Object(Ci.a)(i,$i,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Ci.c),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==ul?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var r;return r=this.direction_===ul?t/this.widthLimit_:e/this.heightLimit_,Object(mo.b)(r,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return Object(mo.b)(1-e(t),0,1)},e.prototype.render=function(t){if(t.frameState&&(this.sliderInitialized_||this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},e}(Ua);function hl(t){return(hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pl(t,e){return(pl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yl(t);if(e){var i=yl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gl(this,r)}}function gl(t,e){return!e||"object"!==hl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yl(t){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ml=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pl(t,e)}(o,t);var e,r,n,i=dl(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,GD({},t,!0))).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&fl(e.prototype,r),n&&fl(e,n),o}(cl),_l=function(t){throw new Error(t)};function vl(t){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xl(t,e){return(xl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sl(t);if(e){var i=Sl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return El(this,r)}}function El(t,e){return!e||"object"!==vl(e)&&"function"!=typeof e?Ol(t):e}function Ol(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sl(t){return(Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Il=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xl(t,e)}(o,t);var e,r,n,i=wl(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).impl_=t,!_D(e.impl_)&&vD(e.impl_.setFacadeObj)&&e.impl_.setFacadeObj(Ol(e)),e}return e=o,(r=[{key:"getImpl",value:function(){return this.impl_}},{key:"setImpl",value:function(t){this.impl_=t}},{key:"destroy",value:function(){!_D(this.impl_)&&vD(this.impl_.destroy)&&this.impl_.destroy()}}])&&bl(e.prototype,r),n&&bl(e,n),o}(il),Cl="added:map",Tl="added:panel",Pl="added:layer",Rl="added:wmc",Ll="added:kml",Ml="added:wms",Nl="added:wfs",Al="added:vectortile",kl="removed:layer",jl="removed:map",Fl="added:wmts",Dl="activated",Gl="deactivated",Ul="show",Bl="hide",zl="destroy",Vl="select:features",ql="unselect:features",Yl="hover:features",Wl="leave:features",Xl="load",Hl="completed",Zl="change",Kl="change:wmc",Jl="change:proj",$l="change:style",Ql="change:zoom",tu="change:rotation",eu="click",ru="move",nu="popup:added",iu="popup:removed",ou="popup:addtabed",au="popup:removedtab",su={translations:{en:r(97),es:r(98)},lang:"es"},lu=function(t){return su.translations[t]},uu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:su.lang;return lu(e)[t]};function cu(t){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fu(t,e){return(fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=gu(t);if(e){var i=gu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return du(this,r)}}function du(t,e){return!e||"object"!==cu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gu(t){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fu(t,e)}(o,t);var e,r,n,i=pu(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=t;return r=i.call(this,n),dD(n.addTo)&&_l(uu("exception").addto_method),dD(n.getElement)&&_l(uu("exception").getelement_method),dD(n.isByDefault)&&(n.isByDefault=!0),r.name=e,r.map_=null,r.element_=null,r.activationBtn_=null,r.activated=!1,r.panel_=null,r.controls_=null,r}return e=o,(r=[{key:"setImpl",value:function(t){var e=t;dD(e.addTo)&&_l(uu("exception").addto_method),dD(e.getElement)&&_l(uu("exception").getelement_method),dD(e.isByDefault)&&(e.isByDefault=!0)}},{key:"addTo",value:function(t){var e=this;this.map_=t;var r=this.getImpl(),n=this.createView(t);n instanceof Promise?n.then((function(n){e.manageActivation(n),r.addTo(t,n),e.fire(Cl)})):(this.manageActivation(n),r.addTo(t,n),this.fire(Cl))}},{key:"createView",value:function(t){}},{key:"manageActivation",value:function(t){var e=this;this.element_=t,this.activationBtn_=this.getActivationButton(this.element_),_D(this.activationBtn_)||this.activationBtn_.addEventListener("click",(function(t){t.preventDefault(),e.activated?(e.deactivate(),e.activated=!1):(e.activate(),e.activated=!0)}),!1)}},{key:"getActivationButton",value:function(t){}},{key:"activate",value:function(){_D(this.element_)||this.element_.classList.add("activated"),dD(this.getImpl().activate)||this.getImpl().activate(),this.activated=!0,this.fire(Dl)}},{key:"deactivate",value:function(){_D(this.element_)||this.element_.classList.remove("activated"),dD(this.getImpl().deactivate)||this.getImpl().deactivate(),this.activated=!1,this.fire(Gl)}},{key:"getElement",value:function(){return this.getImpl().getElement()}},{key:"setPanel",value:function(t){this.panel_=t}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){rG(this.getElement())}}])&&hu(e.prototype,r),n&&hu(e,n),o}(Il),mu=r(62),_u=r.n(mu);_u.a.registerHelper("gt",(function(t,e,r){return t>e?r.fn(this):r.inverse(this)})),_u.a.registerHelper("lt",(function(t,e,r){return t<e?r.fn(this):r.inverse(this)})),_u.a.registerHelper("eq",(function(t,e,r){return Object.equals(t,e)?r.fn(this):r.inverse(this)})),_u.a.registerHelper("oneword",(function(t,e){return/\s/g.test(YD(t))?e.inverse(this):e.fn(this)}));var vu={},bu=function(t,e){var r,n={};dD(e)||(n=HD(n,e.vars),r=e.parseToHtml);var i=_u.a.compile(t)(n);return!1!==r?AD(i):i},xu=function(t,e){var r;return dD(e)||(r=e.scope),new Promise((function(n,i){var o=vu[t];if(dD(o)){var a=t;dD(e)||!0!==e.jsonp||(a=function(t){var e=null;return _D(t)||(e=(e=M.config.MAPEA_URL.concat(M.config.TEMPLATES_PATH)).concat(t)),e}(t));var s=_D(e)&&!0===e.jsonp;uD(a,null,{jsonp:s}).then((function(e){o=_u.a.compile(e.text),vu[t]=o,n.call(r,o)}))}else n.call(r,o)}))};function wu(t){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ou(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Su(t,e){return(Su=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Iu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Tu(t);if(e){var i=Tu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Cu(this,r)}}function Cu(t,e){return!e||"object"!==wu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tu(t){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Su(t,e)}(o,t);var e,r,n,i=Iu(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Eu(this,o);var r=new ml(e);return t=i.call(this,r,o.NAME),dD(ml)&&_l(uu("exception").panzoombar_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(al.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&Ou(e.prototype,r),n&&Ou(e,n),o}(yu);Pu.NAME="panzoombar";var Ru=Pu,Lu="WMC",Mu="KML",Nu="WMS",Au="WFS",ku="WMTS",ju="OSM",Fu="Mapbox",Du="GeoJSON",Gu="Vector",Uu="MVT",Bu={WMC:Lu,KML:Mu,WMS:Nu,WFS:Au,WMTS:ku,OSM:ju,Mapbox:Fu,GeoJSON:Du,Vector:Gu,MVT:Uu},zu=function(t){var e=OD(t,!0);return e="WMS_FULL"===e?Nu:"WFST"===e?Au:Object.keys(Bu).find((function(t){var r=Bu[t];return xD(r)&&OD(r,!0)===e})),Bu[e]},Vu=function(t){return-1!==[Lu,Mu,Nu,Au,ku,Uu].indexOf(zu(t))};function qu(t){return(qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Yu=/WMS\*.*/,Wu=/WMS_FULL\*.*/,Xu=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,l={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))},array_string:function(t){return t.split(i).map((function(t){return t.trim()})).map((function(t){return String(t)}))}};if(xD(e)&&t.test(e)){var u=e.split("*")[o];_D(u)||(s=l[n](u))}else bD(e)?s=e[r]:_l("El parámetro no es de un tipo soportado: ".concat(qu(e)));return xD(s)&&(s=s.trim()),!0===a&&(s=OD(s)),s}},Hu=function(t){var e=[];_D(t)&&_l(uu("exception").no_param);var r=t;return mD(r)||(r=[r]),e=r.map((function(t){var e=Xu({parameter:t,type:"string",attr:"name"}),r=Xu({parameter:t,type:"string",attr:"url"}),n=Xu({parameter:t,type:"string",attr:"legend"}),i=Xu({parameter:t,type:"boolean",attr:"transparent"}),o=Xu({parameter:t,type:"boolean",attr:"tiled"}),a=Xu({parameter:t,type:"array_number",attr:"maxExtent",separator:"_"}),s=Xu({parameter:t,type:"string",attr:"version"}),l=Xu({parameter:t,type:"array_string",attr:"styles",separator:"%"});return Yu.test(t)||bD(t)?{type:"WMS",name:e(Yu,3),tiled:o(Yu,5),url:r(Yu,2),legend:n(Yu,1),transparent:i(Yu,4),maxExtent:a(Yu,6),version:s(Yu,7),styles:l(Yu,8)}:{type:"WMS",url:r(Wu,1)}})),mD(t)||(e=e[0]),e};function Zu(t){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ku=/KML\*.*/,Ju=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.valueCmp,o=void 0===i?/^1|true/i:i,a=t.separator,s=t.normalized,l=void 0!==s&&s;return function(t,i){var s,u={boolean:function(t){return o.test(t)},boolean_eql:function(t){return void 0===t||"true"===t},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(a||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(xD(e)&&t.test(e)){var c=e.split("*"),h=c[i];s=u[n](h),"extract"===r&&(s="false"!==(h=c.slice(-2,-1)[0])),"label"===r&&(s="false"!==(h=c.slice(-1)[0])),"url"!==r||"true"!==s&&"false"!==s&&void 0!==s||(s="")}else bD(e)?s=e[r]:_l("El parámetro no es de un tipo soportado: ".concat(Zu(e)));return xD(s)&&(s=s.trim()),!0===l&&(s=OD(s)),s}},$u=function(t){var e=t,r=[];_D(e)&&_l(uu("exception").no_param);var n=e;return mD(n)||(n=[n]),r=n.map((function(t){var e=Ju({parameter:t,type:"string",attr:"name"}),r=Ju({parameter:t,type:"string",attr:"url"}),n=Ju({parameter:t,type:"boolean",attr:"extract"}),i=Ju({parameter:t,type:"boolean_eql",attr:"label"});return Ku.test(t)?{type:Mu,name:e(Ku,1),url:r(Ku,2)+r(Ku,3),extract:n(Ku,4),label:i(Ku,5)}:{type:Mu,name:e(Ku),url:r(Ku),extract:n(Ku),label:i(Ku)}})),mD(e)||(r=r[0]),r};function Qu(t){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var tc=/MAPBOX\*.*/,ec=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,l={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(xD(e)&&t.test(e)){var u=e.split("*")[o];_D(u)||(s=l[n](u))}else bD(e)?s=e[r]:_l("El parámetro no es de un tipo soportado: ".concat(Qu(e)));return xD(s)&&(s=s.trim()),!0===a&&(s=OD(s)),s}},rc=function(t){var e=[];_D(t)&&_l(uu("exception").no_param);var r=t;return mD(r)||(r=[r]),e=r.map((function(t){var e=ec({parameter:t,type:"string",attr:"name"})(tc,1),r=ec({parameter:t,type:"string",attr:"legend"})(tc,3),n=ec({parameter:t,type:"boolean",attr:"transparent"})(tc,2),i=function(t){var e;return xD(t)?e=null:bD(t)&&!_D(t.accessToken)?e=t.accessToken.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(Qu(t))),e}(t);return{type:Fu,name:e,legend:r,transparent:n,accessToken:i}})),mD(t)||(e=e[0]),e};function nc(t){return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ic=/OSM\.*/,oc=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,l={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(xD(e)&&t.test(e)){var u=e.split("*")[o];_D(u)||(s=l[n](u))}else bD(e)?s=e[r]:_l("El parámetro no es de un tipo soportado: ".concat(nc(e)));return xD(s)&&(s=s.trim()),!0===a&&(s=OD(s)),s}},ac=function(t){var e=t,r=[];_D(e)&&(e={type:ju,name:"osm"});var n=e;return mD(n)||(n=[n]),r=n.map((function(t){return{type:"OSM",name:oc({parameter:t,type:"string",attr:"name"})(ic,3),transparent:oc({parameter:t,type:"boolean",attr:"transparent"})(ic,1),legend:oc({parameter:t,type:"string",attr:"legend"})(ic,2)}})),mD(e)||(r=r[0]),r};function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var lc=/^GeoJSON(T)?\*.*/,uc=function(t){var e=t.parameter,r=t.attr,n=t.type,i=t.separator,o=t.normalized,a=void 0!==o&&o;return function(t,o){var s,l={boolean:function(t){return/^1|(true)$/i.test(t)},string:function(t){return t},int:function(t){return Number.parseInt(t,10)},float:function(t){return Number.parseFloat(t,10)},array_number:function(t){return t.split(i||"").map((function(t){return t.trim()})).map((function(t){return Number.parseFloat(t)}))}};if(xD(e)&&t.test(e)){var u=e.split("*")[o];_D(u)||(s=l[n](u))}else bD(e)?s=e[r]:_l("El parámetro no es de un tipo soportado: ".concat(sc(e)));return xD(s)&&(s=s.trim()),!0===a&&(s=OD(s)),s}},cc=function(t){var e=[];_D(t)&&_l(uu("exception").no_param);var r=t;return mD(r)||(r=[r]),e=r.map((function(t){return{type:"GeoJSON",name:uc({parameter:t,type:"string",attr:"name"})(lc,1),url:uc({parameter:t,type:"string",attr:"name"})(lc,2),extract:uc({parameter:t,type:"boolean",attr:"extract"})(lc,3),style:uc({parameter:t,type:"string",attr:"style"})(lc,4)}})),mD(t)||(e=e[0]),e};function hc(t){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var fc=function(t){var e=[];_D(t)&&_l(uu("exception").no_param);var r=t;return mD(r)||(r=[r]),e=r.map((function(t){var e,r,n={};return n.type=Lu,n.name=(xD(e=t)?/^\w{3,7}\*[^*]+\*[^*]+$/.test(e)?r=e.split(/\*/)[2].trim():/^\w{3,7}\*[^*]$/.test(e)||/^[^*]+\*[^*]+$/.test(e)?r=e.split(/\*/)[1].trim():/^[^*]+$/.test(e)&&!wD(e)&&(r=e):bD(e)?r=OD(e.name):_l("El parámetro no es de un tipo soportado: ".concat(hc(e))),wD(r)&&(r=null),r),n.url=function(t){var e;if(xD(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else bD(t)?e=t.url:_l("El parámetro no es de un tipo soportado: ".concat(hc(t)));return e}(t),n.options=function(t){var e;return xD(t)||(bD(t)?e=t.options:_l("El parámetro no es de un tipo soportado: ".concat(hc(t)))),e}(t),n})),mD(t)||(e=e[0]),e};function pc(t){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dc=function(t){var e=t,r={};if(_D(e)&&_l(uu("exception").no_center),xD(e))if(e=OD(e),/^-?\d+(\.\d+)?[,;]-?\d+(\.\d+)?([*](true|false))?$/i.test(e)){var n=e.split(/\*/),i=n[0],o=n[1],a=i.split(/[,;]+/);2===a.length?(r.x=Number.parseFloat(a[0]),r.y=Number.parseFloat(a[1])):_l(uu("exception").invalid_center_param),r.draw=/^1|(true)$/i.test(o)}else _l(uu("exception").invalid_center_param);else mD(e)?2===e.length||3===e.length?(xD(e[0])&&(e[0]=Number.parseFloat(e[0])),xD(e[1])&&(e[1]=Number.parseFloat(e[1])),r.x=e[0],r.y=e[1]):_l(uu("exception").invalid_center_param):bD(e)?(yD(e.x)?_l(uu("exception").invalid_center_param):(xD(e.x)&&(e.x=Number.parseFloat(e.x)),r.x=e.x),yD(e.y)?_l(uu("exception").invalid_center_param):(xD(e.y)&&(e.y=Number.parseFloat(e.y)),r.y=e.y),yD(e.draw)?r.draw=!1:r.draw=/^true$/.test(e.draw)):_l("El parámetro no es de un tipo soportado: ".concat("undefined"==typeof maxExtentParameter?"undefined":pc(maxExtentParameter)));return(Number.isNaN(r.x)||Number.isNaN(r.y))&&_l(uu("exception").invalid_center_param),r},gc=function(t){var e,r=t;if(!_D(r)){if(e={x:{},y:{}},_D(r)&&_l(uu("exception").no_maxextent),xD(r))if(/^\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?$/.test(r)){var n=r.split(/[,;]+/);4===n.length?(e.x.min=Number.parseFloat(n[0]),e.y.min=Number.parseFloat(n[1]),e.x.max=Number.parseFloat(n[2]),e.y.max=Number.parseFloat(n[3])):_l(uu("exception").invalid_maxextent_param)}else _l(uu("exception").invalid_maxextent_param);else mD(r)?4===r.length?(xD(r[0])&&(r[0]=Number.parseFloat(r[0])),xD(r[1])&&(r[1]=Number.parseFloat(r[1])),xD(r[2])&&(r[2]=Number.parseFloat(r[2])),xD(r[3])&&(r[3]=Number.parseFloat(r[3])),e.x.min=r[0],e.y.min=r[1],e.x.max=r[2],e.y.max=r[3]):_l(uu("exception").invalid_maxextent_param):bD(r)?(yD(r.left)?yD(r.x.min)?_l(uu("exception").invalid_maxextent_param):(xD(r.x.min)&&(r.x.min=Number.parseFloat(r.x.min)),e.x.min=r.x.min):(xD(r.left)&&(r.left=Number.parseFloat(r.left)),e.x.min=r.left),yD(r.bottom)?yD(r.y.min)?_l(uu("exception").invalid_maxextent_param):(xD(r.y.min)&&(r.y.min=Number.parseFloat(r.y.min)),e.y.min=r.y.min):(xD(r.bottom)&&(r.bottom=Number.parseFloat(r.bottom)),e.y.min=r.bottom),yD(r.right)?yD(r.x.max)?_l(uu("exception").invalid_maxextent_param):(xD(r.x.max)&&(r.x.max=Number.parseFloat(r.x.max)),e.x.max=r.x.max):(xD(r.right)&&(r.right=Number.parseFloat(r.right)),e.x.max=r.right),yD(r.top)?yD(r.y.max)?_l(uu("exception").invalid_maxextent_param):(xD(r.y.max)&&(r.y.max=Number.parseFloat(r.y.max)),e.y.max=r.y.max):(xD(r.top)&&(r.top=Number.parseFloat(r.top)),e.y.max=r.top)):_l("El parámetro no es de un tipo soportado: ".concat(pc(r)));(Number.isNaN(e.x.min)||Number.isNaN(e.y.min)||Number.isNaN(e.x.max)||Number.isNaN(e.y.max))&&_l(uu("exception").invalid_maxextent_param)}return e},yc=function(t){var e={code:null,units:null};if(_D(t)&&_l(uu("exception").no_projection),xD(t))if(/^(EPSG:)?\d+\*((d(egrees)?)|(m(eters)?))$/i.test(t)){var r=t.split(/\*/);e.code=r[0],e.units=OD(r[1].substring(0,1))}else _l("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ));else bD(t)?yD(t.code)||yD(t.units)?_l("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ)):(e.code=t.code,e.units=OD(t.units.substring(0,1))):_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return"m"!==e.units&&"d"!==e.units&&_l('La unidad "'.concat(t.units,'" del parámetro projection no es válida. Las disponibles son: "m" o "d"')),e},mc=function(t){var e=t,r=[];_D(e)&&_l(uu("exception").no_resolutions),xD(e)&&(/^\d+(\.\d+)?([,;]\d+(\.\d+)?)*$/.test(e)?e=e.split(/[,;]+/):_l(uu("exception").invalid_resolutions_param)),mD(e)?r=e.map((function(t){return xD(t)?Number.parseFloat(t):t})):_l("El parámetro no es de un tipo soportado: ".concat(pc(e)));for(var n=!0,i=0,o=r.length;i<o&&n;i+=1)n=!Number.isNaN(r[i]);return n||_l(uu("exception").invalid_resolutions_param),r},_c=function(t){var e,r=t;return _D(r)&&_l(uu("exception").no_zoom),xD(r)?e=Number.parseInt(r,10):"number"==typeof r?e=r:_l("El parámetro no es de un tipo soportado: ".concat(pc(r))),Number.isNaN(e)&&_l(uu("exception").invalid_zoom_param),e},vc=function(t){var e=[];_D(t)&&_l(uu("exception").no_param);var r=t;return mD(r)||(r=[r]),e=r.map((function(e){var r,n,i={};return i.type=Au,i.name=(xD(r=e)?/^WFS(T)?\*.+/i.test(r)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(r)||/^[^*]*\*[^*]+:[^*]+/.test(r)?n=r.split(/\*/)[3].trim().split(":")[1]:/^WFS(T)?\*[^*]*\*[^*]+[^*]+/i.test(r)&&(n=r.split(/\*/)[3].trim()):/^[^*]*\*[^*]+:[^*]+/.test(r)&&(n=r.split(/\*/)[1].trim().split(":")[1]):bD(r)&&!_D(r.name)?n=r.name.trim():bD(r)||_l("El parámetro no es de un tipo soportado: ".concat(pc(r))),(wD(n)||/^(true|false)$/i.test(n))&&(n=null),n),i.url=function(t){var e;if(xD(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else bD(t)?e=t.url:_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return e}(e),i.namespace=function(t){var e;return xD(t)?/^WFS(T)?\*.+/i.test(t)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim().split(":")[0]):/^[^*]*\*[^*]+:[^*]+/.test(t)&&(e=t.split(/\*/)[1].trim().split(":")[0]):bD(t)&&!_D(t.namespace)?e=t.namespace.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),(wD(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.legend=function(t){var e;return xD(t)?/^WFS(T)?\*[^*]/i.test(t)?e=t.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(t)&&(e=t.split(/\*/)[2].trim()):bD(t)&&!_D(t.legend)?e=t.legend.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),(wD(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.cql=function(t){var e;return xD(t)?(/^[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]+/i.test(t)&&(e=t.split(/\*/)[3].trim()),/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[6].trim())):bD(t)&&!_D(t.cql)||!_D(t.ecql)?e=t.cql?t.cql.trim():t.ecql.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),(/^(true|false)$/i.test(e)||/^\d\.\d\.\d$/.test(e))&&(e=void 0),e}(e),i.geometry=function(t){var e;return xD(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+/i.test(t)||/^WFS(T)?\*[^*]*\*[^*][^*]+\*[^*]+/i.test(t))&&(e=t.split(/\*/)[4].trim()):bD(t)&&!_D(t.geometry)?e=t.geometry.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),(wD(e)||/^(true|false)$/i.test(e))&&(e=null),e}(e),i.ids=function(t){var e;return xD(t)?/^WFS(T)?\*.+/i.test(t)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*(.-?)+$/i.test(t)||/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]+\*(.-?)+$/i.test(t))&&(e=t.split(/\*/)[5].trim().split("-")):bD(t)&&!_D(t.ids)?e=t.ids:bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),wD(e)&&(e=null),_D(e)||mD(e)||(e=[e]),e}(e),i.version=function(t){var e;return xD(t)?/(\d\.\d\.\d)$/.test(t)&&(e=t.match(/\d\.\d\.\d$/)[0]):bD(t)?e=t.version:_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),e}(e),i.style=function(t){var e;return xD(t)?/^WFS(T)?\*.+/i.test(t)&&/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*\*[^*]*/i.test(t)&&(e=t.split(/\*/)[7].trim()):bD(t)&&!_D(t.style)?e=t.style:bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),e}(e),i.options=function(t){var e;return xD(t)||(bD(t)?e=t.options:_l("El parámetro no es de un tipo soportado: ".concat(pc(t)))),e}(e),i.outputFormat=t.outputFormat,i})),mD(t)||(e=e[0]),e},bc=function(t){var e=[];_D(t)&&_l("No ha especificado ningún parámetro");var r=t;return mD(r)||(r=[r]),e=r.map((function(t){var e={};return e.type=Uu,e.name=function(t){var e;if(xD(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)/i);r&&r.length>2&&(e=r[2])}}else bD(t)&&!_D(t.name)?e=t.name.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return e}(t),e.url=function(t){var e;if(xD(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+).*/i);r&&r.length>1&&(e=r[1])}}else bD(t)&&!_D(t.url)?e=t.url.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return e}(t),e.mode=function(t){var e;if(xD(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)\*([^*]+)/i);r&&r.length>3&&(e=r[3])}}else bD(t)&&!_D(t.mode)?e=t.mode.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return e}(t),e.projection=function(t){var e;if(xD(t)){if(/^MVT\*.+/i.test(t)){var r=t.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)\*([^*]+)\*([^*]+)/i);r&&r.length>4&&(e=r[4])}}else bD(t)&&!_D(t.proj)?e=t.proj.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return e}(t),e})),mD(t)||(e=e[0]),e},xc=function(t){var e=[];_D(t)&&_l(uu("exception").no_param);var r=t;return mD(r)||(r=[r]),e=r.map((function(t){var e,r,n={};return n.type=ku,n.name=(xD(e=t)?/^WMTS\*.+/i.test(e)?/^WMTS\*[^*]+\*[^*]+/i.test(e)&&(r=e.split(/\*/)[2].trim()):/^[^*]*\*[^*]+/.test(e)&&(r=e.split(/\*/)[1].trim()):bD(e)&&!_D(e.name)?r=e.name.trim():bD(e)||_l("El parámetro no es de un tipo soportado: ".concat(pc(e))),(wD(r)||/^(true|false)$/i.test(r))&&(r=null),r),n.url=function(t){var e;if(xD(t)){var r=t.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(e=r[2])}else bD(t)?e=t.url:_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return e}(t),n.matrixSet=function(t){var e,r;return xD(t)?/^WMTS\*[^*]+\*[^*]+(\*[^*]])*/i.test(t)?e=(r=t.split(/\*/))[3]?r[3].trim():null:/^[^*]+\*[^*]+\*[^*]+/.test(t)&&(e=(r=t.split(/\*/))[2].trim()):bD(t)&&!_D(t.matrixSet)?e=t.matrixSet.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),(wD(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n.legend=function(t){var e;return xD(t)?/^WMTS\*.+/i.test(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]+/i.test(t)&&(e=t.split(/\*/)[4].trim()):/^[^*]+\*[^*]+\*[^*]*\*[^*]+/.test(t)&&(e=t.split(/\*/)[3].trim()):bD(t)&&!_D(t.legend)?e=t.legend.trim():bD(t)||_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),(wD(e)||/^(true|false)$/i.test(e))&&(e=null),e}(t),n.options=function(t){var e;return xD(t)||(bD(t)?e=t.options:_l("El parámetro no es de un tipo soportado: ".concat(pc(t)))),e}(t),n.transparent=function(t){var e;return xD(t)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)/i.test(t)?e=t.split(/\*/)[5].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(t)?(t.split(/\*/),e=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(t)?e=t.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(t)&&(e=t.split(/\*/)[2].trim()):bD(t)?e=OD(t.transparent):_l("El parámetro no es de un tipo soportado: ".concat(pc(t))),_D(e)||(e=/^1|(true)$/i.test(e)),e}(t),n})),mD(t)||(e=e[0]),e},wc={kml:$u,mapbox:rc,osm:ac,wfs:vc,wmc:fc,wms:Hu,wmts:xc,geojson:cc,mvt:bc},Ec=function(t,e){var r=[];_D(t)&&_l(uu("exception").no_param);var n=t;return mD(n)||(n=[n]),r=n.map((function(t){var r=null;if(bD(t)&&t instanceof Lc)r=t;else{var n=function(t,e){var r;if(xD(t))if(/^\s*osm\s*$/i.test(t))r=ju;else if(/^\s*mapbox\*.+$/i.test(t))r=Fu;else{var n=t.match(/^(\w+)\*.+$/);n&&n.length>1&&(r=zu(n[1]),dD(r)&&_l("No se reconoce el tipo de capa ".concat(n[1]))),dD(r)&&!_D(e)?r=e:dD(r)&&_l("No se reconoce el tipo de capa ".concat(r))}else bD(t)?_D(t.type)||(r=zu(t.type),dD(r)&&_l("No se reconoce el tipo de capa ".concat(r))):_l("El parámetro no es de un tipo soportado: ".concat(pc(t)));return _D(r)||_D(e)||r===e||_l("El tipo de la capa (".concat(r).concat(") no era el esperado (").concat(e).concat(")")),_D(r)&&!_D(e)&&(r=e),r}(t,e);n=OD(n),r=vD(wc[n])?wc[n](t):t}return r})),mD(t)||(r=r[0]),r};function Oc(t){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ic(t,e){return(Ic=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pc(t);if(e){var i=Pc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Tc(this,r)}}function Tc(t,e){return!e||"object"!==Oc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pc(t){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ic(t,e)}(o,t);var e,r,n,i=Cc(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=i.call(this,e);var n=Ec(t);return r.type=n.type,r.url=n.url,r.name=n.name,r.transparent=n.transparent,r.maxExtent_=null,r.zindex_=null,r.minScale_=t.minScale,r.maxScale_=t.maxScale,r.map_=null,r.userMaxExtent=n.maxExtent,r.legend=n.legend,r.layerGroup_=null,r}return e=o,(r=[{key:"getLegend",value:function(){return this.getImpl().legend}},{key:"setLegend",value:function(t){this.legend=t,this.getImpl().legend=t}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return _D(t)&&(t=this.map_.userMaxExtent,_D(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setMaxExtent",value:function(t){this.userMaxExtent=t,!mD(t)&&bD(t)&&(this.userMaxExtent=[t.x.min,t.y.min,t.x.max,t.y.max]),vD(this.getImpl().setMaxExtent)&&(_D(t)?this.resetMaxExtent():this.getImpl().setMaxExtent(t))}},{key:"resetMaxExtent",value:function(){var t=this;this.userMaxExtent=null,this.calculateMaxExtent().then((function(e){vD(t.getImpl().setMaxExtent)&&t.getImpl().setMaxExtent(e)}))}},{key:"setMap",value:function(t){this.map_=t}},{key:"getLayerGroup",value:function(){return this.layerGroup_}},{key:"setLayerGroup",value:function(t){this.layerGroup_=t}},{key:"isVisible",value:function(){return dD(this.getImpl().isVisible)&&_l(uu("exception").isvisible_method),this.getImpl().isVisible()}},{key:"isQueryable",value:function(){return dD(this.getImpl().isQueryable)&&_l(uu("exception").isqueryable_method),this.getImpl().isQueryable()}},{key:"setVisible",value:function(t){var e=t;_D(e)&&_l(uu("exception").visibility_param),xD(e)||gD(e)||_l(uu("exception").visibility_param),dD(this.getImpl().setVisible)&&_l(uu("exception").setvisible_method),e=/^1|(true)$/i.test(e),this.getImpl().setVisible(e)}},{key:"inRange",value:function(){return dD(this.getImpl().inRange)&&_l(uu("exception").inrage_method),this.getImpl().inRange()}},{key:"getLegendURL",value:function(){return this.getImpl().getLegendURL()}},{key:"setLegendURL",value:function(t){var e=t;_D(e)&&(e=FD([M.config.THEME_URL,o.LEGEND_DEFAULT])),this.getImpl().setLegendURL(e)}},{key:"getZIndex",value:function(){return this.zindex_}},{key:"setZIndex",value:function(t){this.zindex_=t,this.getImpl().setZIndex(t)}},{key:"getMinScale",value:function(){return this.minScale_}},{key:"setMinScale",value:function(t){this.minScale_=t,this.getImpl().setMinScale(t)}},{key:"getMaxScale",value:function(){return this.maxScale_}},{key:"setMaxScale",value:function(t){this.maxScale_=t,this.getImpl().setMaxScale(t)}},{key:"getOpacity",value:function(){return this.getImpl().getOpacity()}},{key:"setOpacity",value:function(t){this.getImpl().setOpacity(t)}},{key:"refresh",value:function(){!dD(this.getImpl().refresh)&&vD(this.getImpl().refresh)&&this.getImpl().refresh()}},{key:"generateName_",value:function(){this.name=CD("layer_","_".concat(this.type))}},{key:"url",get:function(){return this.getImpl().url},set:function(t){this.getImpl().url=t}},{key:"name",get:function(){return this.getImpl().name},set:function(t){this.getImpl().name=t}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){_D(t)?this.getImpl().transparent=!0:xD(t)?this.getImpl().transparent="true"===OD(t):this.getImpl().transparent=t}},{key:"displayInLayerSwitcher",get:function(){return this.getImpl().displayInLayerSwitcher},set:function(t){_D(t)?this.getImpl().displayInLayerSwitcher=!0:xD(t)?this.getImpl().displayInLayerSwitcher="true"===OD(t):this.getImpl().displayInLayerSwitcher=t}}])&&Sc(e.prototype,r),n&&Sc(e,n),o}(Il);Rc.LEGEND_DEFAULT="/img/legend-default.png",Rc.LEGEND_ERROR="/img/legend-error.png";var Lc=Rc,Mc=r(34),Nc=r(60),Ac=r(37),kc="Geometry",jc="LineString",Fc="Polygon",Dc="MultiPoint",Gc="MultiLineString",Uc="MultiPolygon",Bc="LinearRing",zc="Point",Vc="GeometryCollection",qc="Circle",Yc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var Wc=function(t){function e(e){var r=t.call(this)||this;if(r.on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var i=e;r.setProperties(i)}return r}return Yc(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(Ci.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(Ci.a)(t,Di.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(Object(Ui.a)("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(ei.a),Xc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hc=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return Xc(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Object(h.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<Object(mt.f)(this.getExtent(),t,e))return n;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var l=Object(mo.j)(t,e,i[a],i[a+1]);if(l<n){n=l;for(var u=0;u<o;++u)r[u]=i[a+u];r.length=o}}return n},e.prototype.getCoordinates=function(){return $o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new aa(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var a=new aa(t.slice(i,i+r),e);n.push(a)}return n},e.prototype.getType=function(){return fo.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,i=e.length;n<i;n+=r){var o=e[n],a=e[n+1];if(Object(mt.i)(t,o,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Do);function Zc(t,e,r,n,i,o,a){var s,l,u=(r-e)/n;if(1===u)s=e;else if(2===u)s=e,l=i;else if(0!==u){for(var c=t[e],f=t[e+1],p=0,d=[0],g=e+n;g<r;g+=n){var y=t[g],m=t[g+1];p+=Math.sqrt((y-c)*(y-c)+(m-f)*(m-f)),d.push(p),c=y,f=m}var _=i*p,v=Object(h.a)(d,_);v<0?(l=(_-d[-v-2])/(d[-v-1]-d[-v-2]),s=e+(-v-2)*n):s=e+v*n}var b=a>1?a:2,x=o||new Array(b);for(g=0;g<b;++g)x[g]=void 0===s?NaN:void 0===l?t[s+g]:Object(mo.e)(t[s+g],t[s+n+g],l);return x}function Kc(t,e,r,n,i,o){if(r==e)return null;var a;if(i<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=i,a):null;if(t[r-1]<i)return o?((a=t.slice(r-n,r))[n-1]=i,a):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,l=r/n;s<l;){var u=s+l>>1;i<t[(u+1)*n-1]?l=u:s=u+1}var c=t[s*n-1];if(i==c)return t.slice((s-1)*n,(s-1)*n+n);var h=(i-c)/(t[(s+1)*n-1]-c);a=[];for(var f=0;f<n-1;++f)a.push(Object(mo.e)(t[(s-1)*n+f],t[s*n+f],h));return a.push(i),a}function Jc(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var l=t[s],u=t[s+1];a+=Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),i=l,o=u}return a}var $c=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qc=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return $c(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(h.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<Object(mt.f)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Uo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return fa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=To&&this.layout!=Po)return null;var r=void 0!==e&&e;return Kc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return $o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Zc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return Jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Io)},e.prototype.getType=function(){return fo.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return pa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Do),th=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eh=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,r);else if(void 0!==r&&n)i.setFlatCoordinates(r,e),i.ends_=n;else{for(var o=i.getLayout(),a=e,s=[],l=[],u=0,c=a.length;u<c;++u){var f=a[u];0===u&&(o=f.getLayout()),Object(h.c)(s,f.getFlatCoordinates()),l.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=l}return i}return th(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Object(h.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<Object(mt.f)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vo(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=To&&this.layout!=Po||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,i=void 0!==r&&r;return function(t,e,r,n,i,o,a){if(a)return Kc(t,e,r[r.length-1],n,i,o);var s;if(i<t[n-1])return o?((s=t.slice(0,n))[n-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-n))[n-1]=i,s):null;for(var l=0,u=r.length;l<u;++l){var c=r[l];if(e!=c){if(i<t[e+n-1])return null;if(i<=t[c-1])return Kc(t,e,c,n,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,i)},e.prototype.getCoordinates=function(){return Qo(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Qc(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],l=new Qc(t.slice(i,s),r);n.push(l),i=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o],l=Zc(e,r,s,i,.5);Object(h.c)(t,l),r=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=Ho(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,Io,n)},e.prototype.getType=function(){return fo.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){if(pa(t,e,r[o],n,i))return!0;e=r[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Wo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Do);function rh(t,e,r,n){for(var i=[],o=Object(mt.k)(),a=0,s=r.length;a<s;++a){var l=r[a];o=Object(mt.o)(t,e,l[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}var nh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ih=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],l=[],u=0,c=a.length;u<c;++u){var f=a[u];0===u&&(o=f.getLayout());for(var p=s.length,d=f.getEnds(),g=0,y=d.length;g<y;++g)d[g]+=p;Object(h.c)(s,f.getFlatCoordinates()),l.push(d)}r=o,e=s,n=l}return void 0!==r&&n?(i.setFlatCoordinates(r,e),i.endss_=n):i.setCoordinates(e,r),i}return nh(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;Object(h.c)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();var i=new e(this.flatCoordinates.slice(),this.layout,r);return i.applyProperties(this),i},e.prototype.closestPointXY=function(t,e,r,n){return n<Object(mt.f)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Bo(t,e,s,n,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,i,o,a,s,l,u,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];u=Vo(t,e,d,n,i,o,a,s,l,u,h),e=d[d.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return function(t,e,r,n,i,o){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var l=r[a];if(ua(t,e,l,n,i,o))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=ra(t,e,s,n),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?va(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,ta(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=rh(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ha(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Hc(this.getFlatInteriorPoints().slice(),To)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!ma(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=va(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var l=0,u=r.length;l<u;++l){var c=r[l],h=[];a=Jo(t,e,c,n,i,o,a,h),s.push(h),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,Io,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new Oa(this.flatCoordinates.slice(e,i),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),l=s[s.length-1];if(0!==i)for(var u=0,c=s.length;u<c;++u)s[u]-=i;var h=new Oa(e.slice(i,l),t,s);n.push(h),i=l}return n},e.prototype.getType=function(){return fo.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(da(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=function(t,e,r,n,i){for(var o=i||[],a=0,s=0,l=r.length;s<l;++s){var u=Wo(t,e,r[s],n,o[a]);o[a++]=u,e=u[u.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(Do),oh=Object(Un.d)(),ah=function(){function t(t,e,r,n,i){this.styleFunction,this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===fo.a.POINT?Object(mt.n)(this.flatCoordinates_):Object(mt.o)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Object(mt.x)(this.getExtent());this.flatInteriorPoints_=ca(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=rh(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=ha(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Zc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=Zc(t,e,o,2,.5);Object(h.c)(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t){var e=(t=Object(u.o)(t)).getExtent(),r=t.getWorldExtent();if(e&&r){var n=Object(mt.A)(r)/Object(mt.A)(e);Object(Un.b)(oh,r[0],r[3],n,-n,0,0,0),Ro(this.flatCoordinates_,0,this.flatCoordinates_.length,2,oh,this.flatCoordinates_)}},t.prototype.getEnds=function(){return this.ends_},t}();function sh(t){var e=t.getType();switch(e){case fo.a.POINT:return new aa(t.getFlatCoordinates());case fo.a.MULTI_POINT:return new Hc(t.getFlatCoordinates(),Io);case fo.a.LINE_STRING:return new Qc(t.getFlatCoordinates(),Io);case fo.a.MULTI_LINE_STRING:return new eh(t.getFlatCoordinates(),Io,t.getEnds());case fo.a.POLYGON:var r=t.getFlatCoordinates(),n=t.getEnds(),i=ba(r,n);return i.length>1?new ih(r,Io,i):new Oa(r,Io,n);default:throw new Error("Invalid geometry type:"+e)}}ah.prototype.getEndss=ah.prototype.getEnds,ah.prototype.getFlatCoordinates=ah.prototype.getOrientedFlatCoordinates;var lh=ah,uh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ch(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var hh=function(t){function e(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return uh(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Ci.c),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Object(Ci.a)(this.geometries_[t],Di.a.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<Object(mt.f)(this.getExtent(),t,e))return n;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(t,e,r,n);return n},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(mt.m)(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)Object(mt.q)(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return ch(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,i=!1,o=0,a=n.length;o<a;++o){var s=n[o],l=s.getSimplifiedGeometry(t);r.push(l),l!==s&&(i=!0)}if(i){var u=new e(null);return u.setGeometriesArray(r),u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return fo.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var n=r;n||(n=Object(mt.x)(this.getExtent()));for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(ch(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(ko),fh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ph=function(t){function e(e,r,n){var i=t.call(this)||this;if(void 0!==n&&void 0===r)i.setFlatCoordinates(n,e);else{var o=r||0;i.setCenterAndRadius(e,o,n)}return i}return fh(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var l=0;l<this.stride;++l)r[l]=i[l];else{var u=this.getRadius()/Math.sqrt(s);r[0]=i[0]+u*o,r[1]=i[1]+u*a;for(l=2;l<this.stride;++l)r[l]=i[l]}return r.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return Object(mt.l)(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return fo.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(mt.G)(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||(t[1]<=r[1]&&t[3]>=r[1]||Object(mt.t)(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=qo(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Lo(r,0,r.length,n,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Mo(r,0,r.length,n,t,e,r)),this.changed()},e}(Do);ph.prototype.transform;var dh=ph;function gh(t){return function(t){if(Array.isArray(t))return yh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yh(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_h(Object(r),!0).forEach((function(e){bh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xh=function(t,e){var r=Object(u.q)(e,"EPSG:4326"),n=[],i={};return t.forEach((function(e){var o=[];if(Array.isArray(e.geometry.coordinates[0])&&t.length>1)e.geometry.coordinates.forEach((function(t){if(!Number.isFinite(t[0])&&Array.isArray(t))o.push(t.map((function(t){var e=[];return Number.isFinite(t[0])?e.push(r(t)):t.forEach((function(t){e.push(r(t))})),e}))),i=vh(vh({},e),{},{geometry:{type:e.geometry.type,coordinates:o}});else{var n=r(t);o.push(n),i=vh(vh({},e),{},{geometry:{type:e.geometry.type,coordinates:o}})}})),n.push(i);else if(3===e.geometry.coordinates.length)e.geometry.coordinates.pop(),i=vh(vh({},e),{},{geometry:{type:e.geometry.type,coordinates:r(e.geometry.coordinates)}}),n.push(i);else if(1===t.length)if(e.geometry.coordinates[0].length>2){var a=e.geometry.coordinates[0].map((function(t){return r(t)}));i=vh(vh({},e),{},{geometry:{type:e.geometry.type,coordinates:a}}),n.push(i)}else i=vh(vh({},e),{},{geometry:{type:e.geometry.type,coordinates:r(e.geometry.coordinates[0])}}),n.push(i);else if(Number.isFinite(e.geometry.coordinates[0])){var s=r(e.geometry.coordinates);i=vh(vh({},e),{},{geometry:{type:e.geometry.type,coordinates:s}}),n.push(i)}})),n},wh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateResolutions",value:function(t,e,r,n){var i,o,a,s=[];_D(e)&&(i=t.getExtent());var l=Object(mt.F)(i)/256;_D(r)&&(o=0),_D(n)&&(a=28);for(var u=a-o,c=0;c<u;c+=1)s[c]=l/Math.pow(2,c);return s}},{key:"addOverlayImage",value:function(t,e){e.getMapImpl().updateSize();var r=e.getMapImpl().getSize(),n=t.screenXY,i=t.screenXUnits,o=t.screenYUnits,a=t.overlayXY,s=t.overlayXUnits,l=t.overlayYUnits,u=t.size,c=t.src,h=document.createElement("img");h.src=c,h.style.width="".concat(u[0],"px"),h.style.height="".concat(u[1],"px");var f=a[0];"fraction"===s&&(f*=u[0]);var p=a[1];"fraction"===l&&(p=u[1]-p*u[1]),h.style.position="absolute";var d=n[0];"fraction"===i&&(d=d*r[0]-f);var g=n[1];return"fraction"===o&&(g=r[1]-g*r[1]-p),h.style.top="".concat(g,"px"),h.style.left="".concat(d,"px"),e.getMapImpl().getOverlayContainerStopEvent().appendChild(h),h}},{key:"getExtentHeight",value:function(t){return t[3]-t[1]}},{key:"getExtentWidth",value:function(t){return t[2]-t[0]}},{key:"getCentroid",value:function(t){return _D(t)?null:t instanceof lh?t:Object(mt.x)(t.getExtent())}},{key:"getFeaturesExtent",value:function(t,e){var r=t.map((function(t){return t instanceof mG?t.getImpl().getOLFeature():t})),n=r.map((function(t){return t.getGeometry().getExtent().slice(0)}));if(1===n.length){var i=r[0].getGeometry();if("Point"===i.getType()){var o=function(t,e){return e/Object(u.o)(t).getMetersPerUnit()}(e,1e3),a=i.getCoordinates()[0],s=i.getCoordinates()[1];n=[[a-o,s-o,a+o,s+o]]}}return 0===n.length?null:n.reduce((function(t,e){return Object(mt.q)(t,e)}))}},{key:"getCentroidCoordinate",value:function(e){var r,n,i,o,a,s;return e.getType()===zc?r=e.getCoordinates():e.getType()===jc||e.getType()===Bc?r=(n=e.getCoordinates())[i=Math.floor(n.length/2)]:e.getType()===Fc?r=t.getCentroidCoordinate(e.getInteriorPoint()):e.getType()===Dc?(o=e.getPoints(),i=Math.floor(o.length/2),r=t.getCentroidCoordinate(o[i])):e.getType()===Gc?(a=e.getLineStrings(),i=Math.floor(a.length/2),r=t.getCentroidCoordinate(a[i])):e.getType()===Uc?(o=e.getInteriorPoints(),r=t.getCentroidCoordinate(o)):e.getType()===qc?r=e.getCenter():e.getType()===Vc&&(s=e.getGeometries(),i=Math.floor(s.length/2),r=t.getCentroidCoordinate(s[i])),r}},{key:"transformExtent",value:function(t,e,r){var n=xD(e)?Object(u.o)(e):e,i=xD(r)?Object(u.o)(r):r,o=n.getExtent();return t.every((function(t,e){return e<2?t<=o[e]:t>=o[e]}))?i.getExtent():Object(u.A)(t,n,i)}},{key:"olRenderFeature2olFeature",value:function(t,e,r){var n;if(!_D(t)){var i,o=t.getId(),a=t.getProperties();if(_D(e)&&_D(e))i=this.getGeometryFromRenderFeature(t.getGeometry());else{var s=e.getExtent(),l=e.getWorldExtent();if(!_D(s)&&!_D(l)){var u=this.cloneOLRenderFeature(t);u.transform(e,r),i=this.getGeometryFromRenderFeature(u.getGeometry())}}n=new Wc,_D(o)?n.setId(CD("mapea_feature_")):n.setId(o),n.setProperties(a,!0),n.setGeometry(i)}return n}},{key:"cloneOLRenderFeature",value:function(t){var e=t.getType(),r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getProperties(),o=t.getId(),a=gh(r),s=Object.assign(i),l=gh(n);return new lh(e,a,l,s,o)}},{key:"getGeometryFromRenderFeature",value:function(t){var e,r=t.getFlatCoordinates(),n=t.getEnds(),i=t.getEndss();switch(t.getType()){case fo.a.POINT:e=new aa(r);break;case fo.a.LINE_STRING:e=new Qc(r);break;case fo.a.LINEAR_RING:e=new ia(r);break;case fo.a.POLYGON:e=new Oa(r);break;case fo.a.MULTI_POINT:e=new Hc(r);break;case fo.a.MULTI_LINE_STRING:e=new eh(r,void 0,n);break;case fo.a.MULTI_POLYGON:e=new ih(r,void 0,i);break;case fo.a.GEOMETRY_COLLECTION:var o=t.getGeometries();e=new hh(o);break;case fo.a.CIRCLE:var a=t.getFlatInteriorPoint();e=new dh(a);break;default:e=null}return e}},{key:"getWMTSScale",value:function(t,e){var r=t.getProjection().code,n=Object(u.o)(r).getMetersPerUnit(),i=t.getMapImpl().getSize(),o=i[0],a=t.getMapImpl().getView().calculateExtent(i),s=n*(a[2]-a[0])/o*1e3/.28;return 1==!e&&(s=s>=1e3&&s<=95e4?1e3*Math.round(s/1e3):s>=95e4?1e6*Math.round(s/1e6):Math.round(s)),Math.trunc(s)}}],(r=null)&&mh(e.prototype,r),n&&mh(e,n),t}();function Eh(t){return(Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ih(t,e){return(Ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ch(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ph(t);if(e){var i=Ph(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Th(this,r)}}function Th(t,e){return!e||"object"!==Eh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ph(t){return(Ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ih(t,e)}(o,t);var e,r,n,i=Ch(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oh(this,o),(t=i.call(this,e)).vendorOptions_=r,t.map=null,t.ol3Layer=null,t.options=e,t.visibility=!1!==t.options.visibility,t.displayInLayerSwitcher=!1!==t.options.displayInLayerSwitcher,t.zIndex_=null,t.minScale_=null,t.maxScale_=null,t.opacity_=t.options.opacity||1,t.legendUrl_=FD([M.config.THEME_URL,Lc.LEGEND_DEFAULT]),t}return e=o,(r=[{key:"isVisible",value:function(){return _D(this.ol3Layer)?this.visibility:this.ol3Layer.getVisible()}},{key:"isQueryable",value:function(){return!1}},{key:"inRange",value:function(){var t=!1;if(!_D(this.ol3Layer)){var e=this.map.getMapImpl().getView().getResolution(),r=this.ol3Layer.getMaxResolution();t=e>=this.ol3Layer.getMinResolution()&&e<=r}return t}},{key:"setVisible",value:function(t){this.visibility=t,_D(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"getZIndex",value:function(){return _D(this.getOLLayer())||(this.zIndex_=this.getOLLayer().getZIndex()),this.zIndex_}},{key:"setZIndex",value:function(t){this.zIndex_=t,_D(this.getOLLayer())||this.getOLLayer().setZIndex(t)}},{key:"getMinScale",value:function(){var t=this.map.getProjection().units;return _D(this.getOLLayer())||_D(t)||(this.minScale_=ND(this.getOLLayer().getMinResolution(),t)),this.minScale_}},{key:"setMinScale",value:function(t){this.minScale_=t;var e=this.map.getProjection().units,r=LD(t,e);_D(this.getOLLayer())||_D(r)||_D(e)||this.getOLLayer().setMinResolution(r)}},{key:"getMaxScale",value:function(){var t=this.map.getProjection().units;return _D(this.getOLLayer())||_D(t)||(this.maxScale_=ND(this.getOLLayer().getMaxResolution(),t)),this.maxScale_}},{key:"setMaxScale",value:function(t){this.maxScale_=t;var e=this.map.getProjection().units,r=LD(t,e);_D(this.getOLLayer())||_D(r)||_D(e)||this.getOLLayer().setMaxResolution(r)}},{key:"getOpacity",value:function(){return _D(this.getOLLayer())||(this.opacity_=this.getOLLayer().getOpacity()),this.opacity_}},{key:"setOpacity",value:function(t){this.opacity_=t,_D(this.getOLLayer())||this.getOLLayer().setOpacity(t)}},{key:"getOL3Layer",value:function(){return this.ol3Layer}},{key:"getOLLayer",value:function(){return this.ol3Layer}},{key:"setOL3Layer",value:function(t){var e=this.map.getMapImpl();return e.removeLayer(this.ol3Layer),this.ol3Layer=t,e.addLayer(t),this}},{key:"setOLLayer",value:function(t){var e=this.map.getMapImpl();return e.removeLayer(this.ol3Layer),this.ol3Layer=t,e.addLayer(t),this}},{key:"getMap",value:function(){return this.map}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"getNumZoomLevels",value:function(){return M.config.ZOOM_LEVELS}},{key:"unselectFeatures",value:function(t,e,r){}},{key:"selectFeatures",value:function(t,e,r){}}])&&Sh(e.prototype,r),n&&Sh(e,n),o}(il);function Lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Mh=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.capabilities_=e,this.projection_=n,this.serviceUrl_=r}var e,r,n;return e=t,(r=[{key:"getLayerExtent",value:function(t,e){var r=this.capabilities_.Capability.Layer,n=this.getExtentRecursive_(r,t,e);return this.transformExtent(n)}},{key:"getExtentRecursive_",value:function(t,e,r){var n,i=null;if(!_D(t))if(mD(t))for(n=0;n<t.length&&null===i;n+=1)i=this.getExtentRecursive_(t[n],e,r);else if(bD(t))if(_D(e)||t.Name===e){var o=r||this.projection_.code;if(_D(t.BoundingBox)){if(!_D(t.LatLonBoundingBox)){var a=t.LatLonBoundingBox[0];this.capabilitiesProj="EPSG:4326";var s=Object(u.o)("EPSG:4326"),l=Object(u.o)(this.projection_.code);i=wh.transformExtent(a.extent,s,l)}}else{var c=t.BoundingBox.find((function(t){return t.crs===o}));if(_D(c)){var h=t.BoundingBox[0];this.capabilitiesProj=h.crs;var f=Object(u.o)(h.crs),p=Object(u.o)(this.projection_.code);i=wh.transformExtent(h.extent,f,p)}else this.capabilitiesProj=c.crs,i=c.extent}}else dD(t.Layer)||(i=this.getExtentRecursive_(t.Layer,e,r));return i}},{key:"getLayers",value:function(){var t=this.capabilities_.Capability.Layer;return this.getLayersRecursive_(t)}},{key:"getLayersRecursive_",value:function(t){var e=this,r=[];return _D(t.Layer)?mD(t)?t.forEach((function(t){r=r.concat(e.getLayersRecursive_(t))})):r.push(new Ap({url:this.serviceUrl_,name:t.Name})):r=this.getLayersRecursive_(t.Layer),r}},{key:"transformExtent",value:function(t){var e=t;if("1.3.0"===this.capabilities_.version&&xD(this.capabilitiesProj)){var r=Object(u.o)(this.capabilitiesProj).getAxisOrientation();Array.isArray(e)&&"ne"===r.substr(0,2)&&(e=[t[1],t[0],t[3],t[2]])}return e}},{key:"capabilities",get:function(){return this.capabilities_}},{key:"projection",get:function(){return this.projection_}},{key:"serviceUrl",get:function(){return this.serviceUrl_}}])&&Lh(e.prototype,r),n&&Lh(e,n),t}(),Nh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ah=[null,"http://www.opengis.net/wms"],kh=T(Ah,{Service:w((function(t,e){return R({},Dh,t,e)})),Capability:w((function(t,e){return R({},jh,t,e)}))}),jh=T(Ah,{Request:w((function(t,e){return R({},Wh,t,e)})),Exception:w((function(t,e){return R([],zh,t,e)})),Layer:w((function(t,e){var r=R({},Vh,t,e);if(void 0===r.Layer)return Object.assign(r,Qh(t,e));return r}))}),Fh=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return Nh(e,t),e.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=R({version:this.version},kh,t,[]);return e||null},e}(F),Dh=T(Ah,{Name:w(X),Title:w(X),Abstract:w(X),KeywordList:w(nf),OnlineResource:w(D),ContactInformation:w((function(t,e){return R({},Gh,t,e)})),Fees:w(X),AccessConstraints:w(X),LayerLimit:w(Y),MaxWidth:w(Y),MaxHeight:w(Y)}),Gh=T(Ah,{ContactPersonPrimary:w((function(t,e){return R({},Uh,t,e)})),ContactPosition:w(X),ContactAddress:w((function(t,e){return R({},Bh,t,e)})),ContactVoiceTelephone:w(X),ContactFacsimileTelephone:w(X),ContactElectronicMailAddress:w(X)}),Uh=T(Ah,{ContactPerson:w(X),ContactOrganization:w(X)}),Bh=T(Ah,{AddressType:w(X),Address:w(X),City:w(X),StateOrProvince:w(X),PostCode:w(X),Country:w(X)}),zh=T(Ah,{Format:v(X)}),Vh=T(Ah,{Name:w(X),Title:w(X),Abstract:w(X),KeywordList:w(nf),CRS:x(X),EX_GeographicBoundingBox:w((function(t,e){var r=R({},Yh,t,e);if(!r)return;var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0===n||void 0===i||void 0===o||void 0===a)return;return[n,i,o,a]})),BoundingBox:x((function(t,e){var r=[q(t.getAttribute("minx")),q(t.getAttribute("miny")),q(t.getAttribute("maxx")),q(t.getAttribute("maxy"))],n=[q(t.getAttribute("resx")),q(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:n}})),Dimension:x((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:B(t.getAttribute("multipleValues")),nearestValue:B(t.getAttribute("nearestValue")),current:B(t.getAttribute("current")),values:X(t)}})),Attribution:w((function(t,e){return R({},qh,t,e)})),AuthorityURL:x((function(t,e){var r=tf(t,e);if(r)return r.name=t.getAttribute("name"),r;return})),Identifier:x(X),MetadataURL:x((function(t,e){var r=tf(t,e);if(r)return r.type=t.getAttribute("type"),r;return})),DataURL:x(tf),FeatureListURL:x(tf),Style:x((function(t,e){return R({},Kh,t,e)})),MinScaleDenominator:w(V),MaxScaleDenominator:w(V),Layer:x(Qh)}),qh=T(Ah,{Title:w(X),OnlineResource:w(D),LogoURL:w(rf)}),Yh=T(Ah,{westBoundLongitude:w(V),eastBoundLongitude:w(V),southBoundLatitude:w(V),northBoundLatitude:w(V)}),Wh=T(Ah,{GetCapabilities:w(ef),GetMap:w(ef),GetFeatureInfo:w(ef)}),Xh=T(Ah,{Format:x(X),DCPType:x((function(t,e){return R({},Hh,t,e)}))}),Hh=T(Ah,{HTTP:w((function(t,e){return R({},Zh,t,e)}))}),Zh=T(Ah,{Get:w(tf),Post:w(tf)}),Kh=T(Ah,{Name:w(X),Title:w(X),Abstract:w(X),LegendURL:x(rf),StyleSheetURL:w(tf),StyleURL:w(tf)}),Jh=T(Ah,{Format:w(X),OnlineResource:w(D)}),$h=T(Ah,{Keyword:v(X)});function Qh(t,e){var r=e[e.length-1],n=R({},Vh,t,e);if(n){var i=B(t.getAttribute("queryable"));void 0===i&&(i=r.queryable),n.queryable=void 0!==i&&i;var o=W(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded),n.cascaded=o;var a=B(t.getAttribute("opaque"));void 0===a&&(a=r.opaque),n.opaque=void 0!==a&&a;var s=B(t.getAttribute("noSubsets"));void 0===s&&(s=r.noSubsets),n.noSubsets=void 0!==s&&s;var l=q(t.getAttribute("fixedWidth"));l||(l=r.fixedWidth),n.fixedWidth=l;var u=q(t.getAttribute("fixedHeight"));u||(u=r.fixedHeight),n.fixedHeight=u;["Style","CRS","AuthorityURL"].forEach((function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in n)){var e=r[t];n[t]=e}})),n}}function tf(t,e){return R({},Jh,t,e)}function ef(t,e){return R({},Xh,t,e)}function rf(t,e){var r=tf(t,e);if(r){var n=[W(t.getAttribute("width")),W(t.getAttribute("height"))];return r.size=n,r}}function nf(t,e){return R([],$h,t,e)}var of=Fh;function af(t){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uf(t,e){return(uf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ff(t);if(e){var i=ff(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hf(this,r)}}function hf(t,e){return!e||"object"!==af(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ff(t){return(ff=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pf=["SRS","BoundingBox","ScaleHint","LatLonBoundingBox"],df=function(t,e){null!==t&&pf.forEach((function(r){var n,i;(n=e,i=r,Array.prototype.filter.call(n.children,(function(t){return t.tagName===i})).length>0)||Array.prototype.filter.call(t.children,(function(t){return t.tagName===r})).forEach((function(t){var r=t.cloneNode(!0);e.appendChild(r)}))}))},gf=function t(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n,a=e;if(!0===r&&(a=e.querySelector("Layer")),null!==a){df(i,a);var s=a.querySelector("Name").innerHTML,l=a.children;Array.prototype.forEach.call(l,(function(e){"Layer"===e.tagName&&(o=t(e,!1,o,a))})),o[s]=a}return o},yf=[function t(e,r){var n=e,i=r[n.Name];if(_D(i))mD(n.Layer)&&n.Layer.forEach((function(e){return t(e,r)}));else{var o=i.querySelector("SRS");if(null!==o){var a=o.innerHTML;n.SRS=[a]}}},function t(e,r){var n=r[e.Name];if(_D(n))mD(e.Layer)&&e.Layer.forEach((function(e){return t(e,r)}));else if(mD(e.BoundingBox)){var i=Array.prototype.filter.call(n.children,(function(t){return"Layer"===t.tagName})),o=Array.prototype.map.call(n.children,(function(t){return t}));0===(o=o.filter((function(t){return["BoundingBox"].includes(t.tagName)}))).length&&i.length>0?i.forEach((function(r){return t(e,(n={},i=e.Name,o=r,i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n));var n,i,o})):e.BoundingBox.forEach((function(t,e){var r=t;if(null===r.crs){var n=o[e];if(!_D(n)){var i=n.getAttribute("SRS");_D(i)||(r.crs=i)}}}))}},function t(e,r){var n=e,i=r[e.Name];if(_D(i))mD(e.Layer)&&e.Layer.forEach((function(e){return t(e,r)}));else{n.ScaleHint=[];var o=Array.prototype.map.call(i.children,(function(t){return t}));(o=o.filter((function(t){return"ScaleHint"===t.tagName}))).forEach((function(t){var e={minScale:parseFloat(t.getAttribute("min")),maxScale:parseFloat(t.getAttribute("max"))};n.ScaleHint.push(e)}))}},function t(e,r){var n=e,i=r[e.Name];if(_D(i))mD(n.Layer)&&n.Layer.forEach((function(e){return t(e,r)}));else{n.LatLonBoundingBox=[];var o=Array.prototype.map.call(i.children,(function(t){return t}));(o=o.filter((function(t){return"LatLonBoundingBox"===t.tagName}))).forEach((function(t){var e={crs:"EPSG:4326",extent:[parseFloat(t.getAttribute("minx")),parseFloat(t.getAttribute("miny")),parseFloat(t.getAttribute("maxx")),parseFloat(t.getAttribute("maxy"))]};n.LatLonBoundingBox.push(e)}))}},function(t,e){var r=t;_D(r.BoundingBox)&&!_D(r.LatLonBoundingBox)&&(r.BoundingBox=r.LatLonBoundingBox)},function(t,e){var r=t;_D(r.MaxScaleDenominator)&&!_D(r.ScaleHint)&&(r.MaxScaleDenominator=r.ScaleHint[0].maxScale)},function(t,e){var r=t;_D(r.MinScaleDenominator)&&!_D(r.ScaleHint)&&(r.MinScaleDenominator=r.ScaleHint[0].minScale)}],mf=function t(e,r){mD(e)?e.forEach((function(e){t(e,r)})):bD(e)&&(!function(t,e){yf.forEach((function(r){r(t,e)}))}(e,r),t(e.Layer,r))},_f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uf(t,e)}(o,t);var e,r,n,i=cf(o);function o(){return sf(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"customRead",value:function(t){var e=this.read(t),r=gf(t),n=e.Capability;return _D(n)||_D(n.Layer)||mf(n.Layer,r),e}}])&&lf(e.prototype,r),n&&lf(e,n),o}(of),vf="1.3.0",bf=r(55),xf=r(71),wf=r(70),Ef=r(9),Of="tileloadstart",Sf="tileloadend",If="tileloaderror",Cf=r(43),Tf=r(22);function Pf(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],r=e.getFullTileRange(t);return Object(Ui.a)(r,55),(r.getHeight()-a[2]-1).toString()})):void 0}}function Rf(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=Pf(t[i],e);return Lf(n)}function Lf(t){return 1===t.length?t[0]:function(e,r,n){if(e){var i=Object(Tf.f)(e),o=Object(mo.g)(i,t.length);return t[o](e,r,n)}}}function Mf(t,e,r){}function Nf(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}var Af=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kf=function(t){function e(r){var n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return Af(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,n=Object(Gn.c)(r),i=r.getState();i==Ef.a.LOADING?(this.tileLoadingKeys_[n]=!0,e=Of):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=i==Ef.a.ERROR?If:i==Ef.a.LOADED?Sf:void 0),null!=e&&this.dispatchEvent(new Cf.a(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=Nf(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Rf(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,r){},e.prototype.useTile=function(t,e,r){var n=Object(Tf.e)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Cf.b),jf=r(39),Ff=r(29),Df=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Gf(t,e){t.getImage().src=e}var Uf=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(n=e.interpolate),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Gf,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:n,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:bf.a,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return Df(e,t),e.prototype.canExpireCache=function(){if(!jf.a)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,r){if(jf.a){var n=this.getTileCacheForProjection(e);for(var i in this.tileCache.expireCache(this.tileCache==n?r:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[i];o.expireCache(o==n?r:{})}}else t.prototype.expireCache.call(this,e,r)},e.prototype.getGutterForProjection=function(t){return jf.a&&this.getProjection()&&t&&!Object(u.j)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var e=t.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},e.prototype.getOpaque=function(e){return!(jf.a&&this.getProjection()&&e&&!Object(u.j)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!jf.a)return t.prototype.getTileGridForProjection.call(this,e);var r=this.getProjection();if(!this.tileGrid||r&&!Object(u.j)(r,e)){var n=Object(Gn.c)(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Object(Ff.d)(e)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!jf.a)return t.prototype.getTileCacheForProjection.call(this,e);var r=this.getProjection();if(!r||Object(u.j)(r,e))return this.tileCache;var n=Object(Gn.c)(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new wf.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,r,n,i,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),l=s?this.tileUrlFunction(s,n,i):void 0,u=new this.tileClass(a,void 0!==l?Ef.a.IDLE:Ef.a.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Di.a.CHANGE,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,r,n,i){var o=this.getProjection();if(jf.a&&o&&i&&!Object(u.j)(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,r],l=void 0,c=Object(Tf.d)(s);a.containsKey(c)&&(l=a.get(c));var h=this.getKey();if(l&&l.key==h)return l;var f=this.getTileGridForProjection(o),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(s,i),g=new xf.a(o,f,i,p,s,d,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=h,l?(g.interimTile=l,g.refreshInterimChain(),a.replace(c,g)):a.set(c,g),g}return this.getTileInternal(t,e,r,n,o||i)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=Object(Tf.e)(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;o=this.createTile_(t,e,r,n,i,s),l.getState()==Ef.a.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(jf.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(jf.a){var r=Object(u.o)(t);if(r){var n=Object(Gn.c)(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}},e}(kf),Bf="carmentaserver",zf="geoserver",Vf="mapserver",qf="qgis";function Yf(t,e){var r=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))}));var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var Wf=r(57),Xf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hf=function(t){function e(e){var r=this,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var o=n.params||{},a=!("TRANSPARENT"in o)||o.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,opaque:!a,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=o,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=Object(mt.k)(),r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return Xf(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){var i=Object(u.o)(r),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),l=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=l[0])){var c=a.getResolution(l[0]),h=a.getTileCoordExtent(l,this.tmpExtent_),f=Object(Aa.d)(a.getTileSize(l[0]),this.tmpSize),p=this.gutter_;0!==p&&(f=Object(Aa.a)(f,p,this.tmpSize),h=Object(mt.d)(h,c*p,h)),o&&o!==i&&(c=Object(Wf.b)(o,i,t,c),h=Object(u.A)(h,i,o),t=Object(u.z)(t,i,o));var d={SERVICE:"WMS",VERSION:vf,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(ii.a)(d,this.params_,n);var g=Math.floor((t[0]-h[0])/c),y=Math.floor((h[3]-t[1])/c);return d[this.v13_?"I":"X"]=g,d[this.v13_?"J":"Y"]=y,this.getRequestUrl_(l,f,h,1,o||i,d)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:vf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i/28e-5}return Object(ii.a)(r,e),Yf(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case zf:var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case Vf:o.MAP_RESOLUTION=90*n;break;case Bf:case qf:o.DPI=90*n;break;default:Object(Ui.a)(!1,52)}var l,u=i.getAxisOrientation(),c=r;if(this.v13_&&"ne"==u.substr(0,2)){var h=void 0;h=r[0],c[0]=r[1],c[1]=h,h=r[2],c[2]=r[3],c[3]=h}if(o.BBOX=c.join(","),1==a.length)l=a[0];else l=a[Object(mo.g)(Object(Tf.f)(t),a.length)];return Yf(l,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){Object(ii.a)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||vf;this.v13_=Object(G.a)(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=Object(Aa.d)(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=Object(Aa.a)(a,s,this.tmpSize),o=Object(mt.d)(o,i*s,o)),1!=e&&(a=Object(Aa.c)(a,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:vf,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(ii.a)(l,this.params_),this.getRequestUrl_(t,a,o,e,r,l)}},e}(Uf);function Zf(t){return(Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $f(t,e,r){return($f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rp(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Qf(t,e){return(Qf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rp(t);if(e){var i=rp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ep(this,r)}}function ep(t,e){return!e||"object"!==Zf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rp(t){return(rp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var np=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qf(t,e)}(o,t);var e,r,n,i=tp(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Kf(this,o);var e=t;return _D(t.tileLoadFunction)&&(e.tileLoadFunction=o.tileLoadFunction),i.call(this,e)}return e=o,n=[{key:"tileLoadFunction",value:function(t,e){var r=t;r.getImage().src="".concat(e,"&_=").concat(this.revision_),null!=M.config.ticket&&(r.getImage().src+="&ticket=".concat(M.config.ticket))}}],(r=[{key:"changed",value:function(){_D(this.tileCache)||this.tileCache.clear(),$f(rp(o.prototype),"changed",this).call(this)}}])&&Jf(e.prototype,r),n&&Jf(e,n),o}(Hf),ip=r(32),op=r(44),ap=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sp=[101,101],lp=function(t){function e(e){var r=this,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,interpolate:i,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:ip.b,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return ap(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var i=Object(u.o)(r),o=this.getProjection();o&&o!==i&&(e=Object(Wf.b)(o,i,t,e),t=Object(u.z)(t,i,o));var a=Object(mt.z)(t,e,0,sp),s={SERVICE:"WMS",VERSION:vf,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(ii.a)(s,this.params_,n);var l=Object(mo.d)((t[0]-a[0])/e,4),c=Object(mo.d)((a[3]-t[1])/e,4);return s[this.v13_?"I":"X"]=l,s[this.v13_?"J":"Y"]=c,this.getRequestUrl_(a,sp,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:vf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i/28e-5}return Object(ii.a)(r,e),Yf(this.url_,r)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var i=e/r,o=Object(mt.x)(t),a=Object(mo.a)(Object(mt.F)(t)/i,4),s=Object(mo.a)(Object(mt.A)(t)/i,4),l=Object(mt.z)(o,i,0,[a,s]),u=Object(mo.a)(this.ratio_*Object(mt.F)(t)/i,4),c=Object(mo.a)(this.ratio_*Object(mt.A)(t)/i,4),h=Object(mt.z)(o,i,0,[u,c]),f=this.image_;if(f&&this.renderedRevision_==this.getRevision()&&f.getResolution()==e&&f.getPixelRatio()==r&&Object(mt.h)(f.getExtent(),l))return f;var p={SERVICE:"WMS",VERSION:vf,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(ii.a)(p,this.params_),this.imageSize_[0]=Object(mo.h)(Object(mt.F)(h)/i,4),this.imageSize_[1]=Object(mo.h)(Object(mt.A)(h)/i,4);var d=this.getRequestUrl_(h,this.imageSize_,r,n,p);return this.image_=new op.a(h,e,r,d,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Di.a.CHANGE,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){if(Object(Ui.a)(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case zf:var o=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case Vf:i.MAP_RESOLUTION=90*r;break;case Bf:case qf:i.DPI=90*r;break;default:Object(Ui.a)(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),Yf(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(ii.a)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||vf;this.v13_=Object(G.a)(t,"1.3")>=0},e}(ip.a);function up(t){return(up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fp(t,e,r){return(fp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yp(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function pp(t,e){return(pp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yp(t);if(e){var i=yp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gp(this,r)}}function gp(t,e){return!e||"object"!==up(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yp(t){return(yp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pp(t,e)}(o,t);var e,r,n,i=dp(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cp(this,o);var r=e;return(t=i.call(this,r)).imageLoadFunction_=r.imageLoadFunction||t.imageLoadFunction,t}return e=o,(r=[{key:"changed",value:function(){fp(yp(o.prototype),"changed",this).call(this)}},{key:"imageLoadFunction",value:function(t,e){var r=t;r.getImage().src="".concat(e,"&_=").concat(this.revision_),null!=M.config.ticket&&(r.getImage().src+="&ticket=".concat(M.config.ticket))}}])&&hp(e.prototype,r),n&&hp(e,n),o}(lp);function _p(t){return(_p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xp(t,e){return(xp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Op(t);if(e){var i=Op(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ep(this,r)}}function Ep(t,e){return!e||"object"!==_p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Op(t){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xp(t,e)}(o,t);var e,r,n,i=wp(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return vp(this,o),(t=i.call(this,e,r)).facadeLayer_=null,t.options=e,t.layers=[],t.displayInLayerSwitcher_=!0,t.getCapabilitiesPromise=null,t.extentPromise=null,t.extent=null,t.resolutions_=null,t.extentProj_=null,!1===t.options.visibility&&(t.visibility=!1),_D(t.tiled)&&(t.tiled=!0!==t.options.singleTile),_D(t.options.numZoomLevels)&&(t.options.numZoomLevels=M.config.ZOOM_LEVELS),_D(t.options.animated)&&(t.options.animated=!1),t.styles=t.options.styles||"",t.sldBody=e.sldBody,t.zIndex_=id.Z_INDEX.WMS,t}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter((function(t){return!t.equals(e)&&t.isVisible()})).forEach((function(t){return t.setVisible(!1)})),_D(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),_D(r)||this.map.setZoom(r)}else _D(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"addTo",value:function(t){if(this.map=t,this.fire(Cl),!yD(this.options)&&!yD(this.options.minScale)&&!yD(this.options.maxScale)){var e=this.map.getProjection().units;this.options.minResolution=LD(this.options.minScale,e),this.options.maxResolution=LD(this.options.maxScale,e)}_D(this.name)?this.addAllLayers_():this.addSingleLayer_(),this.legendUrl_===FD([M.config.THEME_URL,Lc.LEGEND_DEFAULT])&&(this.legendUrl_=ID(this.url,{SERVICE:"WMS",VERSION:this.version,REQUEST:"GetLegendGraphic",LAYER:this.name,FORMAT:"image/png",EXCEPTIONS:"image/png"}))}},{key:"setResolutions",value:function(t){var e=this;this.resolutions_=t,this.facadeLayer_.calculateMaxExtent().then((function(r){if(!_D(e.ol3Layer)){var n=e.options.minResolution,i=e.options.maxResolution,o=e.createOLSource_(t,n,i,r);e.ol3Layer.setSource(o),e.ol3Layer.setExtent(r)}}))}},{key:"addSingleLayer_",value:function(){var t=this;this.facadeLayer_.calculateMaxExtent().then((function(e){var r=t.options.minResolution,n=t.options.maxResolution,i=t.opacity_,o=t.zIndex_,a=t.visibility&&!1!==t.options.visibility,s=t.map.getResolutions();if(_D(s)&&!_D(t.resolutions_))s=t.resolutions_;else if(_D(s)){var l=t.getNumZoomLevels(),u=t.map.getMapImpl().getSize(),c=t.map.getProjection().units;s=_D(r)||_D(n)?MD(e,u,l,c):RD(r,n,l)}var h=t.createOLSource_(s,r,n,e);!0===t.tiled?t.ol3Layer=new Mc.a(GD({visible:a,source:h,extent:e,minResolution:r,maxResolution:n,opacity:i,zIndex:o},t.vendorOptions_,!0)):t.ol3Layer=new Nc.a(GD({visible:a,source:h,extent:e,minResolution:r,maxResolution:n,opacity:i,zIndex:o},t.vendorOptions_,!0)),t.map.getMapImpl().addLayer(t.ol3Layer),t.facadeLayer_.fire(Xl),t.isVisible()&&!t.inRange()?t.setVisible(!1):t.setVisible(t.visibility),null!==o&&t.setZIndex(o),null!==t.resolutions_&&t.setResolutions(t.resolutions_);var f=!1===t.transparent||!0===t.options.animated;t.ol3Layer.set("animated",f)}))}},{key:"createOLSource_",value:function(t,e,r,n){var i=this,o=this.vendorOptions_.source;if(_D(this.vendorOptions_.source)){var a=this.options.crossOrigin,s={LAYERS:this.name,TILED:!0,VERSION:this.version,TRANSPARENT:this.transparent,FORMAT:"image/png",STYLES:this.styles};_D(this.sldBody)||(s.SLD_BODY=this.sldBody),_D(this.options.params)||Object.keys(this.options.params).forEach((function(t){s[t.toUpperCase()]=i.options.params[t]}));var l=this.opacity_,u=this.zIndex_;if(!0===this.tiled){var c=Object(mt.v)(n),h={url:this.url,params:s,tileGrid:new Ac.a({resolutions:t,extent:n,origin:c}),extent:n,minResolution:e,maxResolution:r,opacity:l,zIndex:u};dD(a)||(h.crossOrigin=a),o=new np(h)}else{var f={url:this.url,params:s,resolutions:t,extent:n,minResolution:e,maxResolution:r,opacity:l,zIndex:u};dD(a)||(f.crossOrigin=a),o=new mp(f)}}return o}},{key:"addAllLayers_",value:function(){var t=this;this.getCapabilities().then((function(e){e.getLayers().forEach((function(e){var r=new Ap({url:t.url,name:e.name,version:e.version,tiled:t.tiled},t.vendorOptions_);t.layers.push(r)})),t.map.addWMS(t.layers);var r=t.layers.length;t.layers.forEach((function(t){t.setZIndex(id.Z_INDEX.WMS+r),r+=1}))}))}},{key:"getExtent",value:function(){var t=this,e=Object(u.o)(this.map.getProjection().code);return this.extentPromise=new Promise((function(r,n){_D(t.extent_)?t.getCapabilities().then((function(n){t.extent_=n.getLayerExtent(t.name),t.extentProj_=e,r(t.extent_)})):(t.extent_=wh.transformExtent(t.extent_,t.extentProj_,e),t.extentProj_=e,r(t.extent_))})),this.extentPromise}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"updateMinMaxResolution",value:function(t){_D(this.options.minResolution)||(this.options.minResolution=LD(this.options.minScale,t.units),this.ol3Layer.setMinResolution(this.options.minResolution)),_D(this.options.maxResolution)||(this.options.maxResolution=LD(this.options.maxScale,t.units),this.ol3Layer.setMaxResolution(this.options.maxResolution))}},{key:"setMaxExtent",value:function(t){var e=this.options.minResolution,r=this.options.maxResolution,n=this.getOLLayer();if(!_D(n)&&(n.setExtent(t),!0===this.tiled)){var i=this.map.getResolutions();if(_D(i)&&!_D(this.resolutions_)&&(i=this.resolutions_),!_D(i)){var o=this.createOLSource_(i,e,r,t);n.setSource(o)}}}},{key:"getNumZoomLevels",value:function(){return this.options.numZoomLevels}},{key:"getLayers",value:function(){return this.layers}},{key:"getCapabilities",value:function(){if(_D(this.getCapabilitiesPromise)){var t=this.url,e=this.version,r=this.map.getProjection(),n=this.map.getTicket();this.getCapabilitiesPromise=new Promise((function(i,o){var a=TD(t,e,n);uD(a).then((function(e){if("xml"in e&&!_D(e.xml)){var n=e.xml,o=(new _f).customRead(n),s=new Mh(o,t,r);i(s)}else uD(a,"",{ticket:!1}).then((function(e){var n=e.xml,o=(new _f).customRead(n),a=new Mh(o,t,r);i(a)}))}))}))}return this.getCapabilitiesPromise}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(t){this.legendUrl_=t}},{key:"refresh",value:function(){var t=this.getOLLayer();_D(t)||t.getSource().updateParams({time:Date.now()})}},{key:"getExtentFromCapabilities",value:function(t){var e=this.facadeLayer_.name,r=this.map.getProjection().code;return t.getLayerExtent(e,r)}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"getStyles",value:function(){return this.getOLLayer().getSource().getParams().STYLES}},{key:"setStyles",value:function(t){var e=this.getOLLayer();_D(e)||e.getSource().updateParams({STYLES:t})}},{key:"destroy",value:function(){var t=this.map.getMapImpl();_D(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),_D(this.layers)||(this.layers.map(this.map.removeLayers,this.map),this.layers.length=0),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.cql===t.cql,e=e&&this.version===t.version),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=!0===this.tiled?new Mc.a(e):new Nc.a(e)}return t}}])&&bp(e.prototype,r),n&&bp(e,n),o}(Rh);Sp.LEGEND_IMAGE=null;var Ip=Sp;function Cp(t){return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rp(t,e){return(Rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Np(t);if(e){var i=Np(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mp(this,r)}}function Mp(t,e){return!e||"object"!==Cp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Np(t){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ap=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rp(t,e)}(o,t);var e,r,n,i=Lp(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;Tp(this,o),dD(Ip)&&_l(uu("exception").wms_method),_D(t)&&_l(uu("exception").no_param);var a=Ec(t,Nu),s=a.styles||"";_D(s)||Object.defineProperty(r,"styles",{value:s,writable:!0});var l=new Ip(r,n);return(e=i.call(this,a,l)).legend=a.legend,e.cql=a.cql,e.version=a.version,_D(a.tiled)||(e.tiled=a.tiled),e.transparent=a.transparent,e.styles=s,e.options=r,e.wmcParent_=null,e.getCapabilitiesPromise_=null,e._updateNoCache(),e}return e=o,(r=[{key:"getStyles",value:function(){return this.getImpl().getStyles()}},{key:"setStyles",value:function(t){this.styles=t,this.getImpl().setStyles(t)}},{key:"getMaxExtent",value:function(t){var e,r=this;if(_D(this.userMaxExtent))if(_D(this.options.wmcMaxExtent))if(_D(this.map_.userMaxExtent)){var n=this.map_.getWMC().find((function(t){return t.selected}));_D(n)?this.getCapabilities().then((function(e){var n=r.getImpl().getExtentFromCapabilities(e);if(_D(n)){var i=r.map_.getProjection().getExtent();r.maxExtent_=i}else r.maxExtent_=n;vD(t)&&t(r.maxExtent_)})):n.calculateMaxExtent().then((function(e){r.maxExtent_=e,vD(t)&&t(r.maxExtent_)}))}else this.maxExtent_=this.map_.userMaxExtent,e=this.maxExtent_;else this.maxExtent_=this.options.wmcMaxExtent,e=this.maxExtent_;else e=this.userMaxExtent;return!_D(e)&&vD(t)?t(e):_D(e)&&(e=this.maxExtent_),e}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return t.getMaxExtent(e)}))}},{key:"getCapabilities",value:function(){return _D(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"getNoCacheUrl",value:function(){return this._noCacheUrl}},{key:"getNoCacheName",value:function(){return this._noCacheName}},{key:"setWMCParent",value:function(t){this.wmcParent_=t}},{key:"getWMCParent",value:function(){return this.wmcParent_}},{key:"updateMinMaxResolution",value:function(t){return this.getImpl().updateMinMaxResolution(t)}},{key:"_updateNoCache",value:function(){var t=M.config.tileMappgins.tiledNames.indexOf(this.name);-1!==t&&zD(M.config.tileMappgins.tiledUrls[t],this.url)&&(this._noCacheUrl=M.config.tileMappgins.urls[t],this._noCacheName=M.config.tileMappgins.names[t])}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.cql===t.cql,e=e&&this.version===t.version),e}},{key:"type",get:function(){return Nu},set:function(t){dD(t)||_D(t)||t===Nu||_l("El tipo de capa debe ser '".concat(Nu).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){_D(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"tiled",get:function(){return this.getImpl().tiled},set:function(t){_D(t)?this.getImpl().tiled=!0:xD(t)?this.getImpl().tiled="true"===OD(t):this.getImpl().tiled=t}},{key:"cql",get:function(){return this.getImpl().cql},set:function(t){this.getImpl().cql=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){_D(t)?this.getImpl().version="1.1.0":this.getImpl().version=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&Pp(e.prototype,r),n&&Pp(e,n),o}(Lc);function kp(t){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fp(t,e){return(Fp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Up(t);if(e){var i=Up(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Gp(this,r)}}function Gp(t,e){return!e||"object"!==kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Up(t){return(Up=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fp(t,e)}(o,t);var e,r,n,i=Dp(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).userZoom_=null,e}return e=o,(r=[{key:"setUserZoom",value:function(t){this.userZoom_=t,_D(t)||this.setZoom(t)}},{key:"getUserZoom",value:function(){return this.userZoom_}},{key:"setProjection",value:function(t){this.projection_=t}},{key:"getResolutions",value:function(){return this.get("resolutions")}},{key:"setResolutions",value:function(t){this.set("resolutions",t),this.maxResolution_=t[0],this.minResolution_=t[t.length-1],this.setCenter(this.getCenter()),this.applyOptions_({minZoom:this.minZoom_,resolutions:t,zoomFactor:this.zoomFactor_,minResolution:this.minResolution_,maxResolution:this.maxResolution_,projection:this.projection_,center:this.getCenter(),constrainResolution:!0,multiWorld:!0}),_D(this.userZoom_)||this.setZoom(this.userZoom_)}}])&&jp(e.prototype,r),n&&jp(e,n),o}(Na);r(135),r(137);function zp(t){return(zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yp(t){return function(t){if(Array.isArray(t))return Wp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Wp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zp(t,e){return(Zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$p(t);if(e){var i=$p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jp(this,r)}}function Jp(t,e){return!e||"object"!==zp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $p(t){return($p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qp=[],td=[],ed=[],rd=[Nu,ju,Fu,ku],nd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zp(t,e)}(o,t);var e,r,n,i=Kp(o);function o(t,e){var r;Xp(this,o),(r=i.call(this)).facadeMap_=e,r.layers_=[],r.layerGroups_=[],r.controls_=[],r.initZoom_=!0,r.userResolutions_=null,r.userBbox_=null,r.maxExtentForResolutions_=null,r.envolvedMaxExtent_=null,r._calculatedResolutions=!1,r._resolutionsEnvolvedExtent=!1,r._resolutionsBaseLayer=!1,r.label=[],r.map_=new Js({controls:[],target:t.id,view:new Bp}),r.registerEvents_(),r.map_.addInteraction(new Ja({handleEvent:function(t){return"pointermove"===t.type&&r.onMapMove_(t),!0}}));var n=r.map_.getInteractions().getArray();return r.mouseWheelZoom_=n.find((function(t){return t instanceof qs})),r.dragPan_=n.find((function(t){return t instanceof _s})),r}return e=o,n=[{key:"registerExternalFunction",value:function(t,e){var r={getLayers:Qp,addLayers:ed,removeLayers:td}[e];r.find((function(e){return e===t}))&&r.push(t)}},{key:"registerBaseLayerType",value:function(t){!rd.find((function(e){return e===t}))&&rd.push(t)}}],(r=[{key:"getLayers",value:function(t){var e=this,r=this.getWMC(t),n=this.getKML(t),i=this.getWMS(t),o=this.getWFS(t),a=this.getWMTS(t),s=this.getMVT(t),l=this.getUnknowLayers_(t),u=Qp.map((function(r){return e[r](t)}));return r.concat(n).concat(i).concat(o).concat(a).concat(s).concat(l).concat(u)}},{key:"getBaseLayers",value:function(){return this.getLayers().filter((function(t){var e=!1;return rd.includes(t.type)&&(e=!0!==t.transparent),e}))}},{key:"addLayers",value:function(t){var e=t.filter((function(t){return!Vu(t.type)})),r=t.filter((function(t){return Vu(t.type)}));return this.addUnknowLayers_(e),this.facadeMap_.addWMC(r.filter((function(t){return t.type===Lu}))),this.facadeMap_.addWMS(r.filter((function(t){return t.type===Nu}))),this.facadeMap_.addWMTS(r.filter((function(t){return t.type===ku}))),this.facadeMap_.addKML(r.filter((function(t){return t.type===Mu}))),this.facadeMap_.addWFS(r.filter((function(t){return t.type===Au}))),this.facadeMap_.addMVT(r.filter((function(t){return t.type===Uu}))),ed.forEach((function(t){return t(e)})),this}},{key:"removeLayers",value:function(t){var e=t.filter((function(t){return!Vu(t.type)})),r=t.filter((function(t){return Vu(t.type)}));return r.length>0&&(this.removeWMC(r),this.removeKML(r),this.removeWMS(r),this.removeWFS(r),this.removeWMTS(r),this.removeMVT(r)),e.length>0&&(this.removeUnknowLayers_(e),td.forEach((function(t){return t(e)}))),t.forEach((function(t){t.getLayerGroup&&!_D(t.getLayerGroup())&&t.getLayerGroup().deleteChild(t)})),Array.isArray(this.getBaseLayers())&&this.getBaseLayers().length>0||(this._resolutionsBaseLayer=!1),this.facadeMap_.fire(kl,[t]),this}},{key:"getLayerGroups",value:function(){return this.layerGroups_}},{key:"getGroupedLayers",value:function(){var t=[],e=this.getLayerGroups();return 1===e.length?t=e[0].getAllLayers():e.length>1&&(t=e.reduce((function(t,e){return Array.isArray(t)?t.concat(e.getAllLayers()):t.getAllLayers().concat(e.getAllLayers())}))),t}},{key:"addLayerGroups",value:function(t){var e=this;return t.forEach((function(t){t.addTo(e.facadeMap_),DD(e.layerGroups_,t)||(e.layerGroups_.push(t),t.getAllLayers().forEach((function(t){e.facadeMap_.addLayers(t)})))})),this}},{key:"removeLayerGroups",value:function(t){var e=this;return(Array.isArray(t)?Yp(t):[t]).forEach((function(t){e.layerGroups_.remove(t),t.destroy(),t.fire(jl,[t])})),this}},{key:"getWMC",value:function(t){var e=t,r=[],n=this.layers_.filter((function(t){return t.type===Lu}));return _D(e)&&(e=[]),mD(e)||(e=[e]),0===e.length?r=n:e.forEach((function(t){r=r.concat(n.filter((function(e){var n=!0;return r.includes(e)?n=!1:(_D(t.type)||(n=n&&t.type===e.type),_D(t.url)||(n=n&&t.url===e.url),_D(t.name)||(n=n&&t.name===e.name)),n})))}),this),r}},{key:"addWMC",value:function(t){var e=this;return t.forEach((function(t,r){t.type===Lu&&(DD(e.layers_,t)||(t.setZIndex(o.Z_INDEX.WMC),t.getImpl().addTo(e.facadeMap_),e.layers_.push(t)))}),this),this}},{key:"removeWMC",value:function(t){var e=this;return this.getWMC(t).forEach((function(t){!0===t.selected&&!1===t.isLoaded()?t.on(Xl,(function(){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),e.facadeMap_.removeWMS(t.layers),e.facadeMap_.refreshWMCSelectorControl()})):(e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),e.facadeMap_.removeWMS(t.layers)),e.facadeMap_.refreshWMCSelectorControl(),t.fire(jl,[t])}),this),this}},{key:"getKML",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Mu}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(_D(t.type)||(n=n&&t.type===r.type),_D(t.url)||(n=n&&t.url===r.url),_D(t.name)||(n=n&&t.name===r.name),_D(t.extract)||(n=n&&t.extract===r.extract)),n}));e=e.concat(r)}),this),e}},{key:"addKML",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Mu&&!DD(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.KML;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}}),this),this}},{key:"removeKML",value:function(t){var e=this;return this.getKML(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!t.equals(e)})),t.getImpl().destroy(),t.fire(jl,[t])}),this),this}},{key:"getWMS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Nu}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:t instanceof Ap?n=t===r:(_D(t.type)||(n=n&&t.type===r.type),_D(t.url)||(n=n&&t.url===r.url),_D(t.name)||(n=n&&t.name===r.name),_D(t.legend)||(n=n&&t.legend===r.legend),_D(t.transparent)||(n=n&&t.transparent===r.transparent),_D(t.tiled)||(n=n&&t.tiled===r.tiled),_D(t.cql)||(n=n&&t.cql===r.cql),_D(t.version)||(n=n&&t.version===r.version)),n}));e=e.concat(r)}),this),e}},{key:"addWMS",value:function(t){var e=this,r=this.getBaseLayers().length>0,n=[];return t.forEach((function(t){if(t.type===Nu&&!DD(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),n.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.setZIndex(o.Z_INDEX_BASELAYER);else if(null==t.getZIndex()){var i=e.layers_.length+o.Z_INDEX.WMS;t.setZIndex(i)}})),(n.length>0&&!r||n.some((function(t){return!0!==t.transparent&&t.isVisible()})))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeWMS",value:function(t){var e=this;return this.getWMS(t).forEach((function(t){if(e.layers_=e.layers_.filter((function(e){return!t.equals(e)})),t.getImpl().destroy(),t.fire(jl,[t]),!0!==t.transparent){var r=e.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}})),this}},{key:"getGeoJSON",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Du}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(_D(t.type)||(n=n&&t.type===r.type),_D(t.url)||(n=n&&t.url===r.url),_D(t.name)||(n=n&&t.name===r.name),_D(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"getWFS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Au}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(_D(t.type)||(n=n&&t.type===r.type),_D(t.url)||(n=n&&t.url===r.url),_D(t.name)||(n=n&&t.name===r.name),_D(t.namespace)||(n=n&&t.namespace===r.namespace),_D(t.legend)||(n=n&&t.legend===r.legend),_D(t.cql)||(n=n&&t.cql===r.cql),_D(t.geometry)||(n=n&&t.geometry===r.geometry),_D(t.ids)||(n=n&&t.ids===r.ids),_D(t.version)||(n=n&&t.version===r.version)),n}));e=e.concat(r)})),e}},{key:"addWFS",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Au&&!DD(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.WFS;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWFS",value:function(t){var e=this;return this.getWFS(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire(jl,[t])})),this}},{key:"getWMTS",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===ku}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(_D(t.type)||(n=n&&t.type===r.type),_D(t.url)||(n=n&&t.url===r.url),_D(t.name)||(n=n&&t.name===r.name),_D(t.matrixSet)||(n=n&&t.matrixSet===r.matrixSet),_D(t.legend)||(n=n&&t.legend===r.legend)),n}));e=e.concat(r)})),e}},{key:"addWMTS",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===ku&&!DD(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),!0!==t.transparent)t.getImpl().visibility=!r,r=!0,t.isVisible()&&e.updateResolutionsFromBaseLayer(),t.setZIndex(o.Z_INDEX_BASELAYER);else{if(null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.WMTS;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWMTS",value:function(t){var e=this;return this.getWMTS(t).forEach((function(t){if(e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire(jl,[t]),!0!==t.transparent){var r=e.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}})),this}},{key:"getUnknowLayers_",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return!Vu(t.type)}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:t instanceof Lc?n=t.equals(r):(_D(t.type)||(n=n&&t.type===r.type),_D(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"addUnknowLayers_",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(!DD(e.layers_,t))if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),!0!==t.transparent)t.setVisible(!r),r=!0,t.isVisible()&&e.updateResolutionsFromBaseLayer(),t.setZIndex(o.Z_INDEX_BASELAYER);else{if(t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX[t.type];t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"removeUnknowLayers_",value:function(t){var e=this;t.forEach((function(t){if(DD(e.layers_,t)&&(e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire(jl,[t]),!0!==t.transparent)){var r=e.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}}))}},{key:"getMVT",value:function(t){var e=[],r=t,n=this.layers_.filter((function(t){return t.type===Uu}));return _D(r)&&(r=[]),mD(r)||(r=[r]),0===r.length?e=n:r.forEach((function(t){var r=n.filter((function(r){var n=!0;return e.includes(r)?n=!1:(_D(t.type)||(n=n&&t.type===r.type),_D(t.url)||(n=n&&t.url===r.url),_D(t.name)||(n=n&&t.name===r.name)),n}));e=e.concat(r)})),e}},{key:"removeMVT",value:function(t){var e=this;return this.getMVT(t).forEach((function(t){e.layers_=e.layers_.filter((function(e){return!e.equals(t)})),t.getImpl().destroy(),t.fire(jl,[t])})),this}},{key:"addMVT",value:function(t){var e=this,r=this.getBaseLayers().length>0;return t.forEach((function(t){if(t.type===Uu&&!DD(e.layers_,t)){if(t.getImpl().addTo(e.facadeMap_),e.layers_.push(t),t.setZIndex(t.getZIndex()),null==t.getZIndex()){var n=e.layers_.length+o.Z_INDEX.MVT;t.setZIndex(n)}r||e.updateResolutionsFromBaseLayer()}})),this}},{key:"getControls",value:function(t){var e=t,r=[],n=this.facadeMap_.getPanels().map((function(t){return t.getControls()}));n.length>0&&(n=n.reduce((function(t,e){return t.concat(e)})));var i=this.controls_.concat(n);_D(e)&&(e=[]),mD(e)||(e=[e]),0===e.length?r=i:e.forEach((function(t){r=r.concat(i.filter((function(e){var n=!1;return DD(r,e)||(xD(t)?n=t===e.name:t instanceof yu?n=t===e:bD(t)&&(n=t.name===e.name)),n})))}));var o=[];return r.forEach((function(t){o.map((function(t){return t.name})).includes(t.name)||o.push(t)})),o}},{key:"addControls",value:function(t){var e=this;return t.forEach((function(t){t instanceof Ru&&e.facadeMap_.addControls("panzoom"),DD(e.controls_,t)||e.controls_.push(t)})),this}},{key:"removeControls",value:function(t){var e=this;return this.getControls(t).forEach((function(t){_D(e.map_)||e.map_.removeControl(t.getImpl()),t.destroy(),e.controls_=e.controls_.filter((function(e){var r=e.constructor===t.constructor;return _D(e.equals)||(r=!e.equals(t)),r}))})),this}},{key:"setMaxExtent",value:function(t,e){var r=t;return _D(r)||mD(r)||!bD(r)||(r=[t.x.min,t.y.min,t.x.max,t.y.max]),this.getMapImpl().getView().set("extent",r),this.updateResolutionsFromBaseLayer(),_D(r)||!1===e||this.setBbox(r),this}},{key:"getMaxExtent",value:function(){var t=this.getMapImpl().getView().get("extent");return _D(t)?this.envolvedMaxExtent_:{x:{min:t[0],max:t[2]},y:{min:t[1],max:t[3]}}}},{key:"setBbox",value:function(t,e){var r;_D(t)&&_l(uu("exception").no_bbox),this.userBbox_=t,mD(t)?r=t:bD(t)&&(r=[t.x.min,t.y.min,t.x.max,t.y.max]);var n=this.getMapImpl();return n.updateSize(),n.getView().fit(r,e),this}},{key:"getBbox",value:function(){var t=null,e=this.getMapImpl(),r=e.getView();if(!_D(r.getCenter())){var n=r.calculateExtent(e.getSize());_D(n)||(t={x:{min:n[0],max:n[2]},y:{min:n[1],max:n[3]}})}return t}},{key:"setZoom",value:function(t){return _D(t)&&_l(uu("exception").no_zoom),this.getMapImpl().getView().setUserZoom(t),this}},{key:"getZoom",value:function(){var t=null,e=this.getMapImpl().getView(),r=e.getResolution(),n=this.getResolutions();if(_D(n))_D(r)||(t=e.getZoomForResolution(r));else for(var i=0,o=n.length;i<o;i+=1)if(n[i]<=r){t=i;break}return t}},{key:"setCenter",value:function(t){_D(t)&&_l(uu("exception").no_center);var e=[t.x,t.y],r=this.getMapImpl().getView(),n=r.getCenter();return _D(n)||this.getMapImpl().getView().animate({duration:250,source:n}),r.setCenter(e),this}},{key:"getCenter",value:function(){var t=null,e=this.getMapImpl().getView().getCenter();return _D(e)||(t={x:e[0],y:e[1]}),t}},{key:"getResolutions",value:function(){return this.getMapImpl().getView().getResolutions()}},{key:"setResolutions",value:function(t,e){_D(t)&&_l(uu("exception").no_resolutions),_D(e)&&(this.userResolutions_=t);var r,n=Object(u.o)(this.getProjection().code),i=this.getMapImpl(),o=i.getView().getProperties(),a=i.getView().getUserZoom(),s=i.getSize(),l=new Bp(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vp(Object(r),!0).forEach((function(e){qp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({projection:n},o));if(l.setProperties(o),l.setResolutions(t),l.setUserZoom(a),_D(a)){var c=this.facadeMap_.getBbox();if(_D(c))r=t[0];else{var h=l.getResolutionForExtent([c.x.min,c.y.min,c.x.max,c.y.max],s),f=t.map((function(t){return Math.abs(t-h)})),p=f.indexOf(Math.min.apply(Math,Yp(f)));r=t[p]}}else r=t[a];return l.setResolution(r),i.setView(l),this.getWMS().forEach((function(e){e.getImpl().setResolutions(t)})),this}},{key:"getScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=ND(t,e);return _D(r)||(r=r>=1e3&&r<=95e4?1e3*Math.round(r/1e3):r>=95e4?1e6*Math.round(r/1e6):Math.round(r)),r}},{key:"getExactScale",value:function(){var t=this.getMapImpl().getView().getResolution(),e=this.getProjection().units,r=ND(t,e);return Math.trunc(r)}},{key:"setProjection",value:function(t){_D(t)&&_l(uu("exception").no_projection);var e=Object(u.o)(t.code);_D(e)&&(e=new Tn.a(t));var r=this.getProjection(),n=Object(u.o)(r.code),i=this.facadeMap_.getBbox(),o=this.getMapImpl(),a=o.getView().getUserZoom(),s=new Bp({projection:e});if(s.setUserZoom(a),o.setView(s),this.facadeMap_.getWMS().forEach((function(e){e.updateMinMaxResolution(t)})),this.updateResolutionsFromBaseLayer(),!_D(i)){mD(i)||(i=[i.x.min,i.y.min,i.x.max,i.y.max]);var l=wh.transformExtent(i,n,e);l.includes(NaN)&&(l=e.getExtent()),this.facadeMap_.setBbox(l,{nearest:!0})}return this}},{key:"getProjection",value:function(){var t=this.getMapImpl().getView().getProjection(),e=null;return _D(t)||(e={code:t.getCode(),units:t.getUnits(),getExtent:function(){return t.getExtent()}}),e}},{key:"getMapImpl",value:function(){return this.map_}},{key:"removePopup",value:function(t){if(!_D(t)){var e=t.getImpl();this.getMapImpl().removeOverlay(e),t.fire(iu,[t]),this.facadeMap_.fire(iu,[t])}return this}},{key:"destroy",value:function(){this.layers_.length=0,this.controls_.length=0,this.popup_=null,this.options_=null,this.map_.setTarget(null),this.map_=null}},{key:"updateResolutionsFromBaseLayer",value:function(){var t=this,e=[],r=M.config.ZOOM_LEVELS,n=this.getProjection().units,i=this.getBaseLayers().filter((function(t){return t.isVisible()}))[0],o=null,a=null;_D(i)||(a=i.getImpl().getMinResolution(),o=i.getImpl().getMaxResolution(),r=i.getImpl().getNumZoomLevels()),null===this.userResolutions_&&(_D(a)||_D(o)?this.facadeMap_.calculateMaxExtent().then((function(i){if(!t._resolutionsBaseLayer&&null===t.userResolutions_){t.getMapImpl().updateSize();var o=t.getMapImpl().getSize();e=MD(i,o,r,n),t.setResolutions(e,!0),t._resolutionsEnvolvedExtent=!0,!1===t._calculatedResolutions&&(t._calculatedResolutions=!0,t.fire(Hl))}})).catch((function(t){throw t})):(e=RD(a,o,r),this.setResolutions(e,!0),this._resolutionsBaseLayer=!0,!1===this._calculatedResolutions&&(this._calculatedResolutions=!0,this.fire(Hl))))}},{key:"addLabel",value:function(t,e){return this.label.push(t),t.show(this.facadeMap_,e),this}},{key:"getLabel",value:function(){return this.label[0]}},{key:"getLabels",value:function(){return this.label}},{key:"removeLabel",value:function(t){var e=this,r=t;_D(this.label)||(_D(t)?(this.label.forEach((function(t){return e.removePopup(t.getPopup())})),this.label=[]):(mD(t)||(r=[t]),r.forEach((function(t){var r=e.label.findIndex((function(e){return e.text===t.text&&e.coord===t.coord}));-1!==r&&(e.removePopup(e.label[r].getPopup()),e.label.splice(r,1))}))))}},{key:"refresh",value:function(){return this.map_.updateSize(),this}},{key:"getContainer",value:function(){return this.map_.getOverlayContainerStopEvent()}},{key:"setFacadeMap",value:function(t){this.facadeMap_=t}},{key:"registerEvents_",value:function(){var t=this;this.facadeMap_.on(Hl,(function(){t.map_.updateSize()})),this.map_.on("singleclick",this.onMapClick_.bind(this)),this.map_.getView().on("change:resolution",this.zoomEvent_.bind(this)),this.map_.on("change:view",(function(e){e.oldValue.un("change:resolution",t.zoomEvent_.bind(t)),t.map_.getView().on("change:resolution",t.zoomEvent_.bind(t))}))}},{key:"zoomEvent_",value:function(t){this.getZoom()<=t.target.getZoom()&&this.facadeMap_.fire(Ql,t)}},{key:"onMapClick_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e),n=this.facadeMap_.getLabel();_D(n)||n.hide(),this.facadeMap_.fire(eu,[{pixel:e,coord:r,vendor:t}])}},{key:"onMapMove_",value:function(t){var e=t.pixel,r=this.map_.getCoordinateFromPixel(e);this.facadeMap_.fire(ru,[{pixel:e,coord:r,vendor:t}])}},{key:"getRotation",value:function(){var t,e=this.map_.getView();return _D(e)||(t=e.getRotation()),t}},{key:"setRotation",value:function(t){var e=this.map_.getView();_D(e)||e.setRotation(t)}},{key:"enableMouseWheel",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_D(this.mouseWheelZoom_)||this.mouseWheelZoom_.setActive(t)}},{key:"enableDrag",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_D(this.dragPan_)||this.dragPan_.setActive(t)}},{key:"getImageMap",value:function(){var t=this.map_.getViewport().querySelectorAll(".ol-layer canvas, canvas.ol-layer")[0],e=null;if(!dD(t))try{e=t.toDataURL()}catch(t){throw t}return e}}])&&Hp(e.prototype,r),n&&Hp(e,n),o}(il);nd.Z_INDEX={},nd.Z_INDEX_BASELAYER=0,nd.Z_INDEX.WMC=1,nd.Z_INDEX.WMS=1e3,nd.Z_INDEX.WMTS=2e3,nd.Z_INDEX.OSM=2e3,nd.Z_INDEX.Mapbox=2e3,nd.Z_INDEX.KML=3e3,nd.Z_INDEX.WFS=9999,nd.Z_INDEX.Vector=9999,nd.Z_INDEX.MVT=9999,nd.Z_INDEX.GeoJSON=9999;var id=nd,od=r(99),ad=r.n(od);r(139);function sd(t){return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ld(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ud(t,e){return(ud=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fd(t);if(e){var i=fd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hd(this,r)}}function hd(t,e){return!e||"object"!==sd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fd(t){return(fd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ud(t,e)}(o,t);var e,r,n,i=cd(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{})).facadeMap_=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,Ua.call(this,{element:e,target:null}),t.getMapImpl().addControl(this)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"getElement",value:function(){return this.element}}])&&ld(e.prototype,r),n&&ld(e,n),o}(Ua);function dd(t){return(dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function md(t,e,r){return(md="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xd(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function _d(t,e){return(_d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xd(t);if(e){var i=xd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bd(this,r)}}function bd(t,e){return!e||"object"!==dd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xd(t){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_d(t,e)}(o,t);var e,r,n,i=vd(o);function o(){return gd(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"addTo",value:function(t,e){e.getElementsByTagName("select")[0].addEventListener("change",(function(e){var r=t.getWMC(e.target.options[e.target.selectedIndex].text)[0],n=t.getZoom();r.select(),t.setZoom(n)})),md(xd(o.prototype),"addTo",this).call(this,t,e)}}])&&yd(e.prototype,r),n&&yd(e,n),o}(pd);function Ed(t){return(Ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sd(t,e,r){return(Sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pd(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Id(t,e){return(Id=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pd(t);if(e){var i=Pd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Td(this,r)}}function Td(t,e){return!e||"object"!==Ed(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pd(t){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Id(t,e)}(o,t);var e,r,n,i=Cd(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new wd;return t=i.call(this,e,o.NAME),dD(wd)&&_l(uu("exception").wmcselector_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(ad.a,{vars:{layers:t.getWMC(),title:uu("wmcselector").title}})}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"destroy",value:function(){Sd(Pd(o.prototype),"destroy",this).call(this);var t=this.getPanel();_D(t)||t.removeClassName("m-with-wmcselector")}}])&&Od(e.prototype,r),n&&Od(e,n),o}(yu);Rd.NAME="wmcselector";var Ld=Rd,Md=(r(141),r(85)),Nd=r.n(Md);function Ad(t){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kd(t,e){return(kd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Dd(t);if(e){var i=Dd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fd(this,r)}}function Fd(t,e){return!e||"object"!==Ad(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dd(t){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kd(t,e)}(r,t);var e=jd(r);function r(t,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(o=e.call(this)).id_=t,o.title_=n,o.order_=i,o.zindex_=null,o}return r}(il);function Ud(t){return(Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bd(t){return function(t){if(Array.isArray(t))return zd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return zd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zd(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wd(t,e){return(Wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zd(t);if(e){var i=Zd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Hd(this,r)}}function Hd(t,e){return!e||"object"!==Ud(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zd(t){return(Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wd(t,e)}(o,t);var e,r,n,i=Xd(o);function o(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vd(Object(r),!0).forEach((function(e){qd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t);_D(r.id)&&(r.id=CD("mapea_layer_group_")),_D(r.title)&&(r.title="Grupo de capas"),_D(r.zIndex)&&(r.zIndex=1e4),_D(r.order)&&(r.order=0);var n=new Gd(r);return(e=i.call(this,n)).id=r.id,e.title=r.title,e.collapsed=!!r.collapsed,e.order=r.order,e.parent=null,e.children_=[],e.impl_=n,e.zIndex_=r.zIndex,Array.isArray(r.children)&&e.addChildren(r.children),e}return e=o,n=[{key:"findGroupById",value:function(t,e){var r=null;if(mD(e)&&e.length>0&&null==(r=e.find((function(e){return e instanceof o&&e.id===t})))){var n=e.map((function(t){return t.getChildren()})).reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return t instanceof o}));r=o.findGroupById(t,n)}return r}}],(r=[{key:"addTo",value:function(t){this.map=t,this.children_.forEach((function(e){e instanceof o&&e.addTo(t)})),this.fire(Cl)}},{key:"setVisible",value:function(t){this.getAllLayers().forEach((function(e){return!0===e.transparent&&e.setVisible(t)}))}},{key:"setZIndex",value:function(t){this.zIndex_=t;var e=Bd(this.getChildren()).reverse(),r=t;e.forEach((function(t){t.setZIndex(r),r+=1}))}},{key:"getZIndex",value:function(t){return this.zIndex_}},{key:"addChild",value:function(t,e){var r=this.getZIndex()+this.children_.length,n=t;_D(e)?this.children_.unshift(n):(this.children_.splice(e-1,0,n),r=this.getZIndex()+e),n instanceof o?n.parent=this:n instanceof Lc&&(n.setLayerGroup(this),n.setZIndex(r),_D(this.map)||this.map.getRootLayers().some((function(t){return t.equals(n)}))||(this.map.addLayers(n),n instanceof o&&this.map.addLayerGroup(n)))}},{key:"deleteChild",value:function(t){var e=t;e instanceof o?(e.parent=null,this.map.removeLayerGroup(e)):e instanceof Lc&&(this.map.removeLayers(e),this.ungroup(t))}},{key:"deleteChildren",value:function(t){t.forEach(this.deleteChild,this)}},{key:"ungroup",value:function(t){t.setLayerGroup(null),this.children_.remove(t)}},{key:"addChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t;Array.isArray(t)||(e=[e]),e.forEach(this.addChild,this)}},{key:"getChildren",value:function(){return this.children_}},{key:"getAllLayers",value:function(){var t=[];return this.getChildren().forEach((function(e){e instanceof Lc?t.push(e):e instanceof o&&(t=t.concat(e.getAllLayers()))})),t}},{key:"destroy",value:function(){this.map.removeLayers(this.getAllLayers())}}])&&Yd(e.prototype,r),n&&Yd(e,n),o}(il);function Jd(t){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qd(t,e,r){return(Qd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ng(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function tg(t,e){return(tg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function eg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ng(t);if(e){var i=ng(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rg(this,r)}}function rg(t,e){return!e||"object"!==Jd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ng(t){return(ng=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ig=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tg(t,e)}(o,t);var e,r,n,i=eg(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).mouseoutTimeId=null,t.panel=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t;var r=t.getMapImpl();this.panel=e.getElementsByTagName("div")[o.PANEL_ID],this.panel.addEventListener("click",this.clickLayer.bind(this),!1),this.panel.addEventListener("input",this.inputLayer.bind(this),!1),this.element=e,this.target_=null,r.addControl(this)}},{key:"inputLayer",value:function(t){var e=t||window.event,r=e.target.getAttribute("data-group-id");if(!_D(e.target)){var n=e.target.getAttribute("data-layer-name");if(!_D(n)){e.stopPropagation();var i=this.facadeMap_.getLayers().filter((function(t){return t.name===n}))[0];if(_D(i)&&!_D(r)&&(i=Kd.findGroupById(r,this.facadeMap_.getLayerGroup()).getChildren().find((function(t){return t instanceof Lc&&t.name===n}))),e.target.classList.contains("m-check")){if(!0===i.transparent||!i.isVisible()){var o=e.target.parentElement.parentElement.querySelector("div.tools > input");_D(o)||i.setOpacity(parseFloat(o.value)),i.setVisible(!i.isVisible())}}else e.target.classList.contains("m-layerswitcher-transparency")?i.setOpacity(parseFloat(e.target.value)):e.target.classList.contains("m-layerswitcher-remove")&&this.facadeMap_.removeLayers(i)}}}},{key:"clickLayer",value:function(t){var e=t||window.event,r=e.target.getAttribute("data-group-id"),n=null;if(!_D(e.target)){var i=e.target.getAttribute("data-layer-name");if(_D(i)){if(!_D(r)){var o=e.target.getAttribute("data-group-id");n=Kd.findGroupById(o,this.facadeMap_.getLayerGroup()),e.target.classList.contains("m-check")?e.target.classList.contains("g-cartografia-check3")?n.setVisible(!1):n.setVisible(!0):(n.collapsed=!n.collapsed,this.renderPanel())}}else{e.stopPropagation();var a=this.facadeMap_.getLayers().filter((function(t){return t.name===i}))[0];if(_D(a)&&!_D(r)&&(a=(n=Kd.findGroupById(r,this.facadeMap_.getLayerGroup())).getChildren().find((function(t){return t instanceof Lc&&t.name===i}))),e.target.classList.contains("m-check")){if(!0===a.transparent||!a.isVisible()){var s=e.target.parentElement.parentElement.querySelector("div.tools > input");_D(s)||a.setOpacity(parseFloat(s.value)),a.setVisible(!a.isVisible())}}else e.target.classList.contains("m-layerswitcher-transparency")?a.setOpacity(parseFloat(e.target.value)):e.target.classList.contains("m-layerswitcher-remove")&&(_D(n)?this.facadeMap_.removeLayers(a):(a.getImpl().destroy(),n.removeChild(a)))}}this.renderPanel()}},{key:"renderPanel",value:function(){var t=this;Hw.getTemplateVariables(this.facadeMap_).then((function(e){var r=bu(Nd.a,{vars:e});t.registerImgErrorEvents_(r);var n=r.querySelector("div#".concat(o.PANEL_ID));t.panel.innerHTML=n.innerHTML}))}},{key:"registerEvents",value:function(){var t=this;if(!_D(this.facadeMap_)){var e=this.facadeMap_.getMapImpl();this.registerViewEvents_(e.getView()),this.registerLayersEvents_(e.getLayers()),e.on("change:view",(function(){return t.onViewChange_.bind(t)}))}}},{key:"unregisterEvents",value:function(){var t=this;if(!_D(this.facadeMap_)){var e=this.facadeMap_.getMapImpl();this.unregisterViewEvents_(e.getView()),this.unregisterLayersEvents_(e.getLayers()),e.un("change:view",(function(){return t.onViewChange_.bind(t)}))}}},{key:"registerViewEvents_",value:function(t){var e=this;t.on("change:resolution",(function(){return e.renderPanel.bind(e)}))}},{key:"registerLayersEvents_",value:function(t){var e=this;t.forEach(this.registerLayerEvents_.bind(this)),t.on("remove",(function(){return e.renderPanel.bind(e)})),t.on("add",(function(){return e.onAddLayer_.bind(e)}))}},{key:"registerLayerEvents_",value:function(t){var e=this;t.on("change:visible",(function(){return e.renderPanel.bind(e)})),t.on("change:extent",(function(){return e.renderPanel.bind(e)}))}},{key:"unregisterViewEvents_",value:function(t){var e=this;t.un("change:resolution",(function(){return e.renderPanel.bind(e)}))}},{key:"unregisterLayersEvents_",value:function(t){var e=this;t.forEach(this.unregisterLayerEvents_.bind(this)),t.un("remove",(function(){return e.renderPanel.bind(e)})),t.un("add",(function(){return e.onAddLayer_.bind(e)}))}},{key:"unregisterLayerEvents_",value:function(t){var e=this;t.un("change:visible",(function(){return e.renderPanel.bind(e)})),t.un("change:extent",(function(){return e.renderPanel.bind(e)}))}},{key:"onViewChange_",value:function(t){this.unregisterViewEvents_(t.oldValue);var e=this.facadeMap_.getMapImpl();this.registerViewEvents_(e.getView())}},{key:"onAddLayer_",value:function(t){this.registerLayerEvents_(t.element),this.renderPanel()}},{key:"registerImgErrorEvents_",value:function(t){var e=this,r=t.querySelectorAll("img");Array.prototype.forEach.call(r,(function(t){t.addEventListener("error",(function(t){var r=t.target.getAttribute("data-layer-name"),n=FD([M.config.THEME_URL,Lc.LEGEND_ERROR]),i=e.facadeMap_.getLayers().filter((function(t){return t.name===r}))[0];_D(i)||i.setLegendURL(n)}))}))}},{key:"setMap",value:function(t){Qd(ng(o.prototype),"setMap",this).call(this,t),this.renderPanel()}}])&&$d(e.prototype,r),n&&$d(e,n),o}(pd);ig.PANEL_ID="m-layerswitcher-panel";var og=ig,ag=r(31),sg=r(77),lg=r.n(sg),ug=function(){function t(t){this.rbush_=new lg.a(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Object(Gn.c)(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var o=t[n],a=e[n],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=s,this.items_[Object(Gn.c)(a)]=s}this.rbush_.load(r)},t.prototype.remove=function(t){var e=Object(Gn.c)(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[Object(Gn.c)(e)],n=[r.minX,r.minY,r.maxX,r.maxY];Object(mt.p)(n,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return Object(ii.d)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(mt.l)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),cg=r(46),hg="addfeature",fg="changefeature",pg="clear",dg="removefeature",gg="featuresloadstart",yg="featuresloadend",mg="featuresloaderror";function _g(t,e){return[[-1/0,-1/0,1/0,1/0]]}var vg="arraybuffer",bg="json",xg="text",wg="xml",Eg=!1;function Og(t,e,r,n,i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,n,i):t,!0),e.getType()==vg&&(s.responseType="arraybuffer"),s.withCredentials=Eg,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var n=e.getType(),l=void 0;n==bg||n==xg?l=s.responseText:n==wg?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):n==vg&&(l=s.response),l?o(e.readFeatures(l,{extent:r,featureProjection:i}),e.readProjection(l)):a()}else a()},s.onerror=a,s.send()}function Sg(t,e){return function(r,n,i,o,a){var s=this;Og(t,e,r,n,i,(function(t,e){s.addFeatures(t),void 0!==o&&o(t)}),a||Dn.c)}}var Ig=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cg=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.feature=r,i.features=n,i}return Ig(e,t),e}(Ni.a),Tg=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,interpolate:!0,projection:void 0,state:Qn.a.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).on,r.once,r.un,r.loader_=Dn.c,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(Object(Ui.a)(r.format_,7),r.loader_=Sg(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:_g;var i,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=a?new ug:null,r.loadedExtentsRtree_=new ug,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(i=n.features).getArray()),a||void 0!==i||(i=new Fi(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==i&&r.bindFeaturesCollection_(i),r}return Ig(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(Gn.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Cg(hg,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(Ci.a)(e,Di.a.CHANGE,this.handleFeatureChange_,this),Object(Ci.a)(e,Kn.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&(Object(Ui.a)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],i=0,o=t.length;i<o;i++){var a=t[i],s=Object(Gn.c)(a);this.addToIndex_(s,a)&&r.push(a)}i=0;for(var l=r.length;i<l;i++){a=r[i],s=Object(Gn.c)(a);this.setupChangeEvents_(s,a);var u=a.getGeometry();if(u){var c=u.getExtent();e.push(c),n.push(a)}else this.nullGeometryFeatures_[s]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(hg)){i=0;for(var h=r.length;i<h;i++)this.dispatchEvent(new Cg(hg,r[i]))}},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(hg,(function(r){e||(e=!0,t.push(r.feature),e=!1)})),this.addEventListener(dg,(function(r){e||(e=!0,t.remove(r.feature),e=!1)})),t.addEventListener(Li,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(Mi,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(Ci.c)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var r=function(t){this.removeFeatureInternal(t)}.bind(this);for(var n in this.featuresRtree_.forEach(r),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new Cg(pg);this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(ii.d)(this.nullGeometryFeatures_)||Object(h.c)(t,Object(ii.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||Dn.b;return this.featuresRtree_.forEachInExtent(s,(function(t){if(l(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(r,n,o,a))<u){i=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=Object(Gn.c)(e),n=e.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new Cg(fg,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(Gn.c)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Object(ii.d)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},e.prototype.loadFeatures=function(t,e,r){for(var n=this.loadedExtentsRtree_,i=this.strategy_(t,e,r),o=function(t,o){var s=i[t];n.forEachInExtent(s,(function(t){return Object(mt.h)(t.extent,s)}))||(++a.loadingExtentsCount_,a.dispatchEvent(new Cg(gg)),a.loader_.call(a,s,e,r,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new Cg(yg,void 0,t))}.bind(a),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Cg(mg))}.bind(a)),n.insert(s,{extent:s.slice()}))},a=this,s=0,l=i.length;s<l;++s)o(s);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,(function(r){if(Object(mt.p)(r.extent,t))return e=r,!0})),e&&r.remove(e)},e.prototype.removeFeature=function(t){if(t){var e=Object(Gn.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var e=Object(Gn.c)(t),r=this.featureChangeKeys_[e];if(r){r.forEach(Ci.c),delete this.featureChangeKeys_[e];var n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Cg(dg,t)),t}},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Object(Ui.a)(this.format_,7),this.url_=t,this.setLoader(Sg(t,this.format_))},e}(cg.a),Pg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rg=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==e.distance?e.distance:20,r.minDistance=e.minDistance||0,r.interpolationRatio=0,r.features=[],r.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Object(Ui.a)(e.getType()==fo.a.POINT,10),e},r.createCustomCluster_=e.createCluster,r.source=null,r.boundRefresh_=r.refresh.bind(r),r.updateDistance(r.distance,r.minDistance),r.setSource(e.source||null),r}return Pg(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.resolution=e,this.refresh())},e.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},e.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},e.prototype.getMinDistance=function(){return this.minDistance},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(Di.a.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Di.a.CHANGE,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.updateDistance=function(t,e){var r=0===t?0:Math.min(e,t)/t,n=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=e,this.interpolationRatio=r,n&&this.refresh()},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=Object(mt.k)(),e=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!(Object(Gn.c)(a)in n)){var s=this.geometryFunction(a);if(s){var l=s.getCoordinates();Object(mt.n)(l,t),Object(mt.d)(t,e,t);var u=this.source.getFeaturesInExtent(t).filter((function(t){var e=Object(Gn.c)(t);return!(e in n)&&(n[e]=!0,!0)}));this.features.push(this.createCluster(u,t))}}}},e.prototype.createCluster=function(t,e){for(var r=[0,0],n=t.length-1;n>=0;--n){var i=this.geometryFunction(t[n]);i?Object(Wn.a)(r,i.getCoordinates()):t.splice(n,1)}Object(Wn.k)(r,1/t.length);var o=Object(mt.x)(e),a=this.interpolationRatio,s=new aa([r[0]*(1-a)+o[0]*a,r[1]*(1-a)+o[1]*a]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new Wc({geometry:s,features:t})},e}(Tg),Lg="top",Mg="middle",Ng="bottom",Ag="alphabetic",kg="hanging",jg="ideographic",Fg="left",Dg="center",Gg="right",Ug="justify",Bg=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),zg=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),Vg="point",qg="line",Yg=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Object(Aa.d)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new zg({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:Vg,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(Aa.d)(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),Wg="fraction",Xg="pixels",Hg="bottom-left",Zg="bottom-right",Kg="top-left",Jg="top-right",$g=r(14),Qg=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Object(Aa.d)(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return Object(Gn.b)()},t.prototype.getImage=function(t){return Object(Gn.b)()},t.prototype.getHitDetectionImage=function(){return Object(Gn.b)()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return Object(Gn.b)()},t.prototype.getImageSize=function(){return Object(Gn.b)()},t.prototype.getOrigin=function(){return Object(Gn.b)()},t.prototype.getSize=function(){return Object(Gn.b)()},t.prototype.setDisplacement=function(t){this.displacement_=t},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(Aa.d)(t)},t.prototype.listenImageChange=function(t){Object(Gn.b)()},t.prototype.load=function(){Object(Gn.b)()},t.prototype.unlistenImageChange=function(t){Object(Gn.b)()},t}(),ty=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ey=null,ry=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_={},s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=r,s.tainted_,s}return ty(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===$g.a.LOADED){ey||(ey=Object(oi.a)(1,1)),ey.drawImage(this.image_,0,0);try{ey.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ey=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Di.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=$g.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=$g.a.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],r=Object(oi.a)(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==$g.a.IDLE){this.imageState_=$g.a.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Object(op.b)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===$g.a.LOADED){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var r=e.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.isTainted_())r.fillStyle=Object(Bn.b)(this.color_),r.fillRect(0,0,e.width/t,e.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var n=r.getImageData(0,0,e.width,e.height),i=n.data,o=this.color_[0]/255,a=this.color_[1]/255,s=this.color_[2]/255,l=this.color_[3],u=0,c=i.length;u<c;u+=4)i[u]*=o,i[u+1]*=a,i[u+2]*=s,i[u+3]*=l;r.putImageData(n,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(ri.a);var ny=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iy=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.opacity?n.opacity:1,o=void 0!==n.rotation?n.rotation:0,a=void 0!==n.scale?n.scale:1,s=void 0!==n.rotateWithView&&n.rotateWithView;(r=t.call(this,{opacity:i,rotation:o,scale:a,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:s})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:Kg,r.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:Wg,r.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:Wg,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var l=void 0!==n.img?n.img:null;r.imgSize_=n.imgSize;var u=n.src;Object(Ui.a)(!(void 0!==u&&l),4),Object(Ui.a)(!l||l&&r.imgSize_,5),void 0!==u&&0!==u.length||!l||(u=l.src||Object(Gn.c)(l)),Object(Ui.a)(void 0!==u&&u.length>0,6);var c=void 0!==n.src?$g.a.IDLE:$g.a.LOADED;return r.color_=void 0!==n.color?Object(Bn.a)(n.color):null,r.iconImage_=function(t,e,r,n,i,o){var a=qn.get(e,n,o);return a||(a=new ry(t,e,r,n,i,o),qn.set(e,n,o,a)),a}(l,u,void 0!==r.imgSize_?r.imgSize_:null,r.crossOrigin_,c,r.color_),r.offset_=void 0!==n.offset?n.offset:[0,0],r.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:Kg,r.origin_=null,r.size_=void 0!==n.size?n.size:null,r}return ny(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if(this.anchorXUnits_==Wg||this.anchorYUnits_==Wg){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Wg&&(t[0]*=e[0]),this.anchorYUnits_==Wg&&(t[1]*=e[1])}if(this.anchorOrigin_!=Kg){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Jg&&this.anchorOrigin_!=Zg||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Hg&&this.anchorOrigin_!=Zg||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var r=this.getDisplacement();return[t[0]-r[0],t[1]+r[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Kg){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),this.offsetOrigin_!=Jg&&this.offsetOrigin_!=Zg||(t[0]=r[0]-e[0]-t[0]),this.offsetOrigin_!=Hg&&this.offsetOrigin_!=Zg||(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Di.a.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Di.a.CHANGE,t)},e}(Qg),oy=function(){function t(){}return t.prototype.drawCustom=function(t,e,r,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();function ay(t){return Array.isArray(t)?Object(Bn.e)(t):t}var sy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ly=function(t){function e(e,r,n,i,o,a,s){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=r,l.extent_=n,l.transform_=i,l.viewRotation_=o,l.squaredTolerance_=a,l.userTransform_=s,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=Object(Un.d)(),l}return sy(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var i=Ro(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var u=0,c=i.length;u<c;u+=2){var h=i[u]-this.imageAnchorX_,f=i[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=h+this.imageAnchorX_,d=f+this.imageAnchorY_;Object(Un.b)(a,p,d,1,1,l,-p,-d),o.setTransform.apply(o,a),o.translate(p,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Ro(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,l=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){var u=Object(Un.b)(this.tmpLocalTransform_,s,l,1,1,a,-s,-l);o.setTransform.apply(o,u),o.translate(s,l),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l)}}},e.prototype.moveToLineTo_=function(t,e,r,n,i){var o=this.context_,a=Ro(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return i&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e},e.prototype.drawCircle=function(t){if(Object(mt.G)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return Ro(n,0,n.length,i,e,r)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case fo.a.POINT:this.drawPoint(t);break;case fo.a.LINE_STRING:this.drawLineString(t);break;case fo.a.POLYGON:this.drawPolygon(t);break;case fo.a.MULTI_POINT:this.drawMultiPoint(t);break;case fo.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case fo.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case fo.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case fo.a.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&Object(mt.G)(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(mt.G)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Object(mt.G)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,l=o.length;s<l;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(mt.G)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(mt.G)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var l=i[a];n=this.drawRings_(r,n,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Object(h.b)(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:fi;r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var r=this;if(t){var n=t.getColor();this.fillState_={fillStyle:ay(n||si)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),c=e.getMiterLimit(),h=a||ui;this.strokeState_={lineCap:void 0!==o?o:li,lineDash:1===this.pixelRatio_?h:h.map((function(t){return t*r.pixelRatio_})),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==l?l:ci,lineWidth:(void 0!==u?u:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:ay(i||hi)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var r=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:ay(r||si)}}else this.textFillState_=null;var n=t.getStroke();if(n){var i=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),l=n.getLineJoin(),u=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:li,lineDash:a||ui,lineDashOffset:s||0,lineJoin:void 0!==l?l:ci,lineWidth:void 0!==u?u:1,miterLimit:void 0!==c?c:10,strokeStyle:ay(i||hi)}}else this.textStrokeState_=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScaleArray(),m=t.getText(),_=t.getTextAlign(),v=t.getTextBaseline();this.textState_={font:void 0!==h?h:ai,textAlign:void 0!==_?_:fi,textBaseline:void 0!==v?v:pi},this.text_=void 0!==m?Array.isArray(m)?m.reduce((function(t,e,r){return t+(r%2?" ":e)}),""):m:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""},e}(oy),uy="Circle",cy="Default",hy="Image",fy="LineString",py="Polygon",dy="Text",gy={Point:function(t,e,r,n,i){var o,a=r.getImage(),s=r.getText();i&&(t=i,o=a&&s&&s.getText()?{}:void 0);if(a){if(a.getImageState()!=$g.a.LOADED)return;var l=t.getBuilder(r.getZIndex(),hy);l.setImageStyle(a,o),l.drawPoint(e,n)}if(s&&s.getText()){var u=t.getBuilder(r.getZIndex(),dy);u.setTextStyle(s,o),u.drawText(e,n)}},LineString:function(t,e,r,n,i){var o=r.getStroke();if(o){var a=t.getBuilder(r.getZIndex(),fy);a.setFillStrokeStyle(null,o),a.drawLineString(e,n)}var s=r.getText();if(s&&s.getText()){var l=(i||t).getBuilder(r.getZIndex(),dy);l.setTextStyle(s),l.drawText(e,n)}},Polygon:function(t,e,r,n,i){var o=r.getFill(),a=r.getStroke();if(o||a){var s=t.getBuilder(r.getZIndex(),py);s.setFillStrokeStyle(o,a),s.drawPolygon(e,n)}var l=r.getText();if(l&&l.getText()){var u=(i||t).getBuilder(r.getZIndex(),dy);u.setTextStyle(l),u.drawText(e,n)}},MultiPoint:function(t,e,r,n,i){var o,a=r.getImage(),s=r.getText();i&&(t=i,o=a&&s&&s.getText()?{}:void 0);if(a){if(a.getImageState()!=$g.a.LOADED)return;var l=t.getBuilder(r.getZIndex(),hy);l.setImageStyle(a,o),l.drawMultiPoint(e,n)}if(s&&s.getText()){var u=(i||t).getBuilder(r.getZIndex(),dy);u.setTextStyle(s,o),u.drawText(e,n)}},MultiLineString:function(t,e,r,n,i){var o=r.getStroke();if(o){var a=t.getBuilder(r.getZIndex(),fy);a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,n)}var s=r.getText();if(s&&s.getText()){var l=(i||t).getBuilder(r.getZIndex(),dy);l.setTextStyle(s),l.drawText(e,n)}},MultiPolygon:function(t,e,r,n,i){var o=r.getFill(),a=r.getStroke();if(a||o){var s=t.getBuilder(r.getZIndex(),py);s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,n)}var l=r.getText();if(l&&l.getText()){var u=(i||t).getBuilder(r.getZIndex(),dy);u.setTextStyle(l),u.drawText(e,n)}},GeometryCollection:function(t,e,r,n,i){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o){(0,gy[s[o].getType()])(t,s[o],r,n,i)}},Circle:function(t,e,r,n,i){var o=r.getFill(),a=r.getStroke();if(o||a){var s=t.getBuilder(r.getZIndex(),uy);s.setFillStrokeStyle(o,a),s.drawCircle(e,n)}var l=r.getText();if(l&&l.getText()){var u=(i||t).getBuilder(r.getZIndex(),dy);u.setTextStyle(l),u.drawText(e,n)}}};function yy(t,e){return parseInt(Object(Gn.c)(t),10)-parseInt(Object(Gn.c)(e),10)}function my(t,e){var r=_y(t,e);return r*r}function _y(t,e){return.5*t/e}function vy(t,e,r,n,i,o,a){var s=!1,l=r.getImage();if(l){var u=l.getImageState();u==$g.a.LOADED||u==$g.a.ERROR?l.unlistenImageChange(i):(u==$g.a.IDLE&&l.load(),u=l.getImageState(),l.listenImageChange(i),s=!0)}return function(t,e,r,n,i,o){var a=r.getGeometryFunction()(e);if(!a)return;var s=a.simplifyTransformed(n,i);if(r.getRenderer())by(t,s,r,e);else{(0,gy[s.getType()])(t,s,r,e,o)}}(t,e,r,n,o,a),s}function by(t,e,r,n){if(e.getType()!=fo.a.GEOMETRY_COLLECTION)t.getBuilder(r.getZIndex(),cy).drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer());else for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)by(t,i[o],r,n)}function xy(t,e){var r=t.canvas,n=e||{},i=n.pixelRatio||ni.a,o=n.size;o&&(r.width=o[0]*i,r.height=o[1]*i,r.style.width=o[0]+"px",r.style.height=o[1]+"px");var a=[0,0,r.width,r.height],s=Object(Un.j)(Object(Un.d)(),i,i);return new ly(t,i,a,s,0)}function wy(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var e,r=t.inversePixelTransform[0],n=t.frameState,i=Object(Un.g)(t.inversePixelTransform.slice(),n.coordinateToPixelTransform),o=my(n.viewState.resolution,r),a=Object(u.s)();return a&&(e=Object(u.r)(a,n.viewState.projection)),new ly(t.context,r,n.extent,i,n.viewState.rotation,o,e)}function Ey(t){return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Iy(t,e){return(Iy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Py(t);if(e){var i=Py(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ty(this,r)}}function Ty(t,e){return!e||"object"!==Ey(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Py(t){return(Py=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ry=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iy(t,e)}(o,t);var e,r,n,i=Cy(o);function o(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oy(this,o);var n=document.createElement("canvas"),a=Number(r.scale)>0?Number(r.scale):1,s=a*ni.a||ni.a,l=n.getContext("2d");if(r.image){r.image.load();var u=r.image.getImage();u.width?(n.width=Math.round(u.width*s),n.height=Math.round(u.height*s),l.globalAlpha="number"==typeof r.opacity?r.opacity:1,l.drawImage(u,0,0,u.width,u.height,0,0,n.width,n.height),e=l.createPattern(n,"repeat")):(e=[0,0,0,0],u.onload=function(){n.width=Math.round(u.width*s),n.height=Math.round(u.height*s),l.globalAlpha="number"==typeof r.opacity?r.opacity:1,l.drawImage(u,0,0,u.width,u.height,0,0,n.width,n.height),e=l.createPattern(n,"repeat"),this.color_=e,this.checksum_=void 0})}else{var c=o.getPattern(r);if(n.width=Math.round(c.width*s),n.height=Math.round(c.height*s),l.beginPath(),r.fill&&(l.fillStyle=Object(Bn.b)(r.fill.getColor()),l.fillRect(0,0,n.width,n.height)),l.scale(s,s),l.lineCap="round",l.lineWidth=c.stroke||1,l.fillStyle=Object(Bn.b)(r.color||"#000"),l.strokeStyle=Object(Bn.b)(r.color||"#000"),c.circles)for(var h=0;h<c.circles.length;h+=1){var f=c.circles[h];l.beginPath(),l.arc(f[0],f[1],f[2],0,2*Math.PI),c.fill&&l.fill(),c.stroke&&l.stroke()}if(c.repeat||(c.repeat=[[0,0]]),c.char&&(l.font=c.font||"".concat(c.width,"px Arial"),l.textAlign="center",l.textBaseline="middle",c.angle?(l.fillText(c.char,c.width/4,c.height/4),l.fillText(c.char,5*c.width/4,5*c.height/4),l.fillText(c.char,c.width/4,5*c.height/4),l.fillText(c.char,5*c.width/4,c.height/4),l.fillText(c.char,3*c.width/4,3*c.height/4),l.fillText(c.char,-c.width/4,-c.height/4),l.fillText(c.char,3*c.width/4,-c.height/4),l.fillText(c.char,-c.width/4,3*c.height/4)):l.fillText(c.char,c.width/2,c.height/2)),c.lines)for(var p=0;p<c.lines.length;p+=1)for(var d=0;d<c.repeat.length;d+=1){var g=c.lines[p];l.beginPath(),l.moveTo(g[0]+c.repeat[d][0],g[1]+c.repeat[d][1]);for(var y=2;y<g.length;y+=2)l.lineTo(g[y]+c.repeat[d][0],g[y+1]+c.repeat[d][1]);c.fill&&l.fill(),c.stroke&&l.stroke(),l.save(),l.strokeStyle="red",l.strokeWidth=.1,l.restore()}if(e=l.createPattern(n,"repeat"),r.offset){var m=r.offset;if("number"==typeof m&&(m=[m,m]),m instanceof Array){var _=Math.round(m[0]*s),v=Math.round(m[1]*s);l.scale(1/s,1/s),l.clearRect(0,0,n.width,n.height),l.translate(_,v),l.fillStyle=e,l.fillRect(-_,-v,n.width,n.height),e=l.createPattern(n,"repeat")}}}return(t=i.call(this,{color:e})).canvas_=n,t.options_=r,t}return e=o,n=[{key:"getPattern",value:function(t){var e=t,r=o.patterns[e.pattern]||o.patterns.dot,n=Math.round(e.spacing)||10;switch(e.pattern){case"dot":case"circle":var i=0===e.size?0:e.size/2||2;e.angle?(n=Math.round(1.4*n),r.width=n,r.height=n,r.circles=[[n/4,n/4,i],[3*n/4,3*n/4,i]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,i],[n/4,n/4+n,i],[3*n/4-n,3*n/4,i],[3*n/4,3*n/4-n,i],[n/4+n,n/4+n,i],[3*n/4-n,3*n/4-n,i]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,i]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,i],[n/2-n,n/2,i],[n/2,n/2+n,i],[n/2,n/2-n,i],[n/2+n,n/2+n,i],[n/2+n,n/2-n,i],[n/2-n,n/2+n,i],[n/2-n,n/2-n,i]])));break;case"tile":case"square":i=0===e.size?0:e.size/2||2,e.angle?(r.width=n,r.height=n,r.lines=[[n/2-i,n/2,n/2,n/2-i,n/2+i,n/2,n/2,n/2+i,n/2-i,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-i,n/2-i,n/2+i,n/2-i,n/2+i,n/2+i,n/2-i,n/2+i,n/2-i,n/2-i]]),"square"===e.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":case"hatch":"cross"===e.pattern&&e.angle&&(e.angle=45);var a=Math.round(((e.angle||0)-90)%360);a>180&&(a-=360),a*=Math.PI/180;var s=Math.cos(a),l=Math.sin(a);if(Math.abs(l)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(s)<1e-4)r.height=n,r.width=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===e.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{r.width=Math.round(Math.abs(n/l))||1,r.height=Math.round(Math.abs(n/s))||1;var u=r.width,c=r.height;"cross"===e.pattern?(r.lines=[[-u,-c,2*u,2*c],[2*u,-c,-u,2*c]],r.repeat=[[0,0]]):s*l>0?(r.lines=[[-u,-c,2*u,2*c]],r.repeat=[[0,0],[u,0],[0,c]]):(r.lines=[[2*u,-c,-u,2*c]],r.repeat=[[0,0],[-u,0],[0,c]])}r.stroke=0===e.size?0:e.size||4}return r}},{key:"addPattern",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}}}],(r=[{key:"clone",value:function(){return new o(this.options_)}},{key:"getImage",value:function(){return this.canvas_}}])&&Sy(e.prototype,r),n&&Sy(e,n),o}(zg);function Ly(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function My(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Ry.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};var Ny=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ly(this,t),this.options_=e,this.layer_=null,this.updateFacadeOptions(e)}var e,r,n;return e=t,n=[{key:"getCanvasSize",value:function(){return[100,100]}}],(r=[{key:"updateFacadeOptions",value:function(){}},{key:"applyToLayer",value:function(t){this.layer_=t,t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"updateCanvas",value:function(e){var r=t.getCanvasSize(),n=xy(e.getContext("2d"),{size:r});n.setStyle(this.olStyleFn_()[0]),this.drawGeometryToCanvas(n)}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"clone",value:function(){return new t(Object.assign({},this.options_))}}])&&My(e.prototype,r),n&&My(e,n),t}();function Ay(t){return(Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ky(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fy(t,e){return(Fy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Uy(t);if(e){var i=Uy(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Gy(this,r)}}function Gy(t,e){return!e||"object"!==Ay(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uy(t){return(Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var By=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fy(t,e)}(o,t);var e,r,n,i=Dy(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ky(this,o),(t=i.call(this,e)).updateFacadeOptions(e),t}return e=o,n=[{key:"getValue",value:function(t,e,r){var n=/^\{\{([^}]+)\}\}$/,i=t;if(n.test(t)||vD(t))if(e instanceof Wc||e instanceof lh){var o=cG.olFeature2Facade(e,!1);if(n.test(t)){var a=t.replace(n,"$1");i=o.getAttribute(a)}else if(vD(t)){var s;_D(r)||(s=r.getImpl().getMap()),i=t(o,s)}}else i=void 0;return _D(i)&&(i=void 0),i}}],(r=[{key:"applyToLayer",value:function(t){this.layer_=t;var e=t.getImpl().getOLLayer();_D(e)||e.setStyle(this.olStyleFn_)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"olStyleFn",get:function(){return this.olStyleFn_}}])&&jy(e.prototype,r),n&&jy(e,n),o}(Ny),zy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vy=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=void 0,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.size_=null,r.renderOptions_=null,r.render(),r}return zy(e,t),e.prototype.clone=function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return r.setOpacity(this.getOpacity()),r},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement();return[t[0]/2-e[0],t[1]/2+e[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var r=this.renderOptions_,n=Object(oi.a)(r.size*t,r.size*t);this.draw_(r,n,t),e=n.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return $g.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,r){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var n=this.radius_,i=void 0===this.radius2_?n:this.radius2_;if(n<i){var o=n;n=i,i=o}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,l=i*Math.sin(s),u=n-Math.sqrt(i*i-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=r)return h*e;var f=e/2/h,p=e/2*(u/c),d=Math.sqrt((n+f)*(n+f)+p*p)-n;if(void 0===this.radius2_||"bevel"===t)return 2*d;var g=n*Math.sin(s),y=i-Math.sqrt(n*n-g*g),m=Math.sqrt(g*g+y*y)/g;if(m<=r){var _=m*e/2-i-n;return 2*Math.max(d,_)}return 2*d},e.prototype.createRenderOptions=function(){var t,e=ci,r=0,n=null,i=0,o=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=hi),t=ay(t),void 0===(o=this.stroke_.getWidth())&&(o=1),n=this.stroke_.getLineDash(),i=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=ci),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));var a=this.calculateLineJoinSize_(e,o,r),s=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*s+a),lineDash:n,lineDashOffset:i,lineJoin:e,miterLimit:r}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=si),e.fillStyle=ay(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=Object(Bn.a)(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var n=Object(oi.a)(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,r=this.radius_;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{var n=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=i+a*o,l=a%2==0?r:n;t.lineTo(l*Math.cos(s),l*Math.sin(s))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=si,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(Qg),qy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yy=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:void 0!==r.scale?r.scale:1,rotation:void 0!==r.rotation?r.rotation:0,rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return qy(e,t),e.prototype.clone=function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return r.setOpacity(this.getOpacity()),r},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Vy);function Wy(t){return(Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Xy=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Jy,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===Wy(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Jy,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var Hy=null;function Zy(t,e){if(!Hy){var r=new zg({color:"rgba(255,255,255,0.4)"}),n=new Bg({color:"#3399CC",width:1.25});Hy=[new Xy({image:new Yy({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return Hy}function Ky(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[fo.a.POLYGON]=[new Xy({fill:new zg({color:[255,255,255,.5]})})],t[fo.a.MULTI_POLYGON]=t[fo.a.POLYGON],t[fo.a.LINE_STRING]=[new Xy({stroke:new Bg({color:e,width:5})}),new Xy({stroke:new Bg({color:r,width:3})})],t[fo.a.MULTI_LINE_STRING]=t[fo.a.LINE_STRING],t[fo.a.CIRCLE]=t[fo.a.POLYGON].concat(t[fo.a.LINE_STRING]),t[fo.a.POINT]=[new Xy({image:new Yy({radius:6,fill:new zg({color:r}),stroke:new Bg({color:e,width:1.5})}),zIndex:1/0})],t[fo.a.MULTI_POINT]=t[fo.a.POINT],t[fo.a.GEOMETRY_COLLECTION]=t[fo.a.POLYGON].concat(t[fo.a.LINE_STRING],t[fo.a.POINT]),t}function Jy(t){return t.getGeometry()}var $y=Xy;function Qy(t){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function em(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rm(t,e){return(rm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=om(t);if(e){var i=om(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return im(this,r)}}function im(t,e){return!e||"object"!==Qy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function om(t){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var am=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rm(t,e)}(o,t);var e,r,n,i=nm(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tm(this,o),i.call(this,t)}return e=o,(r=[{key:"clone",value:function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new o({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}}])&&em(e.prototype,r),n&&em(e,n),o}($y);function sm(t){return(sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function um(t,e){return(um=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fm(t);if(e){var i=fm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hm(this,r)}}function hm(t,e){return!e||"object"!==sm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fm(t){return(fm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&um(t,e)}(s,t);var e,r,o,a=cm(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=s,o=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var o=r;o instanceof Wc||r instanceof lh||(o=e);var a=new am;if(_D(t.stroke)||a.setStroke(new Bg({color:By.getValue(t.stroke.color,o,e.layer_),width:By.getValue(t.stroke.width,o,e.layer_),lineDash:By.getValue(t.stroke.linedash,o,e.layer_),lineDashOffset:By.getValue(t.stroke.linedashoffset,o,e.layer_),lineCap:By.getValue(t.stroke.linecap,o,e.layer_),lineJoin:By.getValue(t.stroke.linejoin,o,e.layer_),miterLimit:By.getValue(t.stroke.miterlimit,o,e.layer_)})),!_D(t.label)){var s=By.getValue(t.label.text,o,e.layer_),u=By.getValue(t.label.align,o,e.layer_),c=By.getValue(t.label.baseline,o,e.layer_),h=!!_D(t.label.overflow,e.layer_)||t.label.overflow;a.setText(new Yg({font:By.getValue(t.label.font,o,e.layer_),rotateWithView:By.getValue(t.label.rotate,o,e.layer_),scale:By.getValue(t.label.scale,o,e.layer_),offsetX:By.getValue(t.label.offset?t.label.offset[0]:void 0,o,e.layer_),offsetY:By.getValue(t.label.ofsset?t.label.offset[1]:void 0,o,e.layer_),fill:new zg({color:By.getValue(t.label.color||"#000000",o,e.layer_)}),textAlign:Object.values(i).includes(u)?u:"center",textBaseline:Object.values(n).includes(c)?c:"top",text:void 0===s?void 0:String(s),rotation:By.getValue(t.label.rotation,o,e.layer_),overflow:By.getValue(h,o,e.layer_)})),_D(t.label.stroke)||a.getText().setStroke(new Bg({color:By.getValue(t.label.stroke.color,o,e.layer_),width:By.getValue(t.label.stroke.width,o,e.layer_),lineCap:By.getValue(t.label.stroke.linecap,o,e.layer_),lineJoin:By.getValue(t.label.stroke.linejoin,o,e.layer_),lineDash:By.getValue(t.label.stroke.linedash,o,e.layer_),lineDashOffset:By.getValue(t.label.stroke.linedashoffset,o,e.layer_),miterLimit:By.getValue(t.label.stroke.miterlimit,o,e.layer_)}))}if(!_D(t.fill)){var f,p=By.getValue(t.fill.color,o,e.layer_),d=By.getValue(t.fill.opacity,o,e.layer_);if(d||0===d||(d=1),_D(p)||(f=new zg({color:l()(p).alpha(d).css()})),_D(t.fill.pattern))a.setFill(f);else{var g="rgba(0,0,0,1)";if(!_D(t.fill.pattern.color)){var y=By.getValue(t.fill.pattern.opacity,o,e.layer_)||1;y||0===y||(y=1),g=l()(t.fill.pattern.color).alpha(y).css()}a.setFill(new Ry({pattern:(By.getValue(t.fill.pattern.name,o,e.layer_)||"").toLowerCase(),color:g,size:By.getValue(t.fill.pattern.size,o,e.layer_),spacing:By.getValue(t.fill.pattern.spacing,o,e.layer_),image:"IMAGE"===By.getValue(t.fill.pattern.name,o,e.layer_)?new iy({src:By.getValue(t.fill.pattern.src,o,e.layer_)}):void 0,angle:By.getValue(t.fill.pattern.rotation,o,e.layer_),scale:By.getValue(t.fill.pattern.scale,o,e.layer_),offset:By.getValue(t.fill.pattern.offset,o,e.layer_),fill:f}))}}return[a]}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e=s.getCanvasSize(),r=xy(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];_D(n.getText())||n.setText(null);var i=n.getStroke();_D(i)||_D(i.getWidth())||i.getWidth()>s.DEFAULT_WIDTH_POLYGON&&n.getStroke().setWidth(s.DEFAULT_WIDTH_POLYGON),r.setStyle(n),this.drawGeometryToCanvas(r)}},{key:"drawGeometryToCanvas",value:function(t){var e=s.getCanvasSize(),r=Math.floor(e[0]),n=Math.floor(e[1]),i=e[0]-r,o=e[1]-n;t.drawGeometry(new Oa([[[i+3,o+3],[r-3,o+3],[r-3,n-3],[i+3,n-3],[i+3,o+3]]]))}}])&&lm(e.prototype,r),o&&lm(e,o),s}(By);pm.DEFAULT_WIDTH_POLYGON=3;var dm=pm;function gm(t){return(gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ym(t){return function(t){if(Array.isArray(t))return mm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return mm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mm(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vm(t,e){return(vm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wm(t);if(e){var i=wm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xm(this,r)}}function xm(t,e){return!e||"object"!==gm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wm(t){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Em=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vm(t,e)}(o,t);var e,r,n,i=bm(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,e)).options_=t,r.canvas_=document.createElement("canvas"),r.updateCanvasPromise_=null,r.layer_=null,r}return e=o,n=[{key:"setValue",value:function(t,e,r){var n=r,i=t,a=mD(e)?e:e.split("."),s=a.length,l=a[0];1===s?(mD(n)?n=ym(n):bD(n)&&(n=Object.assign({},n)),i[l]=n):s>1&&(_D(i[l])&&(i[l]={}),o.setValue(i[l],a.slice(1,s),n))}},{key:"deserialize",value:function(t){var e=decodeURIComponent(escape(window.atob(t))),r=JSON.parse(e),n=r.parameters,i=r.deserializedMethod;return new Function("serializedParams","return ".concat(i,"(serializedParams)"))(n)}}],(r=[{key:"apply",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"unapply",value:function(t){}},{key:"get",value:function(t){var e;if(e=this.options_[t],_D(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return _D(t)||(r=t[e],t instanceof o&&(r=t.get(e))),r}),this))}return e}},{key:"set",value:function(t,e){var r=this.get(t);return o.setValue(this.options_,t,e),_D(this.layer_)||this.getImpl().updateFacadeOptions(this.options_),_D(this.feature_)||this.applyToFeature(this.feature_),this.fire(Zl,[t,r,e]),this.refresh(),this}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_D(t)||(this.layer_=t),!_D(this.layer_)&&(this.apply(this.layer_),this.updateCanvas(),!_D(this.layer_.getImpl().getMap()))){var e=this.layer_.getImpl().getMap().getControls("layerswitcher")[0];_D(e)||e.render()}}},{key:"getOptions",value:function(){return this.options_}},{key:"toImage",value:function(){var t,e=this;if(_D(this.updateCanvasPromise_))if(_D(this.options_.icon)||_D(this.options_.icon.src))t=this.canvas_.toDataURL("png");else{var r=new Image;r.crossOrigin="Anonymous";var n=this.canvas_;r.onload=function(){n.getContext("2d").drawImage(e,0,0,50,50)},r.src=this.options_.icon.src,t=this.canvas_.toDataURL("png")}else t=this.updateCanvasPromise_.then((function(){return e.canvas_.toDataURL("png")}));return t}},{key:"updateCanvas",value:function(){this.updateCanvasPromise_=this.getImpl().updateCanvas(this.canvas_)}},{key:"equals",value:function(t){return this.constructor===t.constructor}},{key:"clone",value:function(){var t={};HD(t,this.options_);var e=new(0,this.getImpl().constructor)(t);return new this.constructor(t,e)}},{key:"toJSON",value:function(){return{parameters:[$D(this.getOptions())],deserializedMethod:this.getDeserializedMethod_()}}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this))))}},{key:"canvas",get:function(){return this.canvas_}}])&&_m(e.prototype,r),n&&_m(e,n),o}(Il);function Om(t){return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Im(t,e){return(Im=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Pm(t);if(e){var i=Pm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Tm(this,r)}}function Tm(t,e){return!e||"object"!==Om(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pm(t){return(Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Im(t,e)}(o,t);var e,r,n,i=Cm(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).feature_=null,r}return e=o,(r=[{key:"applyToFeature",value:function(t){this.feature_=t,this.getImpl().applyToFeature(t)}}])&&Sm(e.prototype,r),n&&Sm(e,n),o}(Em);function Lm(t){return(Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mm(t){return function(t){if(Array.isArray(t))return Nm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Nm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nm(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Am(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function km(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jm(t,e,r){return(jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Um(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Fm(t,e){return(Fm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Um(t);if(e){var i=Um(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Gm(this,r)}}function Gm(t,e){return!e||"object"!==Lm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Um(t){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fm(t,e)}(o,t);var e,r,n,i=Dm(o);function o(){return Am(this,o),i.apply(this,arguments)}return e=o,n=[{key:"deserialize",value:function(t,e){var r=QD(t),n=r.map((function(t,e){return"arg".concat(e)})),i=n.reduce((function(t,e){return t.concat(", ").concat(e)}));return new Function(n,"return new ".concat(e,"(").concat(i,")")).apply(void 0,Mm(r))}}],(r=[{key:"apply",value:function(t,e,r){var n=this;this.layer_=t,this.getImpl().applyToLayer(t),!0===e&&(r?t.getFeatures().forEach((function(t){t.style=null})):t.getFeatures().forEach((function(t){t.setStyle(n.clone())}))),this.updateCanvas()}},{key:"toImage",value:function(){var t=jm(Um(o.prototype),"toImage",this).call(this),e={fill:this.options_.fill,stroke:this.options_.stroke};return!0===nG(e)&&(t=oG(this.canvas_)),t}},{key:"ORDER",get:function(){return 1}}])&&km(e.prototype,r),n&&km(e,n),o}(Rm);function zm(t){return(zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ym(t,e){return(Ym=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hm(t);if(e){var i=Hm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xm(this,r)}}function Xm(t,e){return!e||"object"!==zm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hm(t){return(Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ym(t,e)}(o,t);var e,r,n,i=Wm(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Vm(this,o);var r=e,n=new dm(r);return t=i.call(this,r,n),_D(r)&&(r=o.DEFAULT_NULL),r=HD({},r),t}return e=o,(r=[{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Polygon'))"}}])&&qm(e.prototype,r),n&&qm(e,n),o}(Bm);Zm.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var Km=Zm;function Jm(t){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t_(t,e){return(t_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function e_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=n_(t);if(e){var i=n_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return r_(this,r)}}function r_(t,e){return!e||"object"!==Jm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function n_(t){return(n_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&t_(t,e)}(o,t);var e,r,n,i=e_(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$m(this,o);var r=0;return e.stroke&&(r=e.stroke.getWidth()),t=i.call(this,{radius:e.radius,fill:e.fill,rotation:e.rotation,rotateWithView:e.rotateWithView}),"number"==typeof e.opacity&&t.setOpacity(e.opacity),t.color_=e.color,t.fontSize_=e.fontSize||1,t.stroke_=e.stroke,t.fill_=e.fill,t.radius_=e.radius-r,t.form_=e.form||"none",t.gradient_=e.gradient,t.offset_=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],t.glyph_=t.getGlyph(e.glyph)||"",t.renderMaker(),t}return e=o,n=[{key:"addDefs",value:function(t,e){var r=t;if("string"==typeof t&&(r={font:t,name:t,copyright:""}),!r.font||"string"!=typeof r.font)throw new Error("bad font def");var n=r.font;o.defs.fonts[n]=r,Object.keys(e).forEach((function(t){var n=e[t];"string"==typeof n&&1===n.length&&(n={char:n}),o.defs.glyphs[t]={font:r.font,char:n.char||"".concat(String.fromCharCode(n.code))||"",theme:n.theme||r.name,name:n.name||t,search:n.search||""}}))}}],(r=[{key:"clone",value:function(){var t=new o({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setScale(this.getScale()),t.setGlyph(this.getGlyph()),t.renderMaker(),t}},{key:"setGlyph",value:function(t){this.glyph_=t}},{key:"getFill",value:function(){return this.fill_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getGlyph",value:function(t){var e=this.glyph_;return t&&(e=(e=o.defs.glyphs[t])||{font:"none",char:t.charAt(0),theme:"none",name:"none",search:""}),e}},{key:"getGlyphName",value:function(){var t=this,e="";return Object.keys(o.defs.glyphs).forEach((function(r){o.defs.glyph[r]===t.glyph_&&(e=r)})),e}},{key:"getFontInfo",value:function(t){return o.defs.fonts[t.font]}},{key:"renderMaker",value:function(t){var e,r=0;this.stroke_&&(e=Object(Bn.b)(this.stroke_.getColor()),r=this.stroke_.getWidth());var n=this.getImage(1);n.height+=1,n.width+=1;var i={strokeStyle:e,strokeWidth:r,size:n.width},o=n.getContext("2d");o.clearRect(0,0,n.width,n.height),this.drawMarker_(i,o,0,0);var a=this.getAnchor();a[0]=n.width/2-this.offset_[0],a[1]=n.width/2-this.offset_[1]}},{key:"drawPath_",value:function(t,e){var r=e,n=2*this.radius_+t.strokeWidth,i=t.strokeWidth/2,o=t.size/2,a={fac:1,posX:t.size/2,posY:t.size/2};r.lineJoin="round",r.beginPath();var s=Math.PI;switch(this.form_){case"none":a.fac=1;break;case"circle":case"ban":r.arc(o,o,n/2,0,2*Math.PI,!0);break;case"poi":r.arc(o,o-.4*this.radius_,.6*this.radius_,.15*s,.85*s,!0),r.lineTo(o-.89*.05*n,(.95+.45*.05)*n+i),r.arc(o,.95*n+i,.05*n,.85*Math.PI,.15*Math.PI,!0),a={fac:.45,posX:o,posY:o-.35*this.radius_};break;case"bubble":r.arc(o,o-.2*this.radius_,.8*this.radius_,.4*s,.6*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"marker":r.arc(o,o-.2*this.radius_,.8*this.radius_,.25*s,.75*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"coma":r.moveTo(o+.8*this.radius_,o-.2*this.radius_),r.quadraticCurveTo(.95*n+i,.75*n+i,.5*n+i,n+i),r.arc(o,o-.2*this.radius_,.8*this.radius_,.45*s,0,!1),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;default:var l;switch(this.form_){case"shield":l=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],a.posY=.45*n+i;break;case"blazon":l=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],a.fac=.8,a.posY=.4*n+i;break;case"bookmark":l=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],a.fac=.9,a.posY=.4*n+i;break;case"hexagon":l=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],a.fac=.9,a.posY=.5*n+i;break;case"diamond":l=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],a.fac=.75,a.posY=.35*n+i;break;case"triangle":l=[0,0,1,0,.5,1,0,0],a.fac=.6,a.posY=.3*n+i;break;case"sign":l=[.5,.05,1,.95,0,.95,.5,.05],a.fac=.7,a.posY=.65*n+i;break;case"lozenge":l=[.5,0,1,.5,.5,1,0,.5,.5,0],a.fac=.7;break;default:l=[0,0,1,0,1,1,0,1,0,0]}for(var u=0;u<l.length;u+=2)r.lineTo(l[u]*n+i,l[u+1]*n+i)}return r.closePath(),a}},{key:"drawMarker_",value:function(t,e,r,n){var i=e,o=this.fill_?this.fill_.getColor():"#000",a=this.stroke_?this.stroke_.getColor():"#000";"none"===this.form_&&this.stroke_&&this.fill_&&(a=this.fill_.getColor(),o=this.stroke_.getColor()),i.setTransform(1,0,0,1,0,0),i.translate(r,n);var s=this.drawPath_(t,i);if(this.fill_){if(this.gradient_&&"none"!==this.form_){var l=i.createLinearGradient(0,0,t.size/2,t.size);l.addColorStop(1,Object(Bn.b)(o)),l.addColorStop(0,Object(Bn.b)(a)),i.fillStyle=l}else i.fillStyle=Object(Bn.b)(o);i.fill()}if(this.stroke_&&t.strokeWidth&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.stroke()),this.glyph_.char){i.font="".concat(2*s.fac*this.radius_*this.fontSize_,"px ").concat(this.glyph_.font),i.strokeStyle=i.fillStyle,i.lineWidth=t.strokeWidth*("none"===this.form_?2:1),i.fillStyle=Object(Bn.b)(this.color_||a),i.textAlign="center",i.textBaseline="middle";var u=this.glyph_.char;t.strokeWidth&&"transparent"!==a&&i.strokeText(u,s.posX,s.posY),i.fillText(u,s.posX,s.posY)}if("ban"===this.form_&&this.stroke_&&t.strokeWidth){i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth;var c=this.radius_+t.strokeWidth,h=this.radius_*Math.cos(Math.PI/4);i.moveTo(c+h,c-h),i.lineTo(c-h,c+h),i.stroke()}}},{key:"getChecksum",value:function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||e!==this.checksums_[2]||this.radius_!==this.checksums_[3]||"".concat(this.form_,"-").concat(this.glyphs_!==this.checksums_[4])){var r="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[r,t,e,this.radius_,"".concat(this.form_,"-").concat(this.glyphs_)]}return this.checksums_[0]}}])&&Qm(e.prototype,r),n&&Qm(e,n),o}(Vy);function o_(t){return(o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s_(t,e){return(s_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=c_(t);if(e){var i=c_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u_(this,r)}}function u_(t,e){return!e||"object"!==o_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c_(t){return(c_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i_.defs={fonts:{},glyphs:{}},i_.addDefs({font:"g-cartografia",name:"g-cartografia",prefix:"g-cartografia-"},{"g-cartografia-alerta":{font:"g-cartografia",code:59648,name:"alerta",search:"alerta"},"g-cartografia-ayuda":{font:"g-cartografia",code:59649,name:"ayuda",search:"ayuda"},"g-cartografia-bandera":{font:"g-cartografia",code:59650,name:"bandera",search:"bandera"},"g-cartografia-brujula":{font:"g-cartografia",code:59651,name:"brujula",search:"brujula"},"g-cartografia-cancelar":{font:"g-cartografia",code:59652,name:"cancelar",search:"cancelar"},"g-cartografia-cancelar2":{font:"g-cartografia",code:59653,name:"cancelar2",search:"cancelar2"},"g-cartografia-capas":{font:"g-cartografia",code:59654,name:"capas",search:"capas"},"g-cartografia-capas2":{font:"g-cartografia",code:59655,name:"capas2",search:"capas2"},"g-cartografia-check":{font:"g-cartografia",code:59656,name:"check",search:"check"},"g-cartografia-check2":{font:"g-cartografia",code:59657,name:"check2",search:"check2"},"g-cartografia-check3":{font:"g-cartografia",code:59658,name:"check3",search:"check3"},"g-cartografia-check4":{font:"g-cartografia",code:59659,name:"check4",search:"check4"},"g-cartografia-check5":{font:"g-cartografia",code:59660,name:"check5",search:"check5"},"g-cartografia-comentarios":{font:"g-cartografia",code:59661,name:"comentarios",search:"comentarios"},"g-cartografia-descargar":{font:"g-cartografia",code:59662,name:"descargar",search:"descargar"},"g-cartografia-editar":{font:"g-cartografia",code:59663,name:"editar",search:"editar"},"g-cartografia-editar2":{font:"g-cartografia",code:59664,name:"editar2",search:"editar2"},"g-cartografia-escala":{font:"g-cartografia",code:59665,name:"escala",search:"escala"},"g-cartografia-escala2":{font:"g-cartografia",code:59666,name:"alerta",search:"alerta"},"g-cartografia-escala3":{font:"g-cartografia",code:59667,name:"escala3",search:"escala3"},"g-cartografia-flecha":{font:"g-cartografia",code:59668,name:"flecha",search:"flecha"},"g-cartografia-flecha-abajo":{font:"g-cartografia",code:59669,name:"flecha-abajo",search:"flecha-abajo"},"g-cartografia-flecha-abajo2":{font:"g-cartografia",code:59670,name:"flecha-abajo2",search:"flecha-abajo2"},"g-cartografia-flecha-arriba":{font:"g-cartografia",code:59671,name:"flecha-arriba",search:"flecha-arriba"},"g-cartografia-flecha-arriba2":{font:"g-cartografia",code:59672,name:"alerta",search:"alerta"},"g-cartografia-flecha-derecha":{font:"g-cartografia",code:59673,name:"flecha-derecha",search:"flecha-derecha"},"g-cartografia-flecha-derecha2":{font:"g-cartografia",code:59674,name:"flecha-derecha2",search:"flecha-derecha2"},"g-cartografia-flecha-derecha3":{font:"g-cartografia",code:59675,name:"fleha-derecha3",search:"fleha-derecha3"},"g-cartografia-flecha-deshacer":{font:"g-cartografia",code:59676,name:"flecha-deshacer",search:"flecha-deshacer"},"g-cartografia-flecha-izquierda":{font:"g-cartografia",code:59677,name:"flecha-izquierda",search:"flecha-izquierda"},"g-cartografia-flecha-izquierda2":{font:"g-cartografia",code:59678,name:"flecha-izquierda2",search:"flecha-izquierda2"},"g-cartografia-flecha-izquierda3":{font:"g-cartografia",code:59679,name:"flecha-izquierda3",search:"flecha-izquierda3"},"g-cartografia-flecha-link":{font:"g-cartografia",code:59680,name:"flecha-link",search:"flecha-link"},"g-cartografia-flechas-mover":{font:"g-cartografia",code:59681,name:"flechas-mover",search:"flechas-mover"},"g-cartografia-gps":{font:"g-cartografia",code:59682,name:"gps",search:"gps"},"g-cartografia-gps2":{font:"g-cartografia",code:59683,name:"gps2",search:"gps2"},"g-cartografia-gps3":{font:"g-cartografia",code:59684,name:"gps3",search:"gps3"},"g-cartografia-gps4":{font:"g-cartografia",code:59685,name:"gps4",search:"gps4"},"g-cartografia-guardar":{font:"g-cartografia",code:59686,name:"guardar",search:"guardar"},"g-cartografia-herramienta":{font:"g-cartografia",code:59687,name:"herramienta",search:"herramienta"},"g-cartografia-impresora":{font:"g-cartografia",code:59688,name:"impresora",search:"impresora"},"g-cartografia-info":{font:"g-cartografia",code:59689,name:"info",search:"info"},"g-cartografia-linea":{font:"g-cartografia",code:59690,name:"linea",search:"linea"},"g-cartografia-lineas":{font:"g-cartografia",code:59691,name:"lineas",search:"lineas"},"g-cartografia-lista":{font:"g-cartografia",code:59692,name:"lista",search:"lista"},"g-cartografia-localizacion":{font:"g-cartografia",code:59693,name:"localizacion",search:"localizacion"},"g-cartografia-localizacion2":{font:"g-cartografia",code:59694,name:"localizacion2",search:"localizacion2"},"g-cartografia-localizacion3":{font:"g-cartografia",code:59695,name:"localizacion3",search:"localizacion3"},"g-cartografia-localizacion4":{font:"g-cartografia",code:59696,name:"localizacion4",search:"localizacion4"},"g-cartografia-mano":{font:"g-cartografia",code:59697,name:"mano",search:"mano"},"g-cartografia-mano2":{font:"g-cartografia",code:59698,name:"mano2",search:"mano2"},"g-cartografia-mapa":{font:"g-cartografia",code:59699,name:"mapa",search:"mapa"},"g-cartografia-mas":{font:"g-cartografia",code:59700,name:"mas",search:"mas"},"g-cartografia-mas2":{font:"g-cartografia",code:59701,name:"mas2",search:"mas2"},"g-cartografia-medir-area":{font:"g-cartografia",code:59702,name:"medir-area",search:"medir-area"},"g-cartografia-medir-linea":{font:"g-cartografia",code:59703,name:"medir-linea",search:"medir-linea"},"g-cartografia-menos":{font:"g-cartografia",code:59704,name:"menos",search:"menos"},"g-cartografia-menos2":{font:"g-cartografia",code:59705,name:"alerta",search:"alerta"},"g-cartografia-menu":{font:"g-cartografia",code:59706,name:"menos2",search:"menos2"},"g-cartografia-mundo":{font:"g-cartografia",code:59707,name:"mundo",search:"mundo"},"g-cartografia-mundo2":{font:"g-cartografia",code:59708,name:"mundo2",search:"mundo2"},"g-cartografia-opciones":{font:"g-cartografia",code:59709,name:"opciones",search:"opciones"},"g-cartografia-papelera":{font:"g-cartografia",code:59710,name:"papelera",search:"papelera"},"g-cartografia-pin":{font:"g-cartografia",code:59711,name:"pin",search:"pin"},"g-cartografia-pin2":{font:"g-cartografia",code:59712,name:"pin2",search:"pin2"},"g-cartografia-pin3":{font:"g-cartografia",code:59713,name:"pin3",search:"pin3"},"g-cartografia-pin4":{font:"g-cartografia",code:59714,name:"pin4",search:"pin4"},"g-cartografia-pin-nuevo":{font:"g-cartografia",code:59715,name:"pin-nuevo",search:"pin-nuevo"},"g-cartografia-poligono":{font:"g-cartografia",code:59716,name:"poligono",search:"poligono"},"g-cartografia-posicion":{font:"g-cartografia",code:59717,name:"posicion",search:"posicion"},"g-cartografia-posicion2":{font:"g-cartografia",code:59718,name:"posicion2",search:"posicion2"},"g-cartografia-posicion3":{font:"g-cartografia",code:59719,name:"posicion3",search:"posicion3"},"g-cartografia-posicion4":{font:"g-cartografia",code:59720,name:"posicion4",search:"posicion4"},"g-cartografia-posicion5":{font:"g-cartografia",code:59721,name:"posicion5",search:"posicion5"},"g-cartografia-posicion6":{font:"g-cartografia",code:59722,name:"posicion6",search:"posicion6"},"g-cartografia-posicion7":{font:"g-cartografia",code:59723,name:"posicion7",search:"posicion7"},"g-cartografia-prismaticos":{font:"g-cartografia",code:59724,name:"prismaticos",search:"prismaticos"},"g-cartografia-regla":{font:"g-cartografia",code:59725,name:"regla",search:"regla"},"g-cartografia-reglas":{font:"g-cartografia",code:59726,name:"reglas",search:"reglas"},"g-cartografia-ruta":{font:"g-cartografia",code:59727,name:"ruta",search:"ruta"},"g-cartografia-spinner":{font:"g-cartografia",code:59728,name:"spinner",search:"spinner"},"g-cartografia-spinner2":{font:"g-cartografia",code:59729,name:"spinner2",search:"spinner2"},"g-cartografia-subir":{font:"g-cartografia",code:59739,name:"subir",search:"subir"},"g-cartografia-tamano":{font:"g-cartografia",code:59740,name:"tamano",search:"tamano"},"g-cartografia-temperatura":{font:"g-cartografia",code:59741,name:"temperatura",search:"temperatura"},"g-cartografia-texto":{font:"g-cartografia",code:59742,name:"texto",search:"texto"},"g-cartografia-usuario":{font:"g-cartografia",code:59743,name:"usuario",search:"usuario"},"g-cartografia-usuario2":{font:"g-cartografia",code:59744,name:"usuario2",search:"usuario2"},"g-cartografia-zoom":{font:"g-cartografia",code:59745,name:"zoom",search:"zoom"},"g-cartografia-zoom-extension":{font:"g-cartografia",code:59746,name:"zoom-extension",search:"zoom-extension"},"g-cartografia-zoom-mas":{font:"g-cartografia",code:59747,name:"zoom-mas",search:"zoom-mas"},"g-cartografia-zoom-menos":{font:"g-cartografia",code:59748,name:"zoom-menos",search:"zoom-menos"},"g-cartografia-pin5":{font:"g-cartografia",code:59749,name:"pin5",search:"pin5"},"g-cartografia-pin-nuevo2":{font:"g-cartografia",code:59750,name:"pin-nuevo2",search:"pin-nuevo2"},"g-cartografia-pin-seleccionado":{font:"g-cartografia",code:59751,name:"pin-seleccionado",search:"pin-seleccionado"},"g-cartografia-brujula-norte":{font:"g-cartografia",code:59752,name:"brujula-norte",search:"brujula-norte"}});var h_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s_(t,e)}(r,t);var e=l_(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a_(this,r);var n=t;return t.anchor||(n.anchor=[]),t.offset||(n.offset=[]),e.call(this,{glyph:t.glyph,color:t.color,fontSize:t.fontSize,stroke:t.stroke,fill:t.fill,radius:t.radius,form:t.form,gradient:t.gradient,offsetX:t.offset[0],offsetY:t.offset[1],opacity:t.opacity,rotation:t.rotation,rotateWithView:t.rotateWithView})}return r}(i_);function f_(t){return(f_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g_(t,e){return(g_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=__(t);if(e){var i=__(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m_(this,r)}}function m_(t,e){return!e||"object"!==f_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function __(t){return(__=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g_(t,e)}(o,t);var e,r,n,i=y_(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p_(this,o),i.call(this,{anchor:t.anchor?t.anchor.slice():void 0,anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits,anchorYUnits:t.anchorYUnits,crossOrigin:t.crossOrigin||null,color:t.color&&t.color.slice?t.color.slice():t.color||void 0,src:t.src,offset:t.offset?t.offset.slice():void 0,offsetOrigin:t.offsetOrigin,size:t.size?t.size.slice():void 0,imgSize:t.imgSize,opacity:t.opacity,scale:t.scale,snapToPixel:t.snapToPixel,rotation:t.rotation,rotateWithView:t.rotateWithView})}return e=o,(r=[{key:"clone",value:function(){return new o({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}},{key:"size",set:function(t){this.size_=Array.isArray(t)?t:null}},{key:"anchor",set:function(t){this.anchor_=Array.isArray(t)?t:null}},{key:"origin",set:function(t){this.origin_=Array.isArray(t)?t:null}}])&&d_(e.prototype,r),n&&d_(e,n),o}(iy);function b_(t){return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E_(t,e){return(E_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=I_(t);if(e){var i=I_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S_(this,r)}}function S_(t,e){return!e||"object"!==b_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I_(t){return(I_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E_(t,e)}(o,t);var e,r,n,i=O_(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x_(this,o),i.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}return e=o,(r=[{key:"clone",value:function(){var t=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}}])&&w_(e.prototype,r),n&&w_(e,n),o}(Yy);function T_(t){return(T_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L_(t,e){return(L_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A_(t);if(e){var i=A_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return N_(this,r)}}function N_(t,e){return!e||"object"!==T_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A_(t){return(A_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L_(t,e)}(s,t);var e,r,o,a=M_(s);function s(){return P_(this,s),a.apply(this,arguments)}return e=s,(r=[{key:"toImage",value:function(t){var e=null,r={fill:this.options_.fill,stroke:this.options_.stroke,icon:this.options_.icon};if(!0===nG(r))e=oG(t);else{if(_D(this.olStyleFn_))return null;var n=this.olStyleFn_()[1];if(n.getImage&&null!=n.getImage()&&n.getImage()instanceof Qg){if(n.getImage()instanceof h_){var i=n.getImage().getImage(1);null!=i&&i&&(e=i.toDataURL())}else if(n.getImage()instanceof v_){var o=n.getImage();if(!_D(o)&&!(e=o.getSrc()).startsWith(window.location.origin)){var a=FD([M.config.PROXY_URL,"/image"]);e=ID(a,{url:e})}}}else{null!=(n=this.olStyleFn_()[0]).getImage()&&null!=n.getImage().getStroke()&&(n.getImage().getStroke().getWidth()>s.DEFAULT_WIDTH_POINT&&n.getImage().getStroke().setWidth(s.DEFAULT_WIDTH_POINT),n.getImage().render());var l=n.getImage().getImage(1);null!=l&&(e=l.toDataURL())}}return e}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var o=r;o instanceof Wc||o instanceof lh||(o=e);var a,s,u=new am({zIndex:By.getValue(t.zindex,o,e.layer_),geometry:function(t){var e=null;if("MultiPoint"===t.getGeometry().getType())e=new Hc(t.getGeometry().getCoordinates());else{var r=wh.getCentroid(t.getGeometry());e=new aa(r)}return e}}),c=new am({zIndex:By.getValue(t.zindex,o,e.layer_),geometry:function(t){var e=null;if("MultiPoint"===t.getGeometry().getType())e=new Hc(t.getGeometry().getCoordinates());else{var r=wh.getCentroid(t.getGeometry());e=new aa(r)}return e}});if(o instanceof Wc){var h=function(t){var e=null;if("MultiPoint"===t.getGeometry().getType())e=new Hc(t.getGeometry().getCoordinates());else{var r=wh.getCentroid(t.getGeometry());e=new aa(r)}return e};u.setGeometry(h),c.setGeometry(h)}if(!_D(t.fill)){var f=By.getValue(t.fill.color,o,e.layer_),p=By.getValue(t.fill.opacity,o,e.layer_);p||0===p||(p=1),_D(f)||(a=new zg({color:l()(f).alpha(p).css()}))}if(!_D(t.stroke)){var d=By.getValue(t.stroke.color,o,e.layer_);if(!_D(d)){var g=t.stroke.linedashoffset;s=new Bg({color:d,width:By.getValue(t.stroke.width,o,e.layer_),lineDash:By.getValue(t.stroke.linedash,o,e.layer_),lineDashOffset:By.getValue(g,o,e.layer_),lineCap:By.getValue(t.stroke.linecap,o,e.layer_),lineJoin:By.getValue(t.stroke.linejoin,o,e.layer_),miterLimit:By.getValue(t.stroke.miterlimit,o,e.layer_)})}}if(!_D(t.label)){var y=By.getValue(t.label.text,o,e.layer_),m=By.getValue(t.label.align,o,e.layer_),_=By.getValue(t.label.baseline,o,e.layer_),v=new Yg({font:By.getValue(t.label.font,o,e.layer_),rotateWithView:By.getValue(t.label.rotate,o,e.layer_),scale:By.getValue(t.label.scale,o,e.layer_),offsetX:By.getValue(t.label.offset?t.label.offset[0]:void 0,o,e.layer_),offsetY:By.getValue(t.label.offset?t.label.offset[1]:void 0,o,e.layer_),fill:new zg({color:By.getValue(t.label.color||"#000000",o,e.layer_)}),textAlign:Object.values(i).includes(m)?m:"center",textBaseline:Object.values(n).includes(_)?_:"top",text:void 0===y?void 0:String(y),rotation:By.getValue(t.label.rotation,o,e.layer_)});if(!_D(t.label.stroke)){var b=t.label.stroke,x=b.miterlimit,w=b.linedashoffset;v.setStroke(new Bg({color:By.getValue(t.label.stroke.color,o,e.layer_),width:By.getValue(t.label.stroke.width,o,e.layer_),lineCap:By.getValue(t.label.stroke.linecap,o,e.layer_),lineJoin:By.getValue(t.label.stroke.linejoin,o,e.layer_),lineDash:By.getValue(t.label.stroke.linedash,o,e.layer_),lineDashOffset:By.getValue(w,o,e.layer_),miterLimit:By.getValue(x,o,e.layer_)}))}u.setText(v)}return u.setImage(new C_({fill:a,stroke:s,radius:By.getValue(t.radius,o,e.layer_),snapToPixel:By.getValue(t.snapToPixel,o,e.layer_)})),_D(t.icon)||(_D(t.icon.src)?_D(t.icon.form)||c.setImage(new h_({form:_D(By.getValue(t.icon.form,o,e.layer_))?"":By.getValue(t.icon.form,o,e.layer_).toLowerCase(),gradient:By.getValue(t.icon.gradient,o,e.layer_),glyph:By.getValue(t.icon.class,o,e.layer_),fontSize:By.getValue(t.icon.fontsize,o,e.layer_),radius:By.getValue(t.icon.radius,o,e.layer_),rotation:By.getValue(t.icon.rotation,o,e.layer_),rotateWithView:By.getValue(t.icon.rotate,o,e.layer_),offsetX:By.getValue(t.icon.offset?t.icon.offset[0]:void 0,o,e.layer_),offsetY:By.getValue(t.icon.offset?t.icon.offset[1]:void 0,o,e.layer_),fill:new zg({color:By.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",o,e.layer_)}),stroke:t.icon.color?new Bg({color:By.getValue(t.icon.color,o,e.layer_),width:1}):void 0,anchor:By.getValue(t.icon.anchor,o,e.layer_),anchorXUnits:By.getValue(t.icon.anchorxunits,o,e.layer_),anchorYUnits:By.getValue(t.icon.anchoryunits,o,e.layer_),src:By.getValue(t.icon.src,o,e.layer_),opacity:By.getValue(t.icon.opacity,o,e.layer_),scale:By.getValue(t.icon.scale,o,e.layer_),snapToPixel:By.getValue(t.icon.snaptopixel,o,e.layer_),offsetOrigin:By.getValue(t.icon.offsetorigin,o,e.layer_),offset:By.getValue(t.icon.offset,o,e.layer_),crossOrigin:By.getValue(t.icon.crossorigin,o,e.layer_),anchorOrigin:By.getValue(t.icon.anchororigin,o,e.layer_),size:By.getValue(t.icon.size,o,e.layer_)})):c.setImage(new v_({anchor:By.getValue(t.icon.anchor,o,e.layer_),anchorXUnits:By.getValue(t.icon.anchorxunits,o,e.layer_),anchorYUnits:By.getValue(t.icon.anchoryunits,o,e.layer_),src:By.getValue(t.icon.src,o,e.layer_),opacity:By.getValue(t.icon.opacity,o,e.layer_),scale:By.getValue(t.icon.scale,o,e.layer_),rotation:By.getValue(t.icon.rotation,o,e.layer_),rotateWithView:By.getValue(t.icon.rotate,o,e.layer_),snapToPixel:By.getValue(t.icon.snaptopixel,o,e.layer_),offsetOrigin:By.getValue(t.icon.offsetorigin,o,e.layer_),offset:By.getValue(t.icon.offset,o,e.layer_),crossOrigin:By.getValue(t.icon.crossorigin,o,e.layer_),anchorOrigin:By.getValue(t.icon.anchororigin,o,e.layer_),size:By.getValue(t.icon.size,o,e.layer_)}))),[u,c]}}},{key:"drawGeometryToCanvas",value:function(t){this.olStyleFn_()[1].getImage()instanceof i_?t.drawGeometry(new aa([10,10])):t.drawCircle(new dh([this.getCanvasSize()[0]/2,this.getCanvasSize()[1]/2],this.getRadius_()))}},{key:"updateCanvas",value:function(t){if(this.updateFacadeOptions(this.options_),!nG(this.options_)){var e=this.getCanvasSize(),r=xy(t.getContext("2d"),{size:e}),n=this.olStyleFn_()[0];_D(n.getText())||n.setText(null),!_D(this.olStyleFn_()[1])&&this.olStyleFn_()[1].getImage()instanceof i_&&(n=this.olStyleFn_()[1]);var i=n.getImage().getStroke();_D(i)||_D(i.getWidth())||i.setWidth(3),r.setStyle(n),this.drawGeometryToCanvas(r)}}},{key:"getCanvasSize",value:function(){var t,e=this.olStyleFn_()[1].getImage();if(e instanceof i_)t=[90,90];else{var r=this.getRadius_(e);t=[2*r+4,2*r+4]}return t}},{key:"getRadius_",value:function(t){return t instanceof iy?25:t instanceof i_?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&R_(e.prototype,r),o&&R_(e,o),s}(By);k_.DEFAULT_WIDTH_POINT=3;var j_=k_;function F_(t){return(F_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function G_(t,e){return(G_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=z_(t);if(e){var i=z_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B_(this,r)}}function B_(t,e){return!e||"object"!==F_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z_(t){return(z_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G_(t,e)}(o,t);var e,r,n,i=U_(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;e=_D(e)?o.DEFAULT_NULL:HD(e,o.DEFAULT),e=HD({},e);var r=new j_(e);return i.call(this,e,r)}return e=o,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Point'))"}}])&&D_(e.prototype,r),n&&D_(e,n),o}(Bm);V_.DEFAULT={radius:5},V_.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5};var q_=V_,Y_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),W_="renderOrder",X_=function(t){function e(e){var r=this,n=e||{},i=Object(ii.a)({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return Y_(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(W_)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new lg.a(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(W_,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Zy,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var r;Array.isArray(t)?r=t:(Object(Ui.a)("function"==typeof t.getZIndex,41),r=[t]),e=function(){return r}}return e}(this.style_),this.changed()},e}(Yn.a),H_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Z_=[H_.FILL],K_=[H_.STROKE],J_=[H_.BEGIN_PATH],$_=[H_.CLOSE_PATH],Q_=H_,tv=r(36),ev=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rv=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return ev(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,i=this.coordinates,o=i.length,a=0,s=t.length;a<s;a+=e)n[0]=t[a],n[1]=t[a+1],Object(mt.g)(r,n)&&(i[o++]=n[0],i[o++]=n[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,r,n,i,o){var a=this.coordinates,s=a.length,l=this.getBufferedMaxExtent();o&&(e+=n);var u,c,h,f=t[e],p=t[e+1],d=this.tmpCoordinate_,g=!0;for(u=e+n;u<r;u+=n)d[0]=t[u],d[1]=t[u+1],(h=Object(mt.j)(l,d))!==c?(g&&(a[s++]=f,a[s++]=p,g=!1),a[s++]=d[0],a[s++]=d[1]):h===tv.a.INTERSECTING?(a[s++]=d[0],a[s++]=d[1],g=!1):g=!0,f=d[0],p=d[1],c=h;return(i&&g||u===e+n)&&(a[s++]=f,a[s++]=p),s},e.prototype.drawCustomCoordinates_=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],l=this.appendFlatLineCoordinates(t,e,s,n,!1,!1);i.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,r,n){this.beginGeometry(t,e);var i,o,a,s,l,u=t.getType(),c=t.getStride(),h=this.coordinates.length;switch(u){case fo.a.MULTI_POLYGON:i=t.getOrientedFlatCoordinates(),s=[];var f=t.getEndss();l=0;for(var p=0,d=f.length;p<d;++p){var g=[];l=this.drawCustomCoordinates_(i,l,f[p],c,g),s.push(g)}this.instructions.push([Q_.CUSTOM,h,s,t,r,ta]),this.hitDetectionInstructions.push([Q_.CUSTOM,h,s,t,n||r,ta]);break;case fo.a.POLYGON:case fo.a.MULTI_LINE_STRING:a=[],i=u==fo.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),l=this.drawCustomCoordinates_(i,0,t.getEnds(),c,a),this.instructions.push([Q_.CUSTOM,h,a,t,r,Qo]),this.hitDetectionInstructions.push([Q_.CUSTOM,h,a,t,n||r,Qo]);break;case fo.a.LINE_STRING:case fo.a.CIRCLE:i=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(i,0,i.length,c,!1,!1),this.instructions.push([Q_.CUSTOM,h,o,t,r,$o]),this.hitDetectionInstructions.push([Q_.CUSTOM,h,o,t,n||r,$o]);break;case fo.a.MULTI_POINT:i=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(i,c))>h&&(this.instructions.push([Q_.CUSTOM,h,o,t,r,$o]),this.hitDetectionInstructions.push([Q_.CUSTOM,h,o,t,n||r,$o]));break;case fo.a.POINT:i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),o=this.coordinates.length,this.instructions.push([Q_.CUSTOM,h,o,t,r]),this.hitDetectionInstructions.push([Q_.CUSTOM,h,o,t,n||r])}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[Q_.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Q_.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,i=e.length,o=-1;for(t=0;t<i;++t)(n=(r=e[t])[0])==Q_.END_GEOMETRY?o=t:n==Q_.BEGIN_GEOMETRY&&(r[2]=t,Object(h.j)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=ay(n||si)}else r.fillStyle=void 0;if(e){var i=e.getColor();r.strokeStyle=ay(i||hi);var o=e.getLineCap();r.lineCap=void 0!==o?o:li;var a=e.getLineDash();r.lineDash=a?a.slice():ui;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var l=e.getLineJoin();r.lineJoin=void 0!==l?l:ci;var u=e.getWidth();r.lineWidth=void 0!==u?u:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[Q_.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Q_.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||i!=t.currentLineDash&&!Object(h.b)(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=l)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Q_.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(mt.e)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(mt.d)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(oy),nv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iv=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return nv(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(r,n);this.instructions.push([Q_.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Q_.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(r,n);this.instructions.push([Q_.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Q_.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0]*this.imagePixelRatio_,this.originY_=a[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterImageWithText_=e},e}(rv),ov=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),av=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return ov(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,r,n,!1,!1),a=[Q_.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Q_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,ui,0],J_);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(K_),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Q_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],J_);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinates_(a,l,o[u],s);this.hitDetectionInstructions.push(K_),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(K_),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(K_),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(J_)},e}(rv),sv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lv=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return sv(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(J_),this.hitDetectionInstructions.push(J_);for(var l=0;l<s;++l){var u=r[l],c=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,u,n,!0,!a),f=[Q_.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push($_),this.hitDetectionInstructions.push($_)),e=u}return o&&(this.instructions.push(Z_),this.hitDetectionInstructions.push(Z_)),a&&(this.instructions.push(K_),this.hitDetectionInstructions.push(K_)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Q_.SET_FILL_STYLE,si]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Q_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var l=[Q_.CIRCLE,s];this.instructions.push(J_,l),this.hitDetectionInstructions.push(J_,l),void 0!==r.fillStyle&&(this.instructions.push(Z_),this.hitDetectionInstructions.push(Z_)),void 0!==r.strokeStyle&&(this.instructions.push(K_),this.hitDetectionInstructions.push(K_)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Q_.SET_FILL_STYLE,si]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Q_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Q_.SET_FILL_STYLE,si]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Q_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinatess_(a,l,o[u],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,i=r.length;n<i;++n)r[n]=Zo(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(rv);function uv(t,e,r,n,i){var o,a,s,l,u,c,h,f,p,d=r,g=r,y=0,m=0,_=r;for(o=r;o<n;o+=i){var v=e[o],b=e[o+1];void 0!==l&&(f=v-l,p=b-u,s=Math.sqrt(f*f+p*p),void 0!==c&&(m+=a,Math.acos((c*f+h*p)/(a*s))>t&&(m>y&&(y=m,d=_,g=o),m=0,_=o-i)),a=s,c=f,h=p),l=v,u=b}return(m+=s)>y?[_,o]:[d,g]}var cv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hv={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},fv={Circle:lv,Default:rv,Image:iv,LineString:av,Polygon:lv,Text:function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return cv(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var o=this.coordinates,a=o.length,s=t.getType(),l=null,u=t.getStride();if(i.placement!==qg||s!=fo.a.LINE_STRING&&s!=fo.a.MULTI_LINE_STRING&&s!=fo.a.POLYGON&&s!=fo.a.MULTI_POLYGON){var c=i.overflow?null:[];switch(s){case fo.a.POINT:case fo.a.MULTI_POINT:l=t.getFlatCoordinates();break;case fo.a.LINE_STRING:l=t.getFlatMidpoint();break;case fo.a.CIRCLE:l=t.getCenter();break;case fo.a.MULTI_LINE_STRING:l=t.getFlatMidpoints(),u=2;break;case fo.a.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||c.push(l[2]/this.resolution),u=3;break;case fo.a.MULTI_POLYGON:var h=t.getFlatInteriorPoints();l=[];for(w=0,E=h.length;w<E;w+=3)i.overflow||c.push(h[w+2]/this.resolution),l.push(h[w],h[w+1]);if(0===l.length)return;u=2}if((R=this.appendFlatPointCoordinates(l,u))===a)return;if(c&&(R-a)/2!=l.length/u){var f=a/2;c=c.filter((function(t,e){var r=o[2*(f+e)]===l[e*u]&&o[2*(f+e)+1]===l[e*u+1];return r||--f,r}))}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var p=i.padding;if(p!=di&&(i.scale[0]<0||i.scale[1]<0)){var d=i.padding[0],g=i.padding[1],y=i.padding[2],m=i.padding[3];i.scale[0]<0&&(g=-g,m=-m),i.scale[1]<0&&(d=-d,y=-y),p=[d,g,y,m]}var _=this.pixelRatio;this.instructions.push([Q_.DRAW_IMAGE,a,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,p==di?di:p.map((function(t){return t*_})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var v=1/_;this.hitDetectionInstructions.push([Q_.DRAW_IMAGE,a,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterImageWithText_,p,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(e)}else{if(!Object(mt.G)(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(l=t.getFlatCoordinates(),s==fo.a.LINE_STRING)b=[l.length];else if(s==fo.a.MULTI_LINE_STRING)b=t.getEnds();else if(s==fo.a.POLYGON)b=t.getEnds().slice(0,1);else if(s==fo.a.MULTI_POLYGON){var x=t.getEndss();b=[];for(var w=0,E=x.length;w<E;++w)b.push(x[w][0])}this.beginGeometry(t,e);for(var O=i.textAlign,S=0,I=void 0,C=0,T=b.length;C<T;++C){if(null==O){var P=uv(i.maxAngle,l,S,b[C],u);S=P[0],I=P[1]}else I=b[C];for(var w=S;w<I;w+=u)o.push(l[w],l[w+1]);var R=o.length;S=b[C],this.drawChars_(a,R),a=R}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||fi,textBaseline:e.textBaseline||pi,scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e){var r=this.textStrokeState_,n=this.textState_,i=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,l=hv[n.textBaseline],u=this.textOffsetY_*s,c=this.text_,h=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Q_.DRAW_CHARS,t,e,l,n.overflow,a,n.maxAngle,s,u,i,h*s,c,o,1]),this.hitDetectionInstructions.push([Q_.DRAW_CHARS,t,e,l,n.overflow,a,n.maxAngle,1,u,i,h,c,o,1/s])},e.prototype.setTextStyle=function(t,e){var r,n,i;if(t){var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=ay(o.getColor()||si)):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||li,i.lineDash=s?s.slice():ui,i.lineDashOffset=void 0===l?0:l,i.lineJoin=a.getLineJoin()||ci,i.lineWidth=void 0===u?1:u,i.miterLimit=void 0===c?10:c,i.strokeStyle=ay(a.getColor()||hi)}else i=null,this.textStrokeState_=i;r=this.textState_;var h=t.getFont()||ai;xi(h);var f=t.getScaleArray();r.overflow=t.getOverflow(),r.font=h,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||pi,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||di,r.scale=void 0===f?[1,1]:f;var p=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:Object(Gn.c)(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Object(Gn.c)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(rv)},pv=function(){function t(t,e,r,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];void 0===i&&(i=new(0,fv[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i);return i},t}(),dv=r(73);function gv(t,e,r,n,i,o,a,s,l,u,c,h){var f=t[e],p=t[e+1],d=0,g=0,y=0,m=0;function _(){d=f,g=p,f=t[e+=n],p=t[e+1],m+=y,y=Math.sqrt((f-d)*(f-d)+(p-g)*(p-g))}do{_()}while(e<r-n&&m+y<o);for(var v=0===y?0:(o-m)/y,b=Object(mo.e)(d,f,v),x=Object(mo.e)(g,p,v),w=e-n,E=m,O=o+s*l(u,i,c);e<r-n&&m+y<O;)_();v=0===y?0:(O-m)/y;var S,I=Object(mo.e)(d,f,v),C=Object(mo.e)(g,p,v);if(h){var T=[b,x,I,C];Lo(T,0,4,2,h,T,T),S=T[0]>T[2]}else S=b>I;var P,R=Math.PI,L=[],M=w+n===e;if(y=0,m=E,f=t[e=w],p=t[e+1],M){_(),P=Math.atan2(p-g,f-d),S&&(P+=P>0?-R:R);var N=(I+b)/2,A=(C+x)/2;return L[0]=[N,A,(O-o)/2,P,i],L}for(var k=0,j=i.length;k<j;){_();var F=Math.atan2(p-g,f-d);if(S&&(F+=F>0?-R:R),void 0!==P){var D=F-P;if(D+=D>R?-2*R:D<-R?2*R:0,Math.abs(D)>a)return null}P=F;for(var G=k,U=0;k<j;++k){var B=s*l(u,i[S?j-k-1:k],c);if(e+n<r&&m+y<o+U+B/2)break;U+=B}if(k!==G){var z=S?i.substring(j-G,j-k):i.substring(G,k);v=0===y?0:(o+U/2-m)/y;N=Object(mo.e)(d,f,v),A=Object(mo.e)(g,p,v);L.push([N,A,U/2,F,z]),o+=U}}return L}var yv=Object(mt.k)(),mv=[],_v=[],vv=[],bv=[];function xv(t){return t[3].declutterBox}var wv=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Ev(t,e){return"start"!==e&&"end"!==e||wv.test(t)||(e="start"===e?"left":"right"),hv[e]}function Ov(t,e,r){return r>0&&t.push("\n",""),t.push(e,""),t}var Sv=function(){function t(t,e,r,n){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Object(Un.d)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,n){var i=t+e+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],l=this.pixelRatio,u=[s.scale[0]*l,s.scale[1]*l],c=Array.isArray(t),h=Ev(c?t[0]:t,s.textAlign||fi),f=n&&o.lineWidth?o.lineWidth:0,p=c?t:t.split("\n").reduce(Ov,[]),d=function(t,e){for(var r=[],n=[],i=[],o=0,a=0,s=0,l=0,u=0,c=e.length;u<=c;u+=2){var h=e[u];if("\n"!==h&&u!==c){var f=e[u+1]||t.font,p=Oi(f,h);r.push(p),a+=p;var d=wi(f);n.push(d),l=Math.max(l,d)}else o=Math.max(o,a),i.push(a),a=0,s+=l}return{width:o,height:s,widths:r,heights:n,lineWidths:i}}(s,p),g=d.width,y=d.height,m=d.widths,_=d.heights,v=d.lineWidths,b=g+f,x=[],w=(b+2)*u[0],E=(y+f)*u[1],O={width:w<0?Math.floor(w):Math.ceil(w),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:x};(1==u[0]&&1==u[1]||x.push("scale",u),n)&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",f),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),(ni.h?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)));r&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");for(var S,I=.5-h,C=h*b+I*f,T=[],P=[],R=0,L=0,M=0,N=0,A=0,k=p.length;A<k;A+=2){var j=p[A];if("\n"!==j){var F=p[A+1]||s.font;F!==S&&(n&&T.push("font",F),r&&P.push("font",F),S=F),R=Math.max(R,_[M]);var D=[j,C+I*m[M]+h*(m[M]-v[N]),.5*(f+R)+L];C+=m[M],n&&T.push("strokeText",D),r&&P.push("fillText",D),++M}else L+=R,R=0,C=h*b+I*f,++N}return Array.prototype.push.apply(x,T),Array.prototype.push.apply(x,P),this.labels_[i]=O,O},t.prototype.replayTextBackground_=function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,r,n,i,o,a,s,l,u,c,h,f,p,d,g){var y,m=r-(a*=h[0]),_=n-(s*=h[1]),v=i+l>t?t-l:i,b=o+u>e?e-u:o,x=p[3]+v*h[0]+p[1],w=p[0]+b*h[1]+p[2],E=m-p[3],O=_-p[0];return(d||0!==c)&&(mv[0]=E,bv[0]=E,mv[1]=O,_v[1]=O,_v[0]=E+x,vv[0]=_v[0],vv[1]=O+w,bv[1]=vv[1]),0!==c?(y=Object(Un.b)(Object(Un.d)(),r,n,1,1,c,-r,-n),Object(Un.a)(y,mv),Object(Un.a)(y,_v),Object(Un.a)(y,vv),Object(Un.a)(y,bv),Object(mt.l)(Math.min(mv[0],_v[0],vv[0],bv[0]),Math.min(mv[1],_v[1],vv[1],bv[1]),Math.max(mv[0],_v[0],vv[0],bv[0]),Math.max(mv[1],_v[1],vv[1],bv[1]),yv)):Object(mt.l)(Math.min(E,E+x),Math.min(O,O+w),Math.max(E,E+x),Math.max(O,O+w),yv),f&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:v,drawImageH:b,originX:l,originY:u,declutterBox:{minX:yv[0],minY:yv[1],maxX:yv[2],maxY:yv[3],value:g},canvasTransform:y,scale:h}},t.prototype.replayImageOrLabel_=function(t,e,r,n,i,o,a){var s=!(!o&&!a),l=n.declutterBox,u=t.canvas,c=a?a[2]*n.scale[0]/2:0;return l.minX-c<=u.width/e&&l.maxX+c>=0&&l.minY-c<=u.height/e&&l.maxY+c>=0&&(s&&this.replayTextBackground_(t,mv,_v,vv,bv,o,a),Ii(t,n.canvasTransform,i,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Object(Un.a)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,n){var i=this.textStates[e],o=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,l=Ev(Array.isArray(t)?t[0]:t,i.textAlign||fi),u=hv[i.textBaseline||pi],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/s-2*i.scale[0])+2*(.5-l)*c,anchorY:u*o.height/s+2*(.5-u)*c}},t.prototype.execute_=function(t,e,r,n,i,o,a,s){var l;this.pixelCoordinates_&&Object(h.b)(r,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Ro(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),Object(Un.k)(this.renderedTransform_,r));for(var u,c,f,p,d,g,y,m,_,v,b,x,w,E,O,S,I=0,C=n.length,T=0,P=0,R=0,L=null,M=null,N=this.coordinateCache_,A=this.viewRotation_,k=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,j={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:A},F=this.instructions!=n||this.overlaps?0:200;I<C;){var D=n[I];switch(D[0]){case Q_.BEGIN_GEOMETRY:w=D[1],S=D[3],w.getGeometry()?void 0===a||Object(mt.G)(a,S.getExtent())?++I:I=D[2]+1:I=D[2];break;case Q_.BEGIN_PATH:P>F&&(this.fill_(t),P=0),R>F&&(t.stroke(),R=0),P||R||(t.beginPath(),p=NaN,d=NaN),++I;break;case Q_.CIRCLE:var G=l[T=D[1]],U=l[T+1],B=l[T+2]-G,z=l[T+3]-U,V=Math.sqrt(B*B+z*z);t.moveTo(G+V,U),t.arc(G,U,V,0,2*Math.PI,!0),++I;break;case Q_.CLOSE_PATH:t.closePath(),++I;break;case Q_.CUSTOM:T=D[1],u=D[2];var q=D[3],Y=D[4],W=6==D.length?D[5]:void 0;j.geometry=q,j.feature=w,I in N||(N[I]=[]);var X=N[I];W?W(l,T,u,2,X):(X[0]=l[T],X[1]=l[T+1],X.length=2),Y(X,j),++I;break;case Q_.DRAW_IMAGE:T=D[1],u=D[2],m=D[3],c=D[4],f=D[5];var H=D[6],Z=D[7],K=D[8],J=D[9],$=D[10],Q=D[11],tt=D[12],et=D[13],rt=D[14];if(!m&&D.length>=19){_=D[18],v=D[19],b=D[20],x=D[21];var nt=this.drawLabelWithPointPlacement_(_,v,b,x);m=nt.label,D[3]=m;var it=D[22];c=(nt.anchorX-it)*this.pixelRatio,D[4]=c;var ot=D[23];f=(nt.anchorY-ot)*this.pixelRatio,D[5]=f,H=m.height,D[6]=H,et=m.width,D[13]=et}var at=void 0;D.length>24&&(at=D[24]);var st=void 0,lt=void 0,ut=void 0;D.length>16?(st=D[15],lt=D[16],ut=D[17]):(st=di,lt=!1,ut=!1),$&&k?Q+=A:$||k||(Q-=A);for(var ct=0;T<u;T+=2)if(!(at&&at[ct++]<et/this.pixelRatio)){var ht=[t,e,m,Gt=this.calculateImageOrLabelDimensions_(m.width,m.height,l[T],l[T+1],et,H,c,f,K,J,Q,tt,i,st,lt||ut,w),Z,lt?L:null,ut?M:null],ft=void 0,pt=void 0;if(s&&rt){var dt=u-T;if(!rt[dt]){rt[dt]=ht;continue}if(ft=rt[dt],delete rt[dt],pt=xv(ft),s.collides(pt))continue}s&&s.collides(Gt.declutterBox)||(ft&&(s&&s.insert(pt),this.replayImageOrLabel_.apply(this,ft)),s&&s.insert(Gt.declutterBox),this.replayImageOrLabel_.apply(this,ht))}++I;break;case Q_.DRAW_CHARS:var gt=D[1],yt=D[2],_t=D[3],vt=D[4];x=D[5];var bt=D[6],xt=D[7],wt=D[8];b=D[9];var Et=D[10];_=D[11],v=D[12];var Ot=[D[13],D[13]],St=this.textStates[v],It=St.font,Ct=[St.scale[0]*xt,St.scale[1]*xt],Tt=void 0;It in this.widths_?Tt=this.widths_[It]:(Tt={},this.widths_[It]=Tt);var Pt=Jc(l,gt,yt,2),Rt=Math.abs(Ct[0])*Si(It,_,Tt);if(vt||Rt<=Pt){var Lt=this.textStates[v].textAlign,Mt=gv(l,gt,yt,2,_,(Pt-Rt)*hv[Lt],bt,Math.abs(Ct[0]),Si,It,Tt,k?0:this.viewRotation_);t:if(Mt){var Nt=[],At=void 0,kt=void 0,jt=void 0,Ft=void 0,Dt=void 0;if(b)for(At=0,kt=Mt.length;At<kt;++At){jt=(Dt=Mt[At])[4],Ft=this.createLabel(jt,v,"",b),c=Dt[2]+(Ct[0]<0?-Et:Et),f=_t*Ft.height+2*(.5-_t)*Et*Ct[1]/Ct[0]-wt;var Gt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Dt[0],Dt[1],Ft.width,Ft.height,c,f,0,0,Dt[3],Ot,!1,di,!1,w);if(s&&s.collides(Gt.declutterBox))break t;Nt.push([t,e,Ft,Gt,1,null,null])}if(x)for(At=0,kt=Mt.length;At<kt;++At){jt=(Dt=Mt[At])[4],Ft=this.createLabel(jt,v,x,""),c=Dt[2],f=_t*Ft.height-wt;Gt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Dt[0],Dt[1],Ft.width,Ft.height,c,f,0,0,Dt[3],Ot,!1,di,!1,w);if(s&&s.collides(Gt.declutterBox))break t;Nt.push([t,e,Ft,Gt,1,null,null])}s&&s.load(Nt.map(xv));for(var Ut=0,Bt=Nt.length;Ut<Bt;++Ut)this.replayImageOrLabel_.apply(this,Nt[Ut])}}++I;break;case Q_.END_GEOMETRY:if(void 0!==o){var zt=o(w=D[1],S);if(zt)return zt}++I;break;case Q_.FILL:F?P++:this.fill_(t),++I;break;case Q_.MOVE_TO_LINE_TO:for(T=D[1],u=D[2],E=l[T],y=(O=l[T+1])+.5|0,(g=E+.5|0)===p&&y===d||(t.moveTo(E,O),p=g,d=y),T+=2;T<u;T+=2)g=(E=l[T])+.5|0,y=(O=l[T+1])+.5|0,T!=u-2&&g===p&&y===d||(t.lineTo(E,O),p=g,d=y);++I;break;case Q_.SET_FILL_STYLE:L=D,this.alignFill_=D[2],P&&(this.fill_(t),P=0,R&&(t.stroke(),R=0)),t.fillStyle=D[1],++I;break;case Q_.SET_STROKE_STYLE:M=D,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,D),++I;break;case Q_.STROKE:F?R++:t.stroke(),++I;break;default:++I}}P&&this.fill_(t),R&&t.stroke()},t.prototype.execute=function(t,e,r,n,i,o){this.viewRotation_=n,this.execute_(t,e,r,this.instructions,i,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,r,n,i){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,i)},t}(),Iv=[py,uy,fy,hy,dy,cy],Cv=function(){function t(t,e,r,n,i,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(Un.d)(),this.createExecutors_(i)}return t.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var i in n){var o=n[i];r[i]=new Sv(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o){var a=2*(n=Math.round(n))+1,s=Object(Un.b)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=Object(oi.a)(a,a));var u,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):l||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(u=Object(mt.k)(),Object(mt.r)(u,t),Object(mt.d)(u,e*(this.renderBuffer_+n),u));var f,p=function(t){if(void 0!==Tv[t])return Tv[t];for(var e=2*t+1,r=t*t,n=new Array(r+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var a=i*i+o*o;if(a>r)break;var s=n[a];s||(s=[],n[a]=s),s.push(4*((t+i)*e+(t+o))+3),i>0&&s.push(4*((t-i)*e+(t+o))+3),o>0&&(s.push(4*((t+i)*e+(t-o))+3),i>0&&s.push(4*((t-i)*e+(t-o))+3))}for(var l=[],u=(i=0,n.length);i<u;++i)n[i]&&l.push.apply(l,n[i]);return Tv[t]=l,l}(n);function d(t,e){for(var r=c.getImageData(0,0,a,a).data,s=0,l=p.length;s<l;s++)if(r[p[s]]>0){if(!o||f!==hy&&f!==dy||-1!==o.indexOf(t)){var u=(p[s]-3)/4,h=n-u%a,d=n-(u/a|0),g=i(t,e,h*h+d*d);if(g)return g}c.clearRect(0,0,a,a);break}}var g,y,m,_,v,b=Object.keys(this.executorsByZIndex_).map(Number);for(b.sort(h.i),g=b.length-1;g>=0;--g){var x=b[g].toString();for(m=this.executorsByZIndex_[x],y=Iv.length-1;y>=0;--y)if(void 0!==(_=m[f=Iv[y]])&&(v=_.executeHitDetection(c,s,r,d,u)))return v}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],a=[r,n,r,o,i,o,i,n];return Ro(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return Object(ii.d)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,r,n,i,o,a){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort(h.i),this.maxExtent_&&(t.save(),this.clip(t,r));var l,u,c,f,p,d,g=o||Iv;for(a&&s.reverse(),l=0,u=s.length;l<u;++l){var y=s[l].toString();for(p=this.executorsByZIndex_[y],c=0,f=g.length;c<f;++c){void 0!==(d=p[g[c]])&&d.execute(t,e,r,n,i,a)}}this.maxExtent_&&t.restore()},t}(),Tv={};var Pv=Cv,Rv=.5;function Lv(t,e,r,n,i,o,a){var s=t[0]*Rv,l=t[1]*Rv,u=Object(oi.a)(s,l);u.imageSmoothingEnabled=!1;for(var c=u.canvas,f=new ly(u,Rv,i,null,a),p=r.length,d=Math.floor(16777215/p),g={},y=1;y<=p;++y){var m=r[y-1],_=m.getStyleFunction()||n;if(n){var v=_(m,o);if(v){Array.isArray(v)||(v=[v]);for(var b="#"+("000000"+(y*d).toString(16)).slice(-6),x=0,w=v.length;x<w;++x){var E=v[x],O=E.getGeometryFunction()(m);if(O&&Object(mt.G)(i,O.getExtent())){var S=E.clone(),I=S.getFill();I&&I.setColor(b);var C=S.getStroke();C&&(C.setColor(b),C.setLineDash(null)),S.setText(void 0);var T=E.getImage();if(T&&0!==T.getOpacity()){var P=T.getImageSize();if(!P)continue;var R=Object(oi.a)(P[0],P[1],void 0,{alpha:!1}),L=R.canvas;R.fillStyle=b,R.fillRect(0,0,L.width,L.height),S.setImage(new iy({img:L,imgSize:P,anchor:T.getAnchor(),anchorXUnits:Xg,anchorYUnits:Xg,offset:T.getOrigin(),opacity:1,size:T.getSize(),scale:T.getScale(),rotation:T.getRotation(),rotateWithView:T.getRotateWithView()}))}var M=S.getZIndex()||0;(k=g[M])||(k={},g[M]=k,k[fo.a.POLYGON]=[],k[fo.a.CIRCLE]=[],k[fo.a.LINE_STRING]=[],k[fo.a.POINT]=[]),k[O.getType().replace("Multi","")].push(O,S)}}}}}for(var N=Object.keys(g).map(Number).sort(h.i),A=(y=0,N.length);y<A;++y){var k=g[N[y]];for(var j in k){var F=k[j];for(x=0,w=F.length;x<w;x+=2){f.setStyle(F[x+1]);for(var D=0,G=e.length;D<G;++D)f.setTransform(e[D]),f.drawGeometry(F[x])}}}return u.getImageData(0,0,c.width,c.height)}function Mv(t,e,r){var n=[];if(r){var i=Math.floor(Math.round(t[0])*Rv),o=Math.floor(Math.round(t[1])*Rv),a=4*(Object(mo.b)(i,0,r.width-1)+Object(mo.b)(o,0,r.height-1)*r.width),s=r.data[a],l=r.data[a+1],u=r.data[a+2]+256*(l+256*s),c=Math.floor(16777215/e.length);u&&u%c==0&&n.push(e[u/c-1])}return n}var Nv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Av=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=Object(mt.k)(),r.wrappedRenderedExtent_=Object(mt.k)(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r}return Nv(e,t),e.prototype.renderWorlds=function(t,e,r){var n=e.extent,i=e.viewState,o=i.center,a=i.resolution,s=i.projection,l=i.rotation,u=s.getExtent(),c=this.getLayer().getSource(),h=e.pixelRatio,f=e.viewHints,p=!(f[po.a.ANIMATING]||f[po.a.INTERACTING]),d=this.context,g=Math.round(e.size[0]*h),y=Math.round(e.size[1]*h),m=c.getWrapX()&&s.canWrapX(),_=m?Object(mt.F)(u):null,v=m?Math.ceil((n[2]-u[2])/_)+1:1,b=m?Math.floor((n[0]-u[0])/_):0;do{var x=this.getRenderTransform(o,a,l,h,g,y,b*_);t.execute(d,1,x,l,p,void 0,r)}while(++b<v)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];Object(Un.f)(this.pixelTransform,1/r,1/r),Object(Un.e)(this.inversePixelTransform,this.pixelTransform);var i=Object(Un.l)(this.pixelTransform);this.useContainer(e,i,n.opacity,this.getBackground(t));var o=this.context,a=o.canvas,s=this.replayGroup_,l=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!l||l.isEmpty()))return null;var c=Math.round(t.size[0]*r),h=Math.round(t.size[1]*r);a.width!=c||a.height!=h?(a.width=c,a.height=h,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,c,h),this.preRender(o,t);var f=t.viewState,p=f.projection,d=!1,g=!0;if(n.extent&&this.clipping){var y=Object(u.m)(n.extent,p);(d=(g=Object(mt.G)(y,t.extent))&&!Object(mt.h)(y,t.extent))&&this.clipUnrotated(o,t,y)}g&&this.renderWorlds(s,t),d&&o.restore(),this.postRender(o,t);var m=Object(ti.g)(n.opacity),_=this.container;return m!==_.style.opacity&&(_.style.opacity=m),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];Object(Un.a)(this.pixelTransform,r);var n=this.renderedCenter_,i=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,s=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],c=r[0]*Rv,h=r[1]*Rv;u.push(this.getRenderTransform(n,i,o,Rv,c,h,0).slice());var f=l.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Object(mt.h)(p,s)){for(var d=s[0],g=Object(mt.F)(p),y=0,m=void 0;d<p[0];)m=g*--y,u.push(this.getRenderTransform(n,i,o,Rv,c,h,m).slice()),d+=g;for(y=0,d=s[2];d>p[2];)m=g*++y,u.push(this.getRenderTransform(n,i,o,Rv,c,h,m).slice()),d-=g}this.hitDetectionImageData_=Lv(r,u,this.renderedFeatures_,l.getStyleFunction(),s,i,o)}e(Mv(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){var o=this;if(this.replayGroup_){var a,s=e.viewState.resolution,l=e.viewState.rotation,u=this.getLayer(),c={},h=function(t,e,r){var o=Object(Gn.c)(t),a=c[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[o]=!0,i.splice(i.lastIndexOf(a),1),n(t,u,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return c[o]=!0,n(t,u,e);i.push(c[o]={feature:t,layer:u,geometry:e,distanceSq:r,callback:n})}},f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(n){return a=n.forEachFeatureAtCoordinate(t,s,l,r,h,n===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),a}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var n=t.viewHints[po.a.ANIMATING],i=t.viewHints[po.a.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,l=t.viewState,c=l.projection,f=l.resolution,p=t.pixelRatio,d=e.getRevision(),g=e.getRenderBuffer(),y=e.getRenderOrder();void 0===y&&(y=yy);var m=l.center.slice(),_=Object(mt.d)(s,g*f),v=_.slice(),b=[_.slice()],x=c.getExtent();if(r.getWrapX()&&c.canWrapX()&&!Object(mt.h)(x,t.extent)){var w=Object(mt.F)(x),E=Math.max(Object(mt.F)(_)/2,w);_[0]=x[0]-E,_[2]=x[2]+E,Object(Wn.p)(m,c);var O=Object(mt.L)(b[0],c);O[0]<x[0]&&O[2]<x[2]?b.push([O[0]+w,O[1],O[2]+w,O[3]]):O[0]>x[0]&&O[2]>x[2]&&b.push([O[0]-w,O[1],O[2]-w,O[3]])}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==y&&Object(mt.h)(this.wrappedRenderedExtent_,_))return Object(h.b)(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S,I=new pv(_y(f,p),_,f,p);this.getLayer().getDeclutter()&&(S=new pv(_y(f,p),_,f,p));var C,T=Object(u.s)();if(T){for(var P=0,R=b.length;P<R;++P){var L=b[P],M=Object(u.x)(L,c);r.loadFeatures(M,Object(u.y)(f,c),T)}C=Object(u.r)(T,c)}else for(P=0,R=b.length;P<R;++P)r.loadFeatures(b[P],f,c);var N=my(f,p),A=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,f)),r){var i=this.renderFeature(t,N,r,I,C,S);this.dirty_=this.dirty_||i}}.bind(this),k=Object(u.x)(_,c),j=r.getFeaturesInExtent(k);y&&j.sort(y);for(P=0,R=j.length;P<R;++P)A(j[P]);this.renderedFeatures_=j;var F=I.finish(),D=new Pv(_,f,p,r.getOverlaps(),F,e.getRenderBuffer());return S&&(this.declutterExecutorGroup=new Pv(_,f,p,r.getOverlaps(),S.finish(),e.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=y,this.renderedExtent_=v,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=c,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,l=r.length;s<l;++s)a=vy(n,t,r[s],e,this.boundHandleStyleImageChange_,i,o)||a;else a=vy(n,t,r,e,this.boundHandleStyleImageChange_,i,o);return a},e}(dv.a),kv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jv=function(t){function e(e){return t.call(this,e)||this}return kv(e,t),e.prototype.createRenderer=function(){return new Av(this)},e}(X_);function Fv(t){return(Fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Uv(t,e,r){return(Uv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yv(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Bv(t,e){return(Bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yv(t);if(e){var i=Yv(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Vv(this,r)}}function Vv(t,e){return!e||"object"!==Fv(e)&&"function"!=typeof e?qv(t):e}function qv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yv(t){return(Yv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bv(t,e)}(o,t);var e,r,n,i=zv(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Dv(this,o),(t=i.call(this,e)).styleCluster_=e.style,t.oldCluster_=new Tg,t.clusters_=[],t.animation_={start:!1},t.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),t.set("animationMethod",e.animationMethod||So.easeOut),t.getSource().on("change",t.saveCluster_.bind(qv(t))),t.on("prerender",t.animate.bind(qv(t))),t.on("postrender",t.postanimate.bind(qv(t))),t.setStyle(e.style),t}return e=o,n=[{key:"getClusterForFeature",value:function(t,e){return e.find((function(e){var r,n=e.get("features");return _D(n)||(r=n.find((function(e){return e===t}))),r}))}}],(r=[{key:"saveCluster_",value:function(){if(this.oldCluster_.clear(),this.get("animationDuration")){var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldCluster_.addFeatures(this.clusters_),this.clusters_=t.slice(0),this.sourceChanged=!0)}}},{key:"animate",value:function(t){var e=this,r=t,n=this.get("animationDuration");if(n){if(this.animation_.resolution!==r.frameState.viewState.resolution&&this.sourceChanged){var i=r.frameState.viewState.resolution,o=r.frameState.extent;this.animation_.reverse=this.animation_.resolution>=i,this.prepareAnimation_(o,r.frameState.viewState.resolution),r.frameState.time=this.animation_.start}var a=this.animation_.clustersFrom.length;if(a>0&&a<=1e3&&this.animation_.start){var s=wy(r),l=(r.frameState.time-this.animation_.start)/n;l>1&&(this.animation_.start=!1,l=1),l=this.get("animationMethod")(l),r.context.save(),r.context.globalAlpha=this.getOpacity(),this.animation_.clustersFrom.forEach((function(t,n){var i=t.getGeometry().getCoordinates(),o=e.animation_.clustersTo[n].getGeometry().getCoordinates();e.animation_.reverse?(i[0]=o[0]+l*(i[0]-o[0]),i[1]=o[1]+l*(i[1]-o[1])):(i[0]+=l*(o[0]-i[0]),i[1]+=l*(o[1]-i[1]));var a=e.getStyle()(t,r.frameState.viewState.resolution),u=new aa(i);_D(a)||a.forEach((function(t){var e=t.getImage();_D(e)||(null==e.getOrigin()&&(e.origin_=[]),null==e.getAnchor()&&(e.normalizedAnchor_=[]),null==e.getSize()&&(e.size_=[])),s.setStyle(t),s.drawGeometry(u)}))})),r.context.restore(),r.frameState.animate=!0,r.context.save(),r.context.beginPath(),r.context.rect(0,0,0,0),r.context.clip(),this.clip_=!0}else this.animation_.clustersFrom.length=0,this.animation_.clustersTo.length=0,this.animation_.start=!1}}},{key:"prepareAnimation_",value:function(t,e){var r=this;this.animation_.clustersFrom=[],this.animation_.clustersTo=[];var n=Object(mt.d)(t,100*e),i=this.oldCluster_.getFeaturesInExtent(n),a=this.getSource().getFeaturesInExtent(n),s=this.animation_.reverse?a:i,l=this.animation_.reverse?i:a;s.forEach((function(t){var e=t.get("features");if(!_D(e)){var n=o.getClusterForFeature(e[0],l);_D(n)||!1===n||(r.animation_.clustersFrom.push(t),r.animation_.clustersTo.push(n))}})),this.animation_.resolution=e,this.sourceChanged=!1,this.animation_.start=(new Date).getTime()}},{key:"postanimate",value:function(t){this.clip_&&(t.context.restore(),this.clip_=!1)}},{key:"setStyle",value:function(t){Uv(Yv(o.prototype),"setStyle",this).call(this,this.styleCluster_)}}])&&Gv(e.prototype,r),n&&Gv(e,n),o}(jv),Xv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hv="select",Zv=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return Xv(e,t),e}(Ni.a),Kv={};var Jv=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n,i,o=e||{};if(r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=o.condition?o.condition:hs,r.addCondition_=o.addCondition?o.addCondition:cs,r.removeCondition_=o.removeCondition?o.removeCondition:cs,r.toggleCondition_=o.toggleCondition?o.toggleCondition:ps,r.multi_=!!o.multi&&o.multi,r.filter_=o.filter?o.filter:Dn.b,r.hitTolerance_=o.hitTolerance?o.hitTolerance:0,r.style_=void 0!==o.style?o.style:(n=Ky(),Object(h.c)(n[fo.a.POLYGON],n[fo.a.LINE_STRING]),Object(h.c)(n[fo.a.GEOMETRY_COLLECTION],n[fo.a.LINE_STRING]),function(t){return t.getGeometry()?n[t.getGeometry().getType()]:null}),r.features_=o.features||new Fi,o.layers)if("function"==typeof o.layers)i=o.layers;else{var a=o.layers;i=function(t){return Object(h.f)(a,t)}}else i=Dn.b;return r.layerFilter_=i,r.featureLayerAssociation_={},r}return Xv(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Object(Gn.c)(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Object(Gn.c)(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(Li,this.boundAddFeature_),this.features_.addEventListener(Mi,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Li,this.boundAddFeature_),this.features_.removeEventListener(Mi,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){var r=this.getMap().getAllLayers().find((function(t){if(t instanceof jv&&t.getSource()&&t.getSource().hasFeature(e))return t}));r&&this.addFeatureLayerAssociation_(e,r)}},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=Object(Gn.c)(t);e in Kv||(Kv[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var r=this.getMap().getInteractions().getArray(),n=r.length-1;n>=0;--n){var i=r[n];if(i!==this&&i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}var o=Object(Gn.c)(t);t.setStyle(Kv[o]),delete Kv[o]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Object(Gn.c)(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,o=t.map,a=this.getFeatures(),s=[],l=[];if(i){Object(ii.b)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=a.getLength()-1;u>=0;--u){var c=a.item(u),f=l.indexOf(c);f>-1?l.splice(f,1):(a.remove(c),s.push(c))}0!==l.length&&a.extend(l)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||Object(h.f)(a.getArray(),t)?(r||n)&&Object(h.f)(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,i),l.push(t)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=s.length-1;p>=0;--p)a.remove(s[p]);a.extend(l)}return(l.length>0||s.length>0)&&this.dispatchEvent(new Zv(Hv,l,s,t)),!0},e}(Ja);function $v(t){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eb(t,e){return(eb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ob(t);if(e){var i=ob(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nb(this,r)}}function nb(t,e){return!e||"object"!==$v(e)&&"function"!=typeof e?ib(t):e}function ib(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ob(t){return(ob=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ab=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eb(t,e)}(o,t);var e,r,n,i=rb(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qv(this,o);var r=e,n=new jv({source:new Tg({features:new Fi,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:r.featureStyle});return e.layers.push(n),r.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))},(t=i.call(this,r)).map=r.map,t.pointRadius=r.pointRadius||12,t.circleMaxObjects=r.circleMaxObjects||10,t.maxObjects=r.maxObjects||60,t.spiral=!1!==r.spiral,t.animate=r.animate,t.animationDuration=r.animationDuration||500,t.selectCluster_=!1!==r.selectCluster,t.maxFeaturesToSelect=r.maxFeaturesToSelect,t.facadeLayer_=r.fLayer,t.style_=r.style,t.filter_=r.filter,t.overlayLayer_=n,t.originalHandleEvent=t.handleEvent,t.on("select",t.selectCluster.bind(ib(t)),ib(t)),t}return e=o,(r=[{key:"setMap",value:function(t){var e=this;this.getMap()&&(this.getMap().getView()&&this.getMap().getView().un("change:resolution",this.clear.bind(this)),this.getMap().removeLayer(this.overlayLayer_)),Jv.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&t.getView()&&t.getView().on("change:resolution",this.clear.bind(this)),this.handleEvent=function(t){return e.originalHandleEvent.apply(e,[t]),!0}}},{key:"clear",value:function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}},{key:"getLayer",value:function(){return this.overlayLayer_}},{key:"refreshViewEvents",value:function(){this.getMap()&&this.getMap().getView()&&this.getMap().getView().on("change:resolution",this.clear.bind(this))}},{key:"selectCluster",value:function(t){if(t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var r=e.get("features");if(r&&1!==r.length)if(r&&!(r.length>this.maxFeaturesToSelect)||this.facadeLayer_.getImpl().getNumZoomLevels()-this.map.getZoom()==1){this.selectCluster_||this.getFeatures().clear();var n=e.getGeometry().getCoordinates(),i=this.getMap().getView().getResolution(),o=i*this.pointRadius*(.5+r.length/4);!this.spiral||r.length<=this.circleMaxObjects?(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInCircle_(r,i,o,n)):(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInSpiral_(r,i,n)),this.animate&&this.animateCluster_(n)}else{var a=wh.getFeaturesExtent(r,this.map.getProjection().code);this.map.setBbox(a)}}}else this.clear()}},{key:"drawFeaturesAndLinsInCircle_",value:function(t,e,r,n){for(var i=Math.min(t.length,this.circleMaxObjects),o=0;o<i;o+=1){var a=2*Math.PI*(o/i);2!==i&&4!==i||(a+=Math.PI/4);var s=[n[0]+r*Math.sin(a),n[1]+r*Math.cos(a)];this.drawAnimatedFeatureAndLink_(t[o],e,n,s)}}},{key:"drawFeaturesAndLinsInSpiral_",value:function(t,e,r){for(var n,i=0,o=2*this.pointRadius,a=Math.min(this.maxObjects,t.length),s=0;s<a;s+=1){i+=(o+.1)/(n=o/2+o*i/(2*Math.PI));var l=e*n*Math.sin(i),u=e*n*Math.cos(i),c=[r[0]+l,r[1]+u];this.drawAnimatedFeatureAndLink_(t[s],e,r,c)}}},{key:"drawAnimatedFeatureAndLink_",value:function(t,e,r,n){var i=new Wc;t.getKeys().forEach((function(e){i.set(e,t.get(e))}));var o=t.getStyle();o||(o=this.facadeLayer_.getStyle().getImpl().oldOLLayer.getStyle());var a=o(t,e),s=a.map?a.map((function(t){return t.clone()})):[a.clone()];i.setId(t.getId()),i.setStyle(s),i.set("features",[t]);var l=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new aa(n):t.getGeometry(),u=!0===["Point","MultiPoint"].includes(t.getGeometry().getType())?new Qc([r,n]):new Qc([r,wh.getCentroid(t.getGeometry())]);i.set("geometry",l),this.overlayLayer_.getSource().addFeature(i);var c=new Wc({selectclusterlink:!0,geometry:u});this.overlayLayer_.getSource().addFeature(c)}},{key:"animateCluster_",value:function(t,e){var r=this;this.listenerKey_&&(this.overlayLayer_.setVisible(!0),Object(ag.b)(this.listenerKey_));var n=this.overlayLayer_.getSource().getFeatures();if(n.length){this.overlayLayer_.setVisible(!1);var i=this.animationDuration||500,o=(new Date).getTime();this.listenerKey_=this.facadeLayer_.getImpl().getOLLayer().on(["postrender","postcompose"],(function(e){for(var a=wy(e),s=r.getMap().getView().getResolution(),l=Object(So.easeOut)((e.frameState.time-o)/i),u=0;u<n.length;u+=1){if(n[u].get("features")){var c=n[u],h=c.get("features")[0],f=c.getGeometry().getCoordinates();f[0]=t[0]+l*(f[0]-t[0]),f[1]=t[1]+l*(f[1]-t[1]);for(var p=new aa(f),d=r.overlayLayer_.getStyle()(h,s).map((function(t){return t.clone()})),g=0;g<d.length;g+=1){var y=d[g];y.getImage().size||(y.getImage().size=[42,42]),a.setStyle(y),a.drawLineString(new Qc([t,f]))}var m=h.getStyle();m||(m=r.facadeLayer_.getStyle().getImpl().oldOLLayer.getStyle());for(var _=m(h,s),v=_.map?_.map((function(t){return t.clone()})):[_.clone()],b=0;b<v.length;b+=1){var x=v[b],w=x.getImage();if(w instanceof v_){var E=null==w.getOrigin()?[0,0]:w.getOrigin(),O=null==w.getAnchor()?[0,0]:w.getAnchor(),S=null==w.getSize()?[42,42]:w.getSize();w.size=S,w.anchor=O,w.origin=E,x.setImage(w)}a.setStyle(x),a.drawGeometry(p)}}if(l>1)return Object(ag.b)(r.listenerKey_),r.overlayLayer_.setVisible(!0),void r.overlayLayer_.changed();e.frameState.animate=!0}}),this)}}}])&&tb(e.prototype,r),n&&tb(e,n),o}(Jv),sb=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])<=0},lb=function(t){t.sort((function(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}));for(var e=[],r=0;r<t.length;r+=1){for(;e.length>=2&&sb(e[e.length-2],e[e.length-1],t[r]);)e.pop();e.push(t[r])}for(var n=[],i=t.length-1;i>=0;i-=1){for(;n.length>=2&&sb(n[n.length-2],n[n.length-1],t[i]);)n.pop();n.push(t[i])}return n.pop(),e.pop(),e.concat(n)};function ub(t){return(ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cb(t){return function(t){if(Array.isArray(t))return hb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return hb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hb(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pb(t,e){return(pb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function db(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yb(t);if(e){var i=yb(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gb(this,r)}}function gb(t,e){return!e||"object"!==ub(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yb(t){return(yb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pb(t,e)}(o,t);var e,r,n,i=db(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,{})).convexHullLayer_=null,r.oldOLLayer_=null,r.optionsVendor_=e,r.options_=t,r.clusterLayer_=null,r.selectClusterInteraction_=null,r.hoverInteraction_=null,r}return e=o,n=[{key:"updateRangeImpl",value:function(t,e,r,n,i){var o=i.getOptions().ranges.find((function(r){return r.min===t&&r.max===e}))||!1;return o&&(o.style=r),o}}],(r=[{key:"applyToLayer",value:function(t,e){this.layer_=t,this.options_=this.updateLastRange_(),_D(this.selectClusterInteraction_)||this.selectClusterInteraction_.clear(),this.updateCanvas();var r=t.getFeatures();r.length>0?this.clusterize_(r):this.layer_.on(Xl,this.clusterize_.bind(this),this)}},{key:"clusterize_",value:function(t){var e=t.map((function(t){return t.getImpl().getOLFeature()}));this.clusterLayer_=new Wv({name:"Cluster",source:new Rg({distance:this.options_.distance,geometryFunction:function(t){return new aa(Object(mt.x)(t.getGeometry().getExtent()))},source:new Tg({features:e})}),animationDuration:this.optionsVendor_.animationDuration,style:this.clusterStyleFn_.bind(this),animationMethod:So[this.optionsVendor_.animationMethod]}),!1===this.options_.animated&&this.clusterLayer_.set("animationDuration",void 0),this.clusterLayer_.setZIndex(99999);var r=this.layer_.getImpl().getOLLayer();r instanceof Wv||(this.oldOLLayer_=r),this.clusterLayer_.setMaxResolution(this.oldOLLayer_.getMaxResolution()),this.clusterLayer_.setMinResolution(this.oldOLLayer_.getMinResolution()),this.layer_.getImpl().setOLLayer(this.clusterLayer_),_D(this.options_.ranges)&&(this.options_.ranges=this.getDefaultRanges_()),!1!==this.options_.hoverInteraction&&this.addCoverInteraction_(),!1!==this.options_.selectInteraction&&this.addSelectInteraction_()}},{key:"setRanges",value:function(t){_D(t)?this.options_.ranges=this.getDefaultRanges_():this.options_.ranges=t}},{key:"updateLastRange_",value:function(){var t=HD({},this.options_);if(!_D(this.options_)&&!_D(this.options_.ranges)){var e=t.ranges;if(e.length>0){var r=(e=e.sort((function(t,e){return t.min-e.min}))).pop();if(_D(r.max)){var n=this.layer_.getFeatures().length;r.max=n}t.ranges.push(r)}}return t}},{key:"setAnimated",value:function(t,e,r){return r.getOptions().animated=t,!1===t?this.clusterLayer_.set("animationDuration",void 0):this.clusterLayer_.set("animationDuration",this.optionsVendor_.animationDuration),this}},{key:"addSelectInteraction",value:function(){this.addSelectInteraction_()}},{key:"addSelectInteraction_",value:function(){var t=this,e=this.layer_.getImpl().getMap();this.selectClusterInteraction_=new ab({fLayer:this.layer_,map:e,maxFeaturesToSelect:this.options_.maxFeaturesToSelect,pointRadius:this.optionsVendor_.distanceSelectFeatures,animate:!0,layers:[this.clusterLayer_]}),this.selectClusterInteraction_.on("select",this.selectClusterFeature_.bind(this),this),e.getMapImpl().addInteraction(this.selectClusterInteraction_),e.getMapImpl().on("change:view",(function(e){return t.selectClusterInteraction_.refreshViewEvents(e)}))}},{key:"removeSelectInteraction",value:function(){this.removeSelectInteraction_()}},{key:"removeSelectInteraction_",value:function(){this.layer_.getImpl().getMap().getMapImpl().removeInteraction(this.selectClusterInteraction_)}},{key:"hoverFeatureFn_",value:function(t,e){if(!_D(t)){var r=[];t.forEach((function(t){t instanceof EG?r=r.concat(t.getAttribute("features")):r.push(t)}));var n=r.map((function(t){return t.getImpl().getOLFeature().getGeometry().getCoordinates()})),i=lb(n);if(i.length>2){var o=new Wc(new Oa([i])),a=cG.olFeature2Facade(o);_D(this.convexHullLayer_)?(this.convexHullLayer_=new Dw({name:"cluster_cover_".concat(this.layer_.name),extract:!1},{displayInLayerSwitcher:!1,style:new Km(this.optionsVendor_.convexHullStyle)}),this.convexHullLayer_.addFeatures(a),this.layer_.getImpl().getMap().addLayers(this.convexHullLayer_),this.layer_.getImpl().getMap().getMapImpl().getView().on("change:resolution",this.clearConvexHull.bind(this),this),this.convexHullLayer_.setStyle(new Km(this.optionsVendor_.convexHullStyle)),this.convexHullLayer_.setZIndex(99990)):(this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures()),this.convexHullLayer_.addFeatures(a))}}}},{key:"leaveFeatureFn_",value:function(t,e){_D(this.convexHullLayer_)||this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures())}},{key:"addCoverInteraction_",value:function(){this.hoverKey_=this.layer_.on(Yl,this.hoverFeatureFn_.bind(this)),this.leaveKey_=this.layer_.on(Wl,this.leaveFeatureFn_.bind(this))}},{key:"removeCoverInteraction_",value:function(){this.layer_.unByKey(Yl,this.hoverKey_),this.layer_.unByKey(Wl,this.leaveKey_)}},{key:"clusterStyleFn_",value:function(t,e,r){var n,i=t.get("features");if(!i)return new am;var o=i.length,a=this.options_.ranges.find((function(t){return t.min<=o&&t.max>=o}));if(_D(a)){if(1===o){var s=i[0].getStyle();s||(s=this.oldOLLayer_.getStyle()),(n=s(i[0],e))[0].setGeometry(i[0].getGeometry())}}else{var l=a.style.clone();if(r)l.set("fill.opacity",.33);else if(this.options_.displayAmount){l.set("label",this.options_.label);var u=l.get("label.color");if(_D(u)){var c=l.get("fill.color");u=_D(c)?"#000":XD(c),l.set("label.color",u)}}n=l.getImpl().olStyleFn(t,e)}return n}},{key:"getDefaultRanges_",value:function(){var t=this.layer_.getFeatures().length,e=Math.floor(t/3),r=[{min:2,max:e=Math.max(e,3),style:new q_(jb.RANGE_1_DEFAULT)},{min:e,max:2*e,style:new q_(jb.RANGE_2_DEFAULT)},{min:2*e,max:t+1,style:new q_(jb.RANGE_3_DEFAULT)}];return this.options_.ranges=r,r}},{key:"selectClusterFeature_",value:function(t){this.clearConvexHull()}},{key:"unapply",value:function(){_D(this.clusterLayer_)?_D(this.layer_)||this.layer_.un(Xl,this.clusterize_.bind(this),this):(this.layer_.getImpl().setOLLayer(this.oldOLLayer_),this.oldOLLayer_.setMaxResolution(this.clusterLayer_.getMaxResolution()),this.oldOLLayer_.setMinResolution(this.clusterLayer_.getMinResolution()),this.removeCoverInteraction_(),this.removeSelectInteraction_(),this.clearConvexHull(),this.deactivateChangeResolutionEvent(),this.layer_.redraw(),this.deactivateChangeEvent())}},{key:"clearConvexHull",value:function(){null!==this.convexHullLayer_&&(this.layer_.getImpl().getMap().removeLayers(this.convexHullLayer_),this.convexHullLayer_=null)}},{key:"updateCanvas",value:function(){}},{key:"activateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource(),e=Rg.prototype.refresh;t.getSource().on("change",e)}}},{key:"deactivateChangeEvent",value:function(){if(null!==this.clusterLayer_){var t=this.clusterLayer_.getSource(),e=Rg.prototype.refresh;Object(ag.b)({bindTo:void 0,callOnce:!1,listener:e,target:t.getSource(),type:"change"})}}},{key:"deactivateChangeResolutionEvent",value:function(){if(!_D(this.layer_)&&!_D(this.layer_.getImpl())){var t=this.layer_.getImpl().getMap();if(!_D(t)&&!_D(t.getMapImpl())){var e=t.getMapImpl().getView();Object(ag.b)({type:"change:resolution",bindTo:void 0,listener:this.clearConvexHull,target:e,callOnce:!1})}}}},{key:"deactivateTemporarilyChangeEvent",value:function(t,e){this.deactivateChangeEvent(),vD(t)&&(null==e?t():t.apply(void 0,cb(e)))}},{key:"selectClusterInteraction",get:function(){return this.selectClusterInteraction_}},{key:"oldOLLayer",get:function(){return this.oldOLLayer_}}])&&fb(e.prototype,r),n&&fb(e,n),o}(Ny);function _b(t){return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bb(t,e){return(bb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Eb(t);if(e){var i=Eb(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wb(this,r)}}function wb(t,e){return!e||"object"!==_b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eb(t){return(Eb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ob=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bb(t,e)}(o,t);var e,r,n,i=xb(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).styles_=[],r}return e=o,(r=[{key:"apply",value:function(t){this.layer_=t,_D(t)||this.updateInternal_(t)}},{key:"add",value:function(t){var e=this,r=t,n=this.layer_;return this.unapplyInternal(this.layer_),mD(r)||(r=[r]),(r=r.filter((function(t){return t.constructor!==e.constructor}))).forEach((function(t){e.styles_=e.styles_.filter((function(e){return e.constructor!==t.constructor}))})),this.styles_=this.styles_.concat(r),_D(n)||this.updateInternal_(n),this}},{key:"remove",value:function(t){var e=t,r=this.layer_;mD(e)||(e=[e]),_D(this.layer_)||this.unapplyInternal(this.layer_),this.styles_=this.styles_.filter((function(t){return!e.includes(t)})),r.setStyle(this.oldStyle_,!0),r.setStyle(this)}},{key:"getStyles",value:function(){return this.styles_}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"clear",value:function(){this.remove(this.styles_)}},{key:"unapplyInternal",value:function(t){this.styles_.concat(this).sort((function(t,e){return KD(e,t)})).forEach((function(e){e instanceof o&&e.unapplySoft(t)}))}},{key:"unapplySoft",value:function(t){}},{key:"unapply",value:function(t){this.unapplyInternal(t),this.layer_=null}},{key:"updateInternal_",value:function(t){this.styles_.concat(this).sort((function(t,e){return KD(t,e)})).forEach((function(e){e instanceof o?e.applyInternal(t):e instanceof Em&&e.apply(t,!0)}))}}])&&vb(e.prototype,r),n&&vb(e,n),o}(Em);function Sb(t){return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ib(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cb(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rb(t,e,r){return(Rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ab(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Lb(t,e){return(Lb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ab(t);if(e){var i=Ab(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nb(this,r)}}function Nb(t,e){return!e||"object"!==Sb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ab(t){return(Ab=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lb(t,e)}(o,t);var e,r,n,i=Mb(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Tb(this,o);var n=new mb(e,r);return t=i.call(this,e,n),HD(e,o.DEFAULT),HD(r,o.DEFAULT_VENDOR),t.optsVendor_=r,t.oldStyle_=null,t}return e=o,n=[{key:"deserialize",value:function(t){var e=Ib(t,3),r=e[0],n=e[1],i=e[2],o=r;o.ranges.forEach((function(t){t.style=Em.deserialize(t.style)})),o=QD(r);var a=QD(n),s=new Function(["options","optsVendor"],"return new M.style.Cluster(options, optsVendor)")(o,a),l=i.map((function(t){return Em.deserialize(t)}));return s.add(l),s}}],(r=[{key:"apply",value:function(t){Rb(Ab(o.prototype),"apply",this).call(this,t);var e=t.getStyle();this.oldStyle_=e instanceof o?e.getOldStyle():e}},{key:"unapplySoft",value:function(t){this.getImpl().unapply()}},{key:"add",value:function(t){return _D(this.layer_)||this.unapplySoft(this.layer_),Rb(Ab(o.prototype),"add",this).call(this,t)}},{key:"applyInternal",value:function(t){this.layer_=t,this.getImpl().applyToLayer(t),this.updateCanvas()}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"getRanges",value:function(){return this.options_.ranges}},{key:"getOptions",value:function(){return this.options_}},{key:"setRanges",value:function(t){return this.getImpl().ranges=t,this.unapply(this.layer_),this.layer_.style=this,this}},{key:"getRange",value:function(t,e){return this.options_.ranges.find((function(r){return r.min===t&&r.max===e}))}},{key:"updateRange",value:function(t,e,r){return mb.updateRangeImpl(t,e,r,this.layer_,this),this.unapply(this.layer_),this.layer_.style=this,this}},{key:"setAnimated",value:function(t){return this.getImpl().setAnimated(t,this.layer_,this)}},{key:"isAnimated",value:function(){return this.options_.animated}},{key:"toImage",value:function(){return this.oldStyle_ instanceof Em?this.oldStyle_.toImage():Rb(Ab(o.prototype),"toImage",this).call(this)}},{key:"refresh",value:function(){if(!_D(this.layer_)){var t=this.layer_;this.unapply(this.layer_),this.apply(t),this.updateCanvas()}}},{key:"addSelectInteraction",value:function(){this.getImpl().addSelectInteraction()}},{key:"removeSelectInteraction",value:function(){this.getImpl().removeSelectInteraction()}},{key:"toJSON",value:function(){var t=HD({},this.getOptions());t.ranges=this.getRanges().map((function(t){var e=HD({},t);return e.style=t.style.serialize(),e})),t=$D(t);var e=HD({},this.optsVendor_);return{parameters:[t,e=$D(e),this.getStyles().map((function(t){return t.serialize()}))],deserializedMethod:"M.style.Cluster.deserialize"}}},{key:"ORDER",get:function(){return 4}}])&&Pb(e.prototype,r),n&&Pb(e,n),o}(Ob);kb.DEFAULT={ranges:[],hoverInteraction:!0,displayAmount:!0,selectInteraction:!0,distance:60,animated:!0,maxFeaturesToSelect:15,label:{text:function(t){var e,r=t.getAttribute("features");return r.length&&(e=r.length.toString()),e},color:"#fff",font:"bold 15px Arial",baseline:"middle",align:"center"}},kb.DEFAULT_VENDOR={animationDuration:250,animationMethod:"linear",distanceSelectFeatures:15,convexHullStyle:{fill:{color:"#fff",opacity:.25},stroke:{color:"#7b98bc"}}},kb.RANGE_1_DEFAULT={fill:{color:"#81c89a"},stroke:{color:"#6eb988",width:3},radius:15},kb.RANGE_2_DEFAULT={fill:{color:"#85b9d2"},stroke:{color:"#6da4be",width:3},radius:20},kb.RANGE_3_DEFAULT={fill:{color:"#938fcf"},stroke:{color:"#827ec5",width:3},radius:25};var jb=kb,Fb="bottom-left",Db="bottom-center",Gb="bottom-right",Ub="center-left",Bb="center-center",zb="center-right",Vb="top-left",qb="top-center",Yb="top-right";function Wb(t){return(Wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Xb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hb="element",Zb="map",Kb="offset",Jb="position",$b="positioning",Qb=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+ti.d,r.element.style.position="absolute",r.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==Wb(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(Hb,r.handleElementChanged),r.addChangeListener(Zb,r.handleMapChanged),r.addChangeListener(Kb,r.handleOffsetChanged),r.addChangeListener(Jb,r.handlePositionChanged),r.addChangeListener($b,r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:Vb),void 0!==e.position&&r.setPosition(e.position),r}return Xb(e,t),e.prototype.getElement=function(){return this.get(Hb)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Zb)||null},e.prototype.getOffset=function(){return this.get(Kb)},e.prototype.getPosition=function(){return this.get(Jb)},e.prototype.getPositioning=function(){return this.get($b)},e.prototype.handleElementChanged=function(){Object(oi.d)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(oi.e)(this.element),Object(Ci.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(Ci.a)(t,ro,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Hb,t)},e.prototype.setMap=function(t){this.set(Zb,t)},e.prototype.setOffset=function(t){this.set(Kb,t)},e.prototype.setPosition=function(t){this.set(Jb,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Jb)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[Object(oi.c)(n),Object(oi.b)(n)]),o=t||{},a=void 0===o.margin?20:o.margin;if(!Object(mt.h)(r,i)){var s=i[0]-r[0],l=r[2]-i[2],u=i[1]-r[1],c=r[3]-i[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),u<0?h[1]=u-a:c<0&&(h[1]=Math.abs(c)+a),0!==h[0]||0!==h[1]){var f=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(f);if(!p)return;var d=[p[0]+h[0],p[1]+h[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set($b,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",l="0%";i==Gb||i==zb||i==Yb?s="-100%":i!=Db&&i!=Bb&&i!=qb||(s="-50%"),i==Fb||i==Db||i==Gb?l="-100%":i!=Ub&&i!=Bb&&i!=zb||(l="-50%");var u="translate(".concat(s,", ").concat(l,") translate(").concat(o,", ").concat(a,")");this.rendered.transform_!=u&&(this.rendered.transform_=u,r.transform=u,r.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(ei.a);function tx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ex=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"listen",value:function(){t.WIDTH=window.innerWidth,t.HEIGHT=window.innerHeight,window.addEventListener("resize",(function(e){t.WIDTH=e.target.innerWidth,t.HEIGHT=e.target.innerHeight}))}}],(r=null)&&tx(e.prototype,r),n&&tx(e,n),t}();ex.WIDTH=window.innerWidth,ex.HEIGHT=window.innerHeight,ex.listen();var rx=ex;function nx(t){return(nx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ix(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ox(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ax(t,e){return(ax=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ux(t);if(e){var i=ux(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lx(this,r)}}function lx(t,e){return!e||"object"!==nx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ux(t){return(ux=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ax(t,e)}(o,t);var e,r,n,i=sx(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ix(this,o),(t=i.call(this,{})).panMapIfOutOfView=e.panMapIfOutOfView,void 0===t.panMapIfOutOfView&&(t.panMapIfOutOfView=!0),t.ani_opts=e.ani_opts,void 0===t.ani_opts&&(t.ani_opts={duration:250}),t.facadeMap_=null,t.cachedAniPixel_=null,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.container=e,this.content=this.getContentFromContainer(e),BD(this.content),this.setElement(this.container),t.getMapImpl().addOverlay(this)}},{key:"show",value:function(t,e){return this.setPosition(t),this.panMapIfOutOfView&&this.panIntoView_(t),this.content.scrollTop=0,vD(e)&&e(),this}},{key:"centerByStatus",value:function(t,e){var r=this.getMap().getView().getResolution(),n=[].concat(e);if(t===Ox.status.COLLAPSED)n[1]-=.1*rx.HEIGHT*r;else{if(t!==Ox.status.DEFAULT)return;n[1]-=.275*rx.HEIGHT*r}var i=this.facadeMap_.getFeatureCenter();this.facadeMap_.setCenter({x:n[0],y:n[1]}),_D(i)||this.facadeMap_.drawFeatures([i])}},{key:"getContentFromContainer",value:function(t){return t.querySelector("div.m-body")}},{key:"panIntoView_",value:function(t){var e=this;return this.panIntoSynchronizedAnim_().then((function(){if(e.isAnimating_=!0,rx.WIDTH>768){var r=e.element.querySelector(".m-popup"),n=r.clientWidth+20,i=r.clientHeight+20+30,o=e.getMap().getSize(),a=e.getMap().getView().getCenter(),s=n-60,l=e.getOffset(),u=e.getMap().getPixelFromCoordinate(t);if(!_D(u)){var c=u[0]-60,h=o[0]-(u[0]+s),f=u[1]-(i+l[1]),p=o[1]-(u[1]+20)-l[1],d=e.getMap().getPixelFromCoordinate(a),g=d.slice();h<0?g[0]-=h:c<0&&(g[0]+=c),f<0?g[1]+=f:p<0&&(g[1]-=p),!_D(e.ani_opts)&&_D(e.ani_opts.source)&&(e.ani_opts.source=a,e.getMap().getView().animate(e.ani_opts)),g[0]===d[0]&&g[1]===d[1]||e.getMap().getView().setCenter(e.getMap().getCoordinateFromPixel(g))}}e.isAnimating_=!1})),this.getMap().getView().getCenter()}},{key:"panIntoSynchronizedAnim_",value:function(){var t=this;return new Promise((function(e,r){if(!0===t.isAnimating_){var n=300;_D(t.ani_opts)||(n=t.ani_opts.duration),setTimeout(e,n)}else e()}))}},{key:"hide",value:function(t){this.facadeMap_.removePopup(t)}},{key:"setContainer",value:function(t){this.setElement(t),this.content=this.getContentFromContainer(t),BD(this.content)}},{key:"getContent",value:function(){return this.content}}])&&ox(e.prototype,r),n&&ox(e,n),o}(Qb),hx=(r(143),r(91)),fx=r.n(hx);function px(t){return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gx(t,e){return(gx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_x(t);if(e){var i=_x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mx(this,r)}}function mx(t,e){return!e||"object"!==px(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _x(t){return(_x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var bx=0,xx=function(t,e){return{android:function(t){return"geo:".concat(t[1],"},").concat(t[0],"?q=").concat(t[1],",").concat(t[0])},ios:function(t){return"maps://?ll=".concat(t[1],",").concat(t[0])},unknown:function(t){return"http://maps.google.com?q=".concat(t[1],",").concat(t[0])}}[t](e)},wx=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vx(this,t),this.icon=e.icon,this.title=e.title,this.content=e.content,this.listeners=e.listeners||[]},Ex=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gx(t,e)}(o,t);var e,r,n,i=yx(o);function o(t){var e;vx(this,o);var r=new cx(t);return(e=i.call(this,r)).coord_=null,e.tabs_=[],e.element_=null,e.status_=o.status.COLLAPSED,bx+=1,e.id_="m-popup-".concat(bx),e}return e=o,(r=[{key:"getId",value:function(){return this.id_}},{key:"getTabs",value:function(){return this.tabs_}},{key:"removeTab",value:function(t){var e=[],r=null;this.tabs_.forEach((function(n){n.content!==t.content?e.push(n):r=n})),this.tabs_=this.tabs_.filter((function(e){return e.content!==t.content})),this.fire(au,[r]),this.update()}},{key:"addTab",value:function(t){var e=t;e instanceof wx||(e=new wx(t),this.fire(ou,[e])),this.tabs_.push(e),this.update()}},{key:"addTo",value:function(t,e){if(this.map_=t,_D(this.element_)){var r=lG(e,this.map_.getProjection().code,"EPSG:4326"),n=sG(),i=bu(fx.a,{jsonp:!0,vars:{id:this.id_,tabs:this.tabs_,options:o.options,url:xx(n,r)}});this.tabs_.length>0&&(this.element_=i,this.addEvents(i),this.getImpl().addTo(t,i),this.show(e))}else this.getImpl().addTo(t,this.element_),this.show(e);this.fire(nu,[this]),t.fire(nu,[this])}},{key:"update",value:function(){if(!_D(this.map_)){var t=lG(this.coord_,this.map_.getProjection().code,"EPSG:4326"),e=sG(),r=bu(fx.a,{jsonp:!0,vars:{tabs:this.tabs_,options:o.options,url:xx(e,t)}});this.tabs_.length>0&&(this.element_=r,this.addEventTabs(this.tabs_[0],r),this.addEvents(r),this.getImpl().setContainer(r),this.show(this.coord_))}}},{key:"show",value:function(t){var e=this;this.coord_=t,this.getImpl().show(this.coord_,(function(){e.fire(Ul)}))}},{key:"hide",value:function(t){_D(t)||t.preventDefault(),this.getImpl().hide(this)}},{key:"switchTab",value:function(t){if(this.tabs_.length>t){var e=this.tabs_[t];this.setContent_(e.content),this.addEventTabs(e,this.getContent()),this.show(this.coord_)}}},{key:"addEventTabs",value:function(t,e){t.listeners.forEach((function(t){!0===t.all?e.querySelectorAll(t.selector).forEach((function(e){e.addEventListener(t.type,(function(e){return t.callback(e)}))})):e.querySelector(t.selector).addEventListener(t.type,(function(e){return t.callback(e)}))}))}},{key:"setContent_",value:function(t){this.getContent().innerHTML=t}},{key:"getContent",value:function(){return this.getImpl().getContent()}},{key:"addEvents",value:function(t){var e,r=this,n=t,i=n.querySelectorAll("div.m-tab");Array.prototype.forEach.call(i,(function(t){t.addEventListener("click",(function(n){n.preventDefault();var o=n.clientY;if("click"===n.type||Math.abs(e-o)<5){Array.prototype.forEach.call(i,(function(t){t.classList.remove("m-activated")})),t.classList.add("m-activated");var a=t.getAttribute("data-index");r.switchTab(a)}})),t.addEventListener("touchend",(function(n){n.preventDefault();var o=n.clientY;if("touchend"===n.type||Math.abs(e-o)<5){Array.prototype.forEach.call(i,(function(t){t.classList.remove("m-activated")})),t.classList.add("m-activated");var a=t.getAttribute("data-index");r.switchTab(a)}}))}));var a=n.querySelector("a.m-popup-closer");a.addEventListener("click",this.hide.bind(this),!1),a.addEventListener("touchend",this.hide.bind(this),!1);var s=n.querySelector("div.m-tabs");if(_D(s)&&(s=n.querySelector("div.m-content > div.m-header")),!_D(s)){var l;s.addEventListener("touchstart",(function(t){t.preventDefault(),e=t.touches[0].clientY,r.status_===o.status.COLLAPSED?l=.9*rx.HEIGHT:r.status_===o.status.DEFAULT?l=.45*rx.HEIGHT:r.status_===o.status.FULL&&(l=0),n.classList.add("m-no-animation")}),!1),s.addEventListener("touchmove",(function(t){t.preventDefault(),r.touchY=t.touches[0].clientY;var i=r.touchY-e;n.style.top="".concat(l+i,"px")}),!1),s.addEventListener("touchend",(function(t){t.preventDefault(),r.manageCollapsiblePopup_(e,r.touchY)}),!1);var u=window.matchMedia("(max-width: 768px)");setTimeout((function(){return r.manageTransform(u,n)}),10),u.addEventListener("change",(function(t){r.manageTransform(t,n)})),s.addEventListener("mouseup",(function(t){t.preventDefault(),r.tabs_.length<=1&&(r.status_===o.status.COLLAPSED?r.setStatus_(o.status.DEFAULT):r.status_===o.status.DEFAULT?r.setStatus_(o.status.FULL):r.setStatus_(o.status.COLLAPSED))}))}}},{key:"setStatus_",value:function(t){t!==this.status_&&(this.element_.classList.remove(this.status_),this.status_=t,this.element_.classList.add(this.status_),this.element_.style.top="",this.element_.classList.remove("m-no-animation"),rx.WIDTH<=M.config.MOBILE_WIDTH&&this.getImpl().centerByStatus(t,this.coord_))}},{key:"manageTransform",value:function(t,e){e&&e.parentElement&&(t.matches?e.parentElement.classList.add("unsetTransform"):e.parentElement.classList.remove("unsetTransform"))}},{key:"manageCollapsiblePopup_",value:function(t,e){var r=100*e/rx.HEIGHT;100*Math.abs(t-e)/rx.HEIGHT>10?this.status_===o.status.COLLAPSED?r<45?this.setStatus_(o.status.FULL):r<85?this.setStatus_(o.status.DEFAULT):this.setStatus_(o.status.COLLAPSED):this.status_===o.status.DEFAULT?r>45?this.setStatus_(o.status.COLLAPSED):r<45?this.setStatus_(o.status.FULL):this.setStatus_(o.status.DEFAULT):this.status_===o.status.FULL&&(r>45?this.setStatus_(o.status.COLLAPSED):r>0?this.setStatus_(o.status.DEFAULT):this.setStatus_(o.status.FULL)):this.setStatus_(this.status_)}},{key:"getCoordinate",value:function(){return this.coord_}},{key:"setCoordinate",value:function(t){this.coord_=t,_D(this.element_)||this.getImpl().show(t)}},{key:"destroy",value:function(){this.tabs_.length=0,this.coord_=null,this.fire(zl)}}])&&dx(e.prototype,r),n&&dx(e,n),o}(Il);Ex.status={},Ex.status.COLLAPSED="m-collapsed",Ex.status.DEFAULT="m-default",Ex.status.FULL="m-full",Ex.options={takeMeThere:!1,textMode:!0,msg:"Llévame allí"};var Ox=Ex,Sx=r(100),Ix=r.n(Sx);function Cx(t){return(Cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tx(t){return function(t){if(Array.isArray(t))return Px(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Px(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Px(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Px(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lx(t,e){return(Lx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ax(t);if(e){var i=Ax(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nx(this,r)}}function Nx(t,e){return!e||"object"!==Cx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ax(t){return(Ax=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lx(t,e)}(o,t);var e,r,n,i=Mx(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).facadeVector_=null,r.features_=[],r.postComposeEvtKey_=null,r.load_=!1,r.loaded_=!1,r}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire(Cl),t.on(Jl,this.setProjection_.bind(this),this),this.ol3Layer=new jv(this.vendorOptions_),this.updateSource_(),this.opacity_&&this.setOpacity(this.opacity_),this.setVisible(this.visibility),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"updateSource_",value:function(){_D(this.vendorOptions_.source)&&(_D(this.ol3Layer.getSource())&&this.ol3Layer.setSource(new Tg),this.redraw(),this.loaded_=!0,this.fire(Xl,[this.features_]))}},{key:"inRange",value:function(){return!0}},{key:"addFeatures",value:function(t,e){var r,n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!0===i?t.forEach((function(t){var e=n.features_.find((function(e){return e.equals(t)}));_D(e)&&n.features_.push(t)})):(r=this.features_).push.apply(r,Tx(t)),e&&this.updateLayer_();var o=this.facadeVector_.getStyle();o instanceof jb?(o.getImpl().deactivateTemporarilyChangeEvent(this.redraw.bind(this)),o.refresh()):this.redraw()}},{key:"updateLayer_",value:function(){var t=this.facadeVector_.getStyle();if(!_D(t))if(t instanceof Em)this.facadeVector_.setStyle(t);else if(t instanceof jb){var e=this.facadeVector_.getStyle();e.unapply(this.facadeVector_),e.getOldStyle().apply(this.facadeVector_),e.apply(this.facadeVector_)}else t.apply(this.facadeVector_)}},{key:"getFeatures",value:function(t,e){var r=this.features_;return t||(r=e.execute(r)),r}},{key:"getFeatureById",value:function(t){return this.features_.filter((function(e){return e.getId()===t}))[0]}},{key:"removeFeatures",value:function(t){this.features_=this.features_.filter((function(e){return!t.includes(e)}));var e=this.facadeVector_.getStyle();e instanceof jb?(e.getImpl().deactivateTemporarilyChangeEvent(this.redraw.bind(this)),e.refresh()):this.redraw()}},{key:"redraw",value:function(){var t=this.getOLLayer();if(!_D(t)){var e=this.facadeVector_.getStyle(),r=t.getSource();r instanceof Rg&&(r=r.getSource()),e instanceof jb&&e.getImpl().deactivateChangeEvent(),Tx(r.getFeatures()).forEach(r.removeFeature,r);var n=this.facadeVector_.getFeatures();r.addFeatures(n.map(cG.facade2OLFeature)),e instanceof jb&&e.getImpl().activateChangeEvent()}}},{key:"getFeaturesExtent",value:function(t,e){var r=this.getFeatures(t,e),n=wh.getFeaturesExtent(r,this.map.getProjection().code);return null===n&&(n=this.map.getProjection().getExtent()),n}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!(n instanceof EG||!0!==this.extract||(this.unselectFeatures(),_D(n)))){var i=n.getAttribute("vendor.mapea.click");if(vD(i))i(r,n);else{var o=bu(Ix.a,{vars:this.parseFeaturesForTemplate_(t),parseToHtml:!1}),a={icon:"g-cartografia-pin",title:this.name,content:o},s=this.map.getPopup();_D(s)?((s=new Ox).addTab(a),this.map.addPopup(s,e)):s.addTab(a)}}}},{key:"unselectFeatures",value:function(){}},{key:"setFacadeObj",value:function(t){this.facadeVector_=t}},{key:"setProjection_",value:function(t,e){if(t.code!==e.code){var r=Object(u.o)(t.code),n=Object(u.o)(e.code),i=this.facadeVector_.getStyle();i instanceof jb&&i.getImpl().deactivateChangeEvent(),this.facadeVector_.getFeatures().forEach((function(t){return t.getImpl().getOLFeature().getGeometry().transform(r,n)})),i instanceof jb&&i.getImpl().activateChangeEvent()}}},{key:"parseFeaturesForTemplate_",value:function(t){var e=this,r={features:[]};return t.forEach((function(t){if(!(t instanceof EG)){var n=t.getAttributes(),i=Object.keys(n),o=[];i.forEach((function(t){var r=!0;_D(e.showAttributes_)?_D(e.hiddenAttributes_)||(r=!DD(e.hiddenAttributes_,t)):r=DD(e.showAttributes_,t),r&&o.push({key:jD(t),value:n[t]})}));var a={id:t.getId(),attributes:o};r.features.push(a)}})),r}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&this.constructor===t.constructor&&(e=!0),e}},{key:"refresh",value:function(){this.getOLLayer().getSource().clear()}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"destroy",value:function(){var t=this.map.getMapImpl();_D(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}}])&&Rx(e.prototype,r),n&&Rx(e,n),o}(Rh),jx=(r(145),r(101)),Fx=r.n(jx),Dx=function(t,e,r){var n,i={message:t,title:e,severity:r},o=bu(Fx.a,{vars:i});n=document.querySelectorAll("div.m-dialog"),Array.prototype.forEach.call(n,(function(t){t.parentElement.removeChild(t)}));var a=document.querySelector("div.m-mapea-container");o.querySelector("div.m-button > button").addEventListener("click",(function(t){var e;(e=o).parentElement.removeChild(e)})),a.appendChild(o)},Gx=function(t,e){var r=e;return _D(r)&&(r=uu("dialog").info),Dx(t,r,"info")},Ux=function(t,e){var r=e;return _D(r)&&(r=uu("dialog").error),Dx(t,r,"error")},Bx=function(t,e){var r=e;return _D(r)&&(r=uu("dialog").success),Dx(t,r,"success")};function zx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Vx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getFunctionFilter",value:function(){}},{key:"execute",value:function(t){}},{key:"toCQL",value:function(){}}])&&zx(e.prototype,r),n&&zx(e,n),t}();function qx(t){return(qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xx(t,e){return(Xx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Kx(t);if(e){var i=Kx(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Zx(this,r)}}function Zx(t,e){return!e||"object"!==qx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kx(t){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jx,$x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xx(t,e)}(o,t);var e,r,n,i=Hx(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yx(this,o),(t=i.call(this,e)).textOverflow_=void 0!==e.textOverflow?e.textOverflow:"",t.minWidth_=e.minWidth||0,t}return e=o,(r=[{key:"getTextOverflow",value:function(){return this.textOverflow_}},{key:"getMinWidth",value:function(){return this.minWidth_}}])&&Wx(e.prototype,r),n&&Wx(e,n),o}(Yg),Qx=function(t,e,r){var n;if(!_D(t.fill)){var i=By.getValue(t.fill.color,e,r),o=By.getValue(t.fill.opacity,e,r);o||0===o||(o=1),_D(i)||(n=new zg({color:l()(i).alpha(o).css()}))}return n},tw=function(t,e,r){var n;if(!_D(t.stroke)){var i=By.getValue(t.stroke.color,e,r);if(!_D(i)){var o=t.stroke.linedashoffset;n=new Bg({color:i,width:By.getValue(t.stroke.width,e,r),lineDash:By.getValue(t.stroke.linedash,e,r),lineDashOffset:By.getValue(o,e,r),lineCap:By.getValue(t.stroke.linecap,e,r),lineJoin:By.getValue(t.stroke.linejoin,e,r),miterLimit:By.getValue(t.stroke.miterlimit,e,r)})}}return n},ew=function(t,e,r){var o;if(t.label){var a=By.getValue(t.label.text,e,r),s=By.getValue(t.label.align,e,r),l=By.getValue(t.label.baseline,e,r);if(o=new Yg({font:By.getValue(t.label.font,e,r),rotateWithView:By.getValue(t.label.rotate,e,r),scale:By.getValue(t.label.scale,e,r),offsetX:By.getValue(t.label.offset?t.label.offset[0]:void 0,e,r),offsetY:By.getValue(t.label.offset?t.label.offset[1]:void 0,e,r),fill:new zg({color:By.getValue(t.label.color||"#000",e,r)}),textAlign:Object.values(i).includes(s)?s:"center",textBaseline:Object.values(n).includes(l)?l:"top",text:void 0===a?void 0:String(a),rotation:By.getValue(t.label.rotation,e,r)}),!_D(t.label.stroke)){var u=t.label.stroke,c=u.miterlimit,h=u.linedashoffset;o.setStroke(new Bg({color:By.getValue(t.label.stroke.color,e,r),width:By.getValue(t.label.stroke.width,e,r),lineCap:By.getValue(t.label.stroke.linecap,e,r),lineJoin:By.getValue(t.label.stroke.linejoin,e,r),lineDash:By.getValue(t.label.stroke.linedash,e,r),lineDashOffset:By.getValue(h,e,r),miterLimit:By.getValue(c,e,r)}))}}return o},rw={},nw=function(t,e,r){var n=t||{},i=Qx(n,e,r),o=tw(n,e,r),a=new C_({fill:i,stroke:o,radius:By.getValue(n.radius,e,r),snapToPixel:By.getValue(n.snapToPixel,e,r)}),s=new $y({image:a}),l=new $y;if(!_D(n.icon)){var u,c=By.getValue(n.icon.src,e,r);_D(c)?_D(n.icon.form)||(u=function(t,e,r){return new h_({form:_D(By.getValue(t.icon.form,e,r))?"":By.getValue(t.icon.form,e,r).toLowerCase(),gradient:By.getValue(t.icon.gradient,e,r),glyph:By.getValue(t.icon.class,e,r),fontSize:By.getValue(t.icon.fontsize,e,r),radius:By.getValue(t.icon.radius,e,r),rotation:By.getValue(t.icon.rotation,e,r),rotateWithView:By.getValue(t.icon.rotate,e,r),offsetX:By.getValue(t.icon.offset?t.icon.offset[0]:void 0,e,r),offsetY:By.getValue(t.icon.offset?t.icon.offset[1]:void 0,e,r),fill:new zg({color:By.getValue(void 0!==t.icon.fill?t.icon.fill:"#FFFFFF",e,r)}),stroke:t.icon.color?new Bg({color:By.getValue(t.icon.color,e,r),width:1}):void 0,anchor:By.getValue(t.icon.anchor,e,r),anchorXUnits:By.getValue(t.icon.anchorxunits,e,r),anchorYUnits:By.getValue(t.icon.anchoryunits,e,r),src:By.getValue(t.icon.src,e,r),opacity:By.getValue(t.icon.opacity,e,r),scale:By.getValue(t.icon.scale,e,r),snapToPixel:By.getValue(t.icon.snaptopixel,e,r),offsetOrigin:By.getValue(t.icon.offsetorigin,e,r),offset:By.getValue(t.icon.offset,e,r),crossOrigin:By.getValue(t.icon.crossorigin,e,r),anchorOrigin:By.getValue(t.icon.anchororigin,e,r),size:By.getValue(t.icon.size,e,r)})}(n,e,r),l.setImage(u)):(u=function(t,e,r){var n=By.getValue(t.icon.anchor,e,r),i=By.getValue(t.icon.anchorxunits,e,r),o=By.getValue(t.icon.anchoryunits,e,r),a=By.getValue(t.icon.src,e,r),s=By.getValue(t.icon.opacity,e,r),l=By.getValue(t.icon.scale,e,r),u=By.getValue(t.icon.rotation,e,r),c=By.getValue(t.icon.rotate,e,r),h=By.getValue(t.icon.snaptopixel,e,r),f=By.getValue(t.icon.offsetorigin,e,r),p=By.getValue(t.icon.offset,e,r),d=By.getValue(t.icon.crossorigin,e,r),g=By.getValue(t.icon.anchororigin,e,r),y=a+n+i+o+s+l+u+c+h+f+p+d+g+g+By.getValue(t.icon.size,e,r),m=rw[y];return m||(m=new v_({anchor:By.getValue(t.icon.anchor,e,r),anchorXUnits:By.getValue(t.icon.anchorxunits,e,r),anchorYUnits:By.getValue(t.icon.anchoryunits,e,r),src:By.getValue(t.icon.src,e,r),opacity:By.getValue(t.icon.opacity,e,r),scale:By.getValue(t.icon.scale,e,r),rotation:By.getValue(t.icon.rotation,e,r),rotateWithView:By.getValue(t.icon.rotate,e,r),snapToPixel:By.getValue(t.icon.snaptopixel,e,r),offsetOrigin:By.getValue(t.icon.offsetorigin,e,r),offset:By.getValue(t.icon.offset,e,r),crossOrigin:By.getValue(t.icon.crossorigin,e,r),anchorOrigin:By.getValue(t.icon.anchororigin,e,r),size:By.getValue(t.icon.size,e,r)}),rw[y]=m),m}(n,e,r),l.setImage(u))}var h=ew(n,e,r);return _D(n.label)||dD(h.getText())||s.setText(h),[s,l]},iw=function(t,e,r){var n=t||{},i=tw(n,e,r),o=function(t,e,r){var n;if(!_D(t.fill)){var i=By.getValue(t.fill.color,e,r),o=By.getValue(t.fill.opacity,e,r);o||0===o||(o=1);var a=By.getValue(t.fill.width,e,r);_D(i)||(n=new Bg({color:l()(i).alpha(o).css(),width:a}))}return n}(n,e,r),a=function(t,e,r){var n,i=t.label;if(!_D(i)){var o={text:void 0===By.getValue(i.text,e)?void 0:String(By.getValue(i.text,e)),font:By.getValue(i.font,e),fill:new zg({color:By.getValue(i.color||"#000",e)}),textBaseline:(By.getValue(i.baseline,e)||"").toLowerCase(),textAlign:By.getValue(i.align,e),scale:By.getValue(i.scale,e),rotateWithView:By.getValue(i.rotate,e)||!1,textOverflow:By.getValue(i.textoverflow,e)||"",minWidth:By.getValue(i.minwidth,e)||0,geometry:By.getValue(i.geometry,e),offsetX:By.getValue(t.label.offset?t.label.offset[0]:void 0,e),offsetY:By.getValue(t.label.offset?t.label.offset[1]:void 0,e)};n=new $x(o),_D(i.stroke)||n.setStroke(new Bg({color:By.getValue(i.stroke.color,e),width:By.getValue(i.stroke.width,e),lineCap:By.getValue(i.stroke.linecap,e),lineJoin:By.getValue(i.stroke.linejoin,e),lineDash:By.getValue(i.stroke.linedash,e),lineDashOffset:By.getValue(i.stroke.linedashoffset,e),miterLimit:By.getValue(i.stroke.miterlimit,e)}))}return n}(n,e),s=new $y,u=new $y;_D(a)||(!0===By.getValue(a.path,e)?(s.textPath=a,!_D(a.smooth)&&!0===a.smooth&&vD(e.getGeometry)&&s.setGeometry(e.getGeometry().cspline())):s.setText(a));return s.setStroke(i),u.setStroke(o),[s,u]},ow=function(t,e,r){var n=t||{},i=new $y,o=tw(n,e,r),a=Qx(n,e,r),s=ew(n,e,r);return n.fill&&!_D(n.fill.pattern)&&(a=function(t,e,r,n){var i="rgba(0,0,0,1)";if(!_D(t.fill.pattern.color)){var o=By.getValue(t.fill.pattern.opacity,e,r)||1;o||0===o||(o=1),i=l()(t.fill.pattern.color).alpha(o).css()}return new Ry({pattern:(By.getValue(t.fill.pattern.name,e,r)||"").toLowerCase(),color:i,size:By.getValue(t.fill.pattern.size,e,r),spacing:By.getValue(t.fill.pattern.spacing,e,r),image:"IMAGE"===By.getValue(t.fill.pattern.name,e,r)?new iy({src:By.getValue(t.fill.pattern.src,e,r)}):void 0,angle:By.getValue(t.fill.pattern.rotation,e,r),scale:By.getValue(t.fill.pattern.scale,e,r),offset:By.getValue(t.fill.pattern.offset,e,r),fill:n})}(n,e,r)),i.setFill(a),i.setStroke(o),i.setText(s),[i]};function aw(t){return(aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uw(t,e){return(uw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fw(t);if(e){var i=fw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hw(this,r)}}function hw(t,e){return!e||"object"!==aw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fw(t){return(fw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var dw=(pw(Jx={},fo.a.POINT,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return nw(e[0].point,e[1],e[2])})),pw(Jx,fo.a.LINE_STRING,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return iw(e[0].line,e[1],e[2])})),pw(Jx,fo.a.POLYGON,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ow(e[0].polygon,e[1],e[2])})),pw(Jx,fo.a.MULTI_POINT,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return nw(e[0].point,e[1],e[2])})),pw(Jx,fo.a.MULTI_LINE_STRING,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return iw(e[0].line,e[1],e[2])})),pw(Jx,fo.a.MULTI_POLYGON,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ow(e[0].polygon,e[1],e[2])})),Jx),gw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uw(t,e)}(o,t);var e,r,n,i=cw(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return sw(this,o),(t=i.call(this,e)).styles_={},t}return e=o,(r=[{key:"toImage",value:function(){var t=this,e=30,r=null,n=null,i=null,o=oG(),a=[];dD(this.options_.point)||(r=function(r){return new Promise((function(n,i){var o=new Image;if(o.onload=function(){return n(o)},o.onerror=i,o.width=e,o.height=e,!0===nG(t.options_.point))o.src=r;else{var a=(0,dw.Point)(t.options_,t,t.layer_);a[0].getImage().setRadius(5);var s=a[0].getImage().getImage(1).toDataURL();o.src=s}}))},a.push(r(o))),dD(this.options_.polygon)||(n=function(r){return new Promise((function(n,i){var o=new Image;if(o.onload=function(){return n(o)},o.onerror=i,!0===nG(t.options_.polygon))o.src=r,o.width=e,o.height=e;else{var a=(0,dw.Polygon)(t.options_,t,t.layer_),s=document.createElement("canvas");s.width=e,s.height=e;var l=xy(s.getContext("2d"));l.setStyle(a[0],0,0);var u=[25,15],c=Math.floor(u[0]),h=Math.floor(u[1]),f=u[0]-c,p=u[1]-h;l.drawGeometry(new Oa([[[f+3,p+3],[c-3,p+3],[c-3,h-3],[f+3,h-3],[f+3,p+3]]])),o.src=s.toDataURL()}}))},a.push(n(o))),dD(this.options_.line)||(i=function(e){return new Promise((function(r,n){var i=new Image;if(i.onload=function(){return r(i)},i.onerror=n,!0===nG(t.options_.line))i.src=e,i.width=30,i.height=30;else{var o=(0,dw.LineString)(t.options_,t,t.layer_),a=document.createElement("canvas");a.width=30,a.height=30;var s=xy(a.getContext("2d"));s.setStyle(o[0],0,0);var l=dD(o[0].getStroke())?1.5:o[0].getStroke().getWidth();s.drawGeometry(new Qc([[0+l/2,0+l/2],[25/3,7.5-l/2],[50/3,0+l/2],[25-l/2,7.5-l/2]])),i.src=a.toDataURL()}}))},a.push(i(o)));var s=document.createElement("canvas");s.width=200,s.height=50;var l=s.getContext("2d"),u=[0,60,120],c=0;return Promise.all(a).then((function(t){return t.forEach((function(t){l.drawImage(t,u[c],0),c+=1})),s.toDataURL()}))}},{key:"updateFacadeOptions",value:function(t){var e=this;this.olStyleFn_=function(r){var n=JSON.stringify(r.getProperties()),i=[];e.styles_=[];var o=r;if(o instanceof Wc||o instanceof lh){var a=o.getGeometry().getType(),s=dw[a];vD(s)&&(i=s(t,o,e.layer_),e.styles_[n]=i)}else o=e;return i}}},{key:"drawGeometryToCanvas",value:function(t){}},{key:"updateCanvas",value:function(t){}},{key:"getCanvasSize",value:function(){return 0}},{key:"getRadius_",value:function(t){return t instanceof iy?25:t instanceof i_?t.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&lw(e.prototype,r),n&&lw(e,n),o}(By);function yw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yw(Object(r),!0).forEach((function(e){_w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vw(t){return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xw(t,e){return(xw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ww(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ow(t);if(e){var i=Ow(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ew(this,r)}}function Ew(t,e){return!e||"object"!==vw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ow(t){return(Ow=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xw(t,e)}(o,t);var e,r,n,i=ww(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;e=_D(e)?o.DEFAULT_NULL:HD(e,o.DEFAULT),e=HD({},e);var r=new gw(e);return i.call(this,e,r)}return e=o,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Generic'))"}}])&&bw(e.prototype,r),n&&bw(e,n),o}(Bm);Sw.DEFAULT={point:{radius:5}},Sw.PARAMS_DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},Sw.DEFAULT_NULL={point:mw(mw({},Sw.PARAMS_DEFAULT_NULL),{},{radius:5}),line:mw({},Sw.PARAMS_DEFAULT_NULL),polygon:mw({},Sw.PARAMS_DEFAULT_NULL)};var Iw=Sw;function Cw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cw(Object(r),!0).forEach((function(e){Pw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rw(t){return(Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nw(t,e){return(Nw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Aw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jw(t);if(e){var i=jw(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kw(this,r)}}function kw(t,e){return!e||"object"!==Rw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jw(t){return(jw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nw(t,e)}(o,t);var e,r,n,i=Aw(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;Lw(this,o);var s=a||new kx(r,n);return t=i.call(this,e,s),dD(kx)&&_l(uu("exception").vectorlayer_method),t.extract=e.extract,_D(t.extract)&&(t.extract=!0),t.style_=null,t.filter_=null,t.setStyle(r.style),s.on(Xl,(function(e){return t.fire(Xl,[e])})),t}return e=o,(r=[{key:"addFeatures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t;_D(n)||(mD(n)||(n=[n]),this.getImpl().addFeatures(n,e,r))}},{key:"getFeatures",value:function(t){var e=t;return _D(this.getFilter())&&(e=!0),this.getImpl().getFeatures(e,this.filter_)}},{key:"getFeatureById",value:function(t){var e=null;return _D(t)?Ux(uu("dialog").id_feature):e=this.getImpl().getFeatureById(t),e}},{key:"removeFeatures",value:function(t){var e=t;mD(e)||(e=[e]),this.getImpl().removeFeatures(e)}},{key:"clear",value:function(){this.removeFilter(),this.removeFeatures(this.getFeatures(!0))}},{key:"refresh",value:function(){this.getImpl().refresh(!0),this.redraw()}},{key:"redraw",value:function(){this.getImpl().redraw()}},{key:"setFilter",value:function(t){if(_D(t)||t instanceof Vx){this.filter_=t;var e=this.style_;e instanceof jb&&e.getImpl().deactivateChangeEvent(),this.redraw(),e instanceof jb&&(e.getImpl().activateChangeEvent(),e.refresh())}else Ux(uu("dialog").vector_filter)}},{key:"getFilter",value:function(){return this.filter_}},{key:"getFeaturesExtent",value:function(t){var e=t;return _D(this.getFilter())&&(e=!0),this.getImpl().getFeaturesExtent(e,this.filter_)}},{key:"removeFilter",value:function(){this.setFilter(null)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}},{key:"setStyle",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;this.getImpl().isLoaded()?(_D(this.getStyle())&&this.applyStyle_(n,r),_D(t)||this.applyStyle_(t,r)):this.once(Xl,(function(){_D(e.getStyle())&&e.applyStyle_(n,r),_D(t)||e.applyStyle_(t,r)}))}},{key:"applyStyle_",value:function(t,e){var r=t;if(xD(r)?r=Em.deserialize(r):r instanceof Em||(r=new Iw(r)),r instanceof Em&&(!_D(this.style_)&&this.style_ instanceof Em&&this.style_.unapply(this),r.apply(this,e),this.style_=r,this.fire($l,[r,this])),!_D(this.getImpl().getMap())){var n=this.getImpl().getMap().getControls("layerswitcher")[0];_D(n)||n.render()}this.fire($l,[r,this])}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null),this.getFeatures().forEach((function(t){return t.clearStyle()}))}},{key:"getLegendURL",value:function(){var t=this.getImpl().getLegendURL();return-1!==t.indexOf(Lc.LEGEND_DEFAULT)&&-1===t.indexOf(Lc.LEGEND_ERROR)&&this.style_ instanceof Em&&(t=this.style_ instanceof jb&&this.style_.getStyles().length>0?this.style_.getStyles()[0].toImage():this.style_.toImage()),t}},{key:"getGeometryType",value:function(){var t=null;if(!_D(this.getFeatures())){var e=this.getFeatures()[0];_D(e)||_D(e.getGeometry())||(t=e.getGeometry().type)}return t}},{key:"getMaxExtent",value:function(){return this.getFeaturesExtent()}},{key:"calculateMaxExtent",value:function(){return this.getImpl().getFeaturesExtentPromise(!0,this.filter_)}},{key:"toGeoJSON",value:function(){var t=this.map_.getProjection().code,e=this.getFeatures().map((function(t){return t.getGeoJSON()}));return{type:"FeatureCollection",features:xh(e,t)}}},{key:"type",get:function(){return Gu},set:function(t){dD(t)||_D(t)||t===Gu||_l("El tipo de capa debe ser '".concat(Gu).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){_D(t)?this.getImpl().extract=!0:xD(t)?this.getImpl().extract="true"===OD(t):this.getImpl().extract=t}}])&&Mw(e.prototype,r),n&&Mw(e,n),o}(Lc);Fw.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},Fw.DEFAULT_OPTIONS_STYLE={point:Tw(Tw({},Fw.DEFAULT_PARAMS),{},{radius:5}),line:Tw({},Fw.DEFAULT_PARAMS),polygon:Tw({},Fw.DEFAULT_PARAMS)};var Dw=Fw;function Gw(t){return(Gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uw(t){return function(t){if(Array.isArray(t))return Bw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Bw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bw(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vw(t,e){return(Vw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ww(t);if(e){var i=Ww(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Yw(this,r)}}function Yw(t,e){return!e||"object"!==Gw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ww(t){return(Ww=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vw(t,e)}(o,t);var e,r,n,i=qw(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new og;return t=i.call(this,e,o.NAME),dD(og)&&_l(uu("exception").layerswitcher_method),t}return e=o,n=[{key:"getTemplateVariables",value:function(t){return new Promise((function(e,r){if(!_D(t)){var n=t.getBaseLayers().filter((function(t){return!0===t.displayInLayerSwitcher})),i=t.getLayerGroup(),a=o.orderLayerGroups(i),s=t.getRootLayers().filter((function(t){var e=!0===t.transparent,r=!0===t.displayInLayerSwitcher,n=t.type!==Lu,i=!(t.type===Nu&&_D(t.name)),o=t.getLayerGroup&&null===t.getLayerGroup();return e&&n&&i&&r&&o})).reverse(),l=Promise.all(n.map(o.parseLayerForTemplate)),u=Promise.all(s.map(o.parseLayerForTemplate)),c=Promise.all(a.map((function(t){return o.parseGroupForTemplate(t,n)})).filter((function(t){return!_D(t)})));l.then((function(t){c.then((function(r){u.then((function(n){return e({baseLayers:t,overlayLayers:n,layerGroups:r})}))}))}))}}))}},{key:"parseLayerForTemplate",value:function(t){var e=t.legend;_D(e)&&(e=t.name),_D(e)&&(e="Servicio WMS");var r=!1;if(t instanceof Dw){var n=t.getStyle();n instanceof q_&&!_D(n.get("icon.src"))&&(r=!0)}return new Promise((function(n,i){var o={base:!1===t.transparent,visible:!0===t.isVisible(),id:t.name,title:e,outOfRange:!t.inRange(),opacity:t.getOpacity(),isIcon:r},a=t.getLegendURL();a instanceof Promise?a.then((function(t){o.legend=t,n(o)})):(o.legend="KML"!==t.type?a:null,n(o))}))}},{key:"parseGroupForTemplate",value:function(t,e){var r=Uw(t.getChildren()),n=t.title;_D(n)&&(n=t.id),_D(n)&&(n="Conjunto de Servicios WMS");var i={id:t.id,title:n,order:t.order,collapsed:t.collapsed,layers:[],layerGroups:[]},a=null;if(r.length>0){r.forEach((function(t){t instanceof Lc?i.layers.push(o.parseLayerForTemplate(t)):t instanceof Kd&&i.layerGroups.push(o.parseGroupForTemplate(t,e))}));var s=0,l=t.getAllLayers();l.every((function(t){return t.isVisible()}))?s=2:l.some((function(t){return t.isVisible()}))&&(s=1),i.visible=s,_D(i.layers)&&_D(i.layerGroups)&&(i=null),yD(i)||(a=new Promise((function(t,e){Promise.all(i.layers).then((function(e){_D(i)||(i.layers=e,i.layerGroups.length>0?Promise.all(i.layerGroups).then((function(e){yD(e[0])?i.layerGroups=[]:i.layerGroups=e,t(i)})):t(i))}))})))}return a}},{key:"orderLayerGroups",value:function(t){return t.sort((function(t,e){return t.order-e.order}))}}],(r=[{key:"addTo",value:function(t){var e=this;this.map_=t;var r=this.getImpl();this.createView(t).then((function(n){e.manageActivation(n),r.addTo(t,n),e.fire(Cl)}))}},{key:"createView",value:function(t){var e=this;return new Promise((function(t){o.getTemplateVariables(e.map_).then((function(e){var r=bu(Nd.a,{vars:e});t(r)}))}))}},{key:"equals",value:function(t){var e=t instanceof o;return e}},{key:"render",value:function(){this.getImpl().renderPanel()}},{key:"registerEvents",value:function(){this.getImpl().registerEvents()}},{key:"unregisterEvents",value:function(){this.getImpl().unregisterEvents()}}])&&zw(e.prototype,r),n&&zw(e,n),o}(yu);Xw.NAME="layerswitcher";var Hw=Xw,Zw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kw="accuracy",Jw="accuracyGeometry",$w="altitude",Qw="altitudeAccuracy",tE="heading",eE="position",rE="projection",nE="speed",iE="tracking",oE="trackingOptions",aE=function(t){function e(e){var r=t.call(this,Di.a.ERROR)||this;return r.code=e.code,r.message=e.message,r}return Zw(e,t),e}(Ni.a),sE=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=e||{};return r.position_=null,r.transform_=u.t,r.watchId_=void 0,r.addChangeListener(rE,r.handleProjectionChanged_),r.addChangeListener(iE,r.handleTrackingChanged_),void 0!==n.projection&&r.setProjection(n.projection),void 0!==n.trackingOptions&&r.setTrackingOptions(n.trackingOptions),r.setTracking(void 0!==n.tracking&&n.tracking),r}return Zw(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Object(u.r)(Object(u.o)("EPSG:4326"),t),this.position_&&this.set(eE,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(Kw,e.accuracy),this.set($w,null===e.altitude?void 0:e.altitude),this.set(Qw,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(tE,null===e.heading?void 0:Object(mo.m)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(eE,r),this.set(nE,null===e.speed?void 0:e.speed);var n=Sa(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(Jw,n),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new aE(t))},e.prototype.getAccuracy=function(){return this.get(Kw)},e.prototype.getAccuracyGeometry=function(){return this.get(Jw)||null},e.prototype.getAltitude=function(){return this.get($w)},e.prototype.getAltitudeAccuracy=function(){return this.get(Qw)},e.prototype.getHeading=function(){return this.get(tE)},e.prototype.getPosition=function(){return this.get(eE)},e.prototype.getProjection=function(){return this.get(rE)},e.prototype.getSpeed=function(){return this.get(nE)},e.prototype.getTracking=function(){return this.get(iE)},e.prototype.getTrackingOptions=function(){return this.get(oE)},e.prototype.setProjection=function(t){this.set(rE,Object(u.o)(t))},e.prototype.setTracking=function(t){this.set(iE,t)},e.prototype.setTrackingOptions=function(t){this.set(oE,t)},e}(ei.a);function lE(t){return(lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cE(t,e,r){return(cE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dE(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function hE(t,e){return(hE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dE(t);if(e){var i=dE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pE(this,r)}}function pE(t,e){return!e||"object"!==lE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dE(t){return(dE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hE(t,e)}(o,t);var e,r,n,i=fE(o);function o(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=i.call(this,n)).vendorOptions_=n,a.geolocation_=null,a.accuracyFeature_=cG.olFeature2Facade(new Wc),a.tracking_=t,a.highAccuracy_=e,a.maximumAge_=r,a.activated_=!1,a.positionFeature_=cG.olFeature2Facade(new Wc({style:o.POSITION_STYLE})),a}return e=o,(r=[{key:"activate",value:function(){var t=this;if(this.element.classList.add("m-locating"),_D(this.geolocation_)){var e=Object(u.o)(this.facadeMap_.getProjection().code);this.geolocation_=new sE(GD({projection:e,tracking:this.tracking_,trackingOptions:{enableHighAccuracy:this.highAccuracy_,maximumAge:this.maximumAge_}},this.vendorOptions_,!0)),this.geolocation_.on("change:accuracyGeometry",(function(e){var r=e.target.get(e.key);t.accuracyFeature_.getImpl().getOLFeature().setGeometry(r)})),this.geolocation_.on("change:position",(function(e){var r=e.target.get(e.key),n=_D(r)?null:new aa(r);t.positionFeature_.getImpl().getOLFeature().setGeometry(n),t.facadeMap_.setCenter(r),t.element.classList.contains("m-locating")&&t.facadeMap_.setZoom(o.ZOOM),t.element.classList.remove("m-locating"),t.element.classList.add("m-located"),t.geolocation_.setTracking(t.tracking_)}))}this.geolocation_.setTracking(!0),this.facadeMap_.drawFeatures([this.accuracyFeature_,this.positionFeature_])}},{key:"removePositions_",value:function(){_D(this.accuracyFeature_)||this.facadeMap_.removeFeatures([this.accuracyFeature_]),_D(this.positionFeature_)||this.facadeMap_.removeFeatures([this.positionFeature_]),this.geolocation_.setTracking(!1)}},{key:"deactivate",value:function(){this.removePositions_(),this.element.classList.remove("m-located"),this.element.classList.remove("m-locating"),this.geolocation_=null}},{key:"setTracking",value:function(t){this.tracking_=t,this.geolocation_.setTracking(t)}},{key:"destroy",value:function(){this.removePositions_(),cE(dE(o.prototype),"destroy",this).call(this)}}])&&uE(e.prototype,r),n&&uE(e,n),o}(pd);gE.POSITION_STYLE=new $y({image:new Yy({radius:6,fill:new zg({color:"#3399CC"}),stroke:new Bg({color:"#fff",width:2})})}),gE.ZOOM=12;var yE=gE,mE=r(102),_E=r.n(mE);r(147);function vE(t){return(vE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wE(t,e){return(wE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function EE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=SE(t);if(e){var i=SE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return OE(this,r)}}function OE(t,e){return!e||"object"!==vE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function SE(t){return(SE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wE(t,e)}(o,t);var e,r,n,i=EE(o);function o(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bE(this,o),dD(yE)&&_l(uu("exception").location_method);var n=new yE(t,e,6e4,r);return i.call(this,n,o.NAME)}return e=o,(r=[{key:"createView",value:function(t){return bu(_E.a,{vars:{title:uu("location").title}})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-location-button")}},{key:"equals",value:function(t){var e=t instanceof o;return e}},{key:"setTracking",value:function(t){this.getImpl().tracking=t}}])&&xE(e.prototype,r),n&&xE(e,n),o}(yu);IE.NAME="location";var CE=IE,TE=(r(93),r(103)),PE=r.n(TE);function RE(t){return(RE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ME(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NE(t,e,r){return(NE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FE(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function AE(t,e){return(AE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=FE(t);if(e){var i=FE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jE(this,r)}}function jE(t,e){return!e||"object"!==RE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function FE(t){return(FE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AE(t,e)}(o,t);var e,r,n,i=kE(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return LE(this,o),(t=i.call(this)).facadeMap_=null,t.exactScale=e.exactScale||!1,t}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.scaleContainer_=e.querySelector("#".concat("m-scale-span")),this.element=e,this.render=this.renderCB,this.target_=null,t.getMapImpl().addControl(this)}},{key:"renderCB",value:function(t){var e,r,n,i,o=t.frameState;_D(o)||(o.viewState,e=this.scaleContainer_,r=this.facadeMap_,n=this.exactScale,i=e,r.getWMTS().length>0?i.innerHTML=wh.getWMTSScale(r,n):r.getWMTS().length<=0&&!0===n?i.innerHTML=r.getExactScale():r.getWMTS().length<=0&&1==!n&&(i.innerHTML=r.getScale()))}},{key:"destroy",value:function(){NE(FE(o.prototype),"destroy",this).call(this),this.scaleContainer_=null}}])&&ME(e.prototype,r),n&&ME(e,n),o}(pd);function GE(t){return(GE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zE(t,e,r){return(zE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WE(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function VE(t,e){return(VE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=WE(t);if(e){var i=WE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return YE(this,r)}}function YE(t,e){return!e||"object"!==GE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function WE(t){return(WE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&VE(t,e)}(o,t);var e,r,n,i=qE(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};UE(this,o);var r=new DE(e);return t=i.call(this,r,o.NAME),dD(DE)&&_l(uu("exception").scale_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(PE.a,{vars:{title:uu("scale").title,scale:uu("scale").scale}})}},{key:"equals",value:function(t){var e=t instanceof o;return e}},{key:"destroy",value:function(){zE(WE(o.prototype),"destroy",this).call(this);var t=this.getPanel();_D(t)||t.removeClassName("m-with-scale")}}])&&BE(e.prototype,r),n&&BE(e,n),o}(yu);XE.NAME="scale";var HE=XE;r(150);function ZE(t){return(ZE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JE(t,e,r){return(JE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eO(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function $E(t,e){return($E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function QE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=eO(t);if(e){var i=eO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tO(this,r)}}function tO(t,e){return!e||"object"!==ZE(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eO(t){return(eO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$E(t,e)}(o,t);var e,r,n,i=QE(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){var r=this;JE(eO(o.prototype),"addTo",this).call(this,t,e);var n=t.getMapImpl();this.olMap=n,this.panel=e,this.panel.querySelector("button").addEventListener("click",(function(){r.resetRotation()})),n.on("change:view",(function(t){t.target.getView().on("change:rotation",(function(t){var e=t.target.getRotation(),n="rotate(".concat(360*e/(2*Math.PI),"deg)");r.panel.querySelector("button").style.WebkitTransform=n,r.panel.querySelector("button").style.MozTransform=n,r.panel.querySelector("button").style.transform=n}))}))}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"resetRotation",value:function(){this.olMap.getView().setRotation(0)}},{key:"onChangeView",value:function(t){var e=t.querySelector("#m-rotate-marker");this.olMap.on("change:view",(function(t){t.target.getView().on("change:rotation",(function(t){var r=t.target.getRotation();e.style.transform="rotate(".concat(r*(180/Math.PI)+45,"deg)")}))}))}}])&&KE(e.prototype,r),n&&KE(e,n),o}(pd);rO.PANEL_ID="m-layerswitcher-panel";var nO=rO,iO=r(104),oO=r.n(iO);function aO(t){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lO(t,e){return(lO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hO(t);if(e){var i=hO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cO(this,r)}}function cO(t,e){return!e||"object"!==aO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hO(t){return(hO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fO=function(t,e,r){for(var n=e,i=t.target.parentElement.parentElement,o=0,a=0;i&&!Number.isNaN(i.offsetLeft)&&!Number.isNaN(i.offsetTop);)o+=i.offsetLeft-i.scrollLeft,a+=i.offsetTop-i.scrollTop,i=i.offsetParent;o=t.clientX-o,a=t.clientY-a;var s=t.currentTarget,l=s.clientWidth,u=s.clientHeight,c=[0,-u],h=[o-l/2,a-u/2],f=(c[0]*h[0]+c[1]*h[1])/(Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))*Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2))),p=180*Math.acos(f)/Math.PI;h[0]<0&&(p=360-p),r.setRotation(p);n.querySelector("#m-rotate-marker").style.WebkitTransform="rotate(".concat(p+45,"deg)"),n.querySelector("#m-rotate-marker").style.MozTransform="rotate(".concat(p+45,"deg)"),n.querySelector("#m-rotate-marker").style.transform="rotate(".concat(p+45,"deg)")},pO=function(t,e){e.querySelector("#m-rotate-slider-container").addEventListener("mousedown",(function(e){t.setActive(!0),"m-rotate-button"!==e.target.id&&t.setMouseDown(!0)}))},dO=function(t,e){document.body.addEventListener("mouseup",(function(e){t.setActive(!1)}))},gO=function(t,e,r){var n=e,i=e.querySelector("#m-rotate-slider-container");i.addEventListener("click",(function(i){"m-rotate-button"!==i.target.id||t.getMouseDown()?fO(i,e,r):(t.getImpl().resetRotation(),n.querySelector("#m-rotate-marker").style.WebkitTransform="rotate(40deg)",n.querySelector("#m-rotate-marker").style.MozTransform="rotate(40deg)",n.querySelector("#m-rotate-marker").style.transform="rotate(40deg)"),t.setMouseDown(!1)}))},yO=function(t,e,r){e.querySelector("#m-rotate-slider-container").addEventListener("mousemove",(function(n){t.getActive()&&fO(n,e,r)}))},mO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lO(t,e)}(o,t);var e,r,n,i=uO(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),dD(nO)&&_l("La implementación usada no puede crear controles Scale");var e=new nO;return(t=i.call(this,e,o.NAME)).active_=!1,t.isMouseDown_=!1,t}return e=o,(r=[{key:"createView",value:function(t){var e=this,r=bu(oO.a);return r.querySelector("#m-rotate-marker").style.WebkitTransform="rotate(40deg)",r.querySelector("#m-rotate-marker").style.MozTransform="rotate(40deg)",r.querySelector("#m-rotate-marker").style.transform="rotate(40deg)",pO(this,r),yO(this,r,t),dO(this),gO(this,r,t),this.on(Cl,(function(){e.getImpl().onChangeView(r)})),r}},{key:"equals",value:function(t){var e=t instanceof o;return e}},{key:"setActive",value:function(t){this.active_=!!t}},{key:"getActive",value:function(){return this.active_}},{key:"setMouseDown",value:function(t){this.isMouseDown_=!!t}},{key:"getMouseDown",value:function(){return this.isMouseDown_}}])&&sO(e.prototype,r),n&&sO(e,n),o}(yu);mO.NAME="rotate";var _O=mO,vO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bO="units",xO="degrees",wO="imperial",EO="nautical",OO="metric",SO="us",IO=[1,2,5],CO=25.4/.28,TO=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).on,r.once,r.un,r.innerElement_=document.createElement("div"),r.innerElement_.className=i+"-inner",r.element.className=i+" "+ti.e,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==n.minWidth?n.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addChangeListener(bO,r.handleUnitsChanged_),r.setUnits(n.units||OO),r.scaleBar_=n.bar||!1,r.scaleBarSteps_=n.steps||4,r.scaleBarText_=n.text||!1,r.dpi_=n.dpi||void 0,r}return vO(e,t),e.prototype.getUnits=function(){return this.get(bO)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(bO,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n==xO?Pn.b.DEGREES:Pn.b.METERS,o=Object(u.p)(r,t.resolution,e,i),a=this.minWidth_*(this.dpi_||CO)/CO,s=a*o,l="";if(n==xO){var c=u.a[Pn.b.DEGREES];(s*=c)<c/60?(l="″",o*=3600):s<c?(l="′",o*=60):l="°"}else n==wO?s<.9144?(l="in",o/=.0254):s<1609.344?(l="ft",o/=.3048):(l="mi",o/=1609.344):n==EO?(o/=1852,l="nm"):n==OO?s<.001?(l="μm",o*=1e6):s<1?(l="mm",o*=1e3):s<1e3?l="m":(l="km",o/=1e3):n==SO?s<.9144?(l="in",o*=39.37):s<1609.344?(l="ft",o/=.30480061):(l="mi",o/=1609.3472):Object(Ui.a)(!1,33);for(var h,f,p,d,g=3*Math.floor(Math.log(a*o)/Math.log(10));;){p=Math.floor(g/3);var y=Math.pow(10,p);if(h=IO[(g%3+3)%3]*y,f=Math.round(h/o),isNaN(f))return this.element.style.display="none",void(this.renderedVisible_=!1);if(f>=a)break;++g}d=this.scaleBar_?this.createScaleBar(f,h,l):h.toFixed(p<0?-p:0)+" "+l,this.renderedHTML_!=d&&(this.innerElement_.innerHTML=d,this.renderedHTML_=d),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=Object(u.p)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,Pn.b.METERS),e=this.dpi_||CO;return parseFloat(t.toString())*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},e}(Ua);function PO(t){return(PO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function LO(t,e){return(LO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function MO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=AO(t);if(e){var i=AO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NO(this,r)}}function NO(t,e){return!e||"object"!==PO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function AO(t){return(AO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kO="units",jO="degrees",FO="imperial",DO="nautical",GO="metric",UO="us",BO=[1,2,5],zO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LO(t,e)}(o,t);var e,r,n,i=MO(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e.keyEvent_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.removeChangeListener(kO,this.handleUnitsChanged),this.keyEvent_=this.addChangeListener(kO,this.handleUnitsChanged),t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"updateElement_",value:function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n===jO?Pn.b.DEGREES:Pn.b.METERS,o=Object(u.p)(r,t.resolution,e,i);r.getUnits()!==Pn.b.DEGREES&&r.getMetersPerUnit()&&i===Pn.b.METERS&&(o*=r.getMetersPerUnit()),"d"===r.getUnits()&&(o/=12e4);var a=this.minWidth_*o,s="";if(n===jO){var l=u.a[Pn.b.DEGREES];r.getUnits()===Pn.b.DEGREES?a*=l:o/=l,a<l/60?(s="″",o*=3600):a<l?(s="′",o*=60):s="°"}else n===FO?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):n===DO?(o/=1852,s="nm"):n===GO?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):n===UO?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):Object(Ui.a)(!1,33);for(var c,h,f=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(c=BO[(f%3+3)%3]*Math.pow(10,Math.floor(f/3)),h=Math.round(c/o),Number.isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(h>=this.minWidth_)break;f+=1}var p=c.toString().concat(" ").concat(s);this.renderedHTML_!==p&&(this.innerElement_.innerHTML=p,this.renderedHTML_=p),this.renderedWidth_!==h&&(this.innerElement_.style.width=h.toString().concat("px"),this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}}])&&RO(e.prototype,r),n&&RO(e,n),o}(TO),VO=r(105),qO=r.n(VO);function YO(t){return(YO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HO(t,e){return(HO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ZO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=JO(t);if(e){var i=JO(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return KO(this,r)}}function KO(t,e){return!e||"object"!==YO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function JO(t){return(JO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&HO(t,e)}(o,t);var e,r,n,i=ZO(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};WO(this,o);var r=new zO(e);return t=i.call(this,r,o.NAME),dD(zO)&&_l(uu("exception").scaleline_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(qO.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&XO(e.prototype,r),n&&XO(e,n),o}(yu);$O.NAME="scaleline";var QO=$O,tS=(r(152),r(106)),eS=r.n(tS),rS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nS="projection",iS="coordinateFormat",oS=function(t){function e(e){var r=this,n=e||{},i=document.createElement("div");i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render,target:n.target})||this).on,r.once,r.un,r.addChangeListener(nS,r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection);var o=!0,a="&#160;";return"undefinedHTML"in n?(void 0!==n.undefinedHTML&&(a=n.undefinedHTML),o=!!a):"placeholder"in n&&(!1===n.placeholder?o=!1:a=String(n.placeholder)),r.placeholder_=a,r.renderOnMouseOut_=o,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return rS(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(iS)},e.prototype.getProjection=function(){return this.get(nS)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(Object(Ci.a)(r,Ki,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Object(Ci.a)(r,Qi,this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(iS,t)},e.prototype.setProjection=function(t){this.set(nS,Object(u.o)(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Object(u.r)(this.mapProjection_,r):u.t}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=Object(u.s)();i&&(this.transform_=Object(u.r)(this.mapProjection_,i)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(Ua);function aS(t){return(aS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lS(t,e){return(lS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hS(t);if(e){var i=hS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cS(this,r)}}function cS(t,e){return!e||"object"!==aS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hS(t){return(hS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fS(t){return(fS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dS(t,e){return(dS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mS(t);if(e){var i=mS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yS(this,r)}}function yS(t,e){return!e||"object"!==fS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mS(t){return(mS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dS(t,e)}(o,t);var e,r,n,i=gS(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=GD({coordinateFormat:Object(Wn.d)(t.precision||4),label:t.label,undefinedHTML:"",className:"m-mouse-position g-cartografia-flecha"},e,!0);return(r=i.call(this,n)).srs_=t.srs,r.label_=t.label,r.precision_=t.precision,r.vendorOptions_=e,r}return e=o,(r=[{key:"addTo",value:function(t,e){var r=this;this.facadeMap_=t,this.setProjection(this.srs_||t.getProjection().code),this.setTarget(e),t.getMapImpl().addControl(this),_D(this.vendorOptions_.projection)&&_D(this.srs_)&&t.getImpl().on(Zl,(function(){r.mousePositionControl.setProjection(Object(u.o)(t.getProjection().code))}))}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&pS(e.prototype,r),n&&pS(e,n),o}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lS(t,e)}(o,t);var e,r,n,i=uS(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).vendorOptions_=t,e}return e=o,(r=[{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleMouseMove",value:function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)}},{key:"handleMouseOut",value:function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null}},{key:"updateHTML_",value:function(t){var e=this.undefinedHTML_,r=this.getProjection();if(t&&this.mapProjection_){this.transform_||(this.transform_=r?Object(u.q)(this.mapProjection_,r):u.t);var n=this.getMap().getCoordinateFromPixel(t);if(n){this.transform_(n,n);var i=this.getCoordinateFormat();e=i?i(n):n.toString()}this.vendorOptions_.label&&(e+=" | ".concat(this.vendorOptions_.label))}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=void 0!==e?e:"",this.renderedHTML_=void 0!==e?e:"")}}])&&sS(e.prototype,r),n&&sS(e,n),o}(oS));function vS(t){return(vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wS(t,e,r){return(wS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IS(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function ES(t,e){return(ES=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function OS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=IS(t);if(e){var i=IS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return SS(this,r)}}function SS(t,e){return!e||"object"!==vS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function IS(t){return(IS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ES(t,e)}(o,t);var e,r,n,i=OS(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bS(this,o);var n=new _S(e,r);return t=i.call(this,n,o.NAME),dD(_S)&&_l(uu("exception").mouse_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(eS.a)}},{key:"equals",value:function(t){return t instanceof o}},{key:"destroy",value:function(){wS(IS(o.prototype),"destroy",this).call(this);var t=this.getPanel();_D(t)||t.removeClassName("m-with-mouse")}}])&&xS(e.prototype,r),n&&xS(e,n),o}(yu);CS.NAME="mouse";var TS=CS,PS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RS=.75,LS=.1,MS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return PS(e,t),e.prototype.createRenderer=function(){return new Pi(this)},e}(Da),NS=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).boundHandleRotationChanged_=r.handleRotationChanged_.bind(r),r.collapsed_=void 0===n.collapsed||n.collapsed,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1),r.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,r.viewExtent_=void 0;var i=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"‹";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"›";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var l=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=o,u.appendChild(l),u.addEventListener(Di.a.CLICK,r.handleClick_.bind(r),!1),r.ovmapDiv_=document.createElement("div"),r.ovmapDiv_.className="ol-overviewmap-map",r.view_=n.view,r.ovmap_=new MS({view:n.view});var c=r.ovmap_;n.layers&&n.layers.forEach((function(t){c.addLayer(t)}));var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",r.boxOverlay_=new Qb({position:[0,0],positioning:Bb,element:h}),r.ovmap_.addOverlay(r.boxOverlay_);var f=i+" "+ti.e+" "+ti.b+(r.collapsed_&&r.collapsible_?" "+ti.a:"")+(r.collapsible_?"":" ol-uncollapsible"),p=r.element;p.className=f,p.appendChild(r.ovmapDiv_),p.appendChild(u);var d=r,g=r.boxOverlay_,y=r.boxOverlay_.getElement(),m=function(t){var e,r={clientX:(e=t).clientX,clientY:e.clientY},n=c.getEventCoordinateInternal(r);g.setPosition(n)},_=function t(e){var r=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",_)})),r}return PS(e,t),e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var n=r.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(Ci.a)(e,Kn.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===co){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}else this.ovmap_.isRendered()||t.key!==uo&&t.key!==lo||this.ovmap_.updateSize()},e.prototype.bindView_=function(t){if(!this.view_){var e=new Na({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(go.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeChangeListener(go.ROTATION,this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtentInternal(r);if(!this.viewExtent_||!Object(mt.p)(n,this.viewExtent_)){this.viewExtent_=n;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(Object(mt.D)(n)),s=e.getPixelFromCoordinateInternal(Object(mt.w)(n)),l=Math.abs(a[0]-s[0]),u=Math.abs(a[1]-s[1]),c=i[0],h=i[1];l<c*LS||u<h*LS||l>c*RS||u>h*RS?this.resetExtent_():Object(mt.h)(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtentInternal(r),i=e.getView(),o=Math.log(7.5)/Math.LN2,a=1/(Math.pow(2,o/2)*LS);Object(mt.K)(n,a),i.fitInternal(Ia(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),i=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),l=n.getCenterInternal(),u=n.getResolution(),c=i.getResolution(),h=r[0]*u/c,f=r[1]*u/c;if(a.setPosition(l),s){s.style.width=h+"px",s.style.height=f+"px";var p="rotate("+o+"rad)";s.style.transform=p}}},e.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Object(Ci.b)(this.ovmap_,ro,(function(t){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(ti.a),this.collapsed_?Object(oi.g)(this.collapseLabel_,this.label_):Object(oi.g)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e.prototype.render=function(t){this.validateExtent_(),this.updateBox_()},e}(Ua);function AS(t){return(AS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function FS(t,e){return(FS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function DS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=US(t);if(e){var i=US(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return GS(this,r)}}function GS(t,e){return!e||"object"!==AS(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function US(t){return(US=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var BS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FS(t,e)}(o,t);var e,r,n,i=DS(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kS(this,o),(e=i.call(this,GD({layers:[]},r,!0))).toggleDelay_=0,_D(t.toggleDelay)||(e.toggleDelay_=t.toggleDelay),e.collapsedButtonClass_="g-cartografia-mundo",_D(t.collapsedButtonClass)||(e.collapsedButtonClass_=t.collapsedButtonClass),e.openedButtonClass_="g-cartografia-flecha-derecha2",_D(t.openedButtonClass)||(e.openedButtonClass_=t.openedButtonClass),e.facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,this.update(t,e),this.getCollapsed()||this.addLayers(this.facadeMap_)}},{key:"update",value:function(t,e){var r=this.element.querySelector("button");!0===this.collapsed_?r.classList.contains(this.collapsedButtonClass_)?r.classList.remove(this.collapsedButtonClass_):r.classList.add(this.collapsedButtonClass_):r.classList.contains(this.openedButtonClass_)?r.classList.remove(this.openedButtonClass_):r.classList.add(this.openedButtonClass_),this.addOpenEventListener(r,t),this.setTarget()}},{key:"addOpenEventListener",value:function(t,e){t.onclick=this.openEventListener.bind(this)}},{key:"openEventListener",value:function(t){var e=t;!0===this.getCollapsed()&&(this.addLayers(this.facadeMap_),e.target.onclick=null)}},{key:"setTarget",value:function(){var t=this.facadeControl_;if(!_D(t)){var e=t.getPanel();_D(e)||(this.target_=e.getControlsContainer())}}},{key:"getElement",value:function(){return this.element}},{key:"addLayer_",value:function(t){t.un(Cl,this.addLayer_,this),this.getOverviewMap().addLayer(t.getOLLayer())}},{key:"addLayers",value:function(t){var e=this,r=[];t.getLayers().forEach((function(t){if((t.type===Nu||!1===t.transparent)&&t.isVisible()){var n=null,i=t.getImpl().getOLLayer().getProperties();delete i.map,n=!0===t.tiled?new Mc.a(i):new Nc.a(i),_D(n)?t.getImpl().on(Cl,e.addLayer_.bind(e)):r.push(n)}}));var n=new Bp({projection:Object(u.o)(t.getProjection().code),resolutions:t.getResolutions()});t.getMapImpl().addControl(this),this.ovmap_.setView(n),r.forEach((function(t){return e.ovmap_.addLayer(t)})),this.wasOpen_=!0}},{key:"handleToggle_",value:function(){var t=this;tG(this.element,"ol-collapsed");var e=this.element.querySelector("button");tG(e,this.openedButtonClass_),tG(e,this.collapsedButtonClass_),setTimeout((function(){t.collapsed_?eG(t.collapseLabel_,t.label_):eG(t.label_,t.collapseLabel_),t.collapsed_=!t.collapsed_;var e=t.ovmap_;t.collapsed_||e.isRendered()||(e.updateSize(),t.resetExtent_(),e.addEventListener("postrender",(function(e){t.updateBox_()})))}),this.toggleDelay_)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"facadeControl",set:function(t){this.facadeControl_=t},get:function(){return this.facadeControl_}}])&&jS(e.prototype,r),n&&jS(e,n),o}(NS),zS=r(107),VS=r.n(zS);function qS(t){return(qS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function XS(t,e){return(XS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function HS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=JS(t);if(e){var i=JS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ZS(this,r)}}function ZS(t,e){return!e||"object"!==qS(e)&&"function"!=typeof e?KS(t):e}function KS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JS(t){return(JS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&XS(t,e)}(o,t);var e,r,n,i=HS(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};YS(this,o);var n=new BS(e,r);return t=i.call(this,n,o.NAME),dD(BS)&&_l(uu("exception").overviewmap_method),n.facadeControl=KS(t),t}return e=o,(r=[{key:"createView",value:function(t){return bu(VS.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&WS(e.prototype,r),n&&WS(e,n),o}(yu);$S.NAME="overviewmap";var QS=$S;function tI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var eI=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element_=null}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t,e){this.element_=e}},{key:"getElement",value:function(){return this.element_}},{key:"destroy",value:function(){}}])&&tI(e.prototype,r),n&&tI(e,n),t}(),rI=r(108),nI=r.n(rI);function iI(t){return(iI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aI(t,e){return(aI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uI(t);if(e){var i=uI(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lI(this,r)}}function lI(t,e){return!e||"object"!==iI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uI(t){return(uI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aI(t,e)}(o,t);var e,r,n,i=sI(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new eI;return t=i.call(this,e,o.NAME),dD(eI)&&_l(uu("exception").navtoolbar_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(nI.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&oI(e.prototype,r),n&&oI(e,n),o}(yu);cI.NAME="navtoolbar";var hI=cI,fI=r(109),pI=r.n(fI);function dI(t){return(dI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yI(t,e){return(yI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vI(t);if(e){var i=vI(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _I(this,r)}}function _I(t,e){return!e||"object"!==dI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vI(t){return(vI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yI(t,e)}(o,t);var e,r,n,i=mI(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).facadeMap_=null,e}return e=o,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&gI(e.prototype,r),n&&gI(e,n),o}(Wa);function xI(t){return(xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function OI(t,e){return(OI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function SI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CI(t);if(e){var i=CI(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return II(this,r)}}function II(t,e){return!e||"object"!==xI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function CI(t){return(CI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OI(t,e)}(o,t);var e,r,n,i=SI(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wI(this,o);var r=new bI(e);return t=i.call(this,r,o.NAME),dD(bI)&&_l(uu("exception").panzoom_method),t}return e=o,(r=[{key:"createView",value:function(t){return bu(pI.a)}},{key:"equals",value:function(t){var e=t instanceof o;return e}}])&&EI(e.prototype,r),n&&EI(e,n),o}(yu);TI.NAME="panzoom";var PI=TI,RI=(r(154),function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?Object(u.o)(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===Pn.b.TILE_PIXELS&&(n=Object(u.o)(n)).setWorldExtent(e.extent),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return Object(ii.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return Object(Gn.b)()},t.prototype.readFeature=function(t,e){return Object(Gn.b)()},t.prototype.readFeatures=function(t,e){return Object(Gn.b)()},t.prototype.readGeometry=function(t,e){return Object(Gn.b)()},t.prototype.readProjection=function(t){return Object(Gn.b)()},t.prototype.writeFeature=function(t,e){return Object(Gn.b)()},t.prototype.writeFeatures=function(t,e){return Object(Gn.b)()},t.prototype.writeGeometry=function(t,e){return Object(Gn.b)()},t}());function LI(t,e,r){var n,i=r?Object(u.o)(r.featureProjection):null,o=r?Object(u.o)(r.dataProjection):null;if(n=i&&o&&!Object(u.j)(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&r&&void 0!==r.decimals){var a=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return n}function MI(t,e){var r=e?Object(u.o)(e.featureProjection):null,n=e?Object(u.o)(e.dataProjection):null;return r&&n&&!Object(u.j)(r,n)?Object(u.A)(t,n,r):t}var NI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AI=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===A&&"undefined"!=typeof XMLSerializer&&(A=new XMLSerializer),A),e}return NI(e,t),e.prototype.getType=function(){return wg},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=m(t);return this.readFeatureFromDocument(r,e)}return y(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=m(t);return this.readFeaturesFromDocument(r,e)}return y(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Object(h.c)(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return Object(Gn.b)()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=m(t);return this.readGeometryFromDocument(r,e)}return y(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=m(t);return this.readProjectionFromDocument(e)}return y(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(RI),kI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jI="http://www.opengis.net/gml",FI=/^[\s\xa0]*$/,DI=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:v(r.readFeaturesInternal),featureMembers:b(r.readFeaturesInternal)},r.supportedMediaTypes=["application/gml+xml"],r}return kI(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=R([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,l=t.childNodes.length;s<l;++s){var u=t.childNodes[s];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",f=0,p=u.namespaceURI;for(var d in a){if(a[d]===p){h=d;break}++f}h||(a[h="p"+f]=p),o.push(h+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var y={},m=Array.isArray(o)?o:[o];for(var _ in a){var x={};for(s=0,l=m.length;s<l;++s){(-1===m[s].indexOf(":")?"p0":m[s].split(":")[0])===_&&(x[m[s].split(":").pop()]="featureMembers"==r?v(this.readFeatureElement,this):b(this.readFeatureElement,this))}y[a[_]]=x}n=R("featureMember"==r||"member"==r?void 0:[],y,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryOrExtent=function(t,e){var r=e[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),R(null,this.GEOMETRY_PARSERS,t,e,this)},e.prototype.readExtentElement=function(t,e){var r=e[0],n=this.readGeometryOrExtent(t,e);return n?MI(n,r):void 0},e.prototype.readGeometryElement=function(t,e){var r=e[0],n=this.readGeometryOrExtent(t,e);return n?LI(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=d(o,!1),FI.test(a)&&(a=void 0)):(r&&(a="boundedBy"===s?this.readExtentElement(o,e):this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var l=o.attributes.length;if(l>0){i[s]={_content_:i[s]};for(var u=0;u<l;u++){var c=o.attributes[u].name;i[s][c]=o.attributes[u].value}}}if(r){var h=new Wc(i);n&&h.setGeometryName(n);var f=t.getAttribute("fid")||function(t,e,r){return t.getAttributeNS(e,r)||""}(t,this.namespace,"id");return f&&h.setId(f),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode(t,e);if(r)return new aa(r,Co)},e.prototype.readMultiPoint=function(t,e){var r=R([],this.MULTIPOINT_PARSERS,t,e,this);return r?new Hc(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=R([],this.MULTILINESTRING_PARSERS,t,e,this);if(r)return new eh(r)},e.prototype.readMultiPolygon=function(t,e){var r=R([],this.MULTIPOLYGON_PARSERS,t,e,this);if(r)return new ih(r)},e.prototype.pointMemberParser=function(t,e){P(this.POINTMEMBER_PARSERS,t,e,this)},e.prototype.lineStringMemberParser=function(t,e){P(this.LINESTRINGMEMBER_PARSERS,t,e,this)},e.prototype.polygonMemberParser=function(t,e){P(this.POLYGONMEMBER_PARSERS,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode(t,e);return r?new Qc(r,Co):void 0},e.prototype.readFlatLinearRing=function(t,e){var r=R(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return r||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode(t,e);if(r)return new ia(r,Co)},e.prototype.readPolygon=function(t,e){var r=R([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)Object(h.c)(i,r[a]),o.push(i.length);return new Oa(i,Co,o)}},e.prototype.readFlatCoordinatesFromNode=function(t,e){return R(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var r=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&Object(ii.a)(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return Object(u.o)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(AI);DI.prototype.namespace=jI,DI.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},DI.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},DI.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},DI.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:v(DI.prototype.pointMemberParser),pointMembers:v(DI.prototype.pointMemberParser)}},DI.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:v(DI.prototype.lineStringMemberParser),lineStringMembers:v(DI.prototype.lineStringMemberParser)}},DI.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:v(DI.prototype.polygonMemberParser),polygonMembers:v(DI.prototype.polygonMemberParser)}},DI.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:v(DI.prototype.readFlatCoordinatesFromNode)}},DI.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:v(DI.prototype.readLineString)}},DI.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:v(DI.prototype.readPolygon)}},DI.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:b(DI.prototype.readFlatLinearRing)}};var GI=DI,UI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BI={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},zI=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[jI].featureMember=v(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",r}return UI(e,t),e.prototype.readFlatCoordinates=function(t,e){var r=d(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,i="enu";if(n){var o=Object(u.o)(n);o&&(i=o.getAxisOrientation())}for(var a=r.trim().split(/\s+/),s=[],l=0,c=a.length;l<c;l++){var h=a[l].split(/,+/),f=parseFloat(h[0]),p=parseFloat(h[1]),g=3===h.length?parseFloat(h[2]):0;"en"===i.substr(0,2)?s.push(f,p,g):s.push(p,f,g)}return s},e.prototype.readBox=function(t,e){var r=R([null],this.BOX_PARSERS_,t,e,this);return Object(mt.l)(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser=function(t,e){var r=R(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser=function(t,e){var r=R(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),p("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(s.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=E(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=E(J)))}}var f=Object(ii.a)({},i);f.node=t,N(f,i.serializers,S(void 0,o),l,r,s)},e.prototype.writeCurveOrLineString=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var o=p(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,r))},e.prototype.writeMultiCurveOrLineString=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();N({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=Object(ii.a)({},i);o.node=t,n=Array.isArray(e)?MI(e,i):LI(e,!0,i),N(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=p(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,l=new Array(s),u=0;u<s;++u){var c=a[u];l[u]=this.getCoords_(c,o,i)}J(t,l.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=p(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,r)},e.prototype.writeSurfaceOrPolygon=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();N({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=p(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),p(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=p(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r)},e.prototype.writeRing=function(t,e,r){var n=p(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=Object(u.o)(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];r&&(i+=","+(t[2]||0));return i},e.prototype.writePoint=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();J(a,this.getCoords_(s,o,i))},e.prototype.writeMultiPoint=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();N({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS,S("pointMember"),a,r,void 0,this)},e.prototype.writePointMember=function(t,e,r){var n=p(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,r)},e.prototype.writeLinearRing=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();N({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];N({node:t},this.ENVELOPE_SERIALIZERS,I,i,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return p("http://www.opengis.net/gml",BI[n.nodeName])},e}(GI);zI.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:b(zI.prototype.readFlatCoordinates)}},zI.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:zI.prototype.innerBoundaryIsParser,outerBoundaryIs:zI.prototype.outerBoundaryIsParser}},zI.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:v(zI.prototype.readFlatCoordinates)}},zI.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:b(GI.prototype.readPoint),MultiPoint:b(GI.prototype.readMultiPoint),LineString:b(GI.prototype.readLineString),MultiLineString:b(GI.prototype.readMultiLineString),LinearRing:b(GI.prototype.readLinearRing),Polygon:b(GI.prototype.readPolygon),MultiPolygon:b(GI.prototype.readMultiPolygon),Box:b(zI.prototype.readBox)}},zI.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:E(zI.prototype.writeCurveOrLineString),MultiCurve:E(zI.prototype.writeMultiCurveOrLineString),Point:E(zI.prototype.writePoint),MultiPoint:E(zI.prototype.writeMultiPoint),LineString:E(zI.prototype.writeCurveOrLineString),MultiLineString:E(zI.prototype.writeMultiCurveOrLineString),LinearRing:E(zI.prototype.writeLinearRing),Polygon:E(zI.prototype.writeSurfaceOrPolygon),MultiPolygon:E(zI.prototype.writeMultiSurfaceOrPolygon),Surface:E(zI.prototype.writeSurfaceOrPolygon),MultiSurface:E(zI.prototype.writeMultiSurfaceOrPolygon),Envelope:E(zI.prototype.writeEnvelope)}},zI.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:E(zI.prototype.writeLineStringOrCurveMember),curveMember:E(zI.prototype.writeLineStringOrCurveMember)}},zI.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:E(zI.prototype.writeRing),innerBoundaryIs:E(zI.prototype.writeRing)}},zI.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:E(zI.prototype.writePointMember)}},zI.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:E(zI.prototype.writeSurfaceOrPolygonMember),polygonMember:E(zI.prototype.writeSurfaceOrPolygonMember)}},zI.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:E(J),upperCorner:E(J)}};var VI=zI,qI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YI={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},WI=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,r.curve_=void 0!==n.curve&&n.curve,r.multiCurve_=void 0===n.multiCurve||n.multiCurve,r.multiSurface_=void 0===n.multiSurface||n.multiSurface,r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",r.hasZ=void 0!==n.hasZ&&n.hasZ,r}return qI(e,t),e.prototype.readMultiCurve=function(t,e){var r=R([],this.MULTICURVE_PARSERS,t,e,this);return r?new eh(r):void 0},e.prototype.readMultiSurface=function(t,e){var r=R([],this.MULTISURFACE_PARSERS,t,e,this);if(r)return new ih(r)},e.prototype.curveMemberParser=function(t,e){P(this.CURVEMEMBER_PARSERS,t,e,this)},e.prototype.surfaceMemberParser=function(t,e){P(this.SURFACEMEMBER_PARSERS,t,e,this)},e.prototype.readPatch=function(t,e){return R([null],this.PATCHES_PARSERS,t,e,this)},e.prototype.readSegment=function(t,e){return R([null],this.SEGMENTS_PARSERS,t,e,this)},e.prototype.readPolygonPatch=function(t,e){return R([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment=function(t,e){return R([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser=function(t,e){var r=R(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser=function(t,e){var r=R(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface=function(t,e){var r=R([null],this.SURFACE_PARSERS,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)Object(h.c)(i,r[a]),o.push(i.length);return new Oa(i,Co,o)}},e.prototype.readCurve=function(t,e){var r=R([null],this.CURVE_PARSERS,t,e,this);return r?new Qc(r,Co):void 0},e.prototype.readEnvelope=function(t,e){var r=R([null],this.ENVELOPE_PARSERS,t,e,this);return Object(mt.l)(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos=function(t,e){for(var r,n=d(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a)s=Object(u.o)(a).getAxisOrientation();if("neu"===s){var l,c=void 0;for(c=0,l=o.length;c<l;c+=3){var h=o[c],f=o[c+1];o[c]=f,o[c+1]=h}}var p=o.length;if(2==p&&o.push(0),0!==p)return o}},e.prototype.readFlatPosList=function(t,e){var r=d(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=Object(u.o)(i).getAxisOrientation());var s,l,c,h=r.split(/\s+/),f=2;t.getAttribute("srsDimension")?f=W(t.getAttribute("srsDimension")):t.getAttribute("dimension")?f=W(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?f=W(t.parentNode.getAttribute("srsDimension")):o&&(f=W(o));for(var p=[],g=0,y=h.length;g<y;g+=f)s=parseFloat(h[g]),l=parseFloat(h[g+1]),c=3===f?parseFloat(h[g+2]):0,"en"===a.substr(0,2)?p.push(s,l,c):p.push(l,s,c);return p},e.prototype.writePos_=function(t,e,r){var n=e.getCoordinates();J(t,n[0]+" "+n[1])},e.prototype.getCoords_=function(t,e,r){return t[0]+" "+t[1]},e.prototype.writePosList_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=n.srsName,l=e.getCoordinates(),u=l.length,c=new Array(u),h=0;h<u;++h)a=l[h],c[h]=this.getCoords_(a,s,i);J(t,c.join(" "))},e.prototype.writePoint=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=p(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,r)},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];N({node:t},this.ENVELOPE_SERIALIZERS,I,i,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=p(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),p(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();N({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=p(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.writeCurveOrLineString=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=p(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)}else if("Curve"===t.nodeName){var o=p(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();N({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeMultiPoint=function(t,e,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();N({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,S("pointMember"),a,r,void 0,this)},e.prototype.writeMultiCurveOrLineString=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();N({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeRing=function(t,e,r){var n=p(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,r)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r))},e.prototype.writePointMember=function(t,e,r){var n=p(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,r)},e.prototype.writeLineStringOrCurveMember=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var n=p(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var n=p(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=Object(ii.a)({},i);o.node=t,n=Array.isArray(e)?MI(e,i):LI(e,!0,i),N(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var c in u){var h=u[c];null!==h&&(s.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=E(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=E(J)))}}var f=Object(ii.a)({},i);f.node=t,N(f,i.serializers,S(void 0,o),l,r,s)},e.prototype.writeFeatureMembers_=function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=E(this.writeFeatureElement,this);var s=Object(ii.a)({},n);s.node=t,N(s,a,S(i,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return p(this.namespace,YI[n.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,l=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===l&&(n="MultiCurve"),p(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=p(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object(ii.a)(n,e),this.writeGeometryElement(r,t,[n]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=p(this.namespace,"featureMembers");r.setAttributeNS(f,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object(ii.a)(n,e),this.writeFeatureMembers_(r,t,[n]),r},e}(GI);WI.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:b(WI.prototype.readFlatPos),posList:b(WI.prototype.readFlatPosList),coordinates:b(VI.prototype.readFlatCoordinates)}},WI.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:WI.prototype.interiorParser,exterior:WI.prototype.exteriorParser}},WI.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:b(GI.prototype.readPoint),MultiPoint:b(GI.prototype.readMultiPoint),LineString:b(GI.prototype.readLineString),MultiLineString:b(GI.prototype.readMultiLineString),LinearRing:b(GI.prototype.readLinearRing),Polygon:b(GI.prototype.readPolygon),MultiPolygon:b(GI.prototype.readMultiPolygon),Surface:b(WI.prototype.readSurface),MultiSurface:b(WI.prototype.readMultiSurface),Curve:b(WI.prototype.readCurve),MultiCurve:b(WI.prototype.readMultiCurve),Envelope:b(WI.prototype.readEnvelope)}},WI.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:v(WI.prototype.curveMemberParser),curveMembers:v(WI.prototype.curveMemberParser)}},WI.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:v(WI.prototype.surfaceMemberParser),surfaceMembers:v(WI.prototype.surfaceMemberParser)}},WI.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:v(GI.prototype.readLineString),Curve:v(WI.prototype.readCurve)}},WI.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:v(GI.prototype.readPolygon),Surface:v(WI.prototype.readSurface)}},WI.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:b(WI.prototype.readPatch)}},WI.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:b(WI.prototype.readSegment)}},WI.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:v(WI.prototype.readFlatPosList),upperCorner:v(WI.prototype.readFlatPosList)}},WI.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:b(WI.prototype.readPolygonPatch)}},WI.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:b(WI.prototype.readLineStringSegment)}},WI.prototype.writeFeatures,WI.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:E(WI.prototype.writeRing),interior:E(WI.prototype.writeRing)}},WI.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:E(J),upperCorner:E(J)}},WI.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:E(WI.prototype.writeSurfaceOrPolygonMember),polygonMember:E(WI.prototype.writeSurfaceOrPolygonMember)}},WI.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:E(WI.prototype.writePointMember)}},WI.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:E(WI.prototype.writeLineStringOrCurveMember),curveMember:E(WI.prototype.writeLineStringOrCurveMember)}},WI.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:E(WI.prototype.writeCurveOrLineString),MultiCurve:E(WI.prototype.writeMultiCurveOrLineString),Point:E(WI.prototype.writePoint),MultiPoint:E(WI.prototype.writeMultiPoint),LineString:E(WI.prototype.writeCurveOrLineString),MultiLineString:E(WI.prototype.writeMultiCurveOrLineString),LinearRing:E(WI.prototype.writeLinearRing),Polygon:E(WI.prototype.writeSurfaceOrPolygon),MultiPolygon:E(WI.prototype.writeMultiSurfaceOrPolygon),Surface:E(WI.prototype.writeSurfaceOrPolygon),MultiSurface:E(WI.prototype.writeMultiSurfaceOrPolygon),Envelope:E(WI.prototype.writeEnvelope)}};var XI=WI,HI=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZI=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:r.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",r}return HI(e,t),e}(XI);ZI.prototype.namespace="http://www.opengis.net/gml/3.2",ZI.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:b(XI.prototype.readFlatPos),posList:b(XI.prototype.readFlatPosList),coordinates:b(VI.prototype.readFlatCoordinates)}},ZI.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:XI.prototype.interiorParser,exterior:XI.prototype.exteriorParser}},ZI.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:b(GI.prototype.readPoint),MultiPoint:b(GI.prototype.readMultiPoint),LineString:b(GI.prototype.readLineString),MultiLineString:b(GI.prototype.readMultiLineString),LinearRing:b(GI.prototype.readLinearRing),Polygon:b(GI.prototype.readPolygon),MultiPolygon:b(GI.prototype.readMultiPolygon),Surface:b(ZI.prototype.readSurface),MultiSurface:b(XI.prototype.readMultiSurface),Curve:b(ZI.prototype.readCurve),MultiCurve:b(XI.prototype.readMultiCurve),Envelope:b(ZI.prototype.readEnvelope)}},ZI.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:v(XI.prototype.curveMemberParser),curveMembers:v(XI.prototype.curveMemberParser)}},ZI.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:v(XI.prototype.surfaceMemberParser),surfaceMembers:v(XI.prototype.surfaceMemberParser)}},ZI.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:v(GI.prototype.readLineString),Curve:v(XI.prototype.readCurve)}},ZI.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:v(GI.prototype.readPolygon),Surface:v(XI.prototype.readSurface)}},ZI.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:b(XI.prototype.readPatch)}},ZI.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:b(XI.prototype.readSegment)}},ZI.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:v(XI.prototype.readFlatPosList),upperCorner:v(XI.prototype.readFlatPosList)}},ZI.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:b(XI.prototype.readPolygonPatch)}},ZI.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:b(XI.prototype.readLineStringSegment)}},ZI.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:v(GI.prototype.pointMemberParser),pointMembers:v(GI.prototype.pointMemberParser)}},ZI.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:v(GI.prototype.lineStringMemberParser),lineStringMembers:v(GI.prototype.lineStringMemberParser)}},ZI.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:v(GI.prototype.polygonMemberParser),polygonMembers:v(GI.prototype.polygonMemberParser)}},ZI.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:v(GI.prototype.readFlatCoordinatesFromNode)}},ZI.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:v(GI.prototype.readLineString)}},ZI.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:v(GI.prototype.readPolygon)}},ZI.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:b(GI.prototype.readFlatLinearRing)}},ZI.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:E(XI.prototype.writeRing),interior:E(XI.prototype.writeRing)}},ZI.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:E(J),upperCorner:E(J)}},ZI.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:E(XI.prototype.writeSurfaceOrPolygonMember),polygonMember:E(XI.prototype.writeSurfaceOrPolygonMember)}},ZI.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:E(XI.prototype.writePointMember)}},ZI.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:E(XI.prototype.writeLineStringOrCurveMember),curveMember:E(XI.prototype.writeLineStringOrCurveMember)}},ZI.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:E(XI.prototype.writeCurveOrLineString),MultiCurve:E(XI.prototype.writeMultiCurveOrLineString),Point:E(ZI.prototype.writePoint),MultiPoint:E(XI.prototype.writeMultiPoint),LineString:E(XI.prototype.writeCurveOrLineString),MultiLineString:E(XI.prototype.writeMultiCurveOrLineString),LinearRing:E(XI.prototype.writeLinearRing),Polygon:E(XI.prototype.writeSurfaceOrPolygon),MultiPolygon:E(XI.prototype.writeMultiSurfaceOrPolygon),Surface:E(XI.prototype.writeSurfaceOrPolygon),MultiSurface:E(XI.prototype.writeMultiSurfaceOrPolygon),Envelope:E(XI.prototype.writeEnvelope)}};var KI=ZI,JI=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),$I=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QI=function(t){function e(e,r){var n=t.call(this,e)||this;return n.conditions=r,Object(Ui.a)(n.conditions.length>=2,57),n}return $I(e,t),e}(JI),tC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eC=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return tC(e,t),e}(QI),rC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nC=function(t){function e(e,r,n){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=r,4!==r.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=n,i}return rC(e,t),e}(JI),iC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oC=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.geometryName=r||"the_geom",o.geometry=n,o.srsName=i,o}return iC(e,t),e}(JI),aC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sC=function(t){function e(e,r,n){return t.call(this,"Contains",e,r,n)||this}return aC(e,t),e}(oC),lC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uC=function(t){function e(e,r,n,i,o){var a=t.call(this,"DWithin",e,r,o)||this;return a.distance=n,a.unit=i,a}return lC(e,t),e}(oC),cC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hC=function(t){function e(e,r,n){return t.call(this,"Disjoint",e,r,n)||this}return cC(e,t),e}(oC),fC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pC=function(t){function e(e,r){var n=t.call(this,e)||this;return n.propertyName=r,n}return fC(e,t),e}(JI),dC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gC=function(t){function e(e,r,n){var i=t.call(this,"During",e)||this;return i.begin=r,i.end=n,i}return dC(e,t),e}(pC),yC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mC=function(t){function e(e,r,n,i){var o=t.call(this,e,r)||this;return o.expression=n,o.matchCase=i,o}return yC(e,t),e}(pC),_C=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vC=function(t){function e(e,r,n){return t.call(this,"PropertyIsEqualTo",e,r,n)||this}return _C(e,t),e}(mC),bC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xC=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThan",e,r)||this}return bC(e,t),e}(mC),wC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),EC=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)||this}return wC(e,t),e}(mC),OC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SC=function(t){function e(e,r,n){return t.call(this,"Intersects",e,r,n)||this}return OC(e,t),e}(oC),IC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CC=function(t){function e(e,r,n){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=r,i.upperBoundary=n,i}return IC(e,t),e}(pC),TC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),PC=function(t){function e(e,r,n,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=r,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return TC(e,t),e}(pC),RC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LC=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return RC(e,t),e}(pC),MC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NC=function(t){function e(e,r){return t.call(this,"PropertyIsLessThan",e,r)||this}return MC(e,t),e}(mC),AC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kC=function(t){function e(e,r){return t.call(this,"PropertyIsLessThanOrEqualTo",e,r)||this}return AC(e,t),e}(mC),jC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FC=function(t){function e(e){var r=t.call(this,"Not")||this;return r.condition=e,r}return jC(e,t),e}(JI),DC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GC=function(t){function e(e,r,n){return t.call(this,"PropertyIsNotEqualTo",e,r,n)||this}return DC(e,t),e}(mC),UC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BC=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return UC(e,t),e}(QI),zC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VC=(function(t){function e(e){var r=t.call(this,"ResourceId")||this;return r.rid=e,r}zC(e,t)}(JI),function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),qC=function(t){function e(e,r,n){return t.call(this,"Within",e,r,n)||this}return VC(e,t),e}(oC);function YC(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(eC,e))}function WC(t,e,r){return new nC(t,e,r)}var XC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HC={"http://www.opengis.net/gml":{boundedBy:w(GI.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:v(GI.prototype.readFeaturesInternal)}},ZC={"http://www.opengis.net/wfs":{totalInserted:w(Y),totalUpdated:w(Y),totalDeleted:w(Y)},"http://www.opengis.net/wfs/2.0":{totalInserted:w(Y),totalUpdated:w(Y),totalDeleted:w(Y)}},KC={"http://www.opengis.net/wfs":{TransactionSummary:w(lT,"transactionSummary"),InsertResults:w(fT,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:w(lT,"transactionSummary"),InsertResults:w(fT,"insertIds")}},JC={"http://www.opengis.net/wfs":{PropertyName:E(J)},"http://www.opengis.net/wfs/2.0":{PropertyName:E(J)}},$C={"http://www.opengis.net/wfs":{Insert:E(pT),Update:E(mT),Delete:E(yT),Property:E(_T),Native:E(vT)},"http://www.opengis.net/wfs/2.0":{Insert:E(pT),Update:E(mT),Delete:E(yT),Property:E(_T),Native:E(vT)}},QC="feature",tT="http://www.w3.org/2000/xmlns/",eT={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},rT={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},nT={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},iT={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},oT={"2.0.0":KI,"1.1.0":XI,"1.0.0":VI},aT=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.version_=n.version?n.version:"1.1.0",r.featureType_=n.featureType,r.featureNS_=n.featureNS,r.gmlFormat_=n.gmlFormat?n.gmlFormat:new oT[r.version_],r.schemaLocation_=n.schemaLocation?n.schemaLocation:iT[r.version_],r}return XC(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};Object(ii.a)(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object(ii.a)(r,this.getReadOptions(t,e||{}));var n=[r],i=R([],"2.0.0"===this.version_?HC:this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=m(t);return this.readTransactionResponseFromDocument(e)}return y(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=m(t);return this.readFeatureCollectionMetadataFromDocument(e)}return y(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=W(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,R(e,HC,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return R({},KC,t,[])},e.prototype.writeGetFeature=function(t){var e=this,r=p(rT[this.version_],"GetFeature");r.setAttribute("service","WFS"),r.setAttribute("version",this.version_),t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),r.setAttributeNS(f,"xsi:schemaLocation",this.schemaLocation_);var n={node:r};if(Object(ii.a)(n,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Object(Ui.a)(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var i=t.filter;t.bbox&&(Object(Ui.a)(t.geometryName,12),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object(ii.a)(n,{geometryName:t.geometryName,filter:i}),FT(r,t.featureTypes,[n])}else t.featureTypes.forEach((function(i){var o=e.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object(ii.a)(n,{geometryName:i.geometryName,filter:o}),FT(r,[i.name],[n])}));return r},e.prototype.combineBboxAndFilter=function(t,e,r,n){var i=WC(t,e,r);return n?YC(n,i):i},e.prototype.writeTransaction=function(t,e,r,n){var i,o=[],a=n.version?n.version:this.version_,s=p(rT[a],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",a),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle)),s.setAttributeNS(f,"xsi:schemaLocation",iT[a]);var l=function(t,e,r,n){var i,o=n.featurePrefix?n.featurePrefix:QC;"1.0.0"===r?i=2:"1.1.0"===r?i=3:"2.0.0"===r&&(i=3.2);return Object(ii.a)({node:t},{version:r,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:o,gmlVersion:i,hasZ:n.hasZ,srsName:n.srsName},e)}(s,i,a,n);return t&&sT("Insert",t,o,l),e&&sT("Update",e,o,l),r&&sT("Delete",r,o,l),n.nativeElements&&sT("Native",n.nativeElements,o,l),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),Object(u.o)(r.pop().srsName)}return null},e}(AI);function sT(t,e,r,n){N(n,$C,S(t),e,r)}function lT(t,e){return R({},ZC,t,e)}var uT={"http://www.opengis.net/ogc":{FeatureId:v((function(t,e){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:v((function(t,e){return t.getAttribute("fid")}))}};function cT(t,e){P(uT,t,e)}var hT={"http://www.opengis.net/wfs":{Feature:cT},"http://www.opengis.net/wfs/2.0":{Feature:cT}};function fT(t,e){return R([],hT,t,e)}function pT(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a=n.gmlVersion,s=p(o,i);t.appendChild(s),2===a?VI.prototype.writeFeatureElement(s,e,r):3===a?XI.prototype.writeFeatureElement(s,e,r):KI.prototype.writeFeatureElement(s,e,r)}function dT(t,e,r){var n=r[r.length-1].version,i=eT[n],o=p(i,"Filter"),a=p(i,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),t.appendChild(o)}function gT(t,e){var r=(t=t||QC)+":";return 0===e.indexOf(r)?e:r+e}function yT(t,e,r){var n=r[r.length-1];Object(Ui.a)(void 0!==e.getId(),26);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=gT(o,i);t.setAttribute("typeName",s),t.setAttributeNS(tT,"xmlns:"+o,a);var l=e.getId();void 0!==l&&dT(t,l,r)}function mT(t,e,r){var n=r[r.length-1];Object(Ui.a)(void 0!==e.getId(),27);var i=n.version,o=n.featureType,a=n.featurePrefix,s=n.featureNS,l=gT(a,o),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(tT,"xmlns:"+a,s);var c=e.getId();if(void 0!==c){for(var h=e.getKeys(),f=[],p=0,d=h.length;p<d;p++){var g=e.get(h[p]);if(void 0!==g){var y=h[p];g&&"function"==typeof g.getSimplifiedGeometry&&(y=u),f.push({name:y,value:g})}}N({version:i,gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},$C,S("Property"),f,r),dT(t,c,r)}}function _T(t,e,r){var n=r[r.length-1],i=n.version,o=rT[i],a=p(o,"Name"),s=n.gmlVersion;if(t.appendChild(a),J(a,e.name),void 0!==e.value&&null!==e.value){var l=p(o,"Value");t.appendChild(l),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===s?VI.prototype.writeGeometryElement(l,e.value,r):3===s?XI.prototype.writeGeometryElement(l,e.value,r):KI.prototype.writeGeometryElement(l,e.value,r):J(l,e.value)}}function vT(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&J(t,e.value)}var bT={"http://www.opengis.net/wfs":{Query:E(xT)},"http://www.opengis.net/wfs/2.0":{Query:E(xT)},"http://www.opengis.net/ogc":{During:E(IT),And:E(CT),Or:E(CT),Not:E(TT),BBOX:E(ET),Contains:E(OT),Intersects:E(OT),Within:E(OT),DWithin:E(ST),PropertyIsEqualTo:E(PT),PropertyIsNotEqualTo:E(PT),PropertyIsLessThan:E(PT),PropertyIsLessThanOrEqualTo:E(PT),PropertyIsGreaterThan:E(PT),PropertyIsGreaterThanOrEqualTo:E(PT),PropertyIsNull:E(RT),PropertyIsBetween:E(LT),PropertyIsLike:E(MT)},"http://www.opengis.net/fes/2.0":{During:E(IT),And:E(CT),Or:E(CT),Not:E(TT),BBOX:E(ET),Contains:E(OT),Disjoint:E(OT),Intersects:E(OT),ResourceId:E((function(t,e,r){t.setAttribute("rid",e.rid)})),Within:E(OT),DWithin:E(ST),PropertyIsEqualTo:E(PT),PropertyIsNotEqualTo:E(PT),PropertyIsLessThan:E(PT),PropertyIsLessThanOrEqualTo:E(PT),PropertyIsGreaterThan:E(PT),PropertyIsGreaterThanOrEqualTo:E(PT),PropertyIsNull:E(RT),PropertyIsBetween:E(LT),PropertyIsLike:E(MT)}};function xT(t,e,r){var n,i,o=r[r.length-1],a=o.version,s=o.featurePrefix,l=o.featureNS,u=o.propertyNames,c=o.srsName;n=s?gT(s,e):e,i="2.0.0"===a?"typeNames":"typeName",t.setAttribute(i,n),c&&t.setAttribute("srsName",c),l&&t.setAttributeNS(tT,"xmlns:"+s,l);var h=Object(ii.a)({},o);h.node=t,N(h,JC,S("PropertyName"),u,r);var f=o.filter;if(f){var d=p(DT(a),"Filter");t.appendChild(d),wT(d,f,r)}}function wT(t,e,r){var n=r[r.length-1],i={node:t};Object(ii.a)(i,{context:n}),N(i,bT,S(e.getTagName()),[e],r)}function ET(t,e,r){var n=r[r.length-1],i=n.context.version;n.srsName=e.srsName;var o=oT[i];kT(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.extent,r)}function OT(t,e,r){var n=r[r.length-1],i=n.context.version;n.srsName=e.srsName;var o=oT[i];kT(i,t,e.geometryName),o.prototype.writeGeometryElement(t,e.geometry,r)}function ST(t,e,r){var n=r[r.length-1].context.version;OT(t,e,r);var i=p(DT(n),"Distance");J(i,e.distance.toString()),"2.0.0"===n?i.setAttribute("uom",e.unit):i.setAttribute("units",e.unit),t.appendChild(i)}function IT(t,e,r){var n=r[r.length-1].context.version;NT(nT[n],"ValueReference",t,e.propertyName);var i=p(jI,"TimePeriod");t.appendChild(i);var o=p(jI,"begin");i.appendChild(o),jT(o,e.begin);var a=p(jI,"end");i.appendChild(a),jT(a,e.end)}function CT(t,e,r){var n=r[r.length-1].context,i={node:t};Object(ii.a)(i,{context:n});for(var o=e.conditions,a=0,s=o.length;a<s;++a){var l=o[a];N(i,bT,S(l.getTagName()),[l],r)}}function TT(t,e,r){var n=r[r.length-1].context,i={node:t};Object(ii.a)(i,{context:n});var o=e.condition;N(i,bT,S(o.getTagName()),[o],r)}function PT(t,e,r){var n=r[r.length-1].context.version;void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),kT(n,t,e.propertyName),AT(n,t,""+e.expression)}function RT(t,e,r){kT(r[r.length-1].context.version,t,e.propertyName)}function LT(t,e,r){var n=r[r.length-1].context.version,i=DT(n);kT(n,t,e.propertyName);var o=p(i,"LowerBoundary");t.appendChild(o),AT(n,o,""+e.lowerBoundary);var a=p(i,"UpperBoundary");t.appendChild(a),AT(n,a,""+e.upperBoundary)}function MT(t,e,r){var n=r[r.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),kT(n,t,e.propertyName),AT(n,t,""+e.pattern)}function NT(t,e,r,n){var i=p(t,e);J(i,n),r.appendChild(i)}function AT(t,e,r){NT(DT(t),"Literal",e,r)}function kT(t,e,r){"2.0.0"===t?NT(nT[t],"ValueReference",e,r):NT(eT[t],"PropertyName",e,r)}function jT(t,e){var r=p(jI,"TimeInstant");t.appendChild(r);var n=p(jI,"timePosition");r.appendChild(n),J(n,e)}function FT(t,e,r){var n=r[r.length-1],i=Object(ii.a)({},n);i.node=t,N(i,bT,S("Query"),e,r)}function DT(t){return"2.0.0"===t?nT[t]:eT[t]}var GT=aT,UT=r(110),BT=r.n(UT),zT=r(111),VT=r.n(zT);function qT(t){return(qT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YT(t){return function(t){if(Array.isArray(t))return WT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return WT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WT(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function XT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HT(t,e){return(HT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ZT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=JT(t);if(e){var i=JT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return KT(this,r)}}function KT(t,e){return!e||"object"!==qT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function JT(t){return(JT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&HT(t,e)}(a,t);var e,r,n,i=ZT(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).userFormat=t,r.featureCount=e.featureCount,_D(r.featureCount)&&(r.featureCount=10),r.buffer=e.buffer,r}return e=a,n=[{key:"insert",value:function(t,e){var r=!1;switch(e){case"text/html":var n=document.createElement("div");n.innerHTML=t;var i="";Array.prototype.forEach.call(n.querySelectorAll("body"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("div"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("table"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("b"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("span"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("input"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("a"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("img"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("p"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("ul"),(function(t){i+=t.innerHTML.trim()})),Array.prototype.forEach.call(n.querySelectorAll("li"),(function(t){i+=t.innerHTML.trim()})),i.length>0&&!/WMS\s+server\s+error/i.test(t)&&(r=!0);break;case"application/vnd.ogc.gml":r=(new GT).readFeatures(t).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(t)||/features\s+were\s+found/i.test(t)||/:$/i.test(t)||(r=!0)}return r}},{key:"unsupportedFormat",value:function(t,e){var r=!1;return"text/html"===e&&(r=a.regExs.msUnsupportedFormat.test(t)),r}}],(r=[{key:"addTo",value:function(t,e){!1===t.getMapImpl().getControls().getArray().some((function(t){return t instanceof a}))&&(this.facadeMap_=t,Ua.call(this,{element:e,target:null}),t.getMapImpl().addControl(this))}},{key:"activate",value:function(){this.addOnClickEvent_()}},{key:"deactivate",value:function(){this.deleteOnClickEvent_()}},{key:"addOnClickEvent_",value:function(){var t=this,e=this.facadeMap_.getMapImpl();"plain"===OD(this.userFormat)||"text/plain"===OD(this.userFormat)?this.userFormat="text/plain":"gml"===OD(this.userFormat)||"application/vnd.ogc.gml"===OD(this.userFormat)?this.userFormat="application/vnd.ogc.gml":this.userFormat="text/html",this.clickEventKey_=e.on("singleclick",(function(e){return t.buildUrl_(o,e)}))}},{key:"buildUrl_",value:function(t,e){this.evt=e;var r=this.facadeMap_.getMapImpl(),n=this.buildWMSInfoURL(this.facadeMap_.getWMS()),i=this.buildWMTSInfoURL(this.facadeMap_.getWMTS()),o=[].concat(YT(i),YT(n)).filter((function(t){return!_D(t)}));o.length>0?this.showInfoFromURL_(o,e.coordinate,r):t.info("No existen capas consultables")}},{key:"buildWMSInfoURL",value:function(t){var e=this,r=this.facadeMap_.getMapImpl().getView().getResolution(),n=this.facadeMap_.getProjection().code;return t.map((function(t){var i,o=t.getImpl().getOLLayer();if(t.isVisible()&&t.isQueryable()&&!_D(o)){i={};var a={INFO_FORMAT:e.userFormat,FEATURE_COUNT:e.featureCount},s=o.getSource(),l=e.evt.coordinate,u=s.getFeatureInfoUrl(l,r,n,a);xD(M.config.ticket)&&(u=ID(u,{ticket:M.config.ticket})),/buffer/i.test(t.url)||(a.Buffer=e.buffer),i={layer:t.legend||t.name,url:u}}return i}))}},{key:"buildWMTSInfoURL",value:function(t){var e=this;return t.map((function(t){var r;if(t.isVisible()){r={};var n=e.userFormat,i=e.evt.coordinate,o=t.getGetFeatureInfoUrl(i,e.facadeMap_.getZoom(),n);xD(M.config.ticket)&&(o=ID(o,{ticket:M.config.ticket})),r={layer:t.legend||t.name,url:o}}return r}))}},{key:"deleteOnClickEvent_",value:function(){Object(ag.b)(this.clickEventKey_)}},{key:"formatInfo",value:function(t,e,r){var n=null;switch(e){case"text/html":n=t;break;case"application/vnd.ogc.gml":var i=(new GT).readFeatures(t);n="",i.forEach((function(t){var e=t.getKeys();n+="<div class='divinfo'>",n+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat(kD(r)," '</td></tr>'");for(var i=0,o=e.length;i<o;i+=1){var a=e[i],s=t.get(a);n+='<tr><td class="key"><b>',n+=kD(a),n+='</b></td><td class="value">',n+=s,n+="</td></tr>"}n+="</tbody></table></div>"}));break;case"text/plain":n=a.regExs.gsResponse.test(t)?this.txtToHtmlGeoserver(t,r):this.txtToHtmlMapserver(t,r)}return n}},{key:"txtToHtmlGeoserver",value:function(t,e){var r=t,n=(r=(r=r.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),i="<div class='divinfo'>";i+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(kD(e),"</td></tr>");for(var o=0,s=n.length;o<s;o+=1){var l=n[o].trim();if(-1!==l.indexOf("=")){var u=l.split("="),c=u[0].trim(),h="-";u.length>1&&(0!==(h=u[1].trim()).length&&"null"!==h||(h="-")),!1===a.regExs.gsGeometry.test(c)&&(i+='<tr><td class="key"><b>',i+=kD(c),i+='</b></td><td class="value">',i+=h,i+="</td></tr>")}else a.regExs.gsNewFeature.test(l)&&(i+='<tr><td class="header" colspan="3">'.concat(kD(e),"</td></tr>"))}return i+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(t){for(var e=t,r=(e=e.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),n=(e=(e=(e=(e=e.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),i="",o="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(kD(r),"</td></tr>"),s=0,l=n.length;s<l;s+=1){var u=n[s].trim(),c=n[s]?n[s].trim():"",h=u.split(";"),f=h[0].trim(),p="-";h.length>1&&0===(p=h[1].trim()).length&&(p="-"),f.length>0&&(a.regExs.msNewFeature.test(f)?c.length>0&&!a.regExs.msNewFeature.test(c)&&(i+="<tr><td class='header' colspan='3'>".concat(kD(r),"</td><td></td></tr>")):(i+='<tr><td class="key"><b>',i+=kD(f),i+='</b></td><td class="value">',i+=p,i+="</td></tr>"))}return i.length>0&&(i="".concat(o+i,"</tbody></table>")),i}},{key:"showInfoFromURL_",value:function(t,e,r){var n=this,i=bu(BT.a,{vars:{info:a.LOADING_MESSAGE},parseToHtml:!1}),o=[],s=String(this.userFormat),l=0,u={icon:"g-cartografia-info",title:a.POPUP_TITLE,content:i},c=this.facadeMap_.getPopup();_D(c)?((c=new Ox).addTab(u),this.facadeMap_.addPopup(c,e)):c.getTabs().some((function(t){return t.title!==a.POPUP_TITLE}))?c.addTab(u):(this.facadeMap_.removePopup(),(c=new Ox).addTab(u),this.facadeMap_.addPopup(c,e)),t.forEach((function(e){var r=e.url,i=e.layer;uD(r).then((function(e){if(c=n.facadeMap_.getPopup(),200===e.code&&!1===e.error){var r=e.text;if(!0===a.insert(r,s)){var h=n.formatInfo(r,s,i);o.push({formatedInfo:h,layerName:i})}else a.unsupportedFormat(r,s)&&o.push({formatedInfo:uu("getfeatureinfo").unsupported_format,layerName:i})}if(l+=1,t.length===l&&!_D(c))if(c.removeTab(u),0===o.length)c.addTab({icon:"g-cartografia-info",title:a.POPUP_TITLE,content:uu("getfeatureinfo").no_info});else{var f=bu(VT.a,{vars:{layers:o,info_of:uu("getfeatureinfo").info_of},parseToHtml:!1});c.addTab({icon:"g-cartografia-info",title:a.POPUP_TITLE,content:f,listeners:[{selector:".m-getfeatureinfo-content-info div.m-arrow-right",all:!0,type:"click",callback:function(t){return n.toogleSection(t)}}]})}}))})),this.popup_=c}},{key:"toogleSection",value:function(t){var e=t.target,r=e.parentElement.parentElement.querySelector(".m-getfeatureinfo-content-info-body");if(r.classList.contains("m-content-collapsed")){r.classList.remove("m-content-collapsed"),e.classList.remove("m-arrow-right"),e.classList.add("m-arrow-down");var n=this.popup_.getCoordinate();_D(this.popup_.getImpl().panIntoView)||this.popup_.getImpl().panIntoView(n)}else r.classList.add("m-content-collapsed"),e.classList.add("m-arrow-right"),e.classList.remove("m-arrow-down")}}])&&XT(e.prototype,r),n&&XT(e,n),a}(pd);$T.LOADING_MESSAGE="Obteniendo información...",$T.regExs={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i};var QT=$T,tP=r(112),eP=r.n(tP);function rP(t){return(rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oP(t,e){return(oP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function aP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=lP(t);if(e){var i=lP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sP(this,r)}}function sP(t,e){return!e||"object"!==rP(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lP(t){return(lP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oP(t,e)}(o,t);var e,r,n,i=aP(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nP(this,o);var n=new QT(t,r);return e=i.call(this,n,o.NAME),dD(QT)&&_l(uu("exception").getfeatureinfo_method),e.format=t,e}return e=o,(r=[{key:"createView",value:function(t){return bu(eP.a,{vars:{title:uu("getfeatureinfo").title}})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-getfeatureinfo-button")}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&iP(e.prototype,r),n&&iP(e,n),o}(yu);uP.NAME="getfeatureinfo",uP.POPUP_TITLE=uu("getfeatureinfo").info;var cP=uP,hP=(r(156),r(113)),fP=r.n(hP),pP=".m-top.m-left",dP=".m-top.m-right",gP=".m-bottom.m-left",yP=".m-bottom.m-right";function mP(t){return(mP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bP(t,e){return(bP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=EP(t);if(e){var i=EP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wP(this,r)}}function wP(t,e){return!e||"object"!==mP(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function EP(t){return(EP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bP(t,e)}(o,t);var e,r,n,i=xP(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _P(this,o),(e=i.call(this)).name=t,e._map=null,e._controls=[],e._buttonPanel=null,e._collapsible=!1,_D(r.collapsible)||(e._collapsible=r.collapsible),e.position=pP,_D(r.position)||(e.position=r.position),e._collapsed=e._collapsible,_D(r.collapsed)||(e._collapsed=r.collapsed&&!0===e._collapsible),e._multiActivation=!1,_D(r.multiActivation)||(e._multiActivation=r.multiActivation),e._className=null,_D(r.className)||(e._className=r.className),e._collapsedButtonClass=null,_D(r.collapsedButtonClass)?e.position===pP||e.position===gP?e._collapsedButtonClass="g-cartografia-flecha-derecha":e.position!==dP&&e.position!==yP||(e._collapsedButtonClass="g-cartografia-flecha-izquierda"):e._collapsedButtonClass=r.collapsedButtonClass,e._openedButtonClass=null,_D(r.openedButtonClass)?e.position===pP||e.position===gP?e._openedButtonClass="g-cartografia-flecha-izquierda":e.position!==dP&&e.position!==yP||(e._openedButtonClass="g-cartografia-flecha-derecha"):e._openedButtonClass=r.openedButtonClass,e._element=null,e._areaContainer=null,e._controlsContainer=null,e._tooltip=null,_D(r.tooltip)||(e._tooltip=r.tooltip),e}return e=o,(r=[{key:"destroy",value:function(){null!=this._element&&this._areaContainer.removeChild(this._element),this._controlsContainer=null}},{key:"addTo",value:function(t,e){var r=this;this._map=t,this._areaContainer=e;var n=bu(fP.a);this._element=n,_D(this._tooltip)||this._element.setAttribute("title",this._tooltip),this._buttonPanel=n.querySelector("button.m-panel-btn"),_D(this._className)||this._className.split(/\s+/).forEach((function(t){n.classList.add(t)})),!0===this._collapsed?this.collapse():this.open(),!0!==this._collapsible&&n.classList.add("no-collapsible"),this._controlsContainer=n.querySelector("div.m-panel-controls"),e.appendChild(n),this._buttonPanel.addEventListener("click",(function(t){t.preventDefault(),!1===r._collapsed?r.collapse():r.open()})),this.addControls(this._controls),this.fire(Cl,n)}},{key:"_collapse",value:function(t){t.classList.remove("opened"),this._buttonPanel.classList.remove(this._openedButtonClass),t.classList.add("collapsed"),this._buttonPanel.classList.add(this._collapsedButtonClass),this._collapsed=!0,this.fire(Bl)}},{key:"_open",value:function(t){t.classList.remove("collapsed"),this._buttonPanel.classList.remove(this._collapsedButtonClass),t.classList.add("opened"),this._buttonPanel.classList.add(this._openedButtonClass),this._collapsed=!1,this.fire(Ul)}},{key:"open",value:function(){this._open(this._element)}},{key:"collapse",value:function(){this._collapse(this._element)}},{key:"getControls",value:function(){return this._controls}},{key:"addControls",value:function(t){var e=this,r=t;_D(r)||(mD(r)||(r=[r]),r.forEach((function(t){t instanceof yu&&(e.hasControl(t)||(e._controls.push(t),t.setPanel(e),t.on(zl,e._removeControl.bind(e),e)),_D(e._controlsContainer)||(t.on(Cl,e._moveControlView.bind(e),e),t.addTo(e._map)),t.on(Dl,e._manageActivation.bind(e),e))})))}},{key:"hasControl",value:function(t){var e=!1;return _D(t)||(xD(t)?e=null!=this._controls.filter((function(e){return e.name===t}))[0]:t instanceof yu&&(e=DD(this._controls,t))),e}},{key:"removeControls",value:function(t){var e=this,r=t;_D(r)||(mD(r)||(r=[r]),r.forEach((function(t){var r=t;r instanceof yu&&e.hasControl(r)&&(e._controls=e._controls.filter((function(t){return!r.equals(t)})),r.destroy&&r.destroy(),r.setPanel(null))}),this),0===this._controls.length&&this._map.removePanel(this))}},{key:"_removeControl",value:function(t){var e=this;this._map.controls(t).forEach((function(t){var r=e._controls.indexOf(t);-1!==r&&e._controls.splice(r,1)}))}},{key:"removeClassName",value:function(t){_D(this._element)?this._className=this._className.replace(new RegExp("s* ".concat(t," s*")),""):this._element.classList.remove(t)}},{key:"addClassName",value:function(t){_D(this._element)?this._className=this._className.concat(" ").concat(t):this._element.classList.add(t)}},{key:"_moveControlView",value:function(t){var e=t.getElement();_D(this._controlsContainer)||this._controlsContainer.appendChild(e),t.fire(Tl)}},{key:"_manageActivation",value:function(t){!0!==this._multiActivation&&this._controls.forEach((function(e){!e.equals(t)&&e.activated&&e.deactivate()}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=t.name===this.name),e}},{key:"getTemplatePanel",value:function(){return this._element}},{key:"getButtonPanel",value:function(){return this._buttonPanel}},{key:"isCollapsed",value:function(){return this._collapsed}},{key:"setCollapsed",value:function(t){this._collapsed=t}},{key:"getControlsContainer",value:function(){return this._controlsContainer}}])&&vP(e.prototype,r),n&&vP(e,n),o}(il);function SP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function IP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?SP(Object(r),!0).forEach((function(e){CP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function CP(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var RP="map-info",LP=function(t,e){t.on(Cl,(function(){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getElement().classList.add("ol-scale-line-up")}))},MP=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};TP(this,t),this.panel_=new OP(e.name,IP({},e.params)),r(this.panel_)}var e,r,n;return e=t,(r=[{key:"panel",get:function(){return this.panel_}}])&&PP(e.prototype,r),n&&PP(e,n),t}(),NP=function(t){var e=t.getPanels("map-info")[0];_D(e)&&(e=new MP({name:RP,params:{collapsible:!1,className:"m-map-info",position:yP}},(function(e){LP(e,t)})).panel);return e.addClassName("m-with-scale"),e},AP=function(t,e){var r,n=(CP(r={},cP.NAME,(function(){return function(t){var e=t;if(_D(e.panel.TOOLS)){var r=new MP({name:"tools",params:{collapsible:!0,className:"m-tools",collapsedButtonClass:"g-cartografia-herramienta",position:pP,tooltip:"Panel de herramientas"}});e.panel.TOOLS=r.panel}return e.panel.TOOLS}(e)})),CP(r,Hw.NAME,(function(){return new MP({name:Hw.NAME,params:{collapsible:!0,className:"m-layerswitcher",collapsedButtonClass:"g-cartografia-capas2",position:dP,tooltip:uu("layerswitcher").title}},(function(t){t.on(Cl,(function(t){BD(t.querySelector(".m-panel-controls"))})),t.on(Ul,(function(t){var e=t.getControls()[0];e.registerEvents(),e.render()})),t.on(Bl,(function(t){t.getControls()[0].unregisterEvents()}))})).panel})),CP(r,CE.NAME,(function(){return new MP({name:CE.NAME,params:{collapsible:!1,className:"m-location",position:yP}}).panel})),CP(r,TS.NAME,(function(){return function(t){var e=t.getPanels("map-info")[0];return _D(e)&&(e=new MP({name:RP,params:{collapsible:!1,className:"m-map-info",position:yP,tooltip:"Coordenadas del puntero"}}).panel),e.addClassName("m-with-mouse"),e}(e)})),CP(r,QS.NAME,(function(){return function(t){var e=t.getPanels("map-info")[0];return _D(e)&&(e=new MP({name:RP,params:{collapsible:!1,className:"m-map-info",position:yP}}).panel),e.addClassName("m-with-overview"),e}(e)})),CP(r,PI.NAME,(function(){return new MP({name:PI.NAME,params:{collapsible:!1,className:"m-panzoom",position:pP}}).panel})),CP(r,Ru.NAME,(function(){return new MP({name:Ru.NAME,params:{collapsible:!1,className:"m-panzoombar",position:pP,tooltip:"Nivel de zoom"}}).panel})),CP(r,_O.NAME,(function(){return new MP({name:_O.NAME,params:{collapsible:!1,className:"m-rotate",position:dP}}).panel})),CP(r,HE.NAME,(function(){return NP(e)})),CP(r,"".concat(HE.NAME,"*true"),(function(){return NP(e)})),CP(r,QO.NAME,(function(){return function(t){return new MP({name:QO.NAME,params:{collapsible:!1,className:"m-scaleline",position:gP,tooltip:"Línea de escala"}},(function(e){LP(e,t)})).panel}(e)})),CP(r,Ld.NAME,(function(){return function(t){var e=t.getPanels("map-info")[0];return _D(e)&&(e=new MP({name:RP,params:{collapsible:!1,className:"m-map-info",position:yP}},(function(e){LP(e,t)})).panel),e.addClassName("m-with-wmcselector"),e}(e)})),r)[t.name];return vD(n)?n():null},kP=r(114),jP=r.n(kP);function FP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var DP=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text_=e,this.coord_=[r.x,r.y],this.popup_=null,this.facadeMap_=null,this.panMapIfOutOfView=n}var e,r,n;return e=t,(r=[{key:"show",value:function(t,e){this.facadeMap_=t;var r=bu(jP.a,{vars:{info:this.text_},parseToHtml:!1});this.popup_=new Ox({panMapIfOutOfView:this.panMapIfOutOfView}),this.popup_.addTab({icon:"g-cartografia-comentarios",title:"Información",content:r}),t.addPopup(this.popup_,this.coord_,e)}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"getPopup",value:function(){return this.popup_}},{key:"getCoordinate",value:function(){var t=this.coord;return _D(t)&&(t=this.getPopup().getCoordinate()),t}},{key:"setCoordinate",value:function(t){var e=this.getPopup();_D(e)||e.setCoordinate(t)}}])&&FP(e.prototype,r),n&&FP(e,n),t}();function GP(t){return(GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function BP(t,e){return(BP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qP(t);if(e){var i=qP(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return VP(this,r)}}function VP(t,e){return!e||"object"!==GP(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qP(t){return(qP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BP(t,e)}(o,t);var e,r,n,i=zP(o);function o(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new DP(t,e,r);return i.call(this,n)}return e=o,(r=[{key:"hide",value:function(){this.getImpl().hide()}},{key:"show",value:function(t,e){this.getImpl().show(t,e)}},{key:"getPopup",value:function(){return this.getImpl().getPopup()}},{key:"getCoordinate",value:function(){return this.getImpl().getCoordinate()}},{key:"setCoordinate",value:function(t){this.getImpl().coordinate=t}}])&&UP(e.prototype,r),n&&UP(e,n),o}(Il);YP.POPUP_TEMPLATE="label_popup.html";var WP=YP;function XP(t){return(XP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var HP=function t(e){var r;return xD(e)?r=document.getElementById(e):bD(e)?_D(e.id)?_D(e.container)?_l(uu("exception").no_container):r=t(e.container):r=document.getElementById(e.id):_l("El tipo del parámetro container no es válido: ".concat(XP(e))),_D(r)&&_l(uu("exception").no_id_container),r},ZP=function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_D(e)&&_l(uu("exception").no_param),this.container=HP(e),this.layers=(xD(r=e)?n=SD("layers",r):bD(r)?n=r.layers:_l("El tipo del parámetro container no es válido: ".concat(XP(r))),n),this.wmc=function(t){var e;return xD(t)?(e=SD("wmc",t),_D(e)&&(e=SD("wmcfile",t)),_D(e)&&(e=SD("wmcfiles",t))):bD(t)?(e=t.wmc,_D(e)&&(e=t.wmcfile),_D(e)&&(e=t.wmcfiles)):_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.wms=function(t){var e;return xD(t)?e=SD("wms",t):bD(t)?e=t.wms:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.wmts=function(t){var e;return xD(t)?e=SD("wmts",t):bD(t)?e=t.wmts:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.kml=function(t){var e;return xD(t)?e=SD("kml",t):bD(t)?e=t.kml:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.controls=function(t){var e;return xD(t)?e=SD("controls",t):bD(t)?e=t.controls:_l("El tipo del parámetro controls no es válido: ".concat(XP(t))),e}(e),this.getfeatureinfo=function(t){var e;return xD(t)?e=SD("getfeatureinfo",t):bD(t)?(e=t.getfeatureinfo,!dD(e)&&_D(e)&&(e="plain")):_l("El tipo del parámetro controls no es válido: ".concat(XP(t))),e}(e),this.maxExtent=function(t){var e;return xD(t)?(e=SD("maxExtent",t),_D(e)&&(e=SD("maxextent",t))):bD(t)?(e=t.maxExtent,_D(e)&&(e=t.maxextent)):_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.bbox=function(t){var e;return xD(t)?e=SD("bbox",t):bD(t)?e=t.bbox:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.zoom=function(t){var e;return xD(t)?e=SD("zoom",t):bD(t)?e=t.zoom:_l("El tipo del parámetro zoom no es válido: ".concat(XP(t))),e}(e),this.center=function(t){var e;return xD(t)?e=SD("center",t):bD(t)?e=t.center:_l("El tipo del parámetro center no es válido: ".concat(XP(t))),e}(e),this.resolutions=function(t){var e;return xD(t)?e=SD("resolutions",t):bD(t)?e=t.resolutions:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.projection=function(t){var e;return xD(t)?e=SD("projection",t):bD(t)?e=t.projection:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.label=function(t){var e;return xD(t)?e=SD("label",t):bD(t)?e=t.label:_l("El tipo del parámetro container no es válido: ".concat(XP(t))),e}(e),this.ticket=function(t){var e;return xD(t)?e=SD("ticket",t):bD(t)?e=t.ticket:_l("El tipo del parámetro ticket no es válido: ".concat(XP(t))),e}(e),this.rotation=function(t){var e=t;return xD(t)?e=SD("rotation",t):bD(t)&&(e=t.rotation),e}(e),this.bgColorContainer=function(t){var e;return xD(t)?e=SD("bgColorContainer",t):bD(t)?e=t.bgColorContainer:_l("El tipo del parámetro bgColorContainer no es válido: ".concat(XP(t))),e}(e)};function KP(t){return(KP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $P(t,e){return($P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function QP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=eR(t);if(e){var i=eR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tR(this,r)}}function tR(t,e){return!e||"object"!==KP(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eR(t){return(eR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$P(t,e)}(o,t);var e,r,n,i=QP(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new iR;return(t=i.call(this,e)).id_=CD("mapea","render_feature"),t}return e=o,(r=[{key:"getId",value:function(){return this.id_}},{key:"getGeometry",value:function(){return null}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"getType",value:function(){return this.getImpl().getType()}},{key:"getAttribute",value:function(t){var e;if(e=this.getImpl().getAttribute(t),_D(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return _D(t)||(r=t instanceof o?t.getAttribute(e):t[e]),r}),this))}return e}},{key:"equals",value:function(t){return this.getId()===t.getId()}}])&&JP(e.prototype,r),n&&JP(e,n),o}(Il);function nR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var iR=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olFeature_=null}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return _D(t)||(r=new rR).getImpl().setOLFeature(t),r}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"getType",value:function(){return this.getOLFeature().getType()}},{key:"setOLFeature",value:function(t){_D(t)||(this.olFeature_=t)}},{key:"getAttributes",value:function(){return this.olFeature_.getProperties()}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){}}])&&nR(e.prototype,r),n&&nR(e,n),t}();function oR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var sR=function(t,e){var r,n=t.getId();return _D(n)||(r=e.getFeatureById(n)),_D(r)&&t instanceof lh&&(r=iR.olFeature2Facade(t)),r},lR=function(){function t(){oR(this,t),this.map_=null,this.defaultCursor_=void 0}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t){this.map_=t}},{key:"getFeaturesByLayer",value:function(t,e){var r=[];if(!_D(e)&&e.isVisible()&&!_D(e.getImpl().getOLLayer())){var n=e.getImpl().getOLLayer();this.map_.getMapImpl().forEachFeatureAtPixel(t.pixel,(function(t,n){if(n instanceof Wv&&!_D(t.get("features"))){var i=t.get("features").map((function(t){return sR(t,e)}));if(1===i.length)r.push(i[0]);else{var o=e.getStyle();o instanceof jb||(o=o.getStyles().find((function(t){return t instanceof jb}))),r.push(new EG(i,{ranges:o.getRanges(),hoverInteraction:o.getOptions().hoverInteraction,maxFeaturesToSelect:o.getOptions().maxFeaturesToSelect,distance:o.getOptions().distance}))}}else Object.prototype.hasOwnProperty.call(t.getProperties(),"selectclusterlink")||r.push(sR(t,e))}),{layerFilter:function(t){var r=!1;return e.getStyle()instanceof jb&&e.getStyle().getOptions().selectInteraction&&(r=t===e.getStyle().getImpl().selectClusterInteraction.getLayer()),r=r||t===n}})}return r}},{key:"addCursorPointer",value:function(){var t=this.map_.getMapImpl().getViewport();"pointer"!==t.style.cursor&&(this.defaultCursor_=t.style.cursor),t.style.cursor="pointer"}},{key:"removeCursorPointer",value:function(){this.map_.getMapImpl().getViewport().style.cursor=this.defaultCursor_}},{key:"destroy",value:function(){this.map_.un("click",this.onMapClick_,this),this.map_=null}}])&&aR(e.prototype,r),n&&aR(e,n),t}();function uR(t){return(uR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cR(t){return function(t){if(Array.isArray(t))return hR(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return hR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hR(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dR(t,e){return(dR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mR(t);if(e){var i=mR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yR(this,r)}}function yR(t,e){return!e||"object"!==uR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mR(t){return(mR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dR(t,e)}(o,t);var e,r,n,i=gR(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lR(e);return fR(this,o),(t=i.call(this,r)).map_=null,t.layers_=[],t.activated_=!1,t.prevSelectedFeatures_={},t.prevHoverFeatures_={},vD(r.addTo)||_l(uu("exception").addto_method),vD(r.getFeaturesByLayer)||_l(uu("exception").getfeaturesbylayer_method),t}return e=o,(r=[{key:"addTo",value:function(t){this.map_=t,this.map_.on(ru,this.moveOverMap_.bind(this)),this.map_.on(eu,this.clickOnMap_.bind(this)),this.getImpl().addTo(this.map_),this.fire(Cl)}},{key:"clickOnMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.map_.removePopup(),this.layers_.forEach((function(n){var i=r.getFeaturesByLayer(t,n),o=cR(e.prevSelectedFeatures_[n.name]);if(0===i.length&&o.length>0)e.unselectFeatures(o,n,t);else if(i.length>0){var a=i.filter((function(t){return!o.some((function(e){return e.equals(t)}))})),s=o.filter((function(t){return!i.some((function(e){return e.equals(t)}))}));s.length>0&&e.unselectFeatures(s,n,t),a.length>0&&e.selectFeatures(a,n,t)}}))}}},{key:"moveOverMap_",value:function(t){var e=this;if(!0===this.activated_){var r=this.getImpl();this.layers_.forEach((function(n){var i=r.getFeaturesByLayer(t,n),o=cR(e.prevHoverFeatures_[n.name]);if(0===i.length&&o.length>0)e.leaveFeatures_(o,n,t);else if(i.length>0){var a=i.filter((function(t){return(t instanceof mG||t instanceof rR)&&!o.some((function(e){return e.equals(t)}))})),s=o.filter((function(t){return!i.some((function(e){return e.equals(t)}))}));s.length>0&&e.leaveFeatures_(s,n,t),a.length>0&&e.hoverFeatures_(a,n,t)}}))}}},{key:"selectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].concat(t);var n=e.getImpl();vD(n.selectFeatures)&&n.selectFeatures(t,r.coord,r),e.fire(Vl,[t,r])}},{key:"unselectFeatures",value:function(t,e,r){this.prevSelectedFeatures_[e.name]=this.prevSelectedFeatures_[e.name].filter((function(e){return!t.some((function(t){return t.equals(e)}))}));var n=e.getImpl();vD(n.unselectFeatures)&&n.unselectFeatures(t,r.coord),e.fire(ql,[t,r.coord])}},{key:"hoverFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].concat(t),e.fire(Yl,[t,r]),this.getImpl().addCursorPointer()}},{key:"leaveFeatures_",value:function(t,e,r){this.prevHoverFeatures_[e.name]=this.prevHoverFeatures_[e.name].filter((function(e){return!t.some((function(t){return t.equals(e)}))})),e.fire(Wl,[t,r.coord]),this.getImpl().removeCursorPointer()}},{key:"activate",value:function(){!1===this.activated_&&(this.activated_=!0,this.fire(Dl))}},{key:"deactivate",value:function(){!0===this.activated_&&(this.activated_=!1,this.fire(Gl))}},{key:"addLayer",value:function(t){DD(this.layers_,t)||(this.layers_.push(t),this.prevSelectedFeatures_[t.name]=[],this.prevHoverFeatures_[t.name]=[])}},{key:"removeLayer",value:function(t){this.layers_=this.layers_.filter((function(e){return!e.equals(t)})),this.prevSelectedFeatures_[t.name]=null,this.prevHoverFeatures_[t.name]=null,delete this.prevSelectedFeatures_[t.name],delete this.prevHoverFeatures_[t.name]}},{key:"destroy",value:function(){}},{key:"clearSelectedFeatures",value:function(){var t=this;Object.keys(this.prevSelectedFeatures_).forEach((function(e){t.prevSelectedFeatures_[e]=[]}))}},{key:"clearHoverFeatures",value:function(){var t=this;Object.keys(this.prevHoverFeatures_).forEach((function(e){t.prevHoverFeatures_[e]=[]}))}}])&&pR(e.prototype,r),n&&pR(e,n),o}(Il),vR=r(115),bR=r.n(vR);function xR(t){return(xR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ER(t,e){return(ER=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function OR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=IR(t);if(e){var i=IR(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return SR(this,r)}}function SR(t,e){return!e||"object"!==xR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function IR(t){return(IR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ER(t,e)}(o,t);var e,r,n,i=OR(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.url_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then((function(e){t(e)}))}}},{key:"loadInternal_",value:function(t){var e=this;return new Promise((function(t,r){uD(e.url_).then((function(r){var n=e.map_.getProjection().code;if(_D(r.text))_l(uu("exception").no_kml_response);else{var i=e.format_.readCustomFeatures(r.text,{featureProjection:n}),o=e.format_.getScreenOverlay(),a=i.map((function(t){var e=new mG(t.getId(),{geometry:{coordinates:t.getGeometry().getCoordinates(),type:t.getGeometry().getType()},properties:t.getProperties()});return e.getImpl().getOLFeature().setStyle(t.getStyle()),e}));t({features:a,screenOverlay:o})}}))}))}}])&&wR(e.prototype,r),n&&wR(e,n),o}(il);function TR(t){return(TR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var PR,RR,LR,MR,NR,AR,kR=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jR=["http://www.google.com/kml/ext/2.2"],FR=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],DR={fraction:Wg,pixels:Xg,insetPixels:Xg},GR=T(FR,{ExtendedData:jL,Region:FL,MultiGeometry:w(CL,"geometry"),LineString:w(OL,"geometry"),LinearRing:w(SL,"geometry"),Point:w(TL,"geometry"),Polygon:w(RL,"geometry"),Style:w(ML),StyleMap:function(t,e){var r=cL.call(this,t,e);if(!r)return;var n=e[e.length-1];Array.isArray(r)?n.Style=r:"string"==typeof r?n.styleUrl=r:Object(Ui.a)(!1,38)},address:w(X),description:w(X),name:w(X),open:w(U),phoneNumber:w(X),styleUrl:w(sL),visibility:w(U)},T(jR,{MultiTrack:w((function(t,e){var r=R([],mL,t,e);if(!r)return;return new eh(r)}),"geometry"),Track:w(vL,"geometry")})),UR=T(FR,{ExtendedData:jL,Region:FL,Link:function(t,e){P(BR,t,e)},address:w(X),description:w(X),name:w(X),open:w(U),phoneNumber:w(X),visibility:w(U)}),BR=T(FR,{href:w(aL)}),zR=T(FR,{LatLonAltBox:function(t,e){var r=R({},UL,t,e);if(!r)return;var n=e[e.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(t,e){var r=R({},BL,t,e);if(!r)return;var n=e[e.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),VR=T(FR,["Document","Placemark"]),qR=T(FR,{Document:E((function(t,e,r){N({node:t},WL,XL,e,r,void 0,this)})),Placemark:E(mM)}),YR=null;var WR,XR=null;var HR,ZR=null;var KR=null;var JR=null;var $R,QR=null;function tL(t){return 32/Math.min(t[0],t[1])}function eL(t){return t}var rL=function(t){function e(e){var r=t.call(this)||this,n=e||{};return QR||(YR=new zg({color:PR=[255,255,255,1]}),AR="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",XR=new iy({anchor:RR=[20,2],anchorOrigin:Hg,anchorXUnits:LR=Xg,anchorYUnits:MR=Xg,crossOrigin:"anonymous",rotation:0,scale:tL(NR=[64,64]),size:NR,src:AR}),WR="NO_IMAGE",ZR=new Bg({color:PR,width:1}),HR=new Bg({color:[51,51,51,1],width:2}),KR=new Yg({font:"bold 16px Helvetica",fill:YR,stroke:HR,scale:.8}),JR=new $y({fill:YR,image:XR,text:KR,stroke:ZR,zIndex:0}),QR=[JR]),r.dataProjection=Object(u.o)("EPSG:4326"),r.defaultStyle_=n.defaultStyle?n.defaultStyle:QR,r.extractStyles_=void 0===n.extractStyles||n.extractStyles,r.writeStyles_=void 0===n.writeStyles||n.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===n.showPointNames||n.showPointNames,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r.iconUrlFunction_=n.iconUrlFunction?n.iconUrlFunction:eL,r.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],r}return kR(e,t),e.prototype.readDocumentOrFolder_=function(t,e){var r=R([],T(FR,{Document:_(this.readDocumentOrFolder_,this),Folder:_(this.readDocumentOrFolder_,this),Placemark:v(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);return r||void 0},e.prototype.readPlacemark_=function(t,e){var r=R({geometry:null},GR,t,e,this);if(r){var n=new Wc,i=t.getAttribute("id");null!==i&&n.setId(i);var o=e[0],a=r.geometry;if(a&&LI(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){var s=function(t,e,r,n,i){return function(o,a){var s=i,l="",u=[];if(s){var c=o.getGeometry();if(c)if(c instanceof hh)s=(u=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===fo.a.POINT||e===fo.a.MULTI_POINT}))).length>0;else{var h=c.getType();s=h===fo.a.POINT||h===fo.a.MULTI_POINT}}s&&(l=o.get("name"),(s=s&&!!l)&&l.search(/&[^&]+;/)>-1&&($R||($R=document.createElement("textarea")),$R.innerHTML=l,l=$R.value));var f=r;if(t?f=t:e&&(f=nL(e,r,n)),s){var p=function(t,e){var r=[0,0],n="start",i=t.getImage();if(i){var o=i.getSize();if(o&&2==o.length){var a=i.getScaleArray(),s=i.getAnchor();r[0]=a[0]*(o[0]-s[0]),r[1]=a[1]*(o[1]/2-s[1]),n="left"}}var l=t.getText();l?((l=l.clone()).setFont(l.getFont()||KR.getFont()),l.setScale(l.getScale()||KR.getScale()),l.setFill(l.getFill()||KR.getFill()),l.setStroke(l.getStroke()||HR)):l=KR.clone();return l.setText(e),l.setOffsetX(r[0]),l.setOffsetY(r[1]),l.setTextAlign(n),new $y({image:i,text:l})}(f[0],l);return u.length>0?(p.setGeometry(new hh(u)),[p,new $y({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null})].concat(f.slice(1))):p}return f}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(s)}return delete r.Style,n.setProperties(r,!0),n}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=ML.call(this,t,e);if(n){var i=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=cL.call(this,t,e);if(n){var i,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)i=new URL("#"+r,o).href;else i="#"+r;this.sharedStyles_[i]=n}}},e.prototype.readFeatureFromNode=function(t,e){if(!Object(h.f)(FR,t.namespaceURI))return null;var r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){if(!Object(h.f)(FR,t.namespaceURI))return[];var r,n=t.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&Object(h.c)(r,a)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=m(t);return this.readNameFromDocument(e)}return y(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(Object(h.f)(FR,e.namespaceURI)&&"name"==e.localName)return X(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var r=e.localName;if(Object(h.f)(FR,e.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=m(t);Object(h.c)(e,this.readNetworkLinksFromDocument(r))}else y(t)?Object(h.c)(e,this.readNetworkLinksFromDocument(t)):Object(h.c)(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Object(h.c)(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(Object(h.f)(FR,r.namespaceURI)&&"NetworkLink"==r.localName){var n=R({},UR,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!Object(h.f)(FR,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Object(h.c)(e,this.readNetworkLinksFromNode(r))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=m(t);Object(h.c)(e,this.readRegionFromDocument(r))}else y(t)?Object(h.c)(e,this.readRegionFromDocument(t)):Object(h.c)(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Object(h.c)(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(Object(h.f)(FR,r.namespaceURI)&&"Region"==r.localName){var n=R({},zR,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!Object(h.f)(FR,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Object(h.c)(e,this.readRegionFromNode(r))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=p(FR[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",jR[0]),r.setAttributeNS(n,"xmlns:xsi",f),r.setAttributeNS(f,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=VR[r.namespaceURI],s=C(o,a);return N(i,qR,I,s,[e],a,this),r},e}(AI);function nL(t,e,r){return Array.isArray(t)?t:"string"==typeof t?nL(r[t],e,r):e}function iL(t){var e=d(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function oL(t){var e=d(t,!1),r=[];e=e.replace(/\s*,\s*/g,",");for(var n,i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;n=i.exec(e);){var o=parseFloat(n[1]),a=parseFloat(n[2]),s=n[3]?parseFloat(n[3]):0;r.push(o,a,s),e=e.substr(n[0].length)}if(""===e)return r}function aL(t){var e=d(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function sL(t){var e=d(t,!1).trim().replace(/^(?!.*#)/,"#"),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function lL(t){return V(t)}var uL=T(FR,{Pair:function(t,e){var r=R({},DL,t,e,this);if(!r)return;var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(e[e.length-1]=i);var o=r.Style;o&&(e[e.length-1]=o)}}});function cL(t,e){return R(void 0,uL,t,e,this)}var hL=T(FR,{Icon:w((function(t,e){var r=R({},bL,t,e);return r||null})),color:w(iL),heading:w(V),hotSpot:w((function(t){var e,r=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==n?Hg:Kg:"insetPixels"!==n?Zg:Jg,{x:parseFloat(t.getAttribute("x")),xunits:DR[r],y:parseFloat(t.getAttribute("y")),yunits:DR[n],origin:e}})),scale:w(lL)});var fL=T(FR,{color:w(iL),scale:w(lL)});var pL=T(FR,{color:w(iL),width:w(V)});var dL=T(FR,{color:w(iL),fill:w(U),outline:w(U)});var gL=T(FR,{coordinates:b(oL)});function yL(t,e){return R(null,gL,t,e)}var mL=T(jR,{Track:v(vL)});var _L=T(FR,{when:function(t,e){var r=e[e.length-1].whens,n=d(t,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},T(jR,{coord:function(t,e){var r=e[e.length-1].coordinates,n=d(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push([o,a,s])}else r.push([])}}));function vL(t,e){var r=R({coordinates:[],whens:[]},_L,t,e);if(r){for(var n=[],i=r.coordinates,o=r.whens,a=0,s=Math.min(i.length,o.length);a<s;++a)3==i[a].length&&n.push(i[a][0],i[a][1],i[a][2],o[a]);return new Qc(n,Po)}}var bL=T(FR,{href:w(aL)},T(jR,{x:w(V),y:w(V),w:w(V),h:w(V)}));var xL=T(FR,{coordinates:b(oL)});function wL(t,e){return R(null,xL,t,e)}var EL=T(FR,{extrude:w(U),tessellate:w(U),altitudeMode:w(X)});function OL(t,e){var r=R({},EL,t,e),n=wL(t,e);if(n){var i=new Qc(n,Co);return i.setProperties(r,!0),i}}function SL(t,e){var r=R({},EL,t,e),n=wL(t,e);if(n){var i=new Oa(n,Co,[n.length]);return i.setProperties(r,!0),i}}var IL=T(FR,{LineString:v(OL),LinearRing:v(SL),MultiGeometry:v(CL),Point:v(TL),Polygon:v(RL)});function CL(t,e){var r,n=R([],IL,t,e);if(!n)return null;if(0===n.length)return new hh(n);for(var i,o=!0,a=n[0].getType(),s=1,l=n.length;s<l;++s)if((i=n[s]).getType()!=a){o=!1;break}if(o){var u=void 0,c=void 0;if(a==fo.a.POINT){var f=n[0];u=f.getLayout(),c=f.getFlatCoordinates();for(s=1,l=n.length;s<l;++s)i=n[s],Object(h.c)(c,i.getFlatCoordinates());NL(r=new Hc(c,u),n)}else a==fo.a.LINE_STRING?NL(r=new eh(n),n):a==fo.a.POLYGON?NL(r=new ih(n),n):a==fo.a.GEOMETRY_COLLECTION?r=new hh(n):Object(Ui.a)(!1,37)}else r=new hh(n);return r}function TL(t,e){var r=R({},EL,t,e),n=wL(t,e);if(n){var i=new aa(n,Co);return i.setProperties(r,!0),i}}var PL=T(FR,{innerBoundaryIs:function(t,e){var r=R([],zL,t,e);if(r.length>0){var n=e[e.length-1];n.push.apply(n,r)}},outerBoundaryIs:function(t,e){var r=R(void 0,VL,t,e);if(r){e[e.length-1][0]=r}}});function RL(t,e){var r=R({},EL,t,e),n=R([null],PL,t,e);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)Object(h.c)(i,n[a]),o.push(i.length);var l=new Oa(i,Co,o);return l.setProperties(r,!0),l}}var LL=T(FR,{IconStyle:function(t,e){var r=R({},hL,t,e);if(r){var n,i,o,a,s=e[e.length-1],l="Icon"in r?r.Icon:{},u=!("Icon"in r)||Object.keys(l).length>0,c=l.href;c?n=c:u&&(n=AR);var h,f=Hg,p=r.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,f=p.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(/pushpin/.test(n)?(i=RR,o=LR,a=MR):/arrow-reverse/.test(n)?(i=[54,42],o=LR,a=MR):/paddle/.test(n)&&(i=[32,1],o=LR,a=MR));var d,g=l.x,y=l.y;void 0!==g&&void 0!==y&&(h=[g,y]);var m,_=l.w,v=l.h;void 0!==_&&void 0!==v&&(d=[_,v]);var b=r.heading;void 0!==b&&(m=Object(mo.m)(b));var x=r.scale,w=r.color;if(u){n==AR&&(d=NR);var E=new iy({anchor:i,anchorOrigin:f,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:h,offsetOrigin:Hg,rotation:m,scale:x,size:d,src:this.iconUrlFunction_(n),color:w}),O=E.getScaleArray()[0],S=E.getSize();if(null===S){var I=E.getImageState();if(I===$g.a.IDLE||I===$g.a.LOADING){E.listenImageChange((function t(){var e=E.getImageState();if(e!==$g.a.IDLE&&e!==$g.a.LOADING){var r=E.getSize();if(r&&2==r.length){var n=tL(r);E.setScale(O*n)}E.unlistenImageChange(t)}})),I===$g.a.IDLE&&E.load()}}else if(2==S.length){var C=tL(S);E.setScale(O*C)}s.imageStyle=E}else s.imageStyle=WR}},LabelStyle:function(t,e){var r=R({},fL,t,e);if(r){var n=e[e.length-1],i=new Yg({fill:new zg({color:"color"in r?r.color:PR}),scale:r.scale});n.textStyle=i}},LineStyle:function(t,e){var r=R({},pL,t,e);if(r){var n=e[e.length-1],i=new Bg({color:"color"in r?r.color:PR,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(t,e){var r=R({},dL,t,e);if(r){var n=e[e.length-1],i=new zg({color:"color"in r?r.color:PR});n.fillStyle=i;var o=r.fill;void 0!==o&&(n.fill=o);var a=r.outline;void 0!==a&&(n.outline=a)}}});function ML(t,e){var r=R({},LL,t,e,this);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:YR,o=r.fill;void 0===o||o||(i=null),"imageStyle"in r?r.imageStyle!=WR&&(n=r.imageStyle):n=XR;var a="textStyle"in r?r.textStyle:KR,s="strokeStyle"in r?r.strokeStyle:ZR,l=r.outline;return void 0===l||l?[new $y({fill:i,image:n,stroke:s,text:a,zIndex:void 0})]:[new $y({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===fo.a.GEOMETRY_COLLECTION?new hh(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==fo.a.POLYGON&&e!==fo.a.MULTI_POLYGON}))):r!==fo.a.POLYGON&&r!==fo.a.MULTI_POLYGON?e:void 0},fill:i,image:n,stroke:s,text:a,zIndex:void 0}),new $y({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===fo.a.GEOMETRY_COLLECTION?new hh(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===fo.a.POLYGON||e===fo.a.MULTI_POLYGON}))):r===fo.a.POLYGON||r===fo.a.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function NL(t,e){var r,n,i,o=e.length,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length);r=!1,n=!1,i=!1;for(var u=0;u<o;++u){var c=e[u];a[u]=c.get("extrude"),s[u]=c.get("tessellate"),l[u]=c.get("altitudeMode"),r=r||void 0!==a[u],n=n||void 0!==s[u],i=i||l[u]}r&&t.set("extrude",a),n&&t.set("tessellate",s),i&&t.set("altitudeMode",l)}var AL=T(FR,{displayName:w(X),value:w(X)});var kL=T(FR,{Data:function(t,e){var r=t.getAttribute("name");P(AL,t,e);var n=e[e.length-1];r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){P(GL,t,e)}});function jL(t,e){P(kL,t,e)}function FL(t,e){P(zR,t,e)}var DL=T(FR,{Style:w(ML),key:w(X),styleUrl:w(sL)});var GL=T(FR,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var n=X(t);e[e.length-1][r]=n}}});var UL=T(FR,{altitudeMode:w(X),minAltitude:w(V),maxAltitude:w(V),north:w(V),south:w(V),east:w(V),west:w(V)});var BL=T(FR,{minLodPixels:w(V),maxLodPixels:w(V),minFadeExtent:w(V),maxFadeExtent:w(V)});var zL=T(FR,{LinearRing:v(yL)});var VL=T(FR,{LinearRing:b(yL)});function qL(t,e){for(var r=Object(Bn.a)(e),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}J(t,n.join(""))}var YL=T(FR,{Data:E((function(t,e,r){t.setAttribute("name",e.name);var n={node:t},i=e.value;"object"==TR(i)?(null!==i&&i.displayName&&N(n,YL,I,[i.displayName],r,["displayName"]),null!==i&&i.value&&N(n,YL,I,[i.value],r,["value"])):N(n,YL,I,[i],r,["value"])})),value:E((function(t,e){J(t,e)})),displayName:E((function(t,e){!function(t,e){t.appendChild(j().createCDATASection(e))}(t,e)}))});var WL=T(FR,{Placemark:E(mM)}),XL=function(t,e,r){return p(e[e.length-1].node.namespaceURI,"Placemark")};var HL=S("Data");var ZL=T(FR,["href"],T(jR,["x","y","w","h"])),KL=T(FR,{href:E(J)},T(jR,{x:E(Z),y:E(Z),w:E(Z),h:E(Z)})),JL=function(t,e,r){return p(jR[0],"gx:"+r)};var $L=T(FR,["scale","heading","Icon","color","hotSpot"]),QL=T(FR,{Icon:E((function(t,e,r){var n={node:t},i=r[r.length-1].node,o=ZL[i.namespaceURI],a=C(e,o);N(n,KL,I,a,r,o),a=C(e,o=ZL[jR[0]]),N(n,KL,JL,a,r,o)})),color:E(qL),heading:E(Z),hotSpot:E((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:E(CM)});var tM=T(FR,["color","scale"]),eM=T(FR,{color:E(qL),scale:E(CM)});var rM=T(FR,["color","width"]),nM=T(FR,{color:E(qL),width:E(Z)});var iM={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},oM=function(t,e,r){if(t)return p(e[e.length-1].node.namespaceURI,iM[t.getType()])},aM=S("Point"),sM=S("LineString"),lM=S("LinearRing"),uM=S("Polygon"),cM=T(FR,{LineString:E(bM),Point:E(bM),Polygon:E(SM),GeometryCollection:E(hM)});function hM(t,e,r){var n,i={node:t},o=e.getType(),a=[];o===fo.a.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===fo.a.MULTI_POINT?a=a.concat(t.getPoints()):e===fo.a.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===fo.a.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===fo.a.POINT||e===fo.a.LINE_STRING||e===fo.a.POLYGON?a.push(t):Object(Ui.a)(!1,39)})),n=oM):o===fo.a.MULTI_POINT?(a=e.getPoints(),n=aM):o===fo.a.MULTI_LINE_STRING?(a=e.getLineStrings(),n=sM):o===fo.a.MULTI_POLYGON?(a=e.getPolygons(),n=uM):Object(Ui.a)(!1,39),N(i,cM,n,a,r)}var fM=T(FR,{LinearRing:E(bM)});function pM(t,e,r){N({node:t},fM,lM,[e],r)}var dM=T(FR,{ExtendedData:E((function(t,e,r){for(var n={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)N(n,YL,HL,[{name:i[s],value:o[s]}],r)})),MultiGeometry:E(hM),LineString:E(bM),LinearRing:E(bM),Point:E(bM),Polygon:E(SM),Style:E((function(t,e,r){var n={node:t},i={};if(e.pointStyles.length){var o=e.pointStyles[0].getText();o&&(i.LabelStyle=o);var a=e.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(i.IconStyle=a)}if(e.lineStyles.length){(s=e.lineStyles[0].getStroke())&&(i.LineStyle=s)}if(e.polyStyles.length){var s;(s=e.polyStyles[0].getStroke())&&!i.LineStyle&&(i.LineStyle=s),i.PolyStyle=e.polyStyles[0]}var l=r[r.length-1].node,u=TM[l.namespaceURI],c=C(i,u);N(n,PM,I,c,r,u)})),address:E(J),description:E(J),name:E(J),open:E(H),phoneNumber:E(J),styleUrl:E(J),visibility:E(H)}),gM=T(FR,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),yM=S("ExtendedData");function mM(t,e,r){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),s=e.getStyleFunction();if(s){var l=s(e,0);if(l){var u=Array.isArray(l)?l:[l],c=u;if(e.getGeometry()&&(c=u.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===fo.a.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===fo.a.POINT||e===fo.a.MULTI_POINT})).length:n===fo.a.POINT||n===fo.a.MULTI_POINT}}))),this.writeStyles_){var h=u,f=u;e.getGeometry()&&(h=u.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===fo.a.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===fo.a.LINE_STRING||e===fo.a.MULTI_LINE_STRING})).length:n===fo.a.LINE_STRING||n===fo.a.MULTI_LINE_STRING}})),f=u.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===fo.a.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===fo.a.POLYGON||e===fo.a.MULTI_POLYGON})).length:n===fo.a.POLYGON||n===fo.a.MULTI_POLYGON}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:f}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=r[r.length-1].node,g=gM[d.namespaceURI],y=C(i,g);if(N(n,dM,I,y,r,g),a.length>0){var m=C(i,a);N(n,dM,yM,[{names:a,values:m}],r)}var _=r[0],v=e.getGeometry();v&&(v=LI(v,!0,_)),N(n,dM,oM,[v],r)}var _M=T(FR,["extrude","tessellate","altitudeMode","coordinates"]),vM=T(FR,{extrude:E(H),tessellate:E(H),altitudeMode:E(J),coordinates:E((function(t,e,r){var n,i=r[r.length-1],o=i.layout,a=i.stride;o==Io||o==To?n=2:o==Co||o==Po?n=3:Object(Ui.a)(!1,34);var s=e.length,l="";if(s>0){l+=e[0];for(var u=1;u<n;++u)l+=","+e[u];for(var c=a;c<s;c+=a){l+=" "+e[c];for(u=1;u<n;++u)l+=","+e[c+u]}}J(t,l)}))});function bM(t,e,r){var n=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=_M[a.namespaceURI],l=C(o,s);N(i,vM,I,l,r,s)}var xM=T(FR,["color","fill","outline"]),wM=T(FR,{outerBoundaryIs:E(pM),innerBoundaryIs:E(pM)}),EM=S("innerBoundaryIs"),OM=S("outerBoundaryIs");function SM(t,e,r){var n=e.getLinearRings(),i=n.shift(),o={node:t};N(o,wM,EM,n,r),N(o,wM,OM,[i],r)}var IM=T(FR,{color:E(qL),fill:E(H),outline:E(H)});function CM(t,e){Z(t,Math.round(1e6*e)/1e6)}var TM=T(FR,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),PM=T(FR,{IconStyle:E((function(t,e,r){var n={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(l.x=c[0],l.y=s[1]-(c[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var h={x:u[0],xunits:Xg,y:a[1]-u[1],yunits:Xg};i.hotSpot=h}}i.Icon=l;var f=e.getScaleArray()[0],p=a;null===p&&(p=NR),2==p.length&&(f/=tL(p)),1!==f&&(i.scale=f);var d=e.getRotation();0!==d&&(i.heading=d);var g=e.getColor();g&&(i.color=g);var y=r[r.length-1].node,m=$L[y.namespaceURI],_=C(i,m);N(n,QL,I,_,r,m)})),LabelStyle:E((function(t,e,r){var n={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,l=tM[s.namespaceURI],u=C(i,l);N(n,eM,I,u,r,l)})),LineStyle:E((function(t,e,r){var n={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=r[r.length-1].node,a=rM[o.namespaceURI],s=C(i,a);N(n,nM,I,s,r,a)})),PolyStyle:E((function(t,e,r){var n={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,l=xM[s.namespaceURI],u=C(a,l);N(n,IM,I,u,r,l)}))});var RM=rL;function LM(t){return(LM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AM(t,e){return(AM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=FM(t);if(e){var i=FM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jM(this,r)}}function jM(t,e){return!e||"object"!==LM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function FM(t){return(FM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AM(t,e)}(o,t);var e,r,n,i=kM(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return MM(this,o),(t=i.call(this)).screenOverlay_=null,t.label_=void 0===e.label||e.label,t}return e=o,(r=[{key:"readCustomFeatures",value:function(t,e){var r=this,n=this.readFeatures(t,e).map((function(t){var e=t.getStyle()(t);if(!1===r.label_){var n=[e[0]];t.setStyle(n)}return Array.isArray(e)||(e=[e]),e.forEach((function(t){if(t.getImage()instanceof iy){var e=t.getImage();t.setImage(e)}})),t.set("name",qD(t.get("name"))),t}));return this.readScreenOverlay(t),n}},{key:"readScreenOverlay",value:function(t){var e="xunits",r="yunits",n=m(t).querySelector("ScreenOverlay");if(null!==n){var i,a,s,l,u,c,h=n.querySelector("Icon"),f=null!==h?h.querySelector("href").innerHTML:o.DEFAULT_NO_IMAGE_STYLE,p=n.querySelector("overlayXY");null!==p&&(i=[parseFloat(p.getAttribute("x")),parseFloat(p.getAttribute("y"))],a=p.getAttribute(e),s=p.getAttribute(r));var d,g,y,_=n.querySelector("screenXY");null!==_?(l=[parseFloat(_.getAttribute("x")),parseFloat(_.getAttribute("y"))],u=_.getAttribute(e),c=_.getAttribute(r)):f===o.DEFAULT_IMAGE_STYLE_SRC?(l=o.DEFAULT_IMAGE_STYLE_ANCHOR,u=o.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,c=o.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(f)&&(l=[.5,0],u=Wg,c=Wg);var v,b,x,w=n.querySelector("rotationXY");if(null!==w){var E=parseFloat(w.getAttribute("x"));d=Math.PI/180*E,g=w.getAttribute(e),y=w.getAttribute(r)}var O=n.querySelector("size");null!==O&&(v=[parseFloat(O.getAttribute("x")),parseFloat(O.getAttribute("y"))],b=O.getAttribute(e),x=O.getAttribute(r)),this.screenOverlay_={screenXY:l,screenXUnits:u,screenYUnits:c,overlayXY:i,overlayXUnits:a,overlayYUnits:s,rotationXY:d,rotationXUnits:g,rotationYUnits:y,size:v,sizeXUnits:b,sizeYUnits:x,src:f}}}},{key:"getScreenOverlay",value:function(){return this.screenOverlay_}}])&&NM(e.prototype,r),n&&NM(e,n),o}(RM);DM.DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DM.DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DM.DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DM.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DM.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels";var GM=DM;function UM(t){return(UM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zM(t,e){return(zM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function VM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=YM(t);if(e){var i=YM(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qM(this,r)}}function qM(t,e){return!e||"object"!==UM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function YM(t){return(YM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zM(t,e)}(o,t);var e,r,n,i=VM(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).popup_=null,r.tabPopup_=null,r.loadFeaturesPromise_=null,r.screenOverlayImg_=null,r.label_=t.label,r}return e=o,(r=[{key:"setVisible",value:function(t){if(this.visibility=t,_D(this.ol3Layer)||this.ol3Layer.setVisible(t),!_D(this.screenOverlayImg_)){var e="none";!0===t&&(e="inherit"),this.screenOverlayImg_.style[e]=e}}},{key:"addTo",value:function(t){this.map=t,this.fire(Cl),t.on(Jl,this.setProjection_.bind(this),this),this.formater_=new GM({label:this.label_}),this.loader_=new CR(this.map,this.url,this.formater_),this.ol3Layer=new jv(GD({},this.vendorOptions_,!0)),this.updateSource_(),!1!==this.options.visibility&&this.setVisible(this.inRange()),null!==this.zIndex_&&this.setZIndex(this.zIndex_),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t,e,r){var n=t[0];if(!(n instanceof EG)&&!0===this.extract){var i=n.getAttribute("name"),o=n.getAttribute("description"),a=n.getImpl().getOLFeature().getGeometry().getFirstCoordinate(),s=bu(bR.a,{vars:{name:i,desc:o},parseToHtml:!1});this.tabPopup_={icon:"g-cartografia-comentarios",title:i,content:s};var l=this.map.getPopup();_D(l)?(this.popup_=new Ox,this.popup_.addTab(this.tabPopup_),this.map.addPopup(this.popup_,a)):l.addTab(this.tabPopup_)}}},{key:"unselectFeatures",value:function(){_D(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"updateSource_",value:function(){var t=this;_D(this.vendorOptions_.source)&&this.requestFeatures_().then((function(e){t.ol3Layer.setSource(new Tg({loader:function(){var r=e.screenOverlay;if(t.facadeVector_.clear(),t.facadeVector_.addFeatures(e.features),t.fire(Xl,[e.features]),!_D(r)){var n=wh.addOverlayImage(r,t.map);t.setScreenOverlayImg(n)}}})),t.facadeVector_.addFeatures(e.features)}))}},{key:"setScreenOverlayImg",value:function(t){this.screenOverlayImg_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();_D(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.removePopup(),this.options=null,this.map=null}},{key:"removePopup",value:function(){_D(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=wh.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=wh.getFeaturesExtent(t.features,i);n(e)}))}))}},{key:"requestFeatures_",value:function(){var t=this;return _D(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Object(u.o)(t.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&BM(e.prototype,r),n&&BM(e,n),o}(kx);function XM(t){return(XM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ZM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HM(Object(r),!0).forEach((function(e){KM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function KM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QM(t,e){return(QM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rN(t);if(e){var i=rN(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eN(this,r)}}function eN(t,e){return!e||"object"!==XM(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rN(t){return(rN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QM(t,e)}(o,t);var e,r,n,i=tN(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JM(this,o);var a=Ec(t,Mu),s=ZM(ZM({},r),{},{label:a.label}),l=new WM(s,n);return e=i.call(this,a,r,void 0,l),dD(WM)&&_l(uu("exception").kmllayer_method),_D(t)&&_l(uu("exception").no_param),e.extract=a.extract,e.options=r,e.label=a.label,e}return e=o,(r=[{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}},{key:"type",get:function(){return Mu},set:function(t){dD(t)||_D(t)||t===Mu||_l("El tipo de capa debe ser '".concat(Mu).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(t){_D(t)?this.getImpl().extract=!0:xD(t)?this.getImpl().extract="true"===OD(t):this.getImpl().extract=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&$M(e.prototype,r),n&&$M(e,n),o}(Dw),iN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function oN(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var aN=function(t){function e(){return t.call(this)||this}return iN(e,t),e.prototype.getType=function(){return bg},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(oN(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(oN(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(Gn.b)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(Gn.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(oN(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(Gn.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(oN(t))},e.prototype.readProjectionFromObject=function(t){return Object(Gn.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(Gn.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(Gn.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(Gn.b)()},e}(RI),sN=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function lN(t,e){if(!t)return null;var r;switch(t.type){case fo.a.POINT:r=function(t){return new aa(t.coordinates)}(t);break;case fo.a.LINE_STRING:r=function(t){return new Qc(t.coordinates)}(t);break;case fo.a.POLYGON:r=function(t){return new Oa(t.coordinates)}(t);break;case fo.a.MULTI_POINT:r=function(t){return new Hc(t.coordinates)}(t);break;case fo.a.MULTI_LINE_STRING:r=function(t){return new eh(t.coordinates)}(t);break;case fo.a.MULTI_POLYGON:r=function(t){return new ih(t.coordinates)}(t);break;case fo.a.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map((function(t){return lN(t,e)}));return new hh(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return LI(r,!1,e)}function uN(t,e){var r,n=(t=LI(t,!0,e)).getType();switch(n){case fo.a.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case fo.a.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case fo.a.POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case fo.a.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case fo.a.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case fo.a.MULTI_POLYGON:r=function(t,e){var r;e&&(r=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case fo.a.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var r=Object(ii.a)({},e);return delete r.featureProjection,uN(t,r)}))}}(t,e);break;case fo.a.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}var cN=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).dataProjection=Object(u.o)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(r.defaultFeatureProjection=Object(u.o)(n.featureProjection)),r.geometryName_=n.geometryName,r.extractGeometryName_=n.extractGeometryName,r.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],r}return sN(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=null,n=lN((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new Wc;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(n),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return lN(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=Object(u.o)(r.properties.name):"EPSG"===r.type?e=Object(u.o)("EPSG:"+r.properties.code):Object(Ui.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(r.id=n),!t.hasProperties())return r;var i=t.getProperties(),o=t.getGeometry();return o&&(r.geometry=uN(o,e),delete i[t.getGeometryName()]),Object(ii.d)(i)||(r.properties=i),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return uN(t,this.adaptOptions(e))},e}(aN);function hN(t){return(hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dN(t,e,r){return(dN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_N(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function gN(t,e){return(gN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_N(t);if(e){var i=_N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mN(this,r)}}function mN(t,e){return!e||"object"!==hN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _N(t){return(_N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gN(t,e)}(o,t);var e,r,n,i=yN(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fN(this,o),i.call(this,t)}return e=o,n=[{key:"readProjectionFromObject",value:function(t){var e,r=t.crs;if(r)if("name"===r.type)e=Object(u.o)(r.properties.name);else{if("EPSG"!==r.type)throw e=null,new Error("Unknown crs.type: ".concat(r.type));e=Object(u.o)("EPSG:".concat(r.properties.code))}else e="EPSG:4326";return e}},{key:"applyIcon",value:function(t,e){var r,n=document.createElement("IMG");n.src=e.url,n.width=e.width,n.height=e.height,n.crossOrigin="anonymous",e.anchor&&e.anchor.x&&e.anchor.y&&(r=[e.anchor.x,e.anchor.y]),t.setStyle(new $y({image:new iy({img:n,imgSize:[e.width,e.height],anchor:r})}))}}],(r=[{key:"readFeatureFromObject",value:function(t,e){var r=t,n=dN(_N(o.prototype),"readFeatureFromObject",this).call(this,r,e);return this.geometryName_&&n.setGeometryName(this.geometryName_),_D(r.id)?n.setId(CD("geojson_")):n.setId(r.id),r.properties&&n.setProperties(r.properties),r.click&&(n.click=r.click),r.properties&&r.properties.vendor&&r.properties.vendor.mapea&&r.properties.vendor.mapea.icon&&o.applyIcon(n,r.properties.vendor.mapea.icon),n}},{key:"writeFeatureObject",value:function(t,e){var r=e,n={type:"Feature"},i=t.getId();i&&(n.id=i);var a=t.getGeometry();n.geometry=a?dN(_N(o.prototype),"writeGeometryObject",this).call(this,a,r):null;var s=t.getProperties();return delete s[t.getGeometryName()],_D(s)?n.properties=null:n.properties=s,_D(t.click)||(n.click=t.click),n}},{key:"write",value:function(t){var e=this;return t.map((function(t){return e.writeFeatureObject(t.getImpl().getOLFeature())}))}},{key:"read",value:function(t,e,r){var n=r.code;_D(n)&&(n=_D(r.featureProjection)?Object(u.o)(r.getCode()):Object(u.o)(r.featureProjection.getCode()));var i=o.readProjectionFromObject(t);return e.map((function(t){var e=t.id,r=new mG(e,t),o=r.getImpl().getOLFeature(),a=o.getGeometry().transform(i,n);return o.setGeometry(a),r}))}}])&&pN(e.prototype,r),n&&pN(e,n),o}(cN);function bN(t){return(bN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EN(t,e){return(EN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ON(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=IN(t);if(e){var i=IN(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return SN(this,r)}}function SN(t,e){return!e||"object"!==bN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function IN(t){return(IN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&EN(t,e)}(o,t);var e,r,n,i=ON(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xN(this,o);var r=new vN(e);return t=i.call(this,r),dD(vN)&&_l(uu("exception").geojson_method),t}return e=o,(r=[{key:"write",value:function(t){var e=t;return mD(e)||(e=[e]),this.getImpl().write(e)}},{key:"read",value:function(t,e){var r=t,n=[];if(!_D(r)){xD(r)&&(r=JSON.parse(r));var i=[];"FeatureCollection"===r.type?i=r.features:"Feature"===r.type&&(i=[r]),n=this.getImpl().read(r,i,e)}return n}}])&&wN(e.prototype,r),n&&wN(e,n),o}(Il);function TN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var RN=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};TN(this,t),this.rootPrefix=null,this.namespaces={ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema",ogc:"http://www.opengis.net/ogc",wmcext:"http://wmcext.org/context"},this.options=e}var e,r,n;return e=t,n=[{key:"getChildValue",value:function(t,e){var r=e||"";if(t)for(var n=t.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:r+=n.nodeValue}return r}}],(r=[{key:"read",value:function(t){var e=t;xD(t)&&(e=m(t)),9!==e.nodeType&&_l(uu("exception").must_be_document);var r={};return this.readRoot(r,e),r}},{key:"readRoot",value:function(t,e){var r=t,n=e.documentElement;this.rootPrefix=n.prefix,r.version=n.getAttribute("version"),this.runChildNodes(r,n)}},{key:"runChildNodes",value:function(t,e){for(var r,n,i,o,a=e.childNodes,s=0,l=a.length;s<l;s+=1)1===(r=a[s]).nodeType&&(i=this.getNamespacePrefix(r.namespaceURI),o=r.nodeName.split(":").pop(),(n=this["read".concat(i).concat(o)])&&n.apply(this,[t,r]))}},{key:"getNamespacePrefix",value:function(t){var e=null;if(null===t)e=this.namespaces[this.defaultPrefix];else for(var r=Object.keys(this.namespaces),n=0;n<r.length&&(e=r[n],this.namespaces[e]!==t);n+=1);return e}},{key:"getAttributeNS",value:function(t,e,r){var n="";if(t.getAttributeNS)n=t.getAttributeNS(e,r)||"";else{var i=this.getAttributeNodeNS(t,e,r);i&&(n=i.nodeValue)}return n}}])&&PN(e.prototype,r),n&&PN(e,n),t}();function LN(t){return(LN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NN(t,e){return(NN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function AN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jN(t);if(e){var i=jN(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kN(this,r)}}function kN(t,e){return!e||"object"!==LN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jN(t){return(jN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NN(t,e)}(o,t);var e,r,n,i=AN(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).featureTypeIdx_=0,e.readingFeatureType=!1,e.serviceException_=!1,e}return e=o,(r=[{key:"readRoot",value:function(t,e){var r=e.documentElement;if(/ServiceExceptionReport/i.test(r.localName))this.serviceException_=!0;else{this.rootPrefix=r.prefix;var n=t;n.elementFormDefault=r.getAttribute("elementFormDefault"),n.targetNamespace=r.getAttribute("targetNamespace"),n.targetPrefix=r.getAttribute("targetPrefix"),n.featureTypes=[]}this.runChildNodes(t,r)}},{key:"readogcServiceException",value:function(t,e){Ux("Error en el DescribeFeatureType: ".concat(e.textContent.trim()," "))}},{key:"readxsdschema",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdimport",value:function(t,e){}},{key:"readxsdcomplexType",value:function(t,e){this.readingFeatureType=!0,t.featureTypes.push({properties:[]}),this.runChildNodes(t,e),this.readingFeatureType=!1}},{key:"readxsdcomplexContent",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdextension",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdsequence",value:function(t,e){this.runChildNodes(t,e)}},{key:"readxsdelement",value:function(t,e){!0===this.readingFeatureType?t.featureTypes[this.featureTypeIdx_].properties.push({name:e.getAttribute("name"),maxOccurs:e.getAttribute("maxOccurs"),minOccurs:e.getAttribute("minOccurs"),nillable:e.getAttribute("nillable"),type:e.getAttribute("type"),localType:e.getAttribute("type").replace(/^\w+:/g,"")}):(t.featureTypes[this.featureTypeIdx_].typeName=e.getAttribute("name"),this.featureTypeIdx_+=1)}}])&&MN(e.prototype,r),n&&MN(e,n),o}(RN);function DN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var GN=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.typeName_=e,this.outputFormat_=r,this.projection_=n,this.gmlFormatter_=new FN({outputFormat:r,featureType:e,srsName:this.projection_.code})}var e,r,n;return e=t,(r=[{key:"read",value:function(t){var e,r=this,n={};if(/json/gi.test(this.outputFormat_))try{e=JSON.parse(t.text)}catch(t){throw t}return e||(e=this.gmlFormatter_.read(t.text)),n.featureNS=e.targetNamespace,n.featurePrefix=e.targetPrefix,e.featureTypes.some((function(t){return t.typeName===r.typeName_&&(n.properties=t.properties,n.properties.some((function(t){return VD(t.localType)&&(n.geometryName=t.name),VD(t.localType)}))),t.typeName===r.typeName_})),n}}])&&DN(e.prototype,r),n&&DN(e,n),t}();function UN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var BN=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url_=e.url,this.namespace_=e.namespace,this.name_=e.name,this.typeName_=this.name_,_D(this.namespace_)||(this.typeName_=this.namespace_.concat(":").concat(this.name_)),this.version_=e.version,this.ids_=e.ids,this.cql_=e.cql,this.projection_=e.projection,this.getFeatureOutputFormat_=e.getFeatureOutputFormat,_D(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=e.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},_D(r)||_D(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},_D(r)||_D(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var e,r,n;return e=t,(r=[{key:"getDescribeFeatureType",value:function(){var t={service:"WFS",version:this.version_,request:"DescribeFeatureType",typename:this.typeName_};_D(this.describeFeatureTypeOutputFormat_)||(t.outputFormat=this.describeFeatureTypeOutputFormat_);var e=ID(this.url_,t),r=ID(e,this.describeFeatureTypeVendor_),n=this.describeFeatureTypeOutputFormat_,i=new GN(this.name_,n,this.projection_);return new Promise((function(t,e){uD(r).then((function(e){t(i.read(e))}))}))}},{key:"getFeatureUrl",value:function(t,e){var r=this,n={service:"WFS",version:this.version_,request:"GetFeature",typename:this.typeName_,outputFormat:this.getFeatureOutputFormat_,srsname:e.getCode()};return _D(this.ids_)||(n.featureId=this.ids_.map((function(t){return r.name_.concat(".").concat(t)}))),_D(this.cql_)?_D(t)||(n.bbox="".concat(t.join(","),",").concat(e.getCode())):n.CQL_FILTER=this.cql_,ID(ID(this.url_,n),this.getFeatureVendor_)}}])&&UN(e.prototype,r),n&&UN(e,n),t}(),zN=XI;zN.prototype.writeFeatures,zN.prototype.writeFeaturesNode;var VN=zN;function qN(t){return(qN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WN(t,e){return(WN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function XN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ZN(t);if(e){var i=ZN(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return HN(this,r)}}function HN(t,e){return!e||"object"!==qN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ZN(t){return(ZN=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var KN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&WN(t,e)}(r,t);var e=XN(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return YN(this,r),e.call(this,t)}return r}(VN);function JN(t){return(JN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QN(t,e){return(QN=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rA(t);if(e){var i=rA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eA(this,r)}}function eA(t,e){return!e||"object"!==JN(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rA(t){return(rA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QN(t,e)}(o,t);var e,r,n,i=tA(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.service_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){var o=e.getRequestUrl_(r,i);e.loadInternal_(o,i).then(t.bind(e))}}},{key:"loadInternal_",value:function(t,e){var r=this,n=t;return new Promise((function(t,i){xD(M.config.ticket)&&(n=ID(n,{ticket:M.config.ticket})),uD(n).then((function(n){if(!_D(n.text)&&n.text.indexOf("ServiceExceptionReport")<0){var i=r.format_.read(n.text,e);t(i)}else 401===n.code?Ux(uu("dialog").unauthorized_user):n.text.indexOf("featureId and cql_filter")>=0?Ux(uu("dialog").only_one_filter):_l(uu("exception").no_getfeature_response)}))}))}},{key:"getRequestUrl_",value:function(t,e){return this.service_.getFeatureUrl(null,e)}}])&&$N(e.prototype,r),n&&$N(e,n),o}(il);function iA(t){return(iA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sA(t,e,r){return(sA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hA(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function lA(t,e){return(lA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hA(t);if(e){var i=hA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cA(this,r)}}function cA(t,e){return!e||"object"!==iA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hA(t){return(hA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lA(t,e)}(o,t);var e,r,n,i=uA(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return oA(this,o),(t=i.call(this,e,r)).describeFeatureType_=null,t.formater_=null,t.loader_=null,t.service_=null,t.loaded_=!1,_D(t.options.getFeatureOutputFormat)&&(t.options.getFeatureOutputFormat="application/json"),t}return e=o,(r=[{key:"addTo",value:function(t){var e=this;sA(hA(o.prototype),"addTo",this).call(this,t),t.getImpl().on(Zl,(function(){return e.refresh()}))}},{key:"refresh",value:function(t){t&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(t)}},{key:"updateSource_",value:function(t){var e=this;_D(this.vendorOptions_.source)&&(this.service_=new BN({url:this.url,namespace:this.namespace,name:this.name,version:this.version,ids:this.ids,cql:this.cql,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.options.vendor),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new CN({defaultDataProjection:Object(u.o)(this.map.getProjection().code)}):this.formater_=new KN(this.name,this.version,this.map.getProjection()),this.loader_=new nA(this.map,this.service_,this.formater_),this.requestFeatures_().then((function(r){var n=e.facadeVector_.getStyle()instanceof jb,i=null;if(_D(e.ol3Layer)||(i=e.ol3Layer.getSource()),!0===t||_D(i)){var o=new Tg({loader:function(){e.loaded_=!0,e.facadeVector_.addFeatures(r),e.fire(Xl,[r]),e.facadeVector_.redraw()}});if(n){var a=e.facadeVector_.getStyle().getOptions().distance,s=new Rg({distance:a,source:o});e.ol3Layer.setStyle(e.facadeVector_.getStyle().getImpl().olStyleFn),e.ol3Layer.setSource(s)}else e.ol3Layer&&e.ol3Layer.setSource(o)}else n&&(i=i.getSource()),i.set("format",e.formater_),i.set("loader",e.loader_.getLoaderFn((function(t){e.loaded_=!0,e.facadeVector_.addFeatures(t),e.fire(Xl,[t]),e.facadeVector_.redraw()}))),i.set("strategy",_g),n||i.changed()})))}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=wh.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=wh.getFeaturesExtent(t,i);n(e)}))}))}},{key:"setCQL",value:function(t){this.cql=t,this.refresh(!0)}},{key:"getDescribeFeatureType",value:function(){var t=this;return _D(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then((function(e){return _D(e)||(t.formater_=new vN({geometryName:e.geometryName,defaultDataProjection:Object(u.o)(t.map.getProjection().code)})),e}))),this.describeFeatureType_}},{key:"getDefaultValue",value:function(t){return"dateTime"===t?"0000-00-00T00:00:00":"date"===t?"0000-00-00":"time"===t?"00:00:00":"duration"===t?"P0Y":"int"===t||"number"===t||"float"===t||"double"===t||"decimal"===t||"short"===t||"byte"===t||"integer"===t||"long"===t||"negativeInteger"===t||"nonNegativeInteger"===t||"nonPositiveInteger"===t||"positiveInteger"===t||"unsignedLong"===t||"unsignedInt"===t||"unsignedShort"===t||"unsignedByte"===t?0:"hexBinary"===t?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var t=this;return new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Object(u.o)(t.map.getProjection().code))}))}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.namespace===t.namespace,e=e&&this.name===t.name,e=e&&this.ids===t.ids,e=e&&this.cql===t.cql,e=e&&this.version===t.version),e}}])&&aA(e.prototype,r),n&&aA(e,n),o}(kx),pA="POINT",dA="LINE",gA="POLYGON",yA="MPOINT",mA="MLINE",_A="MPOLYGON",vA=function(t){var e=OD(t,!0);return a[e]};function bA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bA(Object(r),!0).forEach((function(e){wA(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EA(t){return(EA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IA(t,e,r){return(IA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RA(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function CA(t,e){return(CA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function TA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=RA(t);if(e){var i=RA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PA(this,r)}}function PA(t,e){return!e||"object"!==EA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function RA(t){return(RA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CA(t,e)}(o,t);var e,r,n,i=TA(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new fA(r,n);OA(this,o);var s=Ec(t,Au);return e=i.call(this,s,r,void 0,a),dD(fA)&&_l(uu("exception").wfslayer_method),_D(t)&&_l(uu("exception").no_param),e.namespace=s.namespace,e.legend=s.legend,e.cql=s.cql,e.geometry=s.geometry,e.ids=s.ids,e.version=s.version,e.options=r,e.extract=s.extract,e}return e=o,(r=[{key:"setCQL",value:function(t){var e=this,r=t;this.getImpl().getDescribeFeatureType().then((function(t){if(!_D(r)){var n=t.geometryName;r=r.replace(/{{geometryName}}/g,n)}e.getImpl().cql!==r&&e.getImpl().setCQL(r)}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;IA(RA(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.namespace===t.namespace,e=e&&this.name===t.name,e=e&&this.ids===t.ids,e=e&&this.cql===t.cql,e=e&&this.version===t.version),e}},{key:"type",get:function(){return Au},set:function(t){dD(t)||_D(t)||t===Au||_l("El tipo de capa debe ser '".concat(Au).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"namespace",get:function(){return this.getImpl().namespace},set:function(t){this.getImpl().namespace=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){_D(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"cql",get:function(){return this.getImpl().cql},set:function(t){this.getImpl().cql=t}},{key:"geometry",get:function(){return this.getImpl().geometry},set:function(t){if(!_D(t)){var e=vA(t);_D(e)&&_l("El tipo de capa WFS <b>".concat(t,"</b> no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON, MPOINT, MLINE, MPOLYGON")),this.getImpl().geometry=e}}},{key:"ids",get:function(){return this.getImpl().ids},set:function(t){_D(t)?this.getImpl().ids=this.ids:this.getImpl().ids=t}},{key:"version",get:function(){return this.getImpl().version},set:function(t){_D(t)?this.getImpl().version="1.0.0":this.getImpl().version=t}}])&&SA(e.prototype,r),n&&SA(e,n),o}(Dw);LA.DEFAULT_PARAMS={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1}},LA.DEFAULT_OPTIONS_STYLE={point:xA(xA({},LA.DEFAULT_PARAMS),{},{radius:5}),line:xA({},LA.DEFAULT_PARAMS),polygon:xA({},LA.DEFAULT_PARAMS)};var MA=LA;function NA(t){return(NA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jA(t,e){return(jA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function FA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=GA(t);if(e){var i=GA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return DA(this,r)}}function DA(t,e){return!e||"object"!==NA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function GA(t){return(GA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jA(t,e)}(o,t);var e,r,n,i=FA(o);function o(){return AA(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"readsldMinScaleDenominator",value:function(t,e){t.options.minScale=parseFloat(RN.getChildValue(e))}},{key:"readolgroup",value:function(t,e){var r=t;if(mD(r)){var n=r[0],i=r[1],o=n.layerGroups,a=new Kd({id:e.getAttribute("id"),title:e.getAttribute("title"),order:e.getAttribute("orderInsideGroupDisplay")});_D(i)?o.push(a):i.addChild(a),this.runChildNodes([n,a],e)}else r.layerGroups=[],this.runChildNodes([r],e)}},{key:"readwmcLayer",value:function(t,e){var r=t,n={params:this.layerParams||{},options:{visibility:"1"!==e.getAttribute("hidden"),queryable:"1"===e.getAttribute("queryable")},formats:[],styles:[]};this.runChildNodes(n,e),n.params.isWMC="ok",n.params.layers=n.name,n.options.wmcMaxExtent=n.maxExtent,n.options.wmcGlobalMaxExtent=r.maxExtent;var i=this.getLayerFromInfo(n),o=n.options.groupDisplayLayerSwitcher,a=n.options.orderInsideGroupDisplayLayerSwitcher,s=r.layerGroups,l=Kd.findGroupById(o,s);if(null!=n.styles&&null!=n.styles[0]){var u=n.styles[0];if(null!=u.legend&&u.legend.href){var c=u.legend.href;i.setLegendURL(c)}}_D(l)?(_D(r.layers)&&(r.layers=[]),r.layers.push(i)):l.addChild(i,parseInt(a,10))}},{key:"getLayerFromInfo",value:function(t){var e=t.options;return e.params=t.params,new Ap({name:t.name,legend:t.title,url:t.href,transparent:!/^1|(true)$/i.test(e.isBaseLayer)},e)}},{key:"readolunits",value:function(t,e){t.units=RN.getChildValue(e)}},{key:"readoltileSize",value:function(t,e){t.tileSize={width:parseFloat(e.getAttribute("width")),height:parseFloat(e.getAttribute("height"))}}},{key:"readolgroupDisplayLayerSwitcher",value:function(t,e){t.options.groupDisplayLayerSwitcher=RN.getChildValue(e)}},{key:"readolorderInsideGroupDisplayLayerSwitcher",value:function(t,e){t.options.orderInsideGroupDisplayLayerSwitcher=RN.getChildValue(e)}},{key:"readsldMaxScaleDenominator",value:function(t,e){t.options.maxScale=parseFloat(RN.getChildValue(e))}},{key:"readwmcStyle",value:function(t,e){var r=t,n={};this.runChildNodes(n,e),"1"===e.getAttribute("current")&&(n.legend&&(r.params.layerLegend=n.legend),n.href?r.params.sld=n.href:n.body?r.params.sld_body=n.body:r.params.styles=n.name),r.styles.push(n)}},{key:"readwmcGeneral",value:function(t,e){this.runChildNodes(t,e)}},{key:"readwmcBoundingBox",value:function(t,e){var r=t;r.projection=e.getAttribute("SRS"),r.bounds=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))]}},{key:"readwmcLayerList",value:function(t,e){var r=t;r.layers=[],this.runChildNodes(r,e)}},{key:"readwmcExtension",value:function(t,e){this.runChildNodes(t,e)}},{key:"readolmaxExtent",value:function(t,e){var r=t,n=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))],i=this.options.projection,o=r.projection;_D(i)||_D(o)||i===o||(o=Object(u.o)(o),i=Object(u.o)(i),n=wh.transformExtent(n,o,i)),r.maxExtent=n}},{key:"readoltransparent",value:function(t,e){t.params.transparent=RN.getChildValue(e)}},{key:"readolnumZoomLevels",value:function(t,e){t.options.numZoomLevels=parseInt(RN.getChildValue(e),10)}},{key:"readolopacity",value:function(t,e){t.options.opacity=parseFloat(RN.getChildValue(e))}},{key:"readolsingleTile",value:function(t,e){t.options.singleTile="true"===RN.getChildValue(e)}},{key:"readolisBaseLayer",value:function(t,e){t.options.isBaseLayer="true"===RN.getChildValue(e)}},{key:"readoldisplayInLayerSwitcher",value:function(t,e){var r=t,n=OD(RN.getChildValue(e));r.options.displayInLayerSwitcher="true"===n}},{key:"readwmcServer",value:function(t,e){var r=t;r.params.version=e.getAttribute("version"),this.runChildNodes(r,e)}},{key:"readwmcFormatList",value:function(t,e){this.runChildNodes(t,e)}},{key:"readwmcFormat",value:function(t,e){var r=t,n=RN.getChildValue(e);r.formats.push(n),"1"===e.getAttribute("current")&&(r.params.format=n)}},{key:"readwmcStyleList",value:function(t,e){this.runChildNodes(t,e)}},{key:"readwmcSLD",value:function(t,e){this.runChildNodes(t,e)}},{key:"readsldStyledLayerDescriptor",value:function(t,e){t.body=d(e)}},{key:"readwmcOnlineResource",value:function(t,e){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")}},{key:"readwmcName",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.name=n)}},{key:"readwmcTitle",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.title=n)}},{key:"readwmcMetadataURL",value:function(t,e){var r=t,n={},i=e.getElementsByTagName("OnlineResource");i.length>0&&this.readwmcOnlineResource(n,i[0]),r.options.metadataURL=n.href}},{key:"readwmcextmetadata",value:function(t,e){t.options.metadataUrl=e&&e.innerHTML}},{key:"readwmcAbstract",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.abstract=n)}},{key:"readwmcLatLonBoundingBox",value:function(t,e){t.llbbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))]}},{key:"readwmcLegendURL",value:function(t,e){var r=t,n={width:e.getAttribute("width"),height:e.getAttribute("height")},i=e.getElementsByTagName("OnlineResource");i.length>0&&this.readwmcOnlineResource(n,i[0]),r.legend=n}},{key:"readsldFeatureTypeStyle",value:function(t,e){t.body=d(e)}},{key:"readwmcKeywordList",value:function(t,e){var r=t;r.keywords=[],this.runChildNodes(r.keywords,e)}},{key:"readwmcKeyword",value:function(t,e){t.push(RN.getChildValue(e))}},{key:"readwmcLogoURL",value:function(t,e){t.logo={width:e.getAttribute("width"),height:e.getAttribute("height"),format:e.getAttribute("format"),href:this.getOnlineResource_href(e)}}},{key:"readwmcDescriptionURL",value:function(t,e){t.descriptionURL=this.getOnlineResource_href(e)}},{key:"readwmcContactInformation",value:function(t,e){var r=t,n={};this.runChildNodes(n,e),r.contactInformation=n}},{key:"readwmcContactPersonPrimary",value:function(t,e){var r=t,n={};this.runChildNodes(n,e),r.personPrimary=n}},{key:"readwmcContactPerson",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.person=n)}},{key:"readwmcContactOrganization",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.organization=n)}},{key:"readwmcContactPosition",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.position=n)}},{key:"readwmcContactAddress",value:function(t,e){var r=t,n={};this.runChildNodes(n,e),r.contactAddress=n}},{key:"readwmcAddressType",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.type=n)}},{key:"readwmcAddress",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.address=n)}},{key:"readwmcCity",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.city=n)}},{key:"readwmcStateOrProvince",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.stateOrProvince=n)}},{key:"readwmcPostCode",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.postcode=n)}},{key:"readwmcCountry",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.country=n)}},{key:"readwmcContactVoiceTelephone",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.phone=n)}},{key:"readwmcContactFacsimileTelephone",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.fax=n)}},{key:"readwmcContactElectronicMailAddress",value:function(t,e){var r=t,n=RN.getChildValue(e);n&&(r.email=n)}},{key:"readwmcDataURL",value:function(t,e){t.dataURL=this.getOnlineResource_href(e)}},{key:"readwmcDimensionList",value:function(t,e){var r=t;r.dimensions={},this.runChildNodes(r.dimensions,e)}},{key:"readwmcDimension",value:function(t,e){var r=t,n={name:e.getAttribute("name").toLowerCase(),units:e.getAttribute("units")||"",unitSymbol:e.getAttribute("unitSymbol")||"",userValue:e.getAttribute("userValue")||"",nearestValue:"1"===e.getAttribute("nearestValue"),multipleValues:"1"===e.getAttribute("multipleValues"),current:"1"===e.getAttribute("current"),default:e.getAttribute("default")||""},i=RN.getChildValue(e);n.values=i.split(","),r[n.name]=n}}])&&kA(e.prototype,r),n&&kA(e,n),o}(RN);function BA(t){return(BA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VA(t,e){return(VA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=WA(t);if(e){var i=WA(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return YA(this,r)}}function YA(t,e){return!e||"object"!==BA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function WA(t){return(WA=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&VA(t,e)}(o,t);var e,r,n,i=qA(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).version=null,e.parser=null,e}return e=o,(r=[{key:"readFromDocument",value:function(t){9!==t.nodeType&&_l(uu("exception").must_be_document);var e=t.documentElement;this.version=e.getAttribute("version"),this.version||(this.version=o.DEFAULT_VERSION);var r="v".concat(OD(this.version).replace(/\./g,""));return this.parser=new o[r](this.options),this.parser.read(t)}}])&&zA(e.prototype,r),n&&zA(e,n),o}(RN);XA.v110=UA;var HA=XA;function ZA(t){return(ZA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KA(t){return function(t){if(Array.isArray(t))return JA(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return JA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JA(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QA(t,e){return(QA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rk(t);if(e){var i=rk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ek(this,r)}}function ek(t,e){return!e||"object"!==ZA(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rk(t){return(rk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QA(t,e)}(o,t);var e,r,n,i=tk(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).selected=!1,e.layers=[],e.groups=[],e.loadContextPromise=null,e.maxExtent=null,e.extentProj_=null,e}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire(Cl)}},{key:"select",value:function(){var t=this;!1===this.selected&&(this.map.getWMC().forEach((function(t){return t.unselect()})),this.selected=!0,this.loadContextPromise=new Promise((function(e,r){uD(t.url).then((function(r){var n;!1===t.map.defaultProj&&(n=t.map.getProjection().code);var i=r.xml,o=new HA({projection:n}).readFromDocument(i);e.call(t,o)}))})),this.loadContextPromise.then((function(e){if(t.map.defaultProj){var r=Object(u.o)(e.projection);t.map.setProjection({code:r.getCode(),units:r.getUnits()},!0)}t.loadLayers(e),t.map.fire(Kl,t)})))}},{key:"unselect",value:function(){if(!0===this.selected&&(this.selected=!1,_D(this.layers)||this.map.removeLayers(this.layers),!_D(this.groups))){var t=KA(this.groups);this.groups=[],this.map.removeLayerGroup(t)}}},{key:"loadLayers",value:function(t){var e=this;this.layers=t.layers,this.maxExtent=t.maxExtent,_D(t.layerGroups)?this.groups=[]:this.groups=this.groups.concat(t.layerGroups),this.layers.forEach((function(t){return t.setWMCParent(e.facadeLayer_)})),this.map.addWMS(this.layers,!0),this.map.addLayerGroup(this.groups),this.layers.forEach((function(t,r){return t.setZIndex(e.getZIndex()+r)})),this.groups.forEach((function(t,r){return t.setZIndex(e.getZIndex()+r)})),this.facadeLayer_.fire(Xl,[this.layers]),this.facadeLayer_.fire(Xl,[this.groups])}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"getMaxExtent",value:function(t){var e=this;return _D(this.maxExtent)&&this.loadContextPromise.then((function(r){e.maxExtent=r.maxExtent,vD(t)&&t(e.maxExtent)})),!_D(this.maxExtent)&&vD(t)&&t(this.maxExtent),this.maxExtent}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return t.getMaxExtent(e)}))}},{key:"getLayers",value:function(){return this.layers}},{key:"destroy",value:function(){_D(this.layers)||this.map.removeLayers(this.layers),this.map=null,this.layers.length=0,this.wmcDocument=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name),e}}])&&$A(e.prototype,r),n&&$A(e,n),o}(Rh);function ik(t){return(ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ok(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ak(t,e){return(ak=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uk(t);if(e){var i=uk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lk(this,r)}}function lk(t,e){return!e||"object"!==ik(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uk(t){return(uk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ck=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ak(t,e)}(o,t);var e,r,n,i=sk(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new nk(e),a=Ec(t,Lu);if(r=i.call(this,a,n),dD(nk)&&_l(uu("exception").wmclayer_method),_D(t)&&_l(uu("exception").no_param),r.options=e,!_D(r.url)&&_D(r.name))r.generateName_();else if(_D(r.url)&&!_D(r.name)){var s=M.config.predefinedWMC.predefinedNames.indexOf(r.name);-1===s?_l("El contexto predefinido '".concat(r.name,"'no existe")):(r.url=M.config.predefinedWMC.urls[s],r.name=M.config.predefinedWMC.names[s])}return r.loaded_=!1,r.once(Xl,(function(){r.setLoaded(!0)})),r}return e=o,(r=[{key:"getMaxExtent",value:function(t){return this.getImpl().getMaxExtent(t)}},{key:"calculateMaxExtent",value:function(){return this.getImpl().calculateMaxExtent()}},{key:"select",value:function(){dD(this.getImpl().select)&&_l(uu("exception").select_method),this.getImpl().select()}},{key:"unselect",value:function(){dD(this.getImpl().unselect)&&_l(uu("exception").unselect_method),this.getImpl().unselect()}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name),e}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"setLoaded",value:function(t){this.loaded_=t}},{key:"selected",get:function(){return this.getImpl().selected},set:function(t){this.getImpl().selected=t}},{key:"type",get:function(){return Lu},set:function(t){dD(t)||_D(t)||t===Lu||_l("El tipo de capa debe ser '".concat(Lu).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"layers",get:function(){return this.getImpl().layers},set:function(t){this.getImpl().layers=t}},{key:"projection",get:function(){return this.getImpl().projection},set:function(t){this.getImpl().projection=t}},{key:"maxExtent",set:function(t){this.getImpl().maxExtent=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&ok(e.prototype,r),n&&ok(e,n),o}(Lc),hk="KVP",fk="REST",pk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dk=function(t){function e(e){var r=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return pk(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Ac.a),gk=dk;function yk(t,e,r){var n=[],i=[],o=[],a=[],s=[],l=void 0!==r?r:[],c=t.SupportedCRS,f=Object(u.o)(c),p=f.getMetersPerUnit(),d="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(l.length>0)||Object(h.d)(l,(function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix}))){i.push(e.Identifier);var r=28e-5*e.ScaleDenominator/p,u=e.TileWidth,c=e.TileHeight;d?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),n.push(r),a.push(u==c?u:[u,c]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new dk({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}var mk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_k=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(n=e.interpolate);var i=void 0!==e.requestEncoding?e.requestEncoding:hk,o=e.tileGrid,a=e.urls;return void 0===a&&void 0!==e.url&&(a=Nf(e.url)),(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:a,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=i,r.setKey(r.getKeyForDimensions_()),a&&a.length>0&&(r.tileUrlFunction=Lf(a.map(r.createFromWMTSTemplate.bind(r)))),r}return mk(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Lf(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){Object(ii.a)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==hk&&Object(ii.a)(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==hk?Yf(t,r):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}));var n=this.tileGrid,i=this.dimensions_;return function(r,o,a){if(r){var s={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object(ii.a)(s,i);var l=t;return l=e==hk?Yf(l,s):l.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}},e}(Uf);function vk(t,e){var r=t.Contents.Layer,n=Object(h.d)(r,(function(t,r,n){return t.Identifier==e.layer}));if(null===n)return null;var i,o=t.Contents.TileMatrixSet;(i=n.TileMatrixSetLink.length>1?"projection"in e?Object(h.e)(n.TileMatrixSetLink,(function(t,r,n){var i=Object(h.d)(o,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=Object(u.o)(i),s=Object(u.o)(e.projection);return a&&s?Object(u.j)(a,s):i==e.projection})):Object(h.e)(n.TileMatrixSetLink,(function(t,r,n){return t.TileMatrixSet==e.matrixSet})):0)<0&&(i=0);var a=n.TileMatrixSetLink[i].TileMatrixSet,s=n.TileMatrixSetLink[i].TileMatrixSetLimits,l=n.Format[0];"format"in e&&(l=e.format),(i=Object(h.e)(n.Style,(function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(i=0);var c=n.Style[i].Identifier,f={};"Dimension"in n&&n.Dimension.forEach((function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),f[n]=i}));var p,d=t.Contents.TileMatrixSet,g=Object(h.d)(d,(function(t,e,r){return t.Identifier==a})),y=g.SupportedCRS;if(y&&(p=Object(u.o)(y)),"projection"in e){var m=Object(u.o)(e.projection);m&&(p&&!Object(u.j)(m,p)||(p=m))}var _=!1,v="ne"==p.getAxisOrientation().substr(0,2),b=g.TileMatrix[0],x={MinTileCol:0,MinTileRow:0,MaxTileCol:b.MatrixWidth-1,MaxTileRow:b.MatrixHeight-1};if(s){x=s[s.length-1];var w=Object(h.d)(g.TileMatrix,(function(t){return t.Identifier===x.TileMatrix||g.Identifier+":"+t.Identifier===x.TileMatrix}));w&&(b=w)}var E=28e-5*b.ScaleDenominator/p.getMetersPerUnit(),O=v?[b.TopLeftCorner[1],b.TopLeftCorner[0]]:b.TopLeftCorner,S=b.TileWidth*E,I=b.TileHeight*E,C=g.BoundingBox,T=[O[0]+S*x.MinTileCol,O[1]-I*(1+x.MaxTileRow),O[0]+S*(1+x.MaxTileCol),O[1]-I*x.MinTileRow];if(void 0!==C&&!Object(mt.h)(C,T)){var P=n.WGS84BoundingBox,R=Object(u.o)("EPSG:4326").getExtent();if(T=C,P)_=P[0]===R[0]&&P[2]===R[2];else{var L=Object(u.A)(C,g.SupportedCRS,"EPSG:4326");_=L[0]-1e-10<=R[0]&&L[2]+1e-10>=R[2]}}var M=yk(g,T,s),N=[],A=e.requestEncoding;if(A=void 0!==A?A:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var k=t.OperationsMetadata.GetTile.DCP.HTTP.Get,j=0,F=k.length;j<F;++j)if(k[j].Constraint){var D=Object(h.d)(k[j].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===A&&(A=D[0]),A!==hk)break;Object(h.f)(D,hk)&&N.push(k[j].href)}else k[j].href&&(A=hk,N.push(k[j].href));return 0===N.length&&(A=fk,n.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(l=t.format,N.push(t.template))}))),{urls:N,layer:e.layer,matrixSet:a,format:l,projection:p,requestEncoding:A,tileGrid:M,style:c,dimensions:f,wrapX:_,crossOrigin:e.crossOrigin}}function bk(t){return(bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ek(t,e){return(Ek=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ok(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ik(t);if(e){var i=Ik(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Sk(this,r)}}function Sk(t,e){return!e||"object"!==bk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ik(t){return(Ik=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ck=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ek(t,e)}(o,t);var e,r,n,i=Ok(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return xk(this,o),(t=i.call(this,e,r)).facadeLayer_=null,t.capabilitiesOptionsPromise=null,t.getCapabilitiesPromise_=e.capabilities||null,t.optionsFromGetFeatureInfoUrl_={version:"1.0.0",style:"default",format:"image/jpeg"},t}return e=o,(r=[{key:"addTo",value:function(t){var e=this;if(this.map=t,this.fire(Cl),!yD(this.options)&&!yD(this.options.minScale)&&!yD(this.options.maxScale)){var r=this.map.getMapImpl().getView().getProjection().getUnits();this.options.minResolution=LD(this.options.minScale,r),this.options.maxResolution=LD(this.options.maxScale,r)}var n=this.getCapabilitiesOptions_();n instanceof Promise?n.then((function(t){return e.addLayer_(t)})):this.addLayer_(n)}},{key:"setResolutions",value:function(t){var e=this;if(_D(this.vendorOptions_.source)){var r=this.facadeLayer_.getMaxExtent(),n=Object(u.o)(this.map.getProjection().code);this.getCapabilities().then((function(i){var o=i.getMatrixSet(e.name),a=i.getMatrixIds(e.name),s=i.getFormat(e.name),l={url:e.url,layer:e.name,matrixSet:o,format:s,projection:n,tileGrid:new gk({origin:Object(mt.v)(r),resolutions:t,matrixIds:a}),extent:r},u=e.options.crossOrigin;dD(u)||(l.crossOrigin=u);var c=new _k(l);e.ol3Layer.setSource(c)}))}}},{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===t&&!0!==this.transparent){this.map.getBaseLayers().filter((function(t){return!t.equals(e)&&t.isVisible()})).forEach((function(t){return t.setVisible(!1)})),_D(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();_D(r)||this.map.setBbox(r,{nearest:!0})}else _D(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addLayer_",value:function(t){var e=this.facadeLayer_.getMaxExtent(),r=t,n=this.options.minResolution,i=this.options.maxResolution;r.format=this.options.format||t.format;var o=this.options.crossOrigin;dD(o)||(r.crossOrigin=o);var a=new _k(GD(r,{extent:e},!0));this.ol3Layer=new Mc.a(GD({visible:this.options.visibility,source:a,minResolution:n,maxResolution:i},this.vendorOptions_,!0));var s=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),null!==s&&this.setZIndex(s),this.setVisible(this.visibility),this.ol3Layer.set("animated",!0),this.fire(Cl,this)}},{key:"setMaxExtent",value:function(t){this.getOLLayer().setExtent(t)}},{key:"getCapabilitiesOptions_",value:function(){var t=this;return _D(this.capabilitiesOptionsPromise)&&(this.capabilitiesOptionsPromise=this.getCapabilities(),this.capabilitiesOptionsPromise instanceof Promise&&(this.capabilitiesOptionsPromise=this.capabilitiesOptionsPromise.then((function(e){var r=t.name,n=t.matrixSet;_D(n)&&(n=t.map.getProjection().code);var i=t.facadeLayer_.getMaxExtent(),o=vk(e,{layer:r,matrixSet:n,extent:i});return o.tileGrid.extent=i,o})))),this.capabilitiesOptionsPromise}},{key:"getCapabilities",value:function(){var t=this;return _D(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=new Promise((function(e,r){var n=PD(t.url),i=new kt;uD(n).then((function(r){var n=r.xml,o=i.read(n);e.call(t,o)}))}))),this.getCapabilitiesPromise_}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"destroy",value:function(){var t=this.map.getMapImpl();_D(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.matrixSet===t.matrixSet),e}},{key:"setOptionsGetFeatureInfoUrl",value:function(t){var e=t.version,r=t.style,n=t.format;dD(e)||(this.optionsFromGetFeatureInfoUrl_.version=e),dD(r)||(this.optionsFromGetFeatureInfoUrl_.style=r),dD(n)||(this.optionsFromGetFeatureInfoUrl_.format=n)}},{key:"getOptionsGetFeatureInfoUrl",value:function(){return this.optionsFromGetFeatureInfoUrl_}},{key:"getGetFeatureInfoUrl",value:function(t,e,r){var n=this.getTileColTileRow(t,e),i=this.getRelativeTileCoordInPixel_(t,e),o=this.optionsFromGetFeatureInfoUrl_.version,a=this.name,s=this.optionsFromGetFeatureInfoUrl_.style,l=this.optionsFromGetFeatureInfoUrl_.format,u=this.ol3Layer.getSource().getMatrixSet(),c=e,h=r,f=n[0],p=n[1],d=i[0],g=i[1];return ID(this.url,{service:"WMTS",request:"GetFeatureInfo",version:o,layer:a,style:s,format:l,tilematrixset:u,tilematrix:c,tilerow:p,tilecol:f,J:g,I:d,infoFormat:h})}},{key:"getTileColTileRow",value:function(t,e){var r=null;if(!_D(this.ol3Layer)){var n=this.ol3Layer.getSource();_D(n)||(r=n.tileGrid.getTileCoordForCoordAndZ(t,e))}return r.slice(1)}},{key:"getRelativeTileCoordInPixel_",value:function(t,e){var r;if(!_D(this.ol3Layer)){var n=this.ol3Layer.getSource();if(!_D(n)){var i=n.tileGrid,o=i.getTileCoordForCoordAndZ(t,e),a=i.getTileCoordExtent(o,[]),s=i.getResolution(o[0]);r=[Math.floor((t[0]-a[0])/s),Math.floor((a[3]-t[1])/s)]}}return r}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new Mc.a(e)}return t}}])&&wk(e.prototype,r),n&&wk(e,n),o}(Rh);function Tk(t){return(Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lk(t,e){return(Lk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ak(t);if(e){var i=Ak(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nk(this,r)}}function Nk(t,e){return!e||"object"!==Tk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ak(t){return(Ak=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lk(t,e)}(o,t);var e,r,n,i=Mk(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;Pk(this,o);var a=new Ck(r,n),s=Ec(t,ku);return e=i.call(this,s,a),dD(Ck)&&_l(uu("exception").wmts_method),_D(t)&&_l(uu("exception").no_param),e.matrixSet=s.matrixSet,e.legend=s.legend,e.transparent=s.transparent,e.options=r,e}return e=o,(r=[{key:"getCapabilities",value:function(){return _D(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.matrixSet===t.matrixSet),e}},{key:"getGetFeatureInfoUrl",value:function(t,e,r){return this.getImpl().getGetFeatureInfoUrl(t,e,r)}},{key:"setOptionsGetFeatureInfoUrl",value:function(t){this.getImpl().setOptionsGetFeatureInfoUrl(t)}},{key:"getOptionsGetFeatureInfoUrl",value:function(){return this.getImpl().getOptionsGetFeatureInfoUrl()}},{key:"getTileColTileRow",value:function(t,e){return this.getImpl().getTileColTileRow(t,e)}},{key:"type",get:function(){return ku},set:function(t){dD(t)||_D(t)||t===ku||_l("El tipo de capa debe ser '".concat(ku).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"matrixSet",get:function(){return this.getImpl().matrixSet},set:function(t){this.getImpl().matrixSet=t}},{key:"legend",get:function(){return this.getImpl().legend},set:function(t){_D(t)?this.getImpl().legend=this.name:this.getImpl().legend=t}},{key:"options",get:function(){return this.getImpl().options},set:function(t){this.getImpl().options=t}}])&&Rk(e.prototype,r),n&&Rk(e,n),o}(Lc),jk=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fk=function(t){function e(e){var r=e||{},n=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(n=r.interpolate);var i=void 0!==r.projection?r.projection:"EPSG:3857",o=void 0!==r.tileGrid?r.tileGrid:Object(Ff.b)({extent:Object(Ff.c)(i),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:n,opaque:r.opaque,projection:i,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return jk(e,t),e}(Uf);function Dk(t){return(Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Uk(t,e){return(Uk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Vk(t);if(e){var i=Vk(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zk(this,r)}}function zk(t,e){return!e||"object"!==Dk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vk(t){return(Vk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uk(t,e)}(o,t);var e,r,n,i=Bk(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).resolutions_=null,n.facadeLayer_=null,n.hasAttributtion=!1,n.haveOSMorMapboxLayer=!1,!1===e.visibility&&(n.visibility=!1),n.zIndex_=id.Z_INDEX.Mapbox,n}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===t&&!0!==this.transparent){this.map.getBaseLayers().forEach((function(t){!t.equals(e)&&t.isVisible()&&t.setVisible(!1)})),_D(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),_D(r)||this.map.setBbox(r)}else _D(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){var e=this;this.map=t,this.fire(Cl);var r,n=this.facadeLayer_.getMaxExtent();this.ol3Layer=new Mc.a(GD({source:new Fk({url:"".concat(this.url).concat(this.name,"/{z}/{x}/{y}.png?").concat(M.config.MAPBOX_TOKEN_NAME,"=").concat(this.accessToken)}),extent:n},this.vendorOptions_,!0)),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.getMapImpl().getControls().getArray().forEach((function(t){t instanceof za&&(e.hasAttributtion=!0)})),this.hasAttributtion||(_D(this.vendorOptions_)&&(r={className:"ol-attribution ol-unselectable ol-control ol-collapsed m-attribution"}),this.map.getMapImpl().addControl(new za(r)),this.hasAttributtion=!1),this.map.getMapImpl().updateSize();var i=this.map.getMapImpl().getSize(),o=this.map.getProjection().units;this.resolutions_=MD(this.getExtent(),i,16,o),this.isVisible()&&!this.inRange()&&this.setVisible(!1),null!==this.zIndex_&&this.setZIndex(this.zIndex_),null!==this.resolutions_&&this.setResolutions(this.resolutions_);var a=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",a)}},{key:"setResolutions",value:function(t){if(this.resolutions_=t,!_D(this.ol3Layer)&&_D(this.vendorOptions_.source)){var e=this.facadeLayer_.getMaxExtent(),r=new Fk({url:"".concat(this.url).concat(this.name,"/{z}/{x}/{y}.png?").concat(M.config.MAPBOX_TOKEN_NAME,"=").concat(this.accessToken),extent:e,resolutions:t,attributionControl:!0});this.ol3Layer.setSource(r)}}},{key:"getExtent",value:function(){var t=null;return _D(this.ol3Layer)||(t=Object(u.o)(this.map.getProjection().code).getExtent()),{x:{min:t[0],max:t[2]},y:{min:t[1],max:t[3]}}}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"getMinResolution",value:function(){return this.resolutions_[0]}},{key:"getMaxResolution",value:function(){return this.resolutions_[this.resolutions_.length-1]}},{key:"destroy",value:function(){var t=this,e=this.map.getMapImpl();_D(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map.getLayers().forEach((function(e){(e instanceof Qk||e instanceof _j)&&(t.haveOSMorMapboxLayer=!0)})),this.haveOSMorMapboxLayer||this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(e){e instanceof za&&t.map.getImpl().getMapImpl().removeControl(e)})),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new Mc.a(e)}return t}}])&&Gk(e.prototype,r),n&&Gk(e,n),o}(Rh);qk.ATTRIBUTION='&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a>';var Yk=qk;function Wk(t){return(Wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zk(t,e){return(Zk=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$k(t);if(e){var i=$k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jk(this,r)}}function Jk(t,e){return!e||"object"!==Wk(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $k(t){return($k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zk(t,e)}(o,t);var e,r,n,i=Kk(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Xk(this,o);var a=new Yk(t,r,n),s=Ec(t,Fu);return e=i.call(this,s,a),dD(Yk)&&_l(uu("exception").mapbox_method),_D(t)&&_l(uu("exception").no_param),_D(s.name)&&_l(uu("exception").no_name),e.name=s.name,e.legend=s.legend,_D(s.legend)&&(e.legend=s.name),e.transparent=s.transparent,e.accessToken=s.accessToken,e.options=r,e}return e=o,(r=[{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}},{key:"url",get:function(){return this.getImpl().url},set:function(t){_D(t)?this.getImpl().url=M.config.MAPBOX_URL:this.getImpl().url=t}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){_D(t)?this.getImpl().transparent=!1:this.getImpl().transparent=t}},{key:"accessToken",get:function(){return this.getImpl().accessToken},set:function(t){_D(t)?this.getImpl().accessToken=M.config.MAPBOX_TOKEN_VALUE:this.getImpl().accessToken=t}},{key:"type",get:function(){return Fu},set:function(t){dD(t)||_D(t)||t===Fu||_l("El tipo de capa debe ser '".concat(Fu).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&Hk(e.prototype,r),n&&Hk(e,n),o}(Lc),tj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ej='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',rj=function(t){function e(e){var r,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate),r=void 0!==n.attributions?n.attributions:[ej];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",a=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,attributionsCollapsible:!1,cacheSize:n.cacheSize,crossOrigin:o,interpolate:i,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,opaque:void 0===n.opaque||n.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:a,wrapX:n.wrapX,zDirection:n.zDirection})||this}return tj(e,t),e}(Fk);function nj(t){return(nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ij(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aj(t,e){return(aj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uj(t);if(e){var i=uj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lj(this,r)}}function lj(t,e){return!e||"object"!==nj(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uj(t){return(uj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aj(t,e)}(o,t);var e,r,n,i=sj(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return ij(this,o),(e=i.call(this,r,n)).resolutions_=null,e.facadeLayer_=null,e.hasAttributtion=!1,e.haveOSMorMapboxLayer=!1,!1===r.visibility&&(e.visibility=!1),e.zIndex_=id.Z_INDEX.OSM,e.url_=t.url,e}return e=o,(r=[{key:"setVisible",value:function(t){var e=this;if(this.visibility=t,!0===this.inRange())if(!0===t&&!0!==this.transparent){this.map.getBaseLayers().forEach((function(t){!t.equals(e)&&t.isVisible()&&t.setVisible(!1)})),_D(this.ol3Layer)||this.ol3Layer.setVisible(t);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),_D(r)||this.map.setBbox(r)}else _D(this.ol3Layer)||this.ol3Layer.setVisible(t)}},{key:"addTo",value:function(t){var e=this;this.map=t,this.fire(Cl),this.ol3Layer=new Mc.a(GD({},this.vendorOptions_,!0)),this.updateSource_(),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(t){t instanceof za&&(e.hasAttributtion=!0)}),this),this.hasAttributtion||(this.map.getMapImpl().addControl(new za({className:"ol-attribution ol-unselectable ol-control ol-collapsed m-attribution",collapsible:!0})),this.hasAttributtion=!1),this.map.getMapImpl().updateSize();var r=this.map.getMapImpl().getSize(),n=this.map.getProjection().units;this.resolutions_=MD(this.facadeLayer_.getMaxExtent(),r,16,n),this.isVisible()&&!this.inRange()&&this.setVisible(!1),null!==this.zIndex_&&this.setZIndex(this.zIndex_),null!==this.resolutions_&&this.setResolutions(this.resolutions_);var i=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",i),this.map.on(Jl,(function(){return e.updateSource_()}))}},{key:"setResolutions",value:function(t){this.resolutions_=t,this.updateSource_(t)}},{key:"updateSource_",value:function(t){if(_D(t)&&!_D(this.map)){this.map.getMapImpl().updateSize();var e=this.map.getMapImpl().getSize(),r=this.map.getProjection().units,n=M.config.ZOOM_LEVELS;this.resolutions_=MD(this.facadeLayer_.getMaxExtent(),e,n,r)}if(!_D(this.ol3Layer)&&_D(this.vendorOptions_.source)){var i=this.facadeLayer_.getMaxExtent(),o="";o=dD(this.url_)?new rj({}):new Fk({url:this.url_}),this.ol3Layer.setSource(o),this.ol3Layer.setExtent(i)}}},{key:"setFacadeObj",value:function(t){this.facadeLayer_=t}},{key:"setMaxExtent",value:function(t){this.ol3Layer.setExtent(t)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var t=this,e=this.map.getMapImpl();_D(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map.getLayers().forEach((function(e){(e instanceof _j||e instanceof Qk)&&(t.haveOSMorMapboxLayer=!0)})),this.haveOSMorMapboxLayer||this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(e){e instanceof za&&t.map.getImpl().getMapImpl().removeControl(e)})),this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name),e}},{key:"cloneOLLayer",value:function(){var t=null;if(null!=this.ol3Layer){var e=this.ol3Layer.getProperties();t=new Mc.a(e)}return t}}])&&oj(e.prototype,r),n&&oj(e,n),o}(Rh);function hj(t){return(hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dj(t,e){return(dj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mj(t);if(e){var i=mj(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yj(this,r)}}function yj(t,e){return!e||"object"!==hj(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mj(t){return(mj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dj(t,e)}(o,t);var e,r,n,i=gj(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fj(this,o);var a=t;dD(cj)&&_l(uu("exception").osm_method),_D(a)&&(a="OSM");var s=new cj(a,r,n),l=Ec(a,ju);return _D(l.name)&&(l.name="osm"),(e=i.call(this,l,s)).name=l.name,e.legend=l.legend,_D(l.legend)&&(e.legend="OpenStreetMap"),e.transparent=l.transparent,e.options=r,e}return e=o,(r=[{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.url===t.url,e=e&&this.name===t.name,e=e&&this.options===t.options),e}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(t){_D(t)?this.getImpl().transparent=!1:this.getImpl().transparent=t}},{key:"type",get:function(){return ju},set:function(t){dD(t)||_D(t)||t===ju||_l("El tipo de capa debe ser '".concat(ju).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&pj(e.prototype,r),n&&pj(e,n),o}(Lc),vj=r(45),bj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xj=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s.key=n,s}return bj(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.load=function(){this.state==Ef.a.IDLE&&(this.setState(Ef.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(Ef.a.ERROR)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(Ef.a.LOADED)},e.prototype.setLoader=function(t){this.loader_=t},e}(vj.a),wj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ej=[],Oj=function(t){function e(e,r,n,i){var o=t.call(this,e,r,{transition:0})||this;return o.context_={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.wrappedTileCoord=n,o}return wj(e,t),e.prototype.getContext=function(t){var e=Object(Gn.c)(t);return e in this.context_||(this.context_[e]=Object(oi.a)(1,1,Ej)),this.context_[e]},e.prototype.hasContext=function(t){return Object(Gn.c)(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=Object(Gn.c)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)Ej.push(this.context_[e].canvas),delete this.context_[e];t.prototype.release.call(this)},e}(vj.a),Sj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ij=function(t){function e(e){var r=this,n=e.projection||"EPSG:3857",i=e.extent||Object(Ff.c)(n),o=e.tileGrid||Object(Ff.b)({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Cj,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.sourceTileCache=new wf.a(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:xj,r.tileGrids_={},r}return Sj(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=Object(Tf.b)(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&r.getState()===Ef.a.LOADED)for(var o=r.getSourceTiles(),a=0,s=o.length;a<s;++a){var l=o[a],u=l.tileCoord;if(Object(mt.G)(t,i.getTileCoordExtent(u))){var c=l.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();Object(mt.G)(t,d.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,r){var n=this.getTileCacheForProjection(e),i=Object.keys(r).reduce((function(t,e){var r=Object(Tf.c)(e);if(n.containsKey(r))for(var i=n.get(r).sourceTiles,o=0,a=i.length;o<a;++o)t[i[o].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache(i)},e.prototype.getSourceTiles=function(t,e,r){var n=this;if(r.getState()===Ef.a.IDLE){r.setState(Ef.a.LOADING);var i=r.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(i),s=i[0],l=o.getResolution(s);Object(mt.d)(a,-l,a);var u=this.tileGrid,c=u.getExtent();c&&Object(mt.B)(a,c,a);var h=u.getZForResolution(l,1);u.forEachTileCoord(a,h,(function(i){var o=n.tileUrlFunction(i,t,e),a=n.sourceTileCache.containsKey(o)?n.sourceTileCache.get(o):new n.tileClass(i,o?Ef.a.IDLE:Ef.a.EMPTY,o,n.format_,n.tileLoadFunction);r.sourceTiles.push(a);var s=a.getState();if(s<Ef.a.LOADED){a.addEventListener(Di.a.CHANGE,(function t(e){n.handleTileChange(e);var i=a.getState();if(i===Ef.a.LOADED||i===Ef.a.ERROR){var o=a.getKey();o in r.errorTileKeys?a.getState()===Ef.a.LOADED&&delete r.errorTileKeys[o]:r.loadingSourceTiles--,i===Ef.a.ERROR?r.errorTileKeys[o]=!0:a.removeEventListener(Di.a.CHANGE,t),0===r.loadingSourceTiles&&r.setState(Object(ii.d)(r.errorTileKeys)?Ef.a.LOADED:Ef.a.ERROR)}})),r.loadingSourceTiles++}s===Ef.a.IDLE&&(a.extent=u.getTileCoordExtent(i),a.projection=e,a.resolution=u.getResolution(i[0]),n.sourceTileCache.set(o,a),a.load())})),r.loadingSourceTiles||r.setState(r.sourceTiles.some((function(t){return t.getState()===Ef.a.ERROR}))?Ef.a.ERROR:Ef.a.LOADED)}return r.sourceTiles},e.prototype.getTile=function(t,e,r,n,i){var o,a=Object(Tf.e)(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var l=[t,e,r],u=this.getTileCoordForTileUrlFunction(l,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(u&&c){var f=h.getTileCoordExtent(u);Object(mt.d)(f,-h.getResolution(t),f),Object(mt.G)(c,f)||(u=null)}var p=!0;if(null!==u){var d=this.tileGrid,g=h.getResolution(t),y=d.getZForResolution(g,1),m=h.getTileCoordExtent(u);Object(mt.d)(m,-g,m),d.forEachTileCoord(m,y,function(t){p=p&&!this.tileUrlFunction(t,n,i)}.bind(this))}var _=new Oj(l,p?Ef.a.EMPTY:Ef.a.IDLE,u,this.getSourceTiles.bind(this,n,i));return _.key=s,o?(_.interimTile=o,_.refreshInterimChain(),this.tileCache.replace(a,_)):this.tileCache.set(a,_),_},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var n=this.tileGrid;r=Object(Ff.a)(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=r}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=Object(Aa.d)(n.getTileSize(t),this.tmpSize);return[Math.round(i[0]*e),Math.round(i[1]*e)]},e.prototype.updateCacheSize=function(e,r){t.prototype.updateCacheSize.call(this,2*e,r),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(r).highWaterMark},e}(kf);function Cj(t,e){t.setLoader((function(r,n,i){Og(e,t.getFormat(),r,n,i,t.onLoad.bind(t),t.onError.bind(t))}))}var Tj=r(72),Pj="image",Rj="hybrid",Lj="vector",Mj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nj={image:[py,uy,fy,hy,dy],hybrid:[py,fy],vector:[]},Aj={hybrid:[hy,dy,cy],vector:[py,uy,fy,hy,dy,cy]},kj=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.tmpTransform_=Object(Un.d)(),r}return Mj(e,t),e.prototype.prepareTile=function(t,e,r){var n,i=t.getState();return i!==Ef.a.LOADED&&i!==Ef.a.ERROR||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t)&&(n=!0)),n},e.prototype.getTile=function(e,r,n,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,l=a.projection,u=this.getLayer(),c=u.getSource().getTile(e,r,n,o,l),h=i.viewHints,f=!(h[po.a.ANIMATING]||h[po.a.INTERACTING]);return!f&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,l)&&(f||Date.now()-i.time<8)&&u.getRenderMode()!==Lj&&this.renderTileImage_(c,i),t.prototype.getTile.call(this,e,r,n,i)},e.prototype.isDrawableTile=function(e){var r=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&(r.getRenderMode()===Lj?Object(Gn.c)(r)in e.executorGroups:e.hasContext(r))},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,r){var n=this.getLayer(),i=n.getRevision(),o=n.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(n);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=i||s.renderedRenderOrder!=o){var l=n.getSource(),u=n.getDeclutter(),c=l.getTileGrid(),h=l.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),f=l.getSourceTiles(e,r,t),p=Object(Gn.c)(n);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],u&&(t.declutterExecutorGroups[p]=[]);for(var d=function(r,i){var d=f[r];if(d.getState()!=Ef.a.LOADED)return"continue";var y=d.tileCoord,m=c.getTileCoordExtent(y),_=Object(mt.B)(h,m),v=Object(mt.d)(_,n.getRenderBuffer()*a,g.tmpExtent),b=Object(mt.p)(m,_)?null:v;s.dirty=!1;var x=new pv(0,v,a,e),w=u?new pv(0,_,a,e):void 0,E=my(a,e),O=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,a)),e){var i=this.renderFeature(t,E,e,x,w);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},S=d.getFeatures();o&&o!==s.renderedRenderOrder&&S.sort(o);for(var I=0,C=S.length;I<C;++I){var T=S[I];b&&!Object(mt.G)(b,T.getGeometry().getExtent())||O.call(g,T)}var P=x.finish(),R=n.getRenderMode()!==Lj&&u&&1===f.length?null:_,L=new Pv(R,a,e,l.getOverlaps(),P,n.getRenderBuffer());if(t.executorGroups[p].push(L),w){var M=new Pv(null,a,e,l.getOverlaps(),w.finish(),n.getRenderBuffer());t.declutterExecutorGroups[p].push(M)}},g=this,y=0,m=f.length;y<m;++y)d(y);s.renderedRevision=i,s.renderedRenderOrder=o,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){var o=e.viewState.resolution,a=e.viewState.rotation;r=null==r?0:r;var s=this.getLayer(),l=s.getSource().getTileGridForProjection(e.viewState.projection),u=Object(mt.c)([t]);Object(mt.d)(u,o*r,u);for(var c,h={},f=function(t,e,r){var o=t.getId();void 0===o&&(o=Object(Gn.c)(t));var a=h[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return h[o]=!0,i.splice(i.lastIndexOf(a),1),n(t,s,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return h[o]=!0,n(t,s,e);i.push(h[o]={feature:t,layer:s,geometry:e,distanceSq:r,callback:n})}},p=this.renderedTiles,d=function(n,i){var h=p[n],d=l.getTileCoordExtent(h.wrappedTileCoord);if(!Object(mt.G)(d,u))return"continue";var g=Object(Gn.c)(s),y=[h.executorGroups[g]],m=h.declutterExecutorGroups[g];m&&y.push(m),y.some((function(n){for(var i=n===m?e.declutterTree.all().map((function(t){return t.value})):null,s=0,l=n.length;s<l;++s){var u=n[s];if(c=u.forEachFeatureAtCoordinate(t,o,a,r,f,i))return!0}}))},g=0,y=p.length;!c&&g<y;++g)d(g);return c},e.prototype.getFeatures=function(t){return new Promise(function(e,r){for(var n,i=this.getLayer(),o=Object(Gn.c)(i),a=i.getSource(),s=this.renderedProjection,l=s.getExtent(),u=this.renderedResolution,c=a.getTileGridForProjection(s),h=Object(Un.a)(this.renderedPixelToCoordinateTransform_,t.slice()),f=c.getTileCoordForCoordAndResolution(h,u),p=0,d=this.renderedTiles.length;p<d;++p)if(f.toString()===this.renderedTiles[p].tileCoord.toString()){if((n=this.renderedTiles[p]).getState()===Ef.a.LOADED){var g=c.getTileCoordExtent(n.tileCoord);a.getWrapX()&&s.canWrapX()&&!Object(mt.h)(l,g)&&Object(Wn.p)(h,s);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var y=c.getTileCoordExtent(n.wrappedTileCoord),m=Object(mt.D)(y),_=[(h[0]-m[0])/u,(m[1]-h[1])/u],v=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),b=n.hitDetectionImageData[o];if(!b&&!this.animatingOrInteracting_){var x=Object(Aa.d)(c.getTileSize(c.getZForResolution(u))),w=this.renderedRotation_;b=Lv(x,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),u,0,Rv,x[0]*Rv,x[1]*Rv,0)],v,i.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(i).renderedResolution,w),n.hitDetectionImageData[o]=b}e(Mv(_,v,b))}}.bind(this))},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderDeclutter=function(t){var e=this.context,r=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var n=t.viewHints,i=!(n[po.a.ANIMATING]||n[po.a.INTERACTING]),o=this.renderedTiles,a=0,s=o.length;a<s;++a){var l=o[a],u=l.declutterExecutorGroups[Object(Gn.c)(this.getLayer())];if(u)for(var c=u.length-1;c>=0;--c)u[c].execute(this.context,1,this.getTileRenderTransform(l,t),t.viewState.rotation,i,void 0,t.declutterTree)}e.globalAlpha=r},e.prototype.getTileRenderTransform=function(t,e){var r=e.pixelRatio,n=e.viewState,i=n.center,o=n.resolution,a=n.rotation,s=e.size,l=Math.round(s[0]*r),u=Math.round(s[1]*r),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),h=t.tileCoord,f=c.getTileCoordExtent(t.wrappedTileCoord),p=c.getTileCoordExtent(h,this.tmpExtent)[0]-f[0];return Object(Un.g)(Object(Un.j)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(i,o,a,r,l,u,p))},e.prototype.renderFrame=function(e,r){var n=e.viewHints,i=!(n[po.a.ANIMATING]||n[po.a.INTERACTING]);t.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode(),s=this.context,l=s.globalAlpha;s.globalAlpha=o.getOpacity();for(var u=Aj[a],c=e.viewState,h=c.rotation,f=o.getSource(),p=f.getTileGridForProjection(c.projection).getZForResolution(c.resolution,f.zDirection),d=this.renderedTiles,g=[],y=[],m=d.length-1;m>=0;--m){var _=d[m],v=_.executorGroups[Object(Gn.c)(o)].filter((function(t){return t.hasExecutors(u)}));if(0!==v.length){for(var b=this.getTileRenderTransform(_,e),x=_.tileCoord[0],w=!1,E=v[0].getClipCoords(b),O=0,S=g.length;O<S;++O)if(p!==x&&x<y[O]){var I=g[O];Object(mt.G)([E[0],E[3],E[4],E[7]],[I[0],I[3],I[4],I[7]])&&(w||(s.save(),w=!0),s.beginPath(),s.moveTo(E[0],E[1]),s.lineTo(E[2],E[3]),s.lineTo(E[4],E[5]),s.lineTo(E[6],E[7]),s.moveTo(I[6],I[7]),s.lineTo(I[4],I[5]),s.lineTo(I[2],I[3]),s.lineTo(I[0],I[1]),s.clip())}g.push(E),y.push(x);for(var C=0,T=v.length;C<T;++C){v[C].execute(s,1,b,h,i,u)}w&&s.restore()}}return s.globalAlpha=l,this.container},e.prototype.renderFeature=function(t,e,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=vy(n,t,r[a],e,this.boundHandleStyleImageChange_,void 0,i)||o;else o=vy(n,t,r,e,this.boundHandleStyleImageChange_,void 0,i);return o},e.prototype.tileImageNeedsRender_=function(t){var e=this.getLayer();if(e.getRenderMode()===Lj)return!1;var r=t.getReplayState(e),n=e.getRevision(),i=t.wantedResolution;return r.renderedTileResolution!==i||r.renderedTileRevision!==n},e.prototype.renderTileImage_=function(t,e){var r=this.getLayer(),n=t.getReplayState(r),i=r.getRevision(),o=t.executorGroups[Object(Gn.c)(r)];n.renderedTileRevision=i;var a=t.wrappedTileCoord,s=a[0],l=r.getSource(),u=e.pixelRatio,c=e.viewState.projection,h=l.getTileGridForProjection(c),f=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=h.getResolution(s),g=t.getContext(r);u=Math.round(Math.max(u,p/u));var y=l.getTilePixelSize(s,u,c);g.canvas.width=y[0],g.canvas.height=y[1];var m=u/p;if(1!==m){var _=Object(Un.h)(this.tmpTransform_);Object(Un.j)(_,m,m),g.setTransform.apply(g,_)}var v=h.getTileCoordExtent(a,this.tmpExtent),b=p/d,x=Object(Un.h)(this.tmpTransform_);Object(Un.j)(x,b,-b),Object(Un.m)(x,-v[0],-v[3]);for(var w=0,E=o.length;w<E;++w){o[w].execute(g,m,x,0,!0,Nj[r.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},e}(Tj.a),jj=r(58),Fj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dj=function(t){function e(e){var r=this,n=e||{},i=Object(ii.a)({},n);delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).on,r.once,r.un,n.renderMode===Pj&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),n.renderMode=void 0);var o=n.renderMode||Rj;return Object(Ui.a)(o==Rj||o==Lj,28),r.renderMode_=o,r.setPreload(n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r.getBackground,r.setBackground,r}return Fj(e,t),e.prototype.createRenderer=function(){return new kj(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(jj.a.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(jj.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(jj.a.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(jj.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(X_),Gj=r(116),Uj=r.n(Gj),Bj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function zj(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(Vj,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Vj(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1===(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function qj(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function Yj(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(qj,i,n),i}var Wj=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=new Tn.a({code:"",units:Pn.b.TILE_PIXELS}),r.featureClass_=n.featureClass?n.featureClass:lh,r.geometryName_=n.geometryName,r.layerName_=n.layerName?n.layerName:"layer",r.layers_=n.layers?n.layers:null,r.idProperty_=n.idProperty,r.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],r}return Bj(e,t),e.prototype.readRawGeometry_=function(t,e,r,n){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,u=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),l+=t.readSVarint(),1===o&&u>c&&(n.push(u),c=u),r.push(s,l),u+=2):7===o?u>c&&(r.push(r[c],r[c+1]),u+=2):Object(Ui.a)(!1,59)}u>c&&(n.push(u),c=u)},e.prototype.createFeature_=function(t,e,r){var n,i=e.type;if(0===i)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],l=[];this.readRawGeometry_(t,e,s,l);var u=function(t,e){var r;1===t?r=1===e?fo.a.POINT:fo.a.MULTI_POINT:2===t?r=1===e?fo.a.LINE_STRING:fo.a.MULTI_LINE_STRING:3===t&&(r=fo.a.POLYGON);return r}(i,l.length);if(this.featureClass_===lh)(n=new this.featureClass_(u,s,l,a,o)).transform(r.dataProjection);else{var c=void 0;if(u==fo.a.POLYGON){var h=ba(s,l);c=h.length>1?new ih(s,Io,h):new Oa(s,Io,l)}else c=u===fo.a.POINT?new aa(s,Io):u===fo.a.LINE_STRING?new Qc(s,Io):u===fo.a.POLYGON?new Oa(s,Io,l):u===fo.a.MULTI_POINT?new Hc(s,Io):u===fo.a.MULTI_LINE_STRING?new eh(s,Io,l):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var f=LI(c,!1,r);n.setGeometry(f),void 0!==o&&n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return vg},e.prototype.readFeatures=function(t,e){var r=this.layers_,n=this.adaptOptions(e),i=Object(u.o)(n.dataProjection);i.setWorldExtent(n.extent),n.dataProjection=i;var o=new Uj.a(t),a=o.readFields(zj,{}),s=[];for(var l in a)if(!r||-1!=r.indexOf(l)){var c=a[l],h=c?[0,0,c.extent,c.extent]:null;i.setExtent(h);for(var f=0,p=c.length;f<p;++f){var d=Yj(o,c,f),g=this.createFeature_(o,d,n);null!==g&&s.push(g)}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(RI);function Xj(t){return(Xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zj(t,e){return(Zj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$j(t);if(e){var i=$j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jj(this,r)}}function Jj(t,e){return!e||"object"!==Xj(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $j(t){return($j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zj(t,e)}(o,t);var e,r,n,i=Kj(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).formater_=null,n.lastZoom_=-1,n.projection_=t.projection||"EPSG:3857",n.features_=[],n.mode_=t.mode,n.loaded_=!1,n}return e=o,(r=[{key:"addTo",value:function(t){var e=this;this.map=t,this.fire(Cl),this.formater_=new Wj({featureClass:this.mode_===hF.FEATURE?Wc:lh});var r=this.facadeVector_.getMaxExtent(),n=this.map.getTicket(),i=_D(n)?this.url:"".concat(this.url,"?ticket=").concat(n),o=new Ij({format:this.formater_,url:i,projection:this.projection_});this.ol3Layer=new Dj(GD({source:o,extent:r},this.vendorOptions_,!0)),this.opacity_&&this.setOpacity(this.opacity_),this.map.getMapImpl().addLayer(this.ol3Layer),this.loaded_=!0,this.facadeVector_.fire(Xl),this.map.on(Ql,(function(){if(e.map){var t=e.map.getZoom();e.lastZoom_!==t&&(e.features_.length=0,e.lastZoom_=t)}}))}},{key:"getFeatures",value:function(t,e){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=Object(Tf.b)(n.peekFirstKey())[0];n.forEach((function(t){if(t.tileCoord[0]===i&&t.getState()===Ef.a.LOADED)for(var e=t.getSourceTiles(),n=0,o=e.length;n<o;n+=1){var a=e[n].getFeatures();a&&(r=r.concat(a))}}))}return r}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name),e}}])&&Hj(e.prototype,r),n&&Hj(e,n),o}(kx);function tF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tF(Object(r),!0).forEach((function(e){rF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nF(t){return(nF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aF(t,e,r){return(aF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cF(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function sF(t,e){return(sF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cF(t);if(e){var i=cF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uF(this,r)}}function uF(t,e){return!e||"object"!==nF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cF(t){return(cF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hF={RENDER:"render",FEATURE:"feature"},fF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sF(t,e)}(o,t);var e,r,n,i=lF(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;iF(this,o);var s=a||new Qj(e,r,n);return t=i.call(this,e,r,n,s),dD(Qj)&&_l("La implementación usada no puede crear capas Vector"),t}return e=o,(r=[{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;return _D(t)&&(t=this.map_.userMaxExtent,_D(t)&&(t=this.map_.getProjection().getExtent())),t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){return e(t.getMaxExtent())}))}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;aF(cF(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var t=null,e=this.getFeatures();if(!_D(e)){var r=e[0];_D(r)||(t=r.getType())}return t}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map((function(t){return iR.olFeature2Facade(t)}))}},{key:"clearStyle",value:function(){this.setStyle(null)}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}},{key:"type",get:function(){return Uu},set:function(t){dD(t)||_D(t)||t===Uu||_l("El tipo de capa debe ser '".concat(Uu).concat("' pero se ha especificado '").concat(t).concat("'"))}}])&&oF(e.prototype,r),n&&oF(e,n),o}(Dw);fF.DEFAULT_PARAMS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2}},fF.DEFAULT_OPTIONS_STYLE={point:eF(eF({},fF.DEFAULT_PARAMS_STYLE),{},{radius:5}),line:eF({},fF.DEFAULT_PARAMS_STYLE),polygon:eF({},fF.DEFAULT_PARAMS_STYLE)};var pF=fF;function dF(t){return(dF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yF(t,e){return(yF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vF(t);if(e){var i=vF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _F(this,r)}}function _F(t,e){return!e||"object"!==dF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vF(t){return(vF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yF(t,e)}(o,t);var e,r,n,i=mF(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).map_=t,n.url_=e,n.format_=r,n}return e=o,(r=[{key:"getLoaderFn",value:function(t){var e=this;return function(r,n,i){e.loadInternal_(i).then((function(r){t.apply(e,r)}))}}},{key:"loadInternal_",value:function(t){var e=this,r=this.url_;return new Promise((function(n){xD(M.config.ticket)&&(r=ID(r,{ticket:M.config.ticket})),uD(r).then((function(r){if(_D(r.text))_l(uu("exception").no_service_response);else{var i=e.format_.read(r.text,{featureProjection:t});n.call(e,[i])}}))}))}}])&&gF(e.prototype,r),n&&gF(e,n),o}(il);function xF(t){return(xF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EF(t,e,r){return(EF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CF(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function OF(t,e){return(OF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function SF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=CF(t);if(e){var i=CF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return IF(this,r)}}function IF(t,e){return!e||"object"!==xF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function CF(t){return(CF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OF(t,e)}(o,t);var e,r,n,i=SF(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,r)).popup_=null,n.formater_=null,n.loader_=null,n.loadFeaturesPromise_=null,n.loaded_=!1,n.hiddenAttributes_=[],_D(e.hide)||(n.hiddenAttributes_=e.hide),n.showAttributes_=[],_D(e.show)||(n.showAttributes_=e.show),n}return e=o,(r=[{key:"addTo",value:function(t){this.formater_=new CN({defaultDataProjection:Object(u.o)(t.getProjection().code)}),_D(this.url)||(this.loader_=new bF(t,this.url,this.formater_)),EF(CF(o.prototype),"addTo",this).call(this,t)}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.formater_.write(this.facadeVector_.getFeatures()),r=this.map.getProjection().code.split(":")[1],n={type:"FeatureCollection",features:e,crs:{properties:{code:r},type:"EPSG"}};bD(t)&&(n=t),this.source=n,this.updateSource_()}},{key:"setSource",value:function(t){this.source=t,_D(this.map)||this.updateSource_()}},{key:"requestFeatures_",value:function(){var t=this;return this.source?this.loadFeaturesPromise_=new Promise((function(e){e(t.formater_.read(t.source,t.map.getProjection()))})):_D(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(e){t.loader_.getLoaderFn((function(t){e(t)}))(null,null,Object(u.o)(t.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"updateSource_",value:function(){var t=this;_D(this.vendorOptions_.source)&&this.requestFeatures_().then((function(e){t.ol3Layer&&t.ol3Layer.setSource(new Tg({loader:function(r,n,i){t.loaded_=!0,t.facadeVector_.clear(),t.facadeVector_.addFeatures(e,!1,!1),t.redraw(),t.fire(Xl,[e])}}))}))}},{key:"getFeaturesExtentPromise",value:function(t,e){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(t,e),a=wh.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(t){var e=wh.getFeaturesExtent(t,i);n(e)}))}))}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=e&&this.name===t.name,e=e&&this.extract===t.extract),e}}])&&wF(e.prototype,r),n&&wF(e,n),o}(kx);function PF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function RF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?PF(Object(r),!0).forEach((function(e){LF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function LF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MF(t){return(MF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kF(t,e,r){return(kF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GF(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function jF(t,e){return(jF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function FF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=GF(t);if(e){var i=GF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return DF(this,r)}}function DF(t,e){return!e||"object"!==MF(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function GF(t){return(GF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jF(t,e)}(o,t);var e,r,n,i=FF(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;NF(this,o);var a=new TF(t,r,n);return e=i.call(this,t,r,void 0,a),dD(TF)&&_l(uu("exception").geojsonlayer_method),_D(t)&&_l(uu("exception").no_param),xD(t)?e.url=t:mD(t)?e.source=t:(e.url=t.url,e.name=t.name,e.source=t.source,_D(t.crs)||(_D(e.source)&&(e.source={type:"FeatureCollection",features:[]}),e.source.crs={type:"EPSG",properties:{code:t.crs}})),e.options=r,e}return e=o,(r=[{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=this.name===t.name,e=e&&this.extract===t.extract),e}},{key:"setSource",value:function(t){this.source=t,this.getImpl().refresh(t)}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.DEFAULT_OPTIONS_STYLE;kF(GF(o.prototype),"setStyle",this).call(this,t,e,r)}},{key:"type",get:function(){return Du},set:function(t){dD(t)||_D(t)||t===Du||_l("El tipo de capa debe ser '".concat(Du).concat("' pero se ha especificado '").concat(t).concat("'"))}},{key:"source",get:function(){return this.getImpl().source},set:function(t){this.getImpl().source=t}}])&&AF(e.prototype,r),n&&AF(e,n),o}(Dw);UF.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},UF.DEFAULT_OPTIONS_STYLE={point:RF(RF({},UF.DEFAULT_PARAMS),{},{radius:5}),line:RF({},UF.DEFAULT_PARAMS),polygon:RF({},UF.DEFAULT_PARAMS)};var BF=UF;function zF(t){return(zF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YF(t,e,r){return(YF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KF(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function WF(t,e){return(WF=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function XF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=KF(t);if(e){var i=KF(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return HF(this,r)}}function HF(t,e){return!e||"object"!==zF(e)&&"function"!=typeof e?ZF(t):e}function ZF(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KF(t){return(KF=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&WF(t,e)}(o,t);var e,r,n,i=XF(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};VF(this,o);var n=new ZP(t);e=i.call(this);var a=new id(n.container,ZF(e),r);if(e.setImpl(a),_D(t)&&_l(uu("exception").no_param),dD(id)&&_l(uu("exception").constructor_impl),e._panels=[],e._plugins=[],e._areasContainer=null,e.popup_=[],e._defaultProj=!0,e.panel={LEFT:null,RIGHT:"null"},e._userZoom=null,e.userCenter_=null,e._finishedInitCenter=!0,e._finishedMaxExtent=!0,e._finishedMapImpl=!1,e._finishedMap=!1,e.centerFeature_=null,e.drawLayer_=null,e.userMaxExtent=null,e.ticket_=null,n.container.classList.add("m-mapea-container"),_D(n.bgColorContainer)||e.setBGColorContainer(n.bgColorContainer),a.on(Hl,(function(){e._finishedMapImpl=!0,e._checkCompleted()})),e.createMainPanels_(),e.featuresHandler_=new _R,e.featuresHandler_.addTo(ZF(e)),e.featuresHandler_.activate(),e.drawLayer_=new Dw({name:"__draw__"},{displayInLayerSwitcher:!1}),e.drawLayer_.setStyle(new q_(o.DRAWLAYER_STYLE)),e.drawLayer_.setZIndex(id.Z_INDEX.WFS+999),e.addLayers(e.drawLayer_),_D(n.projection)?e.setProjection(M.config.DEFAULT_PROJ,!0):e.setProjection(n.projection),_D(n.bbox)||e.setBbox(n.bbox),_D(n.resolutions)||e.setResolutions(n.resolutions),!_D(n.maxExtent)){var s=_D(n.zoom)&&_D(n.bbox);e.setMaxExtent(n.maxExtent,s)}if(_D(n.wmc)||e.addWMC(n.wmc),_D(n.layers)||e.addLayers(n.layers),_D(n.wms)||e.addWMS(n.wms),_D(n.wmts)||e.addWMTS(n.wmts),_D(n.kml)||e.addKML(n.kml),_D(n.controls)?e.addControls("panzoom"):e.addControls(n.controls),!_D(n.getfeatureinfo))if("plain"!==n.getfeatureinfo&&"html"!==n.getfeatureinfo&&"gml"!==n.getfeatureinfo)Ux(uu("dialog").getfeatureinfo_type);else{var l=new cP(n.getfeatureinfo);e.addControls(l)}return _D(n.wmc)&&_D(n.layers)&&e.addWMC(M.config.predefinedWMC.predefinedNames[0]),_D(n.center)||e.setCenter(n.center),_D(n.zoom)?_D(n.bbox)&&e.setZoom(0):e.setZoom(n.zoom),_D(n.rotation)||e.once(Hl,(function(){e.setRotation(n.rotation)})),_D(n.label)||e.addLabel(n.label),_D(n.ticket)||e.setTicket(n.ticket),_D(n.bbox)&&_D(n.zoom)&&_D(n.center)&&e.zoomToMaxExtent(!0),_D(n.center)&&_D(n.bbox)&&(e._finishedInitCenter=!1,e.getInitCenter_().then((function(t){_D(e.userCenter_)&&e.setCenter(t),e._finishedInitCenter=!0,e._checkCompleted()}))),e}return e=o,n=[{key:"LAYER_SORT",value:function(t,e){return _D(t)||_D(e)?0:t.getZIndex()-e.getZIndex()}}],(r=[{key:"getLayers",value:function(t){var e=t;dD(id.prototype.getLayers)&&_l(uu("exception").getlayers_method),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map(Ec)),this.getImpl().getLayers(r).sort(o.LAYER_SORT)}},{key:"getRootLayers",value:function(t){return this.getLayers(t).filter((function(t){return _D(t.getLayerGroup())}))}},{key:"getBaseLayers",value:function(){return dD(id.prototype.getBaseLayers)&&_l(uu("exception").getbaselayers_method),this.getImpl().getBaseLayers().sort(o.LAYER_SORT)}},{key:"getFeatureHandler",value:function(){return this.featuresHandler_}},{key:"addLayers",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addLayers)&&_l(uu("exception").addlayers_method),mD(r)||(r=[r]);var n=r.map((function(t){var r;if(t instanceof Lc)r=t;else{var n=Ec(t);if(_D(n.type))Ux(uu("dialog").invalid_type_layer);else switch(n.type){case"WFS":r=new MA(t,{style:n.style});break;case"WMC":r=new ck(t);break;case"WMS":r=new Ap(t);break;case"GeoJSON":r=new BF(n,{style:n.style});break;case"OSM":r=new _j(t);break;case"Mapbox":r=new Qk(t);break;case"KML":r=new nN(t);break;case"Vector":r=new Dw(t);break;case"WMTS":r=new kk(t);break;case"MVT":r=new pF(n);break;default:Ux(uu("dialog").invalid_type_layer)}}return r instanceof Dw&&!(r instanceof MA)&&e.featuresHandler_.addLayer(r),r.setMap(e),r}));this.getImpl().addLayers(n),this.fire(Pl,[n])}return this}},{key:"removeLayers",value:function(t){var e=this;if(!_D(t)){dD(id.prototype.removeLayers)&&_l(uu("exception").removelayers_method);var r=this.getLayers(t);r.forEach((function(t){t instanceof Dw&&e.featuresHandler_.removeLayer(t)})),this.getImpl().removeLayers(r)}return this}},{key:"getLayerGroup",value:function(){return dD(id.prototype.getLayerGroups)&&_l("La implementación usada no posee el método getLayerGroups"),this.getImpl().getLayerGroups().sort(o.LAYER_SORT)}},{key:"addLayerGroup",value:function(t){var e=t;return yD(e)&&_l("No ha especificado ningun grupo"),dD(id.prototype.addLayerGroups)&&_l("La implementación usada no posee el método addLayerGroups"),mD(e)||(e=[e]),this.getImpl().addLayerGroups(e),this}},{key:"removeLayerGroup",value:function(t){return yD(t)&&_l("No ha especificado ningun grupo a eliminar"),dD(this.getImpl().removeLayerGroups)&&_l("La implementación usada no posee el método removeGroups"),this.getImpl().removeLayerGroups(t),this}},{key:"getWMC",value:function(t){var e=t;dD(id.prototype.getWMC)&&_l(uu("exception").getwmc_method),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Ec(t,Lu)}))),this.getImpl().getWMC(r).sort(o.LAYER_SORT)}},{key:"addWMC",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addWMC)&&_l(uu("exception").addwmc_method),mD(r)||(r=[r]);var n=[];r.forEach((function(t){if(bD(t)&&t instanceof ck)t.setMap(e),n.push(t);else if(!(t instanceof Lc))try{var r=new ck(t,t.options);r.setMap(e),n.push(r)}catch(t){throw Ux(t.toString()),t}})),this.getImpl().addWMC(n),this.fire(Pl,[n]),this.fire(Rl,[n]);var i=this.getWMC();null==i.filter((function(t){return!0===t.selected}))[0]&&i[0].select(),i.length>1&&(this.removeControls("wmcselector"),this.addControls(new Ld))}return this}},{key:"refreshWMCSelectorControl",value:function(){this.removeControls("wmcselector"),1===this.getWMC().length?this.getWMC()[0].select():this.getWMC().length>1&&(this.addControls(new Ld),null==this.getWMC().filter((function(t){return!0===t.selected}))[0]&&this.getWMC()[0].select())}},{key:"removeWMC",value:function(t){if(!_D(t)){dD(id.prototype.removeWMC)&&_l(uu("exception").removewmc_method);var e=this.getWMC(t);e.length>0&&this.getImpl().removeWMC(e)}return this}},{key:"getKML",value:function(t){var e=t;dD(id.prototype.getKML)&&_l(uu("exception").getkml_method),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Ec(t,Mu)}))),this.getImpl().getKML(r).sort(o.LAYER_SORT)}},{key:"addKML",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addKML)&&_l(uu("exception").addkml_method),mD(r)||(r=[r]);var n=[];r.forEach((function(t){var r;bD(t)&&t instanceof nN?r=t:t instanceof Lc||(r=new nN(t,t.options)),!0===r.extract&&e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addKML(n),this.fire(Pl,[n]),this.fire(Ll,[n])}return this}},{key:"removeKML",value:function(t){var e=this;if(!_D(t)){dD(id.prototype.removeKML)&&_l(uu("exception").removekml_method);var r=this.getKML(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeKML(r))}return this}},{key:"getWMS",value:function(t){var e=t;dD(id.prototype.getWMS)&&_l(uu("exception").getwms_method),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Ec(t,Nu)}))),this.getImpl().getWMS(r).sort(o.LAYER_SORT)}},{key:"addWMS",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addWMS)&&_l(uu("exception").addwms_method),mD(r)||(r=[r]);var n=[];r.forEach((function(t){var r=t;t instanceof Ap||(r=new Ap(t,t.options)),r.setMap(e),n.push(r)})),this.getImpl().addWMS(n),this.fire(Pl,[n]),this.fire(Ml,[n])}return this}},{key:"removeWMS",value:function(t){if(!_D(t)){dD(id.prototype.removeWMS)&&_l(uu("exception").removewms_method);var e=this.getWMS(t);e.length>0&&this.getImpl().removeWMS(e)}return this}},{key:"getWFS",value:function(t){var e=t;dD(id.prototype.getWFS)&&_l(uu("exception").getwfs_method),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Ec(t,Au)}))),this.getImpl().getWFS(r).sort(o.LAYER_SORT)}},{key:"getGeoJSON",value:function(t){var e=t;return dD(id.prototype.getGeoJSON)&&_l(uu("exception").getgeojson_method),yD(e)?e=[]:mD(e)||(e=[e]),this.getImpl().getGeoJSON(e).sort(o.LAYER_SORT)}},{key:"addWFS",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addWFS)&&_l(uu("exception").addwfs_method),mD(r)||(r=[r]);var n=[];r.forEach((function(t){var r;if(bD(t)&&t instanceof MA)r=t;else if(!(t instanceof Lc))try{r=new MA(t,t.options)}catch(t){throw Ux(t.toString()),t}e.featuresHandler_.addLayer(r),n.push(r)})),this.getImpl().addWFS(n),this.fire(Pl,[n]),this.fire(Nl,[n])}return this}},{key:"removeWFS",value:function(t){var e=this;if(!_D(t)){dD(id.prototype.removeWFS)&&_l(uu("exception").removewfs_method);var r=this.getWFS(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeWFS(r))}return this}},{key:"getWMTS",value:function(t){var e=t;dD(id.prototype.getWMTS)&&_l(uu("exception").getwmts_method),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Ec(t,ku)}))),this.getImpl().getWMTS(r).sort(o.LAYER_SORT)}},{key:"addWMTS",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addWMTS)&&_l(uu("exception").addwmts_method),mD(r)||(r=[r]);var n=[];r.forEach((function(t){if(bD(t)&&t instanceof kk)t.setMap(e),n.push(t);else if(!(t instanceof Lc)){var r=new kk(t,t.options);r.setMap(e),n.push(r)}})),this.getImpl().addWMTS(n),this.fire(Pl,[n]),this.fire(Fl,[n])}return this}},{key:"removeWMTS",value:function(t){if(!_D(t)){dD(id.prototype.removeWMTS)&&_l(uu("exception").removewmts_method);var e=this.getWMTS(t);e.length>0&&this.getImpl().removeWMTS(e)}return this}},{key:"getMVT",value:function(t){var e=t;dD(id.prototype.getMVT)&&_l("La implementación usada no posee el método getWFS"),yD(e)?e=[]:mD(e)||(e=[e]);var r=[];return e.length>0&&(r=e.map((function(t){return Ec(t,Uu)}))),this.getImpl().getMVT(r).sort(o.LAYER_SORT)}},{key:"removeMVT",value:function(t){var e=this;if(!_D(t)){dD(id.prototype.removeMVT)&&_l("La implementación usada no posee el método removeWFS");var r=this.getMVT(t);r.length>0&&(r.forEach((function(t){e.featuresHandler_.removeLayer(t)})),this.getImpl().removeMVT(r))}return this}},{key:"addMVT",value:function(t){var e=t;if(!_D(e)){dD(id.prototype.addMVT)&&_l("La implementación usada no posee el método addWFS"),mD(e)||(e=[e]);var r=[];e.forEach((function(t){var e;if(bD(t)&&t instanceof pF)e=t;else if(!(t instanceof Lc))try{e=new pF(t,t.options)}catch(t){throw Ux(t.toString()),t}r.push(e)})),this.getImpl().addMVT(r),this.fire(Pl,[r]),this.fire(Al,[r])}return this}},{key:"getControls",value:function(t){var e=t;return dD(id.prototype.getControls)&&_l(uu("exception").getcontrols_method),yD(e)?e=[]:mD(e)||(e=[e]),this.getImpl().getControls(e)}},{key:"addControls",value:function(t){var e=this,r=t;if(!_D(r)){dD(id.prototype.addControls)&&_l(uu("exception").addcontrols_method),mD(r)||(r=[r]);var n=[];r.forEach((function(t){var r=function(t){var e=null;if(xD(t)){var r,n=OD(t),i=(CP(r={},cP.NAME,new cP("html")),CP(r,Hw.NAME,new Hw),CP(r,CE.NAME,new CE),CP(r,TS.NAME,new TS),CP(r,hI.NAME,new hI),CP(r,QS.NAME,new QS({toggleDelay:400})),CP(r,PI.NAME,new PI),CP(r,Ru.NAME,new Ru),CP(r,_O.NAME,new _O),CP(r,HE.NAME,new HE),CP(r,"".concat(HE.Name,"*true"),new HE({exactScale:!0})),CP(r,QO.NAME,new QO),CP(r,Ld.NAME,new Ld),r);if(!(n in i)){var o=FD([M.config.MAPEA_URL,"/api/actions/controls"]);Ux("El control ".concat(n," no está definido. Consulte los controles disponibles <a href='").concat(o,'\' target="_blank">aquí</a>'))}e=i[n]}else t instanceof yu?e=t:_l("El control añadido no es válido.");return e}(t),i=AP(r,e);e.hasControl(r)||(_D(i)?r.addTo(e):(i.addControls(r),e.addPanels(i)),n.push(r))})),this.getImpl().addControls(n)}}},{key:"hasControl",value:function(t){var e=t;t instanceof yu&&(e=t.name);var r=this.getControls().find((function(t){return t.name===e})),n=!_D(r);return n}},{key:"removeControls",value:function(t){_D(t)&&_l(uu("exception").remove_control),dD(id.prototype.removeControls)&&_l(uu("exception").removecontrol_method);var e=this.getControls(t);return(e=[].concat(e)).length>0&&(e.forEach((function(t){_D(t.getPanel())||t.getPanel().removeControls(t)})),this.getImpl().removeControls(e)),this}},{key:"getMaxExtent",value:function(){var t=this.userMaxExtent;if(_D(t)){var e=this.getWMC().find((function(t){return t.selected}));t=_D(e)?aG(this.getLayers().filter((function(t){return"__draw__"!==t.name})).map((function(t){return t.getMaxExtent()}))):e.getMaxExtent(),_D(t)&&(t=this.getProjection().getExtent())}return t}},{key:"calculateMaxExtent",value:function(){var t=this;return new Promise((function(e){var r=t.userMaxExtent;if(_D(r)){var n=t.getWMC().find((function(t){return t.selected}));if(_D(n)){var i=t.getLayers().filter((function(t){return"__draw__"!==t.name&&t.isVisible()})).map((function(t){return t.calculateMaxExtent()}));Promise.all(i).then((function(n){r=aG(n),_D(r)&&(r=t.getProjection().getExtent()),_D(t.userMaxExtent)||(r=t.userMaxExtent),e(r)}))}else n.calculateMaxExtent().then(e)}else e(r)}))}},{key:"setMaxExtent",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_D(t)&&this.resetMaxExtent(),dD(id.prototype.setMaxExtent)&&_l(uu("exception").setmaxextent_method);try{var r=gc(t);!mD(r)&&bD(r)&&(r=[r.x.min,r.y.min,r.x.max,r.y.max]),this.userMaxExtent=r,this.getImpl().setMaxExtent(r,e)}catch(t){throw Ux(t.toString()),t}return this}},{key:"resetMaxExtent",value:function(){var t=this;return this.userMaxExtent=null,this.calculateMaxExtent().then((function(e){var r=gc(e);t.getImpl().setMaxExtent(r,!0)})),this}},{key:"getBbox",value:function(){return dD(id.prototype.getBbox)&&_l(uu("exception").getbbox_method),this.getImpl().getBbox()}},{key:"setBbox",value:function(t,e){_D(t)&&_l(uu("exception").no_bbox),dD(id.prototype.setBbox)&&_l(uu("exception").setbbox_method);try{var r=gc(t);this.getImpl().setBbox(r,e)}catch(t){throw Ux(uu("exception").incorrect_format_bbox),t}return this}},{key:"getZoom",value:function(){return dD(id.prototype.getZoom)&&_l(uu("exception").getzoom_method),this.getImpl().getZoom()}},{key:"setZoom",value:function(t){_D(t)&&_l(uu("exception").no_zoom),dD(id.prototype.setZoom)&&_l(uu("exception").setzoom_method);try{var e=_c(t);this._userZoom=e,this.getImpl().setZoom(e)}catch(t){throw Ux(t.toString()),t}return this}},{key:"getCenter",value:function(){return dD(id.prototype.getCenter)&&_l(uu("exception").getcenter_method),this.getImpl().getCenter()}},{key:"setCenter",value:function(t){var e=this;_D(t)&&_l(uu("exception").no_center),dD(id.prototype.setCenter)&&_l(uu("exception").setcenter_method);var r=dc(t);return this.getImpl().setCenter(r),this.userCenter_=r,!0===r.draw&&(this.drawLayer_.clear(),this.centerFeature_=new mG("__mapeacenter__",{type:"Feature",geometry:{type:"Point",coordinates:[r.x,r.y]},properties:{vendor:{mapea:{click:function(t){var r=e.getLabel();_D(r)||r.show(e)}}}}}),this.drawFeatures([this.centerFeature_])),this}},{key:"getFeatureCenter",value:function(){return this.centerFeature_}},{key:"removeCenter",value:function(){this.removeFeatures(this.centerFeature_),this.centerFeature_=null,this.zoomToMaxExtent()}},{key:"getResolutions",value:function(){return dD(id.prototype.getResolutions)&&_l(uu("exception").getresolutions_method),this.getImpl().getResolutions()}},{key:"setResolutions",value:function(t){_D(t)&&_l(uu("exception").no_resolutions),dD(id.prototype.setResolutions)&&_l(uu("exception").setresolutions_method);var e=mc(t);return this.getImpl().setResolutions(e),this}},{key:"getScale",value:function(){return dD(id.prototype.getScale)&&_l(uu("exception").getscale_method),this.getImpl().getScale()}},{key:"getExactScale",value:function(){return dD(id.prototype.getExactScale)&&_l("La implementación usada no posee el método getScale"),this.getImpl().getExactScale()}},{key:"getProjection",value:function(){return dD(id.prototype.getProjection)&&_l(uu("exception").getprojection_method),this.getImpl().getProjection()}},{key:"setProjection",value:function(t,e){var r=t;_D(r)&&_l(uu("exception").no_projection),dD(id.prototype.setProjection)&&_l(uu("exception").setprojection_method);try{var n=this.getProjection();r=yc(r),n.code!==r.code&&(this.getImpl().setProjection(r),this._defaultProj=this._defaultProj&&!0===e,this.fire(Jl,[n,r]))}catch(t){Ux(t.toString()),String(t).indexOf("El formato del parámetro projection no es correcto")>=0&&this.setProjection(M.config.DEFAULT_PROJ,!0)}return this}},{key:"getPlugins",value:function(t){var e=this,r=t;yD(r)?r=[]:mD(r)||(r=[r]);var n=[];return 0===r.length?n=this._plugins:r.forEach((function(t){n=n.concat(e._plugins.filter((function(e){return t===e.name})))})),n}},{key:"addPlugin",value:function(t){return _D(t)&&_l(uu("exception").no_plugins),dD(t.addTo)&&_l(uu("exception").no_add_plugin_to_map),this._plugins.push(t),t.addTo(this),this}},{key:"removePlugins",value:function(t){var e=this,r=t;return _D(r)&&_l(uu("exception").no_plugin_to_remove),mD(r)||(r=[r]),(r=[].concat(r)).length>0&&r.forEach((function(t){t.destroy(),e._plugins=e._plugins.filter((function(e){return t.name!==e.name}))})),this}},{key:"getEnvolvedExtent",value:function(){var t=this;return new Promise((function(e){var r=t.getWMC().find((function(t){return t.selected}));if(_D(r)){var n=t.getBaseLayers().find((function(t){return t.isVisible()}));if(_D(n)){var i=t.getLayers().filter((function(t){return"__draw__"!==t.name}));Promise.all(i.map((function(t){return t.calculateMaxExtent()}))).then((function(r){var n=_D(r)?[t.getProjection().getExtent()]:r,i=aG(n);e(i)}))}else n.getMaxExtent(e)}else r.getMaxExtent(e)}))}},{key:"zoomToMaxExtent",value:function(t){var e=this;return this.calculateMaxExtent().then((function(r){(!0!==t||_D(e._userZoom))&&e.setBbox(r),e._finishedMaxExtent=!0,e._checkCompleted()})),this}},{key:"setTicket",value:function(t){return this.ticket_=t,M.config.ticket=t,this}},{key:"getTicket",value:function(){return this.ticket_}},{key:"getInitCenter_",value:function(){var t=this;return new Promise((function(e,r){t.calculateMaxExtent().then((function(t){var r;r=mD(t)?{x:(t[0]+t[2])/2,y:(t[1]+t[3])/2}:{x:(t.x.max+t.x.min)/2,y:(t.y.max+t.y.min)/2},e(r)}))}))}},{key:"destroy",value:function(){return dD(id.prototype.destroy)&&_l(uu("exception").destroy_method),this.getImpl().destroy(),this}},{key:"addLabel",value:function(t,e){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_D(t)&&_l(uu("exception").no_projection),dD(id.prototype.addLabel)&&_l(uu("exception").addlabel_method);var i=null,o=null,a=t,s=e;return mD(t)||(a=[t]),dD(e)||mD(e[0])?dD(e)&&(s=[]):s=[e],a.forEach((function(e,a){var l=void 0===e.panMapIfOutOfView||t.panMapIfOutOfView;if(bD(e)?(i=UD(e.text),o=e.coord):(i=UD(e),o=s[a]),o=_D(o)?r.getCenter():dc(o),_D(o))r.getInitCenter_().then((function(t){var e=new WP(i,t,l);r.getImpl().addLabel(e,n)}));else{var u=new WP(i,o,l);r.getImpl().addLabel(u,n)}})),this}},{key:"getLabel",value:function(){return this.getImpl().getLabel()}},{key:"getLabels",value:function(){return this.getImpl().getLabels()}},{key:"removeLabel",value:function(t){return this.getImpl().removeLabel(t)}},{key:"drawPoints",value:function(t){var e=t;_D(e)&&_l(uu("exception").no_point),mD(e)||(e=[e]);var r=e.map((function(t){var e={type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},properties:{}};return vD(t.click)&&(e.properties.vendor={mapea:{click:t.click}}),new mG(null,e)}));this.drawLayer_.addFeatures(r)}},{key:"drawFeatures",value:function(t){return this.drawLayer_.addFeatures(t),this}},{key:"removeFeatures",value:function(t){return this.drawLayer_.removeFeatures(t),this}},{key:"addPanels",value:function(t){var e=this,r=t;return _D(r)||(mD(r)||(r=[r]),r.forEach((function(t){var r=e._panels.some((function(e){return e.equals(t)}));if(t instanceof OP&&!r){e._panels.push(t);var n="div.m-area".concat(t.position),i=e._areasContainer.querySelector(n);t.addTo(e,i)}}))),this}},{key:"removePanel",value:function(t){return t.getControls().length>0&&_l(uu("exception").remove_control_from_panel),t instanceof OP&&(t.destroy(),this._panels=this._panels.filter((function(e){return!e.equals(t)}))),this}},{key:"getPanels",value:function(t){var e=this,r=t,n=[];return _D(r)?n=this._panels:(mD(r)||(r=[r]),r.forEach((function(t){e._panels.filter((function(e){return e.name===t})).forEach((function(t){_D(t)||n.push(t)}))}))),n}},{key:"createMainPanels_",value:function(){this._areasContainer=document.createElement("div"),this._areasContainer.classList.add("m-areas");var t=document.createElement("div");t.classList.add("m-area"),t.classList.add("m-top"),t.classList.add("m-left");var e=document.createElement("div");e.classList.add("m-area"),e.classList.add("m-top"),e.classList.add("m-right");var r=document.createElement("div");r.classList.add("m-area"),r.classList.add("m-bottom"),r.classList.add("m-left");var n=document.createElement("div");n.classList.add("m-area"),n.classList.add("m-bottom"),n.classList.add("m-right"),this._areasContainer.appendChild(t),this._areasContainer.appendChild(e),this._areasContainer.appendChild(r),this._areasContainer.appendChild(n),this.getContainer().appendChild(this._areasContainer)}},{key:"getContainer",value:function(){return dD(id.prototype.getContainer)&&_l(uu("exception").getcontainer_method),this.getImpl().getContainer()}},{key:"getMapImpl",value:function(){return dD(id.prototype.getMapImpl)&&_l(uu("exception").getmapimpl_method),this.getImpl().getMapImpl()}},{key:"getPopup",value:function(){return 0===this.popup_.length?null:this.popup_[0]}},{key:"getPopups",value:function(){var t=null;return 0===this.popup_.length?t=null:this.popup_.length>=1&&(t=this.popup_),t}},{key:"removePopup",value:function(t){var e=this;return dD(id.prototype.removePopup)&&_l(uu("exception").removepopup_method),_D(t)?(this.popup_.forEach((function(t){e.getImpl().removePopup(t),t.destroy()})),this.popup_=[]):mD(t)?t.forEach((function(t,r){var n=e.popup_.findIndex((function(e){return e.getId()===t.getId()}));e.getImpl().removePopup(e.popup_[n]),e.popup_[n].destroy(),e.popup_.splice(n,1)})):(this.getImpl().removePopup(t),t.destroy(),this.popup_.forEach((function(r,n){r.getId()===t.getId()&&e.popup_.splice(n,1)}))),this}},{key:"addPopup",value:function(t,e){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_D(t)&&_l(uu("exception").no_popup);var i=t,o=e;return mD(t)||(i=[t]),mD(e[0])||(o=[e]),i.forEach((function(t,e){n&&(r.removePopup(r.popup_),r.popup_=[]),r.popup_.push(t),t.addTo(r,o[e])})),this}},{key:"addUpClass_",value:function(t){var e=this;t.on(Cl,(function(t){3===e.getControls(["wmcselector","scale","scaleline"]).length&&e.getControls(["scaleline"])[0].getElement().classList.add("ol-scale-line-up")}))}},{key:"_checkCompleted",value:function(){this._finishedInitCenter&&this._finishedMaxExtent&&this._finishedMapImpl&&(this._finishedMap=!0,this.fire(Hl))}},{key:"on",value:function(t,e,r){var n=YF(KF(o.prototype),"on",this).call(this,t,e,r);return t===Hl&&!0===this._finishedMap&&this.fire(Hl),n}},{key:"refresh",value:function(){return!dD(this.getImpl().refresh)&&vD(this.getImpl().refresh)&&this.getImpl().refresh(),this.getLayers().forEach((function(t){return t.refresh()})),this}},{key:"isFinished",value:function(){return this._finishedMap}},{key:"getRotation",value:function(){return dD(id.prototype.getRotation)&&_l(uu("exception").no_get_rotation_method),this.getImpl().getRotation()*(180/Math.PI)}},{key:"setRotation",value:function(t){dD(id.prototype.setRotation)&&_l(uu("exception").no_set_rotation_method),this.getImpl().setRotation(t*(Math.PI/180)),this.fire(tu,[t])}},{key:"setBGColorContainer",value:function(t){_D(t)||(document.querySelector(".m-mapea-container").style.backgroundColor=t,document.querySelector(".m-mapea-container").style.backgroundImage="unset")}},{key:"enableMouseWheel",value:function(t){this.getImpl().enableMouseWheel(t)}},{key:"enableDrag",value:function(t){this.getImpl().enableDrag(t)}},{key:"setZoomLevels",value:function(t){var e=this;dD(t)||_D(t)||this.calculateMaxExtent().then((function(r){var n=e.getZoom(),i=e.getMapImpl().getSize(),o=e.getProjection().units,a=MD(r,i,t,o);e.setResolutions(a,!0),M.config.ZOOM_LEVELS=t,n<t&&e.setZoom(n)})).catch((function(t){throw t}))}},{key:"getImageMap",value:function(){return this.getImpl().getImageMap()}},{key:"defaultProj",get:function(){return this._defaultProj}},{key:"areasContainer",get:function(){return this._areasContainer}}])&&qF(e.prototype,r),n&&qF(e,n),o}(Il);JF.DRAWLAYER_STYLE={fill:{color:"#009e00"},stroke:{color:"#fcfcfc",width:2},radius:7};var $F=JF,QF=(r(158),!0),tD=[],eD=jn.version;function rD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nD=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=null,this.xml=null,this.headers={},this.error=!1,this.code=0}var e,r,n;return e=t,(r=[{key:"parseXmlHttp",value:function(t){var e=this;this.text=t.responseText,this.xml=t.responseXML,this.code=t.status,this.error=""!==t.statusText&&"OK"!==t.statusText;var r=t.getAllResponseHeaders();(r=r.split("\n")).forEach((function(t){var r=t,n=(r=r.trim()).replace(/^([^:]+):(.+)$/,"$1").trim(),i=r.replace(/^([^:]+):(.+)$/,"$2").trim();""!==n&&(e.headers[n]=i)}))}},{key:"parseProxy",value:function(t){var e=this;if(this.code=t.code,this.error=t.error,200===this.code&&!0!==this.error){this.text=t.content.trim();try{var r=t.headers["Content-Type"];"undefined"!=typeof DOMParser&&/text\/html/i.test(r)?this.xml=(new DOMParser).parseFromString(this.text,"text/html"):/xml/i.test(r)&&(this.xml=(new DOMParser).parseFromString(this.text,"text/xml"))}catch(t){this.xml=null,this.error=!0}}Object.keys(t.headers).forEach((function(r){e.headers[r]=t.headers[r]}))}}])&&rD(e.prototype,r),n&&rD(e,n),t}(),iD="GET",oD="POST",aD=function(t,e){var r=M.config.PROXY_URL;return e===oD&&(r=M.config.PROXY_POST_URL),r=ID(r,{url:t})},sD=function(t,e,r){var n=t;_D(e)||(n=ID(n,e)),QF&&(n=aD(n,iD));var i=CD("mapea_jsonphandler_");if(n=ID(n,{callback:i}),!_D(r)&&"ticket"in r&&!1===r.ticket){var o=n.indexOf("ticket="),a=n.indexOf("&",o);n=n.substring(n,o)+n.substring(a,n.length)}var s=new Promise((function(t,e){var r=t;new Promise((function(t){window[i]=t})).then((function(t){delete window[i],function(t){var e=document.getElementById(t);e.parentNode.removeChild(e)}(i);var e=new nD;e.parseProxy(t),r(e)}))}));return function(t,e){var r=document.createElement("script");r.type="text/javascript",r.id=e,r.src=t,r.setAttribute("async",""),window.document.body.appendChild(r)}(n,i),s},lD=function(t,e,r,n){var i=t,o=e;return!1!==n&&!0===QF&&(i=aD(i,r)),bD(o)&&(o=JSON.stringify(o)),new Promise((function(t,e){var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){if(4===n.readyState){var e=new nD;e.parseXmlHttp(n),t(e)}},n.open(r,i,!0),n.send(o)}))},uD=function(t,e,r){var n=(_D(r)||!1!==r.jsonp)&&!1!==QF,i=new URL(t).origin;return!0===(n=n&&-1===tD.indexOf(i))?sD(t,e,r):lD(t,e,iD,!1)},cD={inches:1,in:1,Inch:1,ft:12,mi:63360,m:39.3701,dd:4374754,yd:36,d:4374754,degrees:4374754,nmi:72913.4252,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500,mm:39.37/1e3,cm:.3937,dm:39.37*100,km:39370,kmi:72913.4252,fath:71.999856,ch:791.998416,link:7.91998416,"us-in":1,"us-ft":12,"us-yd":36,"us-ch":792.0000000000001,"us-mi":63360,"ind-yd":35.999740205100004,"ind-ft":11.9999134017,"ind-ch":791.9942845122};function hD(t){return function(t){if(Array.isArray(t))return fD(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return fD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fD(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pD(t){return(pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dD=function(t){return void 0===t},gD=function(t){var e=!1;return null===t||dD(t)||(e="boolean"==typeof t),e},yD=function(t){var e=!1;return gD(t)||"number"==typeof t||(dD(t)?e=!0:t?null===t&&(e=!0):e=!0),e},mD=function(t){var e=!1;return yD(t)||(e=Object.prototype.toString.call(t)===Object.prototype.toString.call([])),e},_D=function t(e){var r=!1;return yD(e)?r=!0:mD(e)?(r=!0,e.length>0&&(r=!e.some((function(e){return!t(e)})))):"string"==typeof e&&0===e.trim().length&&(r=!0),r},vD=function(t){var e=!1;return yD(t)||(e="function"==typeof t&&!dD(t.call)),e},bD=function(t){var e=!1;return yD(t)||(e="object"===pD(t)&&!dD(t.toString)),e},xD=function(t){var e=!1;return yD(t)||(e="string"==typeof t),e},wD=function(t){var e=!1;return!yD(t)&&xD(t)&&(e=/(https?:\/\/[^*]+)/.test(t)),e},ED=function(t){return"number"==typeof t},OD=function(t,e){var r=t;return!_D(r)&&xD(r)&&(r=r.trim(),r=e?r.toUpperCase():r.toLowerCase()),r},SD=function(t,e){var r=null,n=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=e,o=i.indexOf("?");-1!==o&&(i=i.substring(o),null!==(r=new RegExp("[\\?&]".concat(n,"=([^&#]*)")).exec(i))&&(r=decodeURIComponent(r[1].replace(/\+/g," "))));return r},ID=function(t,e){var r=t;-1===r.indexOf("?")?r+="?":"?"!==r.charAt(r.length-1)&&(r+="&");var n="";bD(e)?(Object.keys(e).forEach((function(t){var r=e[t];n+=t,n+="=",n+=encodeURIComponent(r),n+="&"})),n=n.substring(0,n.length-1)):xD(e)&&(n=e);return r+=n},CD=function(t,e){var r="";return _D(t)||(r=t),r=r.concat(Math.random()).replace(/0\./,""),_D(e)||(r=r.concat(e)),r},TD=function(t,e,r){var n=t;return n=ID(n,"request=GetCapabilities"),n=ID(n,"service=WMS"),xD(e)&&(n=ID(n,{version:e})),xD(r)&&(n=ID(n,{ticket:r})),n},PD=function(t,e){var r=t;return r=ID(r,"request=GetCapabilities"),r=ID(r,"service=WMTS"),_D(e)||(r=ID(r,{version:e})),r},RD=function(t,e,r){var n=t,i=e,o=new Array(r);n=Number.parseFloat(n),i=Number.parseFloat(i);var a=2;Number.isNaN(n)||(a=Math.pow(i/n,1/(r-1)));for(var s=0;s<r;s+=1)o[s]=i/Math.pow(a,s);return o.sort((function(t,e){return e-t})),o},LD=function(t,e){var r,n=e;_D(t)||(yD(n)&&(n="degrees"),r=1/((t>1?1/t:t)*cD[n]*72));return r},MD=function(t,e,r,n){var i=t,o=null,a=null;mD(i)?(o=i[2]-i[0],a=i[3]-i[1]):bD(i)?(o=i.x.max-i.x.min,a=i.y.max-i.y.min):xD(i)&&(o=(i=i.split(","))[2]-i[0],a=i[3]-i[1]);var s=o/e[0],l=a/e[1],u=Math.max(s,l);return RD(null,u,r)},ND=function(t,e){var r=e;return _D(r)&&(r="degrees"),t*cD[r]*72},AD=function(t){var e;if(!_D(t)){var r=document.createElement("div");r.innerHTML=t,e=r.children[0]}return e},kD=function(t){var e=t;if(e&&(e=e.trim()).length>0){var r=e.indexOf(":");-1!==r&&(r+=1,e=e.substring(r,e.length))}return e},jD=function(t){var e=OD(t);return e=(e=e.replace(/_(\w)/g,(function(t,e){return" ".concat(e.toUpperCase())}))).replace(/^\w/,(function(t){return t.toUpperCase()}))},FD=function(t){var e=null;if(!_D(t)){e=(e=t[0]).replace(/\/+\s*$/,"");for(var r=1,n=t.length;r<n;r+=1){var i=t[r];0!==i.indexOf("/")&&(e=e.concat("/")),e=e.concat(i)}}return e},DD=function(t,e,r){var n=Object(t),i=parseInt(n.length,10)||0;if(0===i)return!1;var o,a,s=parseInt(r,10)||0;for(s>=0?o=s:(o=i+s)<0&&(o=0);o<i;){if(e===(a=n[o])||Object.equals(e,a))return!0;o+=1}return!1},GD=function t(e,r,n){var i=e;return Object.keys(r).forEach((function(e){dD(i[e])?i[e]=r[e]:Object.getPrototypeOf(i[e])===Object.prototype?t(i[e],r[e],n):!0===n&&(i[e]=r[e])})),i},UD=function(t){return t.replace(/(<\s*script[^>]*>)+[^<]*(<\s*\/\s*script[^>]*>)+/gi,"").replace(/(('|')\s*\+\s*)?\s*eval\s*\(.*\)\s*(\+\s*('|'))?/gi,"")},BD=function(t){var e=t;if("ontouchstart"in document){var r=0;e.addEventListener("touchstart",(function(t){r=e.scrollTop+t.touches[0].pageY})),e.addEventListener("touchmove",(function(t){e.scrollTop=r-t.touches[0].pageY}))}},zD=function(t,e){var r=t.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1"),n=e.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1");return r.toLowerCase()===n.toLowerCase()},VD=function(t){var e=[kc.toLowerCase(),"GeometryPropertyType".toLowerCase(),zc.toLowerCase(),jc.toLowerCase(),Bc.toLowerCase(),Fc.toLowerCase(),Dc.toLowerCase(),Gc.toLowerCase(),Uc.toLowerCase(),Vc.toLowerCase(),qc.toLowerCase(),"pointpropertytype","polygonpropertytype","linestringpropertytype","geometrypropertytype","multisurfacepropertytype","multilinestringpropertytype","surfacepropertytype","geometrypropertytype","geometryarraypropertytype","multigeometrypropertytype","multipolygonpropertytype","multipointpropertytype","abstractgeometricaggregatetype","pointarraypropertytype","curvearraypropertytype","solidpropertytype","solidarraypropertytype"],r=t.toLowerCase();return-1!==e.indexOf(r)},qD=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},YD=function(t){var e=t;!xD(t)&&t.outerHTML&&(e=t.outerHTML);var r=document.createElement("DIV");return r.innerHTML=e,r.textContent||r.innerText||""},WD=function(t,e,r){return l.a.scale([t,e]).colors(r)},XD=function(t){var e;if(xD(t)){var r=l()(t).hex();r=r.replace(/^#/,"0x"),e=l()(16777215-r).hex()}return e},HD=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return _D(r)||Object.keys(r).forEach((function(e){var i=r[e];mD(i)?i=hD(i):bD(i)&&(i=t({},i)),_D(n[e])?n[e]=i:bD(n[e])&&t(n[e],i)})),n},ZD=function(t,e){var r=hD(t);if(t.length<e){for(var n=(t[0]+t[1])/(e-1),i=1;i<e-1;i+=1)r[i]=n*i;r=[].concat(hD(r),[t[1]])}return r},KD=function(t,e){return t.ORDER-e.ORDER},JD=function(t){var e=new Image;return new Promise((function(r,n){e.onload=function(){return r(e)},e.src=t}))},$D=function t(e){var r;return mD(e)?r=(r=hD(e)).map(t):bD(e)?(r=HD({},e),Object.keys(r).forEach((function(e){var n=r[e];vD(n)?r[e]="{{f}}".concat(n.toString()):bD(n)&&(r[e]=t(n))}))):r=vD(e)?"{{f}}".concat(e.toString()):e,r},QD=function t(e){var r=e;if(/^\{\{f\}\}/.test(e)){var n=e.replace(/^\{\{f\}\}(.+)/,"$1");r=new Function("f","return ".concat(n))()}else Object.keys(r).forEach((function(e){var n=r[e];if(/^\{\{f\}\}/.test(n)){var i=n.replace(/^\{\{f\}\}(.+)/,"$1");r[e]=new Function("f","return ".concat(i))()}else bD(n)&&t(n)}));return r},tG=function(t,e){var r=t.classList;r.contains(e)?r.remove(e):r.add(e)},eG=function(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)},rG=function(t){if(t){var e=t.parentElement;e&&e.removeChild(t)}},nG=function t(e){var r=!1;return Array.isArray(e)||"object"!==pD(e)||_D(e)?("function"==typeof e||"string"==typeof e&&/\{\{.*\}\}/.test(e))&&(r=!0):r=Object.values(e).some((function(e){return t(e)})),r},iG="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAwADADAREAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAgQGAAMFBwj/xAAaAQACAwEBAAAAAAAAAAAAAAABAwACBQQG/9oADAMBAAIQAxAAAAH6nAjsJBGa6wjLHdfHYSKvZeqmvnvmeW03ujmclCMS56qpDj7We++Xx06aCfzF5J29Bj3RYKgROx3M3XMzkpERpxsd18dhIIzJBEsd1/8A/8QAHBAAAwEBAQEBAQAAAAAAAAAAAgMFBAEAEwYU/9oACAEBAAEFAiLg8Oppos5Cc33Y5p4FTTOYJcLlQzo7UIDMqi5mfHzC183D3tSdLM522Fz66aFrQLc1Rj/H+aLvkZ15hu8+WmSPfpn0BIsbNa69U6blulVia27366agHO2/y5aGTPNQhOrNsx08AtW2WB0dpDwuHL0zmcuuV7t1zfBL00WCPB5//8QAIBEAAgEEAwEBAQAAAAAAAAAAAQIAERIhIgMTMRAyQv/aAAgBAwEBPwGXlsJOsn0yynhl5XD/AB9jYIBTAjGgqJaSt1Yu67RNTYZx5JMbkOVgcmikTqgAHk5MEGJ/SwGx8xje2JeRqsR64M5MkCPqbxKKwxAgApCGVqiLX9tE2N5+WFcpOwj0TsJ8EsLZf5//xAAoEQABBAEDAwQCAwAAAAAAAAACAAEDBBESIUExUWEFFSIzExQjMkL/2gAIAQIBAT8Bd2ZsuiuTWi0VG27r26Q/tldPRIN4pnZDcmqlottt3TOztllcIrUzVA6cqOMYhYAbZWjOKFzDq3dfrnJXe1r844Vd3uV/58PlUyKrM9Q+nC9O+cksvlWr8rEddh34worhyaKsgZfnKL0p3zguenGFHEETYBsL1H4SRS+VSb5T1843UUo0bZa31eVPMN20Oh9PlFbkAxggyTj1zyqd0jJ4pv75XqPzkii8q4JVZmth05X4YLMTuH+lHUijAQxnCmisQWfyxPqcvCrMYkVycsd2wqYlame2fThOzO2HRU5qpa6j7dl7jIH2xOvcZD+qJ0NOa0Wu2+3ZMzM2GX//xAAlEAABAwIGAwEBAQAAAAAAAAABAAIDBBEFEhMhMUEiMlEUQiP/2gAIAQEABj8CJJsB2jFh7PEczv4V6iulcfjUXQYi9ttvI7XQixBnieJ2cIEG4PaZh8Rs32lKbHG3KwdKSSMtDm7+fCkrv0Wu4y6X83V6kMeJOm9J+Hym7faIquqDy6TKFUUYh/0OzCw72UFBNTB7rgO1U+0oAMlxH/OVZYmBg5sFQ1A5bJlKxKkzFjsxsRypNV5qBbKZO1BpOMA9dQ8qGmptSeWK4kDx7J1PUB/6Mx2y7NCoaccukzFMxCIXb6yhSGMNyz7l4G91FHka/T3DiO/qbUQO15JrjKW2ACmxGql0dy17MvKfiEos31iCIIuD0jLh7/E8wP4VqihlafrVanoZXH65CXEH+I4gZwgALAdL/8QAIBABAAIBBQEBAQEAAAAAAAAAAQARITFBUXHwYcGBof/aAAgBAQABPyEGxrVoErNNRMOvX8mTK3aD3Uvhexf8HMvNNRMu/X8gNjWDRI4U8PY49ukPsWgQg3/YcdxUFIAyD3rM7VfN+McK+Xuce3GanEJwHiZmdd0I17qN3TltoZuneWOplXW0ftRenthouaHAJyPmGyKtMGyz/I7iEDNsff5NJkDFbMLdyg6m9/vUDGbaWoqanABwHmOFfD3OfbhMM8ofZ2S00dBuBIGrTCqFvg+aQ3Od9IKAe604jhTy9jn26wGxqVokvNNbMuvX9mDK2bH3cyZWzQe7lZprZh36/sBsagaBP//aAAwDAQACAAMAAAAQo4FGBA7SvIwnAyQo/F//xAAdEQEBAAIDAQEBAAAAAAAAAAABABGBITFBYXFR/9oACAEDAQE/EFxyyvBu9nL5WLwbhzyST2QGGeMh+2LL6JL6Lc4qBzcwn7L5w+9fIXAxbnHnoibLMJ9PsoMincq97c4J7LNvqKYdXedYhUx/YL6JM8MryavZ3s4Xk1Bjgv/EACIRAQABAwQDAQEBAAAAAAAAAAERACExQVFhcYHB8LHhkf/aAAgBAgEBPxBEkBSC3ZePHy8FF292LH76odjjF2Sdm/qgF+wcefh4aBJI0g8ZPjb7VNqj4ClFC5s67cHND9GV5g9xO1uKmADSaHpH/KQecnxt9qO9CfyxOif5V3rskzCZ7i9oisy4ErgvMOsbzPmpbEMy7JrrMfaiY4b23oR+SD0x/acuCUJkmSfFqSnEQ5M23cmG9HrDErM358F6GSSAIs1nJuPVE03LRYMx13xelH5ZPRH9oB5wPG/2ob1DQi9QJnfs/ZpgHKKEzvR68ZDAAiBZ2M2bVl8U1AQEPcREzGaAeMDxv9qu1IgkaQX7Lx4+HloszO5c/PdNm53bH57oBbsHHn5eSgQQFf/EACAQAQACAgIDAQEBAAAAAAAAAAERIQAxQVFhcZGBobH/2gAIAQEAAT8QTtB2AWq8GCJrqeglfoodN5zBhY7xKn8Zpp6KkEgAZQhHeCJvqegF/gANt4HaDsosR5MIyQ/phPKJGNPQc/0ACRXldq7yF3EzgMvsKPKYgZRAxGSmrFPBzImVkJYGgbpRaarCMEv7ZXwkFjR2DNrBDalj4/OOoUT4gQCVKaiJ8YKEllTEEgLuZjV5UGvGh5N2qoJuR5z5kIBY9B8zSwQ2oY+H3hA6OtTzAP8AcD15MbErKsRVvPrCI2DdxCA1bBZbxhvy/ugNKhakjtOsh6thgYJLAsFnZbOaWCG1BPx+cIyQftgPCYCdHYcZCYkxClOk4eZ5XF6Qd6bLtf8ADrI2LMXISFBcp7S41YIXgyJ6AgzSbcIwSfpkfKBSdPQMTtA2UUicmCJvqewt/qANtZxBhY7xIH9ZxBgY7zAn8YIGup7A1+Kh01gdoGwCgDgz/9k=",oG=function(t){return iG},aG=function(t){var e=null;return _D(t)||(e=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],t.forEach((function(t){_D(t)||(e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]))}))),e},sG=function(){var t=window.navigator.userAgent||window.navigator.vendor||window.opera,e="unknown";return/android/i.test(t)&&(e="android"),/iPad|iPhone|iPod/.test(t)&&!window.MSStream&&(e="ios"),e},lG=function(t,e,r){return c(t,e,r)};function uG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cG=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=r;this.facadeFeature_=null,this.formatter_=new vN,_D(r)?this.olFeature_=new Wc:(_D(r.type)&&(i.type="Feature"),this.olFeature_=this.formatter_.readFeature(i)),_D(e)?_D(this.olFeature_.getId())&&this.olFeature_.setId(CD("mapea_feature_")):this.olFeature_.setId(e)}var e,r,n;return e=t,n=[{key:"olFeature2Facade",value:function(t,e){var r=null;return _D(t)||(r=new mG).getImpl().setOLFeature(t,e),r}},{key:"olRenderFeature2Facade",value:function(e,r,n){var i=wh.olRenderFeature2olFeature(e,r,n);return t.olFeature2Facade(i)}},{key:"facade2OLFeature",value:function(t){return t.getImpl().getOLFeature()}},{key:"getGeometry",value:function(t){var e,r=t.geometry.type;return"circle"===r?e=new dh(t.geometry.coordinates):"geometry"===r?e=new ko(t.geometry.coordinates):"linestring"===r?e=new Qc(t.geometry.coordinates):"multilinestring"===r?e=new eh(t.geometry.coordinates):"multipoint"===r?e=new Hc(t.geometry.coordinates):"multipolygon"===r?e=new ih(t.geometry.coordinates):"point"===r?e=new aa(t.geometry.coordinates):"polygon"===r&&(e=new Oa(t.geometry.coordinates)),e}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"setOLFeature",value:function(t,e){_D(t)||(this.olFeature_=t,!1!==e&&_D(this.olFeature_.getId())&&this.olFeature_.setId(CD("mapea_feature_")))}},{key:"getAttributes",value:function(){var t=this.olFeature_.getProperties(),e=t.geometry;return!_D(e)&&e instanceof ko&&delete t.geometry,t}},{key:"getId",value:function(){return this.olFeature_.getId()}},{key:"setId",value:function(t){this.olFeature_.setId(t)}},{key:"setAttributes",value:function(t){this.olFeature_.setProperties(t)}},{key:"getAttribute",value:function(t){return this.olFeature_.get(t)}},{key:"setAttribute",value:function(t,e){return this.olFeature_.set(t,e)}},{key:"setGeometry",value:function(t){var e=t.type.toLowerCase();"circle"===e?this.olFeature_.setGeometry(new dh(t.coordinates)):"geometry"===e?this.olFeature_.setGeometry(new ko(t.coordinates)):"linestring"===e?this.olFeature_.setGeometry(new Qc(t.coordinates)):"multilinestring"===e?this.olFeature_.setGeometry(new eh(t.coordinates)):"multipoint"===e?this.olFeature_.setGeometry(new Hc(t.coordinates)):"multipolygon"===e?this.olFeature_.setGeometry(new ih(t.coordinates)):"point"===e?this.olFeature_.setGeometry(new aa(t.coordinates)):"polygon"===e&&this.olFeature_.setGeometry(new Oa(t.coordinates))}},{key:"setFacadeObj",value:function(t){this.facadeFeature_=t}},{key:"getCentroid",value:function(){var e,r=this.getOLFeature().getGeometry(),n=wh.getCentroid(r);if(!_D(n)){var i=new aa(n);e=new Wc({geometry:i,name:"centroid"})}return e=t.olFeature2Facade(e)}},{key:"clearStyle",value:function(){this.olFeature_.setStyle(null)}}])&&uG(e.prototype,r),n&&uG(e,n),t}();function hG(t){return(hG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pG(t,e){return(pG=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yG(t);if(e){var i=yG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gG(this,r)}}function gG(t,e){return!e||"object"!==hG(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yG(t){return(yG=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pG(t,e)}(o,t);var e,r,n,i=dG(o);function o(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var a=new cG(t,e,r);return(n=i.call(this,a)).style_=null,n.formatGeoJSON_=new CN,n.setStyle(r),n}return e=o,(r=[{key:"setId",value:function(t){this.getImpl().setId(t)}},{key:"getId",value:function(){return this.getImpl().getId()}},{key:"getGeometry",value:function(){return this.getGeoJSON().geometry}},{key:"setGeometry",value:function(t){this.getImpl().setGeometry(t)}},{key:"getGeoJSON",value:function(){return this.formatGeoJSON_.write(this)[0]}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"setAttributes",value:function(t){"object"===hG(t)?this.getImpl().setAttributes(t):Gx(uu("feature").incorrect_attributes)}},{key:"getAttribute",value:function(t){var e;if(e=this.getImpl().getAttribute(t),_D(e)){var r=t.split(".");r.length>1&&(e=r.reduce((function(t,e){var r;return _D(t)||(r=t instanceof o?t.getAttribute(e):t[e]),r}),this))}return e}},{key:"setAttribute",value:function(t,e){return this.getImpl().setAttribute(t,e)}},{key:"setStyle",value:function(t){!_D(t)&&t instanceof Rm?(this.style_=t,this.style_.applyToFeature(this)):_D(t)&&(this.style_=null,this.getImpl().clearStyle()),this.fire($l,[t,this])}},{key:"equals",value:function(t){return this.getId()===t.getId()}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null)}},{key:"getCentroid",value:function(){var t=this.getId(),e=this.getAttributes(),r=new q_({stroke:{color:"#67af13",width:2},radius:8,fill:{color:"#67af13",opacity:.2}}),n=this.getImpl().getCentroid();return _D(n)||(n.setId("".concat(t," centroid}")),n.setAttributes(e),n.setStyle(r)),n}}])&&fG(e.prototype,r),n&&fG(e,n),o}(Il);function _G(t){return(_G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vG(t,e){return(vG=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wG(t);if(e){var i=wG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xG(this,r)}}function xG(t,e){return!e||"object"!==_G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wG(t){return(wG=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vG(t,e)}(r,t);var e=bG(r);function r(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(i=e.call(this,CD("_mapea_cluster_"))).setAttributes(n),i.setAttribute("features",t),i}return r}(mG);function OG(t){return(OG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function CG(t,e){return(CG=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function TG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=RG(t);if(e){var i=RG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PG(this,r)}}function PG(t,e){return!e||"object"!==OG(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function RG(t){return(RG=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CG(t,e)}(o,t);var e,r,n,i=TG(o);function o(){return SG(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"addTo",value:function(t){var e=this;_D(t)&&_l(uu("exception").no_map);var r=this.getImpl();dD(r.addTo)&&_l(uu("exception").addto_method);var n=this.createView(t);n instanceof Promise?n.then((function(n){r.addTo(t,n),e.fire(Cl)})):(r.addTo(t,n),this.fire(Cl))}},{key:"createView",value:function(t){}},{key:"getControls",value:function(){}}])&&IG(e.prototype,r),n&&IG(e,n),o}(Il);function MG(t){return(MG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kG(t,e){return(kG=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=DG(t);if(e){var i=DG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return FG(this,r)}}function FG(t,e){return!e||"object"!==MG(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function DG(t){return(DG=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kG(t,e)}(o,t);var e,r,n,i=jG(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return NG(this,o),(e=i.call(this)).filterFunction_=t,e.cqlFilter_="",_D(r.cqlFilter)||(e.cqlFilter_=r.cqlFilter),e}return e=o,(r=[{key:"setFunction",value:function(t){this.filterFunction_=t}},{key:"getFunctionFilter",value:function(){return this.filterFunction_}},{key:"execute",value:function(t){return t.filter(this.filterFunction_)}},{key:"toCQL",value:function(){return this.cqlFilter_}}])&&AG(e.prototype,r),n&&AG(e,n),o}(Vx);function UG(t){return(UG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BG(t,e){return(BG=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qG(t);if(e){var i=qG(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return VG(this,r)}}function VG(t,e){return!e||"object"!==UG(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qG(t){return(qG=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BG(t,e)}(r,t);var e=zG(r);function r(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);return e.call(this,(function(e,r){var n=null;return _D(e)||(n=e.getGeometry()),t(n,r)}),n)}return r}(GG),WG=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function XG(t){return"string"==typeof t?t:""}var HG=function(t){function e(){return t.call(this)||this}return WG(e,t),e.prototype.getType=function(){return xg},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(XG(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return Object(Gn.b)()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(XG(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return Object(Gn.b)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(XG(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return Object(Gn.b)()},e.prototype.readProjection=function(t){return this.readProjectionFromText(XG(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return Object(Gn.b)()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return Object(Gn.b)()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return Object(Gn.b)()},e}(RI),ZG=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KG={POINT:aa,LINESTRING:Qc,POLYGON:Oa,MULTIPOINT:Hc,MULTILINESTRING:eh,MULTIPOLYGON:ih},JG="EMPTY",$G=0,QG=1,tU=2,eU=3,rU=4,nU=5,iU=6,oU={};for(var aU in fo.a)oU[aU]=fo.a[aU].toUpperCase();var sU=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,n=e;if("("==e)t=tU;else if(","==e)t=nU;else if(")"==e)t=eU;else if(this.isNumeric_(e)||"-"==e)t=rU,n=this.readNumber_();else if(this.isAlpha_(e))t=QG,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=iU}return{position:r,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),lU=function(){function t(t){this.lexer_=t,this.token_={position:0,type:$G},this.layout_=Io}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=Io,e=this.token_;if(this.isTokenType(QG)){var r=e.value;"Z"===r?t=Co:"M"===r?t=To:"ZM"===r&&(t=Po),t!==Io&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(tU)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(nU));if(this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(tU)){var t=this.parsePoint_();if(this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(tU)){var t=this.parsePointList_();if(this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(tU)){var t=this.parseLineStringTextList_();if(this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(tU)){var t=void 0;if(t=this.token_.type==tU?this.parsePointTextList_():this.parsePointList_(),this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(tU)){var t=this.parseLineStringTextList_();if(this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(tU)){var t=this.parsePolygonTextList_();if(this.match(eU))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var n=this.token_;if(!this.match(rU))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(nU);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(nU);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(nU);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(nU);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(QG)&&this.token_.value==JG;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(QG)){var e=t.value;this.layout_=this.parseGeometryLayout_();var r=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==e){if(r)return new hh([]);var n=this.parseGeometryCollectionText_();return new hh(n)}var i=KG[e];if(!i)throw new Error("Invalid geometry type: "+e);var o=void 0;if(r)o="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":o=this.parsePointText_();break;case"LINESTRING":o=this.parseLineStringText_();break;case"POLYGON":o=this.parsePolygonText_();break;case"MULTIPOINT":o=this.parseMultiPointText_();break;case"MULTILINESTRING":o=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":o=this.parseMultiPolygonText_()}return new i(o,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),uU=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,r}return ZG(e,t),e.prototype.parse_=function(t){var e=new sU(t);return new lU(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e),n=new Wc;return n.setGeometry(r),n},e.prototype.readFeaturesFromText=function(t,e){for(var r=[],n=this.readGeometryFromText(t,e),i=[],o=0,a=(r=this.splitCollection_&&n.getType()==fo.a.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new Wc;s.setGeometry(r[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){return LI(this.parse_(t),!1,e)},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(t[n].getGeometry());var o=new hh(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return dU(LI(t,!0,e))},e}(HG);function cU(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function hU(t){for(var e=t.getCoordinates(),r=[],n=0,i=e.length;n<i;++n)r.push(e[n].join(" "));return r.join(",")}function fU(t){for(var e=[],r=t.getLinearRings(),n=0,i=r.length;n<i;++n)e.push("("+hU(r[n])+")");return e.join(",")}var pU={Point:cU,LineString:hU,Polygon:fU,MultiPoint:function(t){for(var e=[],r=t.getPoints(),n=0,i=r.length;n<i;++n)e.push("("+cU(r[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),n=0,i=r.length;n<i;++n)e.push("("+hU(r[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),n=0,i=r.length;n<i;++n)e.push("("+fU(r[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),n=0,i=r.length;n<i;++n)e.push(dU(r[n]));return e.join(",")}};function dU(t){var e=t.getType(),r=(0,pU[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),r="";return e!==Co&&e!==Po||(r+="Z"),e!==To&&e!==Po||(r+="M"),r}(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" "+JG:e+"("+r+")"}var gU=uU;function yU(t){return(yU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vU(t,e){return(vU=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=wU(t);if(e){var i=wU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xU(this,r)}}function xU(t,e){return!e||"object"!==yU(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wU(t){return(wU=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vU(t,e)}(o,t);var e,r,n,i=bU(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mU(this,o),(t=i.call(this,e)).gjFormat_=new vN,t}return e=o,(r=[{key:"write",value:function(t){var e=this.gjFormat_.readGeometryFromObject(t);if("point"===e.getType().toLowerCase()){var r=e.getCoordinates();e.setCoordinates([r[0],r[1]])}return this.writeGeometryText(e)}}])&&_U(e.prototype,r),n&&_U(e,n),o}(gU);function OU(t){return(OU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function CU(t,e){return(CU=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function TU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=RU(t);if(e){var i=RU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PU(this,r)}}function PU(t,e){return!e||"object"!==OU(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function RU(t){return(RU=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CU(t,e)}(o,t);var e,r,n,i=TU(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};SU(this,o);var r=new EU(e);return t=i.call(this,r),dD(EU)&&_l(uu("exception").wkt_method),t}return e=o,(r=[{key:"write",value:function(t){return this.getImpl().write(t)}}])&&IU(e.prototype,r),n&&IU(e,n),o}(Il);function MU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AU=function(){function t(){MU(this,t),this.parser=new kt,this.capabilities=null}var e,r,n;return e=t,(r=[{key:"read",value:function(t){return this.capabilities=this.parser.read(t),this}},{key:"getMatrixSet",value:function(t,e){for(var r,n=0;n<this.capabilities.Contents.Layer.length&&void 0===r;n+=1){var i=this.capabilities.Contents.Layer[n];i.Identifier===t&&(_D(e)||(r=i.TileMatrixSetLink.filter((function(t){return t.contains(e)}))[0]),void 0===r&&(r=i.TileMatrixSetLink[0].TileMatrixSet))}return r}},{key:"getMatrixIds",value:function(t,e){var r=[],n=this.getMatrixSet(t,e),i=this.capabilities.Contents.TileMatrixSet.filter((function(t){return t.Identifier===n}))[0];return null!=i&&i.length>0&&(r=i.TileMatrix.map((function(t){return t.Identifier}))),r}},{key:"getFormat",value:function(t){var e,r=this.capabilities.Contents.Layer.filter((function(e){return e.Identifier===t}))[0];return null!=r&&(e=r.Format[0]),e}},{key:"getOptionsFromCapabilities",value:function(t,e){return vk(this.capabilities,{layer:t,matrixSet:e})}}])&&NU(e.prototype,r),n&&NU(e,n),t}();function kU(t){return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function FU(t,e){return(FU=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function DU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=UU(t);if(e){var i=UU(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return GU(this,r)}}function GU(t,e){return!e||"object"!==kU(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function UU(t){return(UU=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var BU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FU(t,e)}(o,t);var e,r,n,i=DU(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).geojsonFormatter_=new vN,t.name="drawLayer",t.selectedFeatures_=[],t}return e=o,(r=[{key:"addTo",value:function(t){this.map=t,this.fire(Cl),this.ol3Layer=new jv({source:new Tg({}),style:new $y({fill:new zg({color:"rgba(0, 158, 0, 0.1)"}),stroke:new Bg({color:"#fcfcfc",width:2}),image:new Yy({radius:7,fill:new zg({color:"#009E00"}),stroke:new Bg({color:"#fcfcfc",width:2})})}),zIndex:id.Z_INDEX.WFS+999}),!1!==this.options.visibility&&this.setVisible(this.inRange()),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(t){this.selectedFeatures_=t,vD(this.selectedFeatures_[0].click)&&this.selectedFeatures_[0].click()}},{key:"unselectFeatures",value:function(){this.selectedFeatures_.length>0&&(this.selectedFeatures_.length=0,this.map.removePopup())}},{key:"drawPoints",value:function(t){var e=t;_D(e)&&_l(uu("exception").no_point),mD(e)||(e=[e]);var r=this.pointsToGeoJSON_(e);this.drawGeoJSON(r)}},{key:"drawGeoJSON",value:function(t){var e=this,r=t;_D(r)&&_l(uu("exception").no_geojson),mD(r)||(r=[r]);var n=Object(u.o)(this.map.getProjection().code),i=[];r.forEach((function(t){var r=e.geojsonFormatter_.readFeatures(t,{dataProjection:n});i=i.concat(r)})),this.ol3Layer.getSource().addFeatures(i)}},{key:"drawFeatures",value:function(t){var e=t;_D(e)||(mD(e)||(e=[e]),this.ol3Layer.getSource().addFeatures(e))}},{key:"removeFeatures",value:function(t){var e=t;if(!_D(e)){mD(e)||(e=[e]);var r=this.ol3Layer.getSource();e.forEach((function(t){try{r.removeFeature(t)}catch(t){throw t}}))}}},{key:"getPoints",value:function(t){var e=[],r=this.ol3Layer.getSource();return e=_D(t)?r.getFeatures():r.getFeaturesAtCoordinate(t),this.featuresToPoints_(e)}},{key:"destroy",value:function(){var t=this.map.getMapImpl();_D(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.options=null,this.map=null}},{key:"equals",value:function(t){var e=!1;return t instanceof o&&(e=e&&this.name===t.name),e}},{key:"pointsToGeoJSON_",value:function(t){var e=this,r=Object(u.o)(this.map.getProjection().code);return t.map((function(t){var n=t.data,i=new aa([t.x,t.y]);return{type:"Feature",geometry:e.geojsonFormatter_.writeGeometryObject(i,{dataProjection:r}),properties:n,click:t.click,showPopup:t.showPopup}}))}},{key:"featuresToPoints_",value:function(t){return[]}}])&&jU(e.prototype,r),n&&jU(e,n),o}(Rh),zU=34962,VU=34963,qU=35044,YU=35048,WU=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function XU(t,e){for(var r=Object(ii.a)({preserveDrawingBuffer:!0,antialias:!ni.f},e),n=WU.length,i=0;i<n;++i)try{var o=t.getContext(WU[i],r);if(o)return o}catch(t){}return null}var HU=qU;function ZU(t){switch(t){case zU:return Float32Array;case VU:return Uint32Array;default:return Float32Array}}var KU=function(){function t(t,e){this.array=null,this.type=t,Object(Ui.a)(t===zU||t===VU,62),this.usage=void 0!==e?e:HU}return t.prototype.ofSize=function(t){this.array=new(ZU(this.type))(t)},t.prototype.fromArray=function(t){var e=ZU(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(ZU(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),JU=r(26),$U=r(83),QU="webglcontextlost",tB="webglcontextrestored",eB=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e,r,n){var i=this.getGL(),o=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!e){var a=Object(Gn.c)(i.canvas);if(!t.renderTargets[a]){var s=i.getContextAttributes();s&&s.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[a]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var l=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,l),this.applyUniforms(t),r&&r(i,t),i.drawArrays(i.TRIANGLES,0,6),n&&n(i,t)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)}))},t}();function rB(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var nB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iB="u_projectionMatrix",oB="u_offsetScaleMatrix",aB="u_offsetRotateMatrix",sB="u_time",lB="u_zoom",uB="u_resolution",cB={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},hB={};function fB(t){return"shared/"+t}var pB=0;function dB(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*gB(n.type)}return e}function gB(t){switch(t){case cB.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case cB.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case cB.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case cB.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var yB=function(t){function e(e){var r,n=t.call(this)||this,i=e||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?fB(i.canvasCacheKey):(r="unique/"+pB,pB+=1,r),n.canvas_=function(t){var e=hB[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},hB[t]=e}return e.users+=1,e.canvas}(n.canvasCacheKey_),n.gl_=XU(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(QU,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(tB,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Object(Un.d)(),n.offsetScaleMatrix_=Object(Un.d)(),n.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map((function(t){return new eB({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new eB({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return nB(e,t),e.prototype.setUniforms=function(t){for(var e in this.uniforms_=[],t)this.uniforms_.push({name:e,value:t[e]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===fB(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e},e.prototype.bindBuffer=function(t){var e=this.getGL(),r=Object(Gn.c)(t),n=this.bufferCache_[r];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=n);e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=Object(Gn.c)(t),n=this.bufferCache_[r];n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(QU,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(tB,this.boundHandleWebGLContextRestored_),function(t){var e=hB[t];if(e&&(e.users-=1,!(e.users>0))){var r=XU(e.canvas).getExtension("WEBGL_lose_context");r&&r.loseContext(),delete hB[t]}}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,e){var r=this.getGL(),n=this.getCanvas(),i=t.size,o=t.pixelRatio;n.width=i[0]*o,n.height=i[1]*o,n.style.width=i[0]+"px",n.style.height=i[1]+"px",r.useProgram(this.currentProgram_);for(var a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL();this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t,e,r){for(var n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(t,null,e,r):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Object(Un.h)(this.offsetScaleMatrix_);Object(Un.j)(n,2/e[0],2/e[1]);var i=Object(Un.h)(this.offsetRotateMatrix_);0!==r&&Object(Un.i)(i,-r),this.setUniformMatrixValue(oB,rB(this.tmpMat4_,n)),this.setUniformMatrixValue(aB,rB(this.tmpMat4_,i)),this.setUniformFloatValue(sB,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(lB,t.viewState.zoom),this.setUniformFloatValue(uB,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,rB(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){var a="Fragment shader compliation failed: ".concat(r.getShaderInfoLog(n));throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){a="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(i));throw new Error(a)}if(r.deleteShader(i),!r.getProgramParameter(o,r.LINK_STATUS)){a="GL program linking failed: ".concat(r.getShaderInfoLog(i));throw new Error(a)}return o},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return Object(Un.h)(e),Object(Un.b)(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformFloatVec4=function(t,e){this.getGL().uniform4fv(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=dB(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||5126,e,r),r+=i.size*gB(i.type)}},e.prototype.handleWebGLContextLost=function(){Object(ii.b)(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(Fn.a),mB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_B="GENERATE_BUFFERS",vB=function(t){function e(e,r){var n=t.call(this,e)||this,i=r||{};return n.inversePixelTransform_=Object(Un.d)(),n.pixelContext_=null,n.postProcesses_=i.postProcesses,n.uniforms_=i.uniforms,n.helper,e.addChangeListener(JU.a.MAP,n.removeHelper.bind(n)),n.dispatchPreComposeEvent=n.dispatchPreComposeEvent.bind(n),n.dispatchPostComposeEvent=n.dispatchPostComposeEvent.bind(n),n}return mB(e,t),e.prototype.dispatchPreComposeEvent=function(t,e){var r=this.getLayer();if(r.hasListener($n.a.PRECOMPOSE)){var n=new Jn.a($n.a.PRECOMPOSE,void 0,e,t);r.dispatchEvent(n)}},e.prototype.dispatchPostComposeEvent=function(t,e){var r=this.getLayer();if(r.hasListener($n.a.POSTCOMPOSE)){var n=new Jn.a($n.a.POSTCOMPOSE,void 0,e,t);r.dispatchEvent(n)}},e.prototype.reset=function(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var r=!0,n=-1,i=void 0,o=0,a=t.layerStatesArray.length;o<a;o++){var s=t.layerStatesArray[o].layer,l=s.getRenderer();if(l instanceof e){var u=s.getClassName();if((r||u!==i)&&(n+=1,r=!1),i=u,l===this)break}else r=!0}var c="map/"+t.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(c)||(this.removeHelper(),this.helper=new yB({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:c}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){Object(Un.b)(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);var i=new Jn.a(t,this.inversePixelTransform_,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_($n.a.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_($n.a.POSTRENDER,t,e)},e.prototype.getDataAtPixel=function(t,e,r){var n=Object(Un.a)([e.pixelRatio,0,0,e.pixelRatio,0,0],t.slice()),i=this.helper.getGL();if(!i)return null;var o=this.getLayer().getExtent();if(o){var a=Object(Un.a)(e.pixelToCoordinateTransform,t.slice());if(!Object(mt.g)(o,a))return null}var s=i.getContextAttributes();if(!s||!s.preserveDrawingBuffer)return new Uint8Array;var l,u=Math.round(n[0]),c=Math.round(n[1]),h=this.pixelContext_;if(!h){var f=document.createElement("canvas");f.width=1,f.height=1,h=f.getContext("2d"),this.pixelContext_=h}h.clearRect(0,0,1,1);try{h.drawImage(i.canvas,u,c,1,1,0,0,1,1),l=h.getImageData(0,0,1,1).data}catch(t){return l}return 0===l[3]?null:l},e}($U.a);var bB=vB,xB=new Uint8Array(4),wB=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){Object(h.b)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return xB[0]=0,xB[1]=0,xB[2]=0,xB[3]=0,xB;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return xB[0]=this.data_[4*r],xB[1]=this.data_[4*r+1],xB[2]=this.data_[4*r+2],xB[3]=this.data_[4*r+3],xB},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),EB=r(117),OB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SB=function(t){function e(e,r){var n=this,i=r.uniforms||{},o=Object(Un.d)();i[iB]=o,(n=t.call(this,e,{uniforms:i,postProcesses:r.postProcesses})||this).ready=!1,n.sourceRevision_=-1,n.verticesBuffer_=new KU(zU,YU),n.hitVerticesBuffer_=new KU(zU,YU),n.indicesBuffer_=new KU(VU,YU),n.vertexShader_=r.vertexShader,n.fragmentShader_=r.fragmentShader,n.program_,n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitVertexShader_=r.hitVertexShader,n.hitFragmentShader_=r.hitFragmentShader,n.hitProgram_;var a=r.attributes?r.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:cB.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:cB.FLOAT},{name:"a_index",size:1,type:cB.FLOAT}].concat(a),n.hitDetectionAttributes=[{name:"a_position",size:2,type:cB.FLOAT},{name:"a_index",size:1,type:cB.FLOAT},{name:"a_hitColor",size:4,type:cB.FLOAT},{name:"a_featureUid",size:1,type:cB.FLOAT}].concat(a),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=Object(mt.k)(),n.currentTransform_=o,n.renderTransform_=Object(Un.d)(),n.invertRenderTransform_=Object(Un.d)(),n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_,n.generateBuffersRun_=0,n.worker_=Object(EB.a)(),n.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===_B){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,Object(Un.e)(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):(this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.generateBuffersRun===this.generateBuffersRun_&&(this.ready=!0)),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var s=n.getLayer().getSource();return n.sourceListenKeys_=[Object(Ci.a)(s,hg,n.handleSourceFeatureAdded_,n),Object(Ci.a)(s,fg,n.handleSourceFeatureChanged_,n),Object(Ci.a)(s,dg,n.handleSourceFeatureDelete_,n),Object(Ci.a)(s,pg,n.handleSourceFeatureClear_,n)],s.forEachFeature(function(t){this.featureCache_[Object(Gn.c)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}.bind(n)),n}return OB(e,t),e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new wB(this.helper))},e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[Object(Gn.c)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[Object(Gn.c)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){var e=t.feature;delete this.featureCache_[Object(Gn.c)(e)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.helper.getGL();this.preRender(e,t);var r=this.indicesBuffer_.getSize();this.helper.drawElements(0,r),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var n=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),n},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewState,i=!t.viewHints[po.a.ANIMATING]&&!t.viewHints[po.a.INTERACTING],o=!Object(mt.p)(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)){var s=n.projection,l=n.resolution,u=e instanceof X_?e.getRenderBuffer():0,c=Object(mt.d)(t.extent,u*l);r.loadFeatures(c,l,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),Object(Un.g)(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=Object(Un.d)();this.helper.makeProjectionTransform(t,e);var r,n,i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,l,u,c,h=[],f=[],p=0,d=0;for(var g in this.featureCache_)if((n=(r=this.featureCache_[g]).geometry)&&n.getType()===fo.a.POINT){h[0]=n.getFlatCoordinates()[0],h[1]=n.getFlatCoordinates()[1],Object(Un.a)(e,h),s=d+6,l=void 0,u=void 0,c=void 0,u=256,c=255,(l=f||[])[0]=Math.floor(s/u/u/u)/c,l[1]=Math.floor(s/u/u)%u/c,l[2]=Math.floor(s/u)%u/c,l[3]=s%u/c,a=l,this.renderInstructions_[p++]=h[0],this.renderInstructions_[p++]=h[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[d++]=h[0],this.hitRenderInstructions_[d++]=h[1],this.hitRenderInstructions_[d++]=a[0],this.hitRenderInstructions_[d++]=a[1],this.hitRenderInstructions_[d++]=a[2],this.hitRenderInstructions_[d++]=a[3],this.hitRenderInstructions_[d++]=Number(g));for(var y=void 0,m=0;m<this.customAttributes.length;m++)y=this.customAttributes[m].callback(r.feature,r.properties),this.renderInstructions_[p++]=y,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[d++]=y)}var _={type:_B,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(_.projectionTransform=e,_.generateBuffersRun=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(_,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var v={type:_B,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};v.projectionTransform=e,v.hitDetection=!0,this.worker_.postMessage(v,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(Object(Ui.a)(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=Object(Un.a)(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0,r=256,n=255;return e+=Math.round(t[0]*r*r*r*n),e+=Math.round(t[1]*r*r*n),e+=Math.round(t[2]*r*n),e+Math.round(t[3]*n)}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),l=this.hitRenderInstructions_[s],u=Math.floor(l).toString(),c=this.getLayer().getSource().getFeatureByUid(u);return c?n(c,this.getLayer(),null):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){Object(Ci.c)(t)})),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(bB),IB=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CB="blur",TB="gradient",PB="radius",RB=["#00f","#0ff","#0f0","#ff0","#f00"];var LB=function(t){function e(e){var r=this,n=e||{},i=Object(ii.a)({},n);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(r=t.call(this,i)||this).gradient_=null,r.addChangeListener(TB,r.handleGradientChanged_),r.setGradient(n.gradient?n.gradient:RB),r.setBlur(void 0!==n.blur?n.blur:15),r.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return r.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return IB(e,t),e.prototype.getBlur=function(){return this.get(CB)},e.prototype.getGradient=function(){return this.get(TB)},e.prototype.getRadius=function(){return this.get(PB)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=1,r=256,n=Object(oi.a)(e,r),i=n.createLinearGradient(0,0,e,r),o=1/(t.length-1),a=0,s=t.length;a<s;++a)i.addColorStop(a*o,t[a]);return n.fillStyle=i,n.fillRect(0,0,e,r),n.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(CB,t)},e.prototype.setGradient=function(t){this.set(TB,t)},e.prototype.setRadius=function(t){this.set(PB,t)},e.prototype.createRenderer=function(){return new SB(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?Object(mo.b)(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(PB)+this.get(CB))}.bind(this),u_blurSlope:function(){return this.get(PB)/Math.max(1,this.get(CB))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},e.prototype.renderDeclutter=function(){},e}(X_);function MB(t){return(MB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kB(t,e){return(kB=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=DB(t);if(e){var i=DB(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return FB(this,r)}}function FB(t,e){return!e||"object"!==MB(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function DB(t){return(DB=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kB(t,e)}(o,t);var e,r,n,i=jB(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};NB(this,o),t=i.call(this,e);var r,n=e.weight?e.weight:"weight";if("string"==typeof n){var a=1,s=t.getWeights(e);s.length>0?(a=s.reduce((function(t,e){return Math.max(t,e)})),t.maxWeight_=a,t.minWeight_=s.reduce((function(t,e){return Math.min(t,e)})),r=function(t){var e;return t instanceof Wc?e=t.get(n):t instanceof mG&&(e=t.getAttribute(n)),parseFloat(e/a)}):Gx("La capa de nombre <b>".concat(e.name,"</b> no tiene ninguna feature <br/>\n          con el atributo especificado en simbología establecida.\n          <br/>Se setea una ponderación por defecto"),"Mapa de calor")}else r=n;return t.setStyle((function(e,n){var i=By.getValue(r,e),o=void 0!==i?Object(mo.b)(i,0,1):1,a=255*o||0,s=t.styleCache_[a];return s||(s=[new $y({image:new iy({opacity:o,src:t.circleImage_})})],t.styleCache_[a]=s),s})),t}return e=o,(r=[{key:"getMinWeight",value:function(){return this.minWeight_}},{key:"getMaxWeight",value:function(){return this.maxWeight_}},{key:"getWeights",value:function(t){var e=[],r=this.getSource();if(null!==r){var n=r.getFeatures();n.length>0&&(e=n.map((function(e){return e.get(t.weight)})).filter((function(t){return null!=t})))}return e}}])&&AB(e.prototype,r),n&&AB(e,n),o}(LB);function UB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zB=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};UB(this,t),this.attributeName_=e.attribute||null,this.label_=e.label||null,this.fillColor_=e.fill||null,this.legend_=e.legend||null}var e,r,n;return e=t,(r=[{key:"attribute",get:function(){return this.attributeName_},set:function(t){this.attributeName_=t}},{key:"label",get:function(){return this.label_},set:function(t){this.label_=t}},{key:"fillColor",get:function(){return this.fillColor_},set:function(t){this.fillColor_=t}},{key:"legend",get:function(){return this.legend_},set:function(t){this.legend_=t}}])&&BB(e.prototype,r),n&&BB(e,n),t}(),VB={DONUT:"donut",PIE_3D:"pie3D",PIE:"pie",BAR:"bar"},qB={Custom:"m.style.chart.types.custom_scheme",Classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],Dark:["#960","#003","#900","#060","#099","#909","#990","#090"],Pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],Pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],Neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};function YB(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||XB(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WB(t){return function(t){if(Array.isArray(t))return HB(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||XB(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XB(t,e){if(t){if("string"==typeof t)return HB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?HB(t,e):void 0}}function HB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ZB(t){return(ZB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $B(t,e){return($B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function QB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ez(t);if(e){var i=ez(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tz(this,r)}}function tz(t,e){return!e||"object"!==ZB(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ez(t){return(ez=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$B(t,e)}(o,t);var e,r,n,i=QB(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};KB(this,o);var e=t,r=e.variables||null;if(Object.values(VB).includes(e.type)||(e.type=o.DEFAULT.type),_D(r)||(r instanceof Array?e.variables=r.filter((function(t){return null!=t})).map((function(t){return o.formatVariable(t)})):"string"==typeof r||"object"===ZB(r)?e.variables=[o.formatVariable(r)]:e.variables=[]),_D(e.scheme))e.scheme=o.DEFAULT.scheme;else if("string"==typeof e.scheme){var n=e.variables.some((function(t){return null!=t.fillColor}));e.scheme===qB.Custom&&n?e.scheme=e.variables.map((function(t){return t.fillColor?t.fillColor:""})):e.scheme=qB[e.scheme]||o.DEFAULT.scheme}else e.scheme instanceof Array&&e.scheme.every((function(t){return"string"==typeof t}))||(e.scheme=o.DEFAULT.scheme);var a=new Rz(e);return i.call(this,e,a)}return e=o,n=[{key:"formatVariable",value:function(t){return null==t?null:t instanceof zB?t:new zB("string"==typeof t?{attribute:t}:t)}},{key:"deserialize",value:function(t){var e=YB(t,1)[0],r=e;return r.variables=e.variables.map((function(t){return new zB(QD(t))})),new Function(["options"],"return new M.style.Chart(options)")(r)}}],(r=[{key:"updateCanvas",value:function(){_D(this.getImpl())&&_D(this.canvas_)||this.getImpl().updateCanvas(this.canvas_)}},{key:"apply",value:function(t){var e=this;this.layer_=t,t.getFeatures().forEach((function(t){return t.setStyle(e.clone())})),this.updateCanvas()}},{key:"toJSON",value:function(){var t=this.getOptions();return{parameters:[{type:t.type,radius:t.radius,donutRadio:t.donutRadio,offsetX:t.offsetX,offsetY:t.offsetY,stroke:_D(t.stroke)?void 0:HD({},t.stroke),fill3DColor:t.fill3DColor,scheme:mD(t.scheme)?WB(t.scheme):t.scheme,label:_D(t.label)?void 0:HD({},t.label),rotateWithView:t.rotateWithView,variables:t.variables.map((function(t){var e;return _D(t.label)||(e=HD({},t.label),e=$D(e)),{attribute:t.attribute,legend:t.legend,fill:t.fillColor,label:e}}))}],deserializedMethod:"M.style.Chart.deserialize"}}},{key:"ORDER",get:function(){return 1}}])&&JB(e.prototype,r),n&&JB(e,n),o}(Rm);rz.DEFAULT={shadow3dColor:"#369",type:VB.PIE,scheme:qB.Classic,radius:20,donutRatio:.5,offsetX:0,offsetY:0,animationStep:1};var nz=rz;function iz(t){return(iz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function az(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sz(t,e){return(sz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cz(t);if(e){var i=cz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uz(this,r)}}function uz(t,e){return!e||"object"!==iz(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cz(t){return(cz=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sz(t,e)}(o,t);var e,r,n,i=lz(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};oz(this,o);var r=_D(e.stroke)?0:e.stroke.getWidth();return t=i.call(this,{radius:("number"==typeof e.radius?e.radius:0)+r,fill:new zg({color:[0,0,0]}),rotation:"number"==typeof e.rotation?e.rotation:0,snapToPixel:"boolean"==typeof e.snapToPixel&&e.snapToPixel}),e.scale&&t.setScale(e.scale),t.variables_=e.variables||[],t.stroke_=e.stroke||null,t.radius_=e.radius||0,t.donutRatio_=e.donutRatio||0,t.type_=e.type||null,t.offset_=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],t.animation_={animate:"number"==typeof e.animation,step:"number"==typeof e.animation?e.animation:nz.DEFAULT.animationStep},t.data_=e.data||null,t.colors_=e.scheme instanceof Array?e.scheme:[],t.fill3DColor_=e.fill3DColor||"#000",t.rotateWithView_=e.rotateWithView||!1,t.renderChart_(),t}return e=o,(r=[{key:"clone",value:function(){var t=new o({type:this.type_,radius:this.radius_,colors:this.colors_,rotation:this.getRotation(),scale:this.getScale(),donutRatio:this.donutRatio_,data:this.data_,stroke:this.stroke_,scheme:this.colors_,offsetX:this.offset_[0],offsetY:this.offset_[1],animation:this.animation_,fill3DColor:this.fill3DColor_,rotateWithView:this.rotateWithView_});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}},{key:"setRadius",value:function(t,e){this.donutRatio_=e||this.donutRatio_,this.radius=t}},{key:"setAnimation",value:function(t){if(!1===t){if(!1===this.animation_.animate)return;this.animation_.animate=!1}else{if(this.animation_.step===t)return;this.animation_.animate=!0,this.animation_.step=t}this.renderChart_()}},{key:"getChecksum",value:function(){var t,e=null!==this.stroke_?this.stroke_.getChecksum():"-";if(null===this.checksums_||e!==this.checksums_[1]||t!==this.checksums_[2]||this.radius_!==this.checksums_[3]||this.data_.join("|")!==this.checksums_[4]){var r=this.radius_?this.radius_.toString():"-",n="c".concat(e).concat(t).concat(r).concat(this.data_.join("|"));this.checksums_=[n,e,t,this.radius_,this.data_.join("|")]}return this.checksums_[0]}},{key:"renderChart_",value:function(t){switch(this.type_){case VB.DONUT:case VB.PIE_3D:case VB.PIE:this.renderCircleChart();break;default:this.renderBarChart()}}},{key:"renderBarChart",value:function(){var t,e=this,r=this.getImage(1),n=r.getContext("2d"),i=0,o=this.animation_.animate?this.animation_.step:1;this.stroke_&&(t=Object(Bn.b)(this.stroke_.getColor()),i=this.stroke_.getWidth());var a,s=Math.max.apply(null,this.data_)||0,l=Math.min(5,2*this.radius_/this.data_.length),u=r.width-(i||0),c=r.width/2,h=c-this.data_.length*l/2;t&&(n.strokeStyle=t,n.lineWidth=i),this.data_.sort((function(t,e){return t-e})).forEach((function(r,i){n.beginPath(),n.fillStyle=e.colors_[i%e.colors_.length],a=h+l;var c=r/s*2*e.radius_*o;n.rect(h,u-c,l,c),n.closePath(),n.fill(),t&&n.stroke(),h=a}));var f=this.getAnchor();f[0]=c-this.offset_[0],f[1]=c-this.offset_[1]}},{key:"renderCircleChart",value:function(){var t,e=0;this.stroke_&&(t=Object(Bn.b)(this.stroke_.getColor()),e=this.stroke_.getWidth());var r=this.getImage(1),n=r.getContext("2d");n.clearRect(0,0,r.width,r.height),n.lineJoin="round";var i=0;!_D(this.data_)&&this.data_.length>0&&(i=this.data_.reduce((function(t,e){return t+e}))),n.setTransform(1,0,0,1,0,0),n.translate(0,0);var o=this.animation_.animate?this.animation_.step:1,a=Math.PI*(o-1.5),s=r.width/2;t&&(n.strokeStyle=t,n.lineWidth=e),n.save(),this.type_===VB.PIE_3D?this.drawPie3D(n,a,s,o,t,i):this.type_===VB.DONUT?this.drawDonut(n,a,s,o,t,e,i):this.drawPie(n,a,s,o,t,i),n.restore();var l=this.getAnchor();l[0]=s-this.offset_[0],l[1]=s-this.offset_[1]}},{key:"drawDonut",value:function(t,e,r,n,i,o,a){var s=t;s.save(),s.beginPath(),s.rect(0,0,2*r,2*r),s.arc(r,r,this.radius_*n*this.donutRatio_,0,2*Math.PI),s.clip("evenodd");var l=this.drawPie(s,e,r,n,i,a);s.restore(),s.beginPath(),s.strokeStyle=i,s.lineWidth=o;var u=this.radius_;s.arc(r,r,u*n*this.donutRatio_,Math.PI*(n-1.5),l),i&&s.stroke()}},{key:"drawPie3D",value:function(t,e,r,n,i,o){var a=t;a.translate(0,.3*r),a.scale(1,.7),a.beginPath(),a.fillStyle=this.fill3DColor_,a.arc(r,1.4*r,this.radius_*n,0,2*Math.PI),a.fill(),i&&a.stroke(),this.drawPie(t,e,r,n,i,o)}},{key:"drawPie",value:function(t,e,r,n,i,o){var a,s=this,l=e,u=t;return this.data_.forEach((function(t,e){u.beginPath(),u.moveTo(r,r),u.fillStyle=s.colors_[e%s.colors_.length],a=l+2*Math.PI*t/(o*n),u.arc(r,r,s.radius_*n,l,a),u.closePath(),u.fill(),i&&u.stroke(),l=a})),l}},{key:"data",get:function(){return this.data_},set:function(t){this.data_=t,this.renderChart_()}},{key:"radius",get:function(){return this.radius_},set:function(t){this.radius_=t,this.renderChart_()}}])&&az(e.prototype,r),n&&az(e,n),o}(Vy);function fz(t){return(fz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dz(t,e){return(dz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mz(t);if(e){var i=mz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yz(this,r)}}function yz(t,e){return!e||"object"!==fz(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mz(t){return(mz=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _z(t){return(_z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bz(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ez(t,e){return(Ez=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Iz(t);if(e){var i=Iz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Sz(this,r)}}function Sz(t,e){return!e||"object"!==_z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Iz(t){return(Iz=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cz=function(t){var e=t;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.filter((function(t){return null!=t})).forEach((function(t){return Object.keys(t).forEach((function(r){Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=t[r])}))})),r},Tz=function(t,e,r,n){var i;return i="0"===(i="function"==typeof t.text?t.text(n,r.data,e):"".concat(By.getValue(t.text,e))||"")?"":i},Pz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ez(t,e)}(s,t);var e,r,o,a=Oz(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xz(this,s),Cz(e,nz.DEFAULT),(t=a.call(this,e)).variables_=e.variables||[],t.colorsScheme_=e.scheme||[],t}return e=s,(r=[{key:"updateCanvas",value:function(t){if(!_D(t)){var e=t.getContext("2d");this.drawGeometryToCanvas(e)}}},{key:"drawGeometryToCanvas",value:function(t){var e=this,r=t;if(!_D(r)&&!_D(r.canvas)){var n=s.CANVAS_PROPS.fixedProps,i=s.CANVAS_PROPS.width;r.canvas.setAttribute("width",i),r.width=i;var o=[],a={};Object.keys(s.CANVAS_PROPS.percentages).forEach((function(t){a[t]=i*(s.CANVAS_PROPS.percentages[t]/100)}));var l=[a.left_right_content,n.top_content],u=l[0],c=l[1],h=function(t,i,s){var l=vz(t,2),u=l[0],c=l[1];c+=n.item_top_margin,o.push(function(t){var e=t.context;e.beginPath(),e.strokeStyle=t.strokeColor,e.lineWidth=t.width,e.fillStyle=t.color,e.rect(t.x,t.y,t.rectSize,t.rectSize),e.closePath(),e.stroke(),e.fill()}.bind(e,{context:r,strokeColor:"#000",width:n.rect_border_width,color:s,x:u,y:c,rectSize:n.rect_size})),u+=a.item_side_margin+n.rect_size;var h=(c+=n.rect_size/1.5)+n.item_top_margin,f=function(t,i,a,s,l){var u=a.split(" "),c="",h=i[0],f=i[1];return o.push(function(t){var e=t.context;e.font="".concat(t.fontSize,"px ").concat(t.fontFamily),e.strokeStyle=t.strokeColor,e.strokeWidth=t.strokeWidth,e.fillStyle=t.textColor}.bind(e,{context:r,fontSize:n.font_size,fontFamily:n.font_family,strokeColor:n.text_stroke_color,strokeWidth:n.text_stroke_width,textColor:n.text_color})),u.forEach((function(t,n){r.measureText("".concat(c+t)).width>s&&n>0?(o.push(function(t,e,r,n){t.strokeText(e,r,n),t.fillText(e,r,n)}.bind(e,r,c,h,f)),c="".concat(t," "),f+=l):c="".concat(c+t," ")})),o.push(function(t,e,r,n){t.strokeText(e,r,n),t.fillText(e,r,n)}.bind(e,r,c,h,f)),[h,f]}(0,[u,c],i,a.max_text_width,a.max_text_line_height);return[f[0],f[1]>h?f[1]:h]};this.variables_.forEach((function(t,r){var n=_D(t.legend)?t.attribute:t.legend,i=_D(t.fillColor)?e.colorsScheme_[r%e.colorsScheme_.length]||e.colorsScheme_[0]:t.fillColor,o=vz(h([u,c],n,i),2);u=o[0],c=o[1],u=a.left_right_content})),c+=n.top_content,r.canvas.setAttribute("height",c),r.save(),o.forEach((function(t){return t()})),r.restore()}}},{key:"updateFacadeOptions",value:function(t){var e=this,r=t;r.rotateWithView=!1,this.olStyleFn_=function(t,o){var a=t;a instanceof Wc||(a=e);var s=e.formatDataRecursively_(r,a),l=[];if(e.variables_.forEach((function(t){var e=a.get(t.attribute);e=parseFloat(e),l=l.concat(e instanceof Array?e:[e]).filter((function(t){return null!=t}))})),0===l.length)throw new Error("cannot draw an empty data chart");s.data=l,_D(r.stroke)||(s.stroke=new Bg(r.stroke));var u=[new am({geometry:function(t){var e=wh.getCentroid(t.getGeometry());return new aa(e)},image:new hz(s)})];return"bar"!==s.type?1!==r.variables.length&&r.variables.length!==l.length||(u=u.concat(function(t,e,r){var n=0,i=e.data.reduce((function(t,e){return t+e})),o=e.variables,a=e.data;return t.concat(e.data.map((function(t,s){var l=o.length===a.length?o[s]:o[0],u=l.label||{},c=u.radius?u.radius:e.radius,h=(2*n+t)/i*Math.PI-Math.PI/2;if(n+=t,!l.label)return null;var f="number"==typeof u.radiusIncrement?u.radiusIncrement:3,p="function"==typeof u.textAlign?u.textAlign(h):null;_D(p)&&(p=u.textAlign||(h<Math.PI/2?"left":"right"));var d=Tz(u,r,e,t),g=By.getValue(u.font,r),y=new zg({color:By.getValue(u.fill,r)||"#000"}),m=new Bg({color:By.getValue(u.stroke.color,r)||"#000",width:By.getValue(u.stroke.width,r)||1}),_=Math.cos(h)*(c+f+e.offsetX)||0,v=Math.sin(h)*(c+f+e.offsetY)||0,b=new Yg({text:"string"==typeof d?"".concat(d):"",offsetX:"number"==typeof u.offsetX?By.getValue(u.offsetX,r):_,offsetY:"number"==typeof u.offsetY?By.getValue(u.offsetY,r):v,textAlign:By.getValue(p,r),textBaseline:By.getValue(u.textBaseline,r)||"middle",stroke:u.stroke?m:void 0,font:/^([1-9])[0-9]*px ./.test(g)?g:"12px ".concat(g),scale:"number"==typeof u.scale?By.getValue(u.scale,r):void 0,fill:y});return new am({text:b})}))).filter((function(t){return null!=t}))}(u,s,a))):"bar"===s.type&&(u=u.concat(function(t,e,r){var n=0,i=null,o=e.variables,a=e.data,s=t.concat(e.data.map((function(s,l){var u=o.length===a.length?o[l]:o[0],c=u.label||{};if(!u.label)return null;var h=Tz(c,r,e,s),f=By.getValue(c.font,r);_D(i)?i=t[0].getImage().getImage().height/2-6:i-=15,n=n+9+6;var p=-t[0].getImage().getImage().width/2-(1+e.offsetX)||0;return new am({text:new Yg({text:"string"==typeof h?"".concat(h):"",offsetY:i+e.offsetY||0,offsetX:p,textBaseline:"middle",rotateWithView:!1,textAlign:"center",stroke:c.stroke?new Bg({}):void 0,font:"9px ".concat(f),scale:"number"==typeof c.scale?By.getValue(c.scale,r):void 0,fill:new zg({color:e.scheme[l%e.scheme.length]})})})}))),l=s.filter((function(t){return null!=t}));n=Math.max(n,1);var u=-t[0].getImage().getImage().width/2+10+e.offsetX,c=t[0].getImage().getImage().height/2+e.offsetY,h=new iy({anchor:[u,c],anchorOrigin:"bottom-right",offsetOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",rotateWithView:!1,src:"data:image/svg+xml;base64,".concat(window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t[0].getImage().getImage().width/2,'" height="').concat(n,'"><rect width="').concat(s[0].getImage().getImage().width/2,'" height="').concat(n,'" fill="rgba(255, 255, 255, 0.75)" stroke-width="0" stroke="rgba(0, 0, 0, 0.34)"/></svg>'))),size:[s[0].getImage().getImage().width/2,n]});return l.push(new $y({image:h})),l}(u,s,a))),function(t,e,r){if(!_D(t.label)){var o=new $y,a=By.getValue(t.label.text,r),s=By.getValue(t.label.align,r),l=By.getValue(t.label.baseline,r),u=t.label.offset?t.label.offset[0]:void 0,c=t.label.offset?t.label.offset[1]:void 0,h=new zg({color:By.getValue(t.label.color||"#000000",r)}),f=new Yg({font:By.getValue(t.label.font,r),rotateWithView:By.getValue(t.label.rotate,r),scale:By.getValue(t.label.scale,r),offsetX:By.getValue(u,r),offsetY:By.getValue(c,r),fill:h,textAlign:Object.values(i).includes(s)?s:"center",textBaseline:Object.values(n).includes(l)?l:"top",text:void 0===a?void 0:String(a),rotation:By.getValue(t.label.rotation,r)});_D(t.label.stroke)||f.setStroke(new Bg({color:By.getValue(t.label.stroke.color,r),width:By.getValue(t.label.stroke.width,r),lineCap:By.getValue(t.label.stroke.linecap,r),lineJoin:By.getValue(t.label.stroke.linejoin,r),lineDash:By.getValue(t.label.stroke.linedash,r),lineDashOffset:By.getValue(t.label.stroke.linedashoffset,r),miterLimit:By.getValue(t.label.stroke.miterlimit,r)})),o.setText(f),e.push(o)}}(s,u,a),u}}},{key:"applyToLayer",value:function(t){t.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(t){t.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"formatDataRecursively_",value:function(t,e){var r=this;return Object.keys(t).reduce((function(n,i,o){var a=n;return"object"!==_z(n)&&(a={},"object"!==_z(t[n])&&r.setVal(a,t,n,e)),r.setVal(a,t,i),a}))}},{key:"setVal",value:function(t,e,r,n){var i=t;i[r]=By.getValue(e[r],n),!bD(e[r])||e[r]instanceof Array||(i[r]=this.formatDataRecursively_(e[r],n))}}])&&wz(e.prototype,r),o&&wz(e,o),s}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dz(t,e)}(r,t);var e=gz(r);function r(){return pz(this,r),e.apply(this,arguments)}return r}(Ny));Pz.CANVAS_PROPS={width:200,percentages:{left_right_content:5,item_side_margin:5,max_text_width:70},fixedProps:{rect_border_width:2,font_size:10,font_family:"sans-serif",text_stroke_color:"#fff",text_stroke_width:1,text_color:"#000",top_content:10,item_top_margin:10,text_line_height:15,rect_size:15}};var Rz=Pz;function Lz(t){return(Lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nz(t,e){return(Nz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Az(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jz(t);if(e){var i=jz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kz(this,r)}}function kz(t,e){return!e||"object"!==Lz(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jz(t){return(jz=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nz(t,e)}(o,t);var e,r,n,i=Az(o);function o(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,{})).heatmapLayer_=null,n.attribute_=t,n.opt_options_=HD(e,r),n.opt_options_.zIndex=999999,n.oldOLLayer_=null,n}return e=o,(r=[{key:"applyToLayer",value:function(t){if(this.layer_=t,!_D(t)){var e=this.layer_.getImpl().getOLLayer();e instanceof LB||(this.oldOLLayer_=e);var r=this.layer_.getFeatures().map((function(t){return t.getImpl().getOLFeature()}));r.forEach((function(t){return t.setStyle(null)})),this.createHeatmapLayer_(r),this.layer_.getImpl().setOLLayer(this.heatmapLayer_)}}},{key:"unapply",value:function(t){_D(this.oldOLLayer_)||(this.layer_.getImpl().setOLLayer(this.oldOLLayer_),this.layer_.redraw(),this.layer_=null,this.oldOLLayer_=null,this.heatmapLayer_=null)}},{key:"createHeatmapLayer_",value:function(t){this.opt_options_.source=new Tg({features:t}),this.opt_options_.name=this.layer_.name,this.heatmapLayer_=new GB(this.opt_options_)}},{key:"setOptions",value:function(t,e){this.opt_options_=HD(t,e)}},{key:"getMinWeight",value:function(){return this.heatmapLayer_.getMinWeight()}},{key:"getMaxWeight",value:function(){return this.heatmapLayer_.getMaxWeight()}}])&&Mz(e.prototype,r),n&&Mz(e,n),o}(Ny);function Dz(t){return(Dz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bz(t,e){return(Bz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qz(t);if(e){var i=qz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Vz(this,r)}}function Vz(t,e){return!e||"object"!==Dz(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qz(t){return(qz=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bz(t,e)}(o,t);var e,r,n,i=zz(o);function o(){return Gz(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"getImageSize",value:function(){return this.iconImage_.getSize()}}])&&Uz(e.prototype,r),n&&Uz(e,n),o}(iy);function Wz(t){return(Wz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hz(t,e){return(Hz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Jz(t);if(e){var i=Jz(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Kz(this,r)}}function Kz(t,e){return!e||"object"!==Wz(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jz(t){return(Jz=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hz(t,e)}(o,t);var e,r,n,i=Zz(o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=t;_D(e)&&(e=o.DEFAULT_NULL),e=HD({},e);var r=new fV(e);return i.call(this,e,r)}return e=o,(r=[{key:"unapply",value:function(t){this.getImpl().unapply(t)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Line'))"}}])&&Xz(e.prototype,r),n&&Xz(e,n),o}(Bm);$z.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};var Qz=$z;function tV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var eV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"render",value:function(t,e){for(var r=t,n=this,i=0,o=0,a=2,s=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)},l=function(t,e){if(!i||o+i<e)for(;a<t.length&&(i=s(t[a-2],t[a-1],t[a],t[a+1]),!(o+i>e))&&!((a+=2)>=t.length);)o+=i;var r=e-o;return a>=t.length&&(a=t.length-2),[r?t[a-2]+(t[a]-t[a-2])*r/i:t[a-2],r?t[a-1]+(t[a+1]-t[a-1])*r/i:t[a-1],Math.atan2(t[a+1]-t[a-1],t[a]-t[a-2])]},u=.25*n.measureText(" ").width,c=0,h=0,f=2;f<e.length;f+=2)h+=s(e[f-2],e[f-1],e[f],e[f+1]);if(!(h<n.minWidth)){var p=r.split(" ").length-1;if("visible"!==n.textOverflow&&h<n.measureText(r).width+(r.length-(1+p))*u){var d="ellipsis"===n.textOverflow?"…":n.textOverflow;do{p=r.split(" ").length-1,r=r.slice(0,r.length-1)}while(r&&h<n.measureText(r+d).width+(r.length+(d.length-1)+p)*u);r+=d}switch(n.textJustify||n.textAlign){case!0:case"center":case"end":case"right":n.textJustify?(c=0,u=(h-n.measureText(r).width)/(t.length-(1+p))):(c=h-n.measureText(r).width-(r.length+p)*u,"center"===n.textAlign&&(c/=2))}for(var g=0;g<r.length;g+=1){var y=r[g],m=n.measureText(y).width,_=l(e,c+m/2);n.save(),n.textAlign="center",n.translate(_[0],_[1]),n.rotate(_[2]),n.lineWidth&&n.strokeText(y,0,0),n.fillText(y,0,0),n.restore(),c+=m+u*(" "===y?2:1)}}}},{key:"getPath_",value:function(t,e,r){var n=[];if(e.forEach((function(e){n.push(t[0]*e[0]+t[1]*e[1]+t[4]),n.push(t[2]*e[0]+t[3]*e[1]+t[5])})),r&&n[0]>n[n.length-2]){for(var i=[],o=n.length-2;o>=0;o-=2)i.push(n[o]),i.push(n[o+1]);return i}return n}},{key:"formatStyle",value:function(t){var e=t;return null==e?null:(void 0===e&&(e=[new $y({text:new Yg})]),"function"==typeof e?e:function(){return[e]})}},{key:"draw",value:function(e,r,n,i){var o=this.getPath_(r,i,n.getRotateWithView());e.font=n.getFont(),e.textBaseline=n.getTextBaseline(),e.textAlign=n.getTextAlign(),e.lineWidth=n.getStroke()&&n.getStroke().getWidth()||t.DEFAULT.lineWidth,e.strokeStyle=n.getStroke()&&n.getStroke().getColor()||t.DEFAULT.lineColor,e.fillStyle=n.getFill()&&n.getFill().getColor()||t.DEFAULT.fillColor,e.textJustify="justify"===n.getTextAlign(),e.textOverflow=n.getTextOverflow?n.getTextOverflow():t.DEFAULT.textOverflow,e.minWidth=n.getMinWidth?n.getMinWidth():t.DEFAULT.minWidth,"function"==typeof e.textPath&&e.textPath(n.getText(),o),e.restore()}}],(r=null)&&tV(e.prototype,r),n&&tV(e,n),t}();eV.DEFAULT={lineWidth:0,lineColor:"#fff",fillColor:"#000",textOverflow:"",minWidth:0};var rV=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(dD(window.CanvasRenderingContext2D.prototype.textPath)&&(window.CanvasRenderingContext2D.prototype.textPath=eV.render),!(e.frameState.viewState.resolution>this.textPathMaxResolution_)){var r=e.frameState.extent,n=e.context;n.save(),n.scale(e.frameState.pixelRatio,e.frameState.pixelRatio);var i=null!=this.getSource()&&0===this.getSource().getFeatures().length;i||(this.getSource().getFeaturesInExtent(r).forEach((function(r){var i=null!=r.getStyle()?r.getStyle():t.getStyle(),o="function"==typeof i?i(r,e.frameState.viewState.resolution):i;o instanceof Array||(o=[o]),o.forEach((function(t){var i,o=(t instanceof Qz?t.getOptions().geometry:t.getGeometry())||r.getGeometry();switch("function"==typeof o&&(o=o(r)),o.getType()){case"MultiLineString":i=o.getLineString(0).getCoordinates();break;default:i=o.getCoordinates()}var a=t instanceof Qz?t.getOptions().text:t.textPath;null!=a&&a instanceof $x&&eV.draw(n,e.frameState.coordinateToPixelTransform,a,i)}))})),n.restore())}};ko.prototype.cspline=function(t){var e;return this.calcCSpline?this.csplineGeometryRevision===this.getRevision()&&this.csplineOption===JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t),e=this.csplineGeometry_):e=this,e},hh.prototype.calcCSpline=function(t){var e=[];return this.getGeometries().forEach((function(t){return e.push(t.cspline())})),new hh(e)},eh.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new eh(e)},Oa.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new Oa(e)},ih.prototype.calcCSpline=function(t){var e=[];return this.getLineStrings().forEach((function(t){return e.push(t.cspline().getCoordinates())})),new ih(e)};var nV=function(t,e,r,n){var i=r-t,o=n-e;return Math.sqrt(i*i+o*o)};function iV(t){return(iV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aV(t,e,r){return(aV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cV(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function sV(t,e){return(sV=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cV(t);if(e){var i=cV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uV(this,r)}}function uV(t,e){return!e||"object"!==iV(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cV(t){return(cV=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Qc.prototype.calcCSpline=function(){var t,e,r,n,i,o,a,s,l,u,c,h,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=this.getCoordinates(),g="number"==typeof p.tension?p.tension:.5,y=p.resolution||this.getLength()/d.length/(p.pointsPerSeg||10),m=[],_=d.slice(0);for(d.length>2&&d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]?(_.unshift(d[d.length-2]),_.push(d[1])):(_.unshift(d[0]),_.push(d[d.length-1])),f=1;f<_.length-2;f+=1){var v=nV(_[f][0],_[f][1],_[f+1][0],_[f+1][1]),b=Math.round(v/y),x=1;if(p.normalize){var w=nV(_[f+1][0],_[f+1][1],_[f-1][0],_[f-1][1]),E=nV(_[f+2][0],_[f+2][1],_[f][0],_[f][1]);x=w<E?w/E:E/w}for(r=(_[f+1][0]-_[f-1][0])*g*x,n=(_[f+2][0]-_[f][0])*g*x,i=(_[f+1][1]-_[f-1][1])*g*x,o=(_[f+2][1]-_[f][1])*g*x,h=0;h<=b;h+=1)c=h/b,a=2*Math.pow(c,3)-(3*Math.pow(c,2)+1),s=-2*Math.pow(c,3)+3*Math.pow(c,2),l=Math.pow(c,3)-(2*Math.pow(c,2)+c),u=Math.pow(c,3)-Math.pow(c,2),t=a*_[f][0]+s*_[f+1][0]+l*r+u*n,e=a*_[f][1]+s*_[f+1][1]+l*i+u*o,m.push([t,e])}return new Qc(m)};var hV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sV(t,e)}(o,t);var e,r,n,i=lV(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).olStyleFn_=e.updateFacadeOptions(t),e}return e=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(t){var e=this;return function(r){var n=r;n instanceof Wc||n instanceof lh||(n=e);var i,o=t.stroke,a=t.label,s=new am,u=new am,c=By.getValue;if(_D(o)||s.setStroke(new Bg({color:c(o.color,n),width:c(o.width,n),lineDash:c(o.linedash,n),lineDashOffset:c(o.linedashoffset,n),lineCap:c(o.linecap,n),lineJoin:c(o.linejoin,n),miterLimit:c(o.miterlimit,n)})),!_D(a)){var h={text:void 0===c(a.text,n)?void 0:String(c(a.text,n)),font:c(a.font,n),fill:new zg({color:c(a.color||"#000000",n)}),textBaseline:(c(a.baseline,n)||"").toLowerCase(),textAlign:c(a.align,n),scale:c(a.scale,n),rotateWithView:c(a.rotate,n)||!1,textOverflow:c(a.textoverflow,n)||"",minWidth:c(a.minwidth,n)||0,geometry:c(a.geometry,n),offsetX:c(t.label.offset?t.label.offset[0]:void 0,n),offsetY:c(t.label.offset?t.label.offset[1]:void 0,n)},f=new $x(h);_D(a.stroke)||f.setStroke(new Bg({color:c(a.stroke.color,n),width:c(a.stroke.width,n),lineCap:c(a.stroke.linecap,n),lineJoin:c(a.stroke.linejoin,n),lineDash:c(a.stroke.linedash,n),lineDashOffset:c(a.stroke.linedashoffset,n),miterLimit:c(a.stroke.miterlimit,n)}));var p=c(a.path,n);"boolean"==typeof p&&p?(s.textPath=f,!_D(a.smooth)&&!0===a.smooth&&vD(n.getGeometry)&&s.setGeometry(n.getGeometry().cspline())):s.setText(f)}if(!_D(t.fill)){var d=By.getValue(t.fill.color,n,e.layer_),g=By.getValue(t.fill.opacity,n,e.layer_);g||0===g||(g=1);var y=By.getValue(t.fill.width,n,e.layer_);_D(d)||(i=new Bg({color:l()(d).alpha(g).css(),width:y}))}return u.setStroke(i),[s,u]}}},{key:"applyToLayer",value:function(t){aV(cV(o.prototype),"applyToLayer",this).call(this,t);var e=t.getImpl().getOLLayer();_D(e)||(this.postComposeEvtKey_=e.on("postcompose",rV,e))}},{key:"unapply",value:function(){Object(ag.b)(this.postComposeEvtKey_)}},{key:"drawGeometryToCanvas",value:function(t,e,r,n){var i=o.getCanvasSize()[0],a=o.getCanvasSize()[1];if(t.drawGeometry(new Qc([[0+n/2,0+n/2],[i/3,a/2-n/2],[2*i/3,0+n/2],[i-n/2,a/2-n/2]])),!_D(r)){var s=r.width,l=e.getContext("2d");l.lineWidth=r.width,i=e.width,a=e.height,l.strokeStyle=r.color,l.beginPath(),l.lineTo(0+s,0+s),l.lineTo(i/3,a/2-s),l.lineTo(2*i/3,0+s),l.lineTo(i-s,a/2-s),l.stroke()}}},{key:"updateCanvas",value:function(t){this.updateFacadeOptions(this.options_);var e,r=o.getCanvasSize(),n=xy(t.getContext("2d"),{size:r}),i=this.olStyleFn_()[1];_D(i)||_D(i.getStroke())||(e={color:i.getStroke().getColor(),width:1});var a=this.olStyleFn_()[0];_D(a.getText())||a.setText(null);var s,l=a.getStroke();_D(l)||(_D(l.getWidth())?s=1:(s=l.getWidth(),l.getWidth()>o.DEFAULT_WIDTH_LINE&&(s=o.DEFAULT_WIDTH_LINE)),e={color:a.getStroke().getColor(),width:s},a.getStroke().setWidth(s),n.setStyle(a)),this.drawGeometryToCanvas(n,t,e,s)}}])&&oV(e.prototype,r),n&&oV(e,n),o}(By);hV.DEFAULT_WIDTH_LINE=3;var fV=hV;function pV(t){return(pV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _V(t,e){return(_V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xV(t);if(e){var i=xV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bV(this,r)}}function bV(t,e){return!e||"object"!==pV(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xV(t){return(xV=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wV=function(t,e){var r=void 0,n=void 0,i=t.filter((function(t){return![NaN,void 0,null].includes(t.getAttribute(e))})).map((function(t){return parseInt(t.getAttribute(e),10)})),o=1;if(!_D(i))for(r=i[0],n=i[0];o<i.length-1;){var a=i[o+1];r=r<a?r:a,n=n<a?a:n,o+=1}return[r,n]},EV=function(t,e,r,n,i){return(t-e)*(i-n)/(r-e)+n},OV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_V(t,e)}(o,t);var e,r,n,i=vV(o);function o(t,e,r,n,a){var s,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return yV(this,o),s=i.call(this,l,{}),_D(t)&&_l(uu("exception").no_attr_name),s.attributeName_=t,s.minRadius_=parseInt(e,10)||5,s.maxRadius_=parseInt(r,10)||15,s.style_=n,s.proportionalFunction_=a||EV,s.maxRadius_<s.minRadius_&&(s.minRadius_=r,s.maxRadius_=e),_D(s.style_)||s.styles_.push(s.style_),s}return e=o,n=[{key:"getSizeAttribute",value:function(t){var e="radius";return _D(t.get("icon"))||(e=_D(t.get("icon.src"))?"icon.radius":"icon.scale"),e}},{key:"deserialize",value:function(t){var e=dV(t,6),r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=r,u=n,c=i,h=QD(a),f=QD(s),p=new Function(["attributeName","minRadius","maxRadius","style","proportionalFunction","options"],"return new M.style.Proportional(attributeName,\n    minRadius, maxRadius, style, proportionalFunction, options)")(l,u,c,void 0,h,f),d=o.map((function(t){return Em.deserialize(t)}));return p.add(d),p}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"applyToFeature",value:function(t,e){var r=this.style_;if(_D(r)&&(r=t.getStyle()?t.getStyle():this.layer_.getStyle()),!_D(r)){r instanceof Iw?r=new q_(r.getOptions().point):!(r instanceof q_)&&r instanceof Bm?r=new q_(r.getOptions()):r instanceof Ob&&(r=new q_(r.getOldStyle().getOptions()));var n=this.calculateStyle_(t,{minRadius:this.minRadius_,maxRadius:this.maxRadius_,minValue:this.minValue_,maxValue:this.maxValue_},r);t.setStyle(n)}}},{key:"update_",value:function(){var t=this;if(!_D(this.layer_)){_D(this.style_),this.oldStyle_=this.layer_.getStyle()instanceof Ob?this.layer_.getStyle().getOldStyle():this.layer_.getStyle();var e=dV(wV(this.layer_.getFeatures(),this.attributeName_),2);this.minValue_=e[0],this.maxValue_=e[1],this.layer_.getFeatures().forEach((function(e){return t.applyToFeature(e,1)}));var r=this.oldStyle_.clone();r instanceof Bm&&(r instanceof q_||(r=new q_(r.getOptions())),r.set("zindex",(function(e){return t.maxValue_-parseFloat(e.getAttribute(t.attributeName_))})),r.set(o.getSizeAttribute(r),(function(e){var r=o.SCALE_PROPORTION,n=e.getAttribute(t.attributeName_),i=[n,t.minValue_,t.maxValue_,t.minRadius_,t.maxRadius_],a=t.proportionalFunction_.apply(t,i);if("icon.scale"===o.getSizeAttribute(t.oldStyle_)){var s=t.minRadius_/r,l=t.maxRadius_/r,u=[n,t.minValue_,t.maxValue_,s,l];a=t.proportionalFunction_.apply(t,u)}return a})),this.updateCanvas())}}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this}},{key:"getStyle",value:function(){return console.warn("Deprecated function: Use getStyles instead."),this.style_}},{key:"setStyle",value:function(t){return this.style_=t,this.update_(),this}},{key:"getMinRadius",value:function(){return this.minRadius_}},{key:"setProportionalFunction",value:function(t){this.proportionalFunction_=t,this.update_()}},{key:"getProportionalFunction",value:function(){return this.proportionalFunction_}},{key:"setMinRadius",value:function(t){return this.minRadius_=parseInt(t,10),t>=this.maxRadius_&&_l(uu("exception").min_gt_max),this.update_(),this}},{key:"getMaxRadius",value:function(){return this.maxRadius_}},{key:"setMaxRadius",value:function(t){return this.maxRadius_=parseInt(t,10),t<=this.minRadius_&&_l(uu("exception").max_lt_min),this.update_(),this}},{key:"updateCanvas",value:function(){var t=this;this.updateCanvasPromise_=new Promise((function(e,r){if(!_D(t.layer_)){var n=t.styles_.filter((function(t){return t instanceof Bm}))[0],i=_D(n)?t.layer_.getStyle():n;if((i=_D(i)?t.style_:i)instanceof Bm){var a=i.clone();a instanceof q_||(a=new q_(a.getOptions()));var s=o.getSizeAttribute(a),l=a.clone(),u=a.clone(),c=t.getMaxRadius(),h=t.getMinRadius();l.set(s,c),u.set(s,h),t.loadCanvasImage(c,l.toImage(),(function(r){t.loadCanvasImage(h,u.toImage(),(function(n){t.drawGeometryToCanvas(r,n,e)}))}))}else _D(i)||(t.canvas_=i.canvas,e())}}))}},{key:"loadCanvasImage",value:function(t,e,r){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){r({image:n,value:t})},n.onerror=function(){r({value:t})},n.src=e}},{key:"drawGeometryToCanvas",value:function(t,e,r){var n=t.image,i=e.image;this.canvas_.height=n.height+5+i.height+5;var o=this.canvas_.getContext("2d");o.textBaseline="middle";var a=0,s=0;if(_D(n)||(a=n.width+5,s=n.height/2,/^https?:\/\//i.test(n.src)?(this.canvas_.height=130,o.fillText("  max: ".concat(this.maxValue_),85,40),o.drawImage(n,0,0,80,80)):(o.fillText("  max: ".concat(this.maxValue_),a,s),o.drawImage(n,0,0))),!_D(i)){var l=0;_D(n)||(l=n.width/2-i.width/2);var u=n.height+5;s=u+i.height/2,/^https?:\/\//i.test(i.src)?(o.fillText("  min: ".concat(this.minValue_),85,105),o.drawImage(i,20,85,40,40)):(o.fillText("  min: ".concat(this.minValue_),a,s),o.drawImage(i,l,u))}r()}},{key:"calculateStyle_",value:function(t,e,r){var n=this.proportionalFunction_,i=r;if(!_D(i)){i=i.clone();var a=[e.minRadius,e.maxRadius],s=a[0],l=a[1];_D(i.get("icon.src"))||(s=e.minRadius/o.SCALE_PROPORTION,l=e.maxRadius/o.SCALE_PROPORTION);var u=t.getAttribute(this.attributeName_);null==u&&console.warn("Warning: ".concat(this.attributeName_," value is null or empty."));var c=n(u,e.minValue,e.maxValue,s,l),h=e.maxValue-parseFloat(t.getAttribute(this.attributeName_));i.set(o.getSizeAttribute(i),c),i.set("zindex",h)}return i}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getMinRadius(),r=this.getMaxRadius(),n=this.getStyles().map((function(t){return t.serialize()})),i=$D(this.getProportionalFunction()),o=HD({},this.getOptions());return{parameters:[t,e,r,n,i,o=$D(o)],deserializedMethod:"M.style.Proportional.deserialize"}}},{key:"ORDER",get:function(){return 3}}])&&mV(e.prototype,r),n&&mV(e,n),o}(Ob);OV.SCALE_PROPORTION=20;var SV=OV,IV=function(t){var e,r=t.radius,n=l.a.random().hex(),i=t.strokeColor,o=t.strokeWidth;switch(t.feature.getGeometry().type){case"Point":case"MultiPoint":e=new q_({radius:r,fill:{color:n},stroke:{color:i,width:o}});break;case"LineString":case"MultiLineString":e=new Qz({fill:{color:n},stroke:{color:i,width:o}});break;case"Polygon":case"MultiPolygon":e=new Km({fill:{color:n},stroke:{color:i,width:o}});break;default:e=null}return e};function CV(t){return(CV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return PV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function MV(t,e,r){return(MV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jV(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function NV(t,e){return(NV=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function AV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jV(t);if(e){var i=jV(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kV(this,r)}}function kV(t,e){return!e||"object"!==CV(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jV(t){return(jV=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NV(t,e)}(o,t);var e,r,n,i=AV(o);function o(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return RV(this,o),r=i.call(this,n,{}),_D(t)&&_l(uu("exception").no_attr_name),r.attributeName_=t,r.categoryStyles_=e,r}return e=o,n=[{key:"deserialize",value:function(t){var e=TV(t,4),r=e[0],n=e[1],i=e[2],o=e[3],a=r,s=n;Object.keys(n).forEach((function(t){s[t]=Em.deserialize(n[t])}));var l=QD(i),u=new Function(["attributeName","categoryStyles","options"],"return new M.style.Category(attributeName, categoryStyles, options)")(a,s,l),c=o.map((function(t){return Em.deserialize(t)}));return u.add(c),u}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this.refresh(),this}},{key:"getCategories",value:function(){return this.categoryStyles_}},{key:"setCategories",value:function(t){return this.categoryStyles_=t,this.update_(),this.refresh(),this}},{key:"getStyleForCategory",value:function(t){return this.categoryStyles_[t]}},{key:"setStyleForCategory",value:function(t,e){return this.categoryStyles_[t]=e,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var t=this,e=[];this.updateCanvasPromise_=new Promise((function(r,n){return t.loadCanvasImages_(0,e,r)}))}},{key:"loadCanvasImages_",value:function(t,e,r){var n=this,i=this.getCategories(),o=Object.keys(i);if(t===o.length)this.drawGeometryToCanvas(e,r);else{var a=o[t],s=this.getStyleForCategory(a),l=new Image;l.crossOrigin="Anonymous",l.onload=function(){e.push({image:l,categoryName:a}),n.loadCanvasImages_(t+1,e,r)},l.onerror=function(){e.push({categoryName:a}),n.loadCanvasImages_(t+1,e,r)},s.updateCanvas(),s.get("icon.src")?JD(s.get("icon.src")).then((function(t){l.width=s.get("icon.scale")?t.width*s.get("icon.scale"):t.width,l.height=s.get("icon.scale")?t.height*s.get("icon.scale"):t.height,l.src=s.toImage()})):l.src=s.toImage()}}},{key:"drawGeometryToCanvas",value:function(t,e){var r=t.map((function(t){return t.image.height})),n=t.map((function(t){return t.image.width})),i=this.canvas_.getContext("2d");i.canvas.height=r.reduce((function(t,e){return t+e+5})),i.textBaseline="middle";var o=Math.max.apply(n,n);t.forEach((function(t,e){var n=t.image,a=t.categoryName,s=0,l=r.slice(0,e);_D(l)||(s=l.reduce((function(t,e){return t+e+5})),s+=5);var u=0;if(!_D(n)){u=n.height;var c=(o-n.width)/2;i.drawImage(n,c,s,n.width,n.height)}i.fillText(a,o+5,s+u/2)})),e()}},{key:"update_",value:function(){var t=this;if(!_D(this.layer_)){(_D(this.categoryStyles_)||0===Object.keys(this.categoryStyles_).length)&&(this.categoryStyles_=this.generateRandomCategories_());var e=this.categoryStyles_.other;this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(t.attributeName_),i=t.categoryStyles_[n];_D(i)?_D(e)||r.setStyle(e):r.setStyle(i)})),this.updateCanvas()}}},{key:"add",value:function(t){var e=t;return mD(e)||(e=[e]),e=e.filter((function(t){return t instanceof jb||t instanceof SV})),MV(jV(o.prototype),"add",this).call(this,e)}},{key:"generateRandomCategories_",value:function(){var t=this,e={};return _D(this.layer_)||this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(t.attributeName_);Object.prototype.hasOwnProperty.call(e,n)||(e[n]=IV({feature:r,radius:o.RANDOM_RADIUS_OPTION,strokeColor:o.RANDOM_STROKE_COLOR_OPTION,strokeWidth:o.RANDOM_STROKE_WIDTH_OPTION}))})),e}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getCategories(),r={};Object.keys(e).forEach((function(t){r[t]=e[t].serialize()}));var n=HD({},this.getOptions());n=$D(n);var i=this.getStyles().map((function(t){return t.serialize()}));return{parameters:[t,r,n,i],deserializedMethod:"M.style.Category.deserialize"}}},{key:"ORDER",get:function(){return 2}}])&&LV(e.prototype,r),n&&LV(e,n),o}(Ob);FV.RANDOM_RADIUS_OPTION=10,FV.RANDOM_STROKE_WIDTH_OPTION=1,FV.RANDOM_STROKE_COLOR_OPTION="black";var DV=FV,GV=function(t){var e=[];return t.forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e},UV=function(t,e){for(var r=[],n=[],i=0,o=0;o<t.length+1;o+=1){for(var a=[],s=[],l=0;l<e+1;l+=1)a.push(0),s.push(0);r.push(a),n.push(s)}for(var u=1;u<e+1;u+=1){r[1][u]=1,n[1][u]=0;for(var c=2;c<t.length+1;c+=1)n[c][u]=1/0}for(var h=2;h<t.length+1;h+=1){for(var f=0,p=0,d=0,g=0,y=1;y<h+1;y+=1){var m=h-y+1,_=t[m-1];if(d+=1,f+=_,i=(p+=_*_)-Math.pow(f,2)/d,0!==(g=m-1))for(var v=2;v<e+1;v+=1)n[h][v]>=i+n[g][v-1]&&(r[h][v]=m,n[h][v]=i+n[g][v-1])}r[h][1]=1,n[h][1]=i}return{lowerClassLimits:r,varianceCombinations:n}},BV=function(t,e,r){var n=t.length-1,i=[],o=r;for(i[r]=t[t.length-1],i[0]=t[0];o>1;)i[o-1]=t[e[n][o]-2],n=e[n][o]-1,o-=1;return i},zV=function(t){var e=t;e=e||5;var r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=GV(t),i=n.length<=r?n.length-1:r;t.sort((function(t,e){return t-e}));var o=UV(t,i),a=o.lowerClassLimits,s=BV(t,a,i),l=s.slice(1,s.length);return l};return Object.defineProperty(r,"name",{value:"jenks"}),r},VV=function(t){var e=t||5,r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=GV(t),i=n.length<=r?n.length-1:r,o=t.length;t.sort((function(t,e){return t-e}));for(var a=Math.trunc(o/i),s=[],l=0;l<i;l+=1){var u=t.slice(l*a,(l+1)*a);l===i-1&&(u=t.slice(l*a));var c=u.slice(-1)[0];s.push(c)}return s};return Object.defineProperty(r,"name",{value:"quantile"}),r},qV=function(t,e){return new GG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<=e}),{cqlFilter:"".concat(t," <= '").concat(e,"'")})};function YV(t){return(YV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return XV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function KV(t,e,r){return(KV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tq(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function JV(t,e){return(JV=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tq(t);if(e){var i=tq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return QV(this,r)}}function QV(t,e){return!e||"object"!==YV(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tq(t){return(tq=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eq=function(t){var e=Math.pow(10,2);return Math.round(t*e)/e},rq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&JV(t,e)}(o,t);var e,r,n,i=$V(o);function o(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zV(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return HV(this,o),r=i.call(this,a,{}),_D(t)&&_l(uu("exception").no_attr_name),r.attributeName_=t,r.choroplethStyles_=e,r.quantification_=n,r.dataValues_=[],r.breakPoints_=[],r}return e=o,n=[{key:"DEFAULT_STYLE",value:function(t){return new Iw({point:{fill:{color:t,opacity:1},stroke:{color:"black",width:1},radius:5},line:{stroke:{color:t,width:1}},polygon:{fill:{color:t,opacity:1},stroke:{color:t,width:1}}})}},{key:"deserialize",value:function(t){var e,r=WV(t,5),n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=n,u=i.map((function(t){return Em.deserialize(t)}));e="jenks"===o?zV():"quantile"===o?VV():QD(o);var c=QD(a),h=new Function(["attributeName","styles","quantification","options"],"return new M.style.Choropleth(attributeName, styles, quantification, options)")(l,u,e,c),f=s.map((function(t){return Em.deserialize(t)}));return h.add(f),h}}],(r=[{key:"applyInternal",value:function(t){this.layer_=t,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(t){return this.attributeName_=t,this.update_(),this.refresh(),this}},{key:"getQuantification",value:function(){return this.quantification_}},{key:"setQuantification",value:function(t){if(this.quantification_=t,!this.choroplethStyles_.some((function(t){return xD(t)}))){if(this.choroplethStyles_.length<this.quantification_().length){var e=WV(this.choroplethStyles_,2),r=e[0],n=e[1],i=r.get("fill.color"),o=n.get("fill.color");_D(i)&&(i=r.get("stroke.color")),_D(o)&&(o=n.get("stroke.color")),this.choroplethStyles_=[i,o]}else this.choroplethStyles_=this.choroplethStyles_.slice(0,this.quantification_().length);this.update_(),this.refresh()}return this}},{key:"getChoroplethStyles",value:function(){return this.choroplethStyles_}},{key:"setStyles",value:function(t){var e=t;return mD(e)||(e=[e]),this.choroplethStyles_=e,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var t=this;if(!_D(this.choroplethStyles_)&&this.breakPoints_.length>0){var e=[];this.updateCanvasPromise_=new Promise((function(r,n){return t.loadCanvasImages_(0,e,r)}))}}},{key:"loadCanvasImages_",value:function(t,e,r){var n=this;if(t===this.choroplethStyles_.length)this.drawGeometryToCanvas(e,r);else{var i=-1;t>0&&(i=this.breakPoints_[t-1]);var o=this.breakPoints_[t],a=new Image;a.crossOrigin="Anonymous",a.onload=function(){e.push({image:a,startLimit:eq(i),endLimit:eq(o)}),n.loadCanvasImages_(t+1,e,r)},a.onerror=function(){e.push({startLimit:eq(i),endLimit:eq(o)}),n.loadCanvasImages_(t+1,e,r)},this.choroplethStyles_[t].updateCanvas();var s=this.choroplethStyles_[t].toImage();xD(s)?a.src=s:s.then((function(t){a.src=t}))}}},{key:"drawGeometryToCanvas",value:function(t,e){var r=t.map((function(t){return t.image.height})),n=t.map((function(t){return t.image.width})),i=this.canvas_.getContext("2d");i.canvas.height=r.reduce((function(t,e){return t+e+5})),i.textBaseline="middle";var o=Math.max.apply(n,n);t.forEach((function(t,e){var n=t.image,a=t.startLimit,s=t.endLimit,l=0,u=r.slice(0,e);_D(u)||(l=u.reduce((function(t,e){return t+e+5})),l+=5);var c=0;_D(n)||(c=n.height,i.drawImage(n,0,l)),a<0?i.fillText(" x  <=  ".concat(s),o+5,l+c/2):i.fillText("".concat(a," <  x  <=  ").concat(s),o+5,l+c/2)}),this),e()}},{key:"getValues",value:function(){var t=this,e=[];return _D(this.layer_)||this.layer_.getFeatures().forEach((function(r){try{var n=parseFloat(r.getAttribute(t.attributeName_));Number.isNaN(n)||e.push(n)}catch(t){}}),this),e}},{key:"update_",value:function(){var t,e,r=this;if(!_D(this.layer_)){var n=this.layer_.getFeatures();if(!_D(n))if(this.dataValues_=this.getValues(),_D(this.choroplethStyles_)||!_D(this.choroplethStyles_)&&(xD(this.choroplethStyles_[0])||xD(this.choroplethStyles_[1]))){this.breakPoints_=this.quantification_(this.dataValues_);var i=this.choroplethStyles_&&this.choroplethStyles_[0]?this.choroplethStyles_[0]:o.START_COLOR_DEFAULT,a=this.choroplethStyles_&&this.choroplethStyles_[1]?this.choroplethStyles_[1]:o.END_COLOR_DEFAULT,s=this.breakPoints_.length,l=WD(i,a,s);mD(l)||(l=[l]),this.choroplethStyles_=(t=l,e=o.DEFAULT_STYLE,t.map((function(t){return e(t)})))}else this.breakPoints_=this.quantification_(this.dataValues_,this.choroplethStyles_.length);for(var u=function(t){new qV(r.attributeName_,r.breakPoints_[t]).execute(n).forEach((function(e){return e.setStyle(r.choroplethStyles_[t])}))},c=this.breakPoints_.length-1;c>-1;c-=1)u(c);this.updateCanvas()}}},{key:"add",value:function(t){var e=t;return mD(e)||(e=[e]),e=e.filter((function(t){return t instanceof jb||t instanceof SV})),KV(tq(o.prototype),"add",this).call(this,e)}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getChoroplethStyles().map((function(t){return t.serialize()})),r=this.getQuantification();r=_D(r.name)?$D(r):r.name;var n=HD({},this.getOptions());return{parameters:[t,e,r,n=$D(n),this.getStyles().map((function(t){return t.serialize()}))],deserializedMethod:"M.style.Choropleth.deserialize"}}},{key:"ORDER",get:function(){return 2}}])&&ZV(e.prototype,r),n&&ZV(e,n),o}(Ob);rq.START_COLOR_DEFAULT="red",rq.END_COLOR_DEFAULT="brown";var nq=rq;function iq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var oq=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"addSymbol",value:function(t,e){return i_.addDefs(t,e)}}],(r=null)&&iq(e.prototype,r),n&&iq(e,n),t}();function aq(t){return(aq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sq(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||uq(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lq(t){return function(t){if(Array.isArray(t))return cq(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||uq(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uq(t,e){if(t){if("string"==typeof t)return cq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cq(t,e):void 0}}function cq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pq(t,e){return(pq=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yq(t);if(e){var i=yq(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gq(this,r)}}function gq(t,e){return!e||"object"!==aq(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yq(t){return(yq=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pq(t,e)}(o,t);var e,r,n,i=dq(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hq(this,o);var a=r,s=n;if(xD(t)||vD(t)||_l(uu("exception").no_empty),HD(a,o.DEFAULT_OPTIONS),_D(a.gradient)||mD(a.gradient)||(a.gradient=[a.gradient]),a.gradient=a.gradient||o.DEFAULT_OPTIONS.gradient,a.gradient.length<2){var l=XD(a.gradient[0]);a.gradient.push(l)}a.blur=_D(a.blur)?o.DEFAULT_OPTIONS.blur:parseFloat(a.blur),a.radius=_D(a.radius)?o.DEFAULT_OPTIONS.radius:parseFloat(a.radius),a.weight=t,s.opacity=Number.isNaN(parseFloat(s.opacity))?1:parseFloat(s.opacity);var u=new Fz(t,a,s);return(e=i.call(this,a,u)).attribute_=t,e.options_=a,e.vendorOptions_=s,e}return e=o,n=[{key:"deserialize",value:function(t){var e=sq(t,3),r=e[0],n=e[1],i=e[2],o=r,a=QD(n),s=QD(i);return new Function(["attribute","options","vendorOptions"],"return new M.style.Heatmap(attribute, options, vendorOptions)")(o,a,s)}}],(r=[{key:"unapply",value:function(t){this.layer_=null,this.getImpl().unapply(t)}},{key:"getAttributeName",value:function(){return this.attribute_}},{key:"setAttributeName",value:function(t){this.attribute_=t,this.options_.weight=this.attribute_,this.update_()}},{key:"getGradient",value:function(){return this.options_.gradient}},{key:"setGradient",value:function(t){var e=t;if(mD(e)||(e=[e]),e.length<2){var r=XD(e[0]);e.push(r)}this.options_.gradient=e,this.update_()}},{key:"getRadius",value:function(){return this.options_.radius}},{key:"setRadius",value:function(t){this.options_.radius=t,this.update_()}},{key:"getBlurSize",value:function(){return this.options_.blur}},{key:"setBlurSize",value:function(t){this.options_.blur=t,this.update_()}},{key:"update_",value:function(){var t=this.getImpl();t.unapply(this.layer_),t.setOptions(this.options_,this.vendorOptions_),t.applyToLayer(this.layer_)}},{key:"drawGeometryToCanvas",value:function(){var t=[this.getImpl().getMinWeight(),this.getImpl().getMaxWeight()],e=t[0],r=t[1],n=this.canvas_.getContext("2d"),i=n.createLinearGradient(0,150,200,150),o=ZD([0,1],this.options_.gradient.length);this.options_.gradient.forEach((function(t,e){return i.addColorStop(o[e],t)})),n.fillStyle=i,n.fillRect(0,20,200,30),n.fillStyle="#000",n.font="10px sans-serif",n.fillText(e,0,60),n.fillText(r,199,60)}},{key:"updateCanvas",value:function(){this.drawGeometryToCanvas()}},{key:"toJSON",value:function(){var t=this.getAttributeName(),e=this.getOptions();return{parameters:[t,{gradient:lq(e.gradient),blur:e.blur,radius:e.radius,weight:e.weight},this.vendorOptions_],deserializedMethod:"M.style.Heatmap.deserialize"}}}])&&fq(e.prototype,r),n&&fq(e,n),o}(Em);mq.DEFAULT_OPTIONS={gradient:["#00f","#0ff","#0f0","#ff0","#f00"],blur:15,radius:10};var _q,vq,bq,xq,wq,Eq,Oq,Sq,Iq=mq,Cq=function(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1};function Tq(){}class Pq{constructor(){Pq.constructor_.apply(this,arguments)}setOrdinate(t,e,r){}size(){}getOrdinate(t,e){}getCoordinate(){if(1===arguments.length){}else if(2===arguments.length){}}getCoordinateCopy(t){}getDimension(){}getX(t){}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getClass(){return Pq}get interfaces_(){return[Tq]}}Pq.constructor_=function(){},Pq.X=0,Pq.Y=1,Pq.Z=2,Pq.M=3;class Rq{constructor(){Rq.constructor_.apply(this,arguments)}create(){if(1===arguments.length){if(arguments[0]instanceof Array){}else if(Cq(arguments[0],Pq)){}}else if(2===arguments.length){}}getClass(){return Rq}get interfaces_(){return[]}}function Lq(t){this.message=t}Rq.constructor_=function(){};class Mq{constructor(){Mq.constructor_.apply(this,arguments)}filter(t){}getClass(){return Mq}get interfaces_(){return[]}}function Nq(){}function Aq(){}Mq.constructor_=function(){};class kq{constructor(){kq.constructor_.apply(this,arguments)}static equalsWithTolerance(t,e,r){return Math.abs(t-e)<=r}getClass(){return kq}get interfaces_(){return[]}}function jq(t,e){this.low=0|e,this.high=0|t}function Fq(){}function Dq(){}function Gq(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}kq.constructor_=function(){},jq.toBinaryString=function(t){for(var e="",r=2147483648;r>0;r>>>=1)e+=(t.high&r)===r?"1":"0";for(r=2147483648;r>0;r>>>=1)e+=(t.low&r)===r?"1":"0";return e},Fq.isNaN=t=>Number.isNaN(t),Fq.isInfinite=t=>!Number.isFinite(t),Fq.MAX_VALUE=Number.MAX_VALUE,"function"==typeof Float64Array&&"function"==typeof Int32Array?(Eq=2146435072,Oq=new Float64Array(1),Sq=new Int32Array(Oq.buffer),Fq.doubleToLongBits=function(t){Oq[0]=t;var e=0|Sq[0],r=0|Sq[1];return(r&Eq)===Eq&&0!=(1048575&r)&&0!==e&&(e=0,r=2146959360),new jq(r,e)},Fq.longBitsToDouble=function(t){return Sq[0]=t.low,Sq[1]=t.high,Oq[0]}):(_q=1023,vq=Math.log2,bq=Math.floor,xq=Math.pow,wq=function(){for(var t=53;t>0;t--){var e=xq(2,t)-1;if(bq(vq(e))+1===t)return e}return 0}(),Fq.doubleToLongBits=function(t){var e,r,n,i,o,a,s,l,u;if(t<0||1/t===Number.NEGATIVE_INFINITY?(a=1<<31,t=-t):a=0,0===t)return new jq(l=a,u=0);if(t===1/0)return new jq(l=2146435072|a,u=0);if(t!=t)return new jq(l=2146959360,u=0);if(i=0,u=0,(e=bq(t))>1)if(e<=wq)(i=bq(vq(e)))<=20?(u=0,l=e<<20-i&1048575):(u=e%(r=xq(2,n=i-20))<<32-n,l=e/r&1048575);else for(n=e,u=0;0!==(n=bq(r=n/2));)i++,u>>>=1,u|=(1&l)<<31,l>>>=1,r!==n&&(l|=524288);if(s=i+_q,o=0===e,e=t-e,i<52&&0!==e)for(n=0;;){if((r=2*e)>=1?(e=r-1,o?(s--,o=!1):(n<<=1,n|=1,i++)):(e=r,o?0==--s&&(i++,o=!1):(n<<=1,i++)),20===i)l|=n,n=0;else if(52===i){u|=n;break}if(1===r){i<20?l|=n<<20-i:i<52&&(u|=n<<52-i);break}}return l|=s<<20,new jq(l|=a,u)},Fq.longBitsToDouble=function(t){var e,r,n,i,o=t.high,a=t.low;r=o&1<<31?-1:1,n=((2146435072&o)>>20)-_q,i=0,e=1<<19;for(var s=1;s<=20;s++)o&e&&(i+=xq(2,-s)),e>>>=1;for(e=1<<31,s=21;s<=52;s++)a&e&&(i+=xq(2,-s)),e>>>=1;if(-1023===n){if(0===i)return 0*r;n=-1022}else{if(1024===n)return 0===i?r/0:NaN;i+=1}return r*i*xq(2,n)}),Gq.prototype=Object.create(Error.prototype),Gq.prototype.constructor=Error;class Uq extends Gq{constructor(){super(),Uq.constructor_.apply(this,arguments)}getClass(){return Uq}get interfaces_(){return[]}}Uq.constructor_=function(){if(0===arguments.length)Gq.constructor_.call(this);else if(1===arguments.length){let t=arguments[0];Gq.constructor_.call(this,t)}};class Bq{constructor(){Bq.constructor_.apply(this,arguments)}static shouldNeverReachHere(){if(0===arguments.length)Bq.shouldNeverReachHere(null);else if(1===arguments.length){let t=arguments[0];throw new Uq("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){let t=arguments[0];Bq.isTrue(t,null)}else if(2===arguments.length){let t=arguments[1];if(!arguments[0])throw null===t?new Uq:new Uq(t)}}static equals(){if(2===arguments.length){let t=arguments[0],e=arguments[1];Bq.equals(t,e,null)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];if(!e.equals(t))throw new Uq("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))}}getClass(){return Bq}get interfaces_(){return[]}}Bq.constructor_=function(){};class zq{constructor(){zq.constructor_.apply(this,arguments)}static hashCode(){if(1===arguments.length&&"number"==typeof arguments[0]){let e=arguments[0];var t=Fq.doubleToLongBits(e);return Math.trunc(t^t>>>32)}}setOrdinate(t,e){switch(t){case zq.X:this.x=e;break;case zq.Y:this.y=e;break;case zq.Z:this.z=e;break;default:throw new Lq("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){let t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){let t=arguments[0],e=arguments[1];return!!kq.equalsWithTolerance(this.x,t.x,e)&&!!kq.equalsWithTolerance(this.y,t.y,e)}}getOrdinate(t){switch(t){case zq.X:return this.x;case zq.Y:return this.y;case zq.Z:return this.z}throw new Lq("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Fq.isNaN(this.z)&&Fq.isNaN(t.z))}equals(t){return t instanceof zq&&this.equals2D(t)}equalInZ(t,e){return kq.equalsWithTolerance(this.z,t.z,e)}compareTo(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return Bq.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new zq(this)}toString(){return"("+this.x+", "+this.y+", "+this.z+")"}distance3D(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)}distance(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}hashCode(){var t=17;return t=37*(t=37*t+zq.hashCode(this.x))+zq.hashCode(this.y)}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.z}getClass(){return zq}get interfaces_(){return[Nq,Tq,Aq]}}class Vq{constructor(){Vq.constructor_.apply(this,arguments)}static compare(t,e){return t<e?-1:t>e?1:Fq.isNaN(t)?Fq.isNaN(e)?0:-1:Fq.isNaN(e)?1:0}compare(t,e){var r=t,n=e,i=Vq.compare(r.x,n.x);if(0!==i)return i;var o=Vq.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:Vq.compare(r.z,n.z)}getClass(){return Vq}get interfaces_(){return[Dq]}}Vq.constructor_=function(){if(this._dimensionsToTest=2,0===arguments.length)Vq.constructor_.call(this,2);else if(1===arguments.length){let t=arguments[0];if(2!==t&&3!==t)throw new Lq("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}},zq.DimensionalComparator=Vq,zq.constructor_=function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)zq.constructor_.call(this,0,0);else if(1===arguments.length){let t=arguments[0];zq.constructor_.call(this,t.x,t.y,t.z)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];zq.constructor_.call(this,t,e,zq.NULL_ORDINATE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.z=r}},zq.serialVersionUID=0x5cbf2c235c7e5800,zq.NULL_ORDINATE=Fq.NaN,zq.X=0,zq.Y=1,zq.Z=2;class qq{constructor(){qq.constructor_.apply(this,arguments)}static intersects(){if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){let i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];var t=Math.min(a.x,s.x),e=Math.max(a.x,s.x),r=Math.min(i.x,o.x),n=Math.max(i.x,o.x);return!(r>e)&&(!(n<t)&&(t=Math.min(a.y,s.y),e=Math.max(a.y,s.y),r=Math.min(i.y,o.y),n=Math.max(i.y,o.y),!(r>e)&&!(n<t)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof qq))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new qq;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new qq(e,n,r,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof zq){let t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof qq){let t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof qq){let t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof zq){let t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof zq&&arguments[1]instanceof zq){let t=arguments[0],e=arguments[1];return!this.isNull()&&(!((t.x<e.x?t.x:e.x)>this._maxx)&&(!((t.x>e.x?t.x:e.x)<this._minx)&&(!((t.y<e.y?t.y:e.y)>this._maxy)&&!((t.y>e.y?t.y:e.y)<this._miny))))}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof zq){let t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof qq){let t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){let t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof qq){let t=arguments[0];return this.covers(t)}if(arguments[0]instanceof zq){let t=arguments[0];return this.covers(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new zq((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof zq){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof qq){let t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),r<n?(this._miny=r,this._maxy=n):(this._miny=n,this._maxy=r)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)}hashCode(){var t=17;return t=37*(t=37*(t=37*(t=37*t+zq.hashCode(this._minx))+zq.hashCode(this._maxx))+zq.hashCode(this._miny))+zq.hashCode(this._maxy)}getClass(){return qq}get interfaces_(){return[Nq,Aq]}}qq.constructor_=function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof zq){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof qq){let t=arguments[0];this.init(t)}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.init(t,e,r,n)}},qq.serialVersionUID=0x51845cd552189800;class Yq{constructor(){Yq.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===Yq.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equals(){if(arguments[0]instanceof Yq){let t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){let e=arguments[0];if(!(e instanceof Yq))return!1;var t=e;return this.equalsExact(t)}}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(Yq.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){if(1===arguments.length){let e=arguments[0];var t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){let e=arguments[0],r=arguments[1];t=e;return this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,r)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(t){if(t.getTypeCode()===Yq.TYPECODE_GEOMETRYCOLLECTION)throw new Lq("This method does not support GeometryCollection arguments")}equal(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r}norm(){var t=this.copy();return t.normalize(),t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new qq(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),a=i.compareTo(o);if(0!==a)return a}return r.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isGeometryCollectionOrDerived(){return this.getTypeCode()===Yq.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===Yq.TYPECODE_MULTIPOINT||this.getTypeCode()===Yq.TYPECODE_MULTILINESTRING||this.getTypeCode()===Yq.TYPECODE_MULTIPOLYGON}get interfaces_(){return[Tq,Nq,Aq]}getClass(){return Yq}static hasNonEmptyElements(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}Yq.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},Yq.serialVersionUID=0x799ea46522854c00,Yq.TYPECODE_POINT=0,Yq.TYPECODE_MULTIPOINT=1,Yq.TYPECODE_LINESTRING=2,Yq.TYPECODE_LINEARRING=3,Yq.TYPECODE_MULTILINESTRING=4,Yq.TYPECODE_POLYGON=5,Yq.TYPECODE_MULTIPOLYGON=6,Yq.TYPECODE_GEOMETRYCOLLECTION=7,Yq.TYPENAME_POINT="Point",Yq.TYPENAME_MULTIPOINT="MultiPoint",Yq.TYPENAME_LINESTRING="LineString",Yq.TYPENAME_LINEARRING="LinearRing",Yq.TYPENAME_MULTILINESTRING="MultiLineString",Yq.TYPENAME_POLYGON="Polygon",Yq.TYPENAME_MULTIPOLYGON="MultiPolygon",Yq.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Yq.geometryChangedFilter={get interfaces_(){return[Mq]},filter(t){t.geometryChangedAction()}};class Wq{constructor(){Wq.constructor_.apply(this,arguments)}filter(t){}getClass(){return Wq}get interfaces_(){return[]}}Wq.constructor_=function(){};class Xq{constructor(){Xq.constructor_.apply(this,arguments)}isInBoundary(t){}getClass(){return Xq}get interfaces_(){return[]}}class Hq{constructor(){Hq.constructor_.apply(this,arguments)}isInBoundary(t){return t%2==1}getClass(){return Hq}get interfaces_(){return[Xq]}}Hq.constructor_=function(){};class Zq{constructor(){Zq.constructor_.apply(this,arguments)}isInBoundary(t){return t>0}getClass(){return Zq}get interfaces_(){return[Xq]}}Zq.constructor_=function(){};class Kq{constructor(){Kq.constructor_.apply(this,arguments)}isInBoundary(t){return t>1}getClass(){return Kq}get interfaces_(){return[Xq]}}Kq.constructor_=function(){};class Jq{constructor(){Jq.constructor_.apply(this,arguments)}isInBoundary(t){return 1===t}getClass(){return Jq}get interfaces_(){return[Xq]}}function $q(){}function Qq(){}function tY(t){this.message=t||""}function eY(){}function rY(t){this.message=t||""}function nY(t){this.message=t||""}function iY(){this.array_=[],arguments[0]instanceof Qq&&this.addAll(arguments[0])}Jq.constructor_=function(){},Xq.Mod2BoundaryNodeRule=Hq,Xq.EndPointBoundaryNodeRule=Zq,Xq.MultiValentEndPointBoundaryNodeRule=Kq,Xq.MonoValentEndPointBoundaryNodeRule=Jq,Xq.constructor_=function(){},Xq.MOD2_BOUNDARY_RULE=new Hq,Xq.ENDPOINT_BOUNDARY_RULE=new Zq,Xq.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Kq,Xq.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Jq,Xq.OGC_SFS_BOUNDARY_RULE=Xq.MOD2_BOUNDARY_RULE,$q.prototype.hasNext=function(){},$q.prototype.next=function(){},$q.prototype.remove=function(){},Qq.prototype.add=function(){},Qq.prototype.addAll=function(){},Qq.prototype.isEmpty=function(){},Qq.prototype.iterator=function(){},Qq.prototype.size=function(){},Qq.prototype.toArray=function(){},Qq.prototype.remove=function(){},tY.prototype=new Error,tY.prototype.name="IndexOutOfBoundsException",eY.prototype=Object.create(Qq.prototype),eY.prototype.constructor=eY,eY.prototype.get=function(){},eY.prototype.set=function(){},eY.prototype.isEmpty=function(){},rY.prototype=new Error,rY.prototype.name="NoSuchElementException",nY.prototype=new Error,nY.prototype.name="OperationNotSupported",iY.prototype=Object.create(eY.prototype),iY.prototype.constructor=iY,iY.prototype.ensureCapacity=function(){},iY.prototype.interfaces_=[eY,Qq],iY.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],0,arguments[1]),!0},iY.prototype.clear=function(){this.array_=[]},iY.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},iY.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},iY.prototype.iterator=function(){return new oY(this)},iY.prototype.get=function(t){if(t<0||t>=this.size())throw new tY;return this.array_[t]},iY.prototype.isEmpty=function(){return 0===this.array_.length},iY.prototype.size=function(){return this.array_.length},iY.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},iY.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},iY.prototype.removeAll=function(t){for(var e=t.iterator();e.hasNext();)this.remove(e.next());return!0};var oY=function(t){this.arrayList_=t,this.position_=0};oY.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new rY;return this.arrayList_.get(this.position_++)},oY.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},oY.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},oY.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))};class aY extends iY{constructor(){super(),aY.constructor_.apply(this,arguments)}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&Cq(arguments[0],Qq)){let r=arguments[1];for(var t=!1,e=arguments[0].iterator();e.hasNext();)this.add(e.next(),r),t=!0;return t}return super.addAll.apply(this,arguments)}clone(){for(var t=super.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){return this.toArray(aY.coordArrayType)}add(){if(1===arguments.length){let t=arguments[0];super.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof zq&&"boolean"==typeof arguments[1]){let t=arguments[0];if(!arguments[1])if(this.size()>=1)if(this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let e=arguments[0],r=arguments[1];if(arguments[2])for(var t=0;t<e.length;t++)this.add(e[t],r);else for(t=e.length-1;t>=0;t--)this.add(e[t],r);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof zq){let t=arguments[0],r=arguments[1];if(!arguments[2]){var e=this.size();if(e>0){if(t>0)if(this.get(t-1).equals2D(r))return null;if(t<e)if(this.get(t).equals2D(r))return null}}super.add.call(this,t,r)}}else if(4===arguments.length){let e=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];var r=1;i>o&&(r=-1);for(t=i;t!==o;t+=r)this.add(e[t],n);return!0}}closeRing(){this.size()>0&&this.add(new zq(this.get(0)),!1)}getClass(){return aY}get interfaces_(){return[]}}aY.constructor_=function(){if(0===arguments.length);else if(1===arguments.length){let t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}},aY.coordArrayType=new Array(0).fill(null);class sY{constructor(){sY.constructor_.apply(this,arguments)}static log10(t){var e=Math.log(t);return Fq.isInfinite(e)||Fq.isNaN(e)?e:e/sY.LOG_10}static min(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){let e=arguments[1],r=arguments[2];return e>(t=arguments[0])&&(t=e),r>t&&(t=r),t}if(4===arguments.length){let e=arguments[1],r=arguments[2],n=arguments[3];var t;return e>(t=arguments[0])&&(t=e),r>t&&(t=r),n>t&&(t=n),t}}static average(t,e){return(t+e)/2}getClass(){return sY}get interfaces_(){return[]}}function lY(){}sY.constructor_=function(){},sY.LOG_10=Math.log(10),lY.arraycopy=(t,e,r,n,i)=>{let o=0;for(let a=e;a<e+i;a++)r[n+o]=t[a],o++},lY.getProperty=t=>({"line.separator":"\n"}[t]);class uY{constructor(){uY.constructor_.apply(this,arguments)}static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(uY.indexOf(n,e)<0)return n}return null}static scroll(t,e){var r=uY.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);lY.arraycopy(t,r,n,0,t.length-r),lY.arraycopy(t,0,n,t.length-r,r),lY.arraycopy(n,0,t,0,t.length)}static equals(){if(2===arguments.length){let e=arguments[0],r=arguments[1];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].equals(r[t]))return!1;return!0}if(3===arguments.length){let e=arguments[0],r=arguments[1],n=arguments[2];if(e===r)return!0;if(null===e||null===r)return!1;if(e.length!==r.length)return!1;for(t=0;t<e.length;t++)if(0!==n.compare(e[t],r[t]))return!1;return!0}}static intersection(t,e){for(var r=new aY,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()}static hasRepeatedPoints(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){return uY.hasRepeatedPoints(t)?new aY(t,!1).toCoordinateArray():t}static reverse(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}}static removeNull(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;var i=0;for(r=0;r<t.length;r++)null!==t[r]&&(n[i++]=t[r]);return n}static copyDeep(){if(1===arguments.length){let r=arguments[0];for(var t=new Array(r.length).fill(null),e=0;e<r.length;e++)t[e]=new zq(r[e]);return t}if(5===arguments.length){let t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4];for(e=0;e<o;e++)n[i+e]=new zq(t[r+e])}}static isEqualReversed(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0}static envelope(t){for(var e=new qq,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e}static toCoordinateArray(t){return t.toArray(uY.coordArrayType)}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1}static increasingDirection(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1}static compare(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0}static minCoordinate(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e}static extract(t,e,r){e=sY.clamp(e,0,t.length);var n=(r=sY.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,a=e;a<=r;a++)i[o++]=t[a];return i}getClass(){return uY}get interfaces_(){return[]}}class cY{constructor(){cY.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e;return uY.compare(r,n)}getClass(){return cY}get interfaces_(){return[Dq]}}cY.constructor_=function(){};class hY{constructor(){hY.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=uY.compare(r,n);return uY.isEqualReversed(r,n)?0:i}OLDcompare(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=uY.increasingDirection(r),o=uY.increasingDirection(n),a=i>0?0:r.length-1,s=o>0?0:r.length-1,l=0;l<r.length;l++){var u=r[a].compareTo(n[s]);if(0!==u)return u;a+=i,s+=o}return 0}getClass(){return hY}get interfaces_(){return[Dq]}}function fY(){}function pY(){}function dY(){}function gY(){this.array_=[],arguments[0]instanceof Qq&&this.addAll(arguments[0])}hY.constructor_=function(){},uY.ForwardComparator=cY,uY.BidirectionalComparator=hY,uY.constructor_=function(){},uY.coordArrayType=new Array(0).fill(null),fY.prototype.get=function(){},fY.prototype.put=function(){},fY.prototype.size=function(){},fY.prototype.values=function(){},fY.prototype.entrySet=function(){},pY.prototype=new fY,dY.prototype=new Qq,dY.prototype.contains=function(){},gY.prototype=new dY,gY.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(this.array_[e]===t)return!0}return!1},gY.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},gY.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},gY.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},gY.prototype.size=function(){return this.array_.length},gY.prototype.isEmpty=function(){return 0===this.array_.length},gY.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},gY.prototype.iterator=function(){return new yY(this)};var yY=function(t){this.hashSet_=t,this.position_=0};yY.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new rY;return this.hashSet_.array_[this.position_++]},yY.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},yY.prototype.remove=function(){throw new nY};function mY(t){return null==t?0:t.color}function _Y(t){return null==t?null:t.parent}function vY(t,e){null!==t&&(t.color=e)}function bY(t){return null==t?null:t.left}function xY(t){return null==t?null:t.right}function wY(){this.root_=null,this.size_=0}wY.prototype=new pY,wY.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},wY.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:r,color:0,getValue(){return this.value},getKey(){return this.key}};return n<0?r.left=a:r.right=a,this.fixAfterInsertion(a),this.size_++,null},wY.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){var e;if(_Y(t)==bY(_Y(_Y(t))))1==mY(e=xY(_Y(_Y(t))))?(vY(_Y(t),0),vY(e,0),vY(_Y(_Y(t)),1),t=_Y(_Y(t))):(t==xY(_Y(t))&&(t=_Y(t),this.rotateLeft(t)),vY(_Y(t),0),vY(_Y(_Y(t)),1),this.rotateRight(_Y(_Y(t))));else 1==mY(e=bY(_Y(_Y(t))))?(vY(_Y(t),0),vY(e,0),vY(_Y(_Y(t)),1),t=_Y(_Y(t))):(t==bY(_Y(t))&&(t=_Y(t),this.rotateRight(t)),vY(_Y(t),0),vY(_Y(_Y(t)),1),this.rotateLeft(_Y(_Y(t))))}this.root_.color=0},wY.prototype.values=function(){var t=new iY,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=wY.successor(e));)t.add(e.value);return t},wY.prototype.entrySet=function(){var t=new gY,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=wY.successor(e));)t.add(e);return t},wY.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},wY.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},wY.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},wY.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var r=t;null!==e&&r===e.right;)r=e,e=e.parent;return e},wY.prototype.size=function(){return this.size_},wY.prototype.containsKey=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return!0;e=e.right}}return!1};class EY{constructor(){EY.constructor_.apply(this,arguments)}getClass(){return EY}get interfaces_(){return[]}}function OY(){}function SY(){this.array_=[],arguments[0]instanceof Qq&&this.addAll(arguments[0])}EY.constructor_=function(){},OY.prototype=new dY,SY.prototype=new OY,SY.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},SY.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},SY.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},SY.prototype.remove=function(t){throw new nY},SY.prototype.size=function(){return this.array_.length},SY.prototype.isEmpty=function(){return 0===this.array_.length},SY.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},SY.prototype.iterator=function(){return new CY(this)};var IY,CY=function(t){this.treeSet_=t,this.position_=0};function TY(){}function PY(){}CY.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new rY;return this.treeSet_.array_[this.position_++]},CY.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},CY.prototype.remove=function(){throw new nY},TY.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)return n=function(t,e){return t.compareTo(e)},void i.sort(n);if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else{if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}if(4===arguments.length){for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t]);return}}},TY.asList=function(t){for(var e=new iY,r=0,n=t.length;r<n;r++)e.add(t[r]);return e},PY.isWhitespace=t=>t<=32&&t>=0||127==t,PY.toUpperCase=t=>t.toUpperCase();class RY{constructor(){RY.constructor_.apply(this,arguments)}static toDimensionSymbol(t){switch(t){case RY.FALSE:return RY.SYM_FALSE;case RY.TRUE:return RY.SYM_TRUE;case RY.DONTCARE:return RY.SYM_DONTCARE;case RY.P:return RY.SYM_P;case RY.L:return RY.SYM_L;case RY.A:return RY.SYM_A}throw new Lq("Unknown dimension value: "+t)}static toDimensionValue(t){switch(PY.toUpperCase(t)){case RY.SYM_FALSE:return RY.FALSE;case RY.SYM_TRUE:return RY.TRUE;case RY.SYM_DONTCARE:return RY.DONTCARE;case RY.SYM_P:return RY.P;case RY.SYM_L:return RY.L;case RY.SYM_A:return RY.A}throw new Lq("Unknown dimension symbol: "+t)}getClass(){return RY}get interfaces_(){return[]}}RY.constructor_=function(){},RY.P=0,RY.L=1,RY.A=2,RY.FALSE=-1,RY.TRUE=-2,RY.DONTCARE=-3,RY.SYM_FALSE="F",RY.SYM_TRUE="T",RY.SYM_DONTCARE="*",RY.SYM_P="0",RY.SYM_L="1",RY.SYM_A="2";class LY{constructor(){LY.constructor_.apply(this,arguments)}filter(t){}getClass(){return LY}get interfaces_(){return[]}}LY.constructor_=function(){};class MY{constructor(){MY.constructor_.apply(this,arguments)}filter(t,e){}isDone(){}isGeometryChanged(){}getClass(){return MY}get interfaces_(){return[]}}MY.constructor_=function(){};class NY extends Yq{constructor(){super(),NY.constructor_.apply(this,arguments)}computeEnvelopeInternal(){for(var t=new qq,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t}getArea(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var t=r;if(this._geometries.length!==t._geometries.length)return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].equalsExact(t._geometries[e],n))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();TY.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){for(var t=RY.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}getTypeCode(){return Yq.TYPECODE_GEOMETRYCOLLECTION}getDimension(){for(var t=RY.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)}compareToSameClass(){if(1===arguments.length){let r=arguments[0];var t=new SY(TY.asList(this._geometries)),e=new SY(TY.asList(r._geometries));return this.compare(t,e)}if(2===arguments.length){let t=arguments[1];for(var r=arguments[0],n=this.getNumGeometries(),i=r.getNumGeometries(),o=0;o<n&&o<i;){var a=this.getGeometryN(o),s=r.getGeometryN(o),l=a.compareToSameClass(s,t);if(0!==l)return l;o++}return o<n?1:o<i?-1:0}}apply(){if(Cq(arguments[0],Wq)){let e=arguments[0];for(var t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(Cq(arguments[0],MY)){let e=arguments[0];if(0===this._geometries.length)return null;for(t=0;t<this._geometries.length&&(this._geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(Cq(arguments[0],LY)){let e=arguments[0];e.filter(this);for(t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(Cq(arguments[0],Mq)){let e=arguments[0];e.filter(this);for(t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}}getBoundary(){return this.checkNotGeometryCollection(this),Bq.shouldNeverReachHere(),null}getGeometryType(){return Yq.TYPENAME_GEOMETRYCOLLECTION}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new NY(t,this._factory)}isEmpty(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}getClass(){return NY}get interfaces_(){return[]}}NY.constructor_=function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(Yq.constructor_.call(this,e),null===t&&(t=[]),Yq.hasNullElements(t))throw new Lq("geometries must not contain null elements");this._geometries=t}},NY.serialVersionUID=-0x4f07bcb1f857d800;class AY extends NY{constructor(){super(),AY.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?RY.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return Yq.TYPECODE_MULTILINESTRING}getDimension(){return 1}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)}getBoundary(){return new kY(this).getBoundary()}getGeometryType(){return Yq.TYPENAME_MULTILINESTRING}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new AY(t,this._factory)}getClass(){return AY}get interfaces_(){return[EY]}}AY.constructor_=function(){let t=arguments[0],e=arguments[1];NY.constructor_.call(this,t,e)},AY.serialVersionUID=0x7155d2ab4afa8000;class kY{constructor(){kY.constructor_.apply(this,arguments)}static getBoundary(){if(1===arguments.length){return new kY(arguments[0]).getBoundary()}if(2===arguments.length){return new kY(arguments[0],arguments[1]).getBoundary()}}boundaryMultiLineString(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)}getBoundary(){return this._geom instanceof WY?this.boundaryLineString(this._geom):this._geom instanceof AY?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(t){var e=new iY;this._endpointMap=new wY;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return uY.toCoordinateArray(e)}addEndpoint(t){var e=this._endpointMap.get(t);null===e&&(e=new jY,this._endpointMap.put(t,e)),e.count++}getClass(){return kY}get interfaces_(){return[]}}kY.constructor_=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){let t=arguments[0];kY.constructor_.call(this,t,Xq.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}};class jY{constructor(){jY.constructor_.apply(this,arguments)}getClass(){return jY}get interfaces_(){return[]}}jY.constructor_=function(){this.count=null};class FY{constructor(){FY.constructor_.apply(this,arguments)}static ofLine(t){var e=t.size();if(e<=1)return 0;var r=0,n=new zq;t.getCoordinate(0,n);for(var i=n.x,o=n.y,a=1;a<e;a++){t.getCoordinate(a,n);var s=n.x,l=n.y,u=s-i,c=l-o;r+=Math.sqrt(u*u+c*c),i=s,o=l}return r}getClass(){return FY}get interfaces_(){return[]}}function DY(){}function GY(){}function UY(){}function BY(){}function zY(){}FY.constructor_=function(){};class VY{constructor(){VY.constructor_.apply(this,arguments)}static chars(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return new String(r)}static getStackTrace(){if(1===arguments.length){let r=arguments[0];var t=new UY,e=new DY(t);return r.printStackTrace(e),t.toString()}if(2===arguments.length){let t=arguments[0],e=arguments[1];for(var r="",n=new zY(new GY(VY.getStackTrace(t))),i=0;i<e;i++)try{r+=n.readLine()+VY.NEWLINE}catch(t){if(!(t instanceof BY))throw t;Bq.shouldNeverReachHere()}return r}}static split(t,e){for(var r=e.length,n=new iY,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);n.add(a),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var s=new Array(n.size()).fill(null),l=0;l<s.length;l++)s[l]=n.get(l);return s}static toString(){if(1===arguments.length&&"number"==typeof arguments[0]){let t=arguments[0];return VY.SIMPLE_ORDINATE_FORMAT.format(t)}}static spaces(t){return VY.chars(" ",t)}getClass(){return VY}get interfaces_(){return[]}}function qY(t){this.str=t}VY.constructor_=function(){},VY.NEWLINE=lY.getProperty("line.separator"),VY.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),qY.prototype.append=function(t){this.str+=t},qY.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},qY.prototype.toString=function(t){return this.str};class YY{constructor(){YY.constructor_.apply(this,arguments)}static copyCoord(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))}static isRing(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Pq.X)===t.getOrdinate(e-1,Pq.X)&&t.getOrdinate(0,Pq.Y)===t.getOrdinate(e-1,Pq.Y))}static isEqual(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!Fq.isNaN(a)||!Fq.isNaN(s)))return!1}return!0}static extend(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(YY.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)YY.copy(e,i-1,n,o,1);return n}static reverse(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)YY.swap(t,n,e-n)}static swap(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}}static copy(t,e,r,n,i){for(var o=0;o<i;o++)YY.copyCoord(t,e+o,r,n+o)}static toString(){if(1===arguments.length&&Cq(arguments[0],Pq)){let o=arguments[0];var t=o.size();if(0===t)return"()";var e=o.getDimension(),r=new qY;r.append("(");for(var n=0;n<t;n++){n>0&&r.append(" ");for(var i=0;i<e;i++)i>0&&r.append(","),r.append(VY.toString(o.getOrdinate(n,i)))}return r.append(")"),r.toString()}}static ensureValidRing(t,e){var r=e.size();return 0===r?e:r<=3?YY.createClosedRing(t,e,4):e.getOrdinate(0,Pq.X)===e.getOrdinate(r-1,Pq.X)&&e.getOrdinate(0,Pq.Y)===e.getOrdinate(r-1,Pq.Y)?e:YY.createClosedRing(t,e,r+1)}static createClosedRing(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();YY.copy(e,0,n,0,i);for(var o=i;o<r;o++)YY.copy(e,0,n,o,1);return n}getClass(){return YY}get interfaces_(){return[]}}YY.constructor_=function(){};class WY extends Yq{constructor(){super(),WY.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this.isEmpty()?new qq:this._points.expandEnvelope(new qq)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var t=r;if(this._points.size()!==t._points.size())return!1;for(var e=0;e<this._points.size();e++)if(!this.equal(this._points.getCoordinate(e),t._points.getCoordinate(e),n))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var r=this._points.copy();YY.reverse(r),this._points=r}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?RY.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return Yq.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return FY.ofLine(this._points)}getNumPoints(){return this._points.size()}reverse(){var t=this._points.copy();return YY.reverse(t),this.getFactory().createLineString(t)}compareToSameClass(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(Cq(arguments[0],Wq)){let e=arguments[0];for(var t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t))}else if(Cq(arguments[0],MY)){let e=arguments[0];if(0===this._points.size())return null;for(t=0;t<this._points.size()&&(e.filter(this._points,t),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(Cq(arguments[0],LY)){arguments[0].filter(this)}else if(Cq(arguments[0],Mq)){arguments[0].filter(this)}}getBoundary(){return new kY(this).getBoundary()}isEquivalentClass(t){return t instanceof WY}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return Yq.TYPENAME_LINESTRING}copy(){return new WY(this._points.copy(),this._factory)}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Lq("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}getClass(){return WY}get interfaces_(){return[EY]}}WY.constructor_=function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];Yq.constructor_.call(this,e),this.init(t)}},WY.serialVersionUID=0x2b2b51ba435c8e00;class XY{constructor(){XY.constructor_.apply(this,arguments)}getClass(){return XY}get interfaces_(){return[]}}XY.constructor_=function(){};class HY extends Yq{constructor(){super(),HY.constructor_.apply(this,arguments)}computeEnvelopeInternal(){if(this.isEmpty())return new qq;var t=new qq;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return RY.FALSE}getTypeCode(){return Yq.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}reverse(){return this.copy()}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(Cq(arguments[0],Wq)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Cq(arguments[0],MY)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(Cq(arguments[0],LY)){arguments[0].filter(this)}else if(Cq(arguments[0],Mq)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return Yq.TYPENAME_POINT}copy(){return new HY(this._coordinates.copy(),this._factory)}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Bq.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}getClass(){return HY}get interfaces_(){return[XY]}}HY.constructor_=function(){this._coordinates=null;let t=arguments[0],e=arguments[1];Yq.constructor_.call(this,e),this.init(t)},HY.serialVersionUID=0x44077bad161cbc00;class ZY{constructor(){ZY.constructor_.apply(this,arguments)}static ofRing(){if(arguments[0]instanceof Array){let t=arguments[0];return Math.abs(ZY.ofRingSigned(t))}if(Cq(arguments[0],Pq)){let t=arguments[0];return Math.abs(ZY.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){let o=arguments[0];if(o.length<3)return 0;for(var t=0,e=o[0].x,r=1;r<o.length-1;r++){var n=o[r].x-e,i=o[r+1].y;t+=n*(o[r-1].y-i)}return t/2}if(Cq(arguments[0],Pq)){let n=arguments[0];var o=n.size();if(o<3)return 0;var a=new zq,s=new zq,l=new zq;n.getCoordinate(0,s),n.getCoordinate(1,l);e=s.x;l.x-=e;for(t=0,r=1;r<o-1;r++)a.y=s.y,s.x=l.x,s.y=l.y,n.getCoordinate(r+1,l),l.x-=e,t+=s.x*(a.y-l.y);return t/2}}getClass(){return ZY}get interfaces_(){return[]}}function KY(t){this.str=t}function JY(t){this.value=t}ZY.constructor_=function(){},KY.prototype.append=function(t){this.str+=t},KY.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},KY.prototype.toString=function(t){return this.str},JY.prototype.intValue=function(){return this.value},JY.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},JY.isNaN=t=>Number.isNaN(t);class $Y{constructor(){$Y.constructor_.apply(this,arguments)}static sqr(t){return $Y.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){let t=arguments[0];return $Y.parse(t)}if("number"==typeof arguments[0]){return new $Y(arguments[0])}}static sqrt(t){return $Y.valueOf(t).sqrt()}static parse(t){for(var e=0,r=t.length;PY.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new $Y,a=0,s=0,l=0;!(e>=r);){var u=t.charAt(e);if(e++,PY.isDigit(u)){var c=u-"0";o.selfMultiply($Y.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=JY.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(p>0){var d=$Y.TEN.pow(p);f=o.divide(d)}else if(p<0){d=$Y.TEN.pow(-p);f=o.multiply(d)}return n?f.negate():f}static createNaN(){return new $Y(Fq.NaN,Fq.NaN)}static copy(t){return new $Y(t)}static magnitude(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){for(var r=new KY,n=0;n<e;n++)r.append(t);return r.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){var r=this.abs(),n=$Y.magnitude(r._hi),i=$Y.TEN.pow(n);(r=r.divide(i)).gt($Y.TEN)?(r=r.divide($Y.TEN),n+=1):r.lt($Y.ONE)&&(r=r.multiply($Y.TEN),n-=1);for(var o=n+1,a=new KY,s=$Y.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(r._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),r=r.subtract($Y.valueOf(u)).multiply($Y.TEN),c&&r.selfAdd($Y.TEN);var f=!0,p=$Y.magnitude(r._hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=n,a.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof $Y){let t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){let t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof $Y){let t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof $Y){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof $Y){let t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){let l=arguments[0],u=arguments[1];var t,e,r,n,i=null,o=null,a=null,s=null;return r=this._hi/l,s=(i=(a=$Y.SPLIT*r)-(i=a-r))*(o=(s=$Y.SPLIT*l)-(o=s-l))-(n=r*l)+i*(e=l-o)+(t=r-i)*o+t*e,s=r+(a=(this._hi-n-s+this._lo-r*u)/l),this._hi=s,this._lo=r-s+a,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof $Y){let l=arguments[0];var t,e,r,n,i=null,o=null,a=null,s=null;return t=(r=this._hi/l._hi)-(i=(a=$Y.SPLIT*r)-(i=a-r)),s=i*(o=(s=$Y.SPLIT*l._hi)-(o=s-l._hi))-(n=r*l._hi)+i*(e=l._hi-o)+t*o+t*e,a=(this._hi-n-s+this._lo-r*l._lo)/l._hi,new $Y(s=r+a,r-s+a)}if("number"==typeof arguments[0]){let t=arguments[0];return Fq.isNaN(t)?$Y.createNaN():$Y.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return $Y.valueOf(1);var e=new $Y(this),r=$Y.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r}ceil(){if(this.isNaN())return $Y.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new $Y(t,e)}compareTo(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}setValue(){if(arguments[0]instanceof $Y){let t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){let t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return $Y.valueOf(0);if(this.isNegative())return $Y.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=$Y.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof $Y){let t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){let a=arguments[0];var t=null,e=null,r=null,n=null,i=null,o=null;return n=(r=this._hi+a)-(i=r-this._hi),e=(o=(n=a-i+(this._hi-n))+this._lo)+(r-(t=r+o)),this._hi=t+e,this._lo=e+(t-this._hi),this}}else if(2===arguments.length){let c=arguments[0],h=arguments[1];t=null,e=null;var a,s=null;r=null,n=null,i=null,o=null;r=this._hi+c,a=this._lo+h,n=r-(i=r-this._hi),s=a-(o=a-this._lo);var l=(t=r+(i=(n=c-i+(this._hi-n))+a))+(i=(s=h-o+(this._lo-s))+(e=i+(r-t))),u=i+(t-l);return this._hi=l,this._lo=u,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof $Y){let t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){let l=arguments[0],u=arguments[1];var t,e,r=null,n=null,i=null,o=null;r=(i=$Y.SPLIT*this._hi)-this._hi,o=$Y.SPLIT*l,r=i-r,t=this._hi-r,n=o-l;var a=(i=this._hi*l)+(o=r*(n=o-n)-i+r*(e=l-n)+t*n+t*e+(this._hi*u+this._lo*l)),s=o+(r=i-a);return this._hi=a,this._lo=s,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return $Y.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new $Y(t,e)}negate(){return this.isNaN()?this:new $Y(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof $Y){let t=arguments[0];return t.isNaN()?$Y.createNaN():$Y.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){let t=arguments[0];return Fq.isNaN(t)?$Y.createNaN():$Y.copy(this).selfMultiply(t,0)}}isNaN(){return Fq.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){var t=$Y.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+$Y.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+$Y.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){var t,e,r,n,i=null,o=null,a=null,s=null;t=(r=1/this._hi)-(i=(a=$Y.SPLIT*r)-(i=a-r)),o=(s=$Y.SPLIT*this._hi)-this._hi;var l=r+(a=(1-(n=r*this._hi)-(s=i*(o=s-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new $Y(l,r-l+a)}toSciNotation(){if(this.isZero())return $Y.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=$Y.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?$Y.NaN:this.isNegative()?this.negate():new $Y(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof $Y){let t=arguments[0];return $Y.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){let t=arguments[0];return $Y.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof $Y){let t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?$Y.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}getClass(){return $Y}get interfaces_(){return[Aq,Nq,Tq]}}$Y.constructor_=function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this.init(t)}else if(arguments[0]instanceof $Y){let t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){let t=arguments[0];$Y.constructor_.call(this,$Y.parse(t))}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.init(t,e)}},$Y.PI=new $Y(3.141592653589793,12246467991473532e-32),$Y.TWO_PI=new $Y(6.283185307179586,24492935982947064e-32),$Y.PI_2=new $Y(1.5707963267948966,6123233995736766e-32),$Y.E=new $Y(2.718281828459045,14456468917292502e-32),$Y.NaN=new $Y(Fq.NaN,Fq.NaN),$Y.EPS=123259516440783e-46,$Y.SPLIT=134217729,$Y.MAX_PRINT_DIGITS=32,$Y.TEN=$Y.valueOf(10),$Y.ONE=$Y.valueOf(1),$Y.SCI_NOT_EXPONENT_CHAR="E",$Y.SCI_NOT_ZERO="0.0E0";class QY{constructor(){QY.constructor_.apply(this,arguments)}static orientationIndex(t,e,r){var n=QY.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=$Y.valueOf(e.x).selfAdd(-t.x),o=$Y.valueOf(e.y).selfAdd(-t.y),a=$Y.valueOf(r.x).selfAdd(-e.x),s=$Y.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[0]instanceof $Y){let t=arguments[1],e=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[0]){let i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];var t=$Y.valueOf(i),e=$Y.valueOf(o),r=$Y.valueOf(a),n=$Y.valueOf(s);return t.multiply(n).selfSubtract(e.multiply(r)).signum()}}static intersection(t,e,r,n){var i=$Y.valueOf(n.y).selfSubtract(r.y).selfMultiply($Y.valueOf(e.x).selfSubtract(t.x)),o=$Y.valueOf(n.x).selfSubtract(r.x).selfMultiply($Y.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=$Y.valueOf(n.x).selfSubtract(r.x).selfMultiply($Y.valueOf(t.y).selfSubtract(r.y)),l=$Y.valueOf(n.y).selfSubtract(r.y).selfMultiply($Y.valueOf(t.x).selfSubtract(r.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=$Y.valueOf(t.x).selfAdd($Y.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=$Y.valueOf(e.x).selfSubtract(t.x).selfMultiply($Y.valueOf(t.y).selfSubtract(r.y)),f=$Y.valueOf(e.y).selfSubtract(t.y).selfMultiply($Y.valueOf(t.x).selfSubtract(r.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=$Y.valueOf(r.y).selfAdd($Y.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new zq(c,d)}static orientationIndexFilter(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),a=i-o;if(i>0){if(o<=0)return QY.signum(a);n=i+o}else{if(!(i<0))return QY.signum(a);if(o>=0)return QY.signum(a);n=-i-o}var s=QY.DP_SAFE_EPSILON*n;return a>=s||-a>=s?QY.signum(a):2}static signum(t){return t>0?1:t<0?-1:0}getClass(){return QY}get interfaces_(){return[]}}QY.constructor_=function(){},QY.DP_SAFE_EPSILON=1e-15;class tW{constructor(){tW.constructor_.apply(this,arguments)}static index(t,e,r){return QY.orientationIndex(t,e,r)}static isCCW(t){var e=t.length-1;if(e<3)throw new Lq("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var a=n;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(r)&&a!==n);var s=n;do{s=(s+1)%e}while(t[s].equals2D(r)&&s!==n);var l=t[a],u=t[s];if(l.equals2D(r)||u.equals2D(r)||l.equals2D(u))return!1;var c=tW.index(l,r,u);return 0===c?l.x>u.x:c>0}getClass(){return tW}get interfaces_(){return[]}}tW.constructor_=function(){},tW.CLOCKWISE=-1,tW.RIGHT=tW.CLOCKWISE,tW.COUNTERCLOCKWISE=1,tW.LEFT=tW.COUNTERCLOCKWISE,tW.COLLINEAR=0,tW.STRAIGHT=tW.COLLINEAR;class eW{constructor(){eW.constructor_.apply(this,arguments)}getClass(){return eW}get interfaces_(){return[]}}eW.constructor_=function(){};class rW extends Yq{constructor(){super(),rW.constructor_.apply(this,arguments)}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t}getArea(){var t=0;t+=ZY.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=ZY.ofRing(this._holes[e].getCoordinateSequence());return t}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){if((o=t.getX(r))!==e.getMinX()&&o!==e.getMaxX())return!1;if((a=t.getY(r))!==e.getMinY()&&a!==e.getMaxY())return!1}var n=t.getX(0),i=t.getY(0);for(r=1;r<=4;r++){var o,a;if((o=t.getX(r))!==n===((a=t.getY(r))!==i))return!1;n=o,i=a}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var t=i,e=this._shell,r=t._shell;if(!e.equalsExact(r,o))return!1;if(this._holes.length!==t._holes.length)return!1;for(var n=0;n<this._holes.length;n++)if(!this._holes[n].equalsExact(t._holes[n],o))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);TY.sort(this._holes)}else if(2===arguments.length){let t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var e=new Array(t.getCoordinates().length-1).fill(null);lY.arraycopy(t.getCoordinates(),0,e,0,e.length);var r=uY.minCoordinate(t.getCoordinates());uY.scroll(e,r),lY.arraycopy(e,0,t.getCoordinates(),0,e.length),t.getCoordinates()[e.length]=e[0],tW.isCCW(t.getCoordinates())===n&&uY.reverse(t.getCoordinates())}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getTypeCode(){return Yq.TYPECODE_POLYGON}getDimension(){return 2}getLength(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}reverse(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t}convexHull(){return this.getExteriorRing().convexHull()}compareToSameClass(){if(1===arguments.length){let r=arguments[0];var t=this._shell,e=r._shell;return t.compareToSameClass(e)}if(2===arguments.length){let c=arguments[1];var r=arguments[0],n=(t=this._shell,e=r._shell,t.compareToSameClass(e,c));if(0!==n)return n;for(var i=this.getNumInteriorRing(),o=r.getNumInteriorRing(),a=0;a<i&&a<o;){var s=this.getInteriorRingN(a),l=r.getInteriorRingN(a),u=s.compareToSameClass(l,c);if(0!==u)return u;a++}return a<i?1:a<o?-1:0}}apply(){if(Cq(arguments[0],Wq)){let e=arguments[0];this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(Cq(arguments[0],MY)){let e=arguments[0];if(this._shell.apply(e),!e.isDone())for(t=0;t<this._holes.length&&(this._holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(Cq(arguments[0],LY)){arguments[0].filter(this)}else if(Cq(arguments[0],Mq)){let e=arguments[0];e.filter(this),this._shell.apply(e);for(t=0;t<this._holes.length;t++)this._holes[t].apply(e)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return Yq.TYPENAME_POLYGON}copy(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),r=0;r<this._holes.length;r++)e[r]=this._holes[r].copy();return new rW(t,e,this._factory)}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}getClass(){return rW}get interfaces_(){return[eW]}}rW.constructor_=function(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],r=arguments[2];if(Yq.constructor_.call(this,r),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),Yq.hasNullElements(e))throw new Lq("holes must not contain null elements");if(t.isEmpty()&&Yq.hasNonEmptyElements(e))throw new Lq("shell is empty but holes are not");this._shell=t,this._holes=e},rW.serialVersionUID=-0x307ffefd8dc97200;class nW extends NY{constructor(){super(),nW.constructor_.apply(this,arguments)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){let t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return RY.FALSE}getTypeCode(){return Yq.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return Yq.TYPENAME_MULTIPOINT}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new nW(t,this._factory)}getClass(){return nW}get interfaces_(){return[XY]}}nW.constructor_=function(){let t=arguments[0],e=arguments[1];NY.constructor_.call(this,t,e)},nW.serialVersionUID=-0x6fb1ed4162e0fc00;class iW extends WY{constructor(){super(),iW.constructor_.apply(this,arguments)}getBoundaryDimension(){return RY.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}getTypeCode(){return Yq.TYPECODE_LINEARRING}reverse(){var t=this._points.copy();return YY.reverse(t),this.getFactory().createLinearRing(t)}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new Lq("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<iW.MINIMUM_VALID_SIZE)throw new Lq("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return Yq.TYPENAME_LINEARRING}copy(){return new iW(this._points.copy(),this._factory)}getClass(){return iW}get interfaces_(){return[]}}iW.constructor_=function(){if(arguments[0]instanceof Array&&arguments[1]instanceof EW){let t=arguments[0],e=arguments[1];iW.constructor_.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(Cq(arguments[0],Pq)&&arguments[1]instanceof EW){let t=arguments[0],e=arguments[1];WY.constructor_.call(this,t,e),this.validateConstruction()}},iW.MINIMUM_VALID_SIZE=4,iW.serialVersionUID=-0x3b229e262367a600;class oW extends NY{constructor(){super(),oW.constructor_.apply(this,arguments)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Yq){let t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return Yq.TYPECODE_MULTIPOLYGON}getDimension(){return 2}reverse(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new iY,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}getGeometryType(){return Yq.TYPENAME_MULTIPOLYGON}copy(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new oW(t,this._factory)}getClass(){return oW}get interfaces_(){return[eW]}}oW.constructor_=function(){let t=arguments[0],e=arguments[1];NY.constructor_.call(this,t,e)},oW.serialVersionUID=-0x7a5aa1369171980;class aW{constructor(){aW.constructor_.apply(this,arguments)}setCopyUserData(t){this._isUserDataCopied=t}edit(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r}editInternal(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof NY?this.editGeometryCollection(t,e):t instanceof rW?this.editPolygon(t,e):t instanceof HY||t instanceof WY?e.edit(t,this._factory):(Bq.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)}editGeometryCollection(t,e){for(var r=e.edit(t,this._factory),n=new iY,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===nW?this._factory.createMultiPoint(n.toArray([])):r.getClass()===AY?this._factory.createMultiLineString(n.toArray([])):r.getClass()===oW?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))}editPolygon(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon()),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new iY,o=0;o<r.getNumInteriorRing();o++){var a=this.edit(r.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(n,i.toArray([]))}getClass(){return aW}get interfaces_(){return[]}}function sW(){}aW.GeometryEditorOperation=sW;class lW{constructor(){lW.constructor_.apply(this,arguments)}edit(t,e){return t}getClass(){return lW}get interfaces_(){return[sW]}}lW.constructor_=function(){};class uW{constructor(){uW.constructor_.apply(this,arguments)}edit(t,e){var r=this.edit(t.getCoordinates(),t);return t instanceof iW?null===r?e.createLinearRing():e.createLinearRing(r):t instanceof WY?null===r?e.createLineString():e.createLineString(r):t instanceof HY?null===r||0===r.length?e.createPoint():e.createPoint(r[0]):t}getClass(){return uW}get interfaces_(){return[sW]}}uW.constructor_=function(){};class cW{constructor(){cW.constructor_.apply(this,arguments)}edit(t,e){return t instanceof iW?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof WY?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof HY?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t}getClass(){return cW}get interfaces_(){return[sW]}}cW.constructor_=function(){},aW.NoOpGeometryOperation=lW,aW.CoordinateOperation=uW,aW.CoordinateSequenceOperation=cW,aW.constructor_=function(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._factory=t}};class hW{constructor(){hW.constructor_.apply(this,arguments)}setOrdinate(t,e,r){switch(e){case Pq.X:this._coordinates[t].x=r;break;case Pq.Y:this._coordinates[t].y=r;break;case Pq.Z:this._coordinates[t].z=r;break;default:throw new Lq("invalid ordinateIndex")}}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case Pq.X:return this._coordinates[t].x;case Pq.Y:return this._coordinates[t].y;case Pq.Z:return this._coordinates[t].z}return Fq.NaN}getCoordinate(){if(1===arguments.length){let t=arguments[0];return this._coordinates[t]}if(2===arguments.length){let t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}}getCoordinateCopy(t){return new zq(this._coordinates[t])}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}expandEnvelope(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new hW(t,this._dimension)}toString(){if(this._coordinates.length>0){var t=new qY(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}getClass(){return hW}get interfaces_(){return[Pq,Aq]}}hW.constructor_=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];hW.constructor_.call(this,t,3)}else if(Number.isInteger(arguments[0])){let e=arguments[0];this._coordinates=new Array(e).fill(null);for(var t=0;t<e;t++)this._coordinates[t]=new zq}else if(Cq(arguments[0],Pq)){let e=arguments[0];if(null===e)return this._coordinates=new Array(0).fill(null),null;this._dimension=e.getDimension(),this._coordinates=new Array(e.size()).fill(null);for(t=0;t<this._coordinates.length;t++)this._coordinates[t]=e.getCoordinateCopy(t)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],e=arguments[1];this._coordinates=t,this._dimension=e,null===t&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let e=arguments[0],r=arguments[1];this._coordinates=new Array(e).fill(null),this._dimension=r;for(t=0;t<e;t++)this._coordinates[t]=new zq}},hW.serialVersionUID=-0xcb44a778db18e00;class fW{constructor(){fW.constructor_.apply(this,arguments)}static instance(){return fW.instanceObject}readResolve(){return fW.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){return new hW(arguments[0])}if(Cq(arguments[0],Pq)){return new hW(arguments[0])}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new hW(t):new hW(t,e)}}getClass(){return fW}get interfaces_(){return[Rq,Aq]}}fW.constructor_=function(){},fW.serialVersionUID=-0x38e49fa6cf6f2e00,fW.instanceObject=new fW;var pW=Object.defineProperty;var dW=function(t,e){function r(t){if(!this||this.constructor!==r)return new r(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&gW.call(this,t)}e||pW(t,"size",{get:_W});return t.constructor=r,r.prototype=t,r}({delete:function(t){this.has(t)&&(this._keys.splice(IY,1),this._values.splice(IY,1),this._itp.forEach((function(t){IY<t[0]&&t[0]--})));return IY>-1},has:function(t){return yW.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[IY]:void 0},set:function(t,e){return this.has(t)?this._values[IY]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return mW(this._itp,this._keys)},values:function(){return mW(this._itp,this._values)},entries:function(){return mW(this._itp,this._keys,this._values)},forEach:function(t,e){for(var r=this.entries();;){var n=r.next();if(n.done)break;t.call(e,n.value[1],n.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}});function gW(t){this.add?t.forEach(this.add,this):t.forEach((function(t){this.set(t[0],t[1])}),this)}function yW(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(IY=t.length;IY--&&((r=t[IY])!==(n=e)&&(r==r||n==n)););else IY=t.indexOf(e);var r,n;return IY>-1}function mW(t,e,r){var n=[0],i=!1;return t.push(n),{next:function(){var o,a=n[0];return!i&&a<e.length?(o=r?[e[a],r[a]]:e[a],n[0]++):(i=!0,t.splice(t.indexOf(n),1)),{done:i,value:o}}}}function _W(){return this._values.length}let vW="undefined"!=typeof Map&&Map.prototype.values?Map:dW;function bW(){this.map_=new vW}bW.prototype=new fY,bW.prototype.get=function(t){return this.map_.get(t)||null},bW.prototype.put=function(t,e){return this.map_.set(t,e),e},bW.prototype.values=function(){const t=new iY,e=this.map_.values();let r=e.next();for(;!r.done;)t.add(r.value),r=e.next();return t},bW.prototype.entrySet=function(){const t=new gY;return this.map_.entries().forEach(e=>t.add(e)),t},bW.prototype.size=function(){return this.map_.size()};class xW{constructor(){xW.constructor_.apply(this,arguments)}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof xW))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new JY(r).compareTo(new JY(n))}getScale(){return this._scale}isFloating(){return this._modelType===xW.FLOATING||this._modelType===xW.FLOATING_SINGLE}getType(){return this._modelType}toString(){var t="UNKNOWN";return this._modelType===xW.FLOATING?t="Floating":this._modelType===xW.FLOATING_SINGLE?t="Floating-Single":this._modelType===xW.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){let t=arguments[0];return Fq.isNaN(t)||this._modelType===xW.FLOATING_SINGLE?t:this._modelType===xW.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof zq){let t=arguments[0];if(this._modelType===xW.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){var t=16;return this._modelType===xW.FLOATING?t=16:this._modelType===xW.FLOATING_SINGLE?t=6:this._modelType===xW.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}getClass(){return xW}get interfaces_(){return[Aq,Nq]}}class wW{constructor(){wW.constructor_.apply(this,arguments)}readResolve(){return wW.nameToTypeMap.get(this._name)}toString(){return this._name}getClass(){return wW}get interfaces_(){return[Aq]}}wW.constructor_=function(){this._name=null;let t=arguments[0];this._name=t,wW.nameToTypeMap.put(t,this)},wW.serialVersionUID=-552860263173159e4,wW.nameToTypeMap=new bW,xW.Type=wW,xW.constructor_=function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=xW.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof wW){let t=arguments[0];this._modelType=t,t===xW.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){let t=arguments[0];this._modelType=xW.FIXED,this.setScale(t)}else if(arguments[0]instanceof xW){let t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}},xW.serialVersionUID=0x6bee6404e9a25c00,xW.FIXED=new wW("FIXED"),xW.FLOATING=new wW("FLOATING"),xW.FLOATING_SINGLE=new wW("FLOATING SINGLE"),xW.maximumPreciseValue=9007199254740992;class EW{constructor(){EW.constructor_.apply(this,arguments)}static toMultiPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return fW.instance()}static toMultiLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new zq(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new zq(t.getMinX(),t.getMinY()),new zq(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new zq(t.getMinX(),t.getMinY()),new zq(t.getMinX(),t.getMaxY()),new zq(t.getMaxX(),t.getMaxY()),new zq(t.getMaxX(),t.getMinY()),new zq(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Cq(arguments[0],Pq)){return new WY(arguments[0],this)}}}createMultiLineString(){if(0===arguments.length)return new AY(null,this);if(1===arguments.length){return new AY(arguments[0],this)}}buildGeometry(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(r=!0),o instanceof NY&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(EW.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof rW)return this.createMultiPolygon(EW.toPolygonArray(t));if(s instanceof WY)return this.createMultiLineString(EW.toLineStringArray(t));if(s instanceof HY)return this.createMultiPoint(EW.toPointArray(t));Bq.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof zq){let t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Cq(arguments[0],Pq)){return new HY(arguments[0],this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(Cq(arguments[0],Pq)){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof iW){let t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){return new rW(arguments[0],arguments[1],this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new NY(null,this);if(1===arguments.length){return new NY(arguments[0],this)}}createGeometry(t){return new aW(this).edit(t,new class{edit(){if(2===arguments.length&&arguments[1]instanceof Yq&&Cq(arguments[0],Pq)){let t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Cq(arguments[0],Pq)){return new iW(arguments[0],this)}}}createMultiPolygon(){if(0===arguments.length)return new oW(null,this);if(1===arguments.length){return new oW(arguments[0],this)}}createMultiPoint(){if(0===arguments.length)return new nW(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new nW(arguments[0],this)}if(Cq(arguments[0],Pq)){let n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(n.size()).fill(null),e=0;e<n.size();e++){var r=this.getCoordinateSequenceFactory().create(1,n.getDimension());YY.copy(n,e,r,0,1),t[e]=this.createPoint(r)}return this.createMultiPoint(t)}}}getClass(){return EW}get interfaces_(){return[Aq]}}EW.constructor_=function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)EW.constructor_.call(this,new xW,0);else if(1===arguments.length){if(Cq(arguments[0],Rq)){let t=arguments[0];EW.constructor_.call(this,new xW,0,t)}else if(arguments[0]instanceof xW){let t=arguments[0];EW.constructor_.call(this,t,0,EW.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];EW.constructor_.call(this,t,e,EW.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=r,this._SRID=e}},EW.serialVersionUID=-0x5ea75f2051eeb400;const OW=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class SW{constructor(t){this.geometryFactory=t||new EW}read(t){let e;e="string"==typeof t?JSON.parse(t):t;const r=e.type;if(!IW[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==OW.indexOf(r)?IW[r].call(this,e.coordinates):"GeometryCollection"===r?IW[r].call(this,e.geometries):IW[r].call(this,e)}write(t){const e=t.getGeometryType();if(!CW[e])throw new Error("Geometry is not supported");return CW[e].call(this,t)}}const IW={Feature:function(t){const e={};for(let r in t)e[r]=t[r];if(t.geometry){const r=t.geometry.type;if(!IW[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=IW.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(new zq(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new zq(t[0],t[1]),new zq(t[2],t[1]),new zq(t[2],t[3]),new zq(t[0],t[3]),new zq(t[0],t[1])])},Point:function(t){const e=new zq(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(IW.Point.call(this,t[r]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=IW.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let r=0;r<t.length;++r)e.push(IW.LineString.call(this,t[r]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=IW.coordinates.call(this,t[0]),r=this.geometryFactory.createLinearRing(e),n=[];for(let e=1;e<t.length;++e){var i=t[e],o=IW.coordinates.call(this,i),a=this.geometryFactory.createLinearRing(o);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(IW.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},CW={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:CW.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=CW.Point.call(this,n);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],r=t.getCoordinates();for(let t=0;t<r.length;++t){const n=r[t];e.push(CW.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=CW.LineString.call(this,n);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],r=CW.LineString.call(this,t._shell);e.push(r.coordinates);for(let r=0;r<t._holes.length;++r){const n=t._holes[r],i=CW.LineString.call(this,n);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=CW.Polygon.call(this,n);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let r=0;r<t._geometries.length;++r){const n=t._geometries[r],i=n.getGeometryType();e.push(CW[i].call(this,n))}return{type:"GeometryCollection",geometries:e}}};class TW{constructor(t){this.parser=new SW(t||new EW)}read(t){return this.parser.read(t)}}const PW={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};class RW{constructor(t){this.geometryFactory=t||new EW,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=PW.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=PW.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],MW[r]&&(e=MW[r].call(this,n))),void 0===e)throw new Error("Could not parse WKT "+t);return e}write(t){return this.extractGeometry(t)}extractGeometry(t){var e=t.getGeometryType().toLowerCase();if(!LW[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+LW[e].call(this,t)+")"}}const LW={coordinate:t=>t.x+" "+t.y,point(t){return LW.coordinate.call(this,t._coordinates._coordinates[0])},multipoint(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+LW.point.call(this,t._geometries[r])+")");return e.join(",")},linestring(t){var e=[];for(let r=0,n=t._points._coordinates.length;r<n;++r)e.push(LW.coordinate.call(this,t._points._coordinates[r]));return e.join(",")},linearring(t){var e=[];for(let r=0,n=t._points._coordinates.length;r<n;++r)e.push(LW.coordinate.call(this,t._points._coordinates[r]));return e.join(",")},multilinestring(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+LW.linestring.call(this,t._geometries[r])+")");return e.join(",")},polygon(t){var e=[];e.push("("+LW.linestring.call(this,t._shell)+")");for(let r=0,n=t._holes.length;r<n;++r)e.push("("+LW.linestring.call(this,t._holes[r])+")");return e.join(",")},multipolygon(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push("("+LW.polygon.call(this,t._geometries[r])+")");return e.join(",")},geometrycollection(t){var e=[];for(let r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},MW={coord(t){var e=t.trim().split(PW.spaces),r=new zq(Number.parseFloat(e[0]),Number.parseFloat(e[1]));return this.precisionModel.makePrecise(r),r},point(t){return void 0===t?this.geometryFactory.createPoint():this.geometryFactory.createPoint(MW.coord.call(this,t))},multipoint(t){if(void 0===t)return this.geometryFactory.createMultiPoint();var e,r=t.trim().split(","),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace(PW.trimParens,"$1"),n.push(MW.point.call(this,e));return this.geometryFactory.createMultiPoint(n)},linestring(t){if(void 0===t)return this.geometryFactory.createLineString();var e=t.trim().split(","),r=[];for(let t=0,n=e.length;t<n;++t)r.push(MW.coord.call(this,e[t]));return this.geometryFactory.createLineString(r)},linearring(t){if(void 0===t)return this.geometryFactory.createLinearRing();var e=t.trim().split(","),r=[];for(let t=0,n=e.length;t<n;++t)r.push(MW.coord.call(this,e[t]));return this.geometryFactory.createLinearRing(r)},multilinestring(t){if(void 0===t)return this.geometryFactory.createMultiLineString();var e,r=t.trim().split(PW.parenComma),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace(PW.trimParens,"$1"),n.push(MW.linestring.call(this,e));return this.geometryFactory.createMultiLineString(n)},polygon(t){if(void 0===t)return this.geometryFactory.createPolygon();var e,r,n,i,o=t.trim().split(PW.parenComma),a=[];for(let t=0,s=o.length;t<s;++t)e=o[t].replace(PW.trimParens,"$1"),r=MW.linestring.call(this,e),n=this.geometryFactory.createLinearRing(r._points),0===t?i=n:a.push(n);return this.geometryFactory.createPolygon(i,a)},multipolygon(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();var e,r=t.trim().split(PW.doubleParenComma),n=[];for(let t=0,i=r.length;t<i;++t)e=r[t].replace(PW.trimParens,"$1"),n.push(MW.polygon.call(this,e));return this.geometryFactory.createMultiPolygon(n)},geometrycollection(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[];for(let t=0,n=e.length;t<n;++t)r.push(this.read(e[t]));return this.geometryFactory.createGeometryCollection(r)}};class NW{constructor(t){this.parser=new RW(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class AW{constructor(){AW.constructor_.apply(this,arguments)}static toLocationSymbol(t){switch(t){case AW.EXTERIOR:return"e";case AW.BOUNDARY:return"b";case AW.INTERIOR:return"i";case AW.NONE:return"-"}throw new Lq("Unknown location value: "+t)}getClass(){return AW}get interfaces_(){return[]}}function kW(){}AW.constructor_=function(){},AW.INTERIOR=0,AW.BOUNDARY=1,AW.EXTERIOR=2,AW.NONE=-1;class jW extends kW{constructor(){super(),jW.constructor_.apply(this,arguments)}getClass(){return jW}get interfaces_(){return[]}}jW.constructor_=function(){kW.constructor_.call(this,"Projective point not representable on the Cartesian plane.")};class FW{constructor(){FW.constructor_.apply(this,arguments)}static intersection(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=r.y-n.y,l=n.x-r.x,u=r.x*n.y-n.x*r.y,c=i*l-s*o,h=(o*u-l*a)/c,f=(s*a-i*u)/c;if(Fq.isNaN(h)||Fq.isInfinite(h)||Fq.isNaN(f)||Fq.isInfinite(f))throw new jW;return new zq(h,f)}getY(){var t=this.y/this.w;if(Fq.isNaN(t)||Fq.isInfinite(t))throw new jW;return t}getX(){var t=this.x/this.w;if(Fq.isNaN(t)||Fq.isInfinite(t))throw new jW;return t}getCoordinate(){var t=new zq;return t.x=this.getX(),t.y=this.getY(),t}getClass(){return FW}get interfaces_(){return[]}}FW.constructor_=function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){let t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];this.x=t,this.y=e,this.w=1}else if(arguments[0]instanceof FW&&arguments[1]instanceof FW){let t=arguments[0],e=arguments[1];this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y}else if(arguments[0]instanceof zq&&arguments[1]instanceof zq){let t=arguments[0],e=arguments[1];this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.x=t,this.y=e,this.w=r}else if(4===arguments.length){let a=arguments[0],s=arguments[1],l=arguments[2],u=arguments[3];var t=a.y-s.y,e=s.x-a.x,r=a.x*s.y-s.x*a.y,n=l.y-u.y,i=u.x-l.x,o=l.x*u.y-u.x*l.y;this.x=e*o-i*r,this.y=n*r-t*o,this.w=t*i-n*e}};class DW{constructor(){DW.constructor_.apply(this,arguments)}static segmentToSegment(t,e,r,n){if(t.equals(e))return DW.pointToSegment(t,r,n);if(r.equals(n))return DW.pointToSegment(n,t,e);var i=!1;if(qq.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var a=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),s=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?sY.min(DW.pointToSegment(t,r,n),DW.pointToSegment(e,r,n),DW.pointToSegment(r,t,e),DW.pointToSegment(n,t,e)):0}static pointToSegment(t,e,r){if(e.x===r.x&&e.y===r.y)return t.distance(e);var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;if(i<=0)return t.distance(e);if(i>=1)return t.distance(r);var o=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)}static pointToSegmentString(t,e){if(0===e.length)throw new Lq("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=DW.pointToSegment(t,e[n],e[n+1]);i<r&&(r=i)}return r}getClass(){return DW}get interfaces_(){return[]}}DW.constructor_=function(){};class GW{constructor(){GW.constructor_.apply(this,arguments)}static computeEdgeDistance(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=n>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return Bq.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return Bq.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){var t=new qY;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(()=>Array(2)),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){let t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){let e=arguments[0];for(var t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==GW.NO_INTERSECTION}getEdgeDistance(t,e){return GW.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===GW.COLLINEAR_INTERSECTION}toString(){return NW.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+NW.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}getClass(){return GW}get interfaces_(){return[]}}GW.constructor_=function(){this._result=null,this._inputLines=Array(2).fill().map(()=>Array(2)),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new zq,this._intPt[1]=new zq,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},GW.DONT_INTERSECT=0,GW.DO_INTERSECT=1,GW.COLLINEAR=2,GW.NO_INTERSECTION=0,GW.POINT_INTERSECTION=1,GW.COLLINEAR_INTERSECTION=2;class UW extends GW{constructor(){super(),UW.constructor_.apply(this,arguments)}static nearestEndpoint(t,e,r,n){var i=t,o=DW.pointToSegment(t,r,n),a=DW.pointToSegment(e,r,n);return a<o&&(o=a,i=e),(a=DW.pointToSegment(r,t,e))<o&&(o=a,i=r),(a=DW.pointToSegment(n,t,e))<o&&(o=a,i=n),i}isInSegmentEnvelopes(t){var e=new qq(this._inputLines[0][0],this._inputLines[0][1]),r=new qq(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{let t=arguments[0],e=arguments[1],r=arguments[2];if(this._isProper=!1,qq.intersects(e,r,t)&&0===tW.index(e,r,t)&&0===tW.index(r,e,t))return this._isProper=!0,(t.equals(e)||t.equals(r))&&(this._isProper=!1),this._result=GW.POINT_INTERSECTION,null;this._result=GW.NO_INTERSECTION}}normalizeToMinimum(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y}safeHCoordinateIntersection(t,e,r,n){var i=null;try{i=FW.intersection(t,e,r,n)}catch(o){if(!(o instanceof jW))throw o;i=UW.nearestEndpoint(t,e,r,n)}return i}intersection(t,e,r,n){var i=this.intersectionWithNormalization(t,e,r,n);return this.isInSegmentEnvelopes(i)||(i=new zq(UW.nearestEndpoint(t,e,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}smallestInAbsValue(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i}checkDD(t,e,r,n,i){var o=QY.intersection(t,e,r,n),a=this.isInSegmentEnvelopes(o);lY.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&lY.out.println("Distance = "+i.distance(o))}intersectionWithNormalization(t,e,r,n){var i=new zq(t),o=new zq(e),a=new zq(r),s=new zq(n),l=new zq;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u}computeCollinearIntersection(t,e,r,n){var i=qq.intersects(t,e,r),o=qq.intersects(t,e,n),a=qq.intersects(r,n,t),s=qq.intersects(r,n,e);return i&&o?(this._intPt[0]=r,this._intPt[1]=n,GW.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,GW.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||s?GW.COLLINEAR_INTERSECTION:GW.POINT_INTERSECTION):i&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||a?GW.COLLINEAR_INTERSECTION:GW.POINT_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||i||s?GW.COLLINEAR_INTERSECTION:GW.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||i||a?GW.COLLINEAR_INTERSECTION:GW.POINT_INTERSECTION):GW.NO_INTERSECTION}normalizeToEnvCentre(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,h=r.x>n.x?r.x:n.x,f=r.y>n.y?r.y:n.y,p=((o>u?o:u)+(s<h?s:h))/2,d=((a>c?a:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y}computeIntersect(t,e,r,n){if(this._isProper=!1,!qq.intersects(t,e,r,n))return GW.NO_INTERSECTION;var i=tW.index(t,e,r),o=tW.index(t,e,n);if(i>0&&o>0||i<0&&o<0)return GW.NO_INTERSECTION;var a=tW.index(r,n,t),s=tW.index(r,n,e);return a>0&&s>0||a<0&&s<0?GW.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,r,n):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(r)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:0===i?this._intPt[0]=new zq(r):0===o?this._intPt[0]=new zq(n):0===a?this._intPt[0]=new zq(t):0===s&&(this._intPt[0]=new zq(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,r,n)),GW.POINT_INTERSECTION)}getClass(){return UW}get interfaces_(){return[]}}UW.constructor_=function(){};class BW{constructor(){BW.constructor_.apply(this,arguments)}static locatePointInRing(){if(arguments[0]instanceof zq&&Cq(arguments[1],Pq)){let i=arguments[1];for(var t=new BW(arguments[0]),e=new zq,r=new zq,n=1;n<i.size();n++)if(i.getCoordinate(n,e),i.getCoordinate(n-1,r),t.countSegment(e,r),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof zq&&arguments[1]instanceof Array){let i=arguments[1];for(t=new BW(arguments[0]),n=1;n<i.length;n++){e=i[n],r=i[n-1];if(t.countSegment(e,r),t.isOnSegment())return t.getLocation()}return t.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=tW.index(t,e,this._p);if(i===tW.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===tW.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==AW.EXTERIOR}getLocation(){return this._isPointOnSegment?AW.BOUNDARY:this._crossingCount%2==1?AW.INTERIOR:AW.EXTERIOR}isOnSegment(){return this._isPointOnSegment}getClass(){return BW}get interfaces_(){return[]}}BW.constructor_=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;let t=arguments[0];this._p=t};class zW{constructor(){zW.constructor_.apply(this,arguments)}static isOnLine(){if(arguments[0]instanceof zq&&Cq(arguments[1],Pq)){let o=arguments[0],a=arguments[1];for(var t=new UW,e=new zq,r=new zq,n=a.size(),i=1;i<n;i++)if(a.getCoordinate(i-1,e),a.getCoordinate(i,r),t.computeIntersection(o,e,r),t.hasIntersection())return!0;return!1}if(arguments[0]instanceof zq&&arguments[1]instanceof Array){let n=arguments[0],o=arguments[1];for(t=new UW,i=1;i<o.length;i++){e=o[i-1],r=o[i];if(t.computeIntersection(n,e,r),t.hasIntersection())return!0}return!1}}static locateInRing(t,e){return BW.locatePointInRing(t,e)}static isInRing(t,e){return zW.locateInRing(t,e)!==AW.EXTERIOR}getClass(){return zW}get interfaces_(){return[]}}zW.constructor_=function(){};class VW{constructor(){VW.constructor_.apply(this,arguments)}static isAtomic(t){return!(t instanceof NY)}next(){if(this._atStart)return this._atStart=!1,VW.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new rY;var t=this._parent.getGeometryN(this._index++);return t instanceof NY?(this._subcollectionIterator=new VW(t),this._subcollectionIterator.next()):t}remove(){throw new UnsupportedOperationException(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}getClass(){return VW}get interfaces_(){return[$q]}}VW.constructor_=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;let t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};class qW{constructor(){qW.constructor_.apply(this,arguments)}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?zW.locateInRing(t,e.getCoordinates()):AW.EXTERIOR}intersects(t,e){return this.locate(t,e)!==AW.EXTERIOR}updateLocationInfo(t){t===AW.INTERIOR&&(this._isIn=!0),t===AW.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof HY&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof WY)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof rW)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof AY)for(var r=e,n=0;n<r.getNumGeometries();n++){var i=r.getGeometryN(n);this.updateLocationInfo(this.locateOnLineString(t,i))}else if(e instanceof oW){var o=e;for(n=0;n<o.getNumGeometries();n++){var a=o.getGeometryN(n);this.updateLocationInfo(this.locateInPolygon(t,a))}}else if(e instanceof NY)for(var s=new VW(e);s.hasNext();){var l=s.next();l!==e&&this.computeLocation(t,l)}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?AW.INTERIOR:AW.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return AW.EXTERIOR;var r=e.getCoordinateSequence();return e.isClosed()||!t.equals(r.getCoordinate(0))&&!t.equals(r.getCoordinate(r.size()-1))?zW.isOnLine(t,r)?AW.INTERIOR:AW.EXTERIOR:AW.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return AW.EXTERIOR;var r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===AW.EXTERIOR)return AW.EXTERIOR;if(n===AW.BOUNDARY)return AW.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===AW.INTERIOR)return AW.EXTERIOR;if(a===AW.BOUNDARY)return AW.BOUNDARY}return AW.INTERIOR}locate(t,e){return e.isEmpty()?AW.EXTERIOR:e instanceof WY?this.locateOnLineString(t,e):e instanceof rW?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?AW.BOUNDARY:this._numBoundaries>0||this._isIn?AW.INTERIOR:AW.EXTERIOR)}getClass(){return qW}get interfaces_(){return[]}}qW.constructor_=function(){if(this._boundaryRule=Xq.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){let t=arguments[0];if(null===t)throw new Lq("Rule must be non-null");this._boundaryRule=t}};class YW{constructor(){YW.constructor_.apply(this,arguments)}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){let t=arguments[0],e=arguments[1];return e===RY.SYM_DONTCARE||(e===RY.SYM_TRUE&&(t>=0||t===RY.TRUE)||(e===RY.SYM_FALSE&&t===RY.FALSE||(e===RY.SYM_P&&t===RY.P||(e===RY.SYM_L&&t===RY.L||e===RY.SYM_A&&t===RY.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){let t=arguments[1];return new YW(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===RY.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])||YW.isTrue(this._matrix[AW.INTERIOR][AW.BOUNDARY])||YW.isTrue(this._matrix[AW.BOUNDARY][AW.INTERIOR])||YW.isTrue(this._matrix[AW.BOUNDARY][AW.BOUNDARY]))&&this._matrix[AW.EXTERIOR][AW.INTERIOR]===RY.FALSE&&this._matrix[AW.EXTERIOR][AW.BOUNDARY]===RY.FALSE}isCoveredBy(){return(YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])||YW.isTrue(this._matrix[AW.INTERIOR][AW.BOUNDARY])||YW.isTrue(this._matrix[AW.BOUNDARY][AW.INTERIOR])||YW.isTrue(this._matrix[AW.BOUNDARY][AW.BOUNDARY]))&&this._matrix[AW.INTERIOR][AW.EXTERIOR]===RY.FALSE&&this._matrix[AW.BOUNDARY][AW.EXTERIOR]===RY.FALSE}set(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<n.length;t++){var e=Math.trunc(t/3),r=t%3;this._matrix[e][r]=RY.toDimensionValue(n.charAt(t))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]=r}}isContains(){return YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])&&this._matrix[AW.EXTERIOR][AW.INTERIOR]===RY.FALSE&&this._matrix[AW.EXTERIOR][AW.BOUNDARY]===RY.FALSE}setAtLeast(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<n.length;t++){var e=Math.trunc(t/3),r=t%3;this.setAtLeast(e,r,RY.toDimensionValue(n.charAt(t)))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._matrix[t][e]<r&&(this._matrix[t][e]=r)}}setAtLeastIfValid(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)}isWithin(){return YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])&&this._matrix[AW.INTERIOR][AW.EXTERIOR]===RY.FALSE&&this._matrix[AW.BOUNDARY][AW.EXTERIOR]===RY.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===RY.A&&e===RY.A||t===RY.L&&e===RY.L||t===RY.L&&e===RY.A||t===RY.P&&e===RY.A||t===RY.P&&e===RY.L)&&(this._matrix[AW.INTERIOR][AW.INTERIOR]===RY.FALSE&&(YW.isTrue(this._matrix[AW.INTERIOR][AW.BOUNDARY])||YW.isTrue(this._matrix[AW.BOUNDARY][AW.INTERIOR])||YW.isTrue(this._matrix[AW.BOUNDARY][AW.BOUNDARY])))}isOverlaps(t,e){return t===RY.P&&e===RY.P||t===RY.A&&e===RY.A?YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])&&YW.isTrue(this._matrix[AW.INTERIOR][AW.EXTERIOR])&&YW.isTrue(this._matrix[AW.EXTERIOR][AW.INTERIOR]):t===RY.L&&e===RY.L&&(1===this._matrix[AW.INTERIOR][AW.INTERIOR]&&YW.isTrue(this._matrix[AW.INTERIOR][AW.EXTERIOR])&&YW.isTrue(this._matrix[AW.EXTERIOR][AW.INTERIOR]))}isEquals(t,e){return t===e&&(YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])&&this._matrix[AW.INTERIOR][AW.EXTERIOR]===RY.FALSE&&this._matrix[AW.BOUNDARY][AW.EXTERIOR]===RY.FALSE&&this._matrix[AW.EXTERIOR][AW.INTERIOR]===RY.FALSE&&this._matrix[AW.EXTERIOR][AW.BOUNDARY]===RY.FALSE)}toString(){for(var t=new qY("123456789"),e=0;e<3;e++)for(var r=0;r<3;r++)t.setCharAt(3*e+r,RY.toDimensionSymbol(this._matrix[e][r]));return t.toString()}setAll(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this._matrix[e][r]=t}get(t,e){return this._matrix[t][e]}transpose(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new Lq("Should be length 9: "+t);for(var e=0;e<3;e++)for(var r=0;r<3;r++)if(!YW.matches(this._matrix[e][r],t.charAt(3*e+r)))return!1;return!0}add(t){for(var e=0;e<3;e++)for(var r=0;r<3;r++)this.setAtLeast(e,r,t.get(e,r))}isDisjoint(){return this._matrix[AW.INTERIOR][AW.INTERIOR]===RY.FALSE&&this._matrix[AW.INTERIOR][AW.BOUNDARY]===RY.FALSE&&this._matrix[AW.BOUNDARY][AW.INTERIOR]===RY.FALSE&&this._matrix[AW.BOUNDARY][AW.BOUNDARY]===RY.FALSE}isCrosses(t,e){return t===RY.P&&e===RY.L||t===RY.P&&e===RY.A||t===RY.L&&e===RY.A?YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])&&YW.isTrue(this._matrix[AW.INTERIOR][AW.EXTERIOR]):t===RY.L&&e===RY.P||t===RY.A&&e===RY.P||t===RY.A&&e===RY.L?YW.isTrue(this._matrix[AW.INTERIOR][AW.INTERIOR])&&YW.isTrue(this._matrix[AW.EXTERIOR][AW.INTERIOR]):t===RY.L&&e===RY.L&&0===this._matrix[AW.INTERIOR][AW.INTERIOR]}getClass(){return YW}get interfaces_(){return[Tq]}}YW.constructor_=function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(()=>Array(3)),this.setAll(RY.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){let t=arguments[0];YW.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof YW){let t=arguments[0];YW.constructor_.call(this),this._matrix[AW.INTERIOR][AW.INTERIOR]=t._matrix[AW.INTERIOR][AW.INTERIOR],this._matrix[AW.INTERIOR][AW.BOUNDARY]=t._matrix[AW.INTERIOR][AW.BOUNDARY],this._matrix[AW.INTERIOR][AW.EXTERIOR]=t._matrix[AW.INTERIOR][AW.EXTERIOR],this._matrix[AW.BOUNDARY][AW.INTERIOR]=t._matrix[AW.BOUNDARY][AW.INTERIOR],this._matrix[AW.BOUNDARY][AW.BOUNDARY]=t._matrix[AW.BOUNDARY][AW.BOUNDARY],this._matrix[AW.BOUNDARY][AW.EXTERIOR]=t._matrix[AW.BOUNDARY][AW.EXTERIOR],this._matrix[AW.EXTERIOR][AW.INTERIOR]=t._matrix[AW.EXTERIOR][AW.INTERIOR],this._matrix[AW.EXTERIOR][AW.BOUNDARY]=t._matrix[AW.EXTERIOR][AW.BOUNDARY],this._matrix[AW.EXTERIOR][AW.EXTERIOR]=t._matrix[AW.EXTERIOR][AW.EXTERIOR]}};class WW{constructor(){WW.constructor_.apply(this,arguments)}static isNorthern(t){return t===WW.NE||t===WW.NW}static isOpposite(t,e){return t!==e&&2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r}static isInHalfPlane(t,e){return e===WW.SE?t===WW.SE||t===WW.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Lq("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?WW.NE:WW.SE:e>=0?WW.NW:WW.SW}if(arguments[0]instanceof zq&&arguments[1]instanceof zq){let t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new Lq("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?WW.NE:WW.SE:e.y>=t.y?WW.NW:WW.SW}}getClass(){return WW}get interfaces_(){return[]}}WW.constructor_=function(){},WW.NE=0,WW.NW=1,WW.SW=2,WW.SE=3;class XW{constructor(){XW.constructor_.apply(this,arguments)}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:tW.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){var e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=WW.quadrant(this._dx,this._dy),Bq.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}getClass(){return XW}get interfaces_(){return[Nq]}}XW.constructor_=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){let t=arguments[0];this._edge=t}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];XW.constructor_.call(this,t,e,r,null)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];XW.constructor_.call(this,t),this.init(e,r),this._label=n}};class HW{constructor(){HW.constructor_.apply(this,arguments)}static opposite(t){return t===HW.LEFT?HW.RIGHT:t===HW.RIGHT?HW.LEFT:t}getClass(){return HW}get interfaces_(){return[]}}HW.constructor_=function(){},HW.ON=0,HW.LEFT=1,HW.RIGHT=2;class ZW{constructor(){ZW.constructor_.apply(this,arguments)}setAllLocations(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==AW.NONE)return!1;return!0}setAllLocationsIfNull(t){for(var e=0;e<this.location.length;e++)this.location[e]===AW.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[HW.ON]=this.location[HW.ON],e[HW.LEFT]=AW.NONE,e[HW.RIGHT]=AW.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===AW.NONE&&r<t.location.length&&(this.location[r]=t.location[r])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;var t=this.location[HW.LEFT];this.location[HW.LEFT]=this.location[HW.RIGHT],this.location[HW.RIGHT]=t}toString(){var t=new KY;return this.location.length>1&&t.append(AW.toLocationSymbol(this.location[HW.LEFT])),t.append(AW.toLocationSymbol(this.location[HW.ON])),this.location.length>1&&t.append(AW.toLocationSymbol(this.location[HW.RIGHT])),t.toString()}setLocations(t,e,r){this.location[HW.ON]=t,this.location[HW.LEFT]=e,this.location[HW.RIGHT]=r}get(t){return t<this.location.length?this.location[t]:AW.NONE}isArea(){return this.location.length>1}isAnyNull(){for(var t=0;t<this.location.length;t++)if(this.location[t]===AW.NONE)return!0;return!1}setLocation(){if(1===arguments.length){let t=arguments[0];this.setLocation(HW.ON,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(AW.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}getClass(){return ZW}get interfaces_(){return[]}}ZW.constructor_=function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){let t=arguments[0];this.init(1),this.location[HW.ON]=t}else if(arguments[0]instanceof ZW){let e=arguments[0];if(this.init(e.location.length),null!==e)for(var t=0;t<this.location.length;t++)this.location[t]=e.location[t]}}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.init(3),this.location[HW.ON]=t,this.location[HW.LEFT]=e,this.location[HW.RIGHT]=r}};class KW{constructor(){KW.constructor_.apply(this,arguments)}static toLineLabel(t){for(var e=new KW(AW.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e}getGeometryCount(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){let t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new ZW(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){let t=arguments[0];return this.elt[t].get(HW.ON)}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){var t=new KY;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){let t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[t].setLocation(HW.ON,e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.elt[t].setLocation(e,r)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new ZW(this.elt[t].location[0]))}getClass(){return KW}get interfaces_(){return[]}}KW.constructor_=function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){let t=arguments[0];this.elt[0]=new ZW(t),this.elt[1]=new ZW(t)}else if(arguments[0]instanceof KW){let t=arguments[0];this.elt[0]=new ZW(t.elt[0]),this.elt[1]=new ZW(t.elt[1])}}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.elt[0]=new ZW(AW.NONE),this.elt[1]=new ZW(AW.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this.elt[0]=new ZW(t,e,r),this.elt[1]=new ZW(t,e,r)}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.elt[0]=new ZW(AW.NONE,AW.NONE,AW.NONE),this.elt[1]=new ZW(AW.NONE,AW.NONE,AW.NONE),this.elt[t].setLocations(e,r,n)}};class JW{constructor(){JW.constructor_.apply(this,arguments)}createEdgeEndForNext(t,e,r,n){var i=r.segmentIndex+1;if(i>=t.getNumPoints()&&null===n)return null;var o=t.getCoordinate(i);null!==n&&n.segmentIndex===r.segmentIndex&&(o=n.coord);var a=new XW(t,r.coord,o,new KW(t.getLabel()));e.add(a)}createEdgeEndForPrev(t,e,r,n){var i=r.segmentIndex;if(0===r.dist){if(0===i)return null;i--}var o=t.getCoordinate(i);null!==n&&n.segmentIndex>=i&&(o=n.coord);var a=new KW(t.getLabel());a.flip();var s=new XW(t,r.coord,o,a);e.add(s)}computeEdgeEnds(){if(1===arguments.length){let n=arguments[0];for(var t=new iY,e=n;e.hasNext();){var r=e.next();this.computeEdgeEnds(r,t)}return t}if(2===arguments.length){let t=arguments[0],e=arguments[1];var n=t.getEdgeIntersectionList();n.addEndpoints();var i=n.iterator(),o=null,a=null;if(!i.hasNext())return null;var s=i.next();do{o=a,a=s,s=null,i.hasNext()&&(s=i.next()),null!==a&&(this.createEdgeEndForPrev(t,e,a,o),this.createEdgeEndForNext(t,e,a,s))}while(null!==a)}}getClass(){return JW}get interfaces_(){return[]}}JW.constructor_=function(){};class $W{constructor(){$W.constructor_.apply(this,arguments)}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){Bq.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}getClass(){return $W}get interfaces_(){return[]}}$W.constructor_=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){let t=arguments[0];this._label=t}};class QW extends $W{constructor(){super(),QW.constructor_.apply(this,arguments)}isIncidentEdgeInResult(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){var r=AW.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==AW.BOUNDARY&&(r=n)}return r}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{let t=arguments[0],e=arguments[1];null===this._label?this._label=new KW(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof QW){let t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof KW){let r=arguments[0];for(var t=0;t<2;t++){var e=this.computeMergedLocation(r,t);this._label.getLocation(t)===AW.NONE&&this._label.setLocation(t,e)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;var e=AW.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case AW.BOUNDARY:r=AW.INTERIOR;break;case AW.INTERIOR:default:r=AW.BOUNDARY}this._label.setLocation(t,r)}getClass(){return QW}get interfaces_(){return[]}}QW.constructor_=function(){this._coord=null,this._edges=null;let t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new KW(0,AW.NONE)};class tX{constructor(){tX.constructor_.apply(this,arguments)}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof zq){let e=arguments[0];return null===(t=this.nodeMap.get(e))&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof QW){let e=arguments[0];var t;return null===(t=this.nodeMap.get(e.getCoordinate()))?(this.nodeMap.put(e.getCoordinate(),e),e):(t.mergeLabel(e),t)}}print(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){for(var e=new iY,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===AW.BOUNDARY&&e.add(n)}return e}add(t){var e=t.getCoordinate();this.addNode(e).add(t)}getClass(){return tX}get interfaces_(){return[]}}tX.constructor_=function(){this.nodeMap=new wY,this.nodeFact=null;let t=arguments[0];this.nodeFact=t};class eX extends Gq{constructor(){if(1===arguments.length){let t=arguments[0];super(t),Gq.call(this,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];super(eX.msgWithCoord(t,e)),this.name="TopologyException",this.pt=new zq(e)}}getCoordinate(){return this.pt}get interfaces_(){return[]}getClass(){return eX}static msgWithCoord(t,e){return null!==e?t+" [ "+e+" ]":t}}class rX{constructor(){rX.constructor_.apply(this,arguments)}locate(t){}getClass(){return rX}get interfaces_(){return[]}}rX.constructor_=function(){};class nX{constructor(){nX.constructor_.apply(this,arguments)}static locatePointInPolygon(t,e){if(e.isEmpty())return AW.EXTERIOR;var r=e.getExteriorRing(),n=nX.locatePointInRing(t,r);if(n!==AW.INTERIOR)return n;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=nX.locatePointInRing(t,o);if(a===AW.BOUNDARY)return AW.BOUNDARY;if(a===AW.INTERIOR)return AW.EXTERIOR}return AW.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?zW.locateInRing(t,e.getCoordinates()):AW.EXTERIOR}static containsPointInPolygon(t,e){return AW.EXTERIOR!==nX.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof rW)return nX.locatePointInPolygon(t,e);if(e instanceof NY)for(var r=new VW(e);r.hasNext();){var n=r.next();if(n!==e){var i=nX.locateInGeometry(t,n);if(i!==AW.EXTERIOR)return i}}return AW.EXTERIOR}static locate(t,e){return e.isEmpty()?AW.EXTERIOR:nX.locateInGeometry(t,e)}locate(t){return nX.locate(t,this._geom)}getClass(){return nX}get interfaces_(){return[rX]}}nX.constructor_=function(){this._geom=null;let t=arguments[0];this._geom=t};class iX{constructor(){iX.constructor_.apply(this,arguments)}getNextCW(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)}propagateSideLabels(t){for(var e=AW.NONE,r=this.iterator();r.hasNext();){(o=(i=r.next()).getLabel()).isArea(t)&&o.getLocation(t,HW.LEFT)!==AW.NONE&&(e=o.getLocation(t,HW.LEFT))}if(e===AW.NONE)return null;var n=e;for(r=this.iterator();r.hasNext();){var i,o;if((o=(i=r.next()).getLabel()).getLocation(t,HW.ON)===AW.NONE&&o.setLocation(t,HW.ON,n),o.isArea(t)){var a=o.getLocation(t,HW.LEFT),s=o.getLocation(t,HW.RIGHT);if(s!==AW.NONE){if(s!==n)throw new eX("side location conflict",i.getCoordinate());a===AW.NONE&&Bq.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),n=a}else Bq.isTrue(o.getLocation(t,HW.LEFT)===AW.NONE,"found single null side"),o.setLocation(t,HW.RIGHT,n),o.setLocation(t,HW.LEFT,n)}}}getCoordinate(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}print(t){lY.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,HW.LEFT);Bq.isTrue(n!==AW.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Bq.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,HW.LEFT),l=a.getLocation(t,HW.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0}findIndex(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new iY(this._edgeMap.values())),this._edgeList}getLocation(t,e,r){return this._ptInAreaLocation[t]===AW.NONE&&(this._ptInAreaLocation[t]=nX.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]}toString(){var t=new KY;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=(o=r.next()).getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===AW.BOUNDARY&&(e[i]=!0);for(r=this.iterator();r.hasNext();){var o;for(n=(o=r.next()).getLabel(),i=0;i<2;i++)if(n.isAnyNull(i)){var a=AW.NONE;if(e[i])a=AW.EXTERIOR;else{var s=o.getCoordinate();a=this.getLocation(i,s,t)}n.setAllLocationsIfNull(i,a)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}getClass(){return iX}get interfaces_(){return[]}}iX.constructor_=function(){this._edgeMap=new wY,this._edgeList=null,this._ptInAreaLocation=[AW.NONE,AW.NONE]};class oX{constructor(){oX.constructor_.apply(this,arguments)}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}getClass(){return oX}get interfaces_(){return[]}}oX.constructor_=function(){this.mce=null,this.chainIndex=null;let t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};class aX{constructor(){aX.constructor_.apply(this,arguments)}isDelete(){return this._eventType===aX.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===aX.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}getClass(){return aX}get interfaces_(){return[Nq]}}aX.constructor_=function(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){let t=arguments[0],e=arguments[1];this._eventType=aX.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._eventType=aX.INSERT,this._label=t,this._xValue=e,this._obj=r}},aX.INSERT=1,aX.DELETE=2;class sX{constructor(){sX.constructor_.apply(this,arguments)}getClass(){return sX}get interfaces_(){return[]}}sX.constructor_=function(){};const lX={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return lX.sort(t),t.get(0)},sort:function(t,e){const r=t.toArray();e?TY.sort(r,e):TY.sort(r);const n=t.iterator();for(let t=0,e=r.length;t<e;t++)n.next(),n.set(r[t])},singletonList:function(t){const e=new iY;return e.add(t),e}};var uX=lX;class cX{constructor(){cX.constructor_.apply(this,arguments)}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(cX.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getClass(){return cX}get interfaces_(){return[]}}cX.constructor_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;let t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};class hX extends sX{constructor(){super(),hX.constructor_.apply(this,arguments)}prepareEvents(){uX.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){let r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var t=0;t<this.events.size();t++){var e=this.events.get(t);if(e.isInsert()&&this.processOverlaps(t,e.getDeleteEventIndex(),e,r),r.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cX&&Cq(arguments[0],eY)&&Cq(arguments[1],eY)){let t=arguments[0],e=arguments[1],r=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(r)}else if("boolean"==typeof arguments[2]&&Cq(arguments[0],eY)&&arguments[1]instanceof cX){let t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new oX(r,i),a=new aX(e,r.getMinX(i),o);this.events.add(a),this.events.add(new aX(r.getMaxX(i),a))}}processOverlaps(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();r.isSameLabel(a)||(i.computeIntersections(s,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){let r=arguments[1];for(t=arguments[0].iterator();t.hasNext();){e=t.next();this.addEdge(e,r)}}}getClass(){return hX}get interfaces_(){return[]}}hX.constructor_=function(){this.events=new iY,this.nOverlaps=null};class fX{constructor(){fX.constructor_.apply(this,arguments)}visitItem(t){}getClass(){return fX}get interfaces_(){return[]}}fX.constructor_=function(){};class pX{constructor(){pX.constructor_.apply(this,arguments)}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return NW.toLineString(new zq(this._min,0),new zq(this._max,0))}getClass(){return pX}get interfaces_(){return[]}}class dX{constructor(){dX.constructor_.apply(this,arguments)}compare(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0}getClass(){return dX}get interfaces_(){return[Dq]}}dX.constructor_=function(){},pX.NodeComparator=dX,pX.constructor_=function(){this._min=Fq.POSITIVE_INFINITY,this._max=Fq.NEGATIVE_INFINITY};class gX extends pX{constructor(){super(),gX.constructor_.apply(this,arguments)}query(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)}getClass(){return gX}get interfaces_(){return[]}}gX.constructor_=function(){this._item=null;let t=arguments[0],e=arguments[1],r=arguments[2];this._min=t,this._max=e,this._item=r};class yX extends pX{constructor(){super(),yX.constructor_.apply(this,arguments)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)}getClass(){return yX}get interfaces_(){return[]}}yX.constructor_=function(){this._node1=null,this._node2=null;let t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)};class mX{constructor(){mX.constructor_.apply(this,arguments)}buildTree(){uX.sort(this._leaves,new pX.NodeComparator);for(var t=this._leaves,e=null,r=new iY;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}}insert(t,e,r){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new gX(t,e,r))}query(t,e,r){this.init(),this._root.query(t,e,r)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){lY.out.println(NW.toLineString(new zq(t._min,this._level),new zq(t._max,this._level)))}init(){if(null!==this._root)return null;this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new yX(t.get(r),t.get(r+1));e.add(i)}}}getClass(){return mX}get interfaces_(){return[]}}mX.constructor_=function(){this._leaves=new iY,this._root=null,this._level=0};class _X{constructor(){_X.constructor_.apply(this,arguments)}static midPoint(t,e){return new zq((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof _X){let r=arguments[0];var t=tW.index(this.p0,this.p1,r.p0),e=tW.index(this.p0,this.p1,r.p1);return t>=0&&e>=0||t<=0&&e<=0?Math.max(t,e):0}if(arguments[0]instanceof zq){let t=arguments[0];return tW.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof _X))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){var e=new UW;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof zq){let r=arguments[0];if(r.equals(this.p0)||r.equals(this.p1))return new zq(r);var t=this.projectionFactor(r),e=new zq;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}if(arguments[0]instanceof _X){let t=arguments[0];var r=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(r>=1&&n>=1)return null;if(r<=0&&n<=0)return null;var i=this.project(t.p0);r<0&&(i=this.p0),r>1&&(i=this.p1);var o=this.project(t.p1);return n<0&&(o=this.p0),n>1&&(o=this.p1),new _X(i,o)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return DW.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return _X.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?Fq.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n}closestPoints(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=Fq.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<n&&(n=i,r[0]=a,r[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=l),r}closestPoint(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)}reverse(){var t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){try{return FW.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof jW))throw t}return null}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new zq(r-l,n+s)}setCoordinates(){if(1===arguments.length){let t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Fq.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}distance(){if(arguments[0]instanceof _X){let t=arguments[0];return DW.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof zq){let t=arguments[0];return DW.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){var e=new zq;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=java.lang.Double.doubleToLongBits(this.p1.x);return r^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(r)^Math.trunc(r>>32))}getClass(){return _X}get interfaces_(){return[Nq,Aq]}}_X.constructor_=function(){if(this.p0=null,this.p1=null,0===arguments.length)_X.constructor_.call(this,new zq,new zq);else if(1===arguments.length){let t=arguments[0];_X.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];_X.constructor_.call(this,new zq(t,e),new zq(r,n))}},_X.serialVersionUID=0x2d2172135f411c00;class vX{constructor(){vX.constructor_.apply(this,arguments)}static getGeometry(){if(1===arguments.length){let t=arguments[0];return t.getFactory().buildGeometry(vX.getLines(t))}if(2===arguments.length){let t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(vX.getLines(t,e))}}static getLines(){if(1===arguments.length){let t=arguments[0];return vX.getLines(t,!1)}if(2===arguments.length){if(Cq(arguments[0],Qq)&&Cq(arguments[1],Qq)){let r=arguments[1];for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();vX.getLines(e,r)}return r}if(arguments[0]instanceof Yq&&"boolean"==typeof arguments[1]){let t=arguments[0],e=arguments[1];var r=new iY;return t.apply(new vX(r,e)),r}if(arguments[0]instanceof Yq&&Cq(arguments[1],Qq)){let t=arguments[0],e=arguments[1];return t instanceof WY?e.add(t):t.apply(new vX(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Cq(arguments[0],Qq)&&Cq(arguments[1],Qq)){let r=arguments[1],n=arguments[2];for(t=arguments[0].iterator();t.hasNext();){e=t.next();vX.getLines(e,r,n)}return r}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Yq&&Cq(arguments[1],Qq)){let t=arguments[1],e=arguments[2];return arguments[0].apply(new vX(t,e)),t}}}filter(t){if(this._isForcedToLineString&&t instanceof iW){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof WY&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}getClass(){return vX}get interfaces_(){return[Mq]}}vX.constructor_=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){let t=arguments[0];this._lines=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}};class bX{constructor(){bX.constructor_.apply(this,arguments)}visitItem(t){this._items.add(t)}getItems(){return this._items}getClass(){return bX}get interfaces_(){return[fX]}}bX.constructor_=function(){this._items=new iY};class xX{constructor(){xX.constructor_.apply(this,arguments)}locate(t){var e=new BW(t),r=new wX(e);return this._index.query(t.y,t.y,r),e.getLocation()}getClass(){return xX}get interfaces_(){return[rX]}}class wX{constructor(){wX.constructor_.apply(this,arguments)}visitItem(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}getClass(){return wX}get interfaces_(){return[fX]}}wX.constructor_=function(){this._counter=null;let t=arguments[0];this._counter=t};class EX{constructor(){EX.constructor_.apply(this,arguments)}init(t){for(var e=vX.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}}addLine(t){for(var e=1;e<t.length;e++){var r=new _X(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}}query(){if(2===arguments.length){let e=arguments[0],r=arguments[1];var t=new bX;return this._index.query(e,r,t),t.getItems()}if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._index.query(t,e,r)}}getClass(){return EX}get interfaces_(){return[]}}EX.constructor_=function(){this._index=new mX;let t=arguments[0];this.init(t)},xX.SegmentVisitor=wX,xX.IntervalIndexedGeometry=EX,xX.constructor_=function(){this._index=null;let t=arguments[0];if(!(Cq(t,eW)||t instanceof iW))throw new Lq("Argument must be Polygonal or LinearRing");this._index=new EX(t)};class OX{constructor(){OX.constructor_.apply(this,arguments)}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){var e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}getClass(){return OX}get interfaces_(){return[Nq]}}OX.constructor_=function(){this.coord=null,this.segmentIndex=null,this.dist=null;let t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new zq(t),this.segmentIndex=e,this.dist=r};class SX{constructor(){SX.constructor_.apply(this,arguments)}print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}}addEndpoints(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new zq(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new PX(o,new KW(this.edge._label))}add(t,e,r){var n=new OX(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}isIntersection(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}getClass(){return SX}get interfaces_(){return[]}}SX.constructor_=function(){this._nodeMap=new wY,this.edge=null;let t=arguments[0];this.edge=t};class IX{constructor(){IX.constructor_.apply(this,arguments)}static toIntArray(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e}getChainStartIndices(t){var e=0,r=new iY;r.add(new JY(e));do{var n=this.findChainEnd(t,e);r.add(new JY(n)),e=n}while(e<t.length-1);return IX.toIntArray(r)}findChainEnd(t,e){for(var r=WW.quadrant(t[e],t[e+1]),n=e+1;n<t.length;){if(WW.quadrant(t[n-1],t[n])!==r)break;n++}return n-1}getClass(){return IX}get interfaces_(){return[]}}IX.constructor_=function(){};class CX{constructor(){CX.constructor_.apply(this,arguments)}getCoordinates(){return this.pts}getMaxX(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r}getMinX(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r}computeIntersectsForChain(){if(4===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){let r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(n-r==1&&a-o==1)return s.addIntersections(this.e,r,i.e,o),null;if(!this.overlaps(r,n,i,o,a))return null;var t=Math.trunc((r+n)/2),e=Math.trunc((o+a)/2);r<t&&(o<e&&this.computeIntersectsForChain(r,t,i,o,e,s),e<a&&this.computeIntersectsForChain(r,t,i,e,a,s)),t<n&&(o<e&&this.computeIntersectsForChain(t,n,i,o,e,s),e<a&&this.computeIntersectsForChain(t,n,i,e,a,s))}}overlaps(t,e,r,n,i){return qq.intersects(this.pts[t],this.pts[e],r.pts[n],r.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)}getClass(){return CX}get interfaces_(){return[]}}CX.constructor_=function(){this.e=null,this.pts=null,this.startIndex=null;let t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new IX;this.startIndex=e.getChainStartIndices(this.pts)};class TX{constructor(){TX.constructor_.apply(this,arguments)}static depthAtLocation(t){return t===AW.EXTERIOR?0:t===AW.INTERIOR?1:TX.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,r){this._depth[t][e]=r}isNull(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==TX.NULL_VALUE)return!1;return!0}if(1===arguments.length){let t=arguments[0];return this._depth[t][1]===TX.NULL_VALUE}if(2===arguments.length){let t=arguments[0],e=arguments[1];return this._depth[t][e]===TX.NULL_VALUE}}normalize(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}}getDelta(t){return this._depth[t][HW.RIGHT]-this._depth[t][HW.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?AW.EXTERIOR:AW.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){let n=arguments[0];for(var t=0;t<2;t++)for(var e=1;e<3;e++){var r=n.getLocation(t,e);r!==AW.EXTERIOR&&r!==AW.INTERIOR||(this.isNull(t,e)?this._depth[t][e]=TX.depthAtLocation(r):this._depth[t][e]+=TX.depthAtLocation(r))}}else if(3===arguments.length){let t=arguments[0],e=arguments[1];arguments[2]===AW.INTERIOR&&this._depth[t][e]++}}getClass(){return TX}get interfaces_(){return[]}}TX.constructor_=function(){this._depth=Array(2).fill().map(()=>Array(3));for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=TX.NULL_VALUE},TX.NULL_VALUE=-1;class PX extends $W{constructor(){super(),PX.constructor_.apply(this,arguments)}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof YW&&arguments[0]instanceof KW))return super.updateIM.apply(this,arguments);{let t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,HW.ON),t.getLocation(1,HW.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,HW.LEFT),t.getLocation(1,HW.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,HW.RIGHT),t.getLocation(1,HW.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new PX(t,KW.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof PX))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var r=!0,n=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(r=!1),this.pts[o].equals2D(e.pts[--i])||(n=!1),!r&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){let t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){PX.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new CX(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new qq;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,r,n){var i=new zq(t.getIntersection(n)),o=e,a=t.getEdgeDistance(r,n),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)}toString(){var t=new qY;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)}getClass(){return PX}get interfaces_(){return[]}}PX.constructor_=function(){if(this.pts=null,this._env=null,this.eiList=new SX(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new TX,this._depthDelta=0,1===arguments.length){let t=arguments[0];PX.constructor_.call(this,t,null)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this.pts=t,this._label=e}};class RX extends XW{constructor(){super(),RX.constructor_.apply(this,arguments)}static depthFactor(t,e){return t===AW.EXTERIOR&&e===AW.INTERIOR?1:t===AW.INTERIOR&&e===AW.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new KW(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new eX("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,HW.LEFT)===AW.INTERIOR&&this._label.getLocation(e,HW.RIGHT)===AW.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[HW.LEFT]+"/"+this._depth[HW.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,AW.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,AW.EXTERIOR);return t&&e&&r}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===HW.LEFT&&(n=-1);var i=HW.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}getClass(){return RX}get interfaces_(){return[]}}RX.constructor_=function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];let t=arguments[0],e=arguments[1];if(XW.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()};class LX{constructor(){LX.constructor_.apply(this,arguments)}createNode(t){return new QW(t,null)}getClass(){return LX}get interfaces_(){return[]}}LX.constructor_=function(){};class MX{constructor(){MX.constructor_.apply(this,arguments)}static linkResultDirectedEdges(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof QW){let t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof zq){let t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){lY.out.println(t)}isBoundaryNode(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===AW.BOUNDARY}linkAllDirectedEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,r,n){return!!t.equals(r)&&(tW.index(t,e,n)===tW.COLLINEAR&&WW.quadrant(t,e)===WW.quadrant(r,n))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){lY.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null}addEdges(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._edges.add(r);var n=new RX(r,!0),i=new RX(r,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null}getClass(){return MX}get interfaces_(){return[]}}MX.constructor_=function(){if(this._edges=new iY,this._nodes=null,this._edgeEndList=new iY,0===arguments.length)this._nodes=new tX(new LX);else if(1===arguments.length){let t=arguments[0];this._nodes=new tX(t)}};class NX extends MX{constructor(){super(),NX.constructor_.apply(this,arguments)}static determineBoundary(t,e){return t.isInBoundary(e)?AW.BOUNDARY:AW.INTERIOR}insertBoundaryPoint(t,e){var r=this._nodes.addNode(e).getLabel(),n=1;AW.NONE;r.getLocation(t,HW.ON)===AW.BOUNDARY&&n++;var i=NX.determineBoundary(this._boundaryNodeRule,n);r.setLocation(t,i)}computeSelfNodes(){if(2===arguments.length){let t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){let i=arguments[1],o=arguments[2];var t=new cX(arguments[0],!0,!1);t.setIsDoneIfProperInt(o);var e=this.createEdgeSetIntersector(),r=this._parentGeom instanceof iW||this._parentGeom instanceof rW||this._parentGeom instanceof oW,n=i||!r;return e.computeIntersections(this._edges,t,n),this.addSelfIntersectionNodes(this._argIndex),t}}computeSplitEdges(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,r){var n=new cX(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof HY){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,AW.INTERIOR)}else if(arguments[0]instanceof zq){let t=arguments[0];this.insertPoint(this._argIndex,t,AW.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),AW.EXTERIOR,AW.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,AW.INTERIOR,AW.EXTERIOR)}}addEdge(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],AW.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],AW.BOUNDARY)}addLineString(t){var e=uY.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new PX(e,new KW(this._argIndex,AW.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),Bq.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,r){if(this.isBoundaryNode(t,e))return null;r===AW.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)}addPolygonRing(t,e,r){if(t.isEmpty())return null;var n=uY.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;tW.isCCW(n)&&(i=r,o=e);var a=new PX(n,new KW(this._argIndex,AW.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],AW.BOUNDARY)}insertPoint(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new KW(t,r):i.setLocation(t,r)}createEdgeSetIntersector(){return new hX}addSelfIntersectionNodes(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}}add(){if(!(1===arguments.length&&arguments[0]instanceof Yq))return super.add.apply(this,arguments);{let t=arguments[0];if(t.isEmpty())return null;if(t instanceof oW&&(this._useBoundaryDeterminationRule=!1),t instanceof rW)this.addPolygon(t);else if(t instanceof WY)this.addLineString(t);else if(t instanceof HY)this.addPoint(t);else if(t instanceof nW)this.addCollection(t);else if(t instanceof AY)this.addCollection(t);else if(t instanceof oW)this.addCollection(t);else{if(!(t instanceof NY))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}}}addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}}locate(t){return Cq(this._parentGeom,eW)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new xX(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof WY){let t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}getClass(){return NX}get interfaces_(){return[]}}NX.constructor_=function(){if(this._parentGeom=null,this._lineEdgeMap=new bW,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new qW,2===arguments.length){let t=arguments[0],e=arguments[1];NX.constructor_.call(this,t,e,Xq.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=r,null!==e&&this.add(e)}};class AX extends XW{constructor(){super(),AX.constructor_.apply(this,arguments)}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){for(var r=0,n=!1,i=this.iterator();i.hasNext();){(o=i.next().getLabel().getLocation(t))===AW.BOUNDARY&&r++,o===AW.INTERIOR&&(n=!0)}var o=AW.NONE;n&&(o=AW.INTERIOR),r>0&&(o=NX.determineBoundary(e,r)),this._label.setLocation(t,o)}computeLabelSide(t,e){for(var r=this.iterator();r.hasNext();){var n=r.next();if(n.getLabel().isArea()){var i=n.getLabel().getLocation(t,e);if(i===AW.INTERIOR)return this._label.setLocation(t,e,AW.INTERIOR),null;i===AW.EXTERIOR&&this._label.setLocation(t,e,AW.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,HW.LEFT),this.computeLabelSide(t,HW.RIGHT)}updateIM(t){PX.updateIM(this._label,t)}computeLabel(t){for(var e=!1,r=this.iterator();r.hasNext();){r.next().getLabel().isArea()&&(e=!0)}this._label=e?new KW(AW.NONE,AW.NONE,AW.NONE):new KW(AW.NONE);for(var n=0;n<2;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)}getClass(){return AX}get interfaces_(){return[]}}AX.constructor_=function(){if(this._edgeEnds=new iY,1===arguments.length){let t=arguments[0];AX.constructor_.call(this,null,t)}else if(2===arguments.length){let t=arguments[1];XW.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new KW(t.getLabel())),this.insert(t)}};class kX extends iX{constructor(){super(),kX.constructor_.apply(this,arguments)}updateIM(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}}insert(t){var e=this._edgeMap.get(t);null===e?(e=new AX(t),this.insertEdgeEnd(t,e)):e.insert(t)}getClass(){return kX}get interfaces_(){return[]}}kX.constructor_=function(){};class jX extends QW{constructor(){super(),jX.constructor_.apply(this,arguments)}updateIMFromEdges(t){this._edges.updateIM(t)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}getClass(){return jX}get interfaces_(){return[]}}jX.constructor_=function(){let t=arguments[0],e=arguments[1];QW.constructor_.call(this,t,e)};class FX extends LX{constructor(){super(),FX.constructor_.apply(this,arguments)}createNode(t){return new jX(t,new kX)}getClass(){return FX}get interfaces_(){return[]}}FX.constructor_=function(){};class DX{constructor(){DX.constructor_.apply(this,arguments)}insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._nodes.add(r)}}computeProperIntersectionIM(t,e){var r=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===r&&2===n?i&&e.setAtLeast("212101212"):2===r&&1===n?(i&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===r&&2===n?(i&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===r&&1===n&&o&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(var r=this._arg[t].getEdgeIterator();r.hasNext();){var n=r.next();n.isIsolated()&&(this.labelIsolatedEdge(n,e,this._arg[e].getGeometry()),this._isolatedEdges.add(n))}}labelIsolatedEdge(t,e,r){if(r.getDimension()>0){var n=this._ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,AW.EXTERIOR)}computeIM(){var t=new YW;if(t.set(AW.EXTERIOR,AW.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);var e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var r=new JW,n=r.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);var i=r.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}}copyNodesAndLabels(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._nodes.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this._nodes.find(o.coord);a.getLabel().isNull(t)&&(n===AW.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,AW.INTERIOR))}}labelIsolatedNode(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,r)}computeIntersectionNodes(t){for(var e=this._arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var o=i.next(),a=this._nodes.addNode(o.coord);n===AW.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,AW.INTERIOR)}}labelIsolatedNodes(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next(),r=e.getLabel();Bq.isTrue(r.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(var e=this._isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var r=this._nodes.iterator();r.hasNext();){var n=r.next();n.updateIM(t),n.updateIMFromEdges(t)}}computeDisjointIM(t){var e=this._arg[0].getGeometry();e.isEmpty()||(t.set(AW.INTERIOR,AW.EXTERIOR,e.getDimension()),t.set(AW.BOUNDARY,AW.EXTERIOR,e.getBoundaryDimension()));var r=this._arg[1].getGeometry();r.isEmpty()||(t.set(AW.EXTERIOR,AW.INTERIOR,r.getDimension()),t.set(AW.EXTERIOR,AW.BOUNDARY,r.getBoundaryDimension()))}getClass(){return DX}get interfaces_(){return[]}}DX.constructor_=function(){this._li=new UW,this._ptLocator=new qW,this._arg=null,this._nodes=new tX(new FX),this._im=null,this._isolatedEdges=new iY,this._invalidPoint=null;let t=arguments[0];this._arg=t};class GX{constructor(){GX.constructor_.apply(this,arguments)}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}getClass(){return GX}get interfaces_(){return[]}}GX.constructor_=function(){if(this._li=new UW,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){let t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new NX(0,t)}else if(2===arguments.length){let t=arguments[0],e=arguments[1];GX.constructor_.call(this,t,e,Xq.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new NX(0,t,r),this._arg[1]=new NX(1,e,r)}};class UX{constructor(){UX.constructor_.apply(this,arguments)}static contains(t,e){return new UX(t).contains(e)}isContainedInBoundary(t){if(t instanceof rW)return!1;if(t instanceof HY)return this.isPointContainedInBoundary(t);if(t instanceof WY)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);if(!this.isContainedInBoundary(r))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){for(var e=t.getCoordinateSequence(),r=new zq,n=new zq,i=0;i<e.size()-1;i++)if(e.getCoordinate(i,r),e.getCoordinate(i+1,n),!this.isLineSegmentContainedInBoundary(r,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof HY){let t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof zq){let t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}getClass(){return UX}get interfaces_(){return[]}}UX.constructor_=function(){this._rectEnv=null;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal()};class BX{constructor(){BX.constructor_.apply(this,arguments)}intersects(t,e){var r=new qq(t,e);if(!this._rectEnv.intersects(r))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var n=t;t=e,e=n}var i=!1;return e.y>t.y&&(i=!0),i?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}getClass(){return BX}get interfaces_(){return[]}}BX.constructor_=function(){this._li=new UW,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;let t=arguments[0];this._rectEnv=t,this._diagUp0=new zq(t.getMinX(),t.getMinY()),this._diagUp1=new zq(t.getMaxX(),t.getMaxY()),this._diagDown0=new zq(t.getMinX(),t.getMaxY()),this._diagDown1=new zq(t.getMaxX(),t.getMinY())};class zX{constructor(){zX.constructor_.apply(this,arguments)}applyTo(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var r=t.getGeometryN(e);if(r instanceof NY)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}}getClass(){return zX}get interfaces_(){return[]}}zX.constructor_=function(){this._isDone=!1};class VX{constructor(){VX.constructor_.apply(this,arguments)}static intersects(t,e){return new VX(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new qX(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;var r=new YX(this._rectangle);if(r.applyTo(t),r.containsPoint())return!0;var n=new WX(this._rectangle);return n.applyTo(t),!!n.intersects()}getClass(){return VX}get interfaces_(){return[]}}VX.constructor_=function(){this._rectangle=null,this._rectEnv=null;let t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()};class qX extends zX{constructor(){super(),qX.constructor_.apply(this,arguments)}isDone(){return!0===this._intersects}visit(t){var e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)||e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()||e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}getClass(){return qX}get interfaces_(){return[]}}qX.constructor_=function(){this._rectEnv=null,this._intersects=!1;let t=arguments[0];this._rectEnv=t};class YX extends zX{constructor(){super(),YX.constructor_.apply(this,arguments)}isDone(){return!0===this._containsPoint}visit(t){if(!(t instanceof rW))return null;var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;for(var r=new zq,n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,r),e.contains(r)&&nX.containsPointInPolygon(r,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}getClass(){return YX}get interfaces_(){return[]}}YX.constructor_=function(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;let t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()};class WX extends zX{constructor(){super(),WX.constructor_.apply(this,arguments)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){var e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;var r=vX.getLines(t);this.checkIntersectionWithLineStrings(r)}checkIntersectionWithLineStrings(t){for(var e=t.iterator();e.hasNext();){var r=e.next();if(this.checkIntersectionWithSegments(r),this._hasIntersection)return null}}checkIntersectionWithSegments(t){for(var e=t.getCoordinateSequence(),r=1;r<e.size();r++)if(e.getCoordinate(r-1,this._p0),e.getCoordinate(r,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}getClass(){return WX}get interfaces_(){return[]}}WX.constructor_=function(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new zq,this._p1=new zq;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new BX(this._rectEnv)};class XX extends GX{constructor(){super(),XX.constructor_.apply(this,arguments)}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new XX(t,e).getIntersectionMatrix().isCovers())))}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return VX.intersects(t,e);if(e.isRectangle())return VX.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(var r=0;r<t.getNumGeometries();r++)for(var n=0;n<e.getNumGeometries();n++)if(t.getGeometryN(r).intersects(e.getGeometryN(n)))return!0;return!1}return new XX(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new XX(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static relate(){if(2===arguments.length){return new XX(arguments[0],arguments[1]).getIntersectionMatrix()}if(3===arguments.length){return new XX(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new XX(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new XX(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&(!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&(!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?UX.contains(t,e):new XX(t,e).getIntersectionMatrix().isContains())))}getIntersectionMatrix(){return this._relate.computeIM()}getClass(){return XX}get interfaces_(){return[]}}function HX(t){return function(t){if(Array.isArray(t))return ZX(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ZX(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZX(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZX(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}XX.constructor_=function(){if(this._relate=null,2===arguments.length){let t=arguments[0],e=arguments[1];GX.constructor_.call(this,t,e),this._relate=new DX(this._arg)}else if(3===arguments.length){let t=arguments[0],e=arguments[1],r=arguments[2];GX.constructor_.call(this,t,e,r),this._relate=new DX(this._arg)}};var KX=function(t){var e=t,r=[];return e instanceof Dw?r=HX(e.getFeatures().map((function(t){return t.getGeometry()}))):(mD(e)||(e=[e]),r=e.map((function(t){var e;return t instanceof mG?e=t.getGeometry():bD(t)&&(e=t),e}))),r},JX=function(t,e){var r="",n=new LU;return e.forEach((function(e,i){0!==i&&(r+=" OR ");var o=e;"point"===o.type.toLowerCase()&&(o.coordinates.length=2);var a=n.write(o);r+="".concat(t,"({{geometryName}}, ").concat(a,")")})),r},$X=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QX=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],tH="enterfullscreen",eH="leavefullscreen";function rH(t){var e=t.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&t.msFullscreenEnabled||e.requestFullscreen&&t.fullscreenEnabled)}function nH(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function iH(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var oH=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).on,r.once,r.un,r.keys_=void 0!==n.keys&&n.keys,r.source_=n.source,r.isInFullscreen_=!1,r.boundHandleMapTargetChange_=r.handleMapTargetChange_.bind(r),r.cssClassName_=void 0!==n.className?n.className:"ol-full-screen",r.documentListeners_=[],r.activeClassName_=void 0!==n.activeClassName?n.activeClassName.split(" "):[r.cssClassName_+"-true"],r.inactiveClassName_=void 0!==n.inactiveClassName?n.inactiveClassName.split(" "):[r.cssClassName_+"-false"];var i=void 0!==n.label?n.label:"⤢";r.labelNode_="string"==typeof i?document.createTextNode(i):i;var o=void 0!==n.labelActive?n.labelActive:"×";r.labelActiveNode_="string"==typeof o?document.createTextNode(o):o;var a=n.tipLabel?n.tipLabel:"Toggle full-screen";return r.button_=document.createElement("button"),r.button_.title=a,r.button_.setAttribute("type","button"),r.button_.appendChild(r.labelNode_),r.button_.addEventListener(Di.a.CLICK,r.handleClick_.bind(r),!1),r.setClassName_(r.button_,r.isInFullscreen_),r.element.className="".concat(r.cssClassName_," ").concat(ti.e," ").concat(ti.b),r.element.appendChild(r.button_),r}return $X(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var t=this.getMap();if(t){var e=t.getOwnerDocument();if(rH(e))if(nH(e))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(e);else{var r=void 0;r=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():iH(t)}(r):iH(r)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();if(t){var e=this.isInFullscreen_;this.isInFullscreen_=nH(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Object(oi.g)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(tH)):(Object(oi.g)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(eH)),t.updateSize())}},e.prototype.setClassName_=function(t,e){var r,n,i,o;e?((r=t.classList).remove.apply(r,this.inactiveClassName_),(n=t.classList).add.apply(n,this.activeClassName_)):((i=t.classList).remove.apply(i,this.activeClassName_),(o=t.classList).add.apply(o,this.inactiveClassName_))},e.prototype.setMap=function(e){var r=this.getMap();r&&r.removeChangeListener(uo,this.boundHandleMapTargetChange_),t.prototype.setMap.call(this,e),this.handleMapTargetChange_(),e&&e.addChangeListener(uo,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var t=this.documentListeners_,e=0,r=t.length;e<r;++e)Object(Ci.c)(t[e]);t.length=0;var n=this.getMap();if(n){var i=n.getOwnerDocument();rH(i)?this.element.classList.remove(ti.f):this.element.classList.add(ti.f);for(e=0,r=QX.length;e<r;++e)t.push(Object(Ci.a)(i,QX[e],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(Ua),aH=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sH=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var i=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(Di.a.CLICK,r.handleClick_.bind(r),!1);var l=i+" "+ti.e+" "+ti.b,u=r.element;return u.className=l,u.appendChild(s),r}return aH(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Ia(e))},e}(Ua),lH=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uH={};uH[fo.a.POINT]=function(t){var e;e=void 0!==t.m&&void 0!==t.z?new aa([t.x,t.y,t.z,t.m],Po):void 0!==t.z?new aa([t.x,t.y,t.z],Co):void 0!==t.m?new aa([t.x,t.y,t.m],To):new aa([t.x,t.y]);return e},uH[fo.a.LINE_STRING]=function(t){var e=fH(t);return new Qc(t.paths[0],e)},uH[fo.a.POLYGON]=function(t){var e=fH(t);return new Oa(t.rings,e)},uH[fo.a.MULTI_POINT]=function(t){var e=fH(t);return new Hc(t.points,e)},uH[fo.a.MULTI_LINE_STRING]=function(t){var e=fH(t);return new eh(t.paths,e)},uH[fo.a.MULTI_POLYGON]=function(t){var e=fH(t);return new ih(t.rings,e)};var cH={};function hH(t,e){var r,n,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=fo.a.POINT;else if(t.points)i=fo.a.MULTI_POINT;else if(t.paths){i=1===t.paths.length?fo.a.LINE_STRING:fo.a.MULTI_LINE_STRING}else if(t.rings){var o=t,a=fH(o),s=function(t,e){var r,n,i=[],o=[],a=[];for(r=0,n=t.length;r<n;++r){i.length=0,Yo(i,0,t[r],e.length),ya(i,0,i.length,e.length)?o.push([t[r]]):a.push(t[r])}for(;a.length;){var s=a.shift(),l=!1;for(r=o.length-1;r>=0;r--){var u=o[r][0];if(Object(mt.h)(new ia(u).getExtent(),new ia(s).getExtent())){o[r].push(s),l=!0;break}}l||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(i=fo.a.POLYGON,t=Object(ii.a)({},t,((r={}).rings=s[0],r))):(i=fo.a.MULTI_POLYGON,t=Object(ii.a)({},t,((n={}).rings=s,n)))}return LI((0,uH[i])(t),!1,e)}function fH(t){var e=Io;return!0===t.hasZ&&!0===t.hasM?e=Po:!0===t.hasZ?e=Co:!0===t.hasM&&(e=To),e}function pH(t){var e=t.getLayout();return{hasZ:e===Co||e===Po,hasM:e===To||e===Po}}function dH(t,e){return(0,cH[t.getType()])(LI(t,!0,e),e)}cH[fo.a.POINT]=function(t,e){var r,n=t.getCoordinates(),i=t.getLayout();i===Co?r={x:n[0],y:n[1],z:n[2]}:i===To?r={x:n[0],y:n[1],m:n[2]}:i===Po?r={x:n[0],y:n[1],z:n[2],m:n[3]}:i===Io?r={x:n[0],y:n[1]}:Object(Ui.a)(!1,34);return r},cH[fo.a.LINE_STRING]=function(t,e){var r=pH(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},cH[fo.a.POLYGON]=function(t,e){var r=pH(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},cH[fo.a.MULTI_POINT]=function(t,e){var r=pH(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},cH[fo.a.MULTI_LINE_STRING]=function(t,e){var r=pH(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},cH[fo.a.MULTI_POLYGON]=function(t,e){for(var r=pH(t),n=t.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}};var gH=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).geometryName_=n.geometryName,r}return lH(e,t),e.prototype.readFeatureFromObject=function(t,e,r){var n=t,i=hH(n.geometry,e),o=new Wc;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(i),n.attributes){o.setProperties(n.attributes,!0);var a=n.attributes[r];void 0!==a&&o.setId(a)}return o},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){for(var n=[],i=t.features,o=0,a=i.length;o<a;++o)n.push(this.readFeatureFromObject(i[o],r,t.objectIdFieldName));return n}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return hH(t,e)},e.prototype.readProjectionFromObject=function(t){if(t.spatialReference&&void 0!==t.spatialReference.wkid){var e=t.spatialReference.wkid;return Object(u.o)("EPSG:"+e)}return null},e.prototype.writeGeometryObject=function(t,e){return dH(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={};if(!t.hasProperties())return r.attributes={},r;var n=t.getProperties(),i=t.getGeometry();if(i){r.geometry=dH(i,e);var o=e&&(e.dataProjection||e.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(Object(u.o)(o).getCode().split(":").pop())}),delete n[t.getGeometryName()]}return Object(ii.d)(n)?r.attributes={}:r.attributes=n,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}},e}(aN),yH=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mH=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],_H={rte:WH,trk:XH,wpt:HH},vH=T(mH,{rte:v(WH),trk:v(XH),wpt:v(HH)}),bH=T(mH,{text:w(X,"linkText"),type:w(X,"linkType")}),xH=T(mH,{rte:E((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==fo.a.LINE_STRING){var s=LI(a,!0,n);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var l=r[r.length-1].node,u=LH[l.namespaceURI],c=C(i,u);N(o,MH,I,c,r,u)})),trk:E((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==fo.a.MULTI_LINE_STRING){var s=LI(a,!0,n);i.trkseg=s.getLineStrings()}var l=r[r.length-1].node,u=AH[l.namespaceURI],c=C(i,u);N(o,kH,I,c,r,u)})),wpt:E((function(t,e,r){var n=r[0],i=r[r.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==fo.a.POINT){var a=LI(o,!0,n);i.geometryLayout=a.getLayout(),KH(t,a.getCoordinates(),r)}}))}),wH=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Object(u.o)("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return yH(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var n=t[e];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!Object(h.f)(mH,t.namespaceURI))return null;var r=_H[t.localName];if(!r)return null;var n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!Object(h.f)(mH,t.namespaceURI))return[];if("gpx"==t.localName){var r=R([],vH,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=p("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",f),r.setAttributeNS(f,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),N({node:r},xH,BH,t,[e]),r},e}(AI),EH=T(mH,{name:w(X),cmt:w(X),desc:w(X),src:w(X),link:qH,number:w(Y),extensions:YH,type:w(X),rtept:function(t,e){var r=R({},OH,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;zH(i,o,t,r)}}}),OH=T(mH,{ele:w(V),time:w(z)}),SH=T(mH,{name:w(X),cmt:w(X),desc:w(X),src:w(X),link:qH,number:w(Y),type:w(X),extensions:YH,trkseg:function(t,e){var r=e[e.length-1];P(IH,t,e);var n=r.flatCoordinates;r.ends.push(n.length)}}),IH=T(mH,{trkpt:function(t,e){var r=R({},CH,t,e);if(r){var n=e[e.length-1],i=n.flatCoordinates,o=n.layoutOptions;zH(i,o,t,r)}}}),CH=T(mH,{ele:w(V),time:w(z)}),TH=T(mH,{ele:w(V),time:w(z),magvar:w(V),geoidheight:w(V),name:w(X),cmt:w(X),desc:w(X),src:w(X),link:qH,sym:w(X),type:w(X),fix:w(X),sat:w(Y),hdop:w(V),vdop:w(V),pdop:w(V),ageofdgpsdata:w(V),dgpsid:w(Y),extensions:YH}),PH=["text","type"],RH=T(mH,{text:E(J),type:E(J)}),LH=T(mH,["name","cmt","desc","src","link","number","type","rtept"]),MH=T(mH,{name:E(J),cmt:E(J),desc:E(J),src:E(J),link:E(ZH),number:E(K),type:E(J),rtept:O(E(KH))}),NH=T(mH,["ele","time"]),AH=T(mH,["name","cmt","desc","src","link","number","type","trkseg"]),kH=T(mH,{name:E(J),cmt:E(J),desc:E(J),src:E(J),link:E(ZH),number:E(K),type:E(J),trkseg:O(E((function(t,e,r){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},N(n,FH,jH,e.getCoordinates(),r)})))}),jH=S("trkpt"),FH=T(mH,{trkpt:E(KH)}),DH=T(mH,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),GH=T(mH,{ele:E(Z),time:E((function(t,e){var r=new Date(1e3*e),n=r.getUTCFullYear()+"-"+Object(G.b)(r.getUTCMonth()+1,2)+"-"+Object(G.b)(r.getUTCDate(),2)+"T"+Object(G.b)(r.getUTCHours(),2)+":"+Object(G.b)(r.getUTCMinutes(),2)+":"+Object(G.b)(r.getUTCSeconds(),2)+"Z";t.appendChild(j().createTextNode(n))})),magvar:E(Z),geoidheight:E(Z),name:E(J),cmt:E(J),desc:E(J),src:E(J),link:E(ZH),sym:E(J),type:E(J),fix:E(J),sat:E(K),hdop:E(Z),vdop:E(Z),pdop:E(Z),ageofdgpsdata:E(Z),dgpsid:E(K)}),UH={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function BH(t,e,r){var n=t.getGeometry();if(n){var i=UH[n.getType()];if(i)return p(e[e.length-1].node.namespaceURI,i)}}function zH(t,e,r,n){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function VH(t,e,r){var n=Io,i=2;if(t.hasZ&&t.hasM?(n=Po,i=4):t.hasZ?(n=Co,i=3):t.hasM&&(n=To,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*i}return n}function qH(t,e){var r=e[e.length-1],n=t.getAttribute("href");null!==n&&(r.link=n),P(bH,t,e)}function YH(t,e){e[e.length-1].extensionsNode_=t}function WH(t,e){var r=e[0],n=R({flatCoordinates:[],layoutOptions:{}},EH,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=VH(o,i),s=new Qc(i,a);LI(s,!1,r);var l=new Wc(s);return l.setProperties(n,!0),l}}function XH(t,e){var r=e[0],n=R({flatCoordinates:[],ends:[],layoutOptions:{}},SH,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=VH(a,i,o),l=new eh(i,s,o);LI(l,!1,r);var u=new Wc(l);return u.setProperties(n,!0),u}}function HH(t,e){var r=e[0],n=R({},TH,t,e);if(n){var i={},o=zH([],i,t,n),a=VH(i,o),s=new aa(o,a);LI(s,!1,r);var l=new Wc(s);return l.setProperties(n,!0),l}}function ZH(t,e,r){t.setAttribute("href",e);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];N({node:t},RH,I,i,r,PH)}function KH(t,e,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Po:0!==e[3]&&(o.time=e[3]);case Co:0!==e[2]&&(o.ele=e[2]);break;case To:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?NH[i]:DH[i],s=C(o,a);N({node:t,properties:o},GH,I,s,r,a)}var JH=wH,$H=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QH="barometric",tZ="gps",eZ="none",rZ=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,nZ=/^H.([A-Z]{3}).*?:(.*)/,iZ=/^HFDTE(\d{2})(\d{2})(\d{2})/,oZ=/\r\n|\r|\n/,aZ=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Object(u.o)("EPSG:4326"),r.altitudeMode_=n.altitudeMode?n.altitudeMode:eZ,r}return $H(e,t),e.prototype.readFeatureFromText=function(t,e){var r,n,i=this.altitudeMode_,o=t.split(oZ),a={},s=[],l=2e3,u=0,c=1,h=-1;for(r=0,n=o.length;r<n;++r){var f=o[r],p=void 0;if("B"==f.charAt(0)){if(p=rZ.exec(f)){var d=parseInt(p[1],10),g=parseInt(p[2],10),y=parseInt(p[3],10),m=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(m=-m);var _=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(_=-_),s.push(_,m),i!=eZ){var v=void 0;v=i==tZ?parseInt(p[11],10):i==QH?parseInt(p[12],10):0,s.push(v)}var b=Date.UTC(l,u,c,d,g,y);b<h&&(b=Date.UTC(l,u,c+1,d,g,y)),s.push(b/1e3),h=b}}else"H"==f.charAt(0)&&((p=iZ.exec(f))?(c=parseInt(p[1],10),u=parseInt(p[2],10)-1,l=2e3+parseInt(p[3],10)):(p=nZ.exec(f))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var x=new Qc(s,i==eZ?To:Po),w=new Wc(LI(x,!1,e));return w.setProperties(a,!0),w},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(HG),sZ=function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},lZ="version1",uZ="version2",cZ="version3",hZ={};hZ[lZ]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},hZ[uZ]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},hZ[cZ]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},hZ.none={none:{supports:[],formats:[],qualities:[]}};var fZ=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,pZ=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,dZ=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var gZ={};gZ[lZ]=function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=hZ[lZ].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:sZ(sZ([],e.formats,!0),[void 0===t.imageInfo.formats?[]:t.imageInfo.formats],!1),qualities:sZ(sZ([],e.qualities,!0),[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],!1),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},gZ[uZ]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:sZ(sZ([],e.supports,!0),n,!0),formats:sZ(sZ([],e.formats,!0),i,!0),qualities:sZ(sZ([],e.qualities,!0),o,!0)}},gZ[cZ]=function(t){var e=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?e.formats:sZ(sZ([],e.formats,!0),t.imageInfo.extraFormats,!0),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return Object(h.f)(["jpg","png","gif"],t)})).reduce((function(t,e){return void 0===t&&Object(h.f)(r,e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:sZ(sZ([],e.supports,!0),t.imageInfo.extraFeatures,!0),formats:r,qualities:void 0===t.imageInfo.extraQualities?e.qualities:sZ(sZ([],e.qualities,!0),t.imageInfo.extraQualities,!0),preferredFormat:n}};var yZ=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return lZ;case"http://iiif.io/api/image/2/context.json":return uZ;case"http://iiif.io/api/image/3/context.json":return cZ;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(lZ)&&this.imageInfo.identifier)return lZ}Object(Ui.a)(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case lZ:if(fZ.test(this.imageInfo.profile))return this.imageInfo.profile;break;case cZ:if(dZ.test(this.imageInfo.profile))return this.imageInfo.profile;break;case uZ:if("string"==typeof this.imageInfo.profile&&pZ.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&pZ.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var r=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?hZ.none.none:hZ[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:gZ[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&Object(h.f)(n.formats,e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&Object(h.f)(n.qualities,e.quality)?e.quality:Object(h.f)(n.qualities,"native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:n.tileSize}}},t}(),mZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Z=[null],vZ=T(_Z,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:EZ}),bZ=T(_Z,{node:function(t,e){var r=e[0],n=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[i]=o;var a=R({tags:{}},wZ,t,e);if(!Object(ii.d)(a.tags)){var s=new aa(o);LI(s,!1,r);var l=new Wc(s);void 0!==i&&l.setId(i),l.setProperties(a.tags,!0),n.features.push(l)}},way:function(t,e){var r=R({id:t.getAttribute("id"),ndrefs:[],tags:{}},vZ,t,e);e[e.length-1].ways.push(r)}}),xZ=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=Object(u.o)("EPSG:4326"),e}return mZ(e,t),e.prototype.readFeaturesFromNode=function(t,e){var r=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=R({nodes:{},ways:[],features:[]},bZ,t,[r]),i=0;i<n.ways.length;i++){for(var o=n.ways[i],a=[],s=0,l=o.ndrefs.length;s<l;s++){var u=n.nodes[o.ndrefs[s]];Object(h.c)(a,u)}var c=void 0;LI(c=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Oa(a,Io,[a.length]):new Qc(a,Io),!1,r);var f=new Wc(c);void 0!==o.id&&f.setId(o.id),f.setProperties(o.tags,!0),n.features.push(f)}if(n.features)return n.features}return[]},e}(AI),wZ=T(_Z,{tag:EZ});function EZ(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var OZ=xZ;function SZ(t,e,r,n,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var l=e;l<r;){var u=t[l++];a[s++]=t[l++],a[s++]=u;for(var c=2;c<n;++c)a[s++]=t[l++]}return a.length=s,a}var IZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function CZ(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var l=t[a],u=l-o[n];o[n]=l,t[a]=u}return PZ(t,i)}function TZ(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=RZ(t,i),s=0,l=a.length;s<l;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function PZ(t,e){for(var r=e||1e5,n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*r);return function(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",r=0,n=t.length;r<n;++r)e+=LZ(t[r]);return e}(t)}(t)}function RZ(t,e){for(var r=e||1e5,n=function(t){for(var e=function(t){for(var e=[],r=0,n=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(e.push(r),r=0,n=0):n+=5}return e}(t),r=0,n=e.length;r<n;++r){var i=e[r];e[r]=1&i?~(i>>1):i>>1}return e}(t),i=0,o=n.length;i<o;++i)n[i]/=r;return n}function LZ(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+=String.fromCharCode(e)}var MZ=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=Object(u.o)("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:Io,r}return IZ(e,t),e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new Wc(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=Fo(this.geometryLayout_),n=TZ(t,r,this.factor_);SZ(n,0,n.length,r,n);var i=$o(n,0,n.length,r);return LI(new Qc(i,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):(Object(Ui.a)(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=LI(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return SZ(r,0,r.length,n,r),CZ(r,n,this.factor_)},e}(HG),NZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AZ=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.layerName_=n.layerName,r.layers_=n.layers?n.layers:null,r.dataProjection=Object(u.o)(n.dataProjection?n.dataProjection:"EPSG:4326"),r}return NZ(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r=t,n=void 0,i=null,o=null;r.transform&&(i=(n=r.transform).scale,o=n.translate);var a=r.arcs;n&&function(t,e,r){for(var n=0,i=t.length;n<i;++n)GZ(t[n],e,r)}(a,i,o);var s=[],l=r.objects,u=this.layerName_,c=void 0;for(var h in l)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===l[h].type?(c=l[h],s.push.apply(s,FZ(c,a,i,o,u,h,e))):(c=l[h],s.push(DZ(c,a,i,o,u,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(aN),kZ={Point:function(t,e,r){var n=t.coordinates;e&&r&&UZ(n,e,r);return new aa(n)},LineString:function(t,e){var r=jZ(t.arcs,e);return new Qc(r)},Polygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=jZ(t.arcs[n],e);return new Oa(r)},MultiPoint:function(t,e,r){var n=t.coordinates;if(e&&r)for(var i=0,o=n.length;i<o;++i)UZ(n[i],e,r);return new Hc(n)},MultiLineString:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=jZ(t.arcs[n],e);return new eh(r)},MultiPolygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n){for(var o=t.arcs[n],a=[],s=0,l=o.length;s<l;++s)a[s]=jZ(o[s],e);r[n]=a}return new ih(r)}};function jZ(t,e){for(var r,n=[],i=0,o=t.length;i<o;++i)if(r=t[i],i>0&&n.pop(),r>=0)for(var a=0,s=(l=e[r]).length;a<s;++a)n.push(l[a].slice(0));else{var l;for(a=(l=e[~r]).length-1;a>=0;--a)n.push(l[a].slice(0))}return n}function FZ(t,e,r,n,i,o,a){for(var s=t.geometries,l=[],u=0,c=s.length;u<c;++u)l[u]=DZ(s[u],e,r,n,i,o,a);return l}function DZ(t,e,r,n,i,o,a){var s=null,l=t.type;if(l){var u=kZ[l];s=LI(s="Point"===l||"MultiPoint"===l?u(t,r,n):u(t,e),!1,a)}var c=new Wc({geometry:s});void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function GZ(t,e,r){for(var n=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,UZ(s,e,r)}}function UZ(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}var BZ=AZ,zZ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VZ=1,qZ=2,YZ=3,WZ=4,XZ=5,HZ=6,ZZ=7,KZ=15,JZ=16,$Z=17,QZ=function(){function t(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_=Io}return t.prototype.readUint8=function(){return this.view_.getUint8(this.pos_++)},t.prototype.readUint32=function(t){return this.view_.getUint32((this.pos_+=4)-4,void 0!==t?t:this.isLittleEndian_)},t.prototype.readDouble=function(t){return this.view_.getFloat64((this.pos_+=8)-8,void 0!==t?t:this.isLittleEndian_)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),e=[],r=0;r<t;r++)e.push(this.readPoint());return e},t.prototype.readPolygon=function(){for(var t=this.readUint32(),e=[],r=0;r<t;r++)e.push(this.readLineString());return e},t.prototype.readWkbHeader=function(t){var e=this.readUint8()>0,r=this.readUint32(e),n=Math.floor((268435455&r)/1e3),i=Boolean(2147483648&r)||1===n||3===n,o=Boolean(1073741824&r)||2===n||3===n,a=Boolean(536870912&r),s=(268435455&r)%1e3,l=["XY",i?"Z":"",o?"M":""].join(""),u=a?this.readUint32(e):null;if(void 0!==t&&t!==s)throw new Error("Unexpected WKB geometry type "+s);if(this.initialized_){if(this.isLittleEndian_!==e)throw new Error("Inconsistent endian");if(this.layout_!==l)throw new Error("Inconsistent geometry layout");if(u&&this.srid_!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=e,this.hasZ_=i,this.hasM_=o,this.layout_=l,this.srid_=u,this.initialized_=!0;return s},t.prototype.readWkbPayload=function(t){switch(t){case VZ:return this.readPoint();case qZ:return this.readLineString();case YZ:case $Z:return this.readPolygon();case WZ:return this.readMultiPoint();case XZ:return this.readMultiLineString();case HZ:case KZ:case JZ:return this.readMultiPolygon();case ZZ:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,e){for(var r=this.readUint32(),n=[],i=0;i<r;i++){var o=t.call(this,e);o&&n.push(o)}return n},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,VZ)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,qZ)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,YZ)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case VZ:return new aa(e,this.layout_);case qZ:return new Qc(e,this.layout_);case YZ:case $Z:return new Oa(e,this.layout_);case WZ:return new Hc(e,this.layout_);case XZ:return new eh(e,this.layout_);case HZ:case KZ:case JZ:return new ih(e,this.layout_);case ZZ:return new hh(e);default:return null}},t.prototype.getSrid=function(){return this.srid_},t}(),tK=function(){function t(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=!1!==t.littleEndian,this.isEWKB_=!1!==t.ewkb,this.writeQueue_=[],this.nodata_=Object(ii.a)({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.writeQueue_.push([1,t])},t.prototype.writeUint32=function(t){this.writeQueue_.push([4,t])},t.prototype.writeDouble=function(t){this.writeQueue_.push([8,t])},t.prototype.writePoint=function(t,e){for(var r=ii.a.apply(null,e.split("").map((function(e,r){var n;return(n={})[e]=t[r],n}))),n=0,i=this.layout_;n<i.length;n++){var o=i[n];this.writeDouble(o in r?r[o]:this.nodata_[o])}},t.prototype.writeLineString=function(t,e){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writePoint(t[r],e)},t.prototype.writePolygon=function(t,e){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeLineString(t[r],e)},t.prototype.writeWkbHeader=function(t,e){t%=1e3,this.layout_.indexOf("Z")>=0&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.indexOf("M")>=0&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e)},t.prototype.writeMultiPoint=function(t,e){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],e)},t.prototype.writeMultiLineString=function(t,e){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],e)},t.prototype.writeMultiPolygon=function(t,e){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],e)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var e=0;e<t.length;e++)this.writeGeometry(t[e])},t.prototype.findMinimumLayout=function(t,e){void 0===e&&(e=Po);var r,n;if(t instanceof Do)return(r=t.getLayout())===(n=e)?r:r===Po?n:n===Po?r:Io;if(t instanceof hh)for(var i=t.getGeometriesArray(),o=0;o<i.length&&e!==Io;o++)e=this.findMinimumLayout(i[o],e);return e},t.prototype.writeGeometry=function(t,e){var r,n,i=((r={})[fo.a.POINT]=VZ,r[fo.a.LINE_STRING]=qZ,r[fo.a.POLYGON]=YZ,r[fo.a.MULTI_POINT]=WZ,r[fo.a.MULTI_LINE_STRING]=XZ,r[fo.a.MULTI_POLYGON]=HZ,r[fo.a.GEOMETRY_COLLECTION]=ZZ,r),o=t.getType(),a=i[o];if(!a)throw new Error("GeometryType "+o+" is not supported");(this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(a,e),t instanceof Do)?((n={})[fo.a.POINT]=this.writePoint,n[fo.a.LINE_STRING]=this.writeLineString,n[fo.a.POLYGON]=this.writePolygon,n[fo.a.MULTI_POINT]=this.writeMultiPoint,n[fo.a.MULTI_LINE_STRING]=this.writeMultiLineString,n[fo.a.MULTI_POLYGON]=this.writeMultiPolygon,n)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof hh&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,e=this.writeQueue_.reduce((function(t,e){return t+e[0]}),0),r=new ArrayBuffer(e),n=new DataView(r),i=0;return this.writeQueue_.forEach((function(e){switch(e[0]){case 1:n.setUint8(i,e[1]);break;case 4:n.setUint32(i,e[1],t.isLittleEndian_);break;case 8:n.setFloat64(i,e[1],t.isLittleEndian_)}i+=e[0]})),r},t}();function eK(t){return"string"==typeof t?function(t){for(var e=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)e[r]=parseInt(t.substr(2*r,2),16);return new DataView(e.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var rK=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection=Boolean(n.splitCollection),r.viewCache_=null,r.hex_=!1!==n.hex,r.littleEndian_=!1!==n.littleEndian,r.ewkb_=!1!==n.ewkb,r.layout_=n.geometryLayout,r.nodataZ_=n.nodataZ||0,r.nodataM_=n.nodataM||0,r.srid_=n.srid,r}return zZ(e,t),e.prototype.getType=function(){return this.hex_?xg:vg},e.prototype.readFeature=function(t,e){return new Wc({geometry:this.readGeometry(t,e)})},e.prototype.readFeatures=function(t,e){var r=this.readGeometry(t,e);return(this.splitCollection&&r instanceof hh?r.getGeometriesArray():[r]).map((function(t){return new Wc({geometry:t})}))},e.prototype.readGeometry=function(t,e){var r=eK(t);if(!r)return null;var n=new QZ(r).readGeometry();this.viewCache_=r;var i=this.getReadOptions(t,e);return this.viewCache_=null,LI(n,!1,i)},e.prototype.readProjection=function(t){var e=this.viewCache_||eK(t);if(e){var r=new QZ(e);return r.readWkbHeader(),r.getSrid()&&Object(u.o)("EPSG:"+r.getSrid())||void 0}},e.prototype.writeFeature=function(t,e){return this.writeGeometry(t.getGeometry(),e)},e.prototype.writeFeatures=function(t,e){return this.writeGeometry(new hh(t.map((function(t){return t.getGeometry()}))),e)},e.prototype.writeGeometry=function(t,e){var r=this.adaptOptions(e),n=new tK({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}}),i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(!1!==this.srid_&&!Number.isInteger(this.srid_)){var o=r.dataProjection&&Object(u.o)(r.dataProjection);if(o){var a=o.getCode();0===a.indexOf("EPSG:")&&(i=Number(a.substring(5)))}}n.writeGeometry(LI(t,!0,r),i);var s=n.getBuffer();return this.hex_?function(t){var e=new Uint8Array(t);return Array.from(e.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(s):s},e}(RI),nK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iK=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new VI,r.layers_=n.layers?n.layers:null,r}return nK(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var i=0,o=t.childNodes.length;i<o;i++){var a=t.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var s=a,l=e[0],u=s.localName.replace("_layer","");if(!this.layers_||Object(h.f)(this.layers_,u)){var c=u+"_feature";l.featureType=c,l.featureNS=this.featureNS_;var f={};f[c]=v(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var p=T([l.featureNS,null],f);s.setAttribute("namespaceURI",this.featureNS_);var d=R([],p,s,e,this.gmlFormat_);d&&Object(h.c)(n,d)}}}if("FeatureCollection"==r){var g=R([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);g&&(n=g)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&Object(ii.a)(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(AI),oK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aK="addfeatures",sK=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.features=n,o.file=r,o.projection=i,o}return oK(e,t),e}(Ni.a),lK=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{handleEvent:Dn.b})||this).on,r.once,r.un,r.readAsBuffer_=!1,r.formats_=[];for(var i=n.formatConstructors?n.formatConstructors:[],o=0,a=i.length;o<a;++o){var s=i[o];"function"==typeof s&&(s=new s),r.formats_.push(s),r.readAsBuffer_=r.readAsBuffer_||s.getType()===vg}return r.projection_=n.projection?Object(u.o)(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return oK(e,t),e.prototype.handleResult_=function(t,e){var r,n=e.target.result,i=this.getMap(),o=this.projection_;o||(o=i.getView().getProjection());for(var a=this.formats_,s=0,l=a.length;s<l;++s){var u=a[s],c=n;this.readAsBuffer_&&u.getType()!==vg&&(void 0===r&&(r=(new TextDecoder).decode(n)),c=r);var h=this.tryReadFeatures_(u,c,{featureProjection:o});if(h&&h.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(h)),this.dispatchEvent(new sK(aK,t,h,o));break}}},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(Ci.a)(e,Di.a.DROP,this.handleDrop,this),Object(Ci.a)(e,Di.a.DRAGENTER,this.handleStop,this),Object(Ci.a)(e,Di.a.DRAGOVER,this.handleStop,this),Object(Ci.a)(e,Di.a.DROP,this.handleStop,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(Ci.c),this.dropListenKeys_=null)},e.prototype.handleDrop=function(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(Di.a.LOAD,this.handleResult_.bind(this,i)),this.readAsBuffer_?o.readAsArrayBuffer(i):o.readAsText(i)}},e.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},e}(Ja),uK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cK=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).condition_=n.condition?n.condition:ps,r.lastAngle_=void 0,r.lastMagnitude_=void 0,r.lastScaleDelta_=0,r.duration_=void 0!==n.duration?n.duration:400,r}return uK(e,t),e.prototype.handleDragEvent=function(t){if(gs(t)){var e=t.map,r=e.getSize(),n=t.pixel,i=n[0]-r[0]/2,o=r[1]/2-n[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),l=e.getView();if(void 0!==this.lastAngle_){var u=this.lastAngle_-a;l.adjustRotationInternal(u)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!gs(t))return!0;var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!gs(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(rs),hK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fK="Point",pK="LineString",dK="Polygon",gK="Circle",yK="drawstart",mK="drawend",_K="drawabort",vK=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return hK(e,t),e}(Ni.a);var bK=function(t){function e(e){var r=this,n=e;n.stopDown||(n.stopDown=Dn.a),(r=t.call(this,n)||this).on,r.once,r.un,r.shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.pointerType_,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(t){switch(t){case fo.a.POINT:case fo.a.MULTI_POINT:return fK;case fo.a.LINE_STRING:case fo.a.MULTI_LINE_STRING:return pK;case fo.a.POLYGON:case fo.a.MULTI_POLYGON:return dK;case fo.a.CIRCLE:return gK;default:throw new Error("Invalid type: "+t)}}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:r.mode_===dK?3:2,r.maxPoints_=r.mode_===gK?2:e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:Dn.b;var i,o=e.geometryFunction;if(!o){var a,s=r.mode_;if(s===gK)o=function(t,e,r){var n=e||new dh([NaN,NaN]),i=Object(u.l)(t[0],r),o=Object(Wn.l)(i,Object(u.l)(t[t.length-1],r));n.setCenterAndRadius(i,Math.sqrt(o));var a=Object(u.s)();return a&&n.transform(r,a),n};else s===fK?a=aa:s===pK?a=Qc:s===dK&&(a=Oa),o=function(t,e,r){return e?s===dK?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new a(t),e}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new jv({source:new Tg({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=Ky(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:fs,r.freehandCondition_,e.freehand?r.freehandCondition_=ls:r.freehandCondition_=e.freehandCondition?e.freehandCondition:ps,r.addChangeListener(Ha,r.updateState_),r}return hK(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===Di.a.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==fK&&this.freehandCondition_(e);var r=e.type===Zi.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===Zi.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===Zi.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Zi.POINTERDOWN?n=!1:r&&this.getPointerCount()<2?(n=e.type===Zi.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===Zi.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Zi.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Hi(Zi.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():this.freehand_||r&&this.mode_!==fK||(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_],i=this.mode_;if(i===fK)e=!0;else if(i===gK)e=2===this.sketchCoords_.length;else if(i===pK)r=this.sketchCoords_.length>this.minPoints_;else if(i===dK){var o=this.sketchCoords_;r=o[0].length>this.minPoints_,n=[o[0][0],o[0][o[0].length-2]]}if(r)for(var a=this.getMap(),s=0,l=n.length;s<l;s++){var u=n[s],c=a.getPixelFromCoordinate(u),h=t[0]-c[0],f=t[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+f*f)<=p){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Wc(new aa(t)),this.updateSketchFeatures_())},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new Wc);var e=t.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),r.changed()):(r=new Qc(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(r))},e.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===fK?this.sketchCoords_=t.slice():this.mode_===dK?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Wc(new Qc(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new Wc,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new vK(yK,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection();(this.mode_===fK?r=this.sketchCoords_:this.mode_===dK?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=t[0],r[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(t);if(i.getType()===fo.a.POLYGON&&this.mode_!==dK)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;o===pK||o===gK?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,i)):o===dK&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_;if(n===pK||n===gK){if((t=this.sketchCoords_).splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();var i=this.finishCoordinate_.slice();t[t.length-1]=i,this.createOrUpdateSketchPoint_(i)}this.geometryFunction_(t,e,r),e.getType()===fo.a.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(n===dK){(t=this.sketchCoords_[0]).splice(-2,1);var o=this.sketchLine_.getGeometry();if(t.length>=2){i=t[t.length-2].slice();t[t.length-1]=i,this.createOrUpdateSketchPoint_(i)}o.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,r)}1===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===pK?(e.pop(),this.geometryFunction_(e,r,n)):this.mode_===dK&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),this.type_===fo.a.MULTI_POINT?t.setGeometry(new Hc([e])):this.type_===fo.a.MULTI_LINE_STRING?t.setGeometry(new eh([e])):this.type_===fo.a.MULTI_POLYGON&&t.setGeometry(new ih([e])),this.dispatchEvent(new vK(mK,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new vK(_K,t))},e.prototype.appendCoordinates=function(t){var e,r=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(t[0]),r===pK||r===gK)e=this.sketchCoords_;else{if(r!==dK)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&e.shift(),e.pop();for(var i=0;i<t.length;i++)this.addToDrawing_(t[i]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new Wc(new aa(r)),this.updateSketchFeatures_(),this.dispatchEvent(new vK(yK,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(rs),xK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wK="extentchanged",EK=function(t){function e(e){var r=t.call(this,wK)||this;return r.extent=e,r}return xK(e,t),e}(Ni.a);function OK(){var t=Ky();return function(e,r){return t[fo.a.POINT]}}function SK(t){return function(e){return Object(mt.c)([t,e])}}function IK(t,e){return t[0]==e[0]?function(r){return Object(mt.c)([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return Object(mt.c)([t,[e[0],r[1]]])}:null}var CK=function(t){function e(e){var r,n=this,i=e||{};return(n=t.call(this,i)||this).on,n.once,n.un,n.condition_=i.condition?i.condition:ls,n.extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new jv({source:new Tg({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(r=Ky(),function(t,e){return r[fo.a.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new jv({source:new Tg({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:OK(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return xK(e,t),e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);i.sort((function(t,e){return Object(Wn.m)(r,t)-Object(Wn.m)(r,e)}));var o=i[0],a=Object(Wn.c)(r,o),s=e.getPixelFromCoordinateInternal(a);if(Object(Wn.f)(t,s)<=this.pixelTolerance_){var l=e.getPixelFromCoordinateInternal(o[0]),u=e.getPixelFromCoordinateInternal(o[1]),c=Object(Wn.l)(s,l),h=Object(Wn.l)(s,u),f=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,n=this.snapToVertex_(e,r);n||(n=r.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Ia(t)):e.setGeometry(void 0):(e=new Wc(t?Ia(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new Wc(new aa(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.originalEvent||!this.condition_(e)||(e.type!=Zi.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,n=this.getExtentInternal(),i=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=SK(o(i)):null!==a?this.pointerHandler_=IK(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=IK(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=SK(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==Object(mt.u)(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return Object(u.x)(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new EK(this.extent_))},e}(rs);function TK(t){return(TK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var PK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RK=[0,0,0,0],LK=[],MK="modifystart",NK="modifyend",AK=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.mapBrowserEvent=n,i}return PK(e,t),e}(Ni.a);function kK(t,e){return t.index-e.index}function jK(t,e,r){var n=e.geometry;if(n.getType()===fo.a.CIRCLE){var i=n;if(1===e.index){var o=Object(u.s)();o&&(i=i.clone().transform(o,r));var a=Object(Wn.l)(i.getCenter(),Object(u.l)(t,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var l=Object(u.l)(t,r);return LK[0]=Object(u.l)(e.segment[0],r),LK[1]=Object(u.l)(e.segment[1],r),Object(Wn.m)(l,LK)}function FK(t,e,r){var n=e.geometry;if(n.getType()===fo.a.CIRCLE&&1===e.index){var i=n,o=Object(u.s)();return o&&(i=i.clone().transform(o,r)),Object(u.w)(i.getClosestPoint(Object(u.l)(t,r)),r)}var a=Object(u.l)(t,r);return LK[0]=Object(u.l)(e.segment[0],r),LK[1]=Object(u.l)(e.segment[1],r),Object(u.w)(Object(Wn.c)(a,LK),r)}var DK=function(t){function e(e){var r,n,i=t.call(this,e)||this;if(i.on,i.once,i.un,i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:ys,i.defaultDeleteCondition_=function(t){return is(t)&&hs(t)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:ls,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.featuresBeingModified_=null,i.rBush_=new ug,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new jv({source:new Tg({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(r=Ky(),function(t,e){return r[fo.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,i.hitDetection_=null,e.features?n=e.features:e.source&&(i.source_=e.source,n=new Fi(i.source_.getFeatures()),i.source_.addEventListener(hg,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(dg,i.handleSourceRemove_.bind(i))),!n)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(i.hitDetection_=e.hitDetection),i.features_=n,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(Li,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(Mi,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i.delta_=[0,0],i.snapToPointer_=void 0===e.snapToPointer?!i.hitDetection_:e.snapToPointer,i}return PK(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var r=this.SEGMENT_WRITERS_[e.getType()];r&&r(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(Di.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Fi;for(var r=this.featuresBeingModified_.getArray(),n=0,i=e.length;n<i;++n)for(var o=e[n],a=0,s=o.length;a<s;++a){var l=o[a].feature;l&&-1===r.indexOf(l)&&this.featuresBeingModified_.push(l)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new AK(MK,this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Di.a.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach((function(e){t===e.feature&&r.push(e)}));for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Object(mt.c)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert(Object(mt.c)(l),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[n],index:a,segment:l};this.rBush_.insert(Object(mt.c)(l),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u){var h=l.slice(u,u+2),f={feature:t,geometry:e,depth:[a,n],index:u,segment:h};this.rBush_.insert(Object(mt.c)(h),f)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[r,r]},i={feature:t,geometry:e,index:1,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert(Object(mt.n)(r),n);var a=e,s=Object(u.s)();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=Ca(a=a.clone().transform(s,l)).transform(l,s)}this.rBush_.insert(a.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}},e.prototype.createOrUpdateVertexFeature_=function(t,e,r){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(t):(n=new Wc(new aa(t)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n));return n.set("features",e),n.set("geometries",r),n},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Zi.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=Zi.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Zi.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],r=[],n=[],i=0,o=this.dragSegments_.length;i<o;++i){var a=this.dragSegments_[i],s=a[0],l=s.feature;-1===r.indexOf(l)&&r.push(l);var c=s.geometry;-1===n.indexOf(c)&&n.push(c);for(var h=s.depth,f=void 0,p=s.segment,d=a[1];e.length<c.getStride();)e.push(p[d][e.length]);switch(c.getType()){case fo.a.POINT:f=e,p[0]=e,p[1]=e;break;case fo.a.MULTI_POINT:(f=c.getCoordinates())[s.index]=e,p[0]=e,p[1]=e;break;case fo.a.LINE_STRING:(f=c.getCoordinates())[s.index+d]=e,p[d]=e;break;case fo.a.MULTI_LINE_STRING:case fo.a.POLYGON:(f=c.getCoordinates())[h[0]][s.index+d]=e,p[d]=e;break;case fo.a.MULTI_POLYGON:(f=c.getCoordinates())[h[1]][h[0]][s.index+d]=e,p[d]=e;break;case fo.a.CIRCLE:if(p[0]=e,p[1]=e,0===s.index)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var g=t.map.getView().getProjection(),y=Object(Wn.f)(Object(u.l)(c.getCenter(),g),Object(u.l)(e,g)),m=Object(u.s)();if(m){var _=c.clone().transform(m,g);_.setRadius(y),y=_.transform(g,m).getRadius()}c.setRadius(y),this.changingFeature_=!1}}f&&this.setGeometryCoordinates_(c,f)}this.createOrUpdateVertexFeature_(e,r,n)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var n=t.map.getView().getProjection(),i=[],o=r.getGeometry().getCoordinates(),a=Object(mt.c)([o]),s=this.rBush_.getInExtent(a),l={};s.sort(kK);for(var u=0,c=s.length;u<c;++u){var h=s[u],f=h.segment,p=Object(Gn.c)(h.geometry),d=h.depth;if(d&&(p+="-"+d.join("-")),l[p]||(l[p]=new Array(2)),h.geometry.getType()!==fo.a.CIRCLE||1!==h.index)if(!Object(Wn.g)(f[0],o)||l[p][0])if(!Object(Wn.g)(f[1],o)||l[p][1])Object(Gn.c)(f)in this.vertexSegments_&&!l[p][0]&&!l[p][1]&&this.insertVertexCondition_(t)&&i.push(h);else{if((h.geometry.getType()===fo.a.LINE_STRING||h.geometry.getType()===fo.a.MULTI_LINE_STRING)&&l[p][0]&&0===l[p][0].index)continue;this.dragSegments_.push([h,1]),l[p][1]=h}else this.dragSegments_.push([h,0]),l[p][0]=h;else{var g=FK(e,h,n);Object(Wn.g)(g,o)&&!l[p][0]&&(this.dragSegments_.push([h,0]),l[p][0]=h)}}i.length&&this.willModifyFeatures_(t,[i]);for(var y=i.length-1;y>=0;--y)this.insertVertex_(i[y],o)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()===fo.a.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Object(mt.n)(i),o);var s=n,l=Object(u.s)();if(l){var c=t.map.getView().getProjection();s=Ca(s=s.clone().transform(l,c)).transform(c,l)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(Object(mt.c)(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new AK(NK,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,r){var n,i,o=this,a=r||e.getCoordinateFromPixel(t),s=e.getView().getProjection();if(this.hitDetection_){var l="object"===TK(this.hitDetection_)?function(t){return t===o.hitDetection_}:void 0;e.forEachFeatureAtPixel(t,(function(t,e,r){if((r=r||t.getGeometry()).getType()===fo.a.POINT&&Object(h.f)(o.features_.getArray(),t)){i=r;var a=r.getFlatCoordinates().slice(0,2);n=[{feature:t,geometry:r,segment:[a,a]}]}return!0}),{layerFilter:l})}if(!n){var c=Object(u.m)(Object(mt.n)(a,RK),s),f=e.getView().getResolution()*this.pixelTolerance_,p=Object(u.x)(Object(mt.d)(c,f,RK),s);n=this.rBush_.getInExtent(p)}if(n&&n.length>0){var d=n.sort((function(t,e){return jK(a,t,s)-jK(a,e,s)}))[0],g=d.segment,y=FK(a,d,s),m=e.getPixelFromCoordinate(y),_=Object(Wn.f)(t,m);if(i||_<=this.pixelTolerance_){var v={};if(v[Object(Gn.c)(g)]=!0,this.snapToPointer_||(this.delta_[0]=y[0]-a[0],this.delta_[1]=y[1]-a[1]),d.geometry.getType()===fo.a.CIRCLE&&1===d.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(y,[d.feature],[d.geometry]);else{var b=e.getPixelFromCoordinate(g[0]),x=e.getPixelFromCoordinate(g[1]),w=Object(Wn.l)(m,b),E=Object(Wn.l)(m,x);_=Math.sqrt(Math.min(w,E)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(y=w>E?g[1]:g[0]),this.createOrUpdateVertexFeature_(y,[d.feature],[d.geometry]);var O={};O[Object(Gn.c)(d.geometry)]=!0;for(var S=1,I=n.length;S<I;++S){var C=n[S].segment;if(!(Object(Wn.g)(g[0],C[0])&&Object(Wn.g)(g[1],C[1])||Object(Wn.g)(g[0],C[1])&&Object(Wn.g)(g[1],C[0])))break;var T=Object(Gn.c)(n[S].geometry);T in O||(O[T]=!0,v[Object(Gn.c)(C)]=!0)}}return void(this.vertexSegments_=v)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case fo.a.MULTI_LINE_STRING:case fo.a.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case fo.a.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case fo.a.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,s,a,1);var u={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};l.insert(Object(mt.c)(u.segment),u),this.dragSegments_.push([u,1]);var c={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};l.insert(Object(mt.c)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Zi.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new AK(NK,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1},e.prototype.removeVertex_=function(){var t,e,r,n,i,o,a,s,l,u,c,h=this.dragSegments_,f={},p=!1;for(i=h.length-1;i>=0;--i)u=(r=h[i])[0],c=Object(Gn.c)(u.feature),u.depth&&(c+="-"+u.depth.join("-")),c in f||(f[c]={}),0===r[1]?(f[c].right=u,f[c].index=u.index):1==r[1]&&(f[c].left=u,f[c].index=u.index+1);for(c in f){switch(l=f[c].right,a=f[c].left,(s=(o=f[c].index)-1)<0&&(s=0),t=e=(n=(u=void 0!==a?a:l).geometry).getCoordinates(),p=!1,n.getType()){case fo.a.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(o,1),p=!0);break;case fo.a.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case fo.a.MULTI_POLYGON:t=t[u.depth[1]];case fo.a.POLYGON:(t=t[u.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.setGeometryCoordinates_(n,e);var d=[];if(void 0!==a&&(this.rBush_.remove(a),d.push(a.segment[0])),void 0!==l&&(this.rBush_.remove(l),d.push(l.segment[1])),void 0!==a&&void 0!==l){var g={depth:u.depth,feature:u.feature,geometry:u.geometry,index:s,segment:d};this.rBush_.insert(Object(mt.c)(g.segment),g)}this.updateSegmentIndices_(n,o,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===r||void 0===i.depth||Object(h.b)(i.depth,r))&&i.index>e&&(i.index+=n)}))},e}(rs),GK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function UK(t){return t.feature?t.feature:t.element?t.element:void 0}var BK=[],zK=function(t){function e(e){var r=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=Dn.b),i.stopDown||(i.stopDown=Dn.a),(r=t.call(this,i)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new ug,r.GEOMETRY_SEGMENTERS_={Point:r.segmentPointGemetry_.bind(r),LineString:r.segmentLineStringGemetry_.bind(r),LinearRing:r.segmentLineStringGemetry_.bind(r),Polygon:r.segmentPolygonGemetry_.bind(r),MultiPoint:r.segmentMultiPointGemetry_.bind(r),MultiLineString:r.segmentMultiLineStringGemetry_.bind(r),MultiPolygon:r.segmentMultiPolygonGemetry_.bind(r),GeometryCollection:r.segmentGeometryCollectionGemetry_.bind(r),Circle:r.segmentCircleGemetry_.bind(r)},r}return GK(e,t),e.prototype.addFeature=function(t,e){var r=void 0===e||e,n=Object(Gn.c)(t),i=t.getGeometry();if(i){var o=this.GEOMETRY_SEGMENTERS_[i.getType()];if(o){this.indexedFeaturesExtents_[n]=i.getExtent(Object(mt.k)());var a=[];if(o(a,i),1===a.length)this.rBush_.insert(Object(mt.c)(a[0]),{feature:t,segment:a[0]});else if(a.length>1){var s=a.map((function(t){return Object(mt.c)(t)})),l=a.map((function(e){return{feature:t,segment:e}}));this.rBush_.load(s,l)}}}r&&(this.featureChangeListenerKeys_[n]=Object(Ci.a)(t,Di.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=UK(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=UK(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=Object(Gn.c)(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(ii.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,n=Object(Gn.c)(t),i=this.indexedFeaturesExtents_[n];if(i){var o=this.rBush_,a=[];o.forEachInExtent(i,(function(e){t===e.feature&&a.push(e)}));for(var s=a.length-1;s>=0;--s)o.remove(a[s])}r&&(Object(Ci.c)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(Ci.c),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(Object(Ci.a)(this.features_,Li,this.handleFeatureAdd_,this),Object(Ci.a)(this.features_,Mi,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(Ci.a)(this.source_,hg,this.handleFeatureAdd_,this),Object(Ci.a)(this.source_,dg,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var n=r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i=r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(mt.c)([n,i]),a=this.rBush_.getInExtent(o),s=a.length;if(0===s)return null;var l,c=r.getView().getProjection(),h=Object(u.l)(e,c),f=1/0,p=this.pixelTolerance_*this.pixelTolerance_,d=function(){if(l){var e=r.getPixelFromCoordinate(l);if(Object(Wn.l)(t,e)<=p)return{vertex:l,vertexPixel:[Math.round(e[0]),Math.round(e[1])]}}return null};if(this.vertex_){for(var g=0;g<s;++g){(y=a[g]).feature.getGeometry().getType()!==fo.a.CIRCLE&&y.segment.forEach((function(t){var e=Object(u.l)(t,c),r=Object(Wn.l)(h,e);r<f&&(l=t,f=r)}))}if(O=d())return O}if(this.edge_){for(g=0;g<s;++g){var y,m=null;if((y=a[g]).feature.getGeometry().getType()===fo.a.CIRCLE){var _=y.feature.getGeometry(),v=Object(u.s)();v&&(_=_.clone().transform(v,c)),m=Object(u.w)(Object(Wn.b)(h,_),c)}else{var b=y.segment,x=b[0],w=b[1];w&&(BK[0]=Object(u.l)(x,c),BK[1]=Object(u.l)(w,c),m=Object(Wn.c)(h,BK))}if(m){var E=Object(Wn.l)(h,m);E<f&&(l=m,f=E)}}var O;if(O=d())return O}return null},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.segmentCircleGemetry_=function(t,e){var r=this.getMap().getView().getProjection(),n=e,i=Object(u.s)();i&&(n=n.clone().transform(i,r));var o=Ca(n);i&&o.transform(r,i);for(var a=o.getCoordinates()[0],s=0,l=a.length-1;s<l;++s)t.push(a.slice(s,s+2))},e.prototype.segmentGeometryCollectionGemetry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=this.GEOMETRY_SEGMENTERS_[r[n].getType()];i&&i(t,r[n])}},e.prototype.segmentLineStringGemetry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n)t.push(r.slice(n,n+2))},e.prototype.segmentMultiLineStringGemetry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a)t.push(o.slice(a,a+2))},e.prototype.segmentMultiPointGemetry_=function(t,e){e.getCoordinates().forEach((function(e){t.push([e])}))},e.prototype.segmentMultiPolygonGemetry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u)t.push(l.slice(u,u+2))},e.prototype.segmentPointGemetry_=function(t,e){t.push([e.getCoordinates()])},e.prototype.segmentPolygonGemetry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a)t.push(o.slice(a,a+2))},e}(rs),VK=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qK="translatestart",YK="translating",WK="translateend",XK=function(t){function e(e,r,n,i,o){var a=t.call(this,e)||this;return a.features=r,a.coordinate=n,a.startCoordinate=i,a.mapBrowserEvent=o,a}return VK(e,t),e}(Ni.a),HK=function(t){function e(e){var r,n=this,i=e||{};if((n=t.call(this,i)||this).on,n.once,n.un,n.lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==i.features?i.features:null,i.layers&&!n.features_)if("function"==typeof i.layers)r=i.layers;else{var o=i.layers;r=function(t){return Object(h.f)(o,t)}}else r=Dn.b;return n.layerFilter_=r,n.filter_=i.filter&&!n.features_?i.filter:Dn.b,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.condition_=i.condition?i.condition:ls,n.lastFeature_=null,n.addChangeListener(Ha,n.handleActiveChanged_),n}return VK(e,t),e.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new Fi([this.lastFeature_]);return this.dispatchEvent(new XK(qK,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new Fi([this.lastFeature_]);return this.dispatchEvent(new XK(WK,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],i=this.features_||new Fi([this.lastFeature_]);i.forEach((function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new XK(YK,i,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||Object(h.f)(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(rs),ZK=r(84),KK=r(74);function JK(t,e,r){for(var n,i,o,a,s,l,u=[],c=t(0),h=t(1),f=e(c),p=e(h),d=[h,c],g=[p,f],y=[1,0],m={},_=1e5;--_>0&&y.length>0;)o=y.pop(),c=d.pop(),f=g.pop(),(l=o.toString())in m||(u.push(f[0],f[1]),m[l]=!0),a=y.pop(),h=d.pop(),p=g.pop(),i=e(n=t(s=(o+a)/2)),Object(mo.k)(i[0],i[1],f[0],f[1],p[0],p[1])<r?(u.push(p[0],p[1]),m[l=a.toString()]=!0):(y.push(a,s,s,o),g.push(p,i,i,f),d.push(h,n,n,c));return u}var $K=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QK=new Bg({color:"rgba(0,0,0,0.2)"}),tJ=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],eJ=function(t){function e(e){var r=this,n=e||{},i=Object(ii.a)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(r=t.call(this,i)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==n.targetSize?n.targetSize:100,r.maxLines_=void 0!==n.maxLines?n.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:QK,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,n.showLabels&&(r.lonLabelFormatter_=null==n.lonLabelFormatter?Wn.e.bind(r,"EW"):n.lonLabelFormatter,r.latLabelFormatter_=null==n.latLabelFormatter?Wn.e.bind(r,"NS"):n.latLabelFormatter,r.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,r.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,r.lonLabelStyleBase_=new $y({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new Yg({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new zg({color:"rgba(0,0,0,1)"}),stroke:new Bg({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(r),r.latLabelStyleBase_=new $y({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new Yg({font:"12px Calibri,sans-serif",textAlign:"right",fill:new zg({color:"rgba(0,0,0,1)"}),stroke:new Bg({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener($n.a.POSTRENDER,r.drawLabels_.bind(r))),r.intervals_=void 0!==n.intervals?n.intervals:tJ,r.setSource(new Tg({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new Fi,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),r.featurePool_=[],r.lineStyle_=new $y({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.renderedResolution_=null,r.setRenderOrder(null),r}return $K(e,t),e.prototype.strategyFunction=function(t,e){var r=t.slice();return this.projection_&&this.getSource().getWrapX()&&Object(mt.L)(r,this.projection_),this.loadedExtent_&&(Object(mt.b)(this.loadedExtent_,r,e)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]},e.prototype.loaderFunction=function(t,e,r){this.loadedExtent_=t;var n=this.getSource(),i=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=Object(mt.B)(i,t);if(!(this.renderedExtent_&&Object(mt.p)(this.renderedExtent_,o)&&this.renderedResolution_===e||(this.renderedExtent_=o,this.renderedResolution_=e,Object(mt.I)(o)))){var a=Object(mt.x)(o),s=e*e/4;(!this.projection_||!Object(u.j)(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,e,s);var l,c=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);c>this.featurePool_.length;)l=new Wc,this.featurePool_.push(l);var h=n.getFeaturesCollection();h.clear();var f,p,d=0;for(f=0,p=this.meridians_.length;f<p;++f)(l=this.featurePool_[d++]).setGeometry(this.meridians_[f]),l.setStyle(this.lineStyle_),h.push(l);for(f=0,p=this.parallels_.length;f<p;++f)(l=this.featurePool_[d++]).setGeometry(this.parallels_[f]),l.setStyle(this.lineStyle_),h.push(l)}},e.prototype.addMeridian_=function(t,e,r,n,i,o){var a=this.getMeridian_(t,e,r,n,o);if(Object(mt.G)(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new aa([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,r,n,i,o){var a=this.getParallel_(t,e,r,n,o);if(Object(mt.G)(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new aa([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,n=t.frameState.size,i=t.frameState.extent,o=Object(mt.x)(i),a=i;if(e){var s=n[0]*r,l=n[1]*r;a=[o[0]-s/2,o[1]-l/2,o[0]+s/2,o[1]+l/2]}var u=0,c=0,h=this.latLabelPosition_<.5,f=this.projection_.getExtent(),p=Object(mt.F)(f);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(mt.h)(f,i)&&(u=Math.floor((i[0]-f[0])/p),c=Math.ceil((i[2]-f[2])/p),h=h!==Math.abs(e)>Math.PI/2);for(var d=wy(t),g=u;g<=c;++g){var y=this.meridians_.length+this.parallels_.length,m=void 0,_=void 0,v=void 0,b=void 0;if(this.meridiansLabels_)for(_=0,v=this.meridiansLabels_.length;_<v;++_){var x=this.meridians_[_];if(e||0!==g)(w=x.clone()).translate(g*p,0),w.rotate(-e,o),(b=this.getMeridianPoint_(w,a,_)).rotate(e,o);else b=this.getMeridianPoint_(x,i,_);(m=this.featurePool_[y++]).setGeometry(b),m.set("graticule_label",this.meridiansLabels_[_].text),d.drawFeature(m,this.lonLabelStyle_(m))}if(this.parallelsLabels_&&(g===u&&h||g===c&&!h))for(_=0,v=this.parallels_.length;_<v;++_){var w;x=this.parallels_[_];if(e||0!==g)(w=x.clone()).translate(g*p,0),w.rotate(-e,o),(b=this.getParallelPoint_(w,a,_)).rotate(e,o);else b=this.getParallelPoint_(x,i,_);(m=this.featurePool_[y++]).setGeometry(b),m.set("graticule_label",this.parallelsLabels_[_].text),d.drawFeature(m,this.latLabelStyle_(m))}}},e.prototype.createGraticule_=function(t,e,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=Object(mt.F)(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(mt.h)(a,t)&&(Object(mt.F)(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var l=[Object(mo.b)(e[0],this.minX_,this.maxX_),Object(mo.b)(e[1],this.minY_,this.maxY_)],u=this.toLonLatTransform_(l);isNaN(u[1])&&(u[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,h,f,p,d=Object(mo.b)(u[0],this.minLon_,this.maxLon_),g=Object(mo.b)(u[1],this.minLat_,this.maxLat_),y=this.maxLines_,m=t;o||(m=[Object(mo.b)(t[0],this.minX_,this.maxX_),Object(mo.b)(t[1],this.minY_,this.maxY_),Object(mo.b)(t[2],this.minX_,this.maxX_),Object(mo.b)(t[3],this.minY_,this.maxY_)]);var _=Object(mt.a)(m,this.toLonLatTransform_,void 0,8),v=_[3],b=_[2],x=_[1],w=_[0];if(o||(Object(mt.g)(m,this.bottomLeft_)&&(w=this.minLon_,x=this.minLat_),Object(mt.g)(m,this.bottomRight_)&&(b=this.maxLon_,x=this.minLat_),Object(mt.g)(m,this.topLeft_)&&(w=this.minLon_,v=this.maxLat_),Object(mt.g)(m,this.topRight_)&&(b=this.maxLon_,v=this.maxLat_),v=Object(mo.b)(v,g,this.maxLat_),b=Object(mo.b)(b,d,this.maxLon_),x=Object(mo.b)(x,this.minLat_,g),w=Object(mo.b)(w,this.minLon_,d)),d=Math.floor(d/i)*i,p=Object(mo.b)(d,this.minLon_,this.maxLon_),h=this.addMeridian_(p,x,v,n,t,0),c=0,o)for(;(p-=i)>=w&&c++<y;)h=this.addMeridian_(p,x,v,n,t,h);else for(;p!=this.minLon_&&c++<y;)p=Math.max(p-i,this.minLon_),h=this.addMeridian_(p,x,v,n,t,h);if(p=Object(mo.b)(d,this.minLon_,this.maxLon_),c=0,o)for(;(p+=i)<=b&&c++<y;)h=this.addMeridian_(p,x,v,n,t,h);else for(;p!=this.maxLon_&&c++<y;)p=Math.min(p+i,this.maxLon_),h=this.addMeridian_(p,x,v,n,t,h);for(this.meridians_.length=h,this.meridiansLabels_&&(this.meridiansLabels_.length=h),g=Math.floor(g/i)*i,f=Object(mo.b)(g,this.minLat_,this.maxLat_),h=this.addParallel_(f,w,b,n,t,0),c=0;f!=this.minLat_&&c++<y;)f=Math.max(f-i,this.minLat_),h=this.addParallel_(f,w,b,n,t,h);for(f=Object(mo.b)(g,this.minLat_,this.maxLat_),c=0;f!=this.maxLat_&&c++<y;)f=Math.min(f+i,this.maxLat_),h=this.addParallel_(f,w,b,n,t,h);this.parallels_.length=h,this.parallelsLabels_&&(this.parallelsLabels_.length=h)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,l=this.intervals_.length;s<l;++s){var u=Object(mo.b)(this.intervals_[s]/2,0,90),c=Object(mo.b)(r,-90+u,90-u);if(o[0]=e-u,o[1]=c-u,a[0]=e+u,a[1]=c+u,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,r,n,i){var o=function(t,e,r,n,i){var o=Object(u.o)("EPSG:4326");return JK((function(n){return[t,e+(r-e)*n]}),Object(u.q)(o,n),i)}(t,e,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates(Io,o),a.changed()):(a=new Qc(o,Io),this.meridians_[i]=a),a},e.prototype.getMeridianPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=1,o=n.length-1;n[i]>n[o]&&(i=o,o=1);var a=Math.max(e[1],n[i]),s=Math.min(e[3],n[o]),l=Object(mo.b)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),u=[n[i-1]+(n[o-1]-n[i-1])*(l-n[i])/(n[o]-n[i]),l],c=this.meridiansLabels_[r].geom;return c.setCoordinates(u),c},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,r,n,i){var o=function(t,e,r,n,i){var o=Object(u.o)("EPSG:4326");return JK((function(n){return[e+(r-e)*n,t]}),Object(u.q)(o,n),i)}(t,e,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates(Io,o),a.changed()):a=new Qc(o,Io),a},e.prototype.getParallelPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=0,o=n.length-2;n[i]>n[o]&&(i=o,o=0);var a=Math.max(e[0],n[i]),s=Math.min(e[2],n[o]),l=Object(mo.b)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),u=[l,n[i+1]+(n[o+1]-n[i+1])*(l-n[i])/(n[o]-n[i])],c=this.parallelsLabels_[r].geom;return c.setCoordinates(u),c},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=Object(u.o)("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];var n=Object(u.q)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var i=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,r){for(var o=r||2,a=n(t,e,o),s=0,l=a.length;s<l;s+=o)a[s]<i&&(a[s]+=360);return a}}this.fromLonLatTransform_=Object(u.q)(e,t);var o=Object(mt.a)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(mt.x)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(jv),rJ=r(65),nJ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iJ=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;if(void 0!==e.interpolate&&(n=e.interpolate),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:n,projection:Object(u.o)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:Qn.a.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)Object(rJ.a)(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var i=new XMLHttpRequest;i.addEventListener("load",r.onXHRLoad_.bind(r)),i.addEventListener("error",r.onXHRError_.bind(r)),i.open("GET",e.url),i.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Object(Ui.a)(!1,51);return r}return nJ(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=Object(u.o)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Object(u.r)(r,n);e=Object(mt.a)(t.bounds,i)}var o=Object(Ff.c)(n),a=t.minzoom||0,s=t.maxzoom||22,l=Object(Ff.b)({extent:o,maxZoom:s,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=Rf(t.tiles,l),void 0!==t.attribution&&!this.getAttributions()){var c=void 0!==e?e:o;this.setAttributions((function(e){return Object(mt.G)(c,e.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState(Qn.a.READY)},e.prototype.handleTileJSONError=function(){this.setState(Qn.a.ERROR)},e}(Uf),oJ=r(80),aJ=r.n(oJ),sJ=r(53),lJ="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};function uJ(t){return t*Math.PI/180}var cJ=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function hJ(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}var fJ,pJ=Array(256).join(" ");function dJ(t,e){if(e>=.05){for(var r="",n=t.split("\n"),i=pJ.slice(0,Math.round(e/.1)),o=0,a=n.length;o<a;++o)o>0&&(r+="\n"),r+=n[o].split("").join(i);return r}return t}function gJ(){return fJ||(fJ=hJ(1,1).getContext("2d")),fJ}function yJ(t,e){return gJ().measureText(t).width+(t.length-1)*e}var mJ={};function _J(t,e,r,n){if(-1!==t.indexOf("\n")){for(var i=t.split("\n"),o=[],a=0,s=i.length;a<s;++a)o.push(_J(i[a],e,r,n));return o.join("\n")}var l=r+","+e+","+t+","+n,u=mJ[l];if(!u){var c=t.split(" ");if(c.length>1){var h=gJ();h.font=e;var f=h.measureText("M").width*r,p="";for(o=[],a=0,s=c.length;a<s;++a){var d=c[a],g=p+(p?" ":"")+d;yJ(g,n)<=f?p=g:(p&&o.push(p),p=d)}p&&o.push(p);for(a=0,s=o.length;a<s&&s>1;++a){var y=o[a];if(yJ(y,n)<.35*f){var m=a>0?yJ(o[a-1],n):1/0,_=a<s-1?yJ(o[a+1],n):1/0;o.splice(a,1),s-=1,m<_?(o[a-1]+=" "+y,a-=1):o[a]=y+" "+o[a]}}for(a=0,s=o.length-1;a<s;++a){var v=o[a],b=o[a+1];if(yJ(v,n)>.7*f&&yJ(b,n)<.6*f){var x=v.split(" "),w=x.pop();yJ(w,n)<.2*f&&(o[a]=x.join(" "),o[a+1]=w+" "+b),s-=1}}u=o.join("\n")}else u=t;u=dJ(u,n),mJ[l]=u}return u}function vJ(t){return(vJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}yi&&Object(Ci.a)(yi,Di.a.CLEAR,(function(){mJ={}}));var bJ,xJ,wJ=sJ.e.isFunction,EJ=sJ.e.convertFunction,OJ=sJ.c.isExpression,SJ=sJ.c.createPropertyExpression,IJ={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},CJ={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},TJ={},PJ={zoom:0};function RJ(t,e,r,n,i,o){var a=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[a]||(o[a]={});var s=o[a];if(!s[r]){var l=(t[e]||TJ)[r],u=sJ.f["".concat(e,"_").concat(t.type)][r];void 0===l&&(l=u.default);var c=OJ(l);if(!c&&wJ(l)&&(l=EJ(l,u),c=!0),c){var h=function(t,e){var r=SJ(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return r.value}(l,u);s[r]=h.evaluate.bind(h)}else"color"==u.type&&(l=sJ.a.parse(l)),s[r]=function(){return l}}return PJ.zoom=n,s[r](PJ,i)}var LJ=!1;function MJ(t,e){if(t){if(!LJ&&(0===t.a||0===e))return;var r=t.a;return e=void 0===e?1:e,0===r?"transparent":"rgba("+Math.round(255*t.r/r)+","+Math.round(255*t.g/r)+","+Math.round(255*t.b/r)+","+r*e+")"}return t}var NJ=/^([^]*)\{(.*)\}([^]*)$/;function AJ(t,e){var r;do{if(r=t.match(NJ)){var n=e[r[2]]||"";t=r[1]+n+r[3]}}while(r);return t}var kJ=!1;var jJ=function(t,e,r,n,i,o,a){if(void 0===n&&(n=cJ),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var s,l;if(o)if("undefined"!=typeof Image){var u=new Image;u.crossOrigin="anonymous",u.onload=function(){s=u,l=[u.width,u.height],t.changed(),u.onload=null},u.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var c=self;c.postMessage({action:"loadImage",src:o}),c.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(s=t.data.image,l=[s.width,s.height])}))}for(var h,f=Object(sJ.b)(e.layers),p={},d=[],g={},y={},m={},_={},v=0,b=f.length;v<b;++v){var x=f[v],w=x.id;if("string"==typeof r&&x.source==r||-1!==r.indexOf(w)){var E=x["source-layer"];if(!h){h=x.source;var O=e.sources[h];if(!O)throw new Error('Source "'.concat(h,'" is not defined'));var S=O.type;if("vector"!==S&&"geojson"!==S)throw new Error('Source "'.concat(h,'" is not of type "vector" or "geojson", but "').concat(S,'"'))}var I=p[E];I||(I=[],p[E]=I),I.push({layer:x,index:v}),d.push(w)}}var C=new Bg,T=new zg,P=[],R=function(t,e){var r=t.getProperties(),o=p[r.layer];if(o){var u=n.indexOf(e);-1==u&&(u=function(t,e){for(var r=0,n=e.length;r<n;++r)if(e[r]<t&&r+1<n){var i=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(i)}return n-1}(e,n));for(var c,h=IJ[t.getGeometry().getType()],f={properties:r,type:h},d=-1,v=function(n,p){var v=o[n],b=v.layer,x=b.id,w=b.layout||TJ,E=b.paint||TJ;if("none"===w.visibility||"minzoom"in b&&u<b.minzoom||"maxzoom"in b&&u>=b.maxzoom)return"continue";var O=b.filter;if(!O||function(t,e,r,n,i){return i||console.warn("No filterCache provided to evaluateFilter()"),t in i||(i[t]=Object(sJ.d)(e).filter),PJ.zoom=n,i[t](PJ,r)}(x,O,f,u,_)){c=b;var S=void 0,I=void 0,R=void 0,L=void 0,M=void 0,N=void 0,A=v.index;if(3==h&&("fill"==b.type||"fill-extrusion"==b.type))if(I=RJ(b,"paint",b.type+"-opacity",u,f,m),b.type+"-pattern"in E){var k=RJ(b,"paint",b.type+"-pattern",u,f,m);if(k){var j="string"==typeof k?AJ(k,r):k.toString();if(s&&i&&i[j]){++d,(N=P[d])&&N.getFill()&&!N.getStroke()&&!N.getText()||(N=new $y({fill:new zg}),P[d]=N),R=N.getFill(),N.setZIndex(A);var F=y[dt=j+"."+I];if(!F){var D=i[j],G=hJ(D.width,D.height),U=G.getContext("2d");U.globalAlpha=I,U.drawImage(s,D.x,D.y,D.width,D.height,0,0,D.width,D.height),F=U.createPattern(G,"repeat"),y[dt]=F}R.setColor(F)}}}else S=MJ(RJ(b,"paint",b.type+"-color",u,f,m),I),b.type+"-outline-color"in E&&(M=MJ(RJ(b,"paint",b.type+"-outline-color",u,f,m),I)),M||(M=S),(S||M)&&(++d,(!(N=P[d])||S&&!N.getFill()||!S&&N.getFill()||M&&!N.getStroke()||!M&&N.getStroke()||N.getText())&&(N=new $y({fill:S?new zg:void 0,stroke:M?new Bg:void 0}),P[d]=N),S&&(R=N.getFill()).setColor(S),M&&((L=N.getStroke()).setColor(M),L.setWidth(.5)),N.setZIndex(A));if(1!=h&&"line"==b.type){S=!("line-pattern"in E)&&"line-color"in E?MJ(RJ(b,"paint","line-color",u,f,m),RJ(b,"paint","line-opacity",u,f,m)):void 0;var B=RJ(b,"paint","line-width",u,f,m);S&&B>0&&(++d,(N=P[d])&&N.getStroke()&&!N.getFill()&&!N.getText()||(N=new $y({stroke:new Bg}),P[d]=N),(L=N.getStroke()).setLineCap(RJ(b,"layout","line-cap",u,f,m)),L.setLineJoin(RJ(b,"layout","line-join",u,f,m)),L.setMiterLimit(RJ(b,"layout","line-miter-limit",u,f,m)),L.setColor(S),L.setWidth(B),L.setLineDash(E["line-dasharray"]?RJ(b,"paint","line-dasharray",u,f,m).map((function(t){return t*B})):null),N.setZIndex(A))}var z=!1,V=null,q=0,Y=void 0,W=void 0,X=void 0;if((1==h||2==h)&&"icon-image"in w){var H=RJ(b,"layout","icon-image",u,f,m);if(H){Y="string"==typeof H?AJ(H,r):H.toString();var Z=void 0;if(s&&i&&i[Y]){var K=RJ(b,"layout","icon-rotation-alignment",u,f,m);if(2==h){var J=t.getGeometry();if(J.getFlatMidpoint||J.getFlatMidpoints){var $=J.getExtent();if(Math.sqrt(Math.max(Math.pow(($[2]-$[0])/e,2),Math.pow(($[3]-$[1])/e,2)))>150){var Q="MultiLineString"===J.getType()?J.getFlatMidpoints():J.getFlatMidpoint();if(xJ||(xJ=new lh("Point",bJ=[NaN,NaN],[],{},null)),Z=xJ,bJ[0]=Q[0],bJ[1]=Q[1],"line"===(Mt=RJ(b,"layout","symbol-placement",u,f,m))&&"map"===K)for(var tt=J.getStride(),et=J.getFlatCoordinates(),rt=0,nt=et.length-tt;rt<nt;rt+=tt){var it=et[rt],ot=et[rt+1],at=et[rt+tt],st=et[rt+tt+1],lt=Math.min(it,at),ut=Math.min(ot,st),ct=Math.max(it,at),ht=Math.max(ot,st);if(Q[0]>=lt&&Q[0]<=ct&&Q[1]>=ut&&Q[1]<=ht){q=Math.atan2(ot-st,at-it);break}}}}}if(2!==h||Z){var ft=RJ(b,"layout","icon-size",u,f,m),pt=void 0!==E["icon-color"]?RJ(b,"paint","icon-color",u,f,m):null;if(!pt||0!==pt.a){var dt=Y+"."+ft;if(null!==pt&&(dt+="."+pt),!(W=g[dt])){var gt=i[Y];W=new iy({color:pt?[255*pt.r,255*pt.g,255*pt.b,pt.a]:void 0,img:s,imgSize:l,size:[gt.width,gt.height],offset:[gt.x,gt.y],rotateWithView:"map"===K,scale:ft/gt.pixelRatio,displacement:"icon-offset"in w?RJ(b,"layout","icon-offset",u,f,m).map((function(t){return-t*gt.pixelRatio})):void 0}),g[dt]=W}}W&&(++d,(N=P[d])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=new $y,P[d]=N),N.setGeometry(Z),W.setRotation(q+uJ(RJ(b,"layout","icon-rotate",u,f,m))),W.setOpacity(RJ(b,"paint","icon-opacity",u,f,m)),W.setAnchor(CJ[RJ(b,"layout","icon-anchor",u,f,m)]),N.setImage(W),V=N.getText(),N.setText(void 0),N.setZIndex(A),z=!0,X=!1)}else X=!0}}}if(1==h&&"circle"===b.type){++d,(N=P[d])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=new $y,P[d]=N);var yt="circle-radius"in E?RJ(b,"paint","circle-radius",u,f,m):5,mt=MJ(RJ(b,"paint","circle-stroke-color",u,f,m),RJ(b,"paint","circle-stroke-opacity",u,f,m)),_t=MJ(RJ(b,"paint","circle-color",u,f,m),RJ(b,"paint","circle-opacity",u,f,m)),vt=RJ(b,"paint","circle-stroke-width",u,f,m),bt=yt+"."+mt+"."+_t+"."+vt;(W=g[bt])||(W=new Yy({radius:yt,stroke:mt&&vt>0?new Bg({width:vt,color:mt}):void 0,fill:_t?new zg({color:_t}):void 0}),g[bt]=W),N.setImage(W),V=N.getText(),N.setText(void 0),N.setGeometry(void 0),N.setZIndex(A),z=!0}var xt,wt,Et,Ot,St=void 0,It=void 0;if("text-field"in w){wt=Math.round(RJ(b,"layout","text-size",u,f,m));var Ct=RJ(b,"layout","text-font",u,f,m);xt=RJ(b,"layout","text-line-height",u,f,m),It=aJ()(a?a(Ct):Ct,wt,xt),Et=RJ(b,"layout","text-letter-spacing",u,f,m),Ot=RJ(b,"layout","text-max-width",u,f,m);var Tt=RJ(b,"layout","text-field",u,f,m);St="object"===vJ(Tt)&&Tt.sections?1===Tt.sections.length?Tt.toString():Tt.sections.reduce((function(t,e,r){var n=e.fontStack?e.fontStack.split(","):Ct,i=aJ()(a?a(n):n,wt*(e.scale||1),xt),o=e.text;if("\n"===o)return t.push("\n",""),t;if(2!=h){for(var s=0,l=(o=_J(o,i,Ot,Et).split("\n")).length;s<l;++s)s>0&&t.push("\n",""),t.push(o[s],i);return t}t.push(dJ(o,Et),i)}),[]):AJ(Tt,r).trim(),I=RJ(b,"paint","text-opacity",u,f,m)}if(St&&I&&!X){z||(++d,(N=P[d])&&N.getText()&&!N.getFill()&&!N.getStroke()||(N=new $y,P[d]=N),N.setImage(void 0),N.setGeometry(void 0)),N.getText()||N.setText(V||new Yg({padding:[2,2,2,2]})),V=N.getText();var Pt=w["text-transform"];"uppercase"==Pt?St=Array.isArray(St)?St.map((function(t,e){return e%2?t:t.toUpperCase()})):St.toUpperCase():"lowercase"==Pt&&(St=Array.isArray(St)?St.map((function(t,e){return e%2?t:t.toLowerCase()})):St.toLowerCase());var Rt=Array.isArray(St)?St:2==h?dJ(St,Et):_J(St,It,Ot,Et);V.setText(Rt),V.setFont(It),V.setRotation(uJ(RJ(b,"layout","text-rotate",u,f,m)));var Lt=RJ(b,"layout","text-anchor",u,f,m),Mt=z||1==h?"point":RJ(b,"layout","symbol-placement",u,f,m);V.setPlacement(Mt),V.setOverflow("point"===Mt);var Nt=RJ(b,"paint","text-halo-width",u,f,m),At=RJ(b,"layout","text-offset",u,f,m),kt=RJ(b,"paint","text-translate",u,f,m),jt=0,Ft=0;if("point"==Mt){var Dt="center";-1!==Lt.indexOf("left")?(Dt="left",Ft=Nt):-1!==Lt.indexOf("right")&&(Dt="right",Ft=-Nt),V.setTextAlign(Dt);var Gt=RJ(b,"layout","text-rotation-alignment",u,f,m);V.setRotateWithView("map"==Gt)}else V.setMaxAngle(uJ(RJ(b,"layout","text-max-angle",u,f,m))*St.length/Rt.length),V.setTextAlign(),V.setRotateWithView(!1);var Ut="middle";0==Lt.indexOf("bottom")?(Ut="bottom",jt=-Nt-.5*(xt-1)*wt):0==Lt.indexOf("top")&&(Ut="top",jt=Nt+.5*(xt-1)*wt),V.setTextBaseline(Ut),V.setOffsetX(At[0]*wt+Ft+kt[0]),V.setOffsetY(At[1]*wt+jt+kt[1]),T.setColor(MJ(RJ(b,"paint","text-color",u,f,m),I)),V.setFill(T);var Bt=MJ(RJ(b,"paint","text-halo-color",u,f,m),I);if(Bt){C.setColor(Bt),Nt*=2;var zt=.5*wt;C.setWidth(Nt<=zt?Nt:zt),V.setStroke(C)}else V.setStroke(void 0);var Vt=RJ(b,"layout","text-padding",u,f,m),qt=V.getPadding();Vt!==qt[0]&&(qt[0]=Vt,qt[1]=Vt,qt[2]=Vt,qt[3]=Vt),N.setZIndex(A)}}},b=0,x=o.length;b<x;++b)v(b);return d>-1?(P.length=d+1,kJ&&("function"==typeof t.set?t.set("mapbox-layer",c):t.getProperties()["mapbox-layer"]=c),P):void 0}};return t.setStyle(R),t.set("mapbox-source",h),t.set("mapbox-layers",d),R},FJ=r(118);function DJ(t){return(DJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var GJ,UJ={},BJ=/font-family: ?([^;]*);/,zJ=/("|')/g;function VJ(t){if(!GJ){GJ={};for(var e=document.styleSheets,r=0,n=e.length;r<n;++r){var i=e[r];try{var o=i.rules||i.cssRules;if(o)for(var a=0,s=o.length;a<s;++a){var l=o[a];if(5==l.type){var u=l.cssText.match(BJ);GJ[u[1].replace(zJ,"")]=!0}}}catch(t){}}}return t in GJ}var qJ={},YJ=r.n(FJ).a.getNames();function WJ(t){var e=t.toString();if(e in qJ)return t;for(var r=t.map((function(t){var e=aJ()(t,1).split(" ");return[e.slice(3).join(" ").replace(/"/g,""),e[1]+e[0]]})),n=0,i=r.length;n<i;++n){var o=r[n],a=o[0];if(!VJ(a)&&-1!==YJ.indexOf(a)){var s="https://fonts.googleapis.com/css?family="+a.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return qJ[e]=!0,t}var XJ=/^(.*)(\?.*)$/;function HJ(t,e){return e&&0===t.indexOf(".")&&(t=e+t),t}function ZJ(t,e,r){var n=(t=HJ(t,e)).match(XJ);return n?n[1]+r+(n.length>2?n[2]:""):t+r}function KJ(t,e,r,n,i){return new Promise((function(o,a){if("object"!=DJ(e)&&(e=JSON.parse(e)),8!=e.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof jv||t instanceof Dj))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,u;function c(){u||e.sprite&&!s?u?(t.setStyle(u),o()):a(new Error("Something went wrong trying to apply style.")):(u=jJ(t,e,r,i,s,l,WJ),t.getStyle()?o():a(new Error("Nothing to show for source [".concat(r,"]"))))}if(e.sprite){var h=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",f=ZJ(e.sprite,n,h+".json");fetch(f,{credentials:"same-origin"}).then((function(t){return t.ok||""===h?t:(f=ZJ(e.sprite,n,".json"),fetch(f,{credentials:"same-origin"}))})).then((function(t){if(t.ok)return t.json();a(new Error("Problem fetching sprite from ".concat(f,": ").concat(t.statusText)))})).then((function(t){if(void 0===t)return a(new Error("No sprites found."));s=t,l=ZJ(e.sprite,n,h+".png"),c()})).catch((function(t){a(new Error("Sprites cannot be loaded: ".concat(f,": ").concat(t.message)))}))}else c()}))}var JJ={};function $J(t,e){var r={id:e.id,type:e.type},n={};function i(i){var o=e.layout||{},a=e.paint||{};r.paint=a;var s,l,u="function"==typeof t.getSource?t.getSource().getTileGrid().getZForResolution(i):t.getView().getZoom(),c="function"==typeof t.getTargetElement?t.getTargetElement():void 0;if(void 0!==a["background-color"]&&(s=RJ(r,"paint","background-color",u,JJ,n),c&&(c.style.background=sJ.a.parse(s).toString())),void 0!==a["background-opacity"]&&(l=RJ(r,"paint","background-opacity",u,JJ,n),c&&(c.style.opacity=l)),"none"!=o.visibility)return MJ(s,l);c&&(c.style.backgroundColor="",c.style.opacity="")}if("function"==typeof t.getTargetElement)t.getTargetElement()&&i(),t.on(["change:resolution","change:target"],i);else{if("function"!=typeof t.setBackground)throw new Error("Unable to apply background.");t.setBackground(i)}}function QJ(t){var e=t.bounds;if(e){var r=Object(u.k)([e[0],e[1]]),n=Object(u.k)([e[2],e[3]]);return[r[0],r[1],n[0],n[1]]}}function t$(t,e){t=lJ({},t);var r=[e,JSON.stringify(t)].toString(),n=UJ[r];return n||(n=new iJ({url:t.tiles?void 0:e,tileJSON:t.tiles?t:void 0}),UJ[r]=n),new Promise((function(t){var r=n.on("change",(function(){var i=n.getState();if("ready"===i){var o=n.getTileJSON(),a=Array.isArray(o.tiles)?o.tiles:[o.tiles];if(e)for(var s=0,l=a.length;s<l;++s)a[s]=decodeURI(new URL(a[s],e).href);var u=n.getTileGrid(),c=QJ(o),h=o.minzoom||0,f=o.maxzoom||22,p=n.get("ol-source");void 0===p&&(p=new Ij({attributions:n.getAttributions(),format:new Wj,tileGrid:new Ac.a({origin:u.getOrigin(0),extent:c||u.getExtent(),minZoom:h,resolutions:cJ.slice(0,f+1),tileSize:512}),urls:a}),n.set("ol-source",p)),Object(ag.b)(r),t(p)}else"error"===i&&(n.set("ol-source",null),Object(ag.b)(r),t(void 0))}));"ready"===n.getState()&&n.changed()}))}new cN;var e$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r$="https://api.mapbox.com";function n$(t){var e="mapbox://";return 0!==t.indexOf(e)?"":t.slice(e.length)}function i$(t,e,r,n){var i=new URL(t,n),o=n$(t);return o?"https://{a-d}.tiles.mapbox.com/v4/".concat(o,"/{z}/{x}/{y}.vector.pbf?access_token=").concat(e):e?(i.searchParams.set(r,e),decodeURI(i.href)):decodeURI(i.href)}var o$=function(t){function e(e){var r=t.call(this,Di.a.ERROR)||this;return r.error=e,r}return e$(e,t),e}(Ni.a),a$="vector",s$=function(t){function e(e){var r=this,n=!("declutter"in e)||e.declutter,i=new Ij({state:Qn.a.LOADING,format:new Wj});((r=t.call(this,{source:i,background:e.background,declutter:n,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties})||this).setMaxResolutionFromTileGrid_=void 0===e.maxResolution&&void 0===e.minZoom,r.sourceId=e.source,r.layers=e.layers,e.accessToken)?r.accessToken=e.accessToken:new URL(e.styleUrl,location.href).searchParams.forEach((function(t,e){r.accessToken=t,r.accessTokenParam_=e}));return r.fetchStyle(e.styleUrl),r}return e$(e,t),e.prototype.fetchStyle=function(t){var e=this,r=function(t,e){var r=n$(t);if(!r)return decodeURI(new URL(t,location.href).href);var n="styles/";if(0!==r.indexOf(n))throw new Error("unexpected style url: ".concat(t));var i=r.slice(n.length);return"".concat(r$,"/styles/v1/").concat(i,"?&access_token=").concat(e)}(t,this.accessToken);fetch(r).then((function(t){if(!t.ok)throw new Error("unexpected response when fetching style: ".concat(t.status));return t.json()})).then((function(t){e.onStyleLoad(t,r.startsWith("data:")?location.href:r)})).catch((function(t){e.handleError(t)}))},e.prototype.onStyleLoad=function(t,e){var r,n,i=this;if(this.layers){for(var o={},a=0;a<t.layers.length;++a){var s=t.layers[a];s.source&&(o[s.id]=s.source)}var l=void 0;for(a=0;a<this.layers.length;++a){var u=o[this.layers[a]];if(!u)return void this.handleError(new Error("could not find source for ".concat(this.layers[a])));if(l){if(l!==u)return void this.handleError(new Error("layers can only use a single source, found ".concat(l," and ").concat(u)))}else l=u}r=l,n=this.layers}else r=this.sourceId,n=r;n||(r=Object.keys(t.sources)[0],n=r),t.sprite&&(t.sprite=function(t,e,r){var n=n$(t);if(!n)return decodeURI(new URL(t,r).href);var i="sprites/";if(0!==n.indexOf(i))throw new Error("unexpected sprites url: ".concat(t));var o=n.slice(i.length);return"".concat(r$,"/styles/v1/").concat(o,"/sprite?access_token=").concat(e)}(t.sprite,this.accessToken,e)),t.glyphs&&(t.glyphs=function(t,e,r){var n=n$(t);if(!n)return decodeURI(new URL(t,r).href);var i="fonts/";if(0!==n.indexOf(i))throw new Error("unexpected fonts url: ".concat(t));var o=n.slice(i.length);return"".concat(r$,"/fonts/v1/").concat(o,"/0-255.pbf?access_token=").concat(e)}(t.glyphs,this.accessToken,e));var c=t.sources[r];if(c.type===a$){var h=this.getSource();c.url&&0===c.url.indexOf("mapbox://")?(h.setUrl(i$(c.url,this.accessToken,this.accessTokenParam_,e)),KJ(this,t,n).then((function(){i.configureSource(h,t)})).catch((function(t){i.handleError(t)}))):(c.tiles&&(c.tiles=c.tiles.map((function(t){return i$(t,i.accessToken,i.accessTokenParam_,e)}))),t$(c,c.url?i$(c.url,this.accessToken,this.accessTokenParam_,e):void 0).then((function(e){KJ(i,t,n).then((function(){i.configureSource(e,t)})).catch((function(r){i.configureSource(e,t),i.handleError(r)}))})))}else this.handleError(new Error("only works for vector sources, found ".concat(c.type)))},e.prototype.configureSource=function(t,e){var r,n=this.getSource();if(t!==n&&(n.setAttributions(t.getAttributions()),n.setTileUrlFunction(t.getTileUrlFunction()),n.setTileLoadFunction(t.getTileLoadFunction()),n.tileGrid=t.tileGrid),void 0===this.getBackground()&&(r=this,e.layers.some((function(t){if("background"==t.type)return $J(r,t),!0}))),this.setMaxResolutionFromTileGrid_){var i=n.getTileGrid();this.setMaxResolution(i.getResolution(i.getMinZoom()))}n.setState(Qn.a.READY)},e.prototype.handleError=function(t){this.dispatchEvent(new o$(t)),this.getSource().setState(Qn.a.ERROR)},e}(Dj),l$=r(76),u$=r(78),c$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h$=function(t){function e(e){var r=t.call(this,e)||this;return r.vectorRenderer_=new Av(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=Object(Un.d)(),r.renderedPixelToCoordinateTransform_=null,r}return c$(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(!this.vectorRenderer_)return new Promise((function(t){return t([])}));var e=Object(Un.a)(this.coordinateToVectorPixelTransform_,Object(Un.a)(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,r=t.viewState,n=r.resolution,i=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&(a=a.slice(0),Object(mt.K)(a,this.layerImageRatio_));var s=Object(mt.F)(a)/n,l=Object(mt.A)(a)/n;if(!i[po.a.ANIMATING]&&!i[po.a.INTERACTING]&&!Object(mt.I)(a)){o.useContainer(null,null,1);var u=o.context,c=Object(ii.a)({},t,{declutterTree:new lg.a(9),extent:a,size:[s,l],viewState:Object(ii.a)({},t.viewState,{rotation:0})}),h=!0,f=new u$.a(a,n,e,u.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(c,null)&&(o.renderDeclutter(c),h=!1),t())}));f.addEventListener(Di.a.CHANGE,function(){if(f.getState()===$g.a.LOADED){this.image_=h?null:f;var t=f.getResolution(),n=f.getPixelRatio(),i=t*e/n;this.renderedResolution=i,this.coordinateToVectorPixelTransform_=Object(Un.b)(this.coordinateToVectorPixelTransform_,s/2,l/2,1/i,-1/i,0,-r.center[0],-r.center[1])}}.bind(this)),f.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.renderDeclutter=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,n,i,o)},e}(l$.a),f$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p$=function(t){function e(e){var r=this,n=e||{},i=Object(ii.a)({},n);return delete i.imageRatio,(r=t.call(this,i)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,r}return f$(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new h$(this)},e}(X_),d$=r(64),g$=r(51),y$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m$=function(t){function e(e){var r=this,n=Ef.a.IDLE;return(r=t.call(this,e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate})||this).loader_=e.loader,r.data_=null,r.error_=null,r}return y$(e,t),e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){this.state=Ef.a.LOADING,this.changed();var t=this;this.loader_().then((function(e){t.data_=e,t.state=Ef.a.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=Ef.a.ERROR,t.changed()}))},e}(vj.a),_$=r(48),v$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function b$(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function x$(t,e,r,n,i,o){var a,s,l=t.getGL();r instanceof Float32Array?(a=l.FLOAT,t.getExtension("OES_texture_float"),s=null!==t.getExtension("OES_texture_float_linear")):(a=l.UNSIGNED_BYTE,s=!0);b$(l,e,o&&s);var u,c=r.byteLength/n[1],h=1;switch(c%8==0?h=8:c%4==0?h=4:c%2==0&&(h=2),i){case 1:u=l.LUMINANCE;break;case 2:u=l.LUMINANCE_ALPHA;break;case 3:u=l.RGB;break;case 4:u=l.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}var f=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,h),l.texImage2D(l.TEXTURE_2D,0,u,n[0],n[1],0,u,a,r),l.pixelStorei(l.UNPACK_ALIGNMENT,f)}var w$=null;var E$=function(t){function e(e){var r=t.call(this)||this;r.tile,r.textures=[],r.handleTileChange_=r.handleTileChange_.bind(r),r.size=Object(Aa.d)(e.grid.getTileSize(e.tile.tileCoord[0])),r.tilePixelRatio_=e.tilePixelRatio||1,r.gutter_=e.gutter||0,r.bandCount=NaN,r.helper_=e.helper;var n=new KU(zU,qU);return n.fromArray([0,1,1,1,1,0,0,0]),r.helper_.flushBufferData(n),r.coords=n,r.setTile(e.tile),r}return v$(e,t),e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Di.a.CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===Ef.a.LOADED,this.loaded)this.uploadTile_();else{if(t instanceof bf.a){var e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(Di.a.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,e=t.getGL(),r=this.tile;if(r instanceof bf.a||r instanceof xf.a){var n=r.getImage();if(0!==this.gutter_){var i=this.tilePixelRatio_*this.gutter_,o=Math.round(n.width-2*i),a=Math.round(n.height-2*i),s=Object(oi.a)(o,a);r.interpolate||Object(ii.a)(s,_$.a),s.drawImage(n,i,i,o,a,0,0,o,a),n=s.canvas}var l=e.createTexture();return this.textures.push(l),this.bandCount=4,void function(t,e,r,n){b$(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}(e,l,n,r.interpolate)}var u=[this.size[0]*this.tilePixelRatio_,this.size[1]*this.tilePixelRatio_],c=r.getData(),h=c instanceof Float32Array,f=u[0]*u[1],p=h?Float32Array:Uint8Array,d=p.BYTES_PER_ELEMENT,g=c.byteLength/u[1];this.bandCount=Math.floor(g/d/u[0]);var y=Math.ceil(this.bandCount/4);if(1===y){l=e.createTexture();return this.textures.push(l),void x$(t,l,c,u,this.bandCount,r.interpolate)}for(var m=new Array(y),_=0;_<y;++_){l=e.createTexture();this.textures.push(l);var v=_<y-1?4:this.bandCount%4;m[_]=new p(f*v)}for(var b=0,x=0,w=u[0]*this.bandCount,E=0;E<u[1];++E){for(var O=0;O<w;++O){var S=c[x+O],I=Math.floor(b/this.bandCount),C=O%this.bandCount;(T=m[_=Math.floor(C/4)])[I*(v=T.length/f)+C%4]=S,++b}x+=g/d}for(_=0;_<y;++_){var T;x$(t,l=this.textures[_],T=m[_],u,v=T.length/f,r.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Ef.a.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Di.a.CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(Di.a.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(t,e){if(!this.loaded)return null;if(t=Math.floor(this.tilePixelRatio_*t),e=Math.floor(this.tilePixelRatio_*e),this.tile instanceof m$){var r=this.tile.getData(),n=Math.floor(this.tilePixelRatio_*this.size[0]);if(r instanceof DataView){var i=r.byteLength/(this.size[0]*this.size[1]),o=e*n*i+t*i,a=r.buffer.slice(o,o+i);return new DataView(a)}var s=e*n*this.bandCount+t*this.bandCount;return r.slice(s,s+this.bandCount)}var l,u;w$||((l=document.createElement("canvas")).width=1,l.height=1,w$=l.getContext("2d")),w$.clearRect(0,0,1,1);var c=this.tile.getImage();try{w$.drawImage(c,t,e,1,1,0,0,1,1),u=w$.getImageData(0,0,1,1).data}catch(t){return null}return u},e}(ri.a),O$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S$="u_tileTextures",I$="u_tileTransform",C$="u_transitionAlpha",T$="u_depth",P$="u_texturePixelWidth",R$="u_texturePixelHeight",L$="u_textureResolution",M$="u_textureOriginX",N$="u_textureOriginY",A$="u_renderExtent",k$="u_resolution",j$="u_zoom",F$="a_textureCoord",D$=[{name:F$,size:2,type:cB.FLOAT}],G$={};function U$(t){return 2*(1-1/(t+1))-1}function B$(t,e,r){r in t||(t[r]=[]),t[r].push(e)}function z$(t,e){var r=t.layerStatesArray[t.layerIndex];r.extent&&(e=Object(mt.B)(e,Object(u.m)(r.extent,t.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=Object(mt.B)(e,i))}return e}function V$(t,e){return"".concat(t.getKey(),",").concat(Object(Tf.d)(e))}var q$=function(t){function e(e,r){var n=t.call(this,e,{uniforms:r.uniforms})||this;n.renderComplete=!1,n.tileTransform_=Object(Un.d)(),n.tempMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.tempTileRange_=new g$.b(0,0,0,0),n.tempTileCoord_=Object(Tf.a)(0,0,0),n.tempSize_=[0,0],n.program_,n.vertexShader_=r.vertexShader,n.fragmentShader_=r.fragmentShader,n.indices_=new KU(VU,qU),n.indices_.fromArray([0,1,3,1,2,3]);var i=void 0!==r.cacheSize?r.cacheSize:512;return n.tileTextureCache_=new d$.a(i),n.paletteTextures_=r.paletteTextures||[],n.frameState_=null,n}return O$(e,t),e.prototype.reset=function(e){t.prototype.reset.call(this,{uniforms:e.uniforms}),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==Ef.a.LOADED||r==Ef.a.EMPTY||r==Ef.a.ERROR&&!n},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer().getRenderSource();return!!e&&(!Object(mt.I)(z$(t,t.extent))&&e.getState()===Qn.a.READY)},e.prototype.enqueueTiles=function(t,e,r,n){var i=t.viewState,o=this.getLayer(),a=o.getRenderSource(),s=a.getTileGridForProjection(i.projection),l=a.getTilePixelRatio(t.pixelRatio),u=a.getGutterForProjection(i.projection),c=Object(Gn.c)(a);c in t.wantedTiles||(t.wantedTiles[c]={});for(var h=t.wantedTiles[c],f=this.tileTextureCache_,p=Math.max(r-o.getPreload(),s.getMinZoom(),o.getMinZoom()),d=r;d>=p;--d)for(var g=s.getTileRangeForExtentAndZ(e,d,this.tempTileRange_),y=s.getResolution(d),m=g.minX;m<=g.maxX;++m)for(var _=g.minY;_<=g.maxY;++_){var v=Object(Tf.a)(d,m,_,this.tempTileCoord_),b=V$(a,v),x=void 0,w=void 0;if(f.containsKey(b)&&(w=(x=f.get(b)).tile),!x||x.tile.key!==a.getKey())if(w=a.getTile(d,m,_,t.pixelRatio,i.projection),x)if(this.isDrawableTile_(w))x.setTile(w);else{var E=w.getInterimTile();x.setTile(E)}else x=new E$({tile:w,grid:s,helper:this.helper,tilePixelRatio:l,gutter:u}),f.set(b,x);B$(n,x,d);var O=w.getKey();h[O]=!0,w.getState()===Ef.a.IDLE&&(t.tileQueue.isKeyQueued(O)||t.tileQueue.enqueue([w,c,s.getTileCoordCenter(v),y]))}},e.prototype.renderFrame=function(t){this.frameState_=t,this.renderComplete=!0;var e=this.helper.getGL();this.preRender(e,t);var r=t.viewState,n=this.getLayer().getRenderSource(),i=n.getTileGridForProjection(r.projection),o=z$(t,t.extent),a=i.getZForResolution(r.resolution,n.zDirection),s={};if(t.nextExtent){var l=i.getZForResolution(r.nextResolution,n.zDirection),u=z$(t,t.nextExtent);this.enqueueTiles(t,u,l,s)}this.enqueueTiles(t,o,a,s);for(var c={},f=Object(Gn.c)(this),p=t.time,d=!1,g=s[a],y=0,m=g.length;y<m;++y){var _=(k=(H=g[y]).tile).tileCoord;if(H.loaded){if(1===(j=k.getAlpha(f,p))){k.endTransition(f);continue}d=!0,c[F=Object(Tf.d)(_)]=j}if(this.renderComplete=!1,!this.findAltTiles_(i,_,a+1,s))for(var v=i.getMinZoom(),b=a-1;b>=v;--b){if(this.findAltTiles_(i,_,b,s))break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(t,!d);for(var x=Object.keys(s).map(Number).sort(h.i),w=r.center[0],E=r.center[1],O=0,S=x.length;O<S;++O){var I=x[O],C=i.getResolution(I),T=Object(Aa.d)(i.getTileSize(I),this.tempSize_),P=i.getOrigin(I),R=(w-P[0])/(T[0]*C),L=(P[1]-E)/(T[1]*C),M=r.resolution/C,N=U$(I),A=s[I];for(y=0,m=A.length;y<m;++y){if((H=A[y]).loaded){_=(k=H.tile).tileCoord;var k,j,F=Object(Tf.d)(_),D=_[1],G=_[2];Object(Un.b)(this.tileTransform_,0,0,2/(t.size[0]*M/T[0]),-2/(t.size[1]*M/T[1]),r.rotation,-(R-D),-(L-G)),this.helper.setUniformMatrixValue(I$,rB(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(H.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(D$);for(var U=0;U<H.textures.length;){var B="TEXTURE"+U,z="".concat(S$,"[").concat(U,"]");e.activeTexture(e[B]),e.bindTexture(e.TEXTURE_2D,H.textures[U]),e.uniform1i(this.helper.getUniformLocation(z),U),++U}for(var V=0;V<this.paletteTextures_.length;++V){var q=this.paletteTextures_[V];e.activeTexture(e["TEXTURE"+U]);var Y=q.getTexture(e);e.bindTexture(e.TEXTURE_2D,Y),e.uniform1i(this.helper.getUniformLocation(q.name),U),++U}(j=F in c?c[F]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(C$,j),this.helper.setUniformFloatValue(T$,N),this.helper.setUniformFloatValue(P$,T[0]),this.helper.setUniformFloatValue(R$,T[1]),this.helper.setUniformFloatValue(L$,C),this.helper.setUniformFloatValue(M$,P[0]+D*T[0]*C),this.helper.setUniformFloatValue(N$,P[1]-G*T[1]*C),this.helper.setUniformFloatVec4(A$,o),this.helper.setUniformFloatValue(k$,r.resolution),this.helper.setUniformFloatValue(j$,r.zoom),this.helper.drawElements(0,this.indices_.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var W=this.helper.getCanvas(),X=this.tileTextureCache_;X.canExpireCache();){var H;(H=X.pop()).dispose()}return t.postRenderFunctions.push((function(t,e){n.expireCache(e.viewState.projection,G$)})),this.postRender(e,t),W},e.prototype.getData=function(t){if(!this.helper.getGL())return null;var e=this.frameState_;if(!e)return null;var r=this.getLayer(),n=Object(Un.a)(e.pixelToCoordinateTransform,t.slice()),i=e.viewState,o=r.getExtent();if(o&&!Object(mt.g)(Object(u.m)(o,i.projection),n))return null;var a=r.getRenderSource(),s=a.getTileGridForProjection(i.projection);if(!a.getWrapX()){var l=s.getExtent();if(l&&!Object(mt.g)(l,n))return null}for(var c=this.tileTextureCache_,h=s.getZForResolution(i.resolution);h>=s.getMinZoom();--h){var f=s.getTileCoordForCoordAndZ(n,h),p=V$(a,f);if(c.containsKey(p)){var d=c.get(p);if(d.loaded){var g=s.getOrigin(h),y=Object(Aa.d)(s.getTileSize(h)),m=s.getResolution(h),_=(n[0]-g[0])/m-f[1]*y[0],v=(g[1]-n[1])/m-f[2]*y[1];return d.getPixelData(_,v)}}}return null},e.prototype.findAltTiles_=function(t,e,r,n){var i=t.getTileRangeForTileCoordAndZ(e,r,this.tempTileRange_);if(!i)return!1;for(var o=!0,a=this.tileTextureCache_,s=this.getLayer().getRenderSource(),l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u){var c=V$(s,[r,l,u]),h=!1;if(a.containsKey(c)){var f=a.get(c);f.loaded&&(B$(n,f,r),h=!0)}h||(o=!1)}return o},e.prototype.removeHelper=function(){if(this.helper){var e=this.tileTextureCache_;e.forEach((function(t){return t.dispose()})),e.clear()}t.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_));t.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(bB),Y$=function(){function t(t,e){this.name=t,this.data=e,this.texture_=null}return t.prototype.getTexture=function(t){if(!this.texture_){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_},t}(),W$=1,X$=2,H$=4,Z$=8,K$=16,J$=31,$$=0,Q$={};function tQ(t){if("number"==typeof t)return W$;if("boolean"==typeof t)return Z$;if("string"==typeof t)return Object(Bn.d)(t)?H$|X$:X$;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var e=t;if(e.every((function(t){return"number"==typeof t})))return 3===e.length||4===e.length?H$|K$:K$;if("string"!=typeof e[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var r=Q$[e[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return r.getReturnType(e.slice(1))}function eQ(t){var e=t.toString();return-1===e.indexOf(".")?e+".0":e}function rQ(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(eQ).join(", "),")")}function nQ(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function iQ(t,e,r){if(Array.isArray(e)&&"string"==typeof e[0]){var n=Q$[e[0]];if(void 0===n)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(t,e.slice(1),r)}var i,o,a=tQ(e);if((a&W$)>0)return eQ(e);if((a&Z$)>0)return e.toString();if((a&X$)>0&&(void 0===r||r==X$))return function(t,e){return eQ(nQ(t,e))}(t,e.toString());if((a&H$)>0&&(void 0===r||r==H$))return i=e,(o=Object(Bn.a)(i).slice()).length<4&&o.push(1),rQ(o.map((function(t,e){return e<3?t/255:t})));if((a&K$)>0)return rQ(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(r,")"))}function oQ(t){if(!(tQ(t)&W$))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function aQ(t){for(var e=0;e<t.length;e++)oQ(t[e])}function sQ(t){if(!(tQ(t)&X$))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function lQ(t){if(!(tQ(t)&Z$))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function uQ(t,e){if(t.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function cQ(t,e){if(t.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function hQ(t,e){if(t.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function fQ(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function pQ(t,e){if(r=e,Object(mo.f)(r)%1!=0)throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)));var r}function dQ(t){return"u_var_"+t}Q$.get={getReturnType:function(t){return J$},toGlsl:function(t,e){uQ(e,1),sQ(e[0]);var r=e[0].toString();return-1===t.attributes.indexOf(r)&&t.attributes.push(r),(t.inFragmentShader?"v_":"a_")+r}},Q$.var={getReturnType:function(t){return J$},toGlsl:function(t,e){uQ(e,1),sQ(e[0]);var r=e[0].toString();return-1===t.variables.indexOf(r)&&t.variables.push(r),dQ(r)}};var gQ="u_paletteTextures";Q$.palette={getReturnType:function(t){return H$},toGlsl:function(t,e){uQ(e,2),oQ(e[0]);var r=iQ(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(4*i),a=0;a<i;a++){var s=n[a],l=void 0;if("string"==typeof s)l=Object(Bn.c)(s);else{if(!Array.isArray(s))throw new Error("The second argument of palette must be an array of strings or colors");var u=s.length;if(4===u)l=s;else{if(3!==u)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(u));l=[s[0],s[1],s[2],1]}}var c=4*a;o[c]=l[0],o[c+1]=l[1],o[c+2]=l[2],o[c+3]=255*l[3]}t.paletteTextures||(t.paletteTextures=[]);var h="".concat(gQ,"[").concat(t.paletteTextures.length,"]"),f=new Y$(h,o);return t.paletteTextures.push(f),"texture2D(".concat(h,", vec2((").concat(r," + 0.5) / ").concat(i,".0, 0.5))")}};var yQ="getBandValue";function mQ(t){return{getReturnType:function(t){return Z$},toGlsl:function(e,r){uQ(r,2);for(var n=J$,i=0;i<r.length;i++)n&=tQ(r[i]);if(n===$$)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~H$,"(".concat(iQ(e,r[0],n)," ").concat(t," ").concat(iQ(e,r[1],n),")")}}}function _Q(t){return{getReturnType:function(t){return Z$},toGlsl:function(e,r){cQ(r,2);for(var n=0;n<r.length;n++)lQ(r[n]);var i="";return i=r.map((function(t){return iQ(e,t)})).join(" ".concat(t," ")),i="(".concat(i,")")}}}Q$.band={getReturnType:function(t){return W$},toGlsl:function(t,e){cQ(e,1),hQ(e,3);var r=e[0];if(!(yQ in t.functions)){for(var n="",i=t.bandCount||1,o=0;o<i;o++){var a=Math.floor(o/4),s=o%4;s===i-1&&1===s&&(s=3);var l="".concat(S$,"[").concat(a,"]");n+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(l,", v_textureCoord + vec2(dx, dy))[").concat(s,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(P$,";\n          float dy = yOffset / ").concat(R$,";\n          ").concat(n,"\n        }\n      ")}var u=iQ(t,r),c=iQ(t,e[1]||0),h=iQ(t,e[2]||0);return"".concat(yQ,"(").concat(u,", ").concat(c,", ").concat(h,")")}},Q$.time={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,0),"u_time"}},Q$.zoom={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,0),"u_zoom"}},Q$.resolution={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,0),"u_resolution"}},Q$["*"]={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," * ").concat(iQ(t,e[1]),")")}},Q$["/"]={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," / ").concat(iQ(t,e[1]),")")}},Q$["+"]={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," + ").concat(iQ(t,e[1]),")")}},Q$["-"]={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," - ").concat(iQ(t,e[1]),")")}},Q$.clamp={getReturnType:function(t){return W$},toGlsl:function(t,e){uQ(e,3),aQ(e);var r=iQ(t,e[1]),n=iQ(t,e[2]);return"clamp(".concat(iQ(t,e[0]),", ").concat(r,", ").concat(n,")")}},Q$["%"]={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"mod(".concat(iQ(t,e[0]),", ").concat(iQ(t,e[1]),")")}},Q$["^"]={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"pow(".concat(iQ(t,e[0]),", ").concat(iQ(t,e[1]),")")}},Q$.abs={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,1),aQ(e),"abs(".concat(iQ(t,e[0]),")")}},Q$.floor={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,1),aQ(e),"floor(".concat(iQ(t,e[0]),")")}},Q$.round={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,1),aQ(e),"floor(".concat(iQ(t,e[0])," + 0.5)")}},Q$.ceil={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,1),aQ(e),"ceil(".concat(iQ(t,e[0]),")")}},Q$.sin={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,1),aQ(e),"sin(".concat(iQ(t,e[0]),")")}},Q$.cos={getReturnType:function(t){return W$},toGlsl:function(t,e){return uQ(e,1),aQ(e),"cos(".concat(iQ(t,e[0]),")")}},Q$.atan={getReturnType:function(t){return W$},toGlsl:function(t,e){return cQ(e,1),hQ(e,2),aQ(e),2===e.length?"atan(".concat(iQ(t,e[0]),", ").concat(iQ(t,e[1]),")"):"atan(".concat(iQ(t,e[0]),")")}},Q$[">"]={getReturnType:function(t){return Z$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," > ").concat(iQ(t,e[1]),")")}},Q$[">="]={getReturnType:function(t){return Z$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," >= ").concat(iQ(t,e[1]),")")}},Q$["<"]={getReturnType:function(t){return Z$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," < ").concat(iQ(t,e[1]),")")}},Q$["<="]={getReturnType:function(t){return Z$},toGlsl:function(t,e){return uQ(e,2),aQ(e),"(".concat(iQ(t,e[0])," <= ").concat(iQ(t,e[1]),")")}},Q$["=="]=mQ("=="),Q$["!="]=mQ("!="),Q$["!"]={getReturnType:function(t){return Z$},toGlsl:function(t,e){return uQ(e,1),lQ(e[0]),"(!".concat(iQ(t,e[0]),")")}},Q$.all=_Q("&&"),Q$.any=_Q("||"),Q$.between={getReturnType:function(t){return Z$},toGlsl:function(t,e){uQ(e,3),aQ(e);var r=iQ(t,e[1]),n=iQ(t,e[2]),i=iQ(t,e[0]);return"(".concat(i," >= ").concat(r," && ").concat(i," <= ").concat(n,")")}},Q$.array={getReturnType:function(t){return K$},toGlsl:function(t,e){cQ(e,2),hQ(e,4),aQ(e);var r=e.map((function(e){return iQ(t,e,W$)}));return"vec".concat(e.length,"(").concat(r.join(", "),")")}},Q$.color={getReturnType:function(t){return H$},toGlsl:function(t,e){cQ(e,3),hQ(e,4),aQ(e);var r=e;3===e.length&&r.push(1);var n=e.map((function(e,r){return iQ(t,e,W$)+(r<3?" / 255.0":"")}));return"vec".concat(e.length,"(").concat(n.join(", "),")")}},Q$.interpolate={getReturnType:function(t){for(var e=H$|W$,r=3;r<t.length;r+=2)e&=tQ(t[r]);return e},toGlsl:function(t,e,r){fQ(e),cQ(e,6);var n,i=e[0];switch(i[0]){case"linear":n=1;break;case"exponential":n=i[1];break;default:n=null}if(!n)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(i)));var o=void 0!==r?r:J$,a=Q$.interpolate.getReturnType(e)&o;pQ(e,a);for(var s=iQ(t,e[1]),l=eQ(n),u="",c=2;c<e.length-2;c+=2){var h=iQ(t,e[c]),f=u||iQ(t,e[c+1],a),p=iQ(t,e[c+2]),d=iQ(t,e[c+3],a);u="mix(".concat(f,", ").concat(d,", pow(clamp((").concat(s," - ").concat(h,") / (").concat(p," - ").concat(h,"), 0.0, 1.0), ").concat(l,"))")}return u}},Q$.match={getReturnType:function(t){for(var e=J$,r=2;r<t.length;r+=2)e&=tQ(t[r]);return e&=tQ(t[t.length-1])},toGlsl:function(t,e,r){fQ(e),cQ(e,4);var n=void 0!==r?r:J$,i=Q$.match.getReturnType(e)&n;pQ(e,i);for(var o=iQ(t,e[0]),a=iQ(t,e[e.length-1],i),s=null,l=e.length-3;l>=1;l-=2){var u=iQ(t,e[l]),c=iQ(t,e[l+1],i);s="(".concat(o," == ").concat(u," ? ").concat(c," : ").concat(s||a,")")}return s}},Q$.case={getReturnType:function(t){for(var e=J$,r=1;r<t.length;r+=2)e&=tQ(t[r]);return e&=tQ(t[t.length-1])},toGlsl:function(t,e,r){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(e),cQ(e,3);var n=void 0!==r?r:J$,i=Q$.case.getReturnType(e)&n;pQ(e,i);for(var o=0;o<e.length-1;o+=2)lQ(e[o]);var a=iQ(t,e[e.length-1],i),s=null;for(o=e.length-3;o>=0;o-=2){var l=iQ(t,e[o]),u=iQ(t,e[o+1],i);s="(".concat(l," ? ").concat(u," : ").concat(s||a,")")}return s}};var vQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function bQ(t,e){var r="\n    attribute vec2 ".concat(F$,";\n    uniform mat4 ").concat(I$,";\n    uniform float ").concat(P$,";\n    uniform float ").concat(R$,";\n    uniform float ").concat(L$,";\n    uniform float ").concat(M$,";\n    uniform float ").concat(N$,";\n    uniform float ").concat(T$,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(F$,";\n      v_mapCoord = vec2(\n        ").concat(M$," + ").concat(L$," * ").concat(P$," * v_textureCoord[0],\n        ").concat(N$," - ").concat(L$," * ").concat(R$," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(I$," * vec4(").concat(F$,", ").concat(T$,", 1.0);\n    }\n  "),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(void 0!==t.color){var o=iQ(n,t.color,H$);i.push("color = ".concat(o,";"))}if(void 0!==t.contrast){var a=iQ(n,t.contrast,W$);i.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.exposure){var s=iQ(n,t.exposure,W$);i.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.saturation){var l=iQ(n,t.saturation,W$);i.push("\n      float saturation = ".concat(l," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==t.gamma){var u=iQ(n,t.gamma,W$);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(u,"));"))}if(void 0!==t.brightness){var c=iQ(n,t.brightness,W$);i.push("color.rgb = clamp(color.rgb + ".concat(c,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var h={},f=n.variables.length;if(f>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var p=function(e){var r=n.variables[e];if(!(r in t.variables))throw new Error("Missing '".concat(r,"' in style variables"));var i=dQ(r);h[i]=function(){var e=t.variables[r];return"string"==typeof e&&(e=nQ(n,e)),void 0!==e?e:-9999999}},d=0;d<f;++d)p(d);var g=Object.keys(h).map((function(t){return"uniform float ".concat(t,";")})),y=Math.ceil(e/4);g.push("uniform sampler2D ".concat(S$,"[").concat(y,"];")),n.paletteTextures&&g.push("uniform sampler2D ".concat(gQ,"[").concat(n.paletteTextures.length,"];"));var m=Object.keys(n.functions).map((function(t){return n.functions[t]}));return{vertexShader:r,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(A$,";\n    uniform float ").concat(C$,";\n    uniform float ").concat(P$,";\n    uniform float ").concat(R$,";\n    uniform float ").concat(k$,";\n    uniform float ").concat(j$,";\n\n    ").concat(g.join("\n"),"\n\n    ").concat(m.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(A$,"[0] ||\n        v_mapCoord[1] < ").concat(A$,"[1] ||\n        v_mapCoord[0] > ").concat(A$,"[2] ||\n        v_mapCoord[1] > ").concat(A$,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(S$,"[0],  v_textureCoord);\n\n      ").concat(i.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(C$,";\n    }"),uniforms:h,paletteTextures:n.paletteTextures}}var xQ=function(t){function e(e){var r=this,n=e?Object(ii.a)({},e):{},i=n.style||{};delete n.style;var o=n.cacheSize;return delete n.cacheSize,(r=t.call(this,n)||this).sources_=n.sources,r.renderedSource_=null,r.renderedResolution_=NaN,r.style_=i,r.cacheSize_=o,r.styleVariables_=r.style_.variables||{},r.addChangeListener(JU.a.SOURCE,r.handleSourceUpdate_),r}return vQ(e,t),e.prototype.getSources=function(t,e){var r=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(t,e):this.sources_:r?[r]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():Qn.a.UNDEFINED},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var t=this.getSource();return t&&"bandCount"in t?t.bandCount:4},e.prototype.createRenderer=function(){var t=bQ(this.style_,this.getSourceBandCount_());return new q$(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})},e.prototype.renderSources=function(t,e){for(var r,n=this.getRenderer(),i=0,o=e.length;i<o;++i)this.renderedSource_=e[i],n.prepareFrame(t)&&(r=n.renderFrame(t));return r},e.prototype.render=function(t,e){var r=this;this.rendered=!0;for(var n=t.viewState,i=this.getSources(t.extent,n.resolution),o=!0,a=function(t,e){var n=i[t],a=n.getState();if(a==Qn.a.LOADING){n.addEventListener("change",(function t(){n.getState()==Qn.a.READY&&(n.removeEventListener("change",t),r.changed())}))}o=o&&a==Qn.a.READY},s=0,l=i.length;s<l;++s)a(s);var u=this.renderSources(t,i);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=n.resolution,u;if(this.renderedResolution_>.5*n.resolution){var c=this.getSources(t.extent,this.renderedResolution_).filter((function(t){return!i.includes(t)}));if(c.length>0)return this.renderSources(t,c)}return u},e.prototype.setStyle=function(t){this.styleVariables_=t.variables||{},this.style_=t;var e=bQ(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(t){Object(ii.a)(this.styleVariables_,t),this.changed()},e}(KK.a);xQ.prototype.dispose;var wQ=xQ,EQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var OQ=function(t){function e(e){var r=this,n=void 0!==e.hidpi&&e.hidpi,i=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(i=e.interpolate),(r=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:i,opaque:!0,projection:Object(u.o)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:Qn.a.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).hidpi_=n,r.culture_=void 0!==e.culture?e.culture:"en-us",r.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,r.apiKey_=e.key,r.imagerySet_=e.imagerySet;var o="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_;return Object(rJ.a)(o,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return EQ(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=this.getProjection(),i=Object(Ff.c)(n),o=this.hidpi_?2:1,a=e.imageWidth==e.imageHeight?e.imageWidth/o:[e.imageWidth/o,e.imageHeight/o],s=Object(Ff.b)({extent:i,minZoom:e.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=s;var l=this.culture_,c=this.hidpi_;if(this.tileUrlFunction=Lf(e.imageUrlSubdomains.map((function(t){var r=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",l);return function(t,e,i){if(t){Object(Tf.a)(t[0],t[1],t[2],r);var o=n;return c&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,r,n=t[0],i=new Array(n),o=1<<n-1;for(e=0;e<n;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[e]=String.fromCharCode(r),o>>=1;return i.join("")}(r))}}}))),e.imageryProviders){var h=Object(u.r)(Object(u.o)("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],n=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(n.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map((function(e){for(var n=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var l=i[o];if(a>=l.zoomMin&&a<=l.zoomMax){var u=l.bbox,c=[u[1],u[0],u[3],u[2]],f=Object(mt.a)(c,h);if(Object(mt.G)(f,t.extent)){n=!0;break}}}n&&r.push(e.attribution)})),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}.bind(this))}this.setState(Qn.a.READY)}else this.setState(Qn.a.ERROR)},e}(Uf),SQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),IQ=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection})||this;return r.account_=e.account,r.mapId_=e.map||"",r.config_=e.config||{},r.templateCache_={},r.initializeMap_(),r}return SQ(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){Object(ii.a)(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var n=void 0;try{n=JSON.parse(r.responseText)}catch(t){return void this.setState(Qn.a.ERROR)}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(Qn.a.READY)}else this.setState(Qn.a.ERROR)},e.prototype.handleInitError_=function(t){this.setState(Qn.a.ERROR)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(Fk),CQ=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TQ=function(t){function e(e){var r=this,n=void 0===e.projection?"EPSG:3857":e.projection,i=e.tileGrid;return void 0===i&&n&&(i=Object(Ff.b)({extent:Object(Ff.c)(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),(r=t.call(this,{cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:n,tileGrid:i,opaque:e.opaque,state:e.state,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate})||this).tileLoadingKeys_={},r.loader_=e.loader,r.handleTileChange_=r.handleTileChange_.bind(r),r.bandCount=void 0===e.bandCount?4:e.bandCount,r}return CQ(e,t),e.prototype.setLoader=function(t){this.loader_=t},e.prototype.getTile=function(t,e,r,n,i){var o=Object(Tf.e)(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=this.loader_;var s=new m$(Object(ii.a)({tileCoord:[t,e,r],loader:function(){return Object(Dn.e)((function(){return a(t,e,r)}))}},this.tileOptions));return s.key=this.getKey(),s.addEventListener(Di.a.CHANGE,this.handleTileChange_),this.tileCache.set(o,s),s},e.prototype.handleTileChange_=function(t){var e,r=t.target,n=Object(Gn.c)(r),i=r.getState();i==Ef.a.LOADING?(this.tileLoadingKeys_[n]=!0,e=Of):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=i==Ef.a.ERROR?If:i==Ef.a.LOADED?Sf:void 0),e&&this.dispatchEvent(new Cf.a(e,r))},e}(Cf.b);const PQ=new Map;function RQ(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>PQ.set(t,e))}async function LQ(t){const e=PQ.get(t.Compression);if(!e)throw new Error("Unknown compression method identifier: "+t.Compression);return new(await e())(t)}RQ([void 0,1],()=>Promise.resolve().then(r.bind(null,169)).then(t=>t.default)),RQ(5,()=>Promise.resolve().then(r.bind(null,170)).then(t=>t.default)),RQ(6,()=>{throw new Error("old style JPEG compression is not supported.")}),RQ(7,()=>Promise.resolve().then(r.bind(null,171)).then(t=>t.default)),RQ([8,32946],()=>Promise.resolve().then(r.bind(null,172)).then(t=>t.default)),RQ(32773,()=>Promise.resolve().then(r.bind(null,173)).then(t=>t.default)),RQ(34887,()=>Promise.resolve().then(r.bind(null,174)).then(t=>t.default)),RQ(50001,()=>Promise.resolve().then(r.bind(null,175)).then(t=>t.default));const MQ="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2;var NQ=class{constructor(t=MQ,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise(t=>{Promise.resolve().then(r.bind(null,168)).then(e=>{t(e.create)})}),this._awaitingDecoder.then(e=>{this._awaitingDecoder=null,this.workers=[];for(let r=0;r<t;r++)this.workers.push({worker:e(),idle:!0})}))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?LQ(t).then(r=>r.decode(t,e)):new Promise(r=>{const n=this.workers.find(t=>t.idle)||this.workers[Math.floor(Math.random()*this.size)];n.idle=!1;const i=this.messageId++,o=t=>{t.data.id===i&&(n.idle=!0,r(t.data.decoded),n.worker.removeEventListener("message",o))};n.worker.addEventListener("message",o),n.worker.postMessage({fileDirectory:t,buffer:e,id:i},[e])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}},AQ=r(86),kQ=r(88),jQ=r.n(kQ),FQ=r(119),DQ=r.n(FQ),GQ=r(12);function UQ(t,e,r,n=1){return new(Object.getPrototypeOf(t).constructor)(e*r*n)}function BQ(t,e,r){return(1-r)*t+r*e}function zQ(t,e,r,n,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(t,e,r,n,i){const o=e/n,a=r/i;return t.map(t=>{const s=UQ(t,n,i);for(let l=0;l<i;++l){const i=Math.min(Math.round(a*l),r-1);for(let r=0;r<n;++r){const a=Math.min(Math.round(o*r),e-1),u=t[i*e+a];s[l*n+r]=u}}return s})}(t,e,r,n,i);case"bilinear":case"linear":return function(t,e,r,n,i){const o=e/n,a=r/i;return t.map(t=>{const s=UQ(t,n,i);for(let l=0;l<i;++l){const i=a*l,u=Math.floor(i),c=Math.min(Math.ceil(i),r-1);for(let r=0;r<n;++r){const a=o*r,h=a%1,f=Math.floor(a),p=Math.min(Math.ceil(a),e-1),d=t[u*e+f],g=t[u*e+p],y=t[c*e+f],m=t[c*e+p],_=BQ(BQ(d,g,h),BQ(y,m,h),i%1);s[l*n+r]=_}}return s})}(t,e,r,n,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function VQ(t,e,r,n,i,o,a="nearest"){switch(a.toLowerCase()){case"nearest":return function(t,e,r,n,i,o){const a=e/n,s=r/i,l=UQ(t,n,i,o);for(let u=0;u<i;++u){const i=Math.min(Math.round(s*u),r-1);for(let r=0;r<n;++r){const s=Math.min(Math.round(a*r),e-1);for(let a=0;a<o;++a){const c=t[i*e*o+s*o+a];l[u*n*o+r*o+a]=c}}}return l}(t,e,r,n,i,o);case"bilinear":case"linear":return function(t,e,r,n,i,o){const a=e/n,s=r/i,l=UQ(t,n,i,o);for(let u=0;u<i;++u){const i=s*u,c=Math.floor(i),h=Math.min(Math.ceil(i),r-1);for(let r=0;r<n;++r){const s=a*r,f=s%1,p=Math.floor(s),d=Math.min(Math.ceil(s),e-1);for(let a=0;a<o;++a){const s=t[c*e*o+p*o+a],g=t[c*e*o+d*o+a],y=t[h*e*o+p*o+a],m=t[h*e*o+d*o+a],_=BQ(BQ(s,g,f),BQ(y,m,f),i%1);l[u*n*o+r*o+a]=_}}}return l}(t,e,r,n,i,o);default:throw new Error(`Unsupported resampling method: '${a}'`)}}function qQ(t,e,r){let n=0;for(let i=e;i<r;++i)n+=t[i];return n}function YQ(t,e,r){switch(t){case 1:if(e<=8)return new Uint8Array(r);if(e<=16)return new Uint16Array(r);if(e<=32)return new Uint32Array(r);break;case 2:if(8===e)return new Int8Array(r);if(16===e)return new Int16Array(r);if(32===e)return new Int32Array(r);break;case 3:switch(e){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}var WQ=class{constructor(t,e,r,n,i,o){this.fileDirectory=t,this.geoKeys=e,this.dataView=r,this.littleEndian=n,this.tiles=i?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=void 0===a?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(t,e){return Object(AQ.getFloat16)(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){return YQ(this.getSampleFormat(t),this.getBitsPerSample(t),e)}async getTileOrStrip(t,e,r,n,i){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let s;const{tiles:l}=this;let u,c;1===this.planarConfiguration?s=e*o+t:2===this.planarConfiguration&&(s=r*o*a+e*o+t),this.isTiled?(u=this.fileDirectory.TileOffsets[s],c=this.fileDirectory.TileByteCounts[s]):(u=this.fileDirectory.StripOffsets[s],c=this.fileDirectory.StripByteCounts[s]);const h=(await this.source.fetch([{offset:u,length:c}],i))[0];let f;return null!==l&&l[s]?f=l[s]:(f=(async()=>{let t=await n.decode(this.fileDirectory,h);const r=this.getSampleFormat(),i=this.getBitsPerSample();return function(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}(r,i)&&(t=function(t,e,r,n,i,o,a){const s=new DataView(t),l=2===r?1:n,u=YQ(e,i,2===r?a*o:a*o*n),c=parseInt("1".repeat(i),2);if(1===e){let t;t=1===r?n*i:i;let e=o*t;0!=(7&e)&&(e=e+7&-8);for(let t=0;t<a;++t){const r=t*e;for(let e=0;e<o;++e){const n=r+e*l*i;for(let r=0;r<l;++r){const a=n+r*i,h=(t*o+e)*l+r,f=Math.floor(a/8),p=a%8;if(p+i<=8)u[h]=s.getUint8(f)>>8-i-p&c;else if(p+i<=16)u[h]=s.getUint16(f)>>16-i-p&c;else if(p+i<=24){const t=s.getUint16(f)<<8|s.getUint8(f+2);u[h]=t>>24-i-p&c}else u[h]=s.getUint32(f)>>32-i-p&c}}}}return u.buffer}(t,r,this.planarConfiguration,this.getSamplesPerPixel(),i,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[s]=f)),{x:t,y:e,sample:r,data:await f}}async _readRaster(t,e,r,n,i,o,a,s,l){const u=this.getTileWidth(),c=this.getTileHeight(),h=this.getWidth(),f=this.getHeight(),p=Math.max(Math.floor(t[0]/u),0),d=Math.min(Math.ceil(t[2]/u),Math.ceil(h/u)),g=Math.max(Math.floor(t[1]/c),0),y=Math.min(Math.ceil(t[3]/c),Math.ceil(f/c)),m=t[2]-t[0];let _=this.getBytesPerPixel();const v=[],b=[];for(let t=0;t<e.length;++t)1===this.planarConfiguration?v.push(qQ(this.fileDirectory.BitsPerSample,0,e[t])/8):v.push(0),b.push(this.getReaderForSample(e[t]));const x=[],{littleEndian:w}=this;for(let o=g;o<y;++o)for(let a=p;a<d;++a)for(let s=0;s<e.length;++s){const p=s,d=e[s];2===this.planarConfiguration&&(_=this.getSampleByteSize(s));const g=this.getTileOrStrip(a,o,d,i,l).then(i=>{const o=i.data,a=new DataView(o),s=this.getBlockHeight(i.y),l=i.y*c,d=i.x*u,g=l+s,y=(i.x+1)*u,x=b[p],E=Math.min(s,s-(g-t[3]),f-l),O=Math.min(u,u-(y-t[2]),h-d);for(let i=Math.max(0,t[1]-l);i<E;++i)for(let o=Math.max(0,t[0]-d);o<O;++o){const s=(i*u+o)*_,c=x.call(a,s+v[p],w);let h;n?(h=(i+l-t[1])*m*e.length+(o+d-t[0])*e.length+p,r[h]=c):(h=(i+l-t[1])*m+o+d-t[0],r[p][h]=c)}});x.push(g)}if(await Promise.all(x),o&&t[2]-t[0]!==o||a&&t[3]-t[1]!==a){let i;return i=n?VQ(r,t[2]-t[0],t[3]-t[1],o,a,e.length,s):zQ(r,t[2]-t[0],t[3]-t[1],o,a,s),i.width=o,i.height=a,i}return r.width=o||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:e=[],interleave:r,pool:n=null,width:i,height:o,resampleMethod:a,fillValue:s,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=(u[2]-u[0])*(u[3]-u[1]),h=this.getSamplesPerPixel();if(e&&e.length){for(let t=0;t<e.length;++t)if(e[t]>=h)return Promise.reject(new RangeError(`Invalid sample index '${e[t]}'.`))}else for(let t=0;t<h;++t)e.push(t);let f;if(r){f=YQ(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),c*e.length),s&&f.fill(s)}else{f=[];for(let t=0;t<e.length;++t){const r=this.getArrayForSample(e[t],c);Array.isArray(s)&&t<s.length?r.fill(s[t]):s&&!Array.isArray(s)&&r.fill(s),f.push(r)}}const p=n||await LQ(this.fileDirectory);return await this._readRaster(u,e,f,r,p,i,o,a,l)}async readRGB({window:t,interleave:e=!0,pool:r=null,width:n,height:i,resampleMethod:o,enableAlpha:a=!1,signal:s}={}){const l=t||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const u=this.fileDirectory.PhotometricInterpretation;if(u===GQ.j.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==GQ.a.Unspecified&&a){l=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)l.push(t)}return this.readRasters({window:t,interleave:e,samples:l,pool:r,width:n,height:i,resampleMethod:o,signal:s})}let c;switch(u){case GQ.j.WhiteIsZero:case GQ.j.BlackIsZero:case GQ.j.Palette:c=[0];break;case GQ.j.CMYK:c=[0,1,2,3];break;case GQ.j.YCbCr:case GQ.j.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const h={window:l,interleave:!0,samples:c,pool:r,width:n,height:i,resampleMethod:o,signal:s},{fileDirectory:f}=this,p=await this.readRasters(h),d=2**this.fileDirectory.BitsPerSample[0];let g;switch(u){case GQ.j.WhiteIsZero:g=function(t,e){const{width:r,height:n}=t,i=new Uint8Array(r*n*3);let o;for(let r=0,n=0;r<t.length;++r,n+=3)o=256-t[r]/e*256,i[n]=o,i[n+1]=o,i[n+2]=o;return i}(p,d);break;case GQ.j.BlackIsZero:g=function(t,e){const{width:r,height:n}=t,i=new Uint8Array(r*n*3);let o;for(let r=0,n=0;r<t.length;++r,n+=3)o=t[r]/e*256,i[n]=o,i[n+1]=o,i[n+2]=o;return i}(p,d);break;case GQ.j.Palette:g=function(t,e){const{width:r,height:n}=t,i=new Uint8Array(r*n*3),o=e.length/3,a=e.length/3*2;for(let r=0,n=0;r<t.length;++r,n+=3){const s=t[r];i[n]=e[s]/65536*256,i[n+1]=e[s+o]/65536*256,i[n+2]=e[s+a]/65536*256}return i}(p,f.ColorMap);break;case GQ.j.CMYK:g=function(t){const{width:e,height:r}=t,n=new Uint8Array(e*r*3);for(let e=0,r=0;e<t.length;e+=4,r+=3){const i=t[e],o=t[e+1],a=t[e+2],s=t[e+3];n[r]=(255-i)/256*255*((255-s)/256),n[r+1]=(255-o)/256*255*((255-s)/256),n[r+2]=(255-a)/256*255*((255-s)/256)}return n}(p);break;case GQ.j.YCbCr:g=function(t){const{width:e,height:r}=t,n=new Uint8ClampedArray(e*r*3);for(let e=0,r=0;e<t.length;e+=3,r+=3){const i=t[e],o=t[e+1],a=t[e+2];n[r]=i+1.402*(a-128),n[r+1]=i-.34414*(o-128)-.71414*(a-128),n[r+2]=i+1.772*(o-128)}return n}(p);break;case GQ.j.CIELab:g=function(t){const{width:e,height:r}=t,n=new Uint8Array(e*r*3);for(let e=0,r=0;e<t.length;e+=3,r+=3){let i,o,a,s=(t[e+0]+16)/116,l=(t[e+1]<<24>>24)/500+s,u=s-(t[e+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),s=1*(s*s*s>.008856?s*s*s:(s-16/116)/7.787),u=1.08883*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),i=3.2406*l+-1.5372*s+-.4986*u,o=-.9689*l+1.8758*s+.0415*u,a=.0557*l+-.204*s+1.057*u,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,n[r]=255*Math.max(0,Math.min(1,i)),n[r+1]=255*Math.max(0,Math.min(1,o)),n[r+2]=255*Math.max(0,Math.min(1,a))}return n}(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(g.length/3),e=new Uint8Array(g.length/3),r=new Uint8Array(g.length/3);for(let n=0,i=0;n<g.length;n+=3,++i)t[i]=g[n],e[i]=g[n+1],r[i]=g[n+2];g=[t,e,r]}return g.width=p.width,g.height=p.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let n=DQ()(r,"Item");n=null===t?n.filter(t=>void 0===jQ()(t,"sample")):n.filter(e=>Number(jQ()(e,"sample"))===t);for(let t=0;t<n.length;++t){const r=n[t];e[jQ()(r,"name")]=r.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return[r[0],r[5],r[10]];if(t){const[e,r,n]=t.getResolution();return[e*t.getWidth()/this.getWidth(),r*t.getHeight()/this.getHeight(),n*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const t=this.getOrigin(),e=this.getResolution(),r=t[0],n=t[1],i=r+e[0]*this.getWidth(),o=n+e[1]*this.getHeight();return[Math.min(r,i),Math.min(n,o),Math.max(r,i),Math.max(n,o)]}};class XQ{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const r=this.getUint32(t,e),n=this.getUint32(t+4,e);let i;if(e){if(i=r+2**32*n,!Number.isSafeInteger(i))throw new Error(i+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return i}if(i=2**32*r+n,!Number.isSafeInteger(i))throw new Error(i+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return i}getInt64(t,e){let r=0;const n=(128&this._dataView.getUint8(t+(e?7:0)))>0;let i=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(t+(e?o:7-o));n&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),r+=a*256**o}return n&&(r=-r),r}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return Object(AQ.getFloat16)(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class HQ{constructor(t,e,r,n){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=r,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),r=this.readUint32(t+4);let n;if(this._littleEndian){if(n=e+2**32*r,!Number.isSafeInteger(n))throw new Error(n+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}if(n=2**32*e+r,!Number.isSafeInteger(n))throw new Error(n+" exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}readInt64(t){let e=0;const r=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;let n=!0;for(let i=0;i<8;i++){let o=this._dataView.getUint8(t+(this._littleEndian?i:7-i));r&&(n?0!==o&&(o=255&~(o-1),n=!1):o=255&~o),e+=o*256**i}return r&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const ZQ="\r\n\r\n";function KQ(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);const e={};for(const[r,n]of t)e[r.toLowerCase()]=n;return e}function JQ(t){return KQ(t.split("\r\n").map(t=>{const e=t.split(":").map(t=>t.trim());return e[0]=e[0].toLowerCase(),e}))}function $Q(t){let e,r,n;return t&&([,e,r,n]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),r=parseInt(r,10),n=parseInt(n,10)),{start:e,end:r,total:n}}var QQ=r(56);class t0 extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"==typeof this.onEviction)for(const[e,r]of t)this.onEviction(e,r.value)}_deleteIfExpired(t,e){return"number"==typeof e.expiry&&e.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){if(!1===this._deleteIfExpired(t,e))return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const r=e.get(t);return this._getItemValue(t,r)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,r]=t;if(!this.cache.has(e)){!1===this._deleteIfExpired(e,r)&&(yield t)}}for(const t of this.cache){const[e,r]=t;!1===this._deleteIfExpired(e,r)&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:r=this.maxAge}={}){const n="number"==typeof r&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;this.cache.has(t)?this.cache.set(t,{value:e,expiry:n}):this._set(t,{value:e,expiry:n})}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],r=e.length-t;r<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(r>0&&this._emitEvictions(e.slice(0,r)),this.oldCache=new Map(e.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,r]=t;!1===this._deleteIfExpired(e,r)&&(yield[e,r.value])}for(const t of this.oldCache){const[e,r]=t;if(!this.cache.has(e)){!1===this._deleteIfExpired(e,r)&&(yield[e,r.value])}}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const r=t[e],[n,i]=r;!1===this._deleteIfExpired(n,i)&&(yield[n,i.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const r=t[e],[n,i]=r;if(!this.cache.has(n)){!1===this._deleteIfExpired(n,i)&&(yield[n,i.value])}}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[r,n]of this.entriesAscending())t.call(e,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}var e0=r(25);class r0{constructor(t,e,r=null){this.offset=t,this.length=e,this.data=r}get top(){return this.offset+this.length}}class n0{constructor(t,e,r){this.offset=t,this.length=e,this.blockIds=r}}class i0 extends QQ.a{constructor(t,{blockSize:e=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new t0({maxSize:r}),this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const r=[],n=[],i=[];for(const{offset:e,length:o}of t){let t=e+o;const{fileSize:a}=this;null!==a&&(t=Math.min(t,a));for(let o=Math.floor(e/this.blockSize)*this.blockSize;o<t;o+=this.blockSize){const t=Math.floor(o/this.blockSize);this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),n.push(t)),this.blockRequests.has(t)&&r.push(this.blockRequests.get(t)),i.push(t)}}await Object(e0.h)(),this.fetchBlocks(e);const o=[];for(const t of n)this.blockRequests.has(t)&&o.push(this.blockRequests.get(t));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],s=i.filter(t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t));if(s.forEach(t=>this.blockIdsToFetch.add(t)),s.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const t of s){const e=this.blockRequests.get(t);if(!e)throw new Error(`Block ${t} is not in the block requests`);a.push(e)}await Promise.allSettled(a)}if(e&&e.aborted)throw new e0.a("Request was aborted");const l=i.map(t=>this.blockCache.get(t)),u=l.filter(t=>!t);if(u.length)throw new e0.b(u,"Request failed");const c=new Map(Object(e0.i)(i,l));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(e,t);for(let n=0;n<e.length;++n){const i=e[n];for(const e of i.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await r)[n],i=e*this.blockSize,o=i-t.offset,a=Math.min(o+this.blockSize,t.data.byteLength),s=t.data.slice(o,a),l=new r0(i,s.byteLength,s,e);this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(r){if("AbortError"!==r.name)throw r;r.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((t,e)=>t-e);if(0===e.length)return[];let r=[],n=null;const i=[];for(const t of e)null===n||n+1===t?(r.push(t),n=t):(i.push(new n0(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[t],n=t);return i.push(new n0(r[0]*this.blockSize,r.length*this.blockSize,r)),i}readSliceData(t,e){return t.map(t=>{let r=t.offset+t.length;null!==this.fileSize&&(r=Math.min(this.fileSize,r));const n=Math.floor(t.offset/this.blockSize),i=Math.floor(r/this.blockSize),o=new ArrayBuffer(t.length),a=new Uint8Array(o);for(let o=n;o<=i;++o){const n=e.get(o),i=n.offset-t.offset,s=n.top-r;let l,u=0,c=0;i<0?u=-i:i>0&&(c=i),l=s<0?n.length-u:r-n.offset-u;const h=new Uint8Array(n.data,u,l);a.set(h,c)}return o})}}var o0=r(63);class a0 extends o0.b{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class s0 extends o0.a{constructor(t,e){super(t),this.credentials=e}async request({headers:t,credentials:e,signal:r}={}){const n=await fetch(this.url,{headers:t,credentials:e,signal:r});return new a0(n)}}class l0 extends o0.b{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class u0 extends o0.a{constructRequest(t,e){return new Promise((r,n)=>{const i=new XMLHttpRequest;i.open("GET",this.url),i.responseType="arraybuffer";for(const[e,r]of Object.entries(t))i.setRequestHeader(e,r);i.onload=()=>{const t=i.response;r(new l0(i,t))},i.onerror=n,i.onabort=()=>n(new e0.a("Request aborted")),i.send(),e&&(e.aborted&&i.abort(),e.addEventListener("abort",()=>i.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}var c0=r(120);class h0 extends QQ.a{constructor(t,e,r,n){super(),this.client=t,this.headers=e,this.maxRanges=r,this.allowFullFile=n,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map(t=>this.fetchSlice(t,e))))}async fetchSlices(t,e){const r=await this.client.request({headers:{...this.headers,Range:"bytes="+t.map(({offset:t,length:e})=>`${t}-${t+e}`).join(",")},signal:e});if(r.ok){if(206===r.status){const{type:n,params:i}=function(t){const[e,...r]=t.split(";").map(t=>t.trim());return{type:e,params:KQ(r.map(t=>t.split("=")))}}(r.getHeader("content-type"));if("multipart/byteranges"===n){const t=function(t,e){let r=null;const n=new TextDecoder("ascii"),i=[],o="--"+e,a=o+"--";for(let e=0;e<10;++e)n.decode(new Uint8Array(t,e,o.length))===o&&(r=e);if(null===r)throw new Error("Could not find initial boundary");for(;r<t.byteLength;){const e=n.decode(new Uint8Array(t,r,Math.min(o.length+1024,t.byteLength-r)));if(0===e.length||e.startsWith(a))break;if(!e.startsWith(o))throw new Error("Part does not start with boundary");const s=e.substr(o.length+2);if(0===s.length)break;const l=s.indexOf(ZQ),u=JQ(s.substr(0,l)),{start:c,end:h,total:f}=$Q(u["content-range"]),p=r+o.length+l+ZQ.length,d=parseInt(h,10)+1-parseInt(c,10);i.push({headers:u,data:t.slice(p,p+d),offset:c,length:d,fileSize:f}),r=p+d+4}return i}(await r.getData(),i.boundary);return this._fileSize=t[0].fileSize||null,t}const o=await r.getData(),{start:a,end:s,total:l}=$Q(r.getHeader("content-range"));this._fileSize=l||null;const u=[{data:o,offset:a,length:s-a}];if(t.length>1){const r=await Promise.all(t.slice(1).map(t=>this.fetchSlice(t,e)));return u.concat(r)}return u}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await r.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:r,length:n}=t,i=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+n}`},signal:e});if(i.ok){if(206===i.status){const t=await i.getData(),{total:e}=$Q(i.getHeader("content-range"));return this._fileSize=e||null,{data:t,offset:r,length:n}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await i.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function f0(t,{blockSize:e,cacheSize:r}){return null===e?t:new i0(t,{blockSize:e,cacheSize:r})}function p0(t,{forceXHR:e=!1,...r}={}){return"function"!=typeof fetch||e?"undefined"!=typeof XMLHttpRequest?function(t,{headers:e={},maxRanges:r=0,allowFullFile:n=!1,...i}={}){const o=new u0(t);return f0(new h0(o,e,r,n),i)}(t,r):function(t,{headers:e={},maxRanges:r=0,allowFullFile:n=!1,...i}={}){const o=new c0.a(t);return f0(new h0(o,e,r,n),i)}(t,r):function(t,{headers:e={},credentials:r,maxRanges:n=0,allowFullFile:i=!1,...o}={}){const a=new s0(t,r);return f0(new h0(a,e,n,i),o)}(t,r)}QQ.a;QQ.a;r(124);const d0=Object(e0.f)(GQ.e),g0=Object(e0.f)(GQ.i),y0={};Object(e0.c)(y0,d0),Object(e0.c)(y0,g0);Object(e0.f)(GQ.g);const m0={nextZero:(t,e)=>{let r=e;for(;0!==t[r];)r++;return r},readUshort:(t,e)=>t[e]<<8|t[e+1],readShort:(t,e)=>{const r=m0.ui8;return r[0]=t[e+1],r[1]=t[e+0],m0.i16[0]},readInt:(t,e)=>{const r=m0.ui8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e+0],m0.i32[0]},readUint:(t,e)=>{const r=m0.ui8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e+0],m0.ui32[0]},readASCII:(t,e,r)=>r.map(r=>String.fromCharCode(t[e+r])).join(""),readFloat:(t,e)=>{const r=m0.ui8;return Object(e0.g)(4,n=>{r[n]=t[e+3-n]}),m0.fl32[0]},readDouble:(t,e)=>{const r=m0.ui8;return Object(e0.g)(8,n=>{r[n]=t[e+7-n]}),m0.fl64[0]},writeUshort:(t,e,r)=>{t[e]=r>>8&255,t[e+1]=255&r},writeUint:(t,e,r)=>{t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255},writeASCII:(t,e,r)=>{Object(e0.g)(r.length,n=>{t[e+n]=r.charCodeAt(n)})},ui8:new Uint8Array(8)};m0.fl64=new Float64Array(m0.ui8.buffer),m0.writeDouble=(t,e,r)=>{m0.fl64[0]=r,Object(e0.g)(8,r=>{t[e+r]=m0.ui8[7-r]})};function _0(t){switch(t){case GQ.h.BYTE:case GQ.h.ASCII:case GQ.h.SBYTE:case GQ.h.UNDEFINED:return 1;case GQ.h.SHORT:case GQ.h.SSHORT:return 2;case GQ.h.LONG:case GQ.h.SLONG:case GQ.h.FLOAT:case GQ.h.IFD:return 4;case GQ.h.RATIONAL:case GQ.h.SRATIONAL:case GQ.h.DOUBLE:case GQ.h.LONG8:case GQ.h.SLONG8:case GQ.h.IFD8:return 8;default:throw new RangeError("Invalid field type: "+t)}}function v0(t,e,r,n){let i=null,o=null;const a=_0(e);switch(e){case GQ.h.BYTE:case GQ.h.ASCII:case GQ.h.UNDEFINED:i=new Uint8Array(r),o=t.readUint8;break;case GQ.h.SBYTE:i=new Int8Array(r),o=t.readInt8;break;case GQ.h.SHORT:i=new Uint16Array(r),o=t.readUint16;break;case GQ.h.SSHORT:i=new Int16Array(r),o=t.readInt16;break;case GQ.h.LONG:case GQ.h.IFD:i=new Uint32Array(r),o=t.readUint32;break;case GQ.h.SLONG:i=new Int32Array(r),o=t.readInt32;break;case GQ.h.LONG8:case GQ.h.IFD8:i=new Array(r),o=t.readUint64;break;case GQ.h.SLONG8:i=new Array(r),o=t.readInt64;break;case GQ.h.RATIONAL:i=new Uint32Array(2*r),o=t.readUint32;break;case GQ.h.SRATIONAL:i=new Int32Array(2*r),o=t.readInt32;break;case GQ.h.FLOAT:i=new Float32Array(r),o=t.readFloat32;break;case GQ.h.DOUBLE:i=new Float64Array(r),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: "+e)}if(e!==GQ.h.RATIONAL&&e!==GQ.h.SRATIONAL)for(let e=0;e<r;++e)i[e]=o.call(t,n+e*a);else for(let e=0;e<r;e+=2)i[e]=o.call(t,n+e*a),i[e+1]=o.call(t,n+(e*a+4));return e===GQ.h.ASCII?new TextDecoder("utf-8").decode(i):i}class b0{constructor(t,e,r){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=r}}class x0 extends Error{constructor(t){super("No image at index "+t),this.index=t}}class w0{async readRasters(t={}){const{window:e,width:r,height:n}=t;let{resX:i,resY:o,bbox:a}=t;const s=await this.getImage();let l=s;const u=await this.getImageCount(),c=s.getBoundingBox();if(e&&a)throw new Error('Both "bbox" and "window" passed.');if(r||n){if(e){const[t,r]=s.getOrigin(),[n,i]=s.getResolution();a=[t+e[0]*n,r+e[1]*i,t+e[2]*n,r+e[3]*i]}const t=a||c;if(r){if(i)throw new Error("Both width and resX passed");i=(t[2]-t[0])/r}if(n){if(o)throw new Error("Both width and resY passed");o=(t[3]-t[1])/n}}if(i||o){const t=[];for(let e=0;e<u;++e){const r=await this.getImage(e),{SubfileType:n,NewSubfileType:i}=r.fileDirectory;(0===e||2===n||1&i)&&t.push(r)}t.sort((t,e)=>t.getWidth()-e.getWidth());for(let e=0;e<t.length;++e){const r=t[e],n=(c[2]-c[0])/r.getWidth(),a=(c[3]-c[1])/r.getHeight();if(l=r,i&&i>n||o&&o>a)break}}let h=e;if(a){const[t,e]=s.getOrigin(),[r,n]=l.getResolution(s);h=[Math.round((a[0]-t)/r),Math.round((a[1]-e)/n),Math.round((a[2]-t)/r),Math.round((a[3]-e)/n)],h=[Math.min(h[0],h[2]),Math.min(h[1],h[3]),Math.max(h[0],h[2]),Math.max(h[1],h[3])]}return l.readRasters({...t,window:h})}}class E0 extends w0{constructor(t,e,r,n,i={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=r,this.firstIFDOffset=n,this.cache=i.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const r=this.bigTiff?4048:1024;return new HQ((await this.source.fetch([{offset:t,length:void 0!==e?e:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,r=this.bigTiff?8:2;let n=await this.getSlice(t);const i=this.bigTiff?n.readUint64(t):n.readUint16(t),o=i*e+(this.bigTiff?16:6);n.covers(t,o)||(n=await this.getSlice(t,o));const a={};let s=t+(this.bigTiff?8:2);for(let t=0;t<i;s+=e,++t){const t=n.readUint16(s),e=n.readUint16(s+2),r=this.bigTiff?n.readUint64(s+4):n.readUint32(s+4);let i,o;const l=_0(e),u=s+(this.bigTiff?12:8);if(l*r<=(this.bigTiff?8:4))i=v0(n,e,r,u);else{const t=n.readOffset(u),o=_0(e)*r;if(n.covers(t,o))i=v0(n,e,r,t);else{i=v0(await this.getSlice(t,o),e,r,t)}}o=1===r&&-1===GQ.d.indexOf(t)&&e!==GQ.h.RATIONAL&&e!==GQ.h.SRATIONAL?i[0]:i,a[GQ.e[t]]=o}const l=function(t){const e=t.GeoKeyDirectory;if(!e)return null;const r={};for(let n=4;n<=4*e[3];n+=4){const i=GQ.i[e[n]],o=e[n+1]?GQ.e[e[n+1]]:null,a=e[n+2],s=e[n+3];let l=null;if(o){if(l=t[o],null==l)throw new Error(`Could not get value of geoKey '${i}'.`);"string"==typeof l?l=l.substring(s,s+a-1):l.subarray&&(l=l.subarray(s,s+a),1===a&&(l=l[0]))}else l=s;r[i]=l}return r}(a),u=n.readOffset(t+r+e*i);return new b0(a,l,u)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof x0)throw new x0(t);throw e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(0===e.nextIFDByteOffset)throw new x0(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new WQ(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(t){if(!(t instanceof x0))throw t;e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",r=e.length+100;let n=await this.getSlice(t,r);if(e===v0(n,GQ.h.ASCII,e.length,t)){const e=v0(n,GQ.h.ASCII,r,t).split("\n")[0],i=Number(e.split("=")[1].split(" ")[0])+e.length;i>r&&(n=await this.getSlice(t,i));const o=v0(n,GQ.h.ASCII,i,t);this.ghostValues={},o.split("\n").filter(t=>t.length>0).map(t=>t.split("=")).forEach(([t,e])=>{this.ghostValues[t]=e})}return this.ghostValues}static async fromSource(t,e,r){const n=(await t.fetch([{offset:0,length:1024}],r))[0],i=new XQ(n),o=i.getUint16(0,0);let a;if(18761===o)a=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");a=!1}const s=i.getUint16(2,a);let l;if(42===s)l=!1;else{if(43!==s)throw new TypeError("Invalid magic number.");l=!0;if(8!==i.getUint16(4,a))throw new Error("Unsupported offset byte-size.")}const u=l?i.getUint64(8,a):i.getUint32(4,a);return new E0(t,a,l,u,e)}close(){return"function"==typeof this.source.close&&this.source.close()}}class O0 extends w0{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let e=0,r=0;for(let n=0;n<this.imageFiles.length;n++){const i=this.imageFiles[n];for(let o=0;o<this.imageCounts[n];o++){if(t===e){const t=await i.requestIFD(r);return new WQ(t.fileDirectory,t.geoKeyDirectory,i.dataView,i.littleEndian,i.cache,i.source)}e++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((t,e)=>t+e,0),this.imageCount}}var S0,I0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),C0="STATISTICS_MAXIMUM",T0="STATISTICS_MINIMUM";function P0(t){try{return t.getBoundingBox()}catch(r){var e=t.fileDirectory;return[0,0,e.ImageWidth,e.ImageLength]}}function R0(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.fileDirectory.ImageLength]}}function L0(t,e){try{return t.getResolution(e)[0]}catch(r){return e.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth}}function M0(t){var e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey){var r="EPSG:"+e.ProjectedCSTypeGeoKey;if(!(n=Object(u.o)(r)))(i=Object(Pn.c)(e.ProjLinearUnitsGeoKey))&&(n=new u.b({code:r,units:i}));return n}if(e.GeographicTypeGeoKey){var n,i;r="EPSG:"+e.GeographicTypeGeoKey;if(!(n=Object(u.o)(r)))(i=Object(Pn.c)(e.GeogAngularUnitsGeoKey))&&(n=new u.b({code:r,units:i}));return n}return null}function N0(t){return t.getImageCount().then((function(e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t.getImage(n);return Promise.all(r)}))}function A0(t,e){return(t.overviews?async function(t,e=[],r={},n){const i=await E0.fromSource(p0(t,r),n),o=await Promise.all(e.map(t=>E0.fromSource(p0(t,r))));return new O0(i,o)}(t.url,t.overviews,e):async function(t,e={},r){return E0.fromSource(p0(t,e),r)}(t.url,e)).then(N0)}function k0(t,e,r,n,i){if(Array.isArray(t)){var o=t.length;if(!Array.isArray(e)||o!=e.length){var a=new Error(n);throw i(a),a}for(var s=0;s<o;++s)k0(t[s],e[s],r,n,i)}else if(e=e,Math.abs(t-e)>r*t)throw new Error(n)}function j0(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}var F0=function(t){function e(e){var r=t.call(this,{state:Qn.a.LOADING,tileGrid:null,projection:null,opaque:e.opaque,transition:e.transition,interpolate:!1!==e.interpolate,wrapX:e.wrapX})||this;r.sourceInfo_=e.sources;var n=r.sourceInfo_.length;r.sourceOptions_=e.sourceOptions,r.sourceImagery_=new Array(n),r.resolutionFactors_=new Array(n),r.samplesPerPixel_,r.nodataValues_,r.metadata_,r.normalize_=!1!==e.normalize,r.addAlpha_=!1,r.error_=null,r.readMethod_=e.convertToRGB?"readRGB":"readRasters",r.setKey(r.sourceInfo_.map((function(t){return t.url})).join(","));for(var i=r,o=new Array(n),a=0;a<n;++a)o[a]=A0(r.sourceInfo_[a],r.sourceOptions_);return Promise.all(o).then((function(t){i.configure_(t)})).catch((function(t){console.error(t),i.error_=t,i.setState(Qn.a.ERROR)})),r}return I0(e,t),e.prototype.getError=function(){return this.error_},e.prototype.configure_=function(t){for(var e,r,n,i,o=new Array(t.length),a=new Array(t.length),s=new Array(t.length),l=0,c=t.length,h=function(u){var c=t[u],h=c.length,p=void 0,d=void 0,g=new Array(h),y=new Array(h);a[u]=new Array(h),s[u]=new Array(h);for(var m=0;m<h;++m){var _=c[m],v=_.getGDALNoData();s[u][m]=_.getGDALMetadata(0),a[u][m]=null===v?NaN:v;var b=f.sourceInfo_[u].bands;o[u]=b?b.length:_.getSamplesPerPixel();var x=h-(m+1);p||(p=P0(_)),d||(d=R0(_)),y[x]=L0(_,c[0]),g[x]=[_.getTileWidth(),_.getTileHeight()]}if(e?Object(mt.B)(e,p,e):e=p,r){var w="Origin mismatch for source ".concat(u,", got [").concat(d,"] but expected [").concat(r,"]");k0(r,d,0,w,f.viewRejector)}else r=d;if(i){i.length-l>y.length&&(l=i.length-y.length);var E=i[i.length-1]/y[y.length-1];f.resolutionFactors_[u]=E;var O=y.map((function(t){return t*E}));w="Resolution mismatch for source ".concat(u,", got [").concat(O,"] but expected [").concat(i,"]");k0(i.slice(l,i.length),O,.02,w,f.viewRejector)}else i=y,f.resolutionFactors_[u]=1;n?k0(n.slice(l,n.length),g,0,"Tile size mismatch for source ".concat(u),f.viewRejector):n=g,f.sourceImagery_[u]=c.reverse()},f=this,p=0;p<c;++p)h(p);for(var d=0,g=this.sourceImagery_.length;d<g;++d)for(var y=this.sourceImagery_[d];y.length<i.length;)y.unshift(void 0);if(!this.getProjection()){var m=t[0];for(d=m.length-1;d>=0;--d){var _=M0(m[d]);if(_){this.projection=_;break}}}this.samplesPerPixel_=o,this.nodataValues_=a,this.metadata_=s;t:for(p=0;p<c;++p){if(void 0!==this.sourceInfo_[p].nodata){this.addAlpha_=!0;break}var v=a[p],b=this.sourceInfo_[p].bands;if(b){for(d=0;d<b.length;++d)if(!isNaN(v[b[d]-1])){this.addAlpha_=!0;break t}}else for(var x=0;x<v.length;++x)if(!isNaN(v[x])){this.addAlpha_=!0;break t}}var w=this.addAlpha_?1:0;this.bandCount=o.reduce((function(t,e){return t+=e}),0)+w;var E=new Ac.a({extent:e,minZoom:l,origin:r,resolutions:i,tileSizes:n});this.tileGrid=E,this.setLoader(this.loadTile_.bind(this)),this.setState(Qn.a.READY),this.viewResolver({projection:this.projection,resolutions:i,center:Object(u.w)(Object(mt.x)(e),this.projection),extent:Object(u.x)(e,this.projection),zoom:0})},e.prototype.loadTile_=function(t,e,r){for(var n=Object(Aa.d)(this.tileGrid.getTileSize(t)),i=this.sourceImagery_.length,o=new Array(i),a=this.addAlpha_,s=this.bandCount,l=this.samplesPerPixel_,u=this.nodataValues_,c=this.sourceInfo_,h=function(i){var a=c[i],s=f.resolutionFactors_[i],l=[Math.round(e*(n[0]*s)),Math.round(r*(n[1]*s)),Math.round((e+1)*(n[0]*s)),Math.round((r+1)*(n[1]*s))],h=f.sourceImagery_[i][t],p=void 0;a.bands&&(p=a.bands.map((function(t){return t-1})));var d=void 0;d=isNaN(a.nodata)?p?p.map((function(t){return u[i][t]})):u[i]:a.nodata,o[i]=h[f.readMethod_]({window:l,width:n[0],height:n[1],samples:p,fillValue:d,pool:(S0||(S0=new NQ),S0),interleave:!1})},f=this,p=0;p<i;++p)h(p);var d=n[0]*n[1],g=d*s,y=this.normalize_,m=this.metadata_;return Promise.all(o).then((function(t){var e;e=y?new Uint8Array(g):new Float32Array(g);for(var r,n=0,o=0;o<d;++o){for(var s=a,h=0;h<i;++h){var f=c[h],p=f.min,_=f.max,v=void 0,b=void 0;if(y){var x=m[h][0];void 0===p&&(p=x&&T0 in x?parseFloat(x.STATISTICS_MINIMUM):(r=t[h][0])instanceof Int8Array?-128:r instanceof Int16Array?-32768:r instanceof Int32Array?-2147483648:r instanceof Float32Array?12e-39:0),void 0===_&&(_=x&&C0 in x?parseFloat(x.STATISTICS_MAXIMUM):j0(t[h][0])),b=-p*(v=255/(_-p))}for(var w=0;w<l[h];++w){var E=t[h][w][o],O=void 0;if(O=y?Object(mo.b)(v*E+b,0,255):E,a){var S=f.nodata;if(void 0===S){var I=void 0;I=f.bands?f.bands[w]-1:w,S=u[h][I]}E!==S&&(s=!1,e[n]=O)}else e[n]=O;n++}}a&&(s||(e[n]=255),n++)}return e}))},e}(TQ);F0.prototype.getView;var D0=F0,G0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U0="default",B0="truncated",z0=function(t){function e(e,r,n,i,o,a,s){var l=t.call(this,r,n,i,o,a,s)||this;return l.zoomifyImage_=null,l.tileSize_=e,l}return G0(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==Ef.a.LOADED){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var n=Object(oi.a)(r[0],r[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(bf.a),V0=function(t){function e(e){var r=this,n=e,i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var o=n.size,a=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:U0,s=n.tilePixelRatio||1,l=o[0],u=o[1],c=[],h=n.tileSize||yo.b,f=h*s;switch(a){case U0:for(;l>f||u>f;)c.push([Math.ceil(l/f),Math.ceil(u/f)]),f+=f;break;case B0:for(var p=l,d=u;p>f||d>f;)c.push([Math.ceil(p/f),Math.ceil(d/f)]),p>>=1,d>>=1;break;default:Object(Ui.a)(!1,53)}c.push([1,1]),c.reverse();for(var g=[s],y=[0],m=1,_=c.length;m<_;m++)g.push(s<<m),y.push(c[m-1][0]*c[m-1][1]+y[m-1]);g.reverse();var v=new Ac.a({tileSize:h,extent:n.extent||[0,-u,l,0],resolutions:g}),b=n.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var x=Nf(b),w=h*s;var E=Lf(x.map((function(t){return function(e,r,n){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*c[i][0],l={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+y[i])/w|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))}}}))),O=z0.bind(null,Object(Aa.d)(h*s));(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,projection:n.projection,tilePixelRatio:s,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:O,tileGrid:v,tileUrlFunction:E,transition:n.transition})||this).zDirection=n.zDirection;var S=E(v.getTileCoordForCoordAndResolution(Object(mt.x)(v.getExtent()),g[g.length-1]),1,null),I=new Image;return I.addEventListener("error",function(){w=h,this.changed()}.bind(r)),I.src=S,r}return G0(e,t),e}(Uf),q0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Y0(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var W0=function(t){function e(e){var r=this,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var o=n.url||"";o+=o.lastIndexOf("/")===o.length-1||""===o?"":"/";var a=n.version||uZ,s=n.sizes||[],l=n.size;Object(Ui.a)(null!=l&&Array.isArray(l)&&2==l.length&&!isNaN(l[0])&&l[0]>0&&!isNaN(l[1])&&l[1]>0,60);var u,c,f,p=l[0],d=l[1],g=n.tileSize,y=n.tilePixelRatio||1,m=n.format||"jpg",_=n.quality||(n.version==lZ?"native":"default"),v=n.resolutions||[],b=n.supports||[],x=n.extent||[0,-d,p,0],w=null!=s&&Array.isArray(s)&&s.length>0,E=void 0!==g&&("number"==typeof g&&Number.isInteger(g)&&g>0||Array.isArray(g)&&g.length>0),O=null!=b&&Array.isArray(b)&&(Object(h.f)(b,"regionByPx")||Object(h.f)(b,"regionByPct"))&&(Object(h.f)(b,"sizeByWh")||Object(h.f)(b,"sizeByH")||Object(h.f)(b,"sizeByW")||Object(h.f)(b,"sizeByPct"));if(v.sort((function(t,e){return e-t})),E||O)if(null!=g&&("number"==typeof g&&Number.isInteger(g)&&g>0?(u=g,c=g):Array.isArray(g)&&g.length>0&&((1==g.length||null==g[1]&&Number.isInteger(g[0]))&&(u=g[0],c=g[0]),2==g.length&&(Number.isInteger(g[0])&&Number.isInteger(g[1])?(u=g[0],c=g[1]):null==g[0]&&Number.isInteger(g[1])&&(u=g[1],c=g[1])))),void 0!==u&&void 0!==c||(u=yo.b,c=yo.b),0==v.length)for(var S=f=Math.max(Math.ceil(Math.log(p/u)/Math.LN2),Math.ceil(Math.log(d/c)/Math.LN2));S>=0;S--)v.push(Math.pow(2,S));else{var I=Math.max.apply(Math,v);f=Math.round(Math.log(I)/Math.LN2)}else if(u=p,c=d,v=[],w){s.sort((function(t,e){return t[0]-e[0]})),f=-1;var C=[];for(S=0;S<s.length;S++){var T=p/s[S][0];v.length>0&&v[v.length-1]==T?C.push(S):(v.push(T),f++)}if(C.length>0)for(S=0;S<C.length;S++)s.splice(C[S]-S,1)}else v.push(1),s.push([p,d]),f=0;var P=new Ac.a({tileSize:[u,c],extent:x,origin:Object(mt.D)(x),resolutions:v}),R=z0.bind(null,Object(Aa.d)(g||256).map((function(t){return t*y})));return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:R,tileGrid:P,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,r){var n,i,l=t[0];if(!(l>f)){var g=t[1],y=t[2],x=v[l];if(!(void 0===g||void 0===y||void 0===x||g<0||Math.ceil(p/x/u)<=g||y<0||Math.ceil(d/x/c)<=y)){if(O||E){var S=g*u*x,I=y*c*x,C=u*x,T=c*x,P=u,R=c;if(S+C>p&&(C=p-S),I+T>d&&(T=d-I),S+u*x>p&&(P=Math.floor((p-S+x-1)/x)),I+c*x>d&&(R=Math.floor((d-I+x-1)/x)),0==S&&C==p&&0==I&&T==d)n="full";else if(!O||Object(h.f)(b,"regionByPx"))n=S+","+I+","+C+","+T;else if(Object(h.f)(b,"regionByPct")){n="pct:"+Y0(S/p*100)+","+Y0(I/d*100)+","+Y0(C/p*100)+","+Y0(T/d*100)}a!=cZ||O&&!Object(h.f)(b,"sizeByWh")?!O||Object(h.f)(b,"sizeByW")?i=P+",":Object(h.f)(b,"sizeByH")?i=","+R:Object(h.f)(b,"sizeByWh")?i=P+","+R:Object(h.f)(b,"sizeByPct")&&(i="pct:"+Y0(100/x)):i=P+","+R}else if(n="full",w){var L=s[l][0],M=s[l][1];i=a==cZ?L==p&&M==d?"max":L+","+M:L==p?"full":L+","}else i=a==cZ?"max":"full";return o+n+"/"+i+"/0/"+_+"."+m}}},transition:n.transition})||this).zDirection=n.zDirection,r}return q0(e,t),e}(Uf),X0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H0=function(t){function e(e){var r=this,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,interpolate:i,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.hidpi_=void 0===n.hidpi||n.hidpi,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:ip.b,r.params_=n.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return X0(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Object(mt.h)(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(ii.a)(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var l=this.ratio_*Object(mt.F)(t)/2,u=this.ratio_*Object(mt.A)(t)/2;t[0]=a-l,t[1]=s-u,t[2]=a+l,t[3]=s+u}var c=e/r,h=Math.ceil(Object(mt.F)(t)/c),f=Math.ceil(Object(mt.A)(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*f/2,t[3]=s+c*f/2,this.imageSize_[0]=h,this.imageSize_[1]=f;var p=this.getRequestUrl_(t,this.imageSize_,r,n,o);return this.image_=new op.a(t,e,r,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Di.a.CHANGE,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){var o=n.getCode().split(/:(?=\d+$)/).pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*r);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&Object(Ui.a)(!1,50),Yf(s,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(ii.a)(this.params_,t),this.image_=null,this.changed()},e}(ip.a),Z0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),K0=function(t){function e(e){var r=this,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,interpolate:i,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,r.canvas_=null,r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return Z0(e,t),e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Object(mt.h)(i.getExtent(),t))return i;t=t.slice(),Object(mt.K)(t,this.ratio_);var o=[Object(mt.F)(t)/e*r,Object(mt.A)(t)/e*r],a=this.canvasFunction_.call(this,t,e,r,o,n);return a&&(i=new u$.a(t,e,r,a)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},e}(ip.a),J0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var $0=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(n=e.interpolate),(r=t.call(this,{interpolate:n,projection:e.projection,resolutions:e.resolutions})||this).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:ip.b,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return J0(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&Object(mt.h)(i.getExtent(),t))return i;1!=this.ratio_&&(t=t.slice(),Object(mt.K)(t,this.ratio_));var o=[Object(mt.F)(t)/e*r,Object(mt.A)(t)/e*r];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(i=new op.a(t,e,r,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(Di.a.CHANGE,this.handleImageChange.bind(this))}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){Object(ii.a)(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,n,i){var o=function(t,e,r,n){var i=Object(mt.F)(t),o=Object(mt.A)(t),a=e[0],s=e[1],l=.0254/n;return s*i>a*o?i*r/(a*l):o*r/(s*l)}(r,n,this.metersPerUnit_,this.displayDpi_),a=Object(mt.x)(r),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return Object(ii.a)(s,e),Yf(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(ip.a),Q0=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t1=function(t){function e(e){var r=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:ip.b,o=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(o=e.interpolate),(r=t.call(this,{attributions:e.attributions,interpolate:o,projection:Object(u.o)(e.projection)})||this).url_=e.url,r.imageExtent_=e.imageExtent,r.image_=new op.a(r.imageExtent_,void 0,1,r.url_,n,i),r.imageSize_=e.imageSize?e.imageSize:null,r.image_.addEventListener(Di.a.CHANGE,r.handleImageChange.bind(r)),r}return Q0(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,n){return Object(mt.G)(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==$g.a.LOADED){var r=this.image_.getExtent(),n=this.image_.getImage(),i=void 0,o=void 0;this.imageSize_?(i=this.imageSize_[0],o=this.imageSize_[1]):(i=n.width,o=n.height);var a=Object(mt.F)(r),s=Object(mt.A)(r),l=a/i,u=s/o,c=i,h=o;if(l>u?c=Math.round(a/u):h=Math.round(s/l),c!==i||h!==o){var f=Object(oi.a)(c,h);this.getInterpolate()||Object(ii.a)(f,_$.a);var p=f.canvas;f.drawImage(n,0,0,i,o,0,0,p.width,p.height),this.image_.setImage(p)}}t.prototype.handleImageChange.call(this,e)},e}(ip.a),e1=r(79),r1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n1=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',ej],i1={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},o1={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},a1=function(t){function e(e){var r=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(r=e.interpolate);var n=e.layer.indexOf("-"),i=-1==n?e.layer:e.layer.slice(0,n),o=o1[i],a=i1[e.layer],s=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+a.extension;return t.call(this,{attributions:n1,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:r,maxZoom:null!=e.maxZoom?e.maxZoom:o.maxZoom,minZoom:null!=e.minZoom?e.minZoom:o.minZoom,opaque:a.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})||this}return r1(e,t),e}(Fk),s1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l1=function(t){function e(e){var r=this,n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).params_=n.params||{},r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=Object(mt.k)(),r.setKey(r.getKeyForParams_()),r}return s1(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){var s,l=i.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=e[0]+","+e[1],o.BBOX=r.join(","),o.BBOXSR=l,o.IMAGESR=l,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),1==a.length)s=a[0];else s=a[Object(mo.g)(Object(Tf.f)(t),a.length)];return Yf(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){Object(ii.a)(this.params_,t),this.setKey(this.getKeyForParams_())},e.prototype.tileUrlFunction=function(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var i=n.getTileCoordExtent(t,this.tmpExtent_),o=Object(Aa.d)(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=Object(Aa.c)(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(ii.a)(a,this.params_),this.getRequestUrl_(t,o,i,e,r,a)}},e}(Uf),u1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c1=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,{opaque:!1,projection:n.projection,tileGrid:n.tileGrid,wrapX:void 0===n.wrapX||n.wrapX,zDirection:n.zDirection,url:n.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,e){var n=t.getTileCoord()[0],i=Object(Aa.d)(r.tileGrid.getTileSize(n)),o=Object(oi.a)(i[0],i[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,i[0]+.5,i[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(e,i[0]/2,i[1]/2,i[0]),o.fillText(e,i[0]/2,i[1]/2,i[0]),t.setImage(o.canvas)}})||this}return u1(e,t),e}(Fk),h1=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f1=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r)||this;return s.src_=n,s.extent_=i,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return h1(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,r){this.state==Ef.a.EMPTY&&!0===r?(this.state=Ef.a.IDLE,Object(Ci.b)(this,Di.a.CHANGE,(function(r){e(this.getData(t))}),this),this.loadInternal_()):!0===r?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=Ef.a.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Ef.a.LOADED,this.changed()},e.prototype.loadInternal_=function(){if(this.state==Ef.a.IDLE)if(this.state=Ef.a.LOADING,this.jsonp_)Object(rJ.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(Ef.a.EMPTY)},e}(vj.a),p1=function(t){function e(e){var r=t.call(this,{projection:Object(u.o)("EPSG:3857"),state:Qn.a.LOADING,zDirection:e.zDirection})||this;if(r.preemptive_=void 0===e.preemptive||e.preemptive,r.tileUrlFunction_=Mf,r.template_=void 0,r.jsonp_=e.jsonp||!1,e.url)if(r.jsonp_)Object(rJ.a)(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):Object(Ui.a)(!1,51);return r}return h1(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout((function(){r(null)}),0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(Qn.a.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,r=Object(u.o)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Object(u.r)(r,n);e=Object(mt.a)(t.bounds,i)}var o=Object(Ff.c)(n),a=t.minzoom||0,s=t.maxzoom||22,l=Object(Ff.b)({extent:o,maxZoom:s,minZoom:a});this.tileGrid=l,this.template_=t.template;var c=t.grids;if(c){if(this.tileUrlFunction_=Rf(c,l),void 0!==t.attribution){var h=void 0!==e?e:o;this.setAttributions((function(e){return Object(mt.G)(h,e.extent)?[t.attribution]:null}))}this.setState(Qn.a.READY)}else this.setState(Qn.a.ERROR)},e.prototype.getTile=function(t,e,r,n,i){var o=Object(Tf.e)(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),l=this.tileUrlFunction_(s,n,i),u=new f1(a,void 0!==l?Ef.a.IDLE:Ef.a.EMPTY,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,u),u},e.prototype.useTile=function(t,e,r){var n=Object(Tf.e)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Cf.b);var d1=window.M={},g1=window.ol={};d1.ClusteredFeature=EG,d1.Control=yu,d1.Feature=mG,d1.Filter=Vx,d1.Label=WP,d1.Layer=Lc,d1.Map=$F,d1.Object=il,d1.Parameters=ZP,d1.Plugin=LG,d1.Popup=Ox,d1.RenderFeature=rR,d1.Style=Em,d1.addProxyException=function(t){var e=new URL(t).origin;-1===tD.indexOf(e)&&tD.push(e)},d1.config=function t(e,r){t[e]=r},d1.control={},d1.control.GetFeatureInfo=cP,d1.control.LayerSwitcher=Hw,d1.control.Location=CE,d1.control.Mouse=TS,d1.control.Navtoolbar=hI,d1.control.OverviewMap=QS,d1.control.Panzoom=PI,d1.control.Panzoombar=Ru,d1.control.Rotate=_O,d1.control.Rotate.onClick=gO,d1.control.Rotate.onMouseDown=pO,d1.control.Rotate.onMouseMove=yO,d1.control.Rotate.onMouseUp=dO,d1.control.Scale=HE,d1.control.ScaleLine=QO,d1.control.WMCSelector=Ld,d1.dialog={},d1.dialog.error=Ux,d1.dialog.info=Gx,d1.dialog.show=Dx,d1.dialog.success=Bx,d1.evt={},d1.evt.ACTIVATED=Dl,d1.evt.ADDED_GEOPACKAGE="added:geopackage",d1.evt.ADDED_GEOPACKAGE_TILE="added:geopackagetile",d1.evt.ADDED_GEOPACKAGE_VECTOR="added:geopackagevector",d1.evt.ADDED_KML=Ll,d1.evt.ADDED_LAYER=Pl,d1.evt.ADDED_MBTILES="added:mbtiles",d1.evt.ADDED_MBTILES_VECTOR="added:mbtilesvector",d1.evt.ADDED_TO_MAP=Cl,d1.evt.ADDED_TO_PANEL=Tl,d1.evt.ADDED_VECTOR_TILE=Al,d1.evt.ADDED_WFS=Nl,d1.evt.ADDED_WMC=Rl,d1.evt.ADDED_WMS=Ml,d1.evt.ADDED_WMTS=Fl,d1.evt.CHANGE=Zl,d1.evt.CHANGE_PROJ=Jl,d1.evt.CHANGE_ROTATION=tu,d1.evt.CHANGE_STYLE=$l,d1.evt.CHANGE_WMC=Kl,d1.evt.CHANGE_ZOOM=Ql,d1.evt.CLICK=eu,d1.evt.COMPLETED=Hl,d1.evt.DEACTIVATED=Gl,d1.evt.DESTROY=zl,d1.evt.DOUBLE_CLICK="doubleclick",d1.evt.EventsManager=rl,d1.evt.HIDE=Bl,d1.evt.HOVER_FEATURES=Yl,d1.evt.LEAVE_FEATURES=Wl,d1.evt.LOAD=Xl,d1.evt.LOAD_LAYERS="load:layers",d1.evt.Listener=tl,d1.evt.MOVE=ru,d1.evt.POPUP_ADDED=nu,d1.evt.POPUP_ADDED_TAB=ou,d1.evt.POPUP_REMOVED=iu,d1.evt.POPUP_REMOVED_TAB=au,d1.evt.REMOVED_FROM_MAP=jl,d1.evt.REMOVED_LAYER=kl,d1.evt.SELECT_FEATURES=Vl,d1.evt.SHOW=Ul,d1.evt.UNSELECT_FEATURES=ql,d1.exception=_l,d1.facade={},d1.facade.Base=Il,d1.filter=YG,d1.filter.AND=function(t){var e="",r=t.length;return t.forEach((function(t,n){e+="(".concat(t.toCQL(),")"),n<r-1&&(e+=" AND ")})),new GG((function(e){return t.every((function(t){return t.getFunctionFilter()(e)}))}),{cqlFilter:e})},d1.filter.EQUAL=function(t,e){return new GG((function(r){return Object.is(r.getAttribute(t),e)}),{cqlFilter:"".concat(t,"='").concat(e,"'")})},d1.filter.Function=GG,d1.filter.GT=function(t,e){return new GG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>e}),{cqlFilter:"".concat(t," > '").concat(e,"'")})},d1.filter.GTE=function(t,e){return new GG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)>=e}),{cqlFilter:"".concat(t," >= '").concat(e,"'")})},d1.filter.LIKE=function(t,e){return new GG((function(r){return r.getAttribute(t).toString().match(new RegExp(e))}),{cqlFilter:"".concat(t," LIKE '%").concat(e,"%'")})},d1.filter.LT=function(t,e){return new GG((function(r){return null!=r.getAttribute(t)&&r.getAttribute(t)<e}),{cqlFilter:"".concat(t," < '").concat(e,"'")})},d1.filter.LTE=qV,d1.filter.NOT=function(t){return new GG((function(e){return!t.getFunctionFilter()(e)}),{cqlFilter:"NOT ".concat(t.toCQL())})},d1.filter.OR=function(t){var e=t.length,r="";return t.forEach((function(t,n){r+="(".concat(t.toCQL(),")"),n<e-1&&(r+=" OR ")})),new GG((function(e){return t.some((function(t){return t.getFunctionFilter()(e)}))}),{cqlFilter:r})},d1.filter.spatial={},d1.filter.spatial.CONTAIN=function(t){var e=KX(t);return new YG((function(t,r){var n=new TW,i=n.read(t);return e.some((function(t){var e=n.read(t);return XX.contains(e,i)}))}),{cqlFilter:JX("CONTAINS",e)})},d1.filter.spatial.DISJOINT=function(t){var e=KX(t);return new YG((function(t,r){var n=new TW,i=n.read(t);return e.some((function(t){var e=n.read(t);return!XX.intersects(i,e)}))}),{cqlFilter:JX("DISJOINT",e)})},d1.filter.spatial.INTERSECT=function(t){var e=KX(t);return new YG((function(t,r){var n=new TW,i=n.read(t);return e.some((function(t){var e=n.read(t);return XX.intersects(i,e)}))}),{cqlFilter:JX("INTERSECTS",e)})},d1.filter.spatial.WITHIN=function(t){var e=KX(t);return new YG((function(t,r){var n=new TW,i=n.read(t);return e.some((function(t){var e=n.read(t);return XX.contains(e,i)}))}),{cqlFilter:JX("WITHIN",e)})},d1.filter.spatial.parseParamToGeometries=KX,d1.format={},d1.format.GeoJSON=CN,d1.format.WKT=LU,d1.geom={},d1.geom.geojson={},d1.geom.geojson.type={},d1.geom.geojson.type.GEOMETRY_COLLECTION="GeometryCollection",d1.geom.geojson.type.LINE_STRING="LineString",d1.geom.geojson.type.MULTI_LINE_STRING="MultiLineString",d1.geom.geojson.type.MULTI_POINT="MultiPoint",d1.geom.geojson.type.MULTI_POLYGON="MultiPolygon",d1.geom.geojson.type.POINT="Point",d1.geom.geojson.type.POLYGON="Polygon",d1.geom.parse=vA,d1.geom.parseWFS=function(t){var e;return t===pA?e=zc:t===dA?e=jc:t===gA?e=Fc:t===yA?e=Dc:t===mA?e=Gc:t===_A&&(e=Uc),e},d1.geom.wfs={},d1.geom.wfs.type={},d1.geom.wfs.type.LINE=dA,d1.geom.wfs.type.MLINE=mA,d1.geom.wfs.type.MPOINT=yA,d1.geom.wfs.type.MPOLYGON=_A,d1.geom.wfs.type.POINT=pA,d1.geom.wfs.type.POLYGON=gA,d1.geom.wkt={},d1.geom.wkt.type={},d1.geom.wkt.type.CIRCLE=qc,d1.geom.wkt.type.GEOMETRY=kc,d1.geom.wkt.type.GEOMETRY_COLLECTION=Vc,d1.geom.wkt.type.LINEAR_RING=Bc,d1.geom.wkt.type.LINE_STRING=jc,d1.geom.wkt.type.MULTI_LINE_STRING=Gc,d1.geom.wkt.type.MULTI_POINT=Dc,d1.geom.wkt.type.MULTI_POLYGON=Uc,d1.geom.wkt.type.POINT=zc,d1.geom.wkt.type.POLYGON=Fc,d1.handler={},d1.handler.Feature=_R,d1.impl={},d1.impl.Control=pd,d1.impl.Feature=cG,d1.impl.GetCapabilities=Mh,d1.impl.Label=DP,d1.impl.Layer=Rh,d1.impl.Map=id,d1.impl.Popup=cx,d1.impl.RenderFeature=iR,d1.impl.Style=Ny,d1.impl.View=Bp,d1.impl.control={},d1.impl.control.GetFeatureInfo=QT,d1.impl.control.LayerSwitcher=og,d1.impl.control.Location=yE,d1.impl.control.Mouse=_S,d1.impl.control.Navtoolbar=eI,d1.impl.control.OverviewMap=BS,d1.impl.control.Panzoom=bI,d1.impl.control.Panzoombar=ml,d1.impl.control.Rotate=nO,d1.impl.control.Scale=DE,d1.impl.control.ScaleLine=zO,d1.impl.control.WMCSelector=wd,d1.impl.format={},d1.impl.format.DescribeFeatureType=GN,d1.impl.format.DescribeFeatureTypeXML=FN,d1.impl.format.GML=KN,d1.impl.format.GeoJSON=vN,d1.impl.format.KML=GM,d1.impl.format.WKT=EU,d1.impl.format.WMC=HA,d1.impl.format.WMSCapabilities=_f,d1.impl.format.WMTSCapabilities=AU,d1.impl.format.XML=RN,d1.impl.handler={},d1.impl.handler.Feature=lR,d1.impl.interaction={},d1.impl.interaction.SelectCluster=ab,d1.impl.layer={},d1.impl.layer.AnimatedCluster=Wv,d1.impl.layer.Draw=BU,d1.impl.layer.GeoJSON=TF,d1.impl.layer.Heatmap=GB,d1.impl.layer.KML=WM,d1.impl.layer.MVT=Qj,d1.impl.layer.Mapbox=Yk,d1.impl.layer.OSM=cj,d1.impl.layer.Vector=kx,d1.impl.layer.WFS=fA,d1.impl.layer.WMC=nk,d1.impl.layer.WMS=Ip,d1.impl.layer.WMTS=Ck,d1.impl.loader={},d1.impl.loader.JSONP=bF,d1.impl.loader.KML=CR,d1.impl.loader.WFS=nA,d1.impl.service={},d1.impl.service.WFS=BN,d1.impl.source={},d1.impl.source.ImageWMS=mp,d1.impl.source.TileWMS=np,d1.impl.style={},d1.impl.style.Centroid=am,d1.impl.style.Chart=Rz,d1.impl.style.Cluster=mb,d1.impl.style.Generic=gw,d1.impl.style.Heatmap=Fz,d1.impl.style.Icon=Yz,d1.impl.style.Line=fV,d1.impl.style.Path=$x,d1.impl.style.Point=j_,d1.impl.style.Polygon=dm,d1.impl.style.Simple=By,d1.impl.utils=wh,d1.language={},d1.language.addTranslation=function(t,e){su.translations[t]=e},d1.language.getLang=function(){return su.lang},d1.language.getTranslation=lu,d1.language.getValue=uu,d1.language.setLang=function(t){Object.keys(su.translations).includes(t)||_l(uu("exception").unsupported_lang),su.lang=t},d1.layer={},d1.layer.GeoJSON=BF,d1.layer.KML=nN,d1.layer.LayerGroup=Kd,d1.layer.MVT=pF,d1.layer.MVT.mode=hF,d1.layer.Mapbox=Qk,d1.layer.OSM=_j,d1.layer.Vector=Dw,d1.layer.WFS=MA,d1.layer.WMC=ck,d1.layer.WMS=Ap,d1.layer.WMTS=kk,d1.layer.type={},d1.layer.type.GeoJSON=Du,d1.layer.type.KML=Mu,d1.layer.type.MVT=Uu,d1.layer.type.Mapbox=Fu,d1.layer.type.OSM=ju,d1.layer.type.Vector=Gu,d1.layer.type.WFS=Au,d1.layer.type.WMC=Lu,d1.layer.type.WMS=Nu,d1.layer.type.WMTS=ku,d1.layer.type.registerLayerType=function(t){t in Bu||(Bu[t]=t)},d1.map=function(t,e){return _D(id)&&_l(uu("exception").no_impl),new $F(t,e)},d1.parameter={},d1.parameter.center=dc,d1.parameter.geojson=cc,d1.parameter.kml=$u,d1.parameter.layer=Ec,d1.parameter.mapbox=rc,d1.parameter.maxExtent=gc,d1.parameter.mvt=bc,d1.parameter.osm=ac,d1.parameter.projection=yc,d1.parameter.resolutions=mc,d1.parameter.wfs=vc,d1.parameter.wmc=fc,d1.parameter.wms=Hu,d1.parameter.wmts=xc,d1.parameter.zoom=_c,d1.projection=kn,d1.proxy=function(t){"boolean"==typeof t&&(QF=t)},d1.remote={},d1.remote.Response=nD,d1.remote.get=uD,d1.remote.post=function(t,e,r){return lD(t,e,oD)},d1.removeProxyException=function(t){var e=new URL(t).origin,r=tD.indexOf(e);-1!==r&&tD.splice(r,1)},d1.style={},d1.style.Category=DV,d1.style.Chart=nz,d1.style.Choropleth=nq,d1.style.Cluster=jb,d1.style.Composite=Ob,d1.style.Feature=Rm,d1.style.Font=oq,d1.style.Generic=Iw,d1.style.Heatmap=Iq,d1.style.Line=Qz,d1.style.Point=q_,d1.style.Polygon=Km,d1.style.Proportional=SV,d1.style.Proportional.getMinMaxValues=wV,d1.style.Simple=Bm,d1.style.align={},d1.style.align.CENTER=Dg,d1.style.align.JUSTIFY=Ug,d1.style.align.LEFT=Fg,d1.style.align.RIGHT=Gg,d1.style.baseline={},d1.style.baseline.ALPHABETIC=Ag,d1.style.baseline.BOTTOM=Ng,d1.style.baseline.HANGING=kg,d1.style.baseline.IDEOGRAPHIC=jg,d1.style.baseline.MIDDLE=Mg,d1.style.baseline.TOP=Lg,d1.style.chart={},d1.style.chart.Variable=zB,d1.style.chart.schemes=qB,d1.style.chart.types=VB,d1.style.form={},d1.style.form.BAN="BAN",d1.style.form.BLAZON="BLAZON",d1.style.form.BOOKMARK="BOOKMARK",d1.style.form.BUBBLE="BUBBLE",d1.style.form.CIRCLE="CIRCLE",d1.style.form.COMA="COMA",d1.style.form.DIAMOND="DIAMOND",d1.style.form.HEXAGON="HEXAGON",d1.style.form.LOZENGE="LOZENGE",d1.style.form.MARKER="MARKER",d1.style.form.NONE="none",d1.style.form.POI="POI",d1.style.form.SHIELD="SHIELD",d1.style.form.SIGN="SIGN",d1.style.form.SQUARE="SQUARE",d1.style.form.TRIANGLE="TRIANGLE",d1.style.pattern={},d1.style.pattern.BRECCIA="BRECCIA",d1.style.pattern.BRICK="BRICK",d1.style.pattern.CAPS="CAPS",d1.style.pattern.CEMETRY="CEMETRY",d1.style.pattern.CHAOS="CHAOS",d1.style.pattern.CHARACTER="CHARACTER",d1.style.pattern.CIRCLE="CIRCLE",d1.style.pattern.CLAY="CLAY",d1.style.pattern.COAL="COAL",d1.style.pattern.CONGLOMERATE="CONGLOMERATE",d1.style.pattern.CROSS="CROSS",d1.style.pattern.CROSSES="CROSSES",d1.style.pattern.DOLOMITE="DOLOMITE",d1.style.pattern.DOT="DOT",d1.style.pattern.FLOODED="FLOODED",d1.style.pattern.FOREST="FOREST",d1.style.pattern.GRASS="GRASS",d1.style.pattern.GRAVEL="GRAVEL",d1.style.pattern.HATCH="HATCH",d1.style.pattern.HEXAGON="HEXAGON",d1.style.pattern.ICON="ICON",d1.style.pattern.IMAGE="IMAGE",d1.style.pattern.NYLON="NYLON",d1.style.pattern.PINE="PINE",d1.style.pattern.PINES="PINES",d1.style.pattern.ROCK="ROCK",d1.style.pattern.ROCKS="ROCKS",d1.style.pattern.SAND="SAND",d1.style.pattern.SCRUB="SCRUB",d1.style.pattern.SQUARE="SQUARE",d1.style.pattern.SWAMP="SWAMP",d1.style.pattern.TILE="TILE",d1.style.pattern.TREE="TREE",d1.style.pattern.VINE="VINE",d1.style.pattern.WAVE="WAVE",d1.style.pattern.WOVEN="WOVEN",d1.style.quantification={},d1.style.quantification.JENKS=zV,d1.style.quantification.QUANTILE=VV,d1.style.state={},d1.style.state.DEFAULT="default",d1.style.state.NEW="new",d1.style.state.SELECTED="selected",d1.style.textoverflow={},d1.style.textoverflow.ELLIPSIS="ellipsis",d1.style.textoverflow.HIDDEN="",d1.style.textoverflow.VISIBLE="visible",d1.template={},d1.template.add=function(t,e){dD(vu[t])&&(vu[t]=e)},d1.template.compile=function(t,e){var r,n,i={};return dD(e)||(i=HD(i,e.vars),r=e.parseToHtml,n=e.scope),new Promise((function(o,a){xu(t,e).then((function(t){var e=t.call(null,i);!1!==r?o.call(n,AD(e)):o.call(n,e)}))}))},d1.template.compileSync=bu,d1.template.get=xu,d1.ui={},d1.ui.Panel=OP,d1.ui.position={},d1.ui.position.BL=gP,d1.ui.position.BR=yP,d1.ui.position.TL=pP,d1.ui.position.TR=dP,d1.units={},d1.units.DOTS_PER_INCH=72,d1.units.INCHES_PER_UNIT=cD,d1.utils={},d1.utils.addParameters=ID,d1.utils.beautifyAttribute=kD,d1.utils.beautifyAttributeName=jD,d1.utils.beautifyString=function(t){var e;return e=(e=(e=(e=(e=(e=(e=t.toLowerCase()).trim(e)).charAt(0).toUpperCase()+e.slice(1)).replace(/_/g," ")).replace(/\s+/," ")).replace(/(\s\w)+/g,(function(t){return t.toUpperCase()}))).replace(/\s+(de|del|las?|el|los?|un|unas?|unos?|y|a|al|en)\s+/gi,(function(t){return t.toLowerCase()}))},d1.utils.concatUrlPaths=FD,d1.utils.decodeHtml=qD,d1.utils.defineFunctionFromString=QD,d1.utils.drawDynamicStyle=oG,d1.utils.enableTouchScroll=BD,d1.utils.escapeJSCode=UD,d1.utils.escapeXSS=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},d1.utils.extend=GD,d1.utils.extendsObj=HD,d1.utils.fillResolutions=RD,d1.utils.generateColorScale=WD,d1.utils.generateIntervals=ZD,d1.utils.generateRandom=CD,d1.utils.generateResolutionsFromExtent=MD,d1.utils.generateResolutionsFromScales=function(t,e,r,n){var i=LD(t,n),o=LD(e,n);return RD(i,o,r)},d1.utils.getEnvolvedExtent=aG,d1.utils.getImageSize=JD,d1.utils.getOpacityFromRgba=function(t){var e,r=/^rgba\s*\((\s*\d+\s*,){3}\s*([\d.]+)\s*\)$/;if(r.test(t)){e=t.replace(r,"$2");try{e=parseFloat(e)}catch(t){throw t}}return e},d1.utils.getParameterValue=SD,d1.utils.getResolutionFromScale=LD,d1.utils.getRgba=function(t,e){return l()(t).alpha(e).css()},d1.utils.getScaleFromResolution=ND,d1.utils.getSystem=sG,d1.utils.getTextFromHtml=YD,d1.utils.getWMSGetCapabilitiesUrl=TD,d1.utils.getWMTSGetCapabilitiesUrl=PD,d1.utils.htmlToString=function(t){var e;if(!_D(t)){var r=document.createElement("div");r.appendChild(t),e=r.innerHTML}return e},d1.utils.includes=DD,d1.utils.inverseColor=XD,d1.utils.isArray=mD,d1.utils.isBoolean=gD,d1.utils.isDynamic=nG,d1.utils.isFunction=vD,d1.utils.isGeometryType=VD,d1.utils.isNull=yD,d1.utils.isNullOrEmpty=_D,d1.utils.isNumber=ED,d1.utils.isObject=bD,d1.utils.isPositiveNumber=function(t){return ED(t)&&t>0},d1.utils.isString=xD,d1.utils.isUndefined=dD,d1.utils.isUrl=wD,d1.utils.normalize=OD,d1.utils.rgbToHex=function(t){var e;try{e=l()(t).hex()}catch(t){throw t}return e},d1.utils.rgbaToHex=function(t){var e;try{e=l()(t).hex()}catch(t){throw t}return e},d1.utils.sameUrl=zD,d1.utils.setDynamicLegend=function(t){iG=t},d1.utils.setEquals=function(t,e){var r=!1;return t.length===e.length&&(r=t.every((function(t){return e.some((function(e){return e.equals(t)}))}))),r},d1.utils.stringToHtml=AD,d1.utils.stringifyFunctions=$D,d1.utils.styleComparator=KD,d1.version=eD,d1.window=rx,g1.AssertionError=Ri.a,g1.Collection=Fi,g1.Feature=Wc,g1.Geolocation=sE,g1.Kinetic=Us,g1.Map=Js,g1.MapBrowserEvent=Hi,g1.Object=ei.a,g1.Observable=ag.a,g1.Observable.unByKey=ag.b,g1.Overlay=Qb,g1.PluggableMap=Da,g1.View=Na,g1.View=Na,g1.array={},g1.array.stableSort=h.k,g1.color={},g1.color.asArray=Bn.a,g1.color.asString=Bn.b,g1.colorlike={},g1.colorlike.asColorLike=ay,g1.control={},g1.control.Attribution=za,g1.control.Control=Ua,g1.control.FullScreen=oH,g1.control.MousePosition=oS,g1.control.OverviewMap=NS,g1.control.Rotate=qa,g1.control.ScaleLine=TO,g1.control.Zoom=Wa,g1.control.ZoomSlider=cl,g1.control.ZoomToExtent=sH,g1.control.defaults=Xa,g1.coordinate={},g1.coordinate.add=Wn.a,g1.coordinate.createStringXY=Wn.d,g1.coordinate.format=Wn.h,g1.coordinate.rotate=Wn.j,g1.coordinate.toStringHDMS=Wn.n,g1.coordinate.toStringXY=Wn.o,g1.easing={},g1.easing.easeIn=So.easeIn,g1.easing.easeOut=So.easeOut,g1.easing.inAndOut=So.inAndOut,g1.easing.linear=So.linear,g1.easing.upAndDown=So.upAndDown,g1.events={},g1.events.condition={},g1.events.condition.altKeyOnly=is,g1.events.condition.altShiftKeysOnly=os,g1.events.condition.always=ls,g1.events.condition.click=function(t){return t.type==Zi.CLICK},g1.events.condition.doubleClick=function(t){return t.type==Zi.DBLCLICK},g1.events.condition.focus=as,g1.events.condition.mouseOnly=gs,g1.events.condition.never=cs,g1.events.condition.noModifierKeys=fs,g1.events.condition.penOnly=function(t){var e=t.originalEvent;return Object(Ui.a)(void 0!==e,56),"pen"===e.pointerType},g1.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(ni.d?e.metaKey:e.ctrlKey)&&!e.shiftKey},g1.events.condition.pointerMove=function(t){return"pointermove"==t.type},g1.events.condition.primaryAction=ys,g1.events.condition.shiftKeyOnly=ps,g1.events.condition.singleClick=hs,g1.events.condition.targetNotEditable=ds,g1.events.condition.touchOnly=function(t){var e=t.originalEvent;return Object(Ui.a)(void 0!==e,56),"touch"===e.pointerType},g1.extent={},g1.extent.applyTransform=mt.a,g1.extent.boundingExtent=mt.c,g1.extent.buffer=mt.d,g1.extent.containsCoordinate=mt.g,g1.extent.containsExtent=mt.h,g1.extent.containsXY=mt.i,g1.extent.createEmpty=mt.k,g1.extent.equals=mt.p,g1.extent.extend=mt.q,g1.extent.getArea=mt.u,g1.extent.getBottomLeft=mt.v,g1.extent.getBottomRight=mt.w,g1.extent.getCenter=mt.x,g1.extent.getHeight=mt.A,g1.extent.getIntersection=mt.B,g1.extent.getSize=mt.C,g1.extent.getTopLeft=mt.D,g1.extent.getTopRight=mt.E,g1.extent.getWidth=mt.F,g1.extent.intersects=mt.G,g1.extent.isEmpty=mt.I,g1.featureloader={},g1.featureloader.setWithCredentials=function(t){Eg=t},g1.featureloader.xhr=Sg,g1.format={},g1.format.EsriJSON=gH,g1.format.Feature=RI,g1.format.GML=VN,g1.format.GML2=VI,g1.format.GML3=XI,g1.format.GML32=KI,g1.format.GMLBase=GI,g1.format.GPX=JH,g1.format.GeoJSON=cN,g1.format.IGC=aZ,g1.format.IIIFInfo=yZ,g1.format.KML=RM,g1.format.MVT=Wj,g1.format.OSMXML=OZ,g1.format.Polyline=MZ,g1.format.Polyline.decodeDeltas=TZ,g1.format.Polyline.decodeFloats=RZ,g1.format.Polyline.encodeDeltas=CZ,g1.format.Polyline.encodeFloats=PZ,g1.format.TopoJSON=BZ,g1.format.WFS=GT,g1.format.WFS.writeFilter=function(t,e){var r=e||"1.1.0",n=p(DT(r),"Filter"),i={node:n};return Object(ii.a)(i,{version:r,filter:t}),wT(n,t,[i]),n},g1.format.WKB=rK,g1.format.WKT=gU,g1.format.WMSCapabilities=of,g1.format.WMSGetFeatureInfo=iK,g1.format.WMTSCapabilities=kt,g1.format.filter={},g1.format.filter.Bbox=nC,g1.format.filter.Contains=sC,g1.format.filter.DWithin=uC,g1.format.filter.Disjoint=hC,g1.format.filter.During=gC,g1.format.filter.EqualTo=vC,g1.format.filter.GreaterThan=xC,g1.format.filter.GreaterThanOrEqualTo=EC,g1.format.filter.Intersects=SC,g1.format.filter.IsBetween=CC,g1.format.filter.IsLike=PC,g1.format.filter.IsNull=LC,g1.format.filter.LessThan=NC,g1.format.filter.LessThanOrEqualTo=kC,g1.format.filter.Not=FC,g1.format.filter.NotEqualTo=GC,g1.format.filter.Or=BC,g1.format.filter.Within=qC,g1.format.filter.and=YC,g1.format.filter.bbox=WC,g1.format.filter.between=function(t,e,r){return new CC(t,e,r)},g1.format.filter.contains=function(t,e,r){return new sC(t,e,r)},g1.format.filter.disjoint=function(t,e,r){return new hC(t,e,r)},g1.format.filter.during=function(t,e,r){return new gC(t,e,r)},g1.format.filter.dwithin=function(t,e,r,n,i){return new uC(t,e,r,n,i)},g1.format.filter.equalTo=function(t,e,r){return new vC(t,e,r)},g1.format.filter.greaterThan=function(t,e){return new xC(t,e)},g1.format.filter.greaterThanOrEqualTo=function(t,e){return new EC(t,e)},g1.format.filter.intersects=function(t,e,r){return new SC(t,e,r)},g1.format.filter.isNull=function(t){return new LC(t)},g1.format.filter.lessThan=function(t,e){return new NC(t,e)},g1.format.filter.lessThanOrEqualTo=function(t,e){return new kC(t,e)},g1.format.filter.like=function(t,e,r,n,i,o){return new PC(t,e,r,n,i,o)},g1.format.filter.not=function(t){return new FC(t)},g1.format.filter.notEqualTo=function(t,e,r){return new GC(t,e,r)},g1.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(BC,e))},g1.format.filter.within=function(t,e,r){return new qC(t,e,r)},g1.geom={},g1.geom.Circle=dh,g1.geom.Geometry=ko,g1.geom.GeometryCollection=hh,g1.geom.LineString=Qc,g1.geom.LinearRing=ia,g1.geom.MultiLineString=eh,g1.geom.MultiPoint=Hc,g1.geom.MultiPolygon=ih,g1.geom.Point=aa,g1.geom.Polygon=Oa,g1.geom.Polygon.circular=Sa,g1.geom.Polygon.fromCircle=Ca,g1.geom.Polygon.fromExtent=Ia,g1.geom.SimpleGeometry=Do,g1.has={},g1.has.DEVICE_PIXEL_RATIO=ni.a,g1.interaction={},g1.interaction.DoubleClickZoom=Qa,g1.interaction.DragAndDrop=lK,g1.interaction.DragBox=Ps,g1.interaction.DragPan=_s,g1.interaction.DragRotate=bs,g1.interaction.DragRotateAndZoom=cK,g1.interaction.DragZoom=Ls,g1.interaction.Draw=bK,g1.interaction.Draw.createBox=function(){return function(t,e,r){var n=Object(mt.c)([t[0],t[t.length-1]].map((function(t){return Object(u.l)(t,r)}))),i=[[Object(mt.v)(n),Object(mt.w)(n),Object(mt.E)(n),Object(mt.D)(n),Object(mt.v)(n)]],o=e;o?o.setCoordinates(i):o=new Oa(i);var a=Object(u.s)();return a&&o.transform(r,a),o}},g1.interaction.Draw.createRegularPolygon=function(t,e){return function(r,n,i){var o=Object(u.l)(r[0],i),a=Object(u.l)(r[r.length-1],i),s=Math.sqrt(Object(Wn.l)(o,a)),l=n||Ca(new dh(o),t),c=e;if(!e&&0!==e){var h=a[0]-o[0],f=a[1]-o[1];c=Math.atan2(f,h)}Ta(l,o,s,c);var p=Object(u.s)();return p&&l.transform(i,p),l}},g1.interaction.Extent=CK,g1.interaction.Interaction=Ja,g1.interaction.KeyboardPan=Fs,g1.interaction.KeyboardZoom=Gs,g1.interaction.Modify=DK,g1.interaction.MouseWheelZoom=qs,g1.interaction.PinchRotate=Ws,g1.interaction.PinchZoom=Hs,g1.interaction.Pointer=rs,g1.interaction.Select=Jv,g1.interaction.Snap=zK,g1.interaction.Translate=HK,g1.interaction.defaults=Zs,g1.layer={},g1.layer.Base=Gi.a,g1.layer.BaseImage=ZK.a,g1.layer.BaseTile=KK.a,g1.layer.BaseVector=X_,g1.layer.Graticule=eJ,g1.layer.Group=qi,g1.layer.Heatmap=LB,g1.layer.Image=Nc.a,g1.layer.Layer=Yn.a,g1.layer.MapboxVector=s$,g1.layer.Tile=Mc.a,g1.layer.Vector=jv,g1.layer.VectorImage=p$,g1.layer.VectorTile=Dj,g1.layer.VectorTileRenderType={},g1.layer.VectorTileRenderType.HYBRID=void 0,g1.layer.VectorTileRenderType.IMAGE=void 0,g1.layer.VectorTileRenderType.VECTOR=void 0,g1.layer.WebGLTile=wQ,g1.loadingstrategy={},g1.loadingstrategy.all=_g,g1.loadingstrategy.bbox=function(t,e){return[t]},g1.loadingstrategy.tile=function(t){return function(e,r,n){var i=t.getZForResolution(Object(u.n)(r,n)),o=t.getTileRangeForExtentAndZ(Object(u.m)(e,n),i),a=[],s=[i,0,0];for(s[1]=o.minX;s[1]<=o.maxX;++s[1])for(s[2]=o.minY;s[2]<=o.maxY;++s[2])a.push(Object(u.x)(t.getTileCoordExtent(s),n));return a}},g1.proj={},g1.proj.Projection=Tn.a,g1.proj.Units=Pn.b,g1.proj.Units.METERS_PER_UNIT=Pn.a,g1.proj.addCoordinateTransforms=u.c,g1.proj.addEquivalentProjections=u.d,g1.proj.addProjection=u.e,g1.proj.clearUserProjection=u.f,g1.proj.equivalent=u.j,g1.proj.fromLonLat=u.k,g1.proj.get=u.o,g1.proj.getPointResolution=u.p,g1.proj.getTransform=u.q,g1.proj.getUserProjection=u.s,g1.proj.proj4={},g1.proj.proj4.register=Ln,g1.proj.setUserProjection=u.u,g1.proj.toLonLat=u.v,g1.proj.transform=u.z,g1.proj.transformExtent=u.A,g1.proj.useGeographic=u.B,g1.render={},g1.render.Feature={},g1.render.Feature.toFeature=function(t,e){var r=t.getId(),n=sh(t),i=t.getProperties(),o=new Wc;return void 0!==e&&o.setGeometryName(e),o.setGeometry(n),void 0!==r&&o.setId(r),o.setProperties(i,!0),o},g1.render.Feature.toGeometry=sh,g1.render.VectorContext=oy,g1.render.canvas={},g1.render.canvas.labelCache=yi,g1.render.getRenderPixel=function(t,e){return Object(Un.a)(t.inversePixelTransform,e.slice(0))},g1.render.getVectorContext=wy,g1.render.toContext=xy,g1.renderer={},g1.renderer.Composite=Pi,g1.renderer.canvas={},g1.renderer.canvas.ImageLayer=l$.a,g1.renderer.canvas.TileLayer=Tj.a,g1.renderer.canvas.VectorImageLayer=h$,g1.renderer.canvas.VectorLayer=Av,g1.renderer.canvas.VectorTileLayer=kj,g1.renderer.webgl={},g1.renderer.webgl.PointsLayer=SB,g1.renderer.webgl.TileLayer=q$,g1.size={},g1.size.toSize=Aa.d,g1.source={},g1.source.BingMaps=OQ,g1.source.CartoDB=IQ,g1.source.Cluster=Rg,g1.source.DataTile=TQ,g1.source.GeoTIFF=D0,g1.source.IIIF=W0,g1.source.Image=ip.a,g1.source.ImageArcGISRest=H0,g1.source.ImageCanvas=K0,g1.source.ImageMapGuide=$0,g1.source.ImageStatic=t1,g1.source.ImageWMS=lp,g1.source.OSM=rj,g1.source.OSM.ATTRIBUTION=ej,g1.source.Raster=e1.a,g1.source.Source=cg.a,g1.source.Stamen=a1,g1.source.Tile=Cf.b,g1.source.TileArcGISRest=l1,g1.source.TileDebug=c1,g1.source.TileImage=Uf,g1.source.TileJSON=iJ,g1.source.TileWMS=Hf,g1.source.UTFGrid=p1,g1.source.Vector=Tg,g1.source.VectorTile=Ij,g1.source.WMSServerType={},g1.source.WMSServerType.CARMENTA_SERVER=void 0,g1.source.WMSServerType.GEOSERVER=void 0,g1.source.WMSServerType.MAPSERVER=void 0,g1.source.WMSServerType.QGIS=void 0,g1.source.WMTS=_k,g1.source.WMTS.optionsFromCapabilities=vk,g1.source.XYZ=Fk,g1.source.Zoomify=V0,g1.source.sourcesFromTileGrid=function(t,e){var r=new d$.a(32),n=t.getExtent();return function(i,o){r.expireCache(),n&&(i=Object(mt.B)(n,i));var a=t.getZForResolution(o),s=[];return t.forEachTileCoord(i,a,(function(t){var n=t.toString();if(!r.containsKey(n)){var i=e(t);r.set(n,i)}s.push(r.get(n))})),s}},g1.sphere={},g1.sphere.getArea=xa.a,g1.sphere.getDistance=xa.b,g1.sphere.getLength=xa.c,g1.style={},g1.style.Circle=Yy,g1.style.Fill=zg,g1.style.Icon=iy,g1.style.IconAnchorUnits={},g1.style.IconAnchorUnits.FRACTION=void 0,g1.style.IconAnchorUnits.PIXELS=void 0,g1.style.IconImageCache={},g1.style.IconImageCache.shared=qn,g1.style.IconOrigin={},g1.style.IconOrigin.BOTTOM_LEFT=void 0,g1.style.IconOrigin.BOTTOM_RIGHT=void 0,g1.style.IconOrigin.TOP_LEFT=void 0,g1.style.IconOrigin.TOP_RIGHT=void 0,g1.style.Image=Qg,g1.style.RegularShape=Vy,g1.style.Stroke=Bg,g1.style.Style=$y,g1.style.Text=Yg,g1.tilegrid={},g1.tilegrid.TileGrid=Ac.a,g1.tilegrid.WMTS=gk,g1.tilegrid.WMTS.createFromCapabilitiesMatrixSet=yk,g1.tilegrid.createXYZ=Ff.b,g1.transform={},g1.transform.composeCssTransform=Un.c,g1.util={},g1.util.getUid=Gn.c,g1.webgl={},g1.webgl.ARRAY_BUFFER=zU,g1.webgl.Buffer=KU,g1.webgl.DYNAMIC_DRAW=YU,g1.webgl.ELEMENT_ARRAY_BUFFER=VU,g1.webgl.Helper=yB,g1.webgl.Helper.computeAttributesStride=dB,g1.webgl.PostProcessingPass=eB,g1.webgl.RenderTarget=wB,g1.webgl.STATIC_DRAW=qU,g1.webgl.STREAM_DRAW=35040,g1.xml={},g1.xml.getAllTextContent=d,g1.xml.parse=m,g1.xml.registerDocument=function(t){k=t},g1.xml.registerXMLSerializer=function(t){A=t},window.jsts=r(164),window.Handlebars=r(62),d1.plugin={}},,,function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"create",(function(){return o}));var n=r(125),i=r.n(n);function o(){const e='function e(e,t,r,n,i,a,o){try{var s=e[a](o),f=s.value}catch(e){return void r(e)}s.done?t(f):Promise.resolve(f).then(n,i)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(i,a){var o=t.apply(r,n);function s(t){e(o,i,a,s,f,"next",t)}function f(t){e(o,i,a,s,f,"throw",t)}s(void 0)}))}}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var n={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new T(n||[]);return a._invoke=function(e,t,r){var n=h;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw a;return E()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=I(o,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var f=c(e,t,r);if("normal"===f.type){if(n=r.done?m:d,f.arg===v)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(n=m,r.method="throw",r.arg=f.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function y(){}function w(){}function g(){}var b={};l(b,o,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(D([])));x&&x!==n&&i.call(x,o)&&(b=x);var _=g.prototype=y.prototype=Object.create(b);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,o,s,f){var l=c(e[a],e,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===r(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,f)}),(function(e){n("throw",e,s,f)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,f)}))}f(l.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}}function I(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return v}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function D(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:E}}function E(){return{value:t,done:!0}}return w.prototype=g,l(_,"constructor",g),l(g,"constructor",w),w.displayName=l(g,f,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,f,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},A(P.prototype),l(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new P(u(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(_),l(_,f,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=D,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var f=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(f&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(f){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(n);var i=n.exports,a=new Map;function o(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return a.set(e,t)}))}function s(e){return f.apply(this,arguments)}function f(){return(f=t(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o([void 0,1],(function(){return Promise.resolve().then((function(){return _})).then((function(e){return e.default}))})),o(5,(function(){return Promise.resolve().then((function(){return S})).then((function(e){return e.default}))})),o(6,(function(){throw new Error("old style JPEG compression is not supported.")})),o(7,(function(){return Promise.resolve().then((function(){return L})).then((function(e){return e.default}))})),o([8,32946],(function(){return Promise.resolve().then((function(){return Ne})).then((function(e){return e.default}))})),o(32773,(function(){return Promise.resolve().then((function(){return Ye})).then((function(e){return e.default}))})),o(34887,(function(){return Promise.resolve().then((function(){return ut})).then((function(e){return e.default}))})),o(50001,(function(){return Promise.resolve().then((function(){return dt})).then((function(e){return e.default}))}));var l=globalThis;function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){var r=e.length-t,n=0;do{for(var i=t;i>0;i--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function w(e,t,r){for(var n=0,i=e.length,a=i/r;i>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;i-=t}for(var s=e.slice(),f=0;f<a;++f)for(var l=0;l<r;++l)e[r*f+l]=s[(r-l-1)*a+f]}function g(e,t,r,n,i,a){if(!t||1===t)return e;for(var o=0;o<i.length;++o){if(i[o]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[o]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var s=i[0]/8,f=2===a?1:i.length,l=0;l<n&&!(l*f*r*s>=e.byteLength);++l){var u=void 0;if(2===t){switch(i[0]){case 8:u=new Uint8Array(e,l*f*r*s,f*r*s);break;case 16:u=new Uint16Array(e,l*f*r*s,f*r*s/2);break;case 32:u=new Uint32Array(e,l*f*r*s,f*r*s/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}y(u,f)}else 3===t&&w(u=new Uint8Array(e,l*f*r*s,f*r*s),f,s)}return e}l.addEventListener("message",function(){var e=t(i.mark((function e(t){var r,n,a,o,f,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,n=r.id,a=r.fileDirectory,o=r.buffer,e.next=3,s(a);case 3:return f=e.sent,e.next=6,f.decode(a,o);case 6:u=e.sent,l.postMessage({decoded:u,id:n},[u]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var b=function(){function e(){u(this,e)}var r;return h(e,[{key:"decode",value:(r=t(i.mark((function e(t,r){var n,a,o,s,f;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(a=t.Predictor||1)){e.next=9;break}return o=!t.StripOffsets,s=o?t.TileWidth:t.ImageWidth,f=o?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",g(n,a,s,f,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),e}();function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var x=function(e){p(r,b);var t=k(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){return e}}]),r}(),_=Object.freeze({__proto__:null,default:x});function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function P(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function I(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var i=258,a=9,o=0;function s(){i=258,a=9}function f(e){var t=function(e,t,r){var n=t%8,i=Math.floor(t/8),a=8-n,o=t+r-8*(i+1),s=8*(i+2)-(t+r),f=8*(i+2)-t;if(s=Math.max(0,s),i>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var l=e[i]&Math.pow(2,8-n)-1,u=l<<=r-a;if(i+1<e.length){var c=e[i+1]>>>s;u+=c<<=Math.max(0,r-f)}if(o>8&&i+2<e.length){var h=8*(i+3)-(t+r);u+=e[i+2]>>>h}return u}(e,o,a);return o+=a,t}function l(e,n){return r[i]=n,t[i]=e,++i-1}function u(e){for(var n=[],i=e;4096!==i;i=t[i])n.push(r[i]);return n}var c=[];s();for(var h,d=new Uint8Array(e),p=f(d);257!==p;){if(256===p){for(s(),p=f(d);256===p;)p=f(d);if(257===p)break;if(p>256)throw new Error("corrupted code at scanline ".concat(p));P(c,u(p)),h=p}else if(p<i){var m=u(p);P(c,m),l(h,m[m.length-1]),h=p}else{var v=u(h);if(!v)throw new Error("Bogus entry. Not in dictionary, ".concat(h," / ").concat(i,", position: ").concat(o));P(c,v),c.push(v[v.length-1]),l(h,v[v.length-1]),h=p}i+1>=Math.pow(2,a)&&(12===a?h=void 0:a++),p=f(d)}return new Uint8Array(c)}var U=function(e){p(r,b);var t=A(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){return I(e).buffer}}]),r}(),S=Object.freeze({__proto__:null,default:U});function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var D=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function E(e,t){for(var r=0,n=[],i=16;i>0&&!e[i-1];)--i;n.push({children:[],index:0});for(var a,o=n[0],s=0;s<i;s++){for(var f=0;f<e[s];f++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a;r++}s+1<i&&(n.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a)}return n[0].children}function B(e,t,n,i,a,o,s,f,l){var u=n.mcusPerLine,c=n.progressive,h=t,d=t,p=0,m=0;function v(){if(m>0)return m--,p>>m&1;if(255===(p=e[d++])){var t=e[d++];if(t)throw new Error("unexpected marker: ".concat((p<<8|t).toString(16)))}return m=7,p>>>7}function y(e){for(var t,n=e;null!==(t=v());){if("number"==typeof(n=n[t]))return n;if("object"!==r(n))throw new Error("invalid huffman sequence")}return null}function w(e){for(var t=e,r=0;t>0;){var n=v();if(null===n)return;r=r<<1|n,--t}return r}function g(e){var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var k,x=0;function _(e,t,r,n,i){var a=r%u,o=(r/u|0)*e.v+n,s=a*e.h+i;t(e,e.blocks[o][s])}function A(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}var P,I,U,S,T,E,B=i.length;E=c?0===o?0===f?function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:g(r)<<l;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=v()<<l}:0===f?function(e,t){if(b>0)b--;else for(var r=o,n=s;r<=n;){var i=y(e.huffmanTableAC),a=15&i,f=i>>4;if(0===a){if(f<15){b=w(f)+(1<<f)-1;break}r+=16}else t[D[r+=f]]=g(a)*(1<<l),r++}}:function(e,t){for(var r=o,n=s,i=0;r<=n;){var a=D[r],f=t[a]<0?-1:1;switch(x){case 0:var u=y(e.huffmanTableAC),c=15&u;if(i=u>>4,0===c)i<15?(b=w(i)+(1<<i),x=4):(i=16,x=1);else{if(1!==c)throw new Error("invalid ACn encoding");k=g(c),x=i?2:3}continue;case 1:case 2:t[a]?t[a]+=(v()<<l)*f:0==--i&&(x=2===x?3:0);break;case 3:t[a]?t[a]+=(v()<<l)*f:(t[a]=k<<l,x=0);break;case 4:t[a]&&(t[a]+=(v()<<l)*f)}r++}4===x&&0==--b&&(x=0)}:function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:g(r);e.pred+=n,t[0]=e.pred;for(var i=1;i<64;){var a=y(e.huffmanTableAC),o=15&a,s=a>>4;if(0===o){if(s<15)break;i+=16}else t[D[i+=s]]=g(o),i++}};var O,M,C=0;M=1===B?i[0].blocksPerLine*i[0].blocksPerColumn:u*n.mcusPerColumn;for(var L=a||M;C<M;){for(I=0;I<B;I++)i[I].pred=0;if(b=0,1===B)for(P=i[0],T=0;T<L;T++)A(P,E,C),C++;else for(T=0;T<L;T++){for(I=0;I<B;I++){var R=P=i[I],V=R.h,G=R.v;for(U=0;U<G;U++)for(S=0;S<V;S++)_(P,E,C,U,S)}if(++C===M)break}if(m=0,(O=e[d]<<8|e[d+1])<65280)throw new Error("marker was not found");if(!(O>=65488&&O<=65495))break;d+=2}return d-h}function O(e,t){var r=[],n=t.blocksPerLine,i=t.blocksPerColumn,a=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function f(e,r,n){var i,a,o,s,f,l,u,c,h,d,p=t.quantizationTable,m=n;for(d=0;d<64;d++)m[d]=e[d]*p[d];for(d=0;d<8;++d){var v=8*d;0!==m[1+v]||0!==m[2+v]||0!==m[3+v]||0!==m[4+v]||0!==m[5+v]||0!==m[6+v]||0!==m[7+v]?(i=5793*m[0+v]+128>>8,a=5793*m[4+v]+128>>8,o=m[2+v],s=m[6+v],f=2896*(m[1+v]-m[7+v])+128>>8,c=2896*(m[1+v]+m[7+v])+128>>8,l=m[3+v]<<4,h=i-a+1>>1,i=i+a+1>>1,a=h,h=3784*o+1567*s+128>>8,o=1567*o-3784*s+128>>8,s=h,h=f-(u=m[5+v]<<4)+1>>1,f=f+u+1>>1,u=h,h=c+l+1>>1,l=c-l+1>>1,c=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-o+1>>1,a=a+o+1>>1,o=h,h=2276*f+3406*c+2048>>12,f=3406*f-2276*c+2048>>12,c=h,h=799*l+4017*u+2048>>12,l=4017*l-799*u+2048>>12,u=h,m[0+v]=i+c,m[7+v]=i-c,m[1+v]=a+u,m[6+v]=a-u,m[2+v]=o+l,m[5+v]=o-l,m[3+v]=s+f,m[4+v]=s-f):(h=5793*m[0+v]+512>>10,m[0+v]=h,m[1+v]=h,m[2+v]=h,m[3+v]=h,m[4+v]=h,m[5+v]=h,m[6+v]=h,m[7+v]=h)}for(d=0;d<8;++d){var y=d;0!==m[8+y]||0!==m[16+y]||0!==m[24+y]||0!==m[32+y]||0!==m[40+y]||0!==m[48+y]||0!==m[56+y]?(i=5793*m[0+y]+2048>>12,a=5793*m[32+y]+2048>>12,o=m[16+y],s=m[48+y],f=2896*(m[8+y]-m[56+y])+2048>>12,c=2896*(m[8+y]+m[56+y])+2048>>12,l=m[24+y],h=i-a+1>>1,i=i+a+1>>1,a=h,h=3784*o+1567*s+2048>>12,o=1567*o-3784*s+2048>>12,s=h,h=f-(u=m[40+y])+1>>1,f=f+u+1>>1,u=h,h=c+l+1>>1,l=c-l+1>>1,c=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-o+1>>1,a=a+o+1>>1,o=h,h=2276*f+3406*c+2048>>12,f=3406*f-2276*c+2048>>12,c=h,h=799*l+4017*u+2048>>12,l=4017*l-799*u+2048>>12,u=h,m[0+y]=i+c,m[56+y]=i-c,m[8+y]=a+u,m[48+y]=a-u,m[16+y]=o+l,m[40+y]=o-l,m[24+y]=s+f,m[32+y]=s-f):(h=5793*n[d+0]+8192>>14,m[0+y]=h,m[8+y]=h,m[16+y]=h,m[24+y]=h,m[32+y]=h,m[40+y]=h,m[48+y]=h,m[56+y]=h)}for(d=0;d<64;++d){var w=128+(m[d]+8>>4);r[d]=w<0?0:w>255?255:w}}for(var l=0;l<i;l++){for(var u=l<<3,c=0;c<8;c++)r.push(new Uint8Array(a));for(var h=0;h<n;h++){f(t.blocks[l][h],s,o);for(var d=0,p=h<<3,m=0;m<8;m++)for(var v=r[u+m],y=0;y<8;y++)v[p+y]=s[d++]}}return r}var M=function(){function e(){u(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return h(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),i<t.v&&(i=t.v));var a=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),f=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),l=a*t.h,u=o*t.v,c=[],h=0;h<u;h++){for(var d=[],p=0;p<l;p++)d.push(new Int32Array(64));c.push(d)}t.blocksPerLine=s,t.blocksPerColumn=f,t.blocks=c}e.maxH=n,e.maxV=i,e.mcusPerLine=a,e.mcusPerColumn=o}var i,a,o=r();if(65496!==o)throw new Error("SOI not found");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(i=void 0,a=void 0,i=r(),a=e.subarray(t,t+i-2),t+=a.length,a);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var f=r()+t-2;t<f;){var l=e[t++],u=new Int32Array(64);if(l>>4==0)for(var c=0;c<64;c++){u[D[c]]=e[t++]}else{if(l>>4!=1)throw new Error("DQT: invalid table spec");for(var h=0;h<64;h++){u[D[h]]=r()}}this.quantizationTables[15&l]=u}break;case 65472:case 65473:case 65474:r();for(var d={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},p=e[t++],m=void 0,v=0;v<p;v++){m=e[t];var y=e[t+1]>>4,w=15&e[t+1],g=e[t+2];d.componentsOrder.push(m),d.components[m]={h:y,v:w,quantizationIdx:g},t+=3}n(d),this.frames.push(d);break;case 65476:for(var b=r(),k=2;k<b;){for(var x=e[t++],_=new Uint8Array(16),A=0,P=0;P<16;P++,t++)_[P]=e[t],A+=_[P];for(var I=new Uint8Array(A),U=0;U<A;U++,t++)I[U]=e[t];k+=17+A,x>>4==0?this.huffmanTablesDC[15&x]=E(_,I):this.huffmanTablesAC[15&x]=E(_,I)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var S=e[t++],T=[],O=this.frames[0],M=0;M<S;M++){var C=O.components[e[t++]],L=e[t++];C.huffmanTableDC=this.huffmanTablesDC[L>>4],C.huffmanTableAC=this.huffmanTablesAC[15&L],T.push(C)}var R=e[t++],V=e[t++],G=e[t++],F=B(e,t,O,T,this.resetInterval,R,V,G>>4,15&G);t+=F;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=r()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];r[a].quantizationTable=this.quantizationTables[r[a].quantizationIdx],delete r[a].quantizationIdx}for(var o=e[0],s=o.components,f=o.componentsOrder,l=[],u=o.samplesPerLine,c=o.scanLines,h=0;h<f.length;h++){var d=s[f[h]];l.push({lines:O(0,d),scaleX:d.h/o.maxH,scaleY:d.v/o.maxV})}for(var p=new Uint8Array(u*c*l.length),m=0,v=0;v<c;++v)for(var y=0;y<u;++y)for(var w=0;w<l.length;++w){var g=l[w];p[m]=g.lines[0|v*g.scaleY][0|y*g.scaleX],++m}return p}}]),e}(),C=function(e){p(r,b);var t=T(r);function r(e){var n;return u(this,r),(n=t.call(this)).reader=new M,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return h(r,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(),L=Object.freeze({__proto__:null,default:C});function R(e){for(var t=e.length;--t>=0;)e[t]=0}R(new Array(576)),R(new Array(60)),R(new Array(512)),R(new Array(256)),R(new Array(29)),R(new Array(30));var V=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0},G=new Uint32Array(function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}()),F=function(e,t,r,n){var i=G,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},N=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Z=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==r(n))throw new TypeError(n+"must be non-object");for(var i in n)N(n,i)&&(e[i]=n[i])}}return e},K=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),a=0,o=0,s=e.length;a<s;a++){var f=e[a];i.set(f,o),o+=f.length}return i},H=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){H=!1}for(var Y=new Uint8Array(256),X=0;X<256;X++)Y[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;Y[254]=Y[254]=1;var W=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},q=function(e,t){var r,n,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var a=new Array(2*i);for(n=0,r=0;r<i;){var o=e[r++];if(o<128)a[n++]=o;else{var s=Y[o];if(s>4)a[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<i;)o=o<<6|63&e[r++],s--;s>1?a[n++]=65533:o<65536?a[n++]=o:(o-=65536,a[n++]=55296|o>>10&1023,a[n++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&H)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}(a,n)},J=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Y[e[r]]>t?r:t};var Q=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(e,t){var r,n,i,a,o,s,f,l,u,c,h,d,p,m,v,y,w,g,b,k,x,_,A,P,I=e.state;r=e.next_in,A=e.input,n=r+(e.avail_in-5),i=e.next_out,P=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=I.dmax,f=I.wsize,l=I.whave,u=I.wnext,c=I.window,h=I.hold,d=I.bits,p=I.lencode,m=I.distcode,v=(1<<I.lenbits)-1,y=(1<<I.distbits)-1;e:do{d<15&&(h+=A[r++]<<d,d+=8,h+=A[r++]<<d,d+=8),w=p[h&v];t:for(;;){if(h>>>=g=w>>>24,d-=g,0===(g=w>>>16&255))P[i++]=65535&w;else{if(!(16&g)){if(0==(64&g)){w=p[(65535&w)+(h&(1<<g)-1)];continue t}if(32&g){I.mode=12;break e}e.msg="invalid literal/length code",I.mode=30;break e}b=65535&w,(g&=15)&&(d<g&&(h+=A[r++]<<d,d+=8),b+=h&(1<<g)-1,h>>>=g,d-=g),d<15&&(h+=A[r++]<<d,d+=8,h+=A[r++]<<d,d+=8),w=m[h&y];r:for(;;){if(h>>>=g=w>>>24,d-=g,!(16&(g=w>>>16&255))){if(0==(64&g)){w=m[(65535&w)+(h&(1<<g)-1)];continue r}e.msg="invalid distance code",I.mode=30;break e}if(k=65535&w,d<(g&=15)&&(h+=A[r++]<<d,(d+=8)<g&&(h+=A[r++]<<d,d+=8)),(k+=h&(1<<g)-1)>s){e.msg="invalid distance too far back",I.mode=30;break e}if(h>>>=g,d-=g,k>(g=i-a)){if((g=k-g)>l&&I.sane){e.msg="invalid distance too far back",I.mode=30;break e}if(x=0,_=c,0===u){if(x+=f-g,g<b){b-=g;do{P[i++]=c[x++]}while(--g);x=i-k,_=P}}else if(u<g){if(x+=f+u-g,(g-=u)<b){b-=g;do{P[i++]=c[x++]}while(--g);if(x=0,u<b){b-=g=u;do{P[i++]=c[x++]}while(--g);x=i-k,_=P}}}else if(x+=u-g,g<b){b-=g;do{P[i++]=c[x++]}while(--g);x=i-k,_=P}for(;b>2;)P[i++]=_[x++],P[i++]=_[x++],P[i++]=_[x++],b-=3;b&&(P[i++]=_[x++],b>1&&(P[i++]=_[x++]))}else{x=i-k;do{P[i++]=P[x++],P[i++]=P[x++],P[i++]=P[x++],b-=3}while(b>2);b&&(P[i++]=P[x++],b>1&&(P[i++]=P[x++]))}break}}break}}while(r<n&&i<o);r-=b=d>>3,h&=(1<<(d-=b<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),I.hold=h,I.bits=d},ee=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),re=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ne=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ie=function(e,t,r,n,i,a,o,s){var f,l,u,c,h,d,p,m,v,y=s.bits,w=0,g=0,b=0,k=0,x=0,_=0,A=0,P=0,I=0,U=0,S=null,T=0,D=new Uint16Array(16),E=new Uint16Array(16),B=null,O=0;for(w=0;w<=15;w++)D[w]=0;for(g=0;g<n;g++)D[t[r+g]]++;for(x=y,k=15;k>=1&&0===D[k];k--);if(x>k&&(x=k),0===k)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(b=1;b<k&&0===D[b];b++);for(x<b&&(x=b),P=1,w=1;w<=15;w++)if(P<<=1,(P-=D[w])<0)return-1;if(P>0&&(0===e||1!==k))return-1;for(E[1]=0,w=1;w<15;w++)E[w+1]=E[w]+D[w];for(g=0;g<n;g++)0!==t[r+g]&&(o[E[t[r+g]]++]=g);if(0===e?(S=B=o,d=19):1===e?(S=ee,T-=257,B=te,O-=257,d=256):(S=re,B=ne,d=-1),U=0,g=0,w=b,h=a,_=x,A=0,u=-1,c=(I=1<<x)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){p=w-A,o[g]<d?(m=0,v=o[g]):o[g]>d?(m=B[O+o[g]],v=S[T+o[g]]):(m=96,v=0),f=1<<w-A,b=l=1<<_;do{i[h+(U>>A)+(l-=f)]=p<<24|m<<16|v|0}while(0!==l);for(f=1<<w-1;U&f;)f>>=1;if(0!==f?(U&=f-1,U+=f):U=0,g++,0==--D[w]){if(w===k)break;w=t[r+o[g]]}if(w>x&&(U&c)!==u){for(0===A&&(A=x),h+=b,P=1<<(_=w-A);_+A<k&&!((P-=D[_+A])<=0);)_++,P<<=1;if(I+=1<<_,1===e&&I>852||2===e&&I>592)return 1;i[u=U&c]=x<<24|_<<16|h-a|0}}return 0!==U&&(i[h+U]=w-A<<24|64<<16|0),s.bits=x,0},ae=j.Z_FINISH,oe=j.Z_BLOCK,se=j.Z_TREES,fe=j.Z_OK,le=j.Z_STREAM_END,ue=j.Z_NEED_DICT,ce=j.Z_STREAM_ERROR,he=j.Z_DATA_ERROR,de=j.Z_MEM_ERROR,pe=j.Z_BUF_ERROR,me=j.Z_DEFLATED,ve=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var we,ge,be=function(e){if(!e||!e.state)return ce;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,fe},ke=function(e){if(!e||!e.state)return ce;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,be(e)},xe=function(e,t){var r;if(!e||!e.state)return ce;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ce:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,ke(e))},_e=function(e,t){if(!e)return ce;var r=new ye;e.state=r,r.window=null;var n=xe(e,t);return n!==fe&&(e.state=null),n},Ae=!0,Pe=function(e){if(Ae){we=new Int32Array(512),ge=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ie(1,e.lens,0,288,we,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ie(2,e.lens,0,32,ge,0,e.work,{bits:5}),Ae=!1}e.lencode=we,e.lenbits=9,e.distcode=ge,e.distbits=5},Ie=function(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Ue={inflateReset:ke,inflateReset2:xe,inflateResetKeep:be,inflateInit:function(e){return _e(e,15)},inflateInit2:_e,inflate:function(e,t){var r,n,i,a,o,s,f,l,u,c,h,d,p,m,v,y,w,g,b,k,x,_,A,P,I=0,U=new Uint8Array(4),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return ce;12===(r=e.state).mode&&(r.mode=13),o=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,c=s,h=f,_=fe;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===l){r.check=0,U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0),l=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=30;break}if((15&l)!==me){e.msg="unknown compression method",r.mode=30;break}if(u-=4,x=8+(15&(l>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&l?10:12,l=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==me){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0)),l=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,U[2]=l>>>16&255,U[3]=l>>>24&255,r.check=F(r.check,U,4,0)),l=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0)),l=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(U[0]=255&l,U[1]=l>>>8&255,r.check=F(r.check,U,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+d),x)),512&r.flags&&(r.check=F(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=F(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=F(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}e.adler=r.check=ve(l),l=0,u=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,ue;e.adler=r.check=1,r.mode=12;case 12:if(t===oe||t===se)break e;case 13:if(r.last){l>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}switch(r.last=1&l,u-=1,3&(l>>>=1)){case 0:r.mode=14;break;case 1:if(Pe(r),r.mode=20,t===se){l>>>=2,u-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&l,l=0,u=0,r.mode=15,t===se)break e;case 15:r.mode=16;case 16:if(d=r.length){if(d>s&&(d=s),d>f&&(d=f),0===d)break e;i.set(n.subarray(a,a+d),o),s-=d,a+=d,f-=d,o+=d,r.length-=d;break}r.mode=12;break;case 17:for(;u<14;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.lens[S[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[S[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},_=ie(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,_){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;y=(I=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,w=65535&I,!((v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(w<16)l>>>=v,u-=v,r.lens[r.have++]=w;else{if(16===w){for(P=v+2;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l>>>=v,u-=v,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}x=r.lens[r.have-1],d=3+(3&l),l>>>=2,u-=2}else if(17===w){for(P=v+3;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}u-=v,x=0,d=3+(7&(l>>>=v)),l>>>=3,u-=3}else{for(P=v+7;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}u-=v,x=0,d=11+(127&(l>>>=v)),l>>>=7,u-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=x}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,A={bits:r.lenbits},_=ie(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,_){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},_=ie(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,_){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,t===se)break e;case 20:r.mode=21;case 21:if(s>=6&&f>=258){e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,$(e,h),o=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;y=(I=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,w=65535&I,!((v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(y&&0==(240&y)){for(g=v,b=y,k=w;y=(I=r.lencode[k+((l&(1<<g+b)-1)>>g)])>>>16&255,w=65535&I,!(g+(v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=g,u-=g,r.back+=g}if(l>>>=v,u-=v,r.back+=v,r.length=w,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=12;break}if(64&y){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(P=r.extra;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;y=(I=r.distcode[l&(1<<r.distbits)-1])>>>16&255,w=65535&I,!((v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(0==(240&y)){for(g=v,b=y,k=w;y=(I=r.distcode[k+((l&(1<<g+b)-1)>>g)])>>>16&255,w=65535&I,!(g+(v=I>>>24)<=u);){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}l>>>=g,u-=g,r.back+=g}if(l>>>=v,u-=v,r.back+=v,64&y){e.msg="invalid distance code",r.mode=30;break}r.offset=w,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(P=r.extra;u<P;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===f)break e;if(d=h-f,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=o-r.offset,d=r.length;d>f&&(d=f),f-=d,r.length-=d;do{i[o++]=m[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===f)break e;i[o++]=r.length,f--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===s)break e;s--,l|=n[a++]<<u,u+=8}if(h-=f,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?F(r.check,i,h,o-h):V(r.check,i,h,o-h)),h=f,(r.flags?l:ve(l))!==r.check){e.msg="incorrect data check",r.mode=30;break}l=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break e;s--,l+=n[a++]<<u,u+=8}if(l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}l=0,u=0}r.mode=29;case 29:_=le;break e;case 30:_=he;break e;case 31:return de;default:return ce}return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=s,r.hold=l,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<30&&(r.mode<27||t!==ae))&&Ie(e,e.output,e.next_out,h-e.avail_out),c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?F(r.check,i,h,e.next_out-h):V(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===c&&0===h||t===ae)&&_===fe&&(_=pe),_},inflateEnd:function(e){if(!e||!e.state)return ce;var t=e.state;return t.window&&(t.window=null),e.state=null,fe},inflateGetHeader:function(e,t){if(!e||!e.state)return ce;var r=e.state;return 0==(2&r.wrap)?ce:(r.head=t,t.done=!1,fe)},inflateSetDictionary:function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?ce:11===r.mode&&V(1,t,n,0)!==r.check?he:Ie(e,t,n,n)?(r.mode=31,de):(r.havedict=1,fe):ce},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Te=Object.prototype.toString,De=j.Z_NO_FLUSH,Ee=j.Z_FINISH,Be=j.Z_OK,Oe=j.Z_STREAM_END,Me=j.Z_NEED_DICT,Ce=j.Z_STREAM_ERROR,Le=j.Z_DATA_ERROR,Re=j.Z_MEM_ERROR;function Ve(e){this.options=Z({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Q,this.strm.avail_out=0;var r=Ue.inflateInit2(this.strm,t.windowBits);if(r!==Be)throw new Error(z[r]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=W(t.dictionary):"[object ArrayBuffer]"===Te.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Ue.inflateSetDictionary(this.strm,t.dictionary))!==Be))throw new Error(z[r])}function Ge(e,t){var r=new Ve(t);if(r.push(e),r.err)throw r.msg||z[r.err];return r.result}Ve.prototype.push=function(e,t){var r,n,i,a=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Ee:De,"[object ArrayBuffer]"===Te.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),(r=Ue.inflate(a,n))===Me&&s&&((r=Ue.inflateSetDictionary(a,s))===Be?r=Ue.inflate(a,n):r===Le&&(r=Me));a.avail_in>0&&r===Oe&&a.state.wrap>0&&0!==e[a.next_in];)Ue.inflateReset(a),r=Ue.inflate(a,n);switch(r){case Ce:case Le:case Me:case Re:return this.onEnd(r),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||r===Oe))if("string"===this.options.to){var f=J(a.output,a.next_out),l=a.next_out-f,u=q(a.output,f);a.next_out=l,a.avail_out=o-l,l&&a.output.set(a.output.subarray(f,f+l),0),this.onData(u)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(r!==Be||0!==i){if(r===Oe)return r=Ue.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},Ve.prototype.onData=function(e){this.chunks.push(e)},Ve.prototype.onEnd=function(e){e===Be&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=K(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Fe={Inflate:Ve,inflate:Ge,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Ge(e,t)},ungzip:Ge,constants:j}.inflate;function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var je=function(e){p(r,b);var t=ze(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){return Fe(new Uint8Array(e)).buffer}}]),r}(),Ne=Object.freeze({__proto__:null,default:je});function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var Ke,He=function(e){p(r,b);var t=Ze(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var i=t.getInt8(n);if(i<0){var a=t.getUint8(n+1);i=-i;for(var o=0;o<=i;++o)r.push(a);n+=1}else{for(var s=0;s<=i;++s)r.push(t.getUint8(n+s+1));n+=i+1}}return new Uint8Array(r).buffer}}]),r}(),Ye=Object.freeze({__proto__:null,default:He}),Xe={exports:{}};Ke=Xe,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var e,t,r,n,i,a,o,s,f,l,u,c,h,d,p,m,v=(e={defaultNoDataValue:-34027999387901484e22,decode:function(a,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,f=i(a,o.inputOffset||0,s),l=null!==o.noDataValue?o.noDataValue:e.defaultNoDataValue,u=t(f,o.pixelType||Float32Array,o.encodedMaskData,l,o.returnMask),c={width:f.width,height:f.height,pixelData:u.resultPixels,minValue:u.minValue,maxValue:f.pixels.maxValue,noDataValue:l};return u.resultMask&&(c.maskData=u.resultMask),o.returnEncodedMask&&f.mask&&(c.encodedMaskData=f.mask.bitset?f.mask.bitset:null),o.returnFileInfo&&(c.fileInfo=r(f),o.computeUsedBitDepths&&(c.fileInfo.bitDepths=n(f))),c}},t=function(e,t,r,n,i){var o,s,f,l=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,h=Math.floor(e.width/u),d=Math.floor(e.height/c),p=2*e.maxZError,m=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),i&&r&&(f=new Uint8Array(e.width*e.height));for(var v,y,w=new Float32Array(h*d),g=0;g<=c;g++){var b=g!==c?d:e.height%c;if(0!==b)for(var k=0;k<=u;k++){var x=k!==u?h:e.width%u;if(0!==x){var _,A,P,I,U=g*e.width*d+k*h,S=e.width-x,T=e.pixels.blocks[l];if(T.encoding<2?(0===T.encoding?_=T.rawData:(a(T.stuffedData,T.bitsPerPixel,T.numValidPixels,T.offset,p,w,e.pixels.maxValue),_=w),A=0):P=2===T.encoding?0:T.offset,r)for(y=0;y<b;y++){for(7&U&&(I=r[U>>3],I<<=7&U),v=0;v<x;v++)7&U||(I=r[U>>3]),128&I?(f&&(f[U]=1),m=m>(o=T.encoding<2?_[A++]:P)?o:m,s[U++]=o):(f&&(f[U]=0),s[U++]=n),I<<=1;U+=S}else if(T.encoding<2)for(y=0;y<b;y++){for(v=0;v<x;v++)m=m>(o=_[A++])?o:m,s[U++]=o;U+=S}else for(m=m>P?P:m,y=0;y<b;y++){for(v=0;v<x;v++)s[U++]=P;U+=S}if(1===T.encoding&&A!==T.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:s,resultMask:f,minValue:m}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},n=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var i=e.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},i=function(e,t,r){var n={},i=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(n.fileVersion=a.getInt32(0,!0),n.imageType=a.getInt32(4,!0),n.height=a.getUint32(8,!0),n.width=a.getUint32(12,!0),n.maxZError=a.getFloat64(16,!0),t+=24,!r)if(a=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=a.getUint32(0,!0),n.mask.numBlocksX=a.getUint32(4,!0),n.mask.numBytes=a.getUint32(8,!0),n.mask.maxValue=a.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(a=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),f=2,l=0;do{if(s>0)for(;s--;)o[l++]=a.getUint8(f++);else{var u=a.getUint8(f++);for(s=-s;s--;)o[l++]=u}s=a.getInt16(f,!0),f+=2}while(f<n.mask.numBytes);if(-32768!==s||l<o.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));a=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=a.getUint32(0,!0),n.pixels.numBlocksX=a.getUint32(4,!0),n.pixels.numBytes=a.getUint32(8,!0),n.pixels.maxValue=a.getFloat32(12,!0),t+=16;var c=n.pixels.numBlocksX,h=n.pixels.numBlocksY,d=c+(n.width%c>0?1:0),p=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(d*p);for(var m=0,v=0;v<p;v++)for(var y=0;y<d;y++){var w=0,g=e.byteLength-t;a=new DataView(e,t,Math.min(10,g));var b={};n.pixels.blocks[m++]=b;var k=a.getUint8(0);if(w++,b.encoding=63&k,b.encoding>3)throw"Invalid block encoding ("+b.encoding+")";if(2!==b.encoding){if(0!==k&&2!==k){if(k>>=6,b.offsetType=k,2===k)b.offset=a.getInt8(1),w++;else if(1===k)b.offset=a.getInt16(1,!0),w+=2;else{if(0!==k)throw"Invalid block offset type";b.offset=a.getFloat32(1,!0),w+=4}if(1===b.encoding)if(k=a.getUint8(w),w++,b.bitsPerPixel=63&k,k>>=6,b.numValidPixelsType=k,2===k)b.numValidPixels=a.getUint8(w),w++;else if(1===k)b.numValidPixels=a.getUint16(w,!0),w+=2;else{if(0!==k)throw"Invalid valid pixel count type";b.numValidPixels=a.getUint32(w,!0),w+=4}}var x;if(t+=w,3!==b.encoding)if(0===b.encoding){var _=(n.pixels.numBytes-1)/4;if(_!==Math.floor(_))throw"uncompressed block has invalid length";x=new ArrayBuffer(4*_),new Uint8Array(x).set(new Uint8Array(e,t,4*_));var A=new Float32Array(x);b.rawData=A,t+=4*_}else if(1===b.encoding){var P=Math.ceil(b.numValidPixels*b.bitsPerPixel/8),I=Math.ceil(P/4);x=new ArrayBuffer(4*I),new Uint8Array(x).set(new Uint8Array(e,t,P)),b.stuffedData=new Uint32Array(x),t+=P}}else t++}return n.eofOffset=t,n},a=function(e,t,r,n,i,a,o){var s,f,l,u=(1<<t)-1,c=0,h=0,d=Math.ceil((o-n)/i),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++){if(0===h&&(l=e[c++],h=32),h>=t)f=l>>>h-t&u,h-=t;else{var m=t-h;f=(l&u)<<m&u,f+=(l=e[c++])>>>(h=32-m)}a[s]=f<d?n+f*i:o}return a},e),y=(o=function(e,t,r,n,i,a,o,s){var f,l,u,c,h,d=(1<<r)-1,p=0,m=0,v=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*v,i)for(f=0;f<n;f++)0===m&&(u=e[p++],m=32),m>=r?(l=u>>>m-r&d,m-=r):(l=(u&d)<<(c=r-m)&d,l+=(u=e[p++])>>>(m=32-c)),t[f]=i[l];else for(h=Math.ceil((s-a)/o),f=0;f<n;f++)0===m&&(u=e[p++],m=32),m>=r?(l=u>>>m-r&d,m-=r):(l=(u&d)<<(c=r-m)&d,l+=(u=e[p++])>>>(m=32-c)),t[f]=l<h?a+l*o:s},s=function(e,t,r,n,i,a){var o,s=(1<<t)-1,f=0,l=0,u=0,c=0,h=0,d=[],p=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*p;var m=Math.ceil((a-n)/i);for(l=0;l<r;l++)0===c&&(o=e[f++],c=32),c>=t?(h=o>>>c-t&s,c-=t):(h=(o&s)<<(u=t-c)&s,h+=(o=e[f++])>>>(c=32-u)),d[l]=h<m?n+h*i:a;return d.unshift(n),d},f=function(e,t,r,n,i,a,o,s){var f,l,u,c,h=(1<<r)-1,d=0,p=0,m=0;if(i)for(f=0;f<n;f++)0===p&&(u=e[d++],p=32,m=0),p>=r?(l=u>>>m&h,p-=r,m+=r):(l=u>>>m&h,p=32-(c=r-p),l|=((u=e[d++])&(1<<c)-1)<<r-c,m=c),t[f]=i[l];else{var v=Math.ceil((s-a)/o);for(f=0;f<n;f++)0===p&&(u=e[d++],p=32,m=0),p>=r?(l=u>>>m&h,p-=r,m+=r):(l=u>>>m&h,p=32-(c=r-p),l|=((u=e[d++])&(1<<c)-1)<<r-c,m=c),t[f]=l<v?a+l*o:s}return t},l=function(e,t,r,n,i,a){var o,s=(1<<t)-1,f=0,l=0,u=0,c=0,h=0,d=0,p=[],m=Math.ceil((a-n)/i);for(l=0;l<r;l++)0===c&&(o=e[f++],c=32,d=0),c>=t?(h=o>>>d&s,c-=t,d+=t):(h=o>>>d&s,c=32-(u=t-c),h|=((o=e[f++])&(1<<u)-1)<<t-u,d=u),p[l]=h<m?n+h*i:a;return p.unshift(n),p},u=function(e,t,r,n){var i,a,o,s,f=(1<<r)-1,l=0,u=0,c=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*c,i=0;i<n;i++)0===u&&(o=e[l++],u=32),u>=r?(a=o>>>u-r&f,u-=r):(a=(o&f)<<(s=r-u)&f,a+=(o=e[l++])>>>(u=32-s)),t[i]=a;return t},c=function(e,t,r,n){var i,a,o,s,f=(1<<r)-1,l=0,u=0,c=0;for(i=0;i<n;i++)0===u&&(o=e[l++],u=32,c=0),u>=r?(a=o>>>c&f,u-=r,c+=r):(a=o>>>c&f,u=32-(s=r-u),a|=((o=e[l++])&(1<<s)-1)<<r-s,c=s),t[i]=a;return t},h={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,i=Math.floor(n/2),a=0;i;){var o=i>=359?359:i;i-=o;do{t+=e[a++]<<8,r+=t+=e[a++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[a]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var a,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(i.fileVersion=s,r+=4,s>=3&&(i.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),i.height=o.getUint32(0,!0),i.width=o.getUint32(4,!0),r+=8,s>=4?(i.numDims=o.getUint32(8,!0),r+=4):i.numDims=1,o=new DataView(e,r,40),i.numValidPixel=o.getUint32(0,!0),i.microBlockSize=o.getInt32(4,!0),i.blobSize=o.getInt32(8,!0),i.imageType=o.getInt32(12,!0),i.maxZError=o.getFloat64(16,!0),i.zMin=o.getFloat64(24,!0),i.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,s>=3&&(a=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-a,i.blobSize-14))!==i.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),a=this.readSubArray(e,t.ptr,n,i),o=this.readSubArray(e,t.ptr+i,n,i);t.ptr+=2*i;var s,f=!0;for(s=0;s<r.numDims;s++)if(a[s]!==o[s]){f=!1;break}return r.minValues=a,r.maxValues=o,f},readSubArray:function(e,t,r,n){var i;if(r===Uint8Array)i=new Uint8Array(e,t,n);else{var a=new ArrayBuffer(n);new Uint8Array(a).set(new Uint8Array(e,t,n)),i=new r(a)}return i},readMask:function(e,t){var r,n,i=t.ptr,a=t.headerInfo,o=a.width*a.height,s=a.numValidPixel,f=new DataView(e,i,4),l={};if(l.numBytes=f.getUint32(0,!0),i+=4,(0===s||o===s)&&0!==l.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(o/8)),l.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,i+=l.numBytes;else if(l.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var u=(f=new DataView(e,i,l.numBytes)).getInt16(0,!0),c=2,h=0,d=0;do{if(u>0)for(;u--;)r[h++]=f.getUint8(c++);else for(d=f.getUint8(c++),u=-u;u--;)r[h++]=d;u=f.getInt16(c,!0),c+=2}while(c<l.numBytes);if(-32768!==u||h<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(o);var p=0,m=0;for(m=0;m<o;m++)7&m?(p=r[m>>3],p<<=7&m):p=r[m>>3],128&p&&(n[m]=1);t.pixels.resultMask=n,l.bitset=r,i+=l.numBytes}return t.ptr=i,t.mask=l,!0},readDataOneSweep:function(e,t,r,n){var i,a=t.ptr,o=t.headerInfo,s=o.numDims,f=o.width*o.height,l=o.imageType,u=o.numValidPixel*h.getDataTypeSize(l)*s,c=t.pixels.resultMask;if(r===Uint8Array)i=new Uint8Array(e,a,u);else{var d=new ArrayBuffer(u);new Uint8Array(d).set(new Uint8Array(e,a,u)),i=new r(d)}if(i.length===f*s)t.pixels.resultPixels=n?h.swapDimensionOrder(i,f,s,r,!0):i;else{t.pixels.resultPixels=new r(f*s);var p=0,m=0,v=0,y=0;if(s>1){if(n){for(m=0;m<f;m++)if(c[m])for(y=m,v=0;v<s;v++,y+=f)t.pixels.resultPixels[y]=i[p++]}else for(m=0;m<f;m++)if(c[m])for(y=m*s,v=0;v<s;v++)t.pixels.resultPixels[y+v]=i[p++]}else for(m=0;m<f;m++)c[m]&&(t.pixels.resultPixels[m]=i[p++])}return a+=u,t.ptr=a,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var i=n.getInt32(4,!0),a=n.getInt32(8,!0),o=n.getInt32(12,!0);if(a>=o)return!1;var s=new Uint32Array(o-a);h.decodeBits(e,t,s);var f,l,u,c,p=[];for(f=a;f<o;f++)p[l=f-(f<i?0:i)]={first:s[f-a],second:null};var m=e.byteLength-t.ptr,v=Math.ceil(m/4),y=new ArrayBuffer(4*v);new Uint8Array(y).set(new Uint8Array(e,t.ptr,m));var w,g=new Uint32Array(y),b=0,k=0;for(w=g[0],f=a;f<o;f++)(c=p[l=f-(f<i?0:i)].first)>0&&(p[l].second=w<<b>>>32-c,32-b>=c?32===(b+=c)&&(b=0,w=g[++k]):(b+=c-32,w=g[++k],p[l].second|=w>>>32-b));var x=0,_=0,A=new d;for(f=0;f<p.length;f++)void 0!==p[f]&&(x=Math.max(x,p[f].first));_=x>=r?r:x;var P,I,U,S,T,D=[];for(f=a;f<o;f++)if((c=p[l=f-(f<i?0:i)].first)>0)if(P=[c,l],c<=_)for(I=p[l].second<<_-c,U=1<<_-c,u=0;u<U;u++)D[I|u]=P;else for(I=p[l].second,T=A,S=c-1;S>=0;S--)I>>>S&1?(T.right||(T.right=new d),T=T.right):(T.left||(T.left=new d),T=T.left),0!==S||T.val||(T.val=P[1]);return{decodeLut:D,numBitsLUTQick:_,numBitsLUT:x,tree:A,stuffedData:g,srcPtr:k,bitPos:b}},readHuffman:function(e,t,r,n){var i,a,o,s,f,l,u,c,d,p=t.headerInfo.numDims,m=t.headerInfo.height,v=t.headerInfo.width,y=v*m,w=this.readHuffmanTree(e,t),g=w.decodeLut,b=w.tree,k=w.stuffedData,x=w.srcPtr,_=w.bitPos,A=w.numBitsLUTQick,P=w.numBitsLUT,I=0===t.headerInfo.imageType?128:0,U=t.pixels.resultMask,S=0;_>0&&(x++,_=0);var T,D=k[x],E=1===t.encodeMode,B=new r(y*p),O=B;if(p<2||E){for(T=0;T<p;T++)if(p>1&&(O=new r(B.buffer,y*T,y),S=0),t.headerInfo.numValidPixel===v*m)for(c=0,l=0;l<m;l++)for(u=0;u<v;u++,c++){if(a=0,f=s=D<<_>>>32-A,32-_<A&&(f=s|=k[x+1]>>>64-_-A),g[f])a=g[f][1],_+=g[f][0];else for(f=s=D<<_>>>32-P,32-_<P&&(f=s|=k[x+1]>>>64-_-P),i=b,d=0;d<P;d++)if(!(i=s>>>P-d-1&1?i.right:i.left).left&&!i.right){a=i.val,_=_+d+1;break}_>=32&&(_-=32,D=k[++x]),o=a-I,E?(o+=u>0?S:l>0?O[c-v]:S,o&=255,O[c]=o,S=o):O[c]=o}else for(c=0,l=0;l<m;l++)for(u=0;u<v;u++,c++)if(U[c]){if(a=0,f=s=D<<_>>>32-A,32-_<A&&(f=s|=k[x+1]>>>64-_-A),g[f])a=g[f][1],_+=g[f][0];else for(f=s=D<<_>>>32-P,32-_<P&&(f=s|=k[x+1]>>>64-_-P),i=b,d=0;d<P;d++)if(!(i=s>>>P-d-1&1?i.right:i.left).left&&!i.right){a=i.val,_=_+d+1;break}_>=32&&(_-=32,D=k[++x]),o=a-I,E?(u>0&&U[c-1]?o+=S:l>0&&U[c-v]?o+=O[c-v]:o+=S,o&=255,O[c]=o,S=o):O[c]=o}}else for(c=0,l=0;l<m;l++)for(u=0;u<v;u++)if(c=l*v+u,!U||U[c])for(T=0;T<p;T++,c+=y){if(a=0,f=s=D<<_>>>32-A,32-_<A&&(f=s|=k[x+1]>>>64-_-A),g[f])a=g[f][1],_+=g[f][0];else for(f=s=D<<_>>>32-P,32-_<P&&(f=s|=k[x+1]>>>64-_-P),i=b,d=0;d<P;d++)if(!(i=s>>>P-d-1&1?i.right:i.left).left&&!i.right){a=i.val,_=_+d+1;break}_>=32&&(_-=32,D=k[++x]),o=a-I,O[c]=o}t.ptr=t.ptr+4*(x+1)+(_>0?4:0),t.pixels.resultPixels=B,p>1&&!n&&(t.pixels.resultPixels=h.swapDimensionOrder(B,y,p,r))},decodeBits:function(e,t,r,n,i){var a=t.headerInfo,h=a.fileVersion,d=0,p=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,m=new DataView(e,t.ptr,p),v=m.getUint8(0);d++;var y=v>>6,w=0===y?4:3-y,g=(32&v)>0,b=31&v,k=0;if(1===w)k=m.getUint8(d),d++;else if(2===w)k=m.getUint16(d,!0),d+=2;else{if(4!==w)throw"Invalid valid pixel count type";k=m.getUint32(d,!0),d+=4}var x,_,A,P,I,U,S,T,D,E=2*a.maxZError,B=a.numDims>1?a.maxValues[i]:a.zMax;if(g){for(t.counter.lut++,T=m.getUint8(d),d++,P=Math.ceil((T-1)*b/8),I=Math.ceil(P/4),_=new ArrayBuffer(4*I),A=new Uint8Array(_),t.ptr+=d,A.set(new Uint8Array(e,t.ptr,P)),S=new Uint32Array(_),t.ptr+=P,D=0;T-1>>>D;)D++;P=Math.ceil(k*D/8),I=Math.ceil(P/4),_=new ArrayBuffer(4*I),(A=new Uint8Array(_)).set(new Uint8Array(e,t.ptr,P)),x=new Uint32Array(_),t.ptr+=P,U=h>=3?l(S,b,T-1,n,E,B):s(S,b,T-1,n,E,B),h>=3?f(x,r,D,k,U):o(x,r,D,k,U)}else t.counter.bitstuffer++,D=b,t.ptr+=d,D>0&&(P=Math.ceil(k*D/8),I=Math.ceil(P/4),_=new ArrayBuffer(4*I),(A=new Uint8Array(_)).set(new Uint8Array(e,t.ptr,P)),x=new Uint32Array(_),t.ptr+=P,h>=3?null==n?c(x,r,D,k):f(x,r,D,k,!1,n,E,B):null==n?u(x,r,D,k):o(x,r,D,k,!1,n,E,B))},readTiles:function(e,t,r,n){var i=t.headerInfo,a=i.width,o=i.height,s=a*o,f=i.microBlockSize,l=i.imageType,u=h.getDataTypeSize(l),c=Math.ceil(a/f),d=Math.ceil(o/f);t.pixels.numBlocksY=d,t.pixels.numBlocksX=c,t.pixels.ptr=0;var p,m,v,y,w,g,b,k,x,_,A=0,P=0,I=0,U=0,S=0,T=0,D=0,E=0,B=0,O=0,M=0,C=0,L=0,R=0,V=0,G=new r(f*f),F=o%f||f,z=a%f||f,j=i.numDims,N=t.pixels.resultMask,Z=t.pixels.resultPixels,K=i.fileVersion>=5?14:15,H=i.zMax;for(I=0;I<d;I++)for(S=I!==d-1?f:F,U=0;U<c;U++)for(O=I*a*f+U*f,M=a-(T=U!==c-1?f:z),k=0;k<j;k++){if(j>1?(_=Z,O=I*a*f+U*f,Z=new r(t.pixels.resultPixels.buffer,s*k*u,s),H=i.maxValues[k]):_=null,D=e.byteLength-t.ptr,m={},V=0,E=(p=new DataView(e,t.ptr,Math.min(10,D))).getUint8(0),V++,x=i.fileVersion>=5?4&E:0,B=E>>6&255,(E>>2&K)!=(U*f>>3&K))throw"integrity issue";if(x&&0===k)throw"integrity issue";if((w=3&E)>3)throw t.ptr+=V,"Invalid block encoding ("+w+")";if(2!==w)if(0===w){if(x)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=V,C=(C=S*T*u)<(L=e.byteLength-t.ptr)?C:L,v=new ArrayBuffer(C%u==0?C:C+u-C%u),new Uint8Array(v).set(new Uint8Array(e,t.ptr,C)),y=new r(v),R=0,N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=y[R++]),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O++]=y[R++];O+=M}t.ptr+=R*u}else if(g=h.getDataTypeUsed(x&&l<6?4:l,B),b=h.getOnePixel(m,V,g,p),V+=h.getDataTypeSize(g),3===w)if(t.ptr+=V,t.counter.constantoffset++,N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=x?Math.min(H,_[O]+b):b),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O]=x?Math.min(H,_[O]+b):b,O++;O+=M}else if(t.ptr+=V,h.decodeBits(e,t,G,b,k),V=0,x)if(N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=G[V++]+_[O]),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O]=G[V++]+_[O],O++;O+=M}else if(N)for(A=0;A<S;A++){for(P=0;P<T;P++)N[O]&&(Z[O]=G[V++]),O++;O+=M}else for(A=0;A<S;A++){for(P=0;P<T;P++)Z[O++]=G[V++];O+=M}else{if(x)if(N)for(A=0;A<S;A++)for(P=0;P<T;P++)N[O]&&(Z[O]=_[O]),O++;else for(A=0;A<S;A++)for(P=0;P<T;P++)Z[O]=_[O],O++;t.counter.constant++,t.ptr+=V}}j>1&&!n&&(t.pixels.resultPixels=h.swapDimensionOrder(t.pixels.resultPixels,s,j,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:h.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,i=e.headerInfo.maxValues,a=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,f=0,l=0,u=e.pixels.resultMask,c=e.pixels.resultPixels;if(u)if(a>1){if(t)for(s=0;s<a;s++)for(l=s*o,r=i[s],f=0;f<o;f++)u[f]&&(c[l+f]=r);else for(f=0;f<o;f++)if(u[f])for(l=f*a,s=0;s<a;s++)c[l+a]=i[s]}else for(f=0;f<o;f++)u[f]&&(c[f]=r);else if(a>1&&n!==r)if(t)for(s=0;s<a;s++)for(l=s*o,r=i[s],f=0;f<o;f++)c[l+f]=r;else for(f=0;f<o;f++)for(l=f*a,s=0;s<a;s++)c[l+s]=i[s];else for(f=0;f<o*a;f++)c[f]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var i=0;switch(r){case 0:i=n.getInt8(t);break;case 1:i=n.getUint8(t);break;case 2:i=n.getInt16(t,!0);break;case 3:i=n.getUint16(t,!0);break;case 4:i=n.getInt32(t,!0);break;case 5:i=n.getUInt32(t,!0);break;case 6:i=n.getFloat32(t,!0);break;case 7:i=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(e,t,r,n,i){var a=0,o=0,s=0,f=0,l=e;if(r>1)if(l=new n(t*r),i)for(a=0;a<t;a++)for(f=a,s=0;s<r;s++,f+=t)l[f]=e[o++];else for(a=0;a<t;a++)for(f=a,s=0;s<r;s++,f+=t)l[o++]=e[f];return l}},d=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,i={};i.ptr=t.inputOffset||0,i.pixels={},h.readHeaderInfo(e,i);var a=i.headerInfo,o=a.fileVersion,s=h.getDataTypeArray(a.imageType);if(o>5)throw"unsupported lerc version 2."+o;h.readMask(e,i),a.numValidPixel===a.width*a.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var f=a.width*a.height;i.pixels.resultPixels=new s(f*a.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var l,u=!t.returnPixelInterleavedDims;if(0!==a.numValidPixel)if(a.zMax===a.zMin)h.constructConstantSurface(i,u);else if(o>=4&&h.checkMinMaxRanges(e,i))h.constructConstantSurface(i,u);else{var c=new DataView(e,i.ptr,2),d=c.getUint8(0);if(i.ptr++,d)h.readDataOneSweep(e,i,s,u);else if(o>1&&a.imageType<=1&&Math.abs(a.maxZError-.5)<1e-5){var p=c.getUint8(1);if(i.ptr++,i.encodeMode=p,p>2||o<4&&p>1)throw"Invalid Huffman flag "+p;p?h.readHuffman(e,i,s,u):h.readTiles(e,i,s,u)}else h.readTiles(e,i,s,u)}i.eofOffset=i.ptr,t.inputOffset?(l=i.headerInfo.blobSize+t.inputOffset-i.ptr,Math.abs(l)>=1&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(l=i.headerInfo.blobSize-i.ptr,Math.abs(l)>=1&&(i.eofOffset=i.headerInfo.blobSize));var m={width:a.width,height:a.height,pixelData:i.pixels.resultPixels,minValue:a.zMin,maxValue:a.zMax,validPixelCount:a.numValidPixel,dimCount:a.numDims,dimStats:{minValues:a.minValues,maxValues:a.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&h.isValidPixelValue(a.imageType,r)){var v=i.pixels.resultMask;for(n=0;n<f;n++)v[n]||(m.pixelData[n]=r);m.noDataValue=r}return i.noDataValue=r,t.returnFileInfo&&(m.fileInfo=h.formatFileInfo(i)),m},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)h.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),w=(p=new ArrayBuffer(4),m=new Uint8Array(p),new Uint32Array(p)[0]=1,1===m[0]),g={decode:function(e,t){if(!w)throw"Big endian system is not supported.";var r,n,i=(t=t||{}).inputOffset||0,a=new Uint8Array(e,i,10),o=String.fromCharCode.apply(null,a);if("CntZImage"===o.trim())r=v,n=1;else{if("Lerc2"!==o.substring(0,5))throw"Unexpected file identifier string: "+o;r=y,n=2}for(var s,f,l,u,c,h,d=0,p=e.byteLength-10,m=[],g={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},b=0;i<p;){var k=r.decode(e,{inputOffset:i,encodedMaskData:s,maskData:l,returnMask:0===d,returnEncodedMask:0===d,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});i=k.fileInfo.eofOffset,l=k.maskData,0===d&&(s=k.encodedMaskData,g.width=k.width,g.height=k.height,g.dimCount=k.dimCount||1,g.pixelType=k.pixelType||k.fileInfo.pixelType,g.mask=l),n>1&&(l&&m.push(l),k.fileInfo.mask&&k.fileInfo.mask.numBytes>0&&b++),d++,g.pixels.push(k.pixelData),g.statistics.push({minValue:k.minValue,maxValue:k.maxValue,noDataValue:k.noDataValue,dimStats:k.dimStats})}if(n>1&&b>1){for(h=g.width*g.height,g.bandMasks=m,(l=new Uint8Array(h)).set(m[0]),u=1;u<m.length;u++)for(f=m[u],c=0;c<h;c++)l[c]=l[c]&f[c];g.maskData=l}return g}};Ke.exports?Ke.exports=g:this.Lerc=g}();var We=Xe.exports,qe={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Je={};for(var Qe in qe)qe.hasOwnProperty(Qe)&&(Je[qe[Qe]]=parseInt(Qe,10));Je.BitsPerSample,Je.ExtraSamples,Je.SampleFormat,Je.StripByteCounts,Je.StripOffsets,Je.StripRowCounts,Je.TileByteCounts,Je.TileOffsets,Je.SubIFDs;var $e={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},et={};for(var tt in $e)$e.hasOwnProperty(tt)&&(et[$e[tt]]=parseInt(tt,10));var rt=1,nt=0,it=1,at={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},ot={};for(var st in at)at.hasOwnProperty(st)&&(ot[at[st]]=parseInt(st,10));function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var lt=function(e){p(r,b);var t=ft(r);function r(e){var n;return u(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[rt],n}return h(r,[{key:"decodeBlock",value:function(e){switch(this.addCompression){case nt:break;case it:e=Fe(new Uint8Array(e)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return We.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}(),ut=Object.freeze({__proto__:null,default:lt});function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}var ht=function(e){p(a,b);var r,n=ct(a);function a(){var e;if(u(this,a),e=n.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return e}return h(a,[{key:"decode",value:(r=t(i.mark((function e(t,r){var n,a,o,s;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Blob([r]),e.next=3,createImageBitmap(n);case 3:return a=e.sent,"undefined"!=typeof document?((o=document.createElement("canvas")).width=a.width,o.height=a.height):o=new OffscreenCanvas(a.width,a.height),(s=o.getContext("2d")).drawImage(a,0,0),e.abrupt("return",s.getImageData(0,0,a.width,a.height).data.buffer);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})}]),a}(),dt=Object.freeze({__proto__:null,default:ht});';return new i.a("undefined"==typeof Blob?"data:application/javascript;base64,"+t.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}}.call(this,r(67).Buffer)},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return i}));var n=r(41);class i extends n.a{decodeBlock(t){return t}}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return a}));var n=r(41);function i(t,e){for(let r=e.length-1;r>=0;r--)t.push(e[r]);return t}function o(t){const e=new Uint16Array(4093),r=new Uint8Array(4093);for(let t=0;t<=257;t++)e[t]=4096,r[t]=t;let n=258,o=9,a=0;function s(){n=258,o=9}function l(t){const e=function(t,e,r){const n=e%8,i=Math.floor(e/8),o=8-n,a=e+r-8*(i+1);let s=8*(i+2)-(e+r);const l=8*(i+2)-e;if(s=Math.max(0,s),i>=t.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;let u=t[i]&2**(8-n)-1;u<<=r-o;let c=u;if(i+1<t.length){let e=t[i+1]>>>s;e<<=Math.max(0,r-l),c+=e}if(a>8&&i+2<t.length){const n=8*(i+3)-(e+r);c+=t[i+2]>>>n}return c}(t,a,o);return a+=o,e}function u(t,i){return r[n]=i,e[n]=t,n++,n-1}function c(t){const n=[];for(let i=t;4096!==i;i=e[i])n.push(r[i]);return n}const h=[];s();const f=new Uint8Array(t);let p,d=l(f);for(;257!==d;){if(256===d){for(s(),d=l(f);256===d;)d=l(f);if(257===d)break;if(d>256)throw new Error("corrupted code at scanline "+d);i(h,c(d)),p=d}else if(d<n){const t=c(d);i(h,t),u(p,t[t.length-1]),p=d}else{const t=c(p);if(!t)throw new Error(`Bogus entry. Not in dictionary, ${p} / ${n}, position: ${a}`);i(h,t),h.push(t[t.length-1]),u(p,t[t.length-1]),p=d}n+1>=2**o&&(12===o?p=void 0:o++),d=l(f)}return new Uint8Array(h)}class a extends n.a{decodeBlock(t){return o(t).buffer}}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return m}));var n=r(41);const i=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),o=4017,a=799,s=3406,l=2276,u=1567,c=3784,h=5793,f=2896;function p(t,e){let r=0;const n=[];let i=16;for(;i>0&&!t[i-1];)--i;n.push({children:[],index:0});let o,a=n[0];for(let s=0;s<i;s++){for(let i=0;i<t[s];i++){for(a=n.pop(),a.children[a.index]=e[r];a.index>0;)a=n.pop();for(a.index++,n.push(a);n.length<=s;)n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o;r++}s+1<i&&(n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o)}return n[0].children}function d(t,e,r,n,o,a,s,l,u){const{mcusPerLine:c,progressive:h}=r,f=e;let p=e,d=0,g=0;function y(){if(g>0)return g--,d>>g&1;if(d=t[p++],255===d){const e=t[p++];if(e)throw new Error("unexpected marker: "+(d<<8|e).toString(16))}return g=7,d>>>7}function m(t){let e,r=t;for(;null!==(e=y());){if(r=r[e],"number"==typeof r)return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function _(t){let e=t,r=0;for(;e>0;){const t=y();if(null===t)return;r=r<<1|t,--e}return r}function v(t){const e=_(t);return e>=1<<t-1?e:e+(-1<<t)+1}let b=0;let x,w=0;function E(t,e,r,n,i){const o=r%c,a=(r/c|0)*t.v+n,s=o*t.h+i;e(t,t.blocks[a][s])}function O(t,e,r){const n=r/t.blocksPerLine|0,i=r%t.blocksPerLine;e(t,t.blocks[n][i])}const S=n.length;let I,C,T,P,R,L;L=h?0===a?0===l?function(t,e){const r=m(t.huffmanTableDC),n=0===r?0:v(r)<<u;t.pred+=n,e[0]=t.pred}:function(t,e){e[0]|=y()<<u}:0===l?function(t,e){if(b>0)return void b--;let r=a;const n=s;for(;r<=n;){const n=m(t.huffmanTableAC),o=15&n,a=n>>4;if(0===o){if(a<15){b=_(a)+(1<<a)-1;break}r+=16}else r+=a,e[i[r]]=v(o)*(1<<u),r++}}:function(t,e){let r=a;const n=s;let o=0;for(;r<=n;){const n=i[r],a=e[n]<0?-1:1;switch(w){case 0:{const e=m(t.huffmanTableAC),r=15&e;if(o=e>>4,0===r)o<15?(b=_(o)+(1<<o),w=4):(o=16,w=1);else{if(1!==r)throw new Error("invalid ACn encoding");x=v(r),w=o?2:3}continue}case 1:case 2:e[n]?e[n]+=(y()<<u)*a:(o--,0===o&&(w=2===w?3:0));break;case 3:e[n]?e[n]+=(y()<<u)*a:(e[n]=x<<u,w=0);break;case 4:e[n]&&(e[n]+=(y()<<u)*a)}r++}4===w&&(b--,0===b&&(w=0))}:function(t,e){const r=m(t.huffmanTableDC),n=0===r?0:v(r);t.pred+=n,e[0]=t.pred;let o=1;for(;o<64;){const r=m(t.huffmanTableAC),n=15&r,a=r>>4;if(0===n){if(a<15)break;o+=16}else o+=a,e[i[o]]=v(n),o++}};let M,N,A=0;N=1===S?n[0].blocksPerLine*n[0].blocksPerColumn:c*r.mcusPerColumn;const k=o||N;for(;A<N;){for(C=0;C<S;C++)n[C].pred=0;if(b=0,1===S)for(I=n[0],R=0;R<k;R++)O(I,L,A),A++;else for(R=0;R<k;R++){for(C=0;C<S;C++){I=n[C];const{h:t,v:e}=I;for(T=0;T<e;T++)for(P=0;P<t;P++)E(I,L,A,T,P)}if(A++,A===N)break}if(g=0,M=t[p]<<8|t[p+1],M<65280)throw new Error("marker was not found");if(!(M>=65488&&M<=65495))break;p+=2}return p-f}function g(t,e){const r=[],{blocksPerLine:n,blocksPerColumn:i}=e,p=n<<3,d=new Int32Array(64),g=new Uint8Array(64);function y(t,r,n){const i=e.quantizationTable;let p,d,g,y,m,_,v,b,x;const w=n;let E;for(E=0;E<64;E++)w[E]=t[E]*i[E];for(E=0;E<8;++E){const t=8*E;0!==w[1+t]||0!==w[2+t]||0!==w[3+t]||0!==w[4+t]||0!==w[5+t]||0!==w[6+t]||0!==w[7+t]?(p=h*w[0+t]+128>>8,d=h*w[4+t]+128>>8,g=w[2+t],y=w[6+t],m=f*(w[1+t]-w[7+t])+128>>8,b=f*(w[1+t]+w[7+t])+128>>8,_=w[3+t]<<4,v=w[5+t]<<4,x=p-d+1>>1,p=p+d+1>>1,d=x,x=g*c+y*u+128>>8,g=g*u-y*c+128>>8,y=x,x=m-v+1>>1,m=m+v+1>>1,v=x,x=b+_+1>>1,_=b-_+1>>1,b=x,x=p-y+1>>1,p=p+y+1>>1,y=x,x=d-g+1>>1,d=d+g+1>>1,g=x,x=m*l+b*s+2048>>12,m=m*s-b*l+2048>>12,b=x,x=_*a+v*o+2048>>12,_=_*o-v*a+2048>>12,v=x,w[0+t]=p+b,w[7+t]=p-b,w[1+t]=d+v,w[6+t]=d-v,w[2+t]=g+_,w[5+t]=g-_,w[3+t]=y+m,w[4+t]=y-m):(x=h*w[0+t]+512>>10,w[0+t]=x,w[1+t]=x,w[2+t]=x,w[3+t]=x,w[4+t]=x,w[5+t]=x,w[6+t]=x,w[7+t]=x)}for(E=0;E<8;++E){const t=E;0!==w[8+t]||0!==w[16+t]||0!==w[24+t]||0!==w[32+t]||0!==w[40+t]||0!==w[48+t]||0!==w[56+t]?(p=h*w[0+t]+2048>>12,d=h*w[32+t]+2048>>12,g=w[16+t],y=w[48+t],m=f*(w[8+t]-w[56+t])+2048>>12,b=f*(w[8+t]+w[56+t])+2048>>12,_=w[24+t],v=w[40+t],x=p-d+1>>1,p=p+d+1>>1,d=x,x=g*c+y*u+2048>>12,g=g*u-y*c+2048>>12,y=x,x=m-v+1>>1,m=m+v+1>>1,v=x,x=b+_+1>>1,_=b-_+1>>1,b=x,x=p-y+1>>1,p=p+y+1>>1,y=x,x=d-g+1>>1,d=d+g+1>>1,g=x,x=m*l+b*s+2048>>12,m=m*s-b*l+2048>>12,b=x,x=_*a+v*o+2048>>12,_=_*o-v*a+2048>>12,v=x,w[0+t]=p+b,w[56+t]=p-b,w[8+t]=d+v,w[48+t]=d-v,w[16+t]=g+_,w[40+t]=g-_,w[24+t]=y+m,w[32+t]=y-m):(x=h*n[E+0]+8192>>14,w[0+t]=x,w[8+t]=x,w[16+t]=x,w[24+t]=x,w[32+t]=x,w[40+t]=x,w[48+t]=x,w[56+t]=x)}for(E=0;E<64;++E){const t=128+(w[E]+8>>4);r[E]=t<0?0:t>255?255:t}}for(let t=0;t<i;t++){const i=t<<3;for(let t=0;t<8;t++)r.push(new Uint8Array(p));for(let o=0;o<n;o++){y(e.blocks[t][o],g,d);let n=0;const a=o<<3;for(let t=0;t<8;t++){const e=r[i+t];for(let t=0;t<8;t++)e[a+t]=g[n++]}}}return r}class y{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(t){let e=0;function r(){const r=t[e]<<8|t[e+1];return e+=2,r}function n(){const n=r(),i=t.subarray(e,e+n-2);return e+=i.length,i}function o(t){let e,r,n=0,i=0;for(r in t.components)t.components.hasOwnProperty(r)&&(e=t.components[r],n<e.h&&(n=e.h),i<e.v&&(i=e.v));const o=Math.ceil(t.samplesPerLine/8/n),a=Math.ceil(t.scanLines/8/i);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];const s=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/n),l=Math.ceil(Math.ceil(t.scanLines/8)*e.v/i),u=o*e.h,c=a*e.v,h=[];for(let t=0;t<c;t++){const t=[];for(let e=0;e<u;e++)t.push(new Int32Array(64));h.push(t)}e.blocksPerLine=s,e.blocksPerColumn=l,e.blocks=h}t.maxH=n,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=a}let a=r();if(65496!==a)throw new Error("SOI not found");for(a=r();65497!==a;){switch(a){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const t=n();65504===a&&74===t[0]&&70===t[1]&&73===t[2]&&70===t[3]&&0===t[4]&&(this.jfif={version:{major:t[5],minor:t[6]},densityUnits:t[7],xDensity:t[8]<<8|t[9],yDensity:t[10]<<8|t[11],thumbWidth:t[12],thumbHeight:t[13],thumbData:t.subarray(14,14+3*t[12]*t[13])}),65518===a&&65===t[0]&&100===t[1]&&111===t[2]&&98===t[3]&&101===t[4]&&0===t[5]&&(this.adobe={version:t[6],flags0:t[7]<<8|t[8],flags1:t[9]<<8|t[10],transformCode:t[11]});break}case 65499:{const n=r()+e-2;for(;e<n;){const n=t[e++],o=new Int32Array(64);if(n>>4==0)for(let r=0;r<64;r++){o[i[r]]=t[e++]}else{if(n>>4!=1)throw new Error("DQT: invalid table spec");for(let t=0;t<64;t++){o[i[t]]=r()}}this.quantizationTables[15&n]=o}break}case 65472:case 65473:case 65474:{r();const n={extended:65473===a,progressive:65474===a,precision:t[e++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},i=t[e++];let s;for(let r=0;r<i;r++){s=t[e];const r=t[e+1]>>4,i=15&t[e+1],o=t[e+2];n.componentsOrder.push(s),n.components[s]={h:r,v:i,quantizationIdx:o},e+=3}o(n),this.frames.push(n);break}case 65476:{const n=r();for(let r=2;r<n;){const n=t[e++],i=new Uint8Array(16);let o=0;for(let r=0;r<16;r++,e++)i[r]=t[e],o+=i[r];const a=new Uint8Array(o);for(let r=0;r<o;r++,e++)a[r]=t[e];r+=17+o,n>>4==0?this.huffmanTablesDC[15&n]=p(i,a):this.huffmanTablesAC[15&n]=p(i,a)}break}case 65501:r(),this.resetInterval=r();break;case 65498:{r();const n=t[e++],i=[],o=this.frames[0];for(let r=0;r<n;r++){const r=o.components[t[e++]],n=t[e++];r.huffmanTableDC=this.huffmanTablesDC[n>>4],r.huffmanTableAC=this.huffmanTablesAC[15&n],i.push(r)}const a=t[e++],s=t[e++],l=t[e++],u=d(t,e,o,i,this.resetInterval,a,s,l>>4,15&l);e+=u;break}case 65535:255!==t[e]&&e--;break;default:if(255===t[e-3]&&t[e-2]>=192&&t[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker "+a.toString(16))}a=r()}}getResult(){const{frames:t}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let t=0;t<this.frames.length;t++){const e=this.frames[t].components;for(const t of Object.keys(e))e[t].quantizationTable=this.quantizationTables[e[t].quantizationIdx],delete e[t].quantizationIdx}const e=t[0],{components:r,componentsOrder:n}=e,i=[],o=e.samplesPerLine,a=e.scanLines;for(let t=0;t<n.length;t++){const o=r[n[t]];i.push({lines:g(0,o),scaleX:o.h/e.maxH,scaleY:o.v/e.maxV})}const s=new Uint8Array(o*a*i.length);let l=0;for(let t=0;t<a;++t)for(let e=0;e<o;++e)for(let r=0;r<i.length;++r){const n=i[r];s[l]=n.lines[0|t*n.scaleY][0|e*n.scaleX],++l}return s}}class m extends n.a{constructor(t){super(),this.reader=new y,t.JPEGTables&&this.reader.parse(t.JPEGTables)}decodeBlock(t){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(t)),this.reader.getResult().buffer}}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var n=r(87),i=r(41);class o extends i.a{decodeBlock(t){return Object(n.a)(new Uint8Array(t)).buffer}}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return i}));var n=r(41);class i extends n.a{decodeBlock(t){const e=new DataView(t),r=[];for(let n=0;n<t.byteLength;++n){let t=e.getInt8(n);if(t<0){const i=e.getUint8(n+1);t=-t;for(let e=0;e<=t;++e)r.push(i);n+=1}else{for(let i=0;i<=t;++i)r.push(e.getUint8(n+i+1));n+=t+1}}return new Uint8Array(r).buffer}}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return l}));var n=r(87),i=r(126),o=r.n(i),a=r(41),s=r(12);class l extends a.a{constructor(t){super(),this.planarConfiguration=void 0!==t.PlanarConfiguration?t.PlanarConfiguration:1,this.samplesPerPixel=void 0!==t.SamplesPerPixel?t.SamplesPerPixel:1,this.addCompression=t.LercParameters[s.c.AddCompression]}decodeBlock(t){switch(this.addCompression){case s.b.None:break;case s.b.Deflate:t=Object(n.a)(new Uint8Array(t)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: "+this.addCompression)}return o.a.decode(t,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return i}));var n=r(41);class i extends n.a{constructor(){if(super(),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available")}async decode(t,e){const r=new Blob([e]),n=await createImageBitmap(r);let i;"undefined"!=typeof document?(i=document.createElement("canvas"),i.width=n.width,i.height=n.height):i=new OffscreenCanvas(n.width,n.height);const o=i.getContext("2d");return o.drawImage(n,0,0),o.getImageData(0,0,n.width,n.height).data.buffer}}}]);
//# sourceMappingURL=mapea-6.2.0.ol.min.js.map