!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=74)}({46:function(t,e){t.exports='<div class="m-control m-drawfeature-container">\n   <button id="m-button-drawfeature" class="g-cartografia-editar2" title="Dibujar"></button>\n</div>'},47:function(t,e){t.exports='<div class="m-control m-modifyfeature-container">\n   <button id="m-button-modifyfeature" class="g-cartografia-flechas-mover" title="Modificar"></button>\n</div>'},48:function(t,e){t.exports='<div class="m-control m-deletefeature-container">\n   <button id="m-button-deletefeature" class="g-cartografia-papelera" title="Eliminar"></button>\n</div>'},49:function(t,e){t.exports='<div class="m-control m-clearfeature-container">\n   <button id="m-button-clearfeature" class="g-cartografia-flecha-deshacer" title="Limpiar"></button>\n</div>'},50:function(t,e){t.exports='<div class="m-control m-savefeature-container">\n   <button id="m-button-savefeature" class="g-cartografia-guardar" title="Guadar"></button>\n</div>'},51:function(t,e){t.exports='<div class="m-editattribute-content">\n    <table>\n        {{#each properties}}\n        <tr>\n            <td>{{key}}:</td>\n            <td>\n                <input id="{{key}}" type="text" value="{{value}}">\n            </td>\n        </tr>\n        {{/each}}\n    </table>\n    <button id="m-button-editattributeSave" class="save"><i class="g-cartografia-guardar"></i> Guardar</button>\n</div>\n'},52:function(t,e){t.exports='<div class="m-control m-editattribute-container">\n   <button id="m-button-editattribute" class="g-cartografia-texto" title="Editar"></button>\n</div>'},53:function(t){t.exports=JSON.parse('{"url":{"name":"wfstcontrols","separator":","},"constructor":"M.plugin.WFSTControls","parameters":[{"type":"array","properties":[{"type":"simple","position":0},{"type":"simple","position":1},{"type":"simple","position":2},{"type":"simple","position":3},{"type":"simple","position":4}]}],"files":{"ol":{"scripts":["wfstcontrols-3.0.2.ol.min.js"],"styles":["wfstcontrols-3.0.2.min.css"]}},"metadata":{"uuid_plugin":"","uuid_version_plugin":"","version_ficha_metadatos":"","name":"WFSTControls","description":"Tool for editing WFST layers.","text":"","version":"3.0.2","date":"11/10/2019","author":"Junta de Andalucía","org":"Junta de Andalucía","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","buttons":[{"title":"","description":"","querySelector":""},{"title":"","description":"","querySelector":""}],"dependencies":{"modules":["",""],"plugins":[{"uuid":"","name":""}],"services":[{"name":"","description":""}]},"compatibility":["4","5","6"]}}')},72:function(t,e,r){},74:function(t,e,r){"use strict";r.r(e);r(72);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(i,t);var e,r,n,o=y(i);function i(){return f(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"createInteraction_",value:function(){var t=this,e=this.layer_.getImpl().getOLLayer(),r=e.getSource().getFeatures()[0],n=null,o=[(n=M.utils.isUndefined(r)?new ol.style.Style({fill:new ol.style.Fill({color:"rgba(103, 175, 19, 0.2)",opacity:.4}),stroke:new ol.style.Stroke({color:"#67af13",width:1})}):e.getStyle()(e.getSource().getFeatures()[0])[0]).getFill(),n.getStroke()],i=o[0],u=o[1],a=new ol.style.Circle({fill:i||u,radius:5,stroke:u});n.getImage()&&(a=n.getImage()),this.interaction_=new ol.interaction.Draw({source:e.getSource(),type:M.geom.parseWFS(this.layer_.geometry),style:new ol.style.Style({image:a,fill:i,stroke:u||new ol.style.Stroke({fill:{color:"#000"}})})}),this.interaction_.on("drawend",(function(e){var r=e.feature;t.modifiedFeatures.push(r)}),this),this.layer_.on(M.evt.LOAD,this.updateLayerFeatures_.bind(this))}},{key:"updateLayerFeatures_",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.interaction_),this.interaction_=null}},{key:"deactivate",value:function(){M.utils.isNullOrEmpty(this.interaction_)&&this.createInteraction_(),this.facadeMap_.getMapImpl().removeInteraction(this.interaction_),this.interaction_=null}},{key:"setLayer",value:function(t){this.layer_=t}}])&&s(e.prototype,r),n&&s(e,n),i}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(c,M.impl.Control);var e,r,n,a=u(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).layer_=t,e.interaction_=null,e.modifiedFeatures=[],e}return e=c,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,ol.control.Control.call(this,{element:e,target:null}),t.getMapImpl().addControl(this)}},{key:"activate",value:function(){M.utils.isNullOrEmpty(this.interaction_)?(this.createInteraction_(),this.facadeMap_.getMapImpl().addInteraction(this.interaction_),this.interaction_.setActive(!0)):this.interaction_.setActive(!0)}},{key:"deactivate",value:function(){M.utils.isNullOrEmpty(this.interaction_)?(this.createInteraction_(),this.facadeMap_.getMapImpl().addInteraction(this.interaction_),this.interaction_.setActive(!1)):this.interaction_.setActive(!1)}},{key:"createInteraction_",value:function(){}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.layer_=null,this.interaction_=null,this.modifiedFeatures=null}}])&&o(e.prototype,r),n&&o(e,n),c}()),b=r(46),v=r.n(b);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=E(t);if(e){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(i,M.Control);var e,r,n,o=w(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new m(t);return(e=o.call(this,r,i.NAME)).name=i.NAME,M.utils.isUndefined(m)&&M.Exception("La implementación usada no puede crear controles DrawFeature"),e}return e=i,(r=[{key:"createView",value:function(t){return M.template.compileSync(v.a,{jsonp:!0})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-button-drawfeature")}},{key:"equals",value:function(t){var e=t instanceof i;return e}},{key:"setLayer",value:function(t){this.getImpl().setLayer(t)}}])&&g(e.prototype,r),n&&g(e,n),i}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return T(this,r)}}function T(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}P.NAME="drawfeature",P.TEMPLATE="drawfeature.html";var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(i,M.impl.Control);var e,r,n,o=R(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).layer_=t,e.modify=null,e.modifiedFeatures=[],e.currentFeature_=null,e}return e=i,(r=[{key:"activate",value:function(){M.utils.isNullOrEmpty(this.modify)&&this.createInteractionModify_(),this.modify.setActive(!0)}},{key:"deactivate",value:function(){M.utils.isNullOrEmpty(this.modify)&&this.createInteractionModify_(),this.facadeMap_.getMapImpl().removeInteraction(this.modify),this.modify=null}},{key:"createInteractionModify_",value:function(){var t=this,e=this.facadeMap_.getMapImpl(),r=this.layer_.getImpl().getOLLayer(),n=null,o=r.getSource().getFeatures()[0],i=(n=M.utils.isUndefined(o)?new ol.style.Style({fill:new ol.style.Fill({color:"rgba(103, 175, 19, 0.2)",opacity:.4}),stroke:new ol.style.Stroke({color:"#67af13",width:1})}):r.getStyle()(r.getSource().getFeatures()[0])[0]).getImage(),u=n.getStroke(),a=n.getFill();null!=i&&(u=i.getStroke());var c=null==u?null:u.clone();null!=c&&c.setColor(M.utils.getRgba(u.getColor())),null==i&&(i=new ol.style.Circle({fill:a||c,radius:5,stroke:u}));var l=new ol.Collection(r.getSource().getFeatures());l.forEach((function(e){e.on("change",(function(e){t.currentFeature_=e.target}),t)}),this),this.modify=new ol.interaction.Modify({features:l,deleteCondition:function(t){return ol.events.condition.shiftKeyOnly(t)&&ol.events.condition.singleClick(t)},style:new ol.style.Style({image:i})}),this.modify.on("modifyend",(function(e){var r=t.modifiedFeatures.indexOf(t.currentFeature_);r>=0?t.modifiedFeatures[r]=t.currentFeature_:t.modifiedFeatures.push(t.currentFeature_),t.currentFeature_=null}),this),e.addInteraction(this.modify),this.layer_.on(M.evt.LOAD,this.updateLayerFeatures_.bind(this))}},{key:"updateLayerFeatures_",value:function(){this.facadeMap_.getMapImpl().removeInteraction(this.modify),this.modify=null}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.layer_=null,this.modify=null,this.modifiedFeatures=[]}},{key:"setLayer",value:function(t){this.layer_=t}}])&&k(e.prototype,r),n&&k(e,n),i}(),L=r(47),C=r.n(L);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=W(t);if(e){var o=W(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return U(this,r)}}function U(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,M.Control);var e,r,n,o=q(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new x(t);return(e=o.call(this,r,i.NAME)).name=i.NAME,e.modify=null,M.utils.isUndefined(x)&&M.exception("La implementación usada no puede crear controles ModifyFeature"),e}return e=i,(r=[{key:"createView",value:function(t){return M.template.compileSync(C.a,{jsonp:!0})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-button-modifyfeature")}},{key:"equals",value:function(t){var e=t instanceof i;return e}},{key:"setLayer",value:function(t){this.getImpl().setLayer(t)}}])&&A(e.prototype,r),n&&A(e,n),i}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=J(t);if(e){var o=J(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}function Y(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}G.NAME="modifyfeature",G.TEMPLATE="modifyfeature.html";var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(i,M.impl.Control);var e,r,n,o=B(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).layer_=t,e.modifiedFeatures=[],e}return e=i,(r=[{key:"activate",value:function(){this.layer_.on(M.evt.SELECT_FEATURES,this.removeFeature_,this)}},{key:"deactivate",value:function(){this.layer_.un(M.evt.SELECT_FEATURES,this.removeFeature_,this)}},{key:"removeFeature_",value:function(t,e){var r=t[0].getImpl().getOLFeature();if(this.layer_.getImpl().getOLLayer().getSource().removeFeature(r),M.utils.isNullOrEmpty(r.getId())){var n=this.facadeMap_.getControls("drawfeature")[0];if(!M.utils.isNullOrEmpty(n)){var o=n.getImpl().modifiedFeatures,i=o.indexOf(r);o.splice(i,1)}}else this.modifiedFeatures.push(r)}},{key:"setLayer",value:function(t){this.layer_=t}}])&&H(e.prototype,r),n&&H(e,n),i}(),K=r(48),Q=r.n(K);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nt(t);if(e){var o=nt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return rt(this,r)}}function rt(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(i,M.Control);var e,r,n,o=et(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new X(t);return(e=o.call(this,r,i.NAME)).name=i.NAME,M.utils.isUndefined(X)&&M.exception("La implementación usada no puede crear controles DeleteFeature"),e}return e=i,(r=[{key:"createView",value:function(t){return M.template.compileSync(Q.a,{jsonp:!0})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-button-deletefeature")}},{key:"equals",value:function(t){var e=t instanceof i;return e}},{key:"setLayer",value:function(t){this.getImpl().setLayer(t)}}])&&$(e.prototype,r),n&&$(e,n),i}();function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function at(t,e,r){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=st(t);if(e){var o=st(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ft(this,r)}}function ft(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ot.NAME="deletefeature",ot.TEMPLATE="deletefeature.html";var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(i,M.impl.Control);var e,r,n,o=lt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).layer_=t,e}return e=i,(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,at(st(i.prototype),"addTo",this).call(this,t,e)}},{key:"clear",value:function(){var t=this.facadeMap_.getControls("drawfeature")[0];M.utils.isNullOrEmpty(t)||(t.getImpl().modifiedFeatures.length=0,t.deactivate());var e=this.facadeMap_.getControls("modifyfeature")[0];M.utils.isNullOrEmpty(e)||(e.getImpl().modifiedFeatures.length=0,e.deactivate());var r=this.facadeMap_.getControls("deletefeature")[0];M.utils.isNullOrEmpty(r)||(r.getImpl().modifiedFeatures.length=0,r.deactivate());var n=this.facadeMap_.getControls("editattribute")[0];M.utils.isNullOrEmpty(n)||(n.getImpl().editedFeature=null,n.deactivate()),this.layer_.getImpl().refresh(!0)}},{key:"destroy",value:function(){this.layer_=null,this.facadeMap_.getMapImpl().removeControl(this)}},{key:"setLayer",value:function(t){this.layer_=t}}])&&ut(e.prototype,r),n&&ut(e,n),i}(),yt=r(49),ht=r.n(yt);function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=gt(t);if(e){var o=gt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _t(this,r)}}function _t(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(i,M.Control);var e,r,n,o=vt(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new pt(t);return e=o.call(this,r,i.NAME),M.utils.isUndefined(pt)&&M.exception("La implementación usada no puede crear controles ClearFeature"),e}return e=i,(r=[{key:"createView",value:function(t){return M.template.compileSync(ht.a,{jsonp:!0})}},{key:"manageActivation",value:function(t){t.querySelector("button#m-button-clearfeature").addEventListener("click",this.clear_.bind(this))}},{key:"equals",value:function(t){var e=t instanceof i;return e}},{key:"clear_",value:function(t){t.preventDefault(),this.getImpl().clear()}},{key:"setLayer",value:function(t){this.getImpl().setLayer(t)}}])&&mt(e.prototype,r),n&&mt(e,n),i}();function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mt(t,e,r){return(Mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=kt(t);if(e){var o=kt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return jt(this,r)}}function jt(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ot.NAME="clearfeature",Ot.TEMPLATE="clearfeature.html";var Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(i,M.impl.Control);var e,r,n,o=Pt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).layer_=t,e}return e=i,n=[{key:"applyDescribeFeatureType",value:function(t,e){var r=this.layer_.getImpl();t.forEach((function(t){var n=t.getGeometryName(),o=t.getGeometry();t.set(e.geometryName,o),t.setGeometryName(e.geometryName),t.setGeometry(o),t.unset(n),!M.utils.isNullOrEmpty(e)&&M.utils.isArray(e.properties)&&e.properties.forEach((function(e){if(!M.utils.isGeometryType(e.localType)){var n=t.getProperties()[e.name]||r.getDefaultValue(e.localType);t.set(e.name,n)}}))}))}}],(r=[{key:"addTo",value:function(t,e){this.facadeMap_=t,Mt(kt(i.prototype),"addTo",this).call(this,t,e)}},{key:"saveFeature",value:function(){var t=this;this.layer_.getImpl().getDescribeFeatureType().then((function(e){var r=null,n=null,o=null,u=t.facadeMap_.getControls(P.NAME)[0];M.utils.isNullOrEmpty(u)||(r=u.getImpl().modifiedFeatures,i.applyDescribeFeatureType.bind(t)(r,e));var a=t.facadeMap_.getControls(G.NAME)[0];M.utils.isNullOrEmpty(a)||(n=a.getImpl().modifiedFeatures,i.applyDescribeFeatureType.bind(t)(n,e));var c=t.facadeMap_.getControls(ot.NAME)[0];M.utils.isNullOrEmpty(c)||(o=c.getImpl().modifiedFeatures,i.applyDescribeFeatureType.bind(t)(o,e)),M.utils.isNullOrEmpty(n)||n.forEach((function(t){t.unset("bbox")})),M.utils.isNullOrEmpty(r)||r.forEach((function(t){t.unset("bbox")}));var l=t.facadeMap_.getProjection().code,f=(new ol.format.WFS).writeTransaction(r,n,o,{featureNS:e.featureNS,featurePrefix:e.featurePrefix,featureType:t.layer_.name,srsName:l,gmlOptions:{srsName:l}}),s=(new XMLSerializer).serializeToString(f);M.proxy(!1),M.remote.post(t.layer_.url,s).then((function(e){t.facadeMap_.getControls(Ot.NAME)[0].getImpl().clear(),200===e.code&&-1===e.text.indexOf("ExceptionText")&&-1===e.text.indexOf("<error><descripcion>")?M.dialog.success("Se ha guardado correctamente"):401===e.code?M.dialog.error("Ha ocurrido un error al guardar: Usuario no autorizado"):M.dialog.error("Ha ocurrido un error al guardar: ".concat(e.text))})),M.proxy(!0)}))}},{key:"destroy",value:function(){this.layer_=null,this.facadeMap_.getMapImpl().removeControl(this)}},{key:"setLayer",value:function(t){this.layer_=t}}])&&St(e.prototype,r),n&&St(e,n),i}(),Rt=r(50),Tt=r.n(Rt);function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=At(t);if(e){var o=At(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return It(this,r)}}function It(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(i,M.Control);var e,r,n,o=Ct(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new Ft(t);return(e=o.call(this,r,i.NAME)).name=i.NAME,M.utils.isUndefined(Ft)&&M.exception("La implementación usada no puede crear controles SaveFeature"),e}return e=i,(r=[{key:"createView",value:function(t){return this.facadeMap_=t,M.template.compileSync(Tt.a,{jsonp:!0})}},{key:"equals",value:function(t){var e=t instanceof i;return e}},{key:"manageActivation",value:function(t){t.querySelector("button#m-button-savefeature").addEventListener("click",this.saveFeature_.bind(this))}},{key:"saveFeature_",value:function(t){t.preventDefault(),this.getImpl().saveFeature()}},{key:"setLayer",value:function(t){this.getImpl().setLayer(t)}}])&&xt(e.prototype,r),n&&xt(e,n),i}();Dt.NAME="savefeature",Dt.TEMPLATE="savefeature.html";var qt=r(51),Ut=r.n(qt);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vt(t,e,r){return(Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yt(t);if(e){var o=Yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bt(this,r)}}function Bt(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(i,M.impl.Control);var e,r,n,o=zt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).layer_=t,e.editFeature=null,e}return e=i,(r=[{key:"activate",value:function(){this.layer_.on(M.evt.SELECT_FEATURES,this.showEditPopup_,this),this.layer_.on(M.evt.UNSELECT_FEATURES,this.unselectFeature_,this)}},{key:"deactivate",value:function(){this.layer_.un(M.evt.SELECT_FEATURES,this.showEditPopup_,this),this.layer_.un(M.evt.UNSELECT_FEATURES,this.unselectFeature_,this)}},{key:"showEditPopup_",value:function(t,e){var r=this;this.unselectFeature_(),this.editFeature=t[0].getImpl().getOLFeature();var n=e.coord;if(M.utils.isNullOrEmpty(this.editFeature.getId()))this.editFeature=null,M.dialog.info("Debe guardar el elemento previamente");else{this.editFeature.setStyle(i.SELECTED_STYLE);var o={properties:[]};Object.keys(this.editFeature.getProperties()).filter((function(t){return"geometry"!==t})).forEach((function(t){o.properties.push({key:t,value:r.editFeature.get(t)})}),this);var u={jsonp:!0,vars:o,parseToHtml:!1},a=M.template.compileSync(Ut.a,u),c={icon:"g-cartografia-texto",title:oe,content:a};this.popup_=this.facadeMap_.getPopup(),M.utils.isNullOrEmpty(this.popup_)?(this.popup_=new M.Popup,this.popup_.addTab(c),this.facadeMap_.addPopup(this.popup_,n)):this.popup_.getTabs().some((function(t){return t.title!==oe}))?this.popup_.addTab(c):(this.facadeMap_.removePopup(),this.popup_=new M.Popup,this.popup_.addTab(c),this.facadeMap_.addPopup(this.popup_,n));var l=this.popup_.getContent().querySelector("button#m-button-editattributeSave");M.utils.isNullOrEmpty(l)||l.addEventListener("click",this.saveAttributes_.bind(this)),this.popup_.on(M.evt.DESTROY,(function(){var t=r.popup_.getContent().querySelector("button#m-button-editattributeSave");M.utils.isNullOrEmpty(t)||l.removeEventListener("click",r.saveAttributes_.bind(r)),r.unselectFeature_()}),this)}}},{key:"saveAttributes_",value:function(t){var e=this;this.editFeature.unset("bbox",!0);var r=this.popup_.getContent(),n=t.target,o=this.editFeature.getProperties();n.classList.add("m-savefeature-saving"),Object.keys(o).forEach((function(t){if(null!==r.querySelector("input#".concat(t))){var n=r.querySelector("input#".concat(t)).value;e.editFeature.set(t,n,!0)}}),this),this.layer_.getImpl().getDescribeFeatureType().then((function(t){var r=e.editFeature.getGeometryName(),o=e.editFeature.getGeometry();e.editFeature.setGeometryName(t.geometryName),e.editFeature.setGeometry(o),e.editFeature.unset(r);var i=e.facadeMap_.getProjection().code,u=(new ol.format.WFS).writeTransaction(null,[e.editFeature],null,{featureNS:t.featureNS,featurePrefix:t.featurePrefix,featureType:e.layer_.name,srsName:i,gmlOptions:{srsName:i}}),a=(new XMLSerializer).serializeToString(u);e.facadeMap_.removePopup(e.popup_),M.remote.post(e.layer_.url,a).then((function(t){n.classList.remove("m-savefeature-saving"),200===t.code?M.dialog.success("Se ha guardado correctamente el elemento"):M.dialog.error("Ha ocurrido un error al guardar: ".concat(t.text))}))}))}},{key:"unselectFeature_",value:function(){this.facadeMap_.getFeatureHandler().clearSelectedFeatures(),null!==this.editFeature&&(this.editFeature.setStyle(M.impl.layer.WFS.STYLE),this.editFeature=null,this.facadeMap_.removePopup())}},{key:"destroy",value:function(){Vt(Yt(i.prototype),"destroy",this).call(this),M.utils.isNull(this.facadeMap_)||M.utils.isNull(this.facadeMap_.getPopup())||this.facadeMap_.removePopup()}},{key:"setLayer",value:function(t){this.layer_=t}}])&&Gt(e.prototype,r),n&&Gt(e,n),i}();Jt.SELECTED_STYLE=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(175, 127, 19, 0.2)"}),stroke:new ol.style.Stroke({color:"#af7f13",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#af7f13"})})});var Xt=r(52),Kt=r.n(Xt);function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=re(t);if(e){var o=re(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ee(this,r)}}function ee(t,e){return!e||"object"!==Qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}(i,M.Control);var e,r,n,o=te(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=new Jt(t);return(e=o.call(this,r,i.NAME)).name=i.NAME,M.utils.isUndefined(Jt)&&M.exception("La implementación usada no puede crear controles EditAttribute"),e}return e=i,(r=[{key:"createView",value:function(t){return M.template.compileSync(Kt.a,{jsonp:!0})}},{key:"getActivationButton",value:function(t){return t.querySelector("button#m-button-editattribute")}},{key:"equals",value:function(t){var e=t instanceof i;return e}},{key:"setLayer",value:function(t){this.getImpl().setLayer(t)}}])&&Zt(e.prototype,r),n&&Zt(e,n),i}();ne.NAME="editattribute";var oe="Editattribute";ne.TEMPLATE="editattribute.html";var ie=r(53);function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=se(t);if(e){var o=se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return fe(this,r)}}function fe(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(i,M.Plugin);var e,r,n,o=le(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this)).controls=t,r.controls_=[],r.name=i.NAME,r.layername_=e,r.map_=null,r.drawfeature_=null,r.modifyfeature_=null,r.deletefeature_=null,r.clearfeature_=null,r.savefeature_=null,r.editattibute_=null,r.metadata_=ie.metadata,r}return e=i,(r=[{key:"addTo",value:function(t){this.map_=t;var e=this.map_.getWFS()[0],r=this.map_.getWFS({name:this.layername_})[0],n=M.utils.isNullOrEmpty(r)?e:r;if(this.panel_=new M.ui.Panel("edit",{collapsible:!0,className:"m-edition",collapsedButtonClass:"g-cartografia-editar",position:M.ui.position.TL,tooltip:"Herramientas de edición"}),M.utils.isNullOrEmpty(n))M.dialog.error("Los controles <b>".concat(this.controls.join(","),"</b> no se pueden añadir al mapa porque no existe una capa WFS cargada."));else{for(var o=!1,i=!1,u=0,a=this.controls.length;u<a;u+=1)"drawfeature"===this.controls[u]?(this.drawfeature_=new P(n),this.controls_.push(this.drawfeature_),o=!0,i=!0):"modifyfeature"===this.controls[u]?(this.modifyfeature_=new G(n),this.controls_.push(this.modifyfeature_),o=!0,i=!0):"deletefeature"===this.controls[u]?(this.deletefeature_=new ot(n),this.controls_.push(this.deletefeature_),o=!0,i=!0):"editattribute"===this.controls[u]&&(this.editattibute_=new ne(n),this.controls_.push(this.editattibute_),i=!0);o&&(this.savefeature_=new Dt(n),this.controls_.push(this.savefeature_)),i&&(this.clearfeature_=new Ot(n),this.controls_.push(this.clearfeature_)),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_),this.map_.panel.EDITION=this.panel_}}},{key:"getControls",value:function(){return this.controls_}},{key:"destroy",value:function(){this.map_.removeControls([this.drawfeature_,this.modifyfeature_,this.deletefeature_,this.clearfeature_,this.savefeature_,this.editattibute_]),this.controls=null,this.map_=null,this.drawfeature_=null,this.modifyfeature_=null,this.deletefeature_=null,this.clearfeature_=null,this.savefeature_=null,this.editattibute_=null}},{key:"setLayer",value:function(t){this.layername_=t;var e=this.map_.getWFS({name:this.layername_})[0];if(M.utils.isNullOrEmpty(e))M.dialog.error("Los capa <b>".concat(t,"</b> no es una capa WFS cargada."));else{var r=[];M.utils.isNullOrEmpty(this.drawfeature_)||r.push(this.drawfeature_),M.utils.isNullOrEmpty(this.modifyfeature_)||r.push(this.modifyfeature_),M.utils.isNullOrEmpty(this.deletefeature_)||r.push(this.deletefeature_),M.utils.isNullOrEmpty(this.clearfeature_)||r.push(this.clearfeature_),M.utils.isNullOrEmpty(this.savefeature_)||r.push(this.savefeature_),M.utils.isNullOrEmpty(this.editattibute_)||r.push(this.editattibute_),this.clearfeature_.getImpl().clear(),r.forEach((function(t){return t.setLayer(e)}))}}},{key:"equals",value:function(t){return t instanceof i}},{key:"getAPIRest",value:function(){return"wfstcontrols=".concat(this.controls.join(","))}},{key:"getMetadata",value:function(){return this.metadata_}}])&&ae(e.prototype,r),n&&ae(e,n),i}();pe.NAME="wfstcontrols",null==window.M.plugin&&(window.M.plugin={}),window.M.plugin.WFSTControls=pe}});